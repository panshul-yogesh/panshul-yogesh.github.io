{
  "title": "Configure load balancer for Audit service (GCP)",
  "content": "<div class=\"mw-parser-output\"><p>To access the Audit service, you must create an Application Load Balancer (ALB) and configure the listener for the Audit service on this ALB. </p>\n<h2 id=\"Target_groups\">External ALB for Audit </h2>\n<p>You can configure ALB for Audit in by either updating the existing external ALB or creating an external ALB.</p>\n<h3>Update existing external ALB</h3>\n<p>Add a rule to the existing ALB, where the ingress controller port is the port number to reach the Audit service. </p>\n<h3>Create external ALB for Audit</h3>\n<p>Follow these steps to create an external ALB for Audit:</p>\n<ol>\n<li>Save the content below as <strong>audit-service-public-ingress.yaml</strong> in the install directory (<strong>audit-20xx.xx</strong>):\n\n\t<pre>apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n annotations:\n   ingress.kubernetes.io/secure-backends: \"true\"\n   kubernetes.io/ingress.global-static-ip-name: audit-ingress\n   kubernetes.io/ingress.allow-http: \"false\"\n   kubernetes.io/ingress.class: gce\n   ingress.gcp.kubernetes.io/backend-service: \"audit-itom-ingress-controller-svc\"\n labels:\n   app: audit-ingress\n name: audit-ingress\n namespace: &lt;audit_namespace&gt;\nspec:\n rules:\n   - host: &lt;external_access_host&gt;\n     http:\n       paths:\n         - backend:\n             service:\n               name: audit-itom-ingress-controller-svc\n               port:\n                 number: &lt;ingress_controller_port&gt;\n           pathType: ImplementationSpecific\n \n tls:\n   - secretName: nginx-default-secret\n</pre>\n<p>Replace the following with the actual values:</p>\n<p><em>&lt;audit_namespace&gt;</em>: The unique namespace of the Audit deployment. For example, <strong>auditns</strong>. <br/>\n<em>&lt;external_access_host&gt;</em>: The FQDN you've allocated for Audit Service. For example, <em>audit.com </em>as shown in the diagram. Go to AWS Route 53 service and create a separate FQDN by creating a new record under the domain used for suite installation.<br/>\n<em>&lt;ingress_controller_port&gt;</em>: The port number of the ingress controller of the Audit service (<code>audit-itom-ingress-controller-svc</code>). For example, <b>31051</b>.</p>\n</li>\n<li>Run the following command to apply the saved YAML file:\n\t<pre>kubectl create -f <code>audit-service-public-ingress</code>.yaml\n</pre>\n</li>\n</ol>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}