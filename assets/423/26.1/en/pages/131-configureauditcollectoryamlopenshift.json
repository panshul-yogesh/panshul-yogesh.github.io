{
  "title": "Configure values.yaml for Audit collector (OpenShift)",
  "content": "<div class=\"mw-parser-output\"><br/><p class=\"mw-empty-elt\">You need to create a custom<b> values.yaml</b> file and configure the parameters for an Audit collector deployment on OpenShift.</p>\n<h2>Create and configure a values.yaml file for Audit collector</h2>\n<p>You can create and configure the <b>values.yaml</b> file based on the sample file (example<strong> values.yaml</strong>) provided in the Audit collector helm chart package.</p>\n<ol>\n<li>\n<p>Create a copy of the sample file.</p>\n<pre>cp audit-collector-helm-chart/audit-collector/samples/values.yaml .</pre>\n</li>\n<li>\n<p>Edit the <b>values.yaml</b> file using any editor and give the required values in the file.</p>\n</li>\n</ol>\n<h3>Docker registry settings</h3>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n<tr>\n<td><strong>global.docker.registry</strong></td>\n<td>The docker registry from where the required images will get pulled from.</td>\n<td>Yes</td>\n<td><strong>localhost:5000</strong></td>\n<td><strong>registry.example.<br/>\n\t\t\tcom:443</strong></td>\n</tr>\n<tr>\n<td><strong>global.docker.orgName</strong></td>\n<td>The docker organization name.</td>\n<td>Yes</td>\n<td><strong>hpeswitom</strong></td>\n<td><strong>hpeswitom</strong></td>\n</tr>\n<tr>\n<td><strong>global.docker.imagePullSecret</strong></td>\n<td>The K8s secret that contains the credentials required to pull images from the specified docker registry.</td>\n<td>Yes</td>\n<td><strong>registrypullsecret</strong></td>\n<td><strong>registrypullsecret</strong></td>\n</tr>\n<tr>\n<td><strong>global.docker.imagePullPolicy</strong></td>\n<td>The image pull policy.</td>\n<td>Optional</td>\n<td><strong>IfNotPresent</strong></td>\n<td><strong>IfNotPresent</strong></td>\n</tr>\n</thead>\n</table>\n<h3>IdM configuration</h3>\n<p>IdM supports only https communication. It's strongly recommended that Audit collector should access IdM through an internal LB.</p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n<tr>\n<td><strong>global.idm.idmSvcHost</strong></td>\n<td>This is the internal IdM FQDN.</td>\n<td>Yes</td>\n<td><strong>Not defined</strong></td>\n<td><strong>esm.esm-aio-01.itsma-ng.net</strong></td>\n</tr>\n<tr>\n<td><strong>global.idm.idmSvcPort</strong></td>\n<td>This is the port used to access IdM using the internal IdM FQDN.</td>\n<td>Yes</td>\n<td><strong>443</strong></td>\n<td><strong>443</strong></td>\n</tr>\n</thead>\n</table>\n<h3>Vault init configuration</h3>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n<tr>\n<td><strong>auditCollector.vault.appRoleName</strong></td>\n<td>The role name used by any of the services in the namespace where Audit collector is getting deployed to access the vault.</td>\n<td>Yes</td>\n<td><strong>Not defined</strong></td>\n<td><strong>itsma-wkyr2-itom-itsma-certificate</strong></td>\n</tr>\n</thead>\n</table>\n<p>To fetch the app role name, follow these steps:</p>\n<ol>\n<li>To get the app role name, run the following command:\n\t<pre><code>kubectl describe secret --all-namespaces | grep -i approle-name=&lt;Namespace&gt;</code></pre>\n<p>Example:<br/>\n\t </p>\n<pre><code>kubectl describe secret --all-namespaces | grep -i approle-name=itsma-wkyr2</code></pre>\n\tOutput:\n\n\t<pre><code>Labels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-sma-ui\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-dnd\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-smartanalytics\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-dnd-platform\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-xruntime\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-bo\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-xruntime-infra\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-cmp\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-ingress\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-itsma-certificate\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-sm-gateway\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-sma-xie\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-itsma-config\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-cgro\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-itsma-throttling\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-autopass\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-chat\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-virtual-agent\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-idm\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-pgha\n\tLabels:       deployment.microfocus.com/approle-name=itsma-wkyr2-itom-sam</code></pre>\n</li>\n<li>Note down any one of the <strong>approle-name</strong>, for example, <strong>itsma-wkyr2-itom-itsma-certificate</strong>.</li>\n</ol>\n<h3>Audit collector NFS configuration</h3>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n<tr>\n<td><strong>auditCollector.nfs.collectionDelay</strong></td>\n<td>The time gap (in minutes) between every audit file collection (collection interval).</td>\n<td>Yes</td>\n<td><strong>60</strong></td>\n<td><strong>60</strong></td>\n</tr>\n<tr>\n<td><strong>auditCollector.nfs.subpath</strong></td>\n<td>\n<p>The subPath is the directory/subPath to the PVC path. For example, if PVC is pointing to <code>/var/vols/itom/itsma/global-volume</code> and subPath is <code>audit</code>, then the Audit collector collects the files from the NFS path <code>/var/vols/itom/itsma/global-volume/audit</code>. Audit producer should create this path.</p>\n<p>For example, by default, SMAX uses the <strong>&lt;global-volume&gt;/audit </strong>directory, and UD/UCMDB uses the <strong>&lt;log-volume&gt;/ucmdb/audit </strong>directory on its NFS server as a fallback to store audits when audits don't get pushed to the audit engine. For more information, see <a href=\"/doc/423/26.1/administerauditfilesonnfs\" title=\"Administer audit files on the audit client NFS server\">Administer audit files on the audit client NFS server</a>.</p>\n</td>\n<td>Yes</td>\n<td><strong>Not defined</strong></td>\n<td><strong>audit</strong></td>\n</tr>\n</thead>\n</table>\n<h3>Audit engine configuration</h3>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n<tr>\n<td><b>auditCollector.auditengine.url</b></td>\n<td>The audit engine URL: <code>https://&lt;Audit FQDN:Audit engine port&gt;/audit-service-engine</code>. You don't have to give the audit engine port if the port is 443.</td>\n<td>Yes</td>\n<td>Not defined</td>\n<td><strong>https://audit.esm.itsma-ng.net/audit-service-engine</strong></td>\n</tr>\n</thead>\n</table>\n<h3>IdM user configuration</h3>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n<tr>\n<td><b>auditCollector.idm.integrationUser</b></td>\n<td>The user that's used to send audit to the Audit service. This user can be same as the Audit producer's integration user. This user should be a part of the administrator group of <strong>sysbo</strong> in IdM. Set the password for this user to never expire.</td>\n<td>Yes</td>\n<td><strong>Not defined</strong></td>\n<td><strong>suite-admin</strong></td>\n</tr>\n<tr>\n<td><b>auditCollector.idm.integrationUserOrgName</b></td>\n<td>The  organization that the integration user belongs to.</td>\n<td>Yes</td>\n<td><strong>Not defined</strong></td>\n<td><strong>sysbo</strong></td>\n</tr>\n</thead>\n</table>\n<h3>PVC</h3>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n<tr>\n<td><b>auditCollector.pvc.name</b></td>\n<td>The PVC that's common between the Audit producer and the Audit collector as these two apps work on the same directory. Audit collector checks for audit files in this PVC. Refer to the <strong>auditCollector.nfs.subpath</strong> for the specific directory location.</td>\n<td>Yes</td>\n<td><strong>Not defined</strong></td>\n<td><strong>global-volume</strong></td>\n</tr>\n</thead>\n</table>\n<div> </div>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}