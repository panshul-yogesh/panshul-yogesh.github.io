{
  "title": "Create application load balancer for Audit service (GCP)",
  "content": "<div class=\"mw-parser-output\"><br/><br/><p class=\"mw-empty-elt\">For the suite and Audit service to work together on AWS, you can configure an internal Application Load Balancer (ALB) between the ingress services of the suite and Audit. This practice enables you to isolate internal integration from external access. </p>\n<p>Here are the details of the port:</p>\n<ul>\n<li>Type: Ingress listener port for integration</li>\n<li>Component: Audit</li>\n<li>Example: 443</li>\n</ul>\n<h2 id=\"Target_groups\">Internal ALB for Audit </h2>\n<p>You can configure ALB for Audit in two ways by either updating the existing internal ALB or creating an internal ALB.</p>\n<h3>Update existing internal ALB</h3>\n<p>Add a rule to the existing ALB, where ingress controller port is the port number to reach the Audit service. </p>\n<h3>Create internal ALB for Audit</h3>\n<p><span style='color: rgb(51, 51, 51); font-family: Roboto, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"; font-size: 16px;'>Follow these steps to c</span><span style='color: rgb(51, 51, 51); font-family: Roboto, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"; font-size: 16px;'>reate an internal ALB for Audit</span><span style='color: rgb(51, 51, 51); font-family: Roboto, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"; font-size: 16px;'>:</span></p>\n<ol>\n<li>Save the content below as <strong>audit-service-internal-ingress.yaml </strong>in the install directory (<strong>audit-20xx.xx</strong>):\n\n\t<pre>apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n annotations:\n   ingress.kubernetes.io/secure-backends: \"true\"\n   kubernetes.io/ingress.regional-static-ip-name: audit-internal-ingress\n   kubernetes.io/ingress.allow-http: \"false\"\n   kubernetes.io/ingress.class: gce-internal\n   ingress.gcp.kubernetes.io/backend-service: \"audit-itom-ingress-controller-svc\"\n labels:\n   app: audit-ingress\n name: audit-internal-ingress\n namespace: &lt;audit_namespace&gt;\nspec:\n rules:\n   - host: &lt;integration_hostname&gt;\n     http:\n       paths:\n         - backend:\n             service:\n               name: audit-itom-ingress-controller-svc\n               port:\n                 number: &lt;ingress_controller_port&gt;\n           pathType: ImplementationSpecific\n \n tls:\n   - secretName: nginx-default-secret\n</pre>\n<p>Replace the following with the actual values:<br/>\n<em>&lt;audit_namespace&gt;</em>: The unique namespace of the Audit deployment. For example, <strong>audit</strong><b>ns</b>.</p>\n<p><em>&lt;integration_hostname&gt;</em>: The FQDN you've allocated for integration. For example, <em>internal.com</em> as shown in the diagram. Go to AWS Route 53 service and create a separate FQDN by creating a new record under the domain used for suite installation.<br/>\n<em>&lt;ingress_controller_port&gt;</em>: The port number of the ingress controller of the Audit service (<code>audit-itom-ingress-controller-svc</code>). For example, <b>31051</b>.</p>\n</li>\n<li>Run the following command to apply the saved YAML file:\n\t<pre>kubectl create -f audit-service-internal-ingress.yaml\n</pre>\n</li>\n</ol>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}