{
  "title": "Configure Google Cloud Filestore for OO",
  "content": "<div class=\"mw-parser-output\"><br/><br/><p>OO shares the same Google Cloud Filestore with the OpenText Service Management suite.</p>\n<p>This section describes how to prepare the OO directory structure in the suite Google Cloud Filestore mount. These directories will be later referenced in the OO Persistent Volume templates. </p>\n<h2 id=\"Prepare_EFS_template_for_CMS\">Volumes required for OO</h2>\n<p>The following volumes are required by OO: </p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Component</th>\n<th scope=\"col\">Google Cloud Filestore volume name</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Example Directory path</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>OO</td>\n<td><code>oo-config-vol</code></td>\n<td>Stores OO configuration files.</td>\n<td><code>/var/vols/itom/oo/oo_config_vol</code></td>\n</tr>\n<tr>\n<td>OO</td>\n<td><code>oo-data-vol</code></td>\n<td>Stores OO, OO deployed AutoPass, and OO deployed Vault generated data.</td>\n<td><code>/var/vols/itom/oo/oo_data_vol</code></td>\n</tr>\n<tr>\n<td>OO</td>\n<td><code>oo-logs-vol</code></td>\n<td>Stores logs generated by the OO components, except RAS logs which are stored in a different volume.</td>\n<td><code>/var/vols/itom/oo/oo_logs_vol</code></td>\n</tr>\n<tr>\n<td>OO</td>\n<td><code>oo-data-export-vol</code></td>\n<td>\n<p>OO runs a <b>cron-job</b> for purging OO database with a retention period set to 375 days (default value). </p>\n<p>All the database data that's marked for purge gets exported first and exposed in this volume before purging. </p>\n</td>\n<td><code>/var/vols/itom/oo/oo_data_export_vol</code></td>\n</tr>\n<tr>\n<td>OO</td>\n<td><code>oo-ras-logs-vol</code></td>\n<td>Stores OO RAS logs. </td>\n<td><code>/var/vols/itom/oo/oo_ras_logs_vol</code></td>\n</tr>\n</tbody>\n</table>\n<h2>Configure Google Cloud Filestore volumes for OO</h2>\n<ol>\n<li>\n<p>Log in to the bastion with the following command:</p>\n<pre>ssh -i &lt;private_key_pem_file&gt; centos@&lt;bastion_ip&gt;</pre>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"> </div>\n<div class=\"admonition-content admonition-note-content\">The <code>private_key_pem_file</code> and <code>bastion_ip</code> are created during the Service Management installation.</div>\n</div>\n</li>\n<li>\n<p>Copy and save the following script as<b> configureOOFS.sh</b>:</p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"> </div>\n<div class=\"admonition-content admonition-note-content\">Take the <strong>Example directory path</strong> as the directory path of Google Cloud Filestore volumes required for OO.</div>\n</div>\n<pre><code>#!/bin/bash\nif [ $# -lt 1 ]; then\n    echo \"Usage: $0 \"\n    exit 1\nfi\nCURRENTDIR=$(cd \"$(dirname \"$0\")\";pwd)\nefs_server=$1\nfile_share_name=$2\nsuite_user_uid=$3\nsuite_user_gid=$4\nmount_point=/mnt/oo\nif [ ! -d $mount_point ]; then\n    sudo mkdir -p $mount_point\nfi\nexport TIMEOUT_FOR_SERVICES=120\n  \nmountFS() {\n    local n=0\n    while :; do\n        n=$(($n + 1))\n        if [[ $n -ge $TIMEOUT_FOR_SERVICES ]]; then\n            echo \"check timeout for mount Filestore\"\n            exit 1\n        fi\n        returnCode=`sudo mount -t nfs -o vers=3 $efs_server:/$file_share_name $mount_point`\n        if [[ $returnCode -eq 0 ]] || [[ $returnCode -eq 32 ]]; then\n            echo \"Successfully mount Filestore\"\n            sudo sed -i '$a\\'\"$efs_server:/$file_share_name $mount_point nfs -o vers=3 0 0 \" /etc/fstab\n            break\n        fi\n        sleep 15\n    done\n}\n  \nmake_volume() {\n    local volume=$1\n    cd $mount_point\n    local mounted_pv=${mount_point}${volume}\n    if [ ! -d $mounted_pv ]; then\n        sudo mkdir -p $mounted_pv\n    fi\n    chown -R $suite_user_uid:$suite_user_gid $mounted_pv\n    chmod g+w $mounted_pv\n    chmod g+s $mounted_pv\n    echo \"Successfully make volume: ${volume}\"\n}</code></pre>\n</li>\n<li>\n<p>Run the following commands to configure the Google Cloud Filestore volumes for OO:</p>\n<pre>chmod 755 configureOOFS.sh\nsudo ./configureOOFS.sh &lt;FS_IP&gt; &lt;SYSTEM_USER_ID&gt; &lt;SYSTEM_GROUP_ID&gt;</pre>\n<p>Where:</p>\n<ul>\n<li><code>&lt;FS_IP&gt;</code> = the DNS name of the suite Google Cloud Filestore server</li>\n<li><code>&lt;SYSTEM_USER_ID&gt;</code> and <code>&lt;SYSTEM_GROUP_ID&gt;</code> = user and group ID respectively, of the user that has read and write access in the Google Cloud Filestore server\n\t\t<ul>\n<li>The user specified here will be the user that runs the container processes and read/write into the mounted volumes</li>\n<li>Unless otherwise specified when the suite was installed, the defaults for <strong>UID</strong> and <strong>GID</strong> are: 1999. </li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<div> </div>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}