{
  "title": "Download and upload container images for OO",
  "content": "<div class=\"mw-parser-output\"><br/><br/><p>Before you deploy the suite, you need to download the required images from Docker Hub or other registries and then upload the images to your registry. </p>\n<div>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"> </div>\n<div class=\"admonition-content admonition-note-content\">If you have already uploaded images to your registry, skip this step.</div>\n</div>\n</div>\n<h2>Generate the image set</h2>\n<p>Before downloading and uploading the images, you need to generate the image set with the following steps:</p>\n<ol>\n<li>\n<p>Run the following command to change the directory:</p>\n<pre><code>cd &lt;OMT_External_K8s_2x.x-xxx&gt;/tools/generate-download</code></pre>\n</li>\n<li>Run the <code>generate_download_bundle.sh</code> command together with the options required by your deployment.\n\t<pre><code>./generate_download_bundle.sh --chart &lt;helm chart file&gt; -o &lt;org name&gt; [-d &lt;destination dir&gt;]</code></pre>\n<p>Where:</p>\n<ul>\n<li><code>&lt;OO helm chart file&gt;</code> is the absolute path to the OO Helm chart archive.<br/>\n\t\tExample: <code>oo-helm-charts-1.x.x+26.x.x/oo-helm-charts/charts/oo-1.x.x+26.x.x.tgz</code></li>\n<li><code>&lt;org name&gt;</code> is the organization in the image registry that contains the images for installation. By default, it's <code>hpeswitom</code>.</li>\n<li><code>&lt;destination dir&gt;</code> is the directory path for the output .zip file. The default location is the current directory.</li>\n</ul>\n<p>For example:</p>\n<pre><code>./generate_download_bundle.sh --chart /home/centos/oo_chart/oo-helm-charts-1.x.x+26.x.x/oo-helm-charts/charts/oo-1.x.x+26.x.x.tgz -o hpeswitom -d /tmp</code></pre>\n<br/>\n\tThis command generates the <code>offline-download.zip</code> file and saves it in the <code>/tmp</code> directory as specified. This file contains a list of the required images and you will use it when running the script to download and upload the suite images in the later step.</li>\n<li>Unzip the <code>offline-download.zip</code> file and copy the <code>/tmp/offline-download/image-set.json</code> file to the &lt;<code>OMT_External_K8s_2x.x-xxx&gt;/scripts/</code> directory.</li>\n</ol>\n<h2>Download the required installation images</h2>\n<p>To download the required installation images, complete the following steps:</p>\n<ol>\n<li>Log on to the first control plane node or the bastion node. If that node can't access Docker Hub, transfer the <code>offline-download.zip</code> file to a Linux server that can access Docker Hub.</li>\n<li>Extract the .zip package to a directory. If you can't access Docker Hub directly, set up the HTTP/HTTPS proxy. For example, run the following commands to set the HTTP/HTTPS proxy. \n\t<pre><code>export http_proxy=\"&lt;http://PROXY_SERVER:PORT&gt;\"\nexport https_proxy=\"&lt;https://PROXY_SERVER:PORT&gt;\"</code></pre>\n</li>\n<li>Go to the directory where you extracted the <code>offline-download.zip</code> package.</li>\n<li>Run the following command: \n\t<pre><code>./downloadimages.sh -u &lt;username&gt; -d &lt;image download directory&gt; -c on|off -o &lt;org name&gt;</code></pre>\n<p>Where:</p>\n<ul>\n<li><code>&lt;username&gt;</code> is the Docker Hub username. If you don't specify the credentials here, you will be prompted to specify them when you run the command.</li>\n<li><code>&lt;image download directory&gt;</code> is the directory for downloading the container images. The default value is <code>/var/opt/cdf/offline</code>. <code>-c</code> option is to verify the digital signature of the images during the download. The default setting is off, which doesn't verify the signature.</li>\n<li><code>&lt;org name&gt;</code> is the organization in the image registry that contains the images for installation. By default, this is <strong>hpeswitom</strong>. This option is mandatory if you aren't using the default organization name.</li>\n</ul>\n<p>The command also has a <code>-p</code> option to specify your password. The <code>-p</code>  option doesn't support single quotes (don't include single quotes in the password).</p>\n<div>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-tip-icon\"> </div>\n<div class=\"admonition-content admonition-tip-content\"><code>OpenText</code> encourages you to use some other password options, which aren't provided by <code>OpenText</code>. By using the -p option, you may expose the system to increased security risks. You understand and agree to assume all associated risks and hold <code>OpenText</code> harmless for the same. It remains at all times your sole responsibility to assess its own regulatory and business requirements. <code>OpenText</code> doesn't represent or warrant that its products comply with any specific legal or regulatory standards applicable to you in conducting your business.</div>\n</div>\n</div>\n<p>To see the full list of options for the <code>uploadimages.sh</code> command, run the command with the <strong>-h</strong> option.</p>\n</li>\n</ol>\n<h2>Upload the images</h2>\n<p>Follow these steps to upload the installation images to your external image registry:</p>\n<ol>\n<li>Log on to one of the bastion nodes. The node must be able to connect to the external registry.</li>\n<li>Run the following command to get the GCP password. \n\t<pre>gcrpwd=$(gcloud auth print-access-token)</pre>\n\t </li>\n<li>Go to the directory you extracted the <code>offline-download.zip</code> package into.</li>\n<li>Run the following command to upload the suite images to the external registry:\n\t<pre><code>./uploadimages.sh -r 'gcr.io' -u oauth2accesstoken -p $gcrpwd -d &lt;image download directory&gt; -o &lt;org name&gt; </code></pre>\n<p>Where:</p>\n<ul>\n<li><code>&lt;image download directory&gt;</code> is the directory to which you downloaded the container images. The default value is <code>/var/opt/cdf/offline</code>. Specify the <code>-d </code> option if the images aren't in the <code>/var/opt/cdf/offline/</code> directory. You can use the <code>-d</code> option multiple times when the images are in different directories. The images can be the images downloaded by the <code>downloadimages.sh</code> command. Make sure the image file type matches the file extension. </li>\n<li><code>&lt;org name&gt;</code> is the organization in the image registry that contains the images for installation. By default, this is <code>hpeswitom.</code> This option is mandatory if you aren't using the default organization name.</li>\n<li>Use the <code>--cleanup</code> option to delete the image source folder to save disk space. It only works when all images are uploaded successfully.</li>\n</ul>\n<p>To see the full list of options for the <code>uploadimages.sh</code> command, run the command with the <strong>-h</strong> option.</p>\n</li>\n<li>Wait until the images are successfully uploaded. Your terminal should resemble the following:\n\t<pre><code>Upload-process successfully completed.</code></pre>\n</li>\n</ol>\n<div> </div>\n</div>",
  "modifiedon": "2025-11-21 07:15:51"
}