{
  "title": "Create values.yaml for OO (GKE)",
  "content": "<div class=\"mw-parser-output\"><br/><br/><p>On the bastion node, you need to edit and configure the <b>values.yaml</b> file that comes along with the OO Containerized zip. Helm install uses the values defined in this file.</p>\n<h2>Create and configure values.yaml</h2>\n<ol>\n<li>\n<p>Create a copy of <strong>values.yaml</strong> file in the OO Containerized installation folder (so a copy of it will exist permanently).</p>\n<pre>cp oo-helm-charts-1.x.x+26.x.x/oo-helm-charts/values/values.yaml &lt;path_to_copied_oo_values_yaml&gt;/values.yaml.backup</pre>\n</li>\n<li>\n<p>Edit the copied <b>values.yaml</b> file using any editor and specify the required values in the file.</p>\n</li>\n</ol>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-important-icon\"> </div>\n<div class=\"admonition-content admonition-important-content\">\n<p>This <strong>values.yaml</strong> file contains critical configuration information. The file must be securely stored and backed up on a regular basis.</p>\n</div>\n</div>\n<h3>Newly added parameters</h3>\n<p>The below parameters are available for usage and configuration within the <strong>values.yaml</strong> file starting OO Containerized 23.4: </p>\n<ul>\n<li><code>global.tls.tlsMinVersion</code></li>\n<li><code>global.tls.tlsCiphers</code></li>\n<li><code>oocentral.deployment.maxAllowedVersionGapMsgRecovery</code></li>\n<li><code>oodata-maintenance-and-export.deployment.data.purgeMaxSize</code></li>\n</ul>\n<h3>Configurable parameters</h3>\n<p>The configurable parameters supported by the OO chart are grouped into the following categories:</p>\n<ul>\n<li>Generic parameters</li>\n<li>Networking parameters</li>\n<li>Shared IdM parameters</li>\n<li>Database parameters</li>\n<li>Persistence parameters</li>\n<li>(Optional) Database maintenance retention period</li>\n<li>Service Management integration parameters</li>\n<li>Monitoring parameters</li>\n</ul>\n<p>Search for and update each parameter described in the below sections as the <strong>values.yaml</strong> contains other parameters that aren't listed. These parameters either have a default value or don't apply to this scenario.</p>\n<p>The <strong>values.yaml </strong>is in YAML format. Each parameter described below in the format <code>&lt;section1&gt;.&lt;section2&gt;.&lt;section3&gt;</code> is available in the <strong>values.yaml</strong> file like this:</p>\n<pre> section1: \n section2: \n section3:</pre>\n<h3>Generic parameters</h3>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>acceptEula</code></td>\n<td>Yes</td>\n<td>You must accept EULA to deploy OO</td>\n<td><code>false</code></td>\n<td><code>true</code></td>\n</tr>\n<tr>\n<td><code>global.docker.registry</code></td>\n<td>Yes</td>\n<td>Amazon Elastic Container Registry (ECR) containing OO Docker images.</td>\n<td><code>localhost:5000</code></td>\n<td><code>us-east2-docker.pkg.dev/my-gcp-project/my-repo</code></td>\n</tr>\n<tr>\n<td><code>global.docker.orgName</code></td>\n<td>Yes</td>\n<td>Amazon ECR organization name.</td>\n<td><code>hpeswitom</code></td>\n<td><code>hpeswitom</code></td>\n</tr>\n<tr>\n<td><code>global.securityContext.user</code></td>\n<td>Yes</td>\n<td>\n<p>This parameter specifies the operating system user ID that's used to run the process in the container. The value of this parameter and the ID of the Google Cloud Filestore owner must be the same. </p>\n<p>When using big values, use the value in double quotes. See <a href=\"https://github.com/helm/helm/issues/1707\" title=\"this Github page\">this Github page</a> for more information. For example: <code>user: \"1999\"</code><br/>\n<br/>\n\t\t\tYou can't change this value after installation.</p>\n</td>\n<td><code>1999</code></td>\n<td><code>1999</code></td>\n</tr>\n<tr>\n<td><code>global.securityContext.fsGroup</code></td>\n<td>Yes</td>\n<td>\n<p>This parameter specifies the operating system group ID that's used to run the process in the container.</p>\n<p>When using big values, use the value in double quotes. See <a href=\"https://github.com/helm/helm/issues/1707\" title=\"this Github page\">this Github page</a> for more information. For example: <code>user: \"1999\"</code><br/>\n<br/>\n\t\t\tYou can't change this value after installation.</p>\n</td>\n<td><code>1999</code></td>\n<td><code>1999</code></td>\n</tr>\n<tr>\n<td><code>global.tls.tlsMinVersion</code></td>\n<td>No</td>\n<td>\n<p>This parameter specifies the minimum TLS version for both server and client used by the OO components.</p>\n<p>If the default value is used, TLS 1.3 is used with a fallback to TLS 1.2.</p>\n<p>For example, if this parameter is set to <code>\"TLSv1.3\"</code>, only TLS 1.3 protocol will be enabled.</p>\n</td>\n<td><code>\"TLSv1.2\"</code></td>\n<td><code>\"TLSv1.2\"</code></td>\n</tr>\n<tr>\n<td><code>global.tls.tlsCiphers</code></td>\n<td>No</td>\n<td>\n<p>This parameter specifies the ordered list of TLS enabled cipher suites for both server and client side, used by the OO components.</p>\n<p>This parameter value is a YAML array in the following format: [\"cipher1\", \"cipher2\"].</p>\n</td>\n<td><code>[\"TLS_AES_256_GCM_SHA384\", \"TLS_AES_128_GCM_SHA256\", \"TLS_AES_128_CCM_8_SHA256\", \"TLS_AES_128_CCM_SHA256\", \"TLS_CHACHA20_POLY1305_SHA256\", \"TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256\", \"TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\", \"TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\", \"TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\", \"TLS_DHE_RSA_WITH_AES_128_GCM_SHA256\", \"TLS_DHE_RSA_WITH_AES_256_GCM_SHA384\", \"TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256\", \"TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256\"]</code></td>\n<td><code>[\"TLS_AES_256_GCM_SHA384\", \"TLS_AES_128_GCM_SHA256\", \"TLS_AES_128_CCM_8_SHA256\", \"TLS_AES_128_CCM_SHA256\", \"TLS_CHACHA20_POLY1305_SHA256\", \"TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256\", \"TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\", \"TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\", \"TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\", \"TLS_DHE_RSA_WITH_AES_128_GCM_SHA256\", \"TLS_DHE_RSA_WITH_AES_256_GCM_SHA384\", \"TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256\", \"TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256\"]</code></td>\n</tr>\n<tr>\n<td><code>global.oo.size</code></td>\n<td>No</td>\n<td>\n<p>This parameter controls the resources allocated to each service based on the maximum number of tenants configured. This parameter supports two different configurations: 5 (1-5 tenants) or 20 (6-20 tenants).</p>\n<p>Note: Values other than 5 or 20 will be regarded as 5 or 20. For example, if you set this parameter to 3, the resources allocated will support up to 5 tenants. </p>\n</td>\n<td><code>5</code></td>\n<td><code>20</code></td>\n</tr>\n</tbody>\n</table>\n<div>\n<div>\n<h3>Networking parameters</h3>\n</div>\n<p>These parameters define how the OO application reaches the context of the entire OpenText Service Management suite.</p>\n<div>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>global.externalAccessHost</code></td>\n<td>Yes</td>\n<td>\n<p>This is the external access point for OO, and the FQDN should be in the following format: <span style=\"background-color: transparent;\"><strong>oo.&lt;suite-fqdn&gt;</strong>.</span></p>\n<p><span style=\"background-color: transparent;\">The FQDN specified at this parameter is also the DNS name of the OO Application Load Balancer (ALB) for external access, which you'll create later. See <a href=\"/doc/423/26.1/399-gcpconfigurealbooc\" title=\"Configure load balancers for OO on GKE\">Configure load balancers for OO on GKE</a> for details on the external access ALB.</span></p>\n</td>\n<td>N/A</td>\n<td><span style=\"background-color: transparent;\">If you can access the suite using the FQDN <em>smax.example.com</em>, then you can access OO using <em><strong>oo</strong>.smax.example.com.</em></span></td>\n</tr>\n<tr>\n<td><code>global.externalAccessPort</code></td>\n<td>Yes</td>\n<td>This is the port number on which you can access OO from outside of the Kubernetes cluster. <br/>\n<br/>\n\t\t\tThe port number specified here is the listener port of the OO ALB for external access, which you'll create later. See <span style=\"background-color: transparent;\"><a href=\"/doc/423/26.1/399-gcpconfigurealbooc\" title=\"Configure load balancers for OO on GKE\">Configure load balancers for OO on GKE</a></span> for details on the external access ALB.</td>\n<td>9443</td>\n<td>443</td>\n</tr>\n<tr>\n<td><code>global.nginx.httpsPort</code></td>\n<td>Yes</td>\n<td>\n<p>This is the https port on which the OO deployed Nginx controller listens and routes the traffic to the OO pods via ingress rules.</p>\n<p>Set this value to <strong>443</strong>.<br/>\n<br/>\n\t\t\tIf the parameter isn't set, it will take the value of the <em>global.externalAccessPort</em> parameter.</p>\n</td>\n<td>9443</td>\n<td>443</td>\n</tr>\n<tr>\n<td><code>global.setFqdnInIngress</code></td>\n<td>Yes</td>\n<td>This parameter controls whether the ingress rules for OO components apply for a single host, specified using the <code>global.externalAccessHost</code>, or not. <br/>\n<br/>\n\t\t\tIn GKE, traffic towards the OO components comes from two different sources: from the public Google Cloud HTTP(S) Load Balancer for OO, and the integration Google Cloud HTTP(S) Load Balancer.<br/>\n<br/>\n<b>Therefore, you must set this parameter to <code>false.</code></b> </td>\n<td><code>true</code></td>\n<td><code>false</code></td>\n</tr>\n<tr>\n<td><code>itom-ingress-controller.nginx.service.httpsNodePort</code></td>\n<td>Yes</td>\n<td>\n<p>This is the <strong>NodePort</strong> number of the OO deployed Nginx ingress controller.</p>\n<p>While values in the range 30000-32767 are accepted, the designated port number for the OO Nginx ingress controller is 31443. </p>\n<p>This parameter is missing from <strong>values.yaml</strong>. To add it, use the following command on the Bastion host:<br/>\n<br/>\n<code>&lt;OMT_External_K8s_2x.x-xxx&gt;/bin/yq e '.itom-ingress-controller.nginx.service.httpsNodePort = \"31443\"' -i &lt;path/to/values.yaml</code></p>\n<p>Where: </p>\n<p><code>&lt;OMT_External_K8s_2x.x-xxx&gt;</code> is the installation directory of OPTIC Management Toolkit (OMT).</p>\n<p><code>&lt;/path/to/values.yaml&gt;</code> is the path of OO values.yaml.</p>\n<p>Make sure to use the command line tool <strong>yq</strong> that's part of OMT <strong>202x.xx</strong> and not from the OS <strong>$PATH</strong>.</p>\n<p>The version of <strong>yq</strong> that comes with OMT is 4.6.1, and the syntax of the command doesn't work with older versions of <strong>yq.</strong></p>\n</td>\n<td>N/A</td>\n<td>31443</td>\n</tr>\n<tr>\n<td>\n<p><code>itom-ingress-controller.nginx.service.external.nodePortAutoAssign</code></p>\n</td>\n<td>Yes</td>\n<td>\n<p>This parameter specifies whether OO deployed Nginx controller auto assigns a port in the range 30000-3276 as its <strong>NodePort</strong>. <br/>\n<br/>\n\t\t\tBecause you specified a fixed port number (31443<strong>)</strong> in the previous parameter, setting this parameter to <strong>false</strong> is mandatory. </p>\n<p>This parameter is missing from <strong>values.yaml</strong>. To add it, use the following command on the Bastion host:<br/>\n<br/>\n<code>&lt;OMT_External_K8s_2x.x-xxx&gt;/bin/yq e '.itom-ingress-controller.nginx.service.external.nodePortAutoAssign= false' -i &lt;path/to/values.yaml</code></p>\n<p>Where: </p>\n<p><code>&lt;OMT_External_K8s_2x.x-xxx&gt;</code> is the installation directory of OMT.</p>\n<p><code>&lt;/path/to/values.yaml&gt;</code> is the path of OO values.yaml.</p>\n<p>Make sure to use the command line tool <strong>yq</strong> that's part of OMT <strong>202x.xx</strong> and not from the OS <strong>$PATH</strong>.</p>\n<p>The version of <strong>yq</strong> that comes with OMT is 4.6.1, and the syntax of the command doesn't work with older versions of <strong>yq.</strong></p>\n</td>\n<td>\n<p><span style=\"background-color: transparent;\">N/A</span></p>\n</td>\n<td>\n<p>false</p>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3>Shared IdM parameters</h3>\n<p>OO integrates with the Service Management IdM service. At these parameters, specify the IdM connection details.</p>\n<table>\n<thead>\n<tr>\n<th>Parameter</th>\n<th>Required</th>\n<th>Description</th>\n<th>Default</th>\n<th>Example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>global.idm.idmAuthUrl</code></td>\n<td>Yes</td>\n<td>This is the public URL of the IdM Service Management.</td>\n<td>N/A</td>\n<td><code>https://&lt;suite-fqdn&gt;:443/idm-service</code></td>\n</tr>\n<tr>\n<td><code>global.idm.idmTransportUser</code></td>\n<td>Yes</td>\n<td>The IdM transport admin user configured in the suite's IdM service. In the OpenText Service Management suite, the name of this user is <code>idmTransportUser</code>.</td>\n<td>N/A</td>\n<td><code>idmTransportUser</code></td>\n</tr>\n<tr>\n<td><code>global.idm.superUser</code></td>\n<td>Yes</td>\n<td>The OO integration admin user name created in <a href=\"/doc/423/26.1/399-gcpcreateoocidmuser\" title=\"Create OO integration admin user in the Service Management IdM (GKE)\">Create OO integration admin user in the Service Management IdM (GKE)</a>.</td>\n<td>N/A</td>\n<td><code>oo-integration-admin</code></td>\n</tr>\n<tr>\n<td><code>global.idm.tenant</code></td>\n<td>Yes</td>\n<td>IdM parent tenant organization name where <code>global.idm.superUser</code> resides. For Service Management and Cloud Management, the name of this organization is <strong>sysbo</strong>.</td>\n<td>N/A</td>\n<td><code>sysbo</code></td>\n</tr>\n</tbody>\n</table>\n<h3>Database parameters</h3>\n</div>\n<p>Configure the following parameters to set up the connection to the Google Cloud SQL instance.</p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>global.database.type</code></td>\n<td>Yes</td>\n<td>Currently OO supports only PostgreSQL database engines. Set this value to \"<strong>postgresql</strong>\".</td>\n<td>N/A</td>\n<td><code>postgresql</code></td>\n</tr>\n<tr>\n<td><code>global.database.host</code></td>\n<td>Yes</td>\n<td>The hostname of the Cloud SQL instance created at the <a href=\"/doc/423/26.1/399-gcplaunchcsqlooc#Create_a_Google_Cloud_SQL_instance_for_OO\" title=\"Create a Google Cloud SQL instance for OO\">Create a Google Cloud SQL instance for OO</a> step.</td>\n<td>N/A</td>\n<td><code>db.host.com</code></td>\n</tr>\n<tr>\n<td><code>global.database.port</code></td>\n<td>Yes</td>\n<td>Database server port.</td>\n<td>N/A</td>\n<td><code>5432</code></td>\n</tr>\n<tr>\n<td><code>global.database.tlsEnabled</code></td>\n<td>No</td>\n<td>Required only when you enable TLS connection for the external database.</td>\n<td><code>false</code></td>\n<td><code>true</code></td>\n</tr>\n<tr>\n<td><code>global.database.oocontroller.dbName</code></td>\n<td>Yes</td>\n<td>OO Controller database name.</td>\n<td><code>oocontrollerdb</code></td>\n<td><code>oocontrollerdb</code></td>\n</tr>\n<tr>\n<td><code>global.database.oocontroller.user</code></td>\n<td>Yes</td>\n<td>OO Controller database user.</td>\n<td><code>oocontrollerdbuser</code></td>\n<td><code>oocontrollerdbuser</code></td>\n</tr>\n<tr>\n<td><code>global.database.ooui.dbName</code></td>\n<td>Yes</td>\n<td>OO Session Manager database name.</td>\n<td><code>oouidb</code></td>\n<td><code>oosessionmanagerdb</code></td>\n</tr>\n<tr>\n<td><code>global.database.ooui.user</code></td>\n<td>Yes</td>\n<td>OO Session Manager database user.</td>\n<td><code>oouidbuser</code></td>\n<td><code>oosessionmanagerdbuser</code></td>\n</tr>\n<tr>\n<td><code>global.database.oocentral.dbName</code></td>\n<td>Yes</td>\n<td>OO Central database name.</td>\n<td><code>oocentraldb</code></td>\n<td><code>oocentraldb</code></td>\n</tr>\n<tr>\n<td><code>global.database.oocentral.user</code></td>\n<td>Yes</td>\n<td>OO Central database user.</td>\n<td><code>oocentraldbuser</code></td>\n<td><code>oocentraldbuser</code></td>\n</tr>\n<tr>\n<td><code>global.database.ooscheduler.dbName</code></td>\n<td>Yes</td>\n<td>OO Scheduler database name.</td>\n<td><code>ooschedulerdb</code></td>\n<td><code>ooschedulerdb</code></td>\n</tr>\n<tr>\n<td><code>global.database.ooscheduler.user</code></td>\n<td>Yes</td>\n<td>OO Scheduler database user.</td>\n<td><code>ooschedulerdbuser</code></td>\n<td><code>ooschedulerdbuser</code></td>\n</tr>\n<tr>\n<td><code>autopass.deployment.database.dbName</code></td>\n<td>Yes</td>\n<td>AutoPass database name.</td>\n<td><code>aplsdb</code></td>\n<td><code>aplsdb</code></td>\n</tr>\n<tr>\n<td><code>autopass.deployment.database.user</code></td>\n<td>Yes</td>\n<td>AutoPass database user.</td>\n<td><code>aplsdbuser</code></td>\n<td><code>aplsdbuser</code></td>\n</tr>\n<tr>\n<td><code>autopass-migration.deployment.database.dbName</code></td>\n<td>Yes</td>\n<td>AutoPass Migration database name - the same as Autopass database name</td>\n<td><code>aplsdb</code></td>\n<td><code>aplsdb</code></td>\n</tr>\n<tr>\n<td><code>autopass-migration.deployment.database.user</code></td>\n<td>Yes</td>\n<td>AutoPass Migration database user- the same as Autopass database user</td>\n<td><code>aplsdbuser</code></td>\n<td><code>aplsdbuser</code></td>\n</tr>\n</tbody>\n</table>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"> </div>\n<div class=\"admonition-content admonition-note-content\">\n<p>In the <strong>values.yaml</strong> file, the values for the <code>global.database.ooui.dbName</code> and <code>global.database.ooui.user</code> parameters default to <strong>oouidb </strong>and <strong>oouidbuser</strong>. If you create the OO Session Manager database name and database according to the steps in <a href=\"/doc/423/26.1/399-gcplaunchcsqlooc#Create_databases_for_OO_on_the_Google_Cloud_SQL_instance\" title=\"Create databases for OO on the Google Cloud SQL instance\">Create databases for OO on the Google Cloud SQL instance</a>, then update values for the <code>global.database.ooui.dbName</code> and <code>global.database.ooui.user</code> parameters as <strong>oosessionmanagerdb </strong>and <strong>oosessionmanagerdbuser</strong>.</p>\n</div>\n</div>\n<h3>Persistence parameters</h3>\n<p>Specify the names of the PVCs created as part of the preparation step <a href=\"/doc/423/26.1/399-gcppreparepvooc\" title=\"Prepare persistent volumes and claims for OO (GKE)\">Prepare persistent volumes and claims for OO (GKE)</a>. </p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>global.persistence.configVolumeClaim</code></td>\n<td>Yes</td>\n<td>Name of the PVC created for OO configuration files.</td>\n<td>N/A</td>\n<td><code>oo-config-pvc</code></td>\n</tr>\n<tr>\n<td><code>global.persistence.dataVolumeClaim</code></td>\n<td>Yes</td>\n<td>Name of the PVC created for OO data files.</td>\n<td>N/A</td>\n<td><code>oo-data-pvc</code></td>\n</tr>\n<tr>\n<td>\n<p><code>global.persistence.logVolumeClaim</code></p>\n</td>\n<td>Yes</td>\n<td>\n<p>Name of the PVC created for OO logs.</p>\n</td>\n<td>N/A</td>\n<td>\n<p><code>oo-logs-pvc</code></p>\n</td>\n</tr>\n<tr>\n<td><code>global.persistence.rasLogVolumeClaim</code></td>\n<td>Yes</td>\n<td>Name of the PVC created for OO RAS logs.</td>\n<td>N/A</td>\n<td><code>oo-ras-logs-pvc</code></td>\n</tr>\n<tr>\n<td><code>global.persistence.dataExportVolumeClaim</code></td>\n<td>Yes</td>\n<td>Name of the PVC created for database exports.</td>\n<td>N/A</td>\n<td><code>oo-data-export-pvc</code></td>\n</tr>\n</tbody>\n</table>\n<h3>Database maintenance parameters</h3>\n<p>This section is optional. All parameters described here have default values which are used if not purposely configured.</p>\n<p>The OO flows for database purging don't work with the current version of OO. However, to keep the database size under control, OO deploys a Kubernetes <strong>cron job</strong> at install time, set to run each day at <strong>00:00 GMT</strong>. The purpose of this job is to purge in the database OO execution data that's older than 365 days.</p>\n<p>The data retention period is configurable via the <em>hidden</em> Helm parameter <code>oodata-maintenance-and-export.deployment.data.retentionDays</code>.</p>\n<p>Minimum value is 28, and the value must be in multiples of 14. For example: 28, 42, 56, etc.</p>\n<p>You can configure the retention period after installation, by manually editing the Kubernetes job. For more information, see <a href=\"/doc/423/26.1/oodbmaintretinterval\" title=\"Change OO Database Maintenance Job retention interval\">Change OO Database Maintenance Job retention interval</a>.</p>\n<p>If you want to configure a different retention interval at OO install time, then run the following command on the Bastion host:</p>\n<pre>&lt;OMT_External_K8s_2x.x-xxx&gt;/bin/yq e '.<code>oodata-maintenance-and-export.deployment.data.retentionDays = \"&lt;desired_amount_of_retention_days&gt;\"' -i &lt;path/to/values.yaml&gt;</code>\n</pre>\n<p>Where:</p>\n<ul>\n<li><code>&lt;OMT_External_K8s_2x.x-xxx&gt;</code> = installation directory of OMT</li>\n<li><code>&lt;desired_amount_of_retention_days&gt;</code> = the retention interval (28, 42, 56, etc.)</li>\n<li><code>&lt;path/to/values.yaml&gt;</code> = the path of OO values.yaml</li>\n</ul>\n<p>Make sure:</p>\n<ul>\n<li>to use the command line tool <strong>yq</strong> that's part of OMT <strong>202x.xx</strong> and not from the OS <strong>$PATH</strong>.</li>\n<li>the version of <strong>yq</strong> that comes with OMT is 4.6.1, and the syntax of the command doesn't work with older versions of <strong>yq</strong>.</li>\n</ul>\n<p>On top of the retention period, you can configure the purge jobs to automatically trigger and delete data based on tenant schema size by utilizing the <code>oodata-maintenance-and-export.deployment.data.purgeMaxSize</code> parameter. This parameter controls the size limit for all tenants when configured. By default, the parameter is set to (unlimited size) but can be configured to limit the size of the tenant schemas. When enabled this parameter will ignore the retention period and will delete historical data until the tenant schema size is back below the configured limit. </p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>oodata-maintenance-and-export.deployment.data.retentionDays</code></td>\n<td>No</td>\n<td>\n<p>The OO execution data retention period in days. All data that's older than the number of days specified at this parameter will be automatically purged by the OO data maintenance Kubernetes <strong>cron-job</strong>.</p>\n<p>Minimum value is 28, and the values must be a multiple of 14. For example: 28, 42, 56, etc.</p>\n</td>\n<td>hidden (not exposed in the <strong>values.yaml</strong>)</td>\n<td><code>224</code></td>\n</tr>\n<tr>\n<td><code>oodata-maintenance-and-export.deployment.data.purgeMaxSize</code></td>\n<td>No</td>\n<td>This parameter controls the max size in gigabytes that a tenant's schema is allowed to grow to. After the tenant schema grows beyond the set parameter size purging of historical data will occur, regardless of retention period.</td>\n<td><code>0</code></td>\n<td><code>200</code></td>\n</tr>\n</tbody>\n</table>\n<h3>Service Management integration parameters</h3>\n<div>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>global.smaxFqdn</code></td>\n<td>Yes</td>\n<td>The FQDN and port of the public load balancer for accessing Service Management.</td>\n<td>N/A</td>\n<td><code>smax.example.com:443</code></td>\n</tr>\n<tr>\n<td><code>caCertificates</code></td>\n<td><font face=\"monospace\">Conditional</font></td>\n<td>\n<p>This parameter specifies the certificates that OO requires to trust, such as the ones used for:</p>\n<ul>\n<li>The external load balancer of SM</li>\n<li>The OO Google Cloud SQL instance, only if the Cloud SQL instance can accept TLS connections.</li>\n</ul>\n<p>See the below explanation for details.</p>\n</td>\n<td> </td>\n<td> </td>\n</tr>\n</tbody>\n</table>\n<p>To get the suite certificates, see <a href=\"/doc/423/26.1/getsuitecacertificate\" title=\"Get the suite CA certificate\">Get the suite CA certificate</a>.</p>\n<p>The certificates that OO must trust are mandatory. You can specify these certificates in two ways:</p>\n<ul>\n<li>At Helm install time via command line.</li>\n<li>At OO install time via Helm parameter <code>caCertificates</code> in <strong>values.yaml</strong>.</li>\n</ul>\n<p>Providing these certificates via the Helm parameter <code>caCertificates</code> in OO <strong>values.yaml</strong> is optional. <span style=\"background-color: transparent;\">Regardless of the method you chose, these certificates must be either the <em>server certificates</em> or the <em>root CA</em> that generated the server certificates. </span>In addition, the certificates must be in a <strong>PEM</strong> format (base64 encoded). </p>\n<p>In comparison:</p>\n<ul>\n<li>The advantage of <strong>Option #1</strong> is that it's faster and easier than Option #2, but it doesn't add the certificate content to the OO <strong>values.yaml</strong> file.</li>\n<li>The advantage of <strong>Option #2</strong> is that it adds the certificate(s) content to the OO <strong>values.yaml</strong> file which provides you with a faster way of tracking these certificates at a later point in time, by checking the <strong>values.yaml</strong> file directly. </li>\n</ul>\n<h4>Add the certificates at install time in CLI</h4>\n<p>Add the certificates at Helm install time using the <code>--set-file</code> arguments. If you're adding certificates at Helm install time using CLI, ensure to remove the <code>caCertificates </code>parameter from the <strong>values.yaml</strong> file.</p>\n<p>For example: </p>\n<pre>helm install [...] --set-file \"caCertificates.smax_lb\\.crt\"=/path/to/smax_lb.crt --set-file \"caCertificates.oo_db\\.crt\"=/path/to/oo_db.crt</pre>\n<p><strong>Note that:</strong></p>\n<ul>\n<li><code>[...]</code> is a placeholder for other Helm install-related parameters. For more information, see <a href=\"/doc/423/26.1/399-installoocongcp\" title=\"Install OO Containerized on GCP\">Install OO Containerized on GCP</a>.</li>\n<li>Make sure not to miss the escape character before the dot in the <code>--set-file</code> argument - eg:<code>\"caCertificates.smax_lb<strong>\\</strong>.crt\"</code></li>\n<li>You can use multiple -<code>-set-file</code> arguments, according to the amount of certificate(s) OO requires to trust.</li>\n</ul>\n<h4>Add certificates using the Helm parameter</h4>\n<ol>\n<li>Run the following command to add this parameter in OO <strong>values.yaml</strong>:\n\n\t<pre>&lt;OMT_External_K8s_2x.x-xxx&gt;/bin/yq e '.caCertificates = \"placeholder\"' -i &lt;path/to/values.yaml&gt;</pre>\n<p>Where:<br/>\n<code>&lt;OMT_External_K8s_2x.x-xxx&gt;</code> = installation directory of OMT<br/>\n<code>&lt;path/to/values.yaml&gt;</code> = the path of the OO <strong>values.yaml</strong></p>\n<p>Make sure that:<br/>\n\tYou use the command line tool <strong>yq</strong> that's part of OMT <strong>202x.xx</strong> and not from the OS <strong>$PATH</strong>. The version of <strong>yq</strong> that comes with OMT is 4.6.1, and the syntax of the command doesn't work with older versions of <strong>yq.</strong></p>\n</li>\n<li>Open <strong>values.yaml </strong>in a text editor, delete \"placeholder\" from the <code>caCertificates</code> parameter, and specify the content of the certificates as given below:\n\t<pre><code>caCertificates:\n smax_lb.crt: |\n -----BEGIN CERTIFICATE-----\n MIIFLTCCAxWgAwIBAgIUEgAXHFYWniNO5iq5E7q8UIiLdfswDQYJKoZIhvcNAQEL\n [...]\n gLMaj435og1CxyQMf5qt+m6DqVXjQR/wPfHUNz6S0aON\n -----END CERTIFICATE-----\n # Only if TLS is enabled with the OO Google Cloud SQL instance\n  oo_db.crt: |\n -----BEGIN CERTIFICATE-----\n MIIFLTCCAxWgAwIBAgIUEgAXHFYWniNO5iq5E7q8UIiLdfswDQYJKoZIhvcNAQEL\n [...]\n gLMaj435og1CxyQMf5qt+m6DqVXjQR/wPfHUNz6S0aON\n -----END CERTIFICATE----- </code></pre>\n<p>For each certificate, the key index name represents the name of the certificate. In the example, <strong>smax_lb.crt </strong>is the certificate used for SM Application Load Balancer, and <strong>oo_db.crt </strong>is the certificate used for the Google Cloud SQL instance OO connects to, only if it's configured with a TLS connection. </p>\n\tMake sure to use the correct indentation. For example:<br/>\n<code>caCertificates</code> is the top-level key index, therefore there is no need for any indentation before the parameter name. <br/>\n<code>smax_lb.crt</code> is a second-level key index, therefore you must use 2 spaces for indentation.<br/>\n<code>----- BEGIN CERTIFICATE -----</code> is the content of the <strong>PEM</strong> encoded certificate. Indent each line by 4 spaces.</li>\n</ol>\n<ul>\n</ul>\n<h3 id=\"Monitoring_parameters\">Monitoring parameters</h3>\n<p>You can add monitoring support by exposing Prometheus-style metrics from the most critical OO services (OO Controller, OO Central, OO Scheduler, OO Session Manager, and OO Downloader). This helps in troubleshooting various aspects inside the cluster like performance, scalability, and others. After enabling OMT monitoring capability, you must configure OO to deploy the service monitors.</p>\n<p>The OO service monitors are deployed when you set the <code>global.prometheus.deployPrometheusConfig</code> user input parameter to <strong>true</strong>.</p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>global.prometheus.deployPrometheusConfig</code></td>\n<td>No</td>\n<td>Controls whether to deploy scraping rules through <code>ServiceMonitor</code> objects and alerts through<strong> </strong><code>PrometheusRule</code> objects</td>\n<td>true</td>\n<td>This input depends on whether you have enabled the monitoring capability.</td>\n</tr>\n<tr>\n<td><code>global.prometheus.deployGrafanaConfig</code></td>\n<td>No</td>\n<td>Controls whether to deploy <code>ConfigMap</code> objects containing <strong>Grafana</strong> dashboard configurations</td>\n<td>true</td>\n<td><strong>ConfigMaps</strong> labeled <strong>grafana_dashboard: \"1\"</strong> contain dashboard configurations. OMT monitoring solution uploads these dashboards in <strong>Grafana</strong>. For other monitoring solutions download and upload the dashboards into <strong>Grafana </strong>manually.</td>\n</tr>\n<tr>\n<td><code>global.prometheus.prometheusSelector.prometheus_config</code></td>\n<td>No</td>\n<td>Defines the label (s) that apply to the scraping rules through <code>ServiceMonitor</code> objects</td>\n<td>1</td>\n<td>Based on this label, you can include or exclude metrics from Prometheus.</td>\n</tr>\n<tr>\n<td><code>global.prometheus.grafanaSelector.grafana_dashboard</code></td>\n<td>No</td>\n<td>Defines the label(s) that apply to the <strong>Grafana</strong> dashboard configurations through <code>ConfigMap</code> objects</td>\n<td>1</td>\n<td>The default label value used by the OMT monitoring solution. For a custom Grafana solution use the appropriate configuration label.</td>\n</tr>\n</tbody>\n</table>\n</div>\n<div> </div>\n</div>",
  "modifiedon": "2025-11-21 07:15:54"
}