{
  "title": "Prepare persistent volumes for OO on OpenShift",
  "content": "<div class=\"mw-parser-output\"><br/><br/>\n<p>OO Containerized installation requires below Persistent Volumes (PVs) and Persistent Volume Claims (PVCs). PVs are pieces of storage relevant to file system volumes, and PVCs are requests for a piece of storage on a volume. </p>\n<p>Currently, OO Containerized uses persistent storage by providing the names of the required PVCs at OO Containerized install time via Helm parameters. This means that you must create both PVs and PVCs upfront.</p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Component</th>\n<th scope=\"col\">Volume name</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Example Directory path</th>\n<th scope=\"col\">Size</th>\n</tr>\n<tr>\n<td>OO</td>\n<td><code>oo-config-vol</code></td>\n<td>Stores OO configuration files.</td>\n<td><code>/var/vols/itom/oo/oo_config_vol</code></td>\n<td>~ 1 GB</td>\n</tr>\n<tr>\n<td>OO</td>\n<td><code>oo-data-vol</code></td>\n<td>Stores OO, OO deployed AutoPass, and OO deployed Vault-generated data.</td>\n<td><code>/var/vols/itom/oo/oo_data_vol</code></td>\n<td>~ 1 GB</td>\n</tr>\n<tr>\n<td>OO</td>\n<td><code>oo-logs-vol</code></td>\n<td>Stores logs generated by the OO components, except RAS logs which are stored in a different volume.</td>\n<td><code>/var/vols/itom/oo/oo_logs_vol</code></td>\n<td>1-5 GB</td>\n</tr>\n<tr>\n<td>OO</td>\n<td><code>oo-data-export-vol</code></td>\n<td>\n<p>OO runs a Kubernetes <strong>cron job</strong> for purging the OO database with a retention period set to 375 days (default value). </p>\n<p>All the database data that are marked for purge gets exported first and exposed in this volume before purging. </p>\n</td>\n<td><code>/var/vols/itom/oo/oo_data_export_vol</code></td>\n<td>50-90 GB<br/>\n<br/>\n<em>See notes below</em></td>\n</tr>\n<tr>\n<td>OO</td>\n<td><code>oo-ras-logs-vol</code></td>\n<td>Stores OO RAS logs. </td>\n<td><code>/var/vols/itom/oo/oo_ras_logs_vol</code></td>\n<td>1-5 GB</td>\n</tr>\n</thead>\n</table>\n<p>Note that:</p>\n<ul>\n<li>The \"OO Database Maintenance and Export\" Kubernetes <strong>cron job</strong> uses the <code>oo-data-export-vol</code><em> </em>volume. You can find more information about this job <a href=\"/doc/oo_containerized/main/ooccreateymlocp#(Optional)_Database_maintenance_retention_period\" title=\"here\">here</a>.</li>\n<li>The size of the <code>oo-data-export-vol</code><em> </em>volume is directly influenced by two factors:<br/>\n\tThe complexity of the flows that OO runs. OO flows that work with &gt; 1 GB worth of data per flow context, are considered \"heavy\" flows and this data will end up in the File System. Adjust the volumes depending on the number of flows that you run.<br/>\n\tThe number of tenants. More tenants means more data in the Database. This data gets exported in this File System volume (more tenants means a bigger <em>oo-data-export-vol </em>volume size).</li>\n</ul>\n<h2>Create persistent volumes</h2>\n<ol>\n<li>\n<p>Navigate to the OO chart package directory. For example:</p>\n<pre><code>cd oo-helm-charts-1.x.x+26.x.x/oo-helm-charts/samples/persistent_storage</code></pre>\n</li>\n<li>\n<p>Open the <strong>volumes.yaml</strong><b> </b>file with a text editor, specify the below information in each volume template then save the file:</p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n<tbody>\n<tr>\n<td>The FQDN of the File System server</td>\n<td>Inside <strong>volumes.yaml</strong>, replace all <code>&lt;NFS_FQDN&gt;</code> values with actual File System FQDN.</td>\n</tr>\n<tr>\n<td>The File System directory path that you provided during the creation of File System volumes</td>\n<td>Inside <strong>volumes.yaml</strong>, replace all <code>&lt;NFS_directory_path&gt;</code> values with the actual File System directory paths mapped to each volume.</td>\n</tr>\n<tr>\n<td>The storage class Name that needs to be used with the OO volumes</td>\n<td>By default, the <code>storageClassName</code> attribute of the PVs is empty. If you have a storage class that you want the OO volumes to use, then specify the storage class name(s) for each volume. You can use a different storage class name for each volume, or the same storage class name for all volumes.</td>\n</tr>\n</tbody>\n</table>\n<p>Set the sizes for each persistent volume in this file according to the table at the top of this page.</p>\n</li>\n<li>\n<p>Run the following command to create persistent volumes:</p>\n<pre><code>kubectl create -f oo-helm-charts-1.x.x+26.x.x/oo-helm-charts/samples/persistent_storage/volumes.yaml</code></pre>\n</li>\n<li>\n<p>Run the following command to verify the volume creation:</p>\n<pre><code>kubectl get pv | grep oo</code></pre>\n</li>\n</ol>\n<h2>Create persistent volume claims</h2>\n<ol>\n<li>\n<p>Navigate to the OO chart package directory. For example:</p>\n<pre><code>cd oo-helm-charts-1.x.x+26.x.x/oo-helm-charts/samples/persistent_storage</code></pre>\n</li>\n<li>\n<p>Open the <strong>claims.yaml</strong><b> </b>file with a text editor, specify in each volume claim template the following:<br/>\n\tThe namespace where you deployed OO, the volume name that the persistent volume claims (PVC) bound to, and the name(s) of the storage class. If you have used a storage class name during the creation of the OO volumes, then specify the name(s) of the storage class for each PVC to bind it to the corresponding volume.<br/>\n\tThe following shows the relationship between the OO volume claims and OO volumes:</p>\n<pre><code>oo-config-pvc -&gt; oo-config-vol\noo-data-pvc -&gt; oo-data-vol\noo-logs-pvc -&gt; oo-logs-vol\noo-data-export-pvc -&gt; oo-data-export-vol\noo-ras-logs-pvc -&gt; oo-ras-logs-vol</code></pre>\n</li>\n<li>Run the following command to create persistent volume claims:\n\t<pre><code>kubectl create -f oo-helm-charts-1.x.x+26.x.x/oo-helm-charts/samples/persistent_storage/claims.yaml</code></pre>\n</li>\n<li>\n<p>Run the following command to verify the volume creation:</p>\n<pre><code>kubectl get pvc -n &lt;oo_namespace&gt; | grep oo</code></pre>\n</li>\n</ol>\n<div> </div>\n</div>",
  "modifiedon": "2025-11-21 07:15:56"
}