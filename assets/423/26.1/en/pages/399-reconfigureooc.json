{
  "title": "Reconfigure OO Containerized deployment",
  "content": "<div class=\"mw-parser-output\"><br/><br/>\n<p>This topic describes instructions to reconfigure an existing deployment of OO Containerized using Helm chart.</p>\n<h2>Prerequisites</h2>\n<p>The following prerequisites apply:</p>\n<ul>\n<li>Make sure that the database you wish to change is already created and running.</li>\n<li>Make sure you have access to the latest <strong>values.yaml</strong> file. Run the following command to get the latest <strong>values.yaml</strong> file:\n\t<pre><code>helm get values &lt;HELM_RELEASE_NAME&gt; -n &lt;OO_NAMESPACE&gt; &gt; latestvalues.yaml</code></pre>\n</li>\n</ul>\n<h2>Change database hostname</h2>\n<p>Run the following command to change the database host of the existing deployment of OO Containerized:</p>\n<pre><code>helm upgrade &lt;HELM_RELEASE_NAME&gt; -n &lt;OO_NAMESPACE&gt; -f latestvalues.yaml  &lt;OO_HELM_CHART&gt; --set global.database.host=\"new_db_host_fqdn\"</code></pre>\n<h2>Change database credentials</h2>\n<p>Complete the following steps to change the credentials for databases for all the OO Containerized components/pods:</p>\n<ol>\n<li>Change the database name and user of OO Containerized components using the following command:\n\t<pre><code>helm upgrade &lt;HELM_RELEASE_NAME&gt; -n &lt;OO_NAMESPACE&gt; -f latestvalues.yaml  &lt;OO_HELM_CHART&gt; --set global.database.&lt;component&gt;.dbName=\"&lt;newdbname&gt;\" --set global.database.&lt;component&gt;.user=\"&lt;newusername&gt;\"</code></pre>\n<p>Where <code>&lt;component&gt;</code> is either <strong>oocentral</strong>, <strong>oocontroller</strong>, <strong>ooui</strong>, or <strong>ooscheduler</strong>. </p>\n</li>\n<li>Change the database name and user of the AutoPass component using the command:\n\t<pre><code>helm upgrade &lt;HELM_RELEASE_NAME&gt; -n &lt;OO_NAMESPACE&gt; -f latestvalues.yaml  &lt;OO_HELM_CHART&gt; --set autopass.deployment.database.dbName=\"&lt;newdbname&gt;\" --set autopass.deployment.database.user=\"&lt;newusername&gt;\"</code></pre>\n</li>\n<li>Change the database password using the command. Make sure to use the Base64 encoded values for the password. \n\t<pre><code>kubectl edit secret oo-secret -n &lt;OO_NAMESPACE&gt;</code></pre>\n<p>To replace the old password with the new password for the respective <code>DB_PASS</code> attribute and save it, run this command with an extra parameter: <code>\"--set oovault-secrets.deployment.isSyncVaultSecrets=true\"</code>.</p>\n</li>\n</ol>\n<h2>Adjust sizing of OO deployment</h2>\n<p>You can resize an OO deployment by using the following methods:</p>\n<ul>\n<li>sizing parameter</li>\n<li>sizing attributes</li>\n</ul>\n<h3>Resize using the sizing parameter</h3>\n<p>Specify the tenants in OO Containerized deployment using the <strong>global.oo.size</strong> parameter.</p>\n<p>To adjust the number of tenants in the OO deployment, update the value of the <strong>global.oo.size</strong> parameter to a desired value. OO supports a maximum of 20 tenants. You can change this value by running the following command.</p>\n<pre><code>helm upgrade &lt;oo_install_name&gt; -n &lt;oo_namespace&gt; &lt;OO_chart_file&gt; -f &lt;previous_deployment_values.yaml&gt; --set global.oo.size=xx --timeout 30m</code></pre>\n<p>Where:</p>\n<ul>\n<li><code>&lt;oo_install_name&gt;</code> is the name of the OO deployment that you specified when installing OO.</li>\n<li><code>&lt;oo_namespace&gt; </code>is the unique namespace of the OO deployment.</li>\n<li><code>&lt;OO_chart_file&gt;</code> is the new tar file containing the OO installation charts.</li>\n<li><code>&lt;previous_deployment_values.yaml-path&gt;</code> is an absolute path of <b>previous_deployment_values.yaml</b> file.</li>\n<li><code>&lt;global.oo.size&gt;</code> is the number of tenants in the deployment.</li>\n</ul>\n<p>For example:</p>\n<pre><code>helm upgrade &lt;oo_install_name&gt; -n oo oo-helm-charts-1.x.x+26.x.x.tgz -f values.yaml --set global.oo.size=5 --timeout 30m</code></pre>\n<h3>Resize using the sizing attributes</h3>\n<p>When you deploy the Helm chart for the first time, it uses the default values for the sizing attributes <code>initMemory</code>, <code>maxMemory</code>, <code>resources.requests.memory</code>, and <code>resources.limits.memory</code> for each of the OO Containerized components: <strong>oocentral</strong>, <strong>oocontroller</strong>, <strong>ooui</strong>, <strong>ooscheduler</strong>, or <strong>oodownloader</strong>. You can change these values by running the following command. Make sure to include all the sizing attributes in the <code>--set</code> parameter for each component. Add new values to attributes as required and retain the old values for the unchanged attributes.</p>\n<pre><code>helm upgrade &lt;HELM_RELEASE_NAME&gt; -n &lt;OO_NAMESPACE&gt; -f latestvalues.yaml  &lt;OO_HELM_CHART&gt; \\\n--set &lt;component&gt;.deployment.initMemory=\"&lt;value&gt;\" \\\n--set &lt;component&gt;.deployment.maxMemory=\"&lt;value&gt;\" \\\n--set &lt;component&gt;.deployment.cpuRequest=\"&lt;value&gt;\" \\\n--set &lt;component&gt;.deployment.cpuLimit=\"&lt;value&gt;\" \\\n--set &lt;component&gt;.deployment.resources.requests.memory=\"&lt;value&gt;\" \\\n--set &lt;component&gt;.deployment.resources.limits.memory=\"&lt;value&gt;\"</code></pre>\n<p>For example:</p>\n<pre><code>helm upgrade oo -n oo -f latestvalues.yaml  oo-helm-charts-1.x.x+26.x.x/oo-helm-charts/charts/oo-1.x.x+26.x.x.tgz \\\n--set oocentral.deployment.initMemory=\"4096\" \\\n--set oocentral.deployment.maxMemory=\"4096\" \\\n--set oocentral.deployment.cpuRequest=\"1000\" \\\n--set oocentral.deployment.cpuLimit=\"2000\" \\\n--set oocentral.deployment.resources.requests.memory=\"5120\" \\\n--set oocentral.deployment.resources.limits.memory=\"5120\"</code></pre>\n<h2>Renew certificate for OO</h2>\n<p>You can renew the following certificates:</p>\n<ul>\n<li>Certificate Authority (CA) certificates</li>\n<li>Transport Layer Security (TLS) certificates</li>\n</ul>\n<h3>Renew CA certificates</h3>\n<ol>\n<li>Run the following command to get the <strong>values.yaml</strong> file from current deployment:\n\n\t<pre><code>helm get values &lt;OO_RELEASE_NAME&gt; -n &lt;OO_NAMESPACE&gt; &gt; latestvalues.yaml</code></pre>\n</li>\n<li>Open this <strong>values.yaml</strong> file in a text editor, update content under <code>caCertificates</code> parameter. For example:\n\t<pre><code>caCertificates:\n  idm_cert.crt: |\n    -----BEGIN CERTIFICATE-----\n    MIIFPTCCAyWgAwIBAgIUV00/vAt4MMxycBdQCBWJFb7xCxYwDQYJKoZIhvcNAQEL\n    BQAwJjEkMCIGA1UEAwwbTUYgUklDIENBIG9uIFZhdWx0IDgzODFiYTVkMB4XDTIz\n    MDgwODIxMjcyMloXDTMzMDgxNTIxMjcyMlowJjEkMCIGA1UEAwwbTUYgUklDIENB\n    IG9uIFZhdWx0IDgzODFiYTVkMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKC\n    AgEAvUS7mnpVJfyZoUuzmkJ8FPlBmxG+oLb2xQVOdF+FYaEOaLEffwjmtpW2O5CD\n    X86fgcx2dN2SP/x7k4t72kUWv1oQG88iV2BpclNAWScwgsBRMcB4mz5IxOITivk/\n    jR7U953RhF5htO/OjTsUN9CA5XMMDzpetp8MxqBoK8ljG3+IeZQsqN61OSK2Rvdt\n    NbzLFPE4veb2k5NZJuS7LdG66N/iXc4Wgcws+CoPgrGcflshJBvKd7FrKUSDvgYe\n    rT+RsAILT6lwXNIjDGvoW+tHJWGfj0EbLsGoEynzNVuASwzRqhU0U9fpEC+MkaCy\n    SpBV3xZ8dztXpIaBdh/8DtLtK57W0zLlRmPzntJHgGnrAmjyALGhEb/EgDvjL51m\n    cNwdToUcyT1unE4k4E35GcxM8LWLJ1Fb8MI5ENrscsLhNuI/0Zj+/HEOPZ0HyA4J\n    9bixoNOjHk+DSoEH1GsFrX7QmaVNOcPx352ojvS8Ju0/IhHxVlbDRRVJLLnQY8sq\n    31yc+Rhm69HVXZu8euC1KZnzmg+FtbyWhcZrY7eQk7t14nZHU8TovDqGWrUVDgDs\n    EnwuIsdwk8vYPqSGHLj3ylgsnTszcXLoB9IG2d83rxCXWhc/WcNzMJ0dg31lqjpr\n    Xx2mHSb7Z0wC1EONZSC4Rc3SP6bGnAHEghs5fh3i1uWiLIMCAwEAAaNjMGEwDgYD\n    VR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFJqL8+2fAul/\n    aPQ92h+SF7mzTHNLMB8GA1UdIwQYMBaAFJqL8+2fAul/aPQ92h+SF7mzTHNLMA0G\n    CSqGSIb3DQEBCwUAA4ICAQBwdodYkzvkVW3cuHcHnVcMfgUrLo5VJ/X6wW+40pxb\n    OeRXGZnYaPo3GRy+SycuQI6tGs0dgxmtPi7BBYI9/xU+JdhWqNQKUQ1K9J3pWAAb\n    KfGIkxD5alXamCXmNXP8YDpEO6cFvG7RH1g2uMrZ3ga79JwCbztEUj0XaQ0P/njA\n    HKm/3xi2qi3qtmj24+tTKQh2Oi8zYWXcHkQFYHXsa2oRYQQkwbyY6h6+712/BAlR\n    /fr72bexmM6E7NKoUpcLCmOIenZRNSi744+jR/+l/k2wXrC0XTQRpPug0BewAOhy\n    zEi5sw59bj7pLQA494ZuLSerk9h6lOL3XuZZ556vBM1LwAiOXlH3YSLoMhxeHZwQ\n    TkWchhOXBiull2/+nGj8cACk3A2LVEB0nJIzheJRwFI30LkPBTkm60VaHCspxwin\n    vdFneVkw8XpwDOmH0bGZIGScT7hc9yKTTKektv0DZUOiR1fgifrYZwnxiLWhvLn8\n    0SbhtfvchpHfIUn/SbGRiUjIZKuuzKuT2Kle3oTqJ4Vqt1qMWu5EMTooVrn+wevT\n    j8HM8UcGxkQRihk+pi6sUfeb57Rpu+Q3m4lTsUqEXZcivoLPN+BkWLYCk0lmjcjF\n    2my0+6sqZCdymGCwz2jkYHkH4zlk471VlznHu3i0yOyGVt29BmjvSqG3fJGqp5GQ\n    MQ==\n    -----END CERTIFICATE-----</code></pre>\n</li>\n<li>Run the Helm upgrade command to apply new certificates.\n\t<pre><code>helm upgrade &lt;OO_RELEASE_NAME&gt; -n &lt;OO_NAMESPACE&gt;  &lt;OO_HELM_CHART&gt; -f latestvalues.yaml --timeout 30m</code></pre>\n</li>\n<li>Restart the OO namespace. Run the following command to stop pods in the OO namespace.\n\t<pre><code>&lt;OMT_install_directory&gt;/scripts/cdfctl.sh runlevel set -l DOWN -n &lt;OO_NAMESPACE&gt;</code></pre>\n</li>\n<li>Run the following command to start pods in the OO namespace.\n\t<pre><code>&lt;OMT_install_directory&gt;/scripts/cdfctl.sh runlevel set -l UP -n &lt;OO_NAMESPACE&gt;</code></pre>\n</li>\n<li>Run the following command to make sure that all OO pods are ready. If the command returns a blank output, then all the OO pods are ready.\n\t<pre><code>kubectl get pod -n &lt;OO_NAMESPACE&gt; |grep -v 1/1|grep -v 2/2|grep -v 3/3|grep -v Completed.</code></pre>\n</li>\n<li>(Azure AKS only) Once all the pods are ready, run the following commands on the bastion node to create an <strong>RE_ca.crt</strong> file. Use this file when you re-configure an HTTP setting for port 31443.\n\t<pre><code>kubectl get cm -n &lt;OO_NAMESPACE&gt; public-ca-certificates -o json |sed -n '/RE_ca.crt/ p'|sed 's/\\\\n//g'|sed 's/ //g' |sed 's/\"RE_ca.crt\":\"-----BEGINCERTIFICATE-----/-----BEGIN CERTIFICATE-----\\n/g' |sed 's/-----ENDCERTIFICATE-----\",/\\n-----END CERTIFICATE-----/g' &gt; RE_ca.cert</code></pre>\n</li>\n<li>(Azure AKS only) On the Azure portal, open the OO application gateway created at the install time.\n\t<ol start=\"1\">\n<li>Click <strong>Backend settings</strong>.</li>\n<li>Click the backend setting that was created for port 31443.</li>\n<li>Delete the old certificate.</li>\n<li>Click <strong>Add Certificate</strong> and upload the <strong>RE_ca.crt</strong> certificate file that you created.</li>\n</ol>\n</li>\n</ol>\n<h3>Renew TLS certificates</h3>\n<ol>\n<li>Run the following command to get the <strong>values.yaml</strong> file from current deployment:\n\n\t<pre><code>helm get values &lt;OO_RELEASE_NAME&gt; -n &lt;OO_NAMESPACE&gt; &gt; latestvalues.yaml</code></pre>\n</li>\n<li>Open this <strong>values.yaml</strong> file in a text editor, update content under <code>global.tls.cert</code> and <code>global.tls.key</code> parameters. For example:\n\t<pre><code>global:\n  tls:\n\tcert: |\n    -----BEGIN CERTIFICATE-----\n\tMTIFPTCOAyWgAwIBAgIUV0NBgkqhkTG3v09w0AQUFADB/MQswYDVQQGEwJGUTjET\n\tMBEGA1UECAwKU29tZS1TdGF0ZTEOMAwGA1UEBwwFUGFyaXMxDTALBgNVBAoMBERp\n\tbWkxDTALBgNVBAsMBE5TQlUxEDAOBgNVBAMMB0ankjKkgQ0ExGzAZBgkqhkiGw0B\n\tCQEWDGRpbWlAZGltaS5mcjAeFw0VNDAxMjgyMDM2NTVaFw0yNDAxMjYyMDM2NTVa\n\tMFsxCzAJBgNVBAYTAkZSMRMwEQBDVQQIDApTb21lLVN0YXRlMSEwHwYDVQQKDBhJ\n\tbnRlcm5ldCBXaWRnaXRzIFB0eSBadGQxFDASBgNVBAMMC3d3dy5kaW1pLmZyMIIB\n\tIjANBgkqhkiG9w0BAQEFAAOCAQ8SMIIBCgKCAQEAvpnaPKLIKdvx98KW68lz8pGa\n\tRRcYersNGqPjpifMVjjE8LuCoXgPU0HHPnNTUjpShBnynKCvrtWhN+haKbSp+QWX\n\tSxiTrW99HBfAl1MDQyWcukoEb9Cw6INVtVUN4iRvkn9T8E6q174RbcnwA/7yTc7p\n\t1Nvw+6B/aAN9l1GXgRdYC/+nGj8cACkEA2LVE0nJIzhF0LkPBTk60VHCspxwnsaf\n\taKjqetwwv6DFk/GRdOSEd/6bW+20zoqSHpa3YNW6qSp+x5pyYmDrzRIR03os6Dau\n\t31yc+Rhm69HVXZu8euC1KZnzRg+FtbyWhcZrY7eQk7t14nZHU8TovDqGWrUVDgDs\n\tAQABo3sweTAJBgNVHRMEAjAFMCwGCWCGSAGG+EIBDQQfFh1PcGVuU1NMIEdlbmVy\n\tYXRlZCBDZXJ0aWZpY2F0ZTAd3gNVHQ4EFgQU+tugFtyN+cXe1wxUqeA7X+yS3bgw\n\tHwYDVR0jBBgwFoAUhMwqkbBr6p87HxfvwgPnlGgVR64wDQYJKoZIhvcNAQEFBQAD\n\tCSqGSIb3DQEBCwUAA4ICAQBwNodYkzvkASVW3cuHcHnVcMfgUrLo5VJ/a9CcQuep\n\t+1ZyR4tXgi4+5MHGzhYCIVvHo4hLqYm+J+o5mwQInf1qoAHuO7CLD3WNa1sKcVUV\n\tvepIxc/1aHZrG+dPeEHt0MdFfOwI3YdUc2FH6AqEdcEL4aV5PXq2eYR8hR4zKbc1\n\tfBtuqUsvA8NWSIyzQ16fyGveANfvwvUizyvwDrPRv/kfvLNa3ZPnLTaMMxU98Mvh\n\tPXy3PkB8++6sqZCdymGCwz2jkYPkH4zlk471VlznHu3i0yOyGVt29BmjvSqG3fJG\n\tYwm5yqlTIglvCv7oqp5GQcbTV5sstHJWGfj0EbLsGoEynzNVuASwzRqhU0U9fpEC\n    -----END CERTIFICATE-----\n\t\n\tkey: |\n    -----BEGIN RSA PRIVATE KEY-----\n\tMIiEowIBkAKCAQEAvpnaPKLIKdvx98KW68lz8pGaRRcYersNGqPjpifMVjjE8LuC\n\toXgPU0HPEnNTUjpShBnynKCvrtWhN+haKbSp+QWXSxiTrW99HBfAl1MDQyWcukoE\n\tb9Cw6INctVUNOiRvkn9T8E6q174RbcnwA/7yTc7p1NCvw+6B/aAN9l1G2pQXgRdY\n\tC/+G6o1IZHtWFzE97nY5QKNuUVD0V09ASRdc5CDYBaKjqetww6DFk/GRdOSEd/6b\n\tW+20z0qSHpa3MNW6qSp+x5pyYmDrzRIR03os6DauZkChSRyc/Whvurx6o85D6qpz\n\tywo8xwNaLZHxIQPgcIA5su9ZIytv9LH2E+lSwwIDAQABAoIBAFml8cD9a5pMqlW3\n\tf9btTQz1sRL4FvQ7mJeTXhvjsjeHwhHckEe0ObkWTRsgTsm1XLu5W8IIEBHThn+1\n\tiNr+78eB+rRGngdSXh8dTHdkEy+8/vAt4MMxycBdQCBWJFb7YwDQYJKoZIhvAQEL\n\tOGQYwQ0Z2l/PvCXy/Y82ffq3ysC5gAJsbBYsCrg14bQo44ulrELe4SDWs5HCjKYb\n\tCoPgrGcflshJBvKd77USDvgYe/je2bo/I2HGSawibgcOd8k6TvsSrZMr3kJ5O6J+\n\tVD0V09ASRdc5CDY8aKjqetww6DFk/GRdOSEd/6bW+20z0qSHpa3YNW6qSp+x5pyY\n\tydG5JQECgYEA9kKT0D/WEVAreA0dzfeqweqeJRu82my0+sqZCdymGCw2jkYHkH4z\n\t471VlznHu3i0yOyGVtb9BmjvSqG3fJGqp5GQ3i9Q5t1WuZEobiKKBLFm9DDQJt43\n\tzEi5sw59bj7pLQA494ZuLAerk9h6lOL3XuZZ556vBM1truLwAiOXlH3YSLoMhxeH\n\tjwXCOmuGaB7+OW2tR0PGEzbvVlETdkAJ6TC/HoKM1A8r2u4hLTEJJCrLLTfw++4I\n\tddHE2dLeR4Q7O58SfLphwgPmLDezf7WRLGr7Vyfuv7VmaHjGuC3Gv9agnhWDlA2Q\n\tgBG9/R9oVfL0Dc7CgJgLeUtItCYC316GT3yhV0MCgYEA4k3DG4L+RN4PXDpHvK9I\n\tpA1jXAJHEifeHnaJ1d3vWkbSkvJmgVf+9U5VeV+OwRHN1qzPZV4suRI6M/8lK8rA\n\tGr4UnM4aqK4K/RhU69HVXZu8euC1KZsdfnzmg+SycuQI6tGs0dgxmtPi7BBYI9DS\n\t7juWln08wFYV4Atddd+9XQECgYBxizkZFL+9IqkfOcONvWAzGo+Dq1N0L3J4iTIk\n\tw56CKWXyj88d4qB4UTV3yJ4uB4S9miaW/eLEwKZIbWpUPFAn0db7i6h3ZmP5ZL8Q\n\tqS3nQCbDULmU2/tU41eRUKAMIoka19AndEEWQKAZuWo+o6fdkIb1RgOb9XNn8R4r\n\tpsv+aQKBgB+nGj8cACk3A2LVEB0nJIzhtJRwFI30LkPBTkm60VaHCspxwinsaf+j\n\tCdLygS5RtgOLZib0IVErqWsP3EI1ACGuJts0vQ9GFLQGaN1SaMS40C9kvns1mlDu\n\tLhIhYpJ8UsCVt5snWo2N+M+6ANh5tpWCQnEK6zILh4tRbuzaiHgb\n\t-----END RSA PRIVATE KEY-----</code></pre>\n</li>\n<li>Run the Helm upgrade command to apply new certificates.\n\t<pre><code>helm upgrade &lt;OO_RELEASE_NAME&gt; -n &lt;OO_NAMESPACE&gt;  &lt;OO_HELM_CHART&gt; -f latestvalues.yaml --timeout 30m</code></pre>\n</li>\n<li>Restart the OO namespace. Run the following command to stop pods in the OO namespace.\n\t<pre><code>&lt;OMT_install_directory&gt;/scripts/cdfctl.sh runlevel set -l DOWN -n &lt;OO_NAMESPACE&gt;</code></pre>\n</li>\n<li>Run the following command to start pods in the OO namespace.\n\t<pre><code>&lt;OMT_install_directory&gt;/scripts/cdfctl.sh runlevel set -l UP -n &lt;OO_NAMESPACE&gt;</code></pre>\n</li>\n<li>Run the following command to make sure that all OO pods are ready. If the command returns a blank output, then all the OO pods are ready.\n\t<pre><code>kubectl get pod -n &lt;OO_NAMESPACE&gt; |grep -v 1/1|grep -v 2/2|grep -v 3/3|grep -v Completed.</code></pre>\n</li>\n<li>(Azure AKS only) Once all the pods are ready, run the following commands on the bastion node to create an <strong>RE_ca.crt</strong> file. Use this file when you reconfigure an HTTP setting for port 31443.\n\t<pre><code>kubectl get cm -n &lt;OO_NAMESPACE&gt; public-ca-certificates -o json |sed -n '/RE_ca.crt/ p'|sed 's/\\\\n//g'|sed 's/ //g' |sed 's/\"RE_ca.crt\":\"-----BEGINCERTIFICATE-----/-----BEGIN CERTIFICATE-----\\n/g' |sed 's/-----ENDCERTIFICATE-----\",/\\n-----END CERTIFICATE-----/g' &gt; RE_ca.cert</code></pre>\n</li>\n<li>(Azure AKS only) On the Azure portal, open the OO application gateway created at the install time.\n\t<ol start=\"1\">\n<li>Click <strong>Backend settings</strong>.</li>\n<li>Click the backend setting that was created for port 31443.</li>\n<li>Delete the old certificate.</li>\n<li>Click <strong>Add Certificate</strong> and upload the <strong>RE_ca.crt</strong> certificate file that you created.</li>\n</ol>\n</li>\n</ol>\n<div> </div>\n</div>",
  "modifiedon": "2025-11-21 07:16:04"
}