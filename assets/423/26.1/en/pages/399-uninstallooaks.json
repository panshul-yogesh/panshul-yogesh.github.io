{
  "title": "Uninstall OO on Azure",
  "content": "<div class=\"mw-parser-output\"><p>To uninstall Operations Orchestration Containerized (OO Containerized) on Azure with AKS, perform the following tasks:</p>\n<h2 id=\"Delete_the_CMS_deployment\">Delete the OO deployment</h2>\n<ol>\n<li>Log on to the bastion node, and navigate to the OPTIC Management Toolkit (OMT) installation directory:\n\t<pre>cd &lt;OMT_External_K8s_2x.x-xxx&gt;/bin</pre>\n</li>\n<li>Run the following command to remove the OO release:\n\t<pre>./helm uninstall &lt;<em>OO RELEASE NAME</em>&gt; -n &lt;<em>OO NAMESPACE</em>&gt;</pre>\n\tWhere:\n\n\t<ul>\n<li><code>&lt;<em>OO RELEASE NAME</em>&gt;</code> is the OO release that you want to uninstall, which you can get by running the command <code>./helm list -n &lt;<em>OO NAMESPACE</em>&gt;.</code></li>\n<li><code>&lt;<em>OO NAMESPACE</em>&gt;</code> is the namespace where you installed OO.</li>\n</ul>\n</li>\n<li>Run the following command to remove the OO deployment:\n\t<pre>cd &lt;OMT_External_K8s_2x.x-xxx&gt;/scripts\n./cdfctl.sh deployment delete -d &lt;<em>OO DEPLOYMENT NAME</em>&gt;</pre>\n\tWhere\n\n\t<ul>\n<li><code>&lt;<em>OO DEPLOYMENT NAME</em>&gt;</code> is the name you specified for the deployment you created to install OO.</li>\n</ul>\n\tFor example:\n\n\t<pre>./cdfctl.sh deployment delete -d oo-prod</pre>\n<p>You will need to enter the password of the administrator that you set during the OMT installation.</p>\n</li>\n</ol>\n<h2 id=\"Remove_persistent_volumes\">Remove persistent volume and claims</h2>\n<p>If you created the <strong>oo-pv.yaml</strong> sample file as documented in <a href=\"/doc/423/26.1/preparepvooaks\" style=\"\" title=\"Prepare persistent volumes and claims for OO (AKS)\">Prepare persistent volumes and claims for OO</a>, run the following command to delete the persistent volumes:</p>\n<pre>kubectl delete -f &lt;oo-pvc.yaml path&gt;\nkubectl delete -f &lt;oo-pv.yaml path&gt;\n</pre>\n<p>For example:</p>\n<pre>kubectl delete -f oo-helm-charts-1.x.x+26.x.x/oo-helm-charts/samples/persistent_storage/oo-pvc.yaml\nkubectl delete -f oo-helm-charts-1.x.x+26.x.x/oo-helm-charts/samples/persistent_storage/oo-pv.yaml\n</pre>\n<h2 id=\"Clean_the_NFS_volumes\">Clean the file system volumes</h2>\n<p>If the Azure file system is mounted to <code>/mnt/nfs/&lt;oo_fileshare_name&gt;</code>:</p>\n<pre>cd /mnt/nfs/&lt;oo_fileshare_name&gt;\nrm -rf var/vols/itom/oo/*\n</pre>\n<p>Where &lt;<code>oo_fileshare_name</code>&gt; is the name of the Azure file share, created in <a href=\"/doc/423/26.1/aksazurefileoo\" title=\"Configure Azure Premium Files for OO Containerized\">Configure Azure Premium Files for OO</a>.</p>\n<h2 id=\"Clean_the_databases\">Clean the databases</h2>\n<p>When you uninstall OO, the databases residing in the external PostgreSQL databases aren't removed. You need to remove the databases manually.</p>\n<p>If you used different names when creating the databases and database users for OO components, replace the default names below with the actual names you used. </p>\n<ol>\n<li>Connect to the PostgreSQL server using the following command:\n\t<pre>psql \"host=&lt;fqdn of flexible server&gt; port=5432 dbname=postgres user=&lt;postgres admin&gt; password=&lt;password for admin&gt;</pre>\n</li>\n<li>Delete all the OO databases by running the following commands:\n\t<pre># drop databases\ndrop database oocentraldb;\ndrop database oouidb;\ndrop database oocontrollerdb;\ndrop database ooschedulerdb;\ndrop database aplsdb;\n\n</pre>\n</li>\n<li>Delete all the OO database users by running the following commands:\n\t<pre># drop users\ndrop role oocentraldbuser;\ndrop role oouidbuser;\ndrop role oocontrollerdbuser;\ndrop role ooscheduler;\ndrop role aplsdbuser;\n</pre>\n</li>\n</ol>\n</div>",
  "modifiedon": "2025-11-21 07:15:50"
}