{
  "title": "Add roles to users",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>The roles get created when you perform the TMS API call while onboarding the tenants. Use this topic to assign the newly created roles to the users in IDM. For more information,  see <a href=\"/doc/423/26.1/402-onboardtenantandcreateusers\" title=\"Onboarding tenants and creating users\">Onboarding tenants and creating users</a>.</p>\n<h2>Add roles to users in IDM </h2>\n<p id=\"Assign_roles_to_individual_users\">Adding roles to a user helps you to manage the permissions assigned to that user. </p>\n<p>Note that you can't assign a role that has the <code>SUPER_IDM_ADMIN</code> permission to a user unless you also have the <code>SUPER_IDM_ADMIN</code> permission. Similarly, you can't assign a role that has the <code>ORG_ADMIN</code> permission to a user unless you have the <code>ORG_ADMIN </code>or <code>SUPER_IDM_ADMIN</code> permission.</p>\n<p>You can assign roles to users when you create that user. Or, you can assign roles to the existing users. To do this, follow these steps:</p>\n<ol>\n<li>In the IdM Administration console, select the organization of the user you want to assign a role, and then click the <strong>Users</strong> tab.  </li>\n<li>Select an existing user, and then click the action button   <a class=\"image\" href=\"/file/images/0/06/2018.02/attachments/23201447/23201450.png\" title=\"/file/images/0/06/2018.02/attachments/23201447/23201450.png\"> <img alt=\"2018.02/attachments/23201447/23201450.png\" data-file-height=\"27\" data-file-width=\"38\" height=\"27\" src=\"../../../images/23201450_f07afb22.png\" width=\"38\"/> </a>  to edit the the user.</li>\n<li>In the <strong>DIRECT ROLES</strong> pane, click   <a class=\"image\" href=\"/file/images/0/03/2018.02/attachments/23201447/23201451.png\" title=\"/file/images/0/03/2018.02/attachments/23201447/23201451.png\"> <img alt=\"2018.02/attachments/23201447/23201451.png\" data-file-height=\"23\" data-file-width=\"25\" height=\"23\" src=\"../../../images/23201451_1ec4bbfe.png\" width=\"25\"/> </a>  to open the <strong>ADD DIRECT ROLES</strong> box, add the desired role or roles, and then click <strong>SAVE</strong>.\n\t<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">You can remove roles from a user by selecting a role in the <strong>DIRECT ROLES</strong> pane, and then click  <a class=\"image\" href=\"/file/images/3/33/remove_spend_group.png\" title=\"/file/images/3/33/remove_spend_group.png\"> <img alt=\"remove button\" height=\"37\" src=\"../../../images/remove_spend_group_40130ce1.png\" width=\"34\"/> </a>  .</div>\n</div>\n</li>\n</ol>\n<p>Once you have assigned a role to a user, that user appears in the <strong>Related Users</strong> section of the role's description. To view this, click the <strong>Roles</strong> tab, and then click the desired role to open the <strong>ROLE EDIT</strong> page.</p>\n<h2><span style=\"font-size: clamp(1.59375rem, 18.7895px + 1.39803vw, 2.125rem);\">Add the OPTIC Data Lake roles to the users</span></h2>\n<p>Following roles are created by the TMS API calls for OPTIC Data Lake:</p>\n<table cellpadding=\"1\" cellspacing=\"1\">\n<caption>Roles created for OPTIC Data Lake</caption>\n<thead>\n<tr>\n<th scope=\"col\">Name</th>\n<th scope=\"col\">Display name </th>\n<th scope=\"col\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>di_admin</td>\n<td>DI ADMIN</td>\n<td>DI Admin Role</td>\n</tr>\n<tr>\n<td>di_data_access</td>\n<td>DI DATA ACCESS</td>\n<td>DI Data Access Role</td>\n</tr>\n<tr>\n<td>di_ingestion</td>\n<td>DI INGESTION</td>\n<td>DI Ingestion Role</td>\n</tr>\n</tbody>\n</table>\n<p>Add these newly created roles to the tenant users in IDM:</p>\n<ol>\n<li>Navigate to the user list of your tenant.</li>\n<li>Edit the user. The USER EDIT page opens.</li>\n<li>In the Direct Roles field, add the newly created roles.</li>\n</ol>\n<h2>Add the Operations Cloud roles to the users</h2>\n<p>Following roles are created by the TMS API calls for Operations Cloud:</p>\n<table cellpadding=\"1\" cellspacing=\"1\">\n<caption>Roles created for UI Services</caption>\n<thead>\n<tr>\n<th scope=\"col\">Name</th>\n<th scope=\"col\">Display name </th>\n<th scope=\"col\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>bvd_admin</td>\n<td>bvd admin</td>\n<td>Role for Admin users</td>\n</tr>\n</tbody>\n</table>\n<p>Add these newly created roles to the tenant users in IDM:</p>\n<ol>\n<li>Navigate to the user list of your tenant.</li>\n<li>Edit the user. The USER EDIT page opens.</li>\n<li>In the Direct Roles field, add the newly created roles.</li>\n</ol>\n<h2>Add the Autopass roles to the users</h2>\n<ol>\n<li>Get the IDM token for a user with SUPER_IDM_ADMIN permission.\n\t<pre><code>kubectl -n &lt;namespace&gt; get secret op-secret  --template={{.data.idm_integration_admin_password}} | base64 -d\n\ncurl -X POST https://&lt;HOST&gt;:&lt;PORT&gt;/idm-service/v3.0/tokens -H 'content-type: application/json' -d '{\"passwordCredentials\":{\"username\":\"&lt;username&gt;\",\"password\":\"&lt;password&gt;\"},\"tenantName\":\"&lt;idmOrgName&gt;\"}' --ca-cert &lt;/etc/pki/tls/certs/ca-bundle.crt&gt;\n </code></pre>\n<br/>\n\twhere,<br/>\n<strong>idmOrgName:</strong> is the organization specified in the global.idm.tenant <br/>\n<strong>username:</strong> is the name of the user present in the IDM oragnization with SUPER_IDM_ADMIN permission<br/>\n<strong>password:</strong> the password of the user received from running the above kubectl command<br/>\n<br/>\n\tAfter running the POST request, you receive a IDM token. For more information, see <a href=\"/doc/423/26.1/402-onboardtenantandcreateusers\" title=\"Onboard tenants and create users\">Onboard tenants and create users</a>.<br/>\n\t </li>\n<li>Perform the API Call for role creation in Autopass.\n\t<pre><code>curl -X POST 'https://&lt;HOST&gt;:&lt;PORT&gt;/idm-service/api/scim/organizations/&lt;tenant_name&gt;/roles/'  -H 'accept: application/json'   -H 'content-type: application/json'   -H 'X-Auth-Token: &lt;IDM token&gt;' -d --ca-cert &lt;/etc/pki/tls/certs/ca-bundle.crt&gt; @role_onboard.json\n \n \n### Sample Json (role_onboard.json)\n\n{\n  \"name\": \"idmmanagement\",\n  \"displayName\": \"IDMMANAGEMENTROLE\",\n  \"description\": \"\",\n  \"application\": \"\",\n  \"permissions\": [\n    \"MNG_ADMIN\"\n  ]\n}</code></pre>\n<br/>\n\t  where, the \"<code>X-Auth-Token</code>\" is the IDM token retrieved in Step 1.</li>\n<li>Perform the API call to add roles to the users in IDM:\n\t<pre><code>curl -X POST --location 'https://&lt;HOST&gt;:&lt;PORT&gt;/idm-service/api/scim/organizations/&lt;tenant_x&gt;/usersbulk/&lt;user you created&gt;/roles' --header 'X-Auth-Token: &lt;IDM token&gt; ' --header 'Accept: application/json' --header 'Content-Type: application/json; charset=utf-8' --data --ca-cert &lt;/etc/pki/tls/certs/ca-bundle.crt&gt; @abc.json</code></pre>\n<br/>\n\twhere, the \"<code>X-Auth-Token</code>\" is the IDM token retrieved in Step 1.</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2026-01-30 14:51:17"
}