{
  "title": "Deploy Operations Platform",
  "content": "<div class=\"mw-parser-output\">\n<p>Operations Platform supports multiple deployment options. Before starting a new deployment, it's recommended to evaluate your environment using the sizing calculator. In the calculator, you select your deployment preferences, intended capabilities, and expected scale. Based on your inputs, the calculator provides sizing recommendations that should be followed. It's also recommended to revisit and reassess the sizing calculator periodically, for example, before upgrading to a newer version.</p>\n<p>In the \"<span class=\"nanospell-typo\">SizCalc</span> (Results)\" sheet, you'll find details about local storage requirements for OPTIC Data Lake (DL). These values should be used during your planning phase to allocate <span class=\"nanospell-typo\">LPV</span> storage on the appropriate worker nodes.<br/>\nThe same sheet also includes recommended deployment sizes for both Operations Platform and your associated applications. Additionally, the <span class=\"nanospell-typo\">Sizcalc</span> (Results) sheet shows values for OPTIC DL required replica counts for Pulsar bookkeeper &amp; broker, and also required counts for receiver and task executor replicas. The number of replicas is set in the deployment <span class=\"nanospell-typo\">yaml</span>, but in very large environments you may need to override one or more of the replica settings via command line using --set commands as shown in the examples.</p>\n<p>To deploy Operations Platform, you can follow any one of the four examples based on your specific requirement:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\"><strong>Deploy using common root CA certificate: </strong>this example presumes that you are using the same root CA certificate for <span class=\"nanospell-typo\">TLS</span> connections from Operations Platform to its databases and Ingress. If you have used a common CA for <span class=\"nanospell-typo\">TLS</span> connections for <span class=\"nanospell-typo\">Vertica</span> and other relational databases, use that same CA to generate the Ingress certificate for browser access. After the Ingress certificate is signed by your common CA, provide the server key and certificate chain trusted by the common root CA certificate in the helm install command.</li><li style=\"margin-left: 28px; position: relative;\"><strong>Deploy using different certificates: </strong>if you are using different Certificate Authority (CA) certificates for your database connections or for Operations Platform ingress port (Reporting UI), you must provide separate certificate parameters for each connection.</li><li style=\"margin-left: 28px; position: relative;\"><strong>Deploy using self-signed certificate for ingress: </strong>if you want Operations Platform to generate and use its own self-signed certificate for ingress (note that browsers consider this as insecure), specify certificate parameters if needed for database connections.</li><li style=\"margin-left: 28px; position: relative;\">\n<p><strong>Deploy on <span class=\"nanospell-typo\">AWS</span> with ALB enabled: </strong>this example shows the parameters when you are using an ALB as a gateway for the external access host, for example with an <span class=\"nanospell-typo\">AWS</span> deployment. The CA certificates for <span class=\"nanospell-typo\">TLS</span> connections from Operations Platform to its databases will differ in a cloud environment. If you want to use your corporate certificates for Ingress, provide the server key and certificate chain trusted by your Ingress CA certificate in the helm install command as shown in the last example.</p>\n</li></ul>\n<h2><a id=\"Deploy_using_common_root_CA_certificate\" name=\"Deploy_using_common_root_CA_certificate\" title=\"Deploy using common root CA certificate\"></a><a id=\"Deploy-using-common-root-CA-certificate\" name=\"Deploy-using-common-root-CA-certificate\" title=\"Deploy using common root CA certificate\"></a>Deploy using common root CA certificate</h2>\n<p>To deploy Operations Platform using a common root CA certificate, run the following command on the control plane or bastion node:</p>\n<pre><code>helm install &lt;deployment name&gt; \\\n  -n &lt;operations platform namespace&gt; \\\n  op-chart-&lt;version&gt;.tgz \\\n  -f &lt;op-values.yaml&gt; \\\n  --set-file \"caCertificates.root-ca\\.crt\"=&lt;root CA certificate file&gt; \\\n  --set-file oracleWallet=&lt;base64 encoded wallet text file&gt; \\\n  --set-file \"global.tls.cert\"=&lt;ingress server cert chain file&gt; \\\n  --set-file \"global.tls.key\"=&lt;ingress private key file&gt; \\\n  [--set itomdipulsar.bookeeper.replicaCount=&lt;Sizing calculator recommended bookeeper replica count&gt; \\]\n  [--set itomdipulsar.broker.replicaCount=&lt;Sizing calculator recommended broker replica count&gt; \\] \n  -f &lt;op deployment yaml&gt;</code></pre>\n<p><strong>where:</strong></p>\n<table cellpadding=\"1\" cellspacing=\"1\">\n<tbody>\n<tr>\n<td><code>&lt;helm deployment name&gt;</code></td>\n<td>Use the deployment name you specified while creating the Operations Platform <span class=\"nanospell-typo\">namespace</span> in the <em>Create Operations Platform <span class=\"nanospell-typo\">namespace</span> </em>topic.</td>\n</tr>\n<tr>\n<td><code>&lt;operations platform <span class=\"nanospell-typo\">namespace</span>&gt;</code></td>\n<td>Use the <span class=\"nanospell-typo\">namespace</span> for Operations Platform that you created earlier in the <em>Create Operations Platform <span class=\"nanospell-typo\">namespace</span> </em>topic.</td>\n</tr>\n<tr>\n<td><code>&lt;op-values.<span class=\"nanospell-typo\">yaml</span>&gt;</code></td>\n<td>Full path to your edited Operations Platform values <span class=\"nanospell-typo\">YAML</span> file.</td>\n</tr>\n<tr>\n<td><code>&lt;chart&gt;</code></td>\n<td>The absolute path to the chart package. Example: <code>op-chart-&lt;version&gt;.<span class=\"nanospell-typo\">tgz</span></code>. Chart file is available under <code>charts</code> directory.</td>\n</tr>\n<tr>\n<td><code>&lt;root CA certificate file&gt;</code></td>\n<td>The full path to the root CA certificate in <span class=\"nanospell-typo\">PEM</span> format that you used for configuring all <span class=\"nanospell-typo\">TLS</span>-enabled database connections as well as for creating the Ingress certificate that you can use for accessing the Operations Cloud UI through a browser. The file should include only the root (highest-level) CA certificate. Any intermediate certificates must be provided separately, as part of a certificate chain along with the server-signed certificate in the <code>&lt;ingress server cert chain file&gt;</code> parameter.</td>\n</tr>\n<tr>\n<td><code>&lt;ingress server cert chain file&gt;</code>*</td>\n<td>\n<div>Full path to the <span class=\"nanospell-typo\">PEM</span> format file containing your custom Ingress server certificate, including intermediate certificates if needed. The Ingress certificate acts as server to browser clients, for example, when users access the Operations Cloud UI.</div>\n</td>\n</tr>\n<tr>\n<td><code>&lt;ingress private key&gt;</code></td>\n<td>Full path to the file containing the Ingress private key.</td>\n</tr>\n<tr>\n<td><code>&lt;Sizing calculator recommended <span class=\"nanospell-typo\">bookeeper</span> replica count&gt;</code>**</td>\n<td>If the required number of pulsar replicas exceeds<strong> three</strong>, set the <code><span class=\"nanospell-typo\">bookeeper</span></code> replica count as recommended in the sizing calculator. Otherwise, do not specify this parameter.</td>\n</tr>\n<tr>\n<td><code>&lt;Sizing calculator recommended broker replica count&gt;</code>**</td>\n<td>If the required number of pulsar replicas exceeds<strong> three</strong>, set the <code>broker</code> replica count as recommended in the sizing calculator. Otherwise, do not specify this parameter.</td>\n</tr>\n<tr>\n<td><code>&lt;op deployment <span class=\"nanospell-typo\">yaml</span>&gt;</code></td>\n<td>Full path to the <code>deployment.<span class=\"nanospell-typo\">yaml</span></code> files, located under the <strong>deployment </strong>folder in the <strong>op-chart</strong>. Depending on the size of deployment that you choose according to the sizing calculator, select the corresponding deployment file <code>medium-deployment.<span class=\"nanospell-typo\">yaml</span></code>, <code>low-footprint.<span class=\"nanospell-typo\">yaml</span></code>, and <code>large-deployment.<span class=\"nanospell-typo\">yaml</span></code>.</td>\n</tr>\n</tbody>\n</table>\n<p>* Example for a chain of certificates:</p>\n<p>The <code>intermediate-level-1</code> has signed the <code>server cert</code>, and <code>intermediate-level-2</code> has signed the <code>intermediate-level-1</code>,...,<code>intermediate-level-n</code> has signed the <code>intermediate-level-n-1</code>.server cert.</p>\n<p>Then, combine the certificates into a single <span class=\"nanospell-typo\">PEM</span> file. Start with the server-signed certificate at the top, followed by the intermediate certificates in <span class=\"nanospell-typo\">order—ending</span> with the one closest to the root CA. Do not include the root CA certificate in this file, as it is specified separately. You can save the file with a name such as <code>server-chain.<span class=\"nanospell-typo\">crt</span></code>.</p>\n<pre><code>-----BEGIN CERTIFICATE-----\n&lt;server cert&gt;\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\n&lt;intermediate-level-1&gt;\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\n&lt;intermediate-level-2&gt;\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\n&lt;intermediate-level-n&gt;\n-----END CERTIFICATE-----</code></pre>\n<p>** The sizing calculator provides additional Pulsar replica counts for every 20 MB/sec of expected throughput above 40 MB/sec. Ensure that your inputs in the <span class=\"nanospell-typo\">SizCalc</span> (OPTIC DL Ingest) tab accurately reflect your deployment requirements. Refer to the <span class=\"nanospell-typo\">SizCalc</span> Results sheet to determine the required number of Pulsar Bookkeeper and Broker replicas:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">If the required replica count is 1: Use the low-footprint deployment <span class=\"nanospell-typo\">YAML</span>. Do not manually specify the replica count parameters.</li><li style=\"margin-left: 28px; position: relative;\">If the required replica count is 3: Use the large deployment <span class=\"nanospell-typo\">YAML</span>. Again, do not manually specify the replica count parameters.</li><li style=\"margin-left: 28px; position: relative;\">If the required replica count is 4 or more: You must explicitly set the replica count parameters, using the value recommended by the sizing calculator.</li></ul>\n<h2><a id=\"Deploy_using_different_certificates\" name=\"Deploy_using_different_certificates\" title=\"Deploy using different certificates\"></a>Deploy using different certificates</h2>\n<div>To deploy Operations Platform using different certificates, run the following command on the control plane or bastion node:</div>\n<pre><code>helm install &lt;deployment name&gt; \\\n  -n &lt;operations platform namespace&gt; \\\n  op-chart-&lt;version&gt;.tgz \\\n  -f &lt;op-values.yaml&gt; \\\n  --set-file \"caCertificates.vertica-ca\\.crt\"=&lt;vertica certificate file&gt; \\\n  --set-file \"caCertificates.oracle\\.crt\"=&lt;relational database certificate file&gt; \\\n  --set-file oracleWallet=&lt;base64 encoded wallet text file&gt; \\\n  --set-file \"caCertificates.postgres\\.crt\"=&lt;relational database certificate file&gt; \\\n  --set-file \"caCertificates.ingress\\.crt\"=&lt;ingress certificate file&gt; \\\n  --set-file \"global.tls.cert\"=&lt;ingress server cert&gt; \\\n  --set-file \"global.tls.key\"=&lt;ingress private key file&gt; \\\n  [--set itomdipulsar.bookeeper.replicaCount=&lt;Sizing calculator recommended bookeeper replica count&gt; \\]\n  [--set itomdipulsar.broker.replicaCount=&lt;Sizing calculator recommended broker replica count&gt; \\] \n  -f &lt;op deployment yaml&gt;</code></pre>\n<p><strong>where:</strong></p>\n<table cellpadding=\"1\" cellspacing=\"1\">\n<tbody>\n<tr>\n<td><code>&lt;deployment name&gt;</code></td>\n<td>Use the deployment name you specified while creating the Operations Platform <span class=\"nanospell-typo\">namespace</span> in the <em>Create Operations Platform <span class=\"nanospell-typo\">namespace</span> </em>topic.</td>\n</tr>\n<tr>\n<td><code>&lt;operations platform <span class=\"nanospell-typo\">namespace</span>&gt;</code></td>\n<td>Use the <span class=\"nanospell-typo\">namespace</span> for Operations Platform that you created earlier in the <em>Create Operations Platform <span class=\"nanospell-typo\">namespace</span> </em>topic.</td>\n</tr>\n<tr>\n<td><code>&lt;op-values.<span class=\"nanospell-typo\">yaml</span>&gt;</code></td>\n<td>Full path to your edited Operations Platform values <span class=\"nanospell-typo\">YAML</span> file.</td>\n</tr>\n<tr>\n<td><code>&lt;chart&gt;</code></td>\n<td>The absolute path to the chart package. Example: <code>op-chart-&lt;version&gt;.<span class=\"nanospell-typo\">tgz</span></code>. Chart file is available under <code>charts</code> directory.</td>\n</tr>\n<tr>\n<td><code>&lt;<span class=\"nanospell-typo\">vertica</span> certificate file&gt;</code></td>\n<td>Full path to the <span class=\"nanospell-typo\">Vertica</span> Certificate Authority <span class=\"nanospell-typo\">pem</span>-format file that you used while configuring <span class=\"nanospell-typo\">TLS</span> for <span class=\"nanospell-typo\">Vertica</span> database using <span class=\"nanospell-typo\">dbinit</span>.sh script or by following the <span class=\"nanospell-typo\">Vertica</span> documentation.<br/>\n\t\t\tConfigure the root CA certificate of <span class=\"nanospell-typo\">Vertica</span> server certificate in <code spellcheck=\"false\"><span class=\"nanospell-typo\">vertica</span>-ca.<span class=\"nanospell-typo\">pem</span></code>.</td>\n</tr>\n<tr>\n<td><code>&lt;relational database certificate file&gt;</code></td>\n<td>Full path to the Oracle or <span class=\"nanospell-typo\">PostgreSQL</span> database <span class=\"nanospell-typo\">TLS</span> CA certificate file in <span class=\"nanospell-typo\">PEM</span> format, depending on the relational database you are using.</td>\n</tr>\n<tr>\n<td><code>&lt;ingress certificate file&gt;</code></td>\n<td>Full path to the Ingress CA certificate file in <span class=\"nanospell-typo\">PEM</span> format.</td>\n</tr>\n<tr>\n<td><code>&lt;base64 encoded wallet text file&gt;</code></td>\n<td>Full path to the <code>base64</code> encoded wallet text file, when using external Oracle. This file has the base64 value of the <code>wallet.zip</code> file.</td>\n</tr>\n<tr>\n<td><code>&lt;ingress server cert chain file&gt;</code>*</td>\n<td>\n<div>Full path to the <span class=\"nanospell-typo\">PEM</span> format file containing your custom Ingress server certificate, including intermediate certificates if needed. The Ingress certificate acts as server to browser clients, for example, when users access the Operations Cloud UI.</div>\n</td>\n</tr>\n<tr>\n<td><code>&lt;ingress private key file&gt;</code></td>\n<td>Full path to the file containing the Ingress private key.</td>\n</tr>\n<tr>\n<td><code>&lt;Sizing calculator recommended <span class=\"nanospell-typo\">bookeeper</span> replica count&gt;</code>**</td>\n<td>If the required number of pulsar replicas exceeds<strong> three</strong>, set the <code><span class=\"nanospell-typo\">bookeeper</span></code> replica count as recommended in the sizing calculator. Otherwise, do not specify this parameter.</td>\n</tr>\n<tr>\n<td><code>&lt;Sizing calculator recommended broker replica count&gt;</code>**</td>\n<td>If the required number of pulsar replicas exceeds<strong> three</strong>, set the <code>broker</code> replica count as recommended in the sizing calculator. Otherwise, do not specify this parameter.</td>\n</tr>\n<tr>\n<td><code>&lt;op deployment <span class=\"nanospell-typo\">yaml</span>&gt;</code></td>\n<td>Full path to the <code>deployment.<span class=\"nanospell-typo\">yaml</span></code> files, located under the <strong>deployment </strong>folder in the <strong>op-chart</strong>. Depending on the size of deployment that you choose according to the sizing calculator, select the corresponding deployment file <code>medium-deployment.<span class=\"nanospell-typo\">yaml</span></code>, <code>low-footprint.<span class=\"nanospell-typo\">yaml</span></code>, and <code>large-deployment.<span class=\"nanospell-typo\">yaml</span></code>.</td>\n</tr>\n</tbody>\n</table>\n<p>* Example for a chain of certificates:</p>\n<p>The <code>intermediate-level-1</code> has signed the <code>server cert</code>, and <code>intermediate-level-2</code> has signed the <code>intermediate-level-1</code>,...,<code>intermediate-level-n</code> has signed the <code>intermediate-level-n-1</code>.server cert.</p>\n<p>Then, you must include the certificates in a server cert chain and save it as <code>server-chain.<span class=\"nanospell-typo\">crt</span></code>.</p>\n<pre><code>-----BEGIN CERTIFICATE-----\n&lt;server cert&gt;\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\n&lt;intermediate-level-1&gt;\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\n&lt;intermediate-level-2&gt;\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\n&lt;intermediate-level-n&gt;\n-----END CERTIFICATE-----</code></pre>\n<p>** The sizing calculator provides additional Pulsar replica counts for every 20 MB/sec of expected throughput above 40 MB/sec. Ensure that your inputs in the <span class=\"nanospell-typo\">SizCalc</span> (OPTIC DL Ingest) tab accurately reflect your deployment requirements. Refer to the <span class=\"nanospell-typo\">SizCalc</span> Results sheet to determine the required number of Pulsar Bookkeeper and Broker replicas:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">If the required replica count is 1: Use the low-footprint deployment <span class=\"nanospell-typo\">YAML</span>. Do not manually specify the replica count parameters.</li><li style=\"margin-left: 28px; position: relative;\">If the required replica count is 3: Use the large deployment <span class=\"nanospell-typo\">YAML</span>. Again, do not manually specify the replica count parameters.</li><li style=\"margin-left: 28px; position: relative;\">If the required replica count is 4 or more: You must explicitly set the replica count parameters, using the value recommended by the sizing calculator.</li></ul>\n<h2><a id=\"Deploy_using_self_signed_certificate_for_Ingress\" name=\"Deploy_using_self_signed_certificate_for_Ingress\" title=\"Deploy using self-signed certificate for Ingress\"></a><a id=\"Deploy_using_self_signed_certificate_for_ingress_in_progress_\" name=\"Deploy_using_self_signed_certificate_for_ingress_in_progress_\" title=\"Deploy using self-signed certificate for ingress (in-progress)\"></a><a id=\"Deploy_on_AWS_with_ALB_enabled\" name=\"Deploy_on_AWS_with_ALB_enabled\" title=\"Deploy on AWS with ALB enabled\"></a>Deploy using self-signed certificate for Ingress</h2>\n<div>You can deploy Operations Platform without providing custom certificates for its ingress port. In this case, the installation uses internally generated self-signed certificates. When accessing Operations Platform services, such as the Operations Cloud reporting interface, your browser may display a warning about an insecure connection due to the self-signed certificate. You can still enable <span class=\"nanospell-typo\">TLS</span> for database connections using your own certificates, depending on your setup.</div>\n<div>Run the following command on the control plane or bastion node:</div>\n<div>\n<pre><code>helm install &lt;operations platform deployment name&gt; \\\n  -n &lt;operations platform namespace&gt; \\\n  &lt;path to op-chart tgz&gt; \\\n  -f &lt;op-values yaml&gt; \\\n  [--set-file \"caCertificates.postgres\\.crt\"=&lt;relational database certificate CA file&gt;] \\\n  [--set-file \"caCertificates.oracle\\.crt\"=&lt;relational database certificate CA file&gt;] \\\n  [--set-file oracleWallet=&lt;base64 encoded wallet text file&gt;] \\\n  [--set-file \"caCertificates.vertica-ca\\.crt\"=&lt;vertica certificate CA file&gt;] \\\n  [--set itomdipulsar.bookeeper.replicaCount=&lt;Sizing calculator recommended bookkeeper replica count&gt;] \\\n  [--set itomdipulsar.broker.replicaCount=&lt;Sizing calculator recommended broker replica count&gt;] \\\n  [--set itomdireceiver.direceiver.config.replicaCount=&lt;Sizing calculator recommended receiver replica count&gt;] \\\n  [--set itomdipostload.dipostload.config.taskExecutor.replicaCount=&lt;Sizing calculator recommended task executor replica count&gt;] \\\n  -f &lt;op deployment yaml&gt;\n</code></pre>\n<div>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-important-icon\"></div><div class=\"admonition-content admonition-important-content\"><div>Do not introduce any spaces between the equal sign (=) and the value when specifying the values in the command.</div></div></div>\n<p><strong>where:</strong></p>\n<table cellpadding=\"1\" cellspacing=\"1\">\n<tbody>\n<tr>\n<td><code>&lt;deployment name&gt;</code></td>\n<td>Use the deployment name you specified while creating the Operations Platform <span class=\"nanospell-typo\">namespace</span> in the <em>Create Operations Platform <span class=\"nanospell-typo\">namespace</span> </em>topic.</td>\n</tr>\n<tr>\n<td><code>&lt;operations platform <span class=\"nanospell-typo\">namespace</span>&gt;</code></td>\n<td>Use the <span class=\"nanospell-typo\">namespace</span> for Operations Platform that you created earlier in the <em>Create Operations Platform <span class=\"nanospell-typo\">namespace</span> </em>topic.</td>\n</tr>\n<tr>\n<td><code>&lt;op-values.<span class=\"nanospell-typo\">yaml</span>&gt;</code></td>\n<td>Full path to your edited Operations Platform values <span class=\"nanospell-typo\">YAML</span> file.</td>\n</tr>\n<tr>\n<td><code>&lt;chart&gt;</code></td>\n<td>The absolute path to the chart package. Example: <code>op-chart-&lt;version&gt;.<span class=\"nanospell-typo\">tgz</span></code>. Chart file is available under <code>charts</code> directory.</td>\n</tr>\n<tr>\n<td><code>&lt;<span class=\"nanospell-typo\">vertica</span> certificate file&gt;</code></td>\n<td>\n<div>\n<div>If you do not specify a certificate, the <span class=\"nanospell-typo\">Vertica</span> database connection proceeds without <span class=\"nanospell-typo\">TLS</span>. In this case, ensure that the <code>op-values.<span class=\"nanospell-typo\">yaml</span></code> file has the <code><span class=\"nanospell-typo\">vertica</span>:<span class=\"nanospell-typo\">tlsEnabled</span>:</code> setting as <strong>false</strong>, <code><span class=\"nanospell-typo\">vertica</span>:<span class=\"nanospell-typo\">tlsEnabled</span>: false</code>. </div>\n<div>If you choose to enable <span class=\"nanospell-typo\">TLS</span> for <span class=\"nanospell-typo\">Vertica</span>, you must provide the full path to the appropriate CA (Certificate Authority) certificate file in <span class=\"nanospell-typo\">PEM</span> format that you used while configuring <span class=\"nanospell-typo\">TLS</span> for <span class=\"nanospell-typo\">Vertica</span> using <code><span class=\"nanospell-typo\">dbinit</span>.sh</code> script or by following the <span class=\"nanospell-typo\">Vertica</span> documentation.</div>\n</div>\n</td>\n</tr>\n<tr>\n<td><code>&lt;relational database certificate file&gt;</code></td>\n<td>\n<div>\n<div>If you do not specify a certificate, the relational database connection proceeds without <span class=\"nanospell-typo\">TLS</span>. In this case, ensure that the <code>op-values.<span class=\"nanospell-typo\">yaml</span></code> file has the <code><span class=\"nanospell-typo\">tlsEnabled</span>:</code> setting as <strong>false</strong>, <code>database:<span class=\"nanospell-typo\">tlsEnabled</span>: false</code>. </div>\n<div>If you choose to enable <span class=\"nanospell-typo\">TLS</span> for the relational database connection, you must provide the full path to the appropriate CA (Certificate Authority) certificate file in <span class=\"nanospell-typo\">PEM</span> format, depending on the database type:</div>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">For <span class=\"nanospell-typo\">PostgreSQL</span>, this should match the value of <code><span class=\"nanospell-typo\">ssl</span>_ca_file</code> in your <code><span class=\"nanospell-typo\">postgresql</span>.conf</code>.</li><li style=\"margin-left: 28px; position: relative;\">For Oracle, use the <span class=\"nanospell-typo\">TLS</span> CA certificate you configured during setup.</li></ul>\n</div>\n</td>\n</tr>\n<tr>\n<td><code>&lt;ingress certificate file&gt;</code></td>\n<td>Full path to the Ingress CA certificate file in <span class=\"nanospell-typo\">PEM</span> format.</td>\n</tr>\n<tr>\n<td><code>&lt;base64 encoded wallet text file&gt;</code></td>\n<td>Full path to the <code>base64</code> encoded wallet text file, when using external Oracle. This file has the base64 value of the <code>wallet.zip</code> file.</td>\n</tr>\n<tr>\n<td><code>&lt;ingress server cert chain file&gt;</code>*</td>\n<td>\n<div>Full path to the <span class=\"nanospell-typo\">PEM</span> format file containing your custom Ingress server certificate, including intermediate certificates if needed. The Ingress certificate acts as server to browser clients, for example, when users access the Operations Cloud UI.</div>\n</td>\n</tr>\n<tr>\n<td><code>&lt;ingress private key file&gt;</code></td>\n<td>Full path to the file containing the Ingress private key.</td>\n</tr>\n<tr>\n<td><code>&lt;Sizing calculator recommended <span class=\"nanospell-typo\">bookeeper</span> replica count&gt;</code>**</td>\n<td>If the required number of pulsar replicas exceeds<strong> three</strong>, set the <code><span class=\"nanospell-typo\">bookeeper</span></code> replica count as recommended in the sizing calculator. Otherwise, do not specify this parameter.</td>\n</tr>\n<tr>\n<td><code>&lt;Sizing calculator recommended broker replica count&gt;</code>**</td>\n<td>If the required number of pulsar replicas exceeds<strong> three</strong>, set the <code>broker</code> replica count as recommended in the sizing calculator. Otherwise, do not specify this parameter.</td>\n</tr>\n<tr>\n<td>\n<p><code>&lt;Sizing calculator recommended receiver replica count&gt;</code></p>\n</td>\n<td>If the <span class=\"nanospell-typo\">SizCalc</span> (Results) tab required number of receiver replicas exceeds <strong>two</strong>, set the receiver replica count to the value recommended by the sizing calculator. Otherwise, do not specify this parameter.</td>\n</tr>\n<tr>\n<td><code>&lt;Sizing calculator recommended task executor replica count&gt;</code></td>\n<td>If the <span class=\"nanospell-typo\">SizCalc</span> (Results) tab required number of task executor replicas exceeds <strong>two</strong>, set the task executor replica count to the value recommended by the sizing calculator. Otherwise, do not specify this parameter.</td>\n</tr>\n<tr>\n<td><code>&lt;op deployment <span class=\"nanospell-typo\">yaml</span>&gt;</code></td>\n<td>Full path to the <code>deployment.<span class=\"nanospell-typo\">yaml</span></code> files, located under the <strong>deployment </strong>folder in the <strong>op-chart</strong>. Depending on the size of deployment that you choose according to the sizing calculator, select the corresponding deployment file <code>medium-deployment.<span class=\"nanospell-typo\">yaml</span></code>, <code>low-footprint.<span class=\"nanospell-typo\">yaml</span></code>, and <code>large-deployment.<span class=\"nanospell-typo\">yaml</span></code>.</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<h3><a id=\"Examples_\" name=\"Examples_\" title=\"Examples:\"></a>Examples:</h3>\n<div>\n<table cellpadding=\"1\" cellspacing=\"1\">\n<tbody>\n<tr>\n<td>\n<p>Deploy with <span class=\"nanospell-typo\">TLS</span> for <span class=\"nanospell-typo\">Postgres</span> and <span class=\"nanospell-typo\">Vertica</span> and self-signed Ingress certificates in a single-worker node low-footprint deployment</p>\n</td>\n<td>helm install opdeployment01 \\<br/>\n\t\t\t  -n opnamespace01 \\<br/>\n\t\t\t  ./op-chart/charts/op-chart-&lt;version&gt;.<span class=\"nanospell-typo\">tgz</span> \\<br/>\n\t\t\t  -f ./op-values.<span class=\"nanospell-typo\">yaml</span> \\<br/>\n\t\t\t  --set-file \"<span class=\"nanospell-typo\">caCertificates</span>.<span class=\"nanospell-typo\">vertica</span>-ca\\.<span class=\"nanospell-typo\">crt</span>\"=/<span class=\"nanospell-typo\">var</span>/<span class=\"nanospell-typo\">tmp</span>/<span class=\"nanospell-typo\">verticarootca</span>.<span class=\"nanospell-typo\">pem</span> \\<br/>\n\t\t\t  --set-file \"<span class=\"nanospell-typo\">caCertificates</span>.postgres\\.<span class=\"nanospell-typo\">crt</span>\"=/<span class=\"nanospell-typo\">var</span>/<span class=\"nanospell-typo\">tmp</span>/<span class=\"nanospell-typo\">postgresrootca</span>.<span class=\"nanospell-typo\">pem</span> \\<br/>\n\t\t\t  -f ./op-chart/deployment/low-footprint.<span class=\"nanospell-typo\">yaml</span></td>\n</tr>\n<tr>\n<td>Deploy with no <span class=\"nanospell-typo\">TLS</span> for <span class=\"nanospell-typo\">Postgres</span> or <span class=\"nanospell-typo\">Vertica</span>, self-signed Ingress certificates, in a large deployment that needs additional pod replicas according to your Sizing calculator requirements</td>\n<td>helm install opdeployment01 \\<br/>\n\t\t\t  -n opnamespace01 \\<br/>\n\t\t\t  ./op-chart/charts/op-chart-&lt;version&gt;.<span class=\"nanospell-typo\">tgz</span> \\<br/>\n\t\t\t  -f ./op-values.<span class=\"nanospell-typo\">yaml</span> \\<br/>\n\t\t\t  --set <span class=\"nanospell-typo\">itomdipulsar</span>.<span class=\"nanospell-typo\">bookeeper</span>.<span class=\"nanospell-typo\">replicaCount</span>=5 \\<br/>\n\t\t\t  --set <span class=\"nanospell-typo\">itomdipulsar</span>.broker.<span class=\"nanospell-typo\">replicaCount</span>=5 \\<br/>\n\t\t\t  --set <span class=\"nanospell-typo\">itomdireceiver</span>.<span class=\"nanospell-typo\">direceiver</span>.<span class=\"nanospell-typo\">config</span>.<span class=\"nanospell-typo\">replicaCount</span>=3 \\<br/>\n\t\t\t  --set <span class=\"nanospell-typo\">itomdipostload</span>.<span class=\"nanospell-typo\">dipostload</span>.<span class=\"nanospell-typo\">config</span>.<span class=\"nanospell-typo\">taskExecutor</span>.<span class=\"nanospell-typo\">replicaCount</span>=6 \\<br/>\n\t\t\t  -f ./op-chart/deployment/large-deployment.<span class=\"nanospell-typo\">yaml</span></td>\n</tr>\n</tbody>\n</table>\n</div>\n<h2>Deploy on <span class=\"nanospell-typo\">AWS</span> with ALB enabled</h2>\n<div><br/>\nTo deploy Operations Platform with ALB, run the following command on the control plane or installer node, or bastion node with other default parameters as required:</div>\n<pre><code>helm install &lt;helm deployment name&gt; \\\n  -n &lt;operations platform namespace&gt; \\\n  -f &lt;values.yaml&gt; \\\n  &lt;chart&gt; \\\n  --set \"itom-ingress-controller.nginx.ingress.certificateArn\"=&lt;certificate_arn&gt; \\\n  --set \"itom-ingress-controller.nginx.ingress.enabled\"=true \\\n  --set \"itom-ingress-controller.nginx.service.external.enable\"=true \\\n  --set \"itom-ingress-controller.nginx.service.internal.enable\"=false \\\n  --set \"itom-ingress-controller.nginx.service.httpsPort\"=30143 \\\n  --set \"global.cluster.name\"=&lt;unique_alb_name&gt; \\\n  --set \"global.expose.ipConfig.ipFamilyPolicy\"=SingleStack \\\n  --set-file \"caCertificates.vertica-ca\\.crt\"=&lt;vertica certificate file&gt; \\\n  --set-file \"caCertificates.oracle\\.crt\"=&lt;relational database certificate file&gt; \\\n  --set-file oracleWallet=&lt;base64 encoded wallet text file&gt; \\\n  --set-file \"caCertificates.postgres\\.crt\"=&lt;relational database certificate file&gt; \\\n  --set-file \"caCertificates.ingress\\.crt\"=&lt;ingress certificate file&gt; \\\n  --set \"global.setFqdnInIngress\"=false \\\n  --set-file \"global.tls.cert\"=&lt;ingress server cert&gt; \\\n  --set-file \"global.tls.key\"=&lt;ingress private key&gt; \\\n  [--set itomdipulsar.bookeeper.replicaCount=&lt;Sizing calculator recommended bookeeper replica count&gt; \\]\n  [--set itomdipulsar.broker.replicaCount=&lt;Sizing calculator recommended broker replica count&gt; \\] \n  -f &lt;op deployment yaml&gt;</code></pre>\n<p><strong>where:</strong></p>\n<table cellpadding=\"1\" cellspacing=\"1\">\n<tbody>\n<tr>\n<td><code>&lt;helm deployment name&gt;</code></td>\n<td>Use the deployment name you specified while creating the Operations Platform <span class=\"nanospell-typo\">namespace</span> in the <em>Create Operations Platform <span class=\"nanospell-typo\">namespace</span> </em>topic.</td>\n</tr>\n<tr>\n<td><code>&lt;operations platform <span class=\"nanospell-typo\">namespace</span>&gt;</code></td>\n<td>Use the <span class=\"nanospell-typo\">namespace</span> for Operations Platform that you created earlier in the <em>Create Operations Platform <span class=\"nanospell-typo\">namespace</span> </em>topic.</td>\n</tr>\n<tr>\n<td><code>&lt;op-values.<span class=\"nanospell-typo\">yaml</span>&gt;</code></td>\n<td>Full path to your edited Operations Platform values <span class=\"nanospell-typo\">YAML</span> file.</td>\n</tr>\n<tr>\n<td><code>&lt;chart&gt;</code></td>\n<td>The absolute path to the chart package. Example: <code>op-chart-&lt;version&gt;.<span class=\"nanospell-typo\">tgz</span></code>. Chart file is available under <code>charts</code> directory.</td>\n</tr>\n<tr>\n<td><code>&lt;<span class=\"nanospell-typo\">vertica</span> certificate file&gt;</code></td>\n<td>Full path to the <span class=\"nanospell-typo\">Vertica</span> Certificate Authority <span class=\"nanospell-typo\">pem</span>-format file that you used while configuring <span class=\"nanospell-typo\">TLS</span> for <span class=\"nanospell-typo\">Vertica</span> database using <span class=\"nanospell-typo\">dbinit</span>.sh script or by following the <span class=\"nanospell-typo\">Vertica</span> documentation.<br/>\n\t\t\tConfigure the root CA certificate of <span class=\"nanospell-typo\">Vertica</span> server certificate in <code spellcheck=\"false\"><span class=\"nanospell-typo\">vertica</span>-ca.<span class=\"nanospell-typo\">pem</span></code>.</td>\n</tr>\n<tr>\n<td><code>&lt;relational database certificate file&gt;</code></td>\n<td>Full path to the Oracle or <span class=\"nanospell-typo\">PostgreSQL</span> database <span class=\"nanospell-typo\">TLS</span> CA certificate file in <span class=\"nanospell-typo\">PEM</span> format, depending on the relational database you are using.</td>\n</tr>\n<tr>\n<td><code>&lt;ingress certificate file&gt;</code></td>\n<td>\n<div>\n<div>\n<div>\n<div>For <span class=\"nanospell-typo\">AWS</span>, instead of Ingress, the load <span class=\"nanospell-typo\">balancer</span> CA certificate acts as a server to the browser clients. Therefore, you should provide the load <span class=\"nanospell-typo\">balancer</span> CA certificate here.</div>\n</div>\n</div>\n</div>\n<div>Full path to the load <span class=\"nanospell-typo\">balancer</span> CA certificate file in <span class=\"nanospell-typo\">PEM</span> format.</div>\n</td>\n</tr>\n<tr>\n<td><code>&lt;certificate_<span class=\"nanospell-typo\">arn</span>&gt;</code></td>\n<td>Public <span class=\"nanospell-typo\">ACM</span> certificate issued by <span class=\"nanospell-typo\">AWS</span> Management for your domain.</td>\n</tr>\n<tr>\n<td><code>&lt;unique_alb_name&gt;</code></td>\n<td>A unique name is required for creating the ALB.</td>\n</tr>\n<tr>\n<td><code>&lt;ingress server cert chain file&gt;</code>*</td>\n<td>Full path to the <span class=\"nanospell-typo\">PEM</span> format file containing your custom Ingress server certificate, including intermediate certificates if needed. The Ingress certificate acts as server to browser clients, for example, when users access the Operations Cloud UI.</td>\n</tr>\n<tr>\n<td><code>&lt;ingress private key file&gt;</code></td>\n<td>Full path to the file containing the Ingress private key.</td>\n</tr>\n<tr>\n<td><code>&lt;Sizing calculator recommended <span class=\"nanospell-typo\">bookeeper</span> replica count&gt;</code>**</td>\n<td>If the required number of pulsar replicas exceeds<strong> three</strong>, set the <code><span class=\"nanospell-typo\">bookeeper</span></code> replica count as recommended in the sizing calculator. Otherwise, do not specify this parameter.</td>\n</tr>\n<tr>\n<td><code>&lt;Sizing calculator recommended broker replica count&gt;</code>**</td>\n<td>If the required number of pulsar replicas exceeds<strong> three</strong>, set the <code>broker</code> replica count as recommended in the sizing calculator. Otherwise, do not specify this parameter.</td>\n</tr>\n<tr>\n<td><code>&lt;op deployment <span class=\"nanospell-typo\">yaml</span>&gt;</code></td>\n<td>Full path to the <code>deployment.<span class=\"nanospell-typo\">yaml</span></code> files, located under the <strong>deployment </strong>folder in the <strong>op-chart</strong>. Depending on the size of deployment that you choose according to the sizing calculator, select the corresponding deployment file <code>medium-deployment.<span class=\"nanospell-typo\">yaml</span></code>, <code>low-footprint.<span class=\"nanospell-typo\">yaml</span></code>, and <code>large-deployment.<span class=\"nanospell-typo\">yaml</span></code>.</td>\n</tr>\n</tbody>\n</table>\n<p>* Example for a chain of certificates:</p>\n<p>The <code>intermediate-level-1</code> has signed the <code>server cert</code>, and <code>intermediate-level-2</code> has signed the <code>intermediate-level-1</code>,...,<code>intermediate-level-n</code> has signed the <code>intermediate-level-n-1</code>.server cert.</p>\n<p>Then, you must include the certificates in a server cert chain and save it as <code>server-chain.<span class=\"nanospell-typo\">crt</span></code>.</p>\n<pre><code>-----BEGIN CERTIFICATE-----\n&lt;server cert&gt;\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\n&lt;intermediate-level-1&gt;\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\n&lt;intermediate-level-2&gt;\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\n&lt;intermediate-level-n&gt;\n-----END CERTIFICATE-----</code></pre>\n<p>** The sizing calculator provides additional Pulsar replica counts for every 20 MB/sec of expected throughput above 40 MB/sec. Ensure that your inputs in the <span class=\"nanospell-typo\">SizCalc</span> (OPTIC DL Ingest) tab accurately reflect your deployment requirements. Refer to the <span class=\"nanospell-typo\">SizCalc</span> Results sheet to determine the required number of Pulsar Bookkeeper and Broker replicas:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">If the required replica count is 1: Use the low-footprint deployment <span class=\"nanospell-typo\">YAML</span>. Do not manually specify the replica count parameters.</li><li style=\"margin-left: 28px; position: relative;\">If the required replica count is 3: Use the large deployment <span class=\"nanospell-typo\">YAML</span>. Again, do not manually specify the replica count parameters.</li><li style=\"margin-left: 28px; position: relative;\">If the required replica count is 4 or more: You must explicitly set the replica count parameters, using the value recommended by the sizing calculator.</li></ul>\n</div>",
  "modifiedon": "2026-01-30 13:52:30"
}