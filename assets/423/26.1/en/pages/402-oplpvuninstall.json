{
  "title": "Uninstall local storage provisioner",
  "content": "<div class=\"mw-parser-output\"><p>As part of the uninstall process, you must uninstall the local storage provisioner and clear the OPTIC DL Message Bus residual files on all cluster nodes where the application namespace is deployed.</p>\n<p>To uninstall local storage provisioner:</p>\n<ol>\n<li>Run the following command to uninstall the local storage provisioner:<br/>\n<code>helm uninstall &lt;helm_deployment_name&gt; -n core </code><br/>\n\twhere:<br/>\n<code>&lt;helm_deployment_name&gt;</code> is the name with which you have deployed the local storage provisioner.<br/>\n\tExample:\n\t<pre><code>helm uninstall lpv -n core</code></pre>\n</li>\n<li>Run the following commands to delete the local storage provisioner PVCs:<br/>\n<code>kubectl get pvc -n &lt;application namespace&gt; | grep fast-disks </code><br/>\n<code>kubectl delete pvc &lt;pvc name of the local storage provisioner&gt; -n &lt;namespace&gt;</code><br/>\n<code>Example:</code>\n<pre><code># kubectl get pvc -n op| grep fast-disk\n\nitomdipulsar-bookkeeper-journal-itomdipulsar-bookkeeper-0        Bound    local-pv-1bb7a569       97Gi       RWO      fast-disks     &lt;unset&gt;      20h\nitomdipulsar-bookkeeper-journal-itomdipulsar-bookkeeper-1        Bound    local-pv-bc38d41a       97Gi       RWO      fast-disks     &lt;unset&gt;      20h\nitomdipulsar-bookkeeper-journal-itomdipulsar-bookkeeper-2        Bound    local-pv-8b574552       97Gi       RWO      fast-disks     &lt;unset&gt;      20h\nitomdipulsar-bookkeeper-ledgers-itomdipulsar-bookkeeper-0        Bound    local-pv-f43d600f       97Gi       RWO      fast-disks     &lt;unset&gt;      20h\nitomdipulsar-bookkeeper-ledgers-itomdipulsar-bookkeeper-1        Bound    local-pv-1d258401       97Gi       RWO      fast-disks     &lt;unset&gt;      20h\nitomdipulsar-bookkeeper-ledgers-itomdipulsar-bookkeeper-2        Bound    local-pv-1d7c2f09       97Gi       RWO      fast-disks     &lt;unset&gt;      20h\nitomdipulsar-zookeeper-zookeeper-data-itomdipulsar-zookeeper-0   Bound    local-pv-ce021750       97Gi       RWO      fast-disks     &lt;unset&gt;      20h\nitomdipulsar-zookeeper-zookeeper-data-itomdipulsar-zookeeper-1   Bound    local-pv-9b21fdb3       97Gi       RWO      fast-disks     &lt;unset&gt;      20h\nitomdipulsar-zookeeper-zookeeper-data-itomdipulsar-zookeeper-2   Bound    local-pv-80b73c9a       97Gi       RWO      fast-disks     &lt;unset&gt;      20h\n\n\n# kubectl delete pvc itomdipulsar-bookkeeper-journal-itomdipulsar-bookkeeper-0 -n op                           \n# kubectl delete pvc itomdipulsar-bookkeeper-journal-itomdipulsar-bookkeeper-1 -n op        \n# kubectl delete pvc itomdipulsar-bookkeeper-journal-itomdipulsar-bookkeeper-2 -n op        \n# kubectl delete pvc itomdipulsar-bookkeeper-ledgers-itomdipulsar-bookkeeper-0 -n op        \n# kubectl delete pvc itomdipulsar-bookkeeper-ledgers-itomdipulsar-bookkeeper-1 -n op      \n# kubectl delete pvc itomdipulsar-bookkeeper-ledgers-itomdipulsar-bookkeeper-2 -n op       \n# kubectl delete pvc itomdipulsar-zookeeper-zookeeper-data-itomdipulsar-zookeeper-0 -n op\n# kubectl delete pvc itomdipulsar-zookeeper-zookeeper-data-itomdipulsar-zookeeper-1 -n op   \n# kubectl delete pvc itomdipulsar-zookeeper-zookeeper-data-itomdipulsar-zookeeper-2 -n op \n</code></pre>\n</li>\n<li>Run the following commands to delete the local storage provisioner PV:<br/>\n<code>kubectl get pv | grep fast-disks</code> <br/>\n<code>kubectl delete pv &lt;pv name of the local storage provisioner&gt;</code><br/>\n<code>Example:</code>\n<pre><code># kubectl get pv | grep fast-disks\n\n#kubectl delete pv local-pv-5b1599ea  local-pv-6b090b1b  local-pv-8199a5b1 local-pv-a019bb9c  local-pv-a306c635 local-pv-c61e642  local-pv-e644ca  local-pv-f03deeb  local-pv-faf9cc75 </code></pre>\n</li>\n<li>Go to the location where the local storage volumes are mounted (the default location is <code>/mnt/disks</code>). Go to each virtual disk, unmount the directories (mount path), and then delete the <code>lpv</code> directory. Perform this on all the worker nodes.<br/>\n<strong>Example:</strong>\n<pre><code>cd /mnt/disks\nfor lpv in lpv1 lpv2 lpv3 \ndo\n    rm -rf /mnt/disks/$lpv/*\ndone\n</code></pre>\n</li>\n</ol>\n</div>",
  "modifiedon": "2026-01-30 13:56:46"
}