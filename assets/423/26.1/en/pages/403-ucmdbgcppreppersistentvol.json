{
  "title": "Prepare persistent volumes for UD/UCMDB",
  "content": "<div class=\"mw-parser-output\"><br/><br/><p>UD/UCMDB installation in Helm mode requires the following Persistent Volumes (PVs). PVs are relevant to Google Cloud Filestore volumes. </p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Component</th>\n<th scope=\"col\">Google Cloud Filestore volumes name</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Example directory path</th>\n</tr>\n<tr>\n<td>UD/UCMDB</td>\n<td><code>ucmdb-data-volume</code></td>\n<td>Stores data that's generated by UD/UCMDB.</td>\n<td><code>/var/vols/itom/ucmdb/data_volume</code></td>\n</tr>\n<tr>\n<td>UD/UCMDB</td>\n<td><code>ucmdb-config-volume</code></td>\n<td>Stores UD/UCMDB configuration files.</td>\n<td><code>/var/vols/itom/ucmdb/conf_volume</code></td>\n</tr>\n<tr>\n<td>UD/UCMDB</td>\n<td><code>ucmdb-log-volume</code></td>\n<td>Stores logs generated by UD/UCMDB.</td>\n<td><code>/var/vols/itom/ucmdb/log_volume</code></td>\n</tr>\n</thead>\n</table>\n<p>If you already have the PVs available for use, you need to ensure that the <strong>storageClassName </strong>attribute of the PVs is the same as the storage class name in the <code>my-values.yaml</code> file. In the later step, you will need to specify the name of the PV to be bound with one of the persistent volume claims (PVCs).</p>\n<p>If you want to create the required PVs from scratch, perform the following tasks:</p>\n<ol>\n<li>\n<p>Log in to the bastion node and navigate to the chart package directory. For example:</p>\n<pre>cd UCMDB_Helm_Chart-2x.x/ucmdb-helm-charts/samples/</pre>\n</li>\n<li>\n<p>Open the <code>ucmdb-pv.yaml</code> file in a text editor, configure the following parameters, and then save the file.<span id=\"cke_bm_14014C\" style=\"display: none;\"> </span></p>\n<ul>\n<li><code>&lt;<em>FQDN_Of_The_NFS_Server&gt;</em></code>: The IP address of the Filestore used by UD/UCMDB.</li>\n<li><code>&lt;<em>NFS_directory path&gt;</em></code>: The directory paths for the Filestore volumes required by UD/UCMDB that you provided in <strong>configureFilestore.sh </strong>when creating the Filestore volumes for UD/UCMDB. For example, if the <code>&lt;<em>fileshare_name</em>&gt;</code> is <code>uducmdb</code> and the path is <code>/var/vols/itom/ucmdb/ucmdb_config_vol</code>, the value in the <code>ucmdb-pv.yaml</code> file should be <code>/uducmdb/var/vols/itom/ucmdb/ucmdb_config_vol</code>. See <a href=\"/doc/423/26.1/403-ucmdbgcpfilestore\" title=\"Subscribe Cloud Filestore\">Subscribe Cloud Filestore</a>.</li>\n<li><code>storageClassName</code>: The storage class name of the PV for UD/UCMDB. For example, <code>standard-rwo</code>. You can use the \"<code>kubectl get sc\"</code> command to see the storage class name.\n\t\t<p>You must add a value for the <strong>storageClassName </strong>parameter, otherwise, the UD/UCMDB installation will fail. </p>\n</li>\n</ul>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">Make sure that the directory path corresponds to the persistent volume name. For example:\n\t<pre>apiVersion: v1\nkind: PersistentVolume\nmetadata:\n  name: ucmdb-config-volume\nspec:\n  accessModes:\n  - ReadWriteMany\n  capacity:\n    storage: 5Gi\n  nfs:\n    path: /var/vols/itom/ucmdb/conf_volume\n    server: nfs-server.google.com\n  persistentVolumeReclaimPolicy: Retain\n  volumeMode: Filesystem\n  # storageClassName should match with configVolumeStorageClassName in values.yaml\n  storageClassName: \"<code>standard-rwo</code>\"</pre>\n</div>\n</div>\n</li>\n<li>\n<p>Run the following command to create persistent volumes:</p>\n<pre>kubectl create -f UCMDB_Helm_Chart-2x.x/ucmdb-helm-charts/samples/ucmdb-pv.yaml</pre>\n</li>\n<li>\n<p>Run the following command to verify the volume creation:</p>\n<pre>kubectl get pv | grep ucmdb</pre>\n</li>\n</ol>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}