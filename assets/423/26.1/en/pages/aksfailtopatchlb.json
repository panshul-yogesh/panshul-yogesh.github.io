{
  "title": "Fail to configure a load balancer (AKS)",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>When you run the <code>patch</code> command to patch a service from nodeport to loadbalaner type, the load balancer status is always Pending. You can use <code>kubectl describe service XXX</code> to check details. Then you will see the following error message:</p>\n<pre>{\"error\":{\"code\":\"AuthorizationFailed\",\"message\":\"The client '3XXX-XXX-XXX-XXX-XXX1' with object id '<strong>3XXX-XXX-XXX-XXX-XXX1</strong>' does not have authorization to perform action \n'Microsoft.Network/virtualNetworks/subnets/read' over scope '/subscriptions/6XXX-XXX-XXX-XXX-XXX9/resourceGroups/fredhtestgroup/providers/Microsoft.Network/virtualNetworks/fredTest-vnet/subnets/akssubnet' or the scope is invalid. \nIf access was recently granted, please refresh your credentials.\"}} </pre>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">Â  You will need the <strong>object id </strong>from the error message to resolve this issue.</div>\n</div>\n<h2 class=\"mw-headline\" id=\"Cause\">Cause</h2>\n<p>The issue occurs because you don't have enough permission to update the Network Interface. You may need to assign the Network Contributor role to your servicePrincipal.</p>\n<h2 class=\"mw-headline\" id=\"Solution\">Solution</h2>\n<ol>\n<li>Run the following command to assign the required role to your subnet:\n\t<pre>az role assignment create --assignee &lt;object_id&gt; --role \"Network Contributor\" --scope &lt;subnet_id&gt;</pre>\n<p>Where:</p>\n<ul>\n<li>&lt;object_id&gt; is the ID that you obtained in the error message.</li>\n<li>&lt;subnet_id&gt; is the AKS subnet ID. For example, '/subscriptions/xxx/resourceGroups/xxx/providers/Microsoft.Network/virtualNetworks/xxx/subnets/xxx'.</li>\n</ul>\n</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}