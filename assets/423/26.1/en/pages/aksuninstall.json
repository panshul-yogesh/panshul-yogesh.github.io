{
  "title": "Uninstall the suite on Azure",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>Follow the instructions below if you need to uninstall the suite on AKS.  </p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-tip-icon\"></div>\n<div class=\"admonition-content admonition-tip-content\">If you have OMT installed, see<a href=\"/doc/406/25.4/uninstallext\" title=\" Uninstall OMT (external K8s)\"> Uninstall OMT (external K8s)</a> for instructions on how to uninstall OMT.</div>\n</div>\n<h2 id=\"Uninstall_Kubernetes_configurations\">Uninstall Kubernetes configurations</h2>\n<p>For details, see <a href=\"/doc/423/26.1/uninstallk8sdb#Uninstall_Kubernetes_configurations\" title=\"Uninstall Kubernetes configurations\">Uninstall Kubernetes configurations</a>. </p>\n<h2>Clean up the suite NFS volumes</h2>\n<p><strong>Note</strong>: Before you proceed, make sure that the NFS volumes are mounted to the bastion node. </p>\n<h3>(For static storage only) Create cleanSMANFS.sh</h3>\n<p>If you use static storage, copy and save the following script as <b>cleanSMANFS.sh</b> on the bastion node:</p>\n<pre>#!/bin/bash\nshopt -s extglob\n# Edit as needed\nMOUNT_POINT=\"/mnt/nfs\"\nNFS_PARENT=\"$1/var/vols/itom/itsma\"\nrm -rf ${MOUNT_POINT}/${NFS_PARENT}/*/* \nls -l ${MOUNT_POINT}/${NFS_PARENT}/*/\n</pre>\n<h3>Clean up the suite data</h3>\n<p>Choose one of the following options to clean up the suite data according to your storage service.</p>\n<h4>If using<strong> Azure Files</strong></h4>\n<p>Clean up the storage volumes according to whether you're using static or dynamic storage volumes. </p>\n<p><strong>To clean up static volumes</strong></p>\n<p>Run the following commands:</p>\n<pre>chmod 755 cleanSMANFS.sh\nsudo ./cleanSMANFS.sh &lt;generic_file_share_name&gt;<smarta_file_share_name>\n</smarta_file_share_name></pre>\n<p>In these commands, <code>&lt;generic_file_share_name&gt;</code> is the name of the Azure file shares for storing the <b>generic</b> data. You can find it by navigating to the <strong>Azure portal</strong> &gt; <b>Storage accounts</b> &gt;<strong> your storage account</strong> &gt; <b>File shares</b> &gt; your Azure file share name.</p>\n<p><strong>To clean up dynamic volumes</strong></p>\n<p>Manually delete the Azure File shares:</p>\n<ol>\n<li>Log in to <strong>Azure portal</strong> &gt; <strong>Storage accounts</strong>.</li>\n<li>Locate the storage you created for ESM.</li>\n<li>Delete the Azure File shares with the <strong>esm-</strong><strong>pvc-xxx-xx-xxx-xxxx</strong> format.</li>\n</ol>\n<h4>If using Azure Disks</h4>\n<p>To clean up dynamic volumes for Azure Disks, manually delete the Azure Disks:</p>\n<ol>\n<li>Log in to the <strong>Azure portal</strong> &gt; <strong>Disks</strong>.<strong> </strong></li>\n<li>Search for all disks under your cluster's resource group name (<code>MC_&lt;resource_group&gt;_&lt;aks_cluster_name&gt;_&lt;location&gt;</code>).</li>\n<li>Delete Azure disks with the <strong>pvc-xxx-xx-xxx-xxxx</strong> format.</li>\n</ol>\n<h4>If using Azure NetApp Files</h4>\n<p>Clean up the storage volumes according to whether you're using static or dynamic storage volumes. </p>\n<p><strong>To clean up static volumes</strong></p>\n<p>Run the following commands: </p>\n<pre>chmod 755 cleanSMANFS.sh\nsudo ./cleanSMANFS.sh  &lt;smarta_volume_name&gt;\nsudo ./cleanSMANFS.sh  &lt;generic_volume_name&gt;\n</pre>\n<p>In these commands, you can find your <code>&lt;smarta_volume_name&gt;</code> and <code>&lt;generic_volume_name&gt;</code> by navigating to the Azure portal &gt; <b>Azure NetApp Files</b> &gt; The NetApp Files instance you created &gt; <b>Volumes</b>.</p>\n<ul>\n<li><code>&lt;smarta_volume_name&gt;</code> is the name of the Azure NetApp file volume for storing the <b>Smart Analytics</b> data.</li>\n<li><code>&lt;generic_volume_name&gt;</code> is the name of the Azure NetApp file volume for storing the <b>generic</b> data.</li>\n</ul>\n<p><strong>To clean up dynamic volumes</strong></p>\n<p>All Kubernetes volumes are stored in separate NetApp Volumes.</p>\n<ol>\n<li>On the Azure portal, navigate to <strong>Azure NetApp Files</strong> &gt; <em>your_NetApp_account</em> &gt; <strong>Capacity Pools </strong>&gt; <em>your_pool</em> &gt; <strong>Volumes</strong>.</li>\n<li>Select the volumes you wish to clean up. </li>\n<li>Delete the volumes.</li>\n</ol>\n<h2>Clean up the suite databases</h2>\n<p>For details, see <a href=\"/doc/423/26.1/uninstallk8sdb#Clean_up_the_suite_databases\" title=\"Clean up the suite databases\">Clean up the suite databases</a>.</p>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}