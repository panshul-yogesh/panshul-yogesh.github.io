{
  "title": "Change FQDN for Audit in an embedded Kubernetes environment",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>This topic describes how you can change the external access host FQDN of the Audit service in a deployment using embedded Kubernetes.</p>\n<h2>Change FQDN for a deployment using embedded Kubernetes </h2>\n<p>To change FQDN for Audit deployed in an embedded Kubernetes environment, perform the following tasks:</p>\n<h3>Update values.yaml</h3>\n<p>Navigate to your custom <strong>values.yaml</strong> file with properties configured for the Audit deployment, update the <strong>global.externalAccessHost</strong> parameter value with the new FQDN, for example, audit.new.com. This is a required parameter.</p>\n<h3>Update Audit deployment</h3>\n<p>Run the following command to trigger the Audit upgrade:</p>\n<pre>helm upgrade Audit &lt;Audit<em> Service Chart</em>&gt; -n &lt;Audit Namespace&gt; -f &lt;Values<em> YAML File</em>&gt;</pre>\n<p>where,</p>\n<p><em>&lt;Audit Service Chart&gt;</em> is the new tar file containing the Audit installation charts.</p>\n<p><em>&lt;Audit Namespace&gt;</em> is the namespace where you have deployed the Audit service.</p>\n<p><em>&lt;Values YAML File&gt;</em> is your custom <b>values.yaml </b>file with new FQDN.</p>\n<p>For example:</p>\n<pre>helm upgrade audit audit-&lt;version&gt;.tgz -n auditns -f values.yaml</pre>\n<h3>Update Audit FQDN for all audit producers (audit integration)</h3>\n<ol>\n<li>\n<p>Edit <strong>audit-client-secret </strong>by running the following command:</p>\n<pre>kubectl edit secret audit-client-secret -n &lt;SMAX<i> Namespace</i>&gt;\n</pre>\n<p>For example,</p>\n<pre>kubectl edit secret audit-client-secret -n itsma-5bsdi</pre>\n</li>\n<li>Update the new FQDN of Audit in the <strong>audit-client-secret</strong> for the property <strong>auditEngineHostname</strong>.\n\t<p><strong>Note</strong>: The secrets will be in base64 encoded format. You need to decode it from base64 format and update the hostname. Convert it to base64 encoded value and update the file.<br/>\n\tFor example:</p>\n<pre>auditEngineHostname=abcd-fqdn.abc.com</pre>\n</li>\n<li>Save the secret.</li>\n</ol>\n<h3 id=\"Import_the_audit_service_certificate_into_the_suite\">Import the Audit service certificate into the suite</h3>\n<p>To enable the suite to connect to the Audit service, you need to import the Audit service engine certificate to the suite's trusted key store and IdM's key store.</p>\n<ol>\n<li id=\"Export_the_Audit_service_engine_certificate\">\n<p>To export the Audit service engine certificate, and to enable Audit for the suite platform, see <a href=\"/doc/423/26.1/importcertificatehelm\" title=\"Import CA certificate into the suite\">Import CA certificate into the suite</a>. </p>\n</li>\n<li>\n<p>Run the following command on a control plane node (embedded Kubernetes deployments) to restart the suite's platform pod.</p>\n<pre> kubectl rollout restart deployment itom-xruntime-platform -n &lt;suite namespace&gt;</pre>\n</li>\n<li>\n<p>Run the following command on a control plane node (embedded Kubernetes deployments) or the bastion node (managed Kubernetes deployments) to restart the IdM pod.</p>\n<pre>kubectl rollout restart deployment idm -n &lt;suite namespace&gt;</pre>\n</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}