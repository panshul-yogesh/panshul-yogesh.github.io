{
  "title": "Configure audit client",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>This section provides the information required to configure the audit client.</p>\n<h2>Audit client configuration</h2>\n<p>For the audit client to establish a connection with the audit engine and to configure the functional aspects of the audit client, you have to set some configuration properties. You can set these properties in an <strong>audit-client-cfg.properties</strong> file and specify the path where this file is available. If you don't set the values in the <strong>audit-client-cfg.properties</strong> file for the properties that have default values, then the audit client uses the default values.</p>\n<p>The audit client configuration gets refreshed periodically. The refresh interval is 5 min till the <strong>audit-client-cfg.properties</strong> file is first created. Thereafter, the default refresh interval is 4 hours but you can configure this.</p>\n<p>The following table provides the list of audit client configuration properties:</p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">Attribute</th>\n<th scope=\"col\">Type</th>\n<th scope=\"col\">Default value</th>\n<th scope=\"col\">Description</th>\n</tr>\n<tr>\n<td><strong>auditEngineHostname </strong>(mandatory)</td>\n<td>String</td>\n<td>Null. You need to set the value.</td>\n<td>Host name of the audit service deployment. \n\t\t\t<p>If <strong>auditEngineHostname</strong> isn't configured, no audit events get recorded. As this is a no op operation.</p>\n</td>\n</tr>\n<tr>\n<td><strong>auditEnginePort </strong>(mandatory)</td>\n<td>String</td>\n<td>Null. You need to set the value.</td>\n<td>Port in which you deploy the audit service. </td>\n</tr>\n<tr>\n<td><strong>auditidmSvcHost </strong>(mandatory)</td>\n<td>String</td>\n<td>Null. You need to set the value.</td>\n<td>Host name of IdM integrated with the audit engine.</td>\n</tr>\n<tr>\n<td><strong>auditidmSvcPort </strong>(mandatory)</td>\n<td>String</td>\n<td>Null. You need to set the value.</td>\n<td>Port of IdM integrated with audit engine.</td>\n</tr>\n<tr>\n<td><strong>auditIntegrationUser </strong>(mandatory)</td>\n<td>String</td>\n<td>Null. You need to set the value.</td>\n<td>The audit integration user that you use to create audits. The user must have the CREATE_AUDIT permission to create audit data.</td>\n</tr>\n<tr>\n<td><strong>auditIntegrationUserPassword </strong>(mandatory)</td>\n<td>String</td>\n<td>Null. You need to set the value.</td>\n<td>Password of the integration user that's used to integrate with the audit service.</td>\n</tr>\n<tr>\n<td><strong>auditUiEndpoint</strong> (mandatory)</td>\n<td>String</td>\n<td>Null. You need to set the value.</td>\n<td>The FQDN of audit UI that's accessible by external users.</td>\n</tr>\n<tr>\n<td><strong>auditUiPort</strong> (mandatory)</td>\n<td>String</td>\n<td>Null. You need to set the value.</td>\n<td>The port of the audit UI that's accessible by external users.</td>\n</tr>\n<tr>\n<td><strong>auditIntegrationTenant </strong>(mandatory)</td>\n<td>String</td>\n<td>Null. You need to set the value.</td>\n<td>The tenant that the integration user belongs to. For example, <strong>SYSBO</strong>.</td>\n</tr>\n<tr>\n<td>\n<p><strong>auditNfsPath</strong></p>\n</td>\n<td>String</td>\n<td>audit</td>\n<td>Path where the Audit client will store the audit files. You should use the same path to configure the NFS path for Audit collector (<strong>auditCollector.nfs.subpath</strong>) in the Audit collector YAML file.</td>\n</tr>\n<tr>\n<td><strong>auditClientConfigRefreshInterval</strong></td>\n<td>Integer</td>\n<td>14400000</td>\n<td>This attribute controls the time interval (in milliseconds) when audit client refreshes its configuration. Default value is 4 hours.</td>\n</tr>\n<tr>\n<td><strong>auditClientIdmConnectTimeoutInterval</strong></td>\n<td>Integer</td>\n<td>1000</td>\n<td>This attribute controls the time (in milliseconds) that the audit client waits for when connecting to IdM before erroring out.</td>\n</tr>\n<tr>\n<td><strong>auditClientAuditSvcConnectTimeout</strong></td>\n<td>Integer</td>\n<td>1000</td>\n<td>This attribute controls the time (in milliseconds) that the audit client waits for when connecting to the Audit service before erroring out.</td>\n</tr>\n<tr>\n<td><strong>auditClientSupportedTLSProtocol</strong></td>\n<td>String</td>\n<td>1.3</td>\n<td>The TLS protocol to use when connecting to the Audit service.</td>\n</tr>\n<tr>\n<td><strong>auditClientSupportedCiphers</strong></td>\n<td>String</td>\n<td>\n<p>TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,</p>\n<p>TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,</p>\n<p>TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,</p>\n<p>TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</p>\n</td>\n<td>The ciphers to use when connecting to the Audit service.</td>\n</tr>\n<tr>\n<td><strong>auditClientRetryIntervalInSeconds</strong></td>\n<td>Integer</td>\n<td>1</td>\n<td>The duration in seconds after which the audit client must retry submitting the audit request in case of a failure.</td>\n</tr>\n<tr>\n<td><strong>auditClientNumberOfRetriesOnFailure</strong></td>\n<td>Integer</td>\n<td>1</td>\n<td>The maximum number of retries to make when the audit request to the audit engine fails. The maximum number of retries supported is 10.</td>\n</tr>\n</thead>\n</table>\n<h2>Logging configuration</h2>\n<p>Audit client now supports the logging framework of the Audit producers. Enable logging by configuring the Audit producer logging configuration as follows:</p>\n<ol>\n<li>Add an entry for the package name <code>com.microfocus.itom.audit</code>.</li>\n<li>Configure the log level.</li>\n</ol>\n<p>This is an example of the configuration used by UD/UCMDB for log4j2:<br/>\n<a class=\"image\" href=\"/file/images/9/9f/Audit_Client_LoggingConfig.png\" title=\"/file/images/9/9f/Audit_Client_LoggingConfig.png\"> <img alt=\"Audit_Client_LoggingConfig\" border=\"0\" file=\"/mediawiki/images/9/9f/Audit_Client_LoggingConfig.png\" height=\"164\" hspace=\"0\" src=\"../../../images/Audit_Client_LoggingConfig_96752f66.png\" style=\"width:642px;height:164px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"642\"/> </a></p>\n<h2>Audit client NFS</h2>\n<p>Audit client supports NFS. Audit client uses NFS as a fallback to store audits when audits don't get pushed to the audit engine. Audit client writes the payload to a JSON file with the filename <strong>&lt;pod-name&gt;-TS_&lt;rfc3339<span style=\"font-size:11.0pt\"><span style=\"font-family:Calibri\"> </span></span>Timestamp&gt;.json</strong>. For every audit file, the audit client will create a digest file. You need to specify the audit NFS path under the <strong>auditNfsPath </strong>property in the <strong>audit-client-cfg.properties</strong> file or under the environment variable <strong>AUDIT_CONFIG_PATH</strong>. If the audit NFS path isn't specified, then the default directory within the pod is <code>/var/nfs/audit</code>. The audit collector will then take the audit files from this path and move it to the audit engine.</p>\n<h3>When does the audit collector pick up the audit files from the NFS path</h3>\n<p>The maximum size of the audit file is 1 MB. When the file size exceeds 1 MB, the audit client will add a suffix \"_FULL\" to the filename. The audit collector will pick up this file and push it to the audit engine during the next scheduled scan. If the audit file size is less than 1 MB, it takes 24 hrs for the audit collector to pick up the audit files.</p>\n<h3>Tampered audit file</h3>\n<p>The audit client will also compare the audit file with its digest to check if the file has undergone tampering. If tampered, the audit client will add a suffix \"_TAMPERED\" to the filename. If an audit file has \"_TAMPERED\" in the filename, audit collector won't pick this up. The administrator must check the contents of the audit file to see if it's tampered. If as an administrator you find that the content isn't tampered, follow these steps to make the file valid for the audit collector to pick up:</p>\n<ol>\n<li>Create an <strong>SHA-512 hash</strong> of the contents of the audit file.</li>\n<li>Replace the contents of the digest file with the generated <strong>SHA-512 hash</strong>.</li>\n<li>Remove the \"_TAMPERED\" suffix from the audit filename. The audit collector will then pick this audit file.</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}