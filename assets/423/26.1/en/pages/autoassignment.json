{
  "title": "Using rules for automatic assignment and suggestions for groups",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><div>When you create process driven records - such as requests or incidents - in Service Management, it's often desirable to assign them automatically to a specific group, based on information in the record. In other cases, it may not be possible to assign the record to a specific group, but instead the system can provide the agent with a list of suggestions, again based on information in the record. You can achieve both using business rules.</div>\n<p>Two rule types are commonly used to automatically set the initial group in a record:</p>\n<ul>\n<li>Set field</li>\n<li>Set field based on routing definition</li>\n</ul>\n<p>Both are used in the <b>After change</b> section of the rules.</p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">\n<p>The most common groups seen in automatic assignment cases are Service Desk Group and Expert Group (for requests and incidents). However, you can use the examples here for any group field in a record; simply specify the field name when defining the rule.</p>\n</div>\n</div>\n<h2 class=\"mw-headline\" id=\"Use_case_number_1\">Use case number 1</h2>\n<p>When creating a new IT Service Request, automatically set the service desk group to the 1st level support of the specified actual service.</p>\n<p>To implement this use case, you create a <b>Set field</b> rule in the IT Service Request workflow. You can use the <b>Set field</b> rule to set a field to a specific value, or to the result of an expression. For example, to implement an automatic assignment, you can set the desired group to a specific value, or to a value determined by an expression. That expression might define a group based on another value in the record, such as the service.</p>\n<p>You create the following <b>Set field</b> rule in the <b>Classification</b> metaphase of <b>IT Service Request</b>, in the <b>After change</b> section:</p>\n<div class=\"example\">\n<pre>If ${entity.ServiceDeskGroup == null} </pre>\n<pre>Set Service desk group to ${entity.RegisteredForActualService.SupportLevel1Group}</pre>\n</div>\n<p>The condition in this rule checks to see whether <b>Service desk group</b> already has a value, because you don't want to overwrite a value that the agent has entered. If there is no value, it specifies that <b>Service desk group</b> should be populated with the value of the <b>1st level support</b> field in the service to which the request relates.</p>\n<h2 class=\"mw-headline\" id=\"Use_case_number_2\">Use case number 2</h2>\n<p>When creating a new IT Support Request, automatically set the service desk group according to a routing definition. The routing definition allows a group to be selected based on a combination of a service, location, and organization.</p>\n<p>There are two parts to the implementation of this use case:</p>\n<ul>\n<li>Creating the routing definition</li>\n<li>Creating the business rule</li>\n</ul>\n<h3>Routing definition</h3>\n<p>Here is an example of a routing definition:</p>\n<div><a class=\"image\" href=\"/file/images/d/da/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/routing-definition.png\" title=\"/file/images/d/da/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/routing-definition.png\"> <img alt=\"Service based routing definition\" class=\"z_migration_tba_PDF\" data-file-height=\"504\" data-file-width=\"711\" height=\"504\" src=\"../../../images/routing-definition_2e35ef00.png\" width=\"711\"/> </a></div>\n<p>In this example, the routing definition selects a group based on a service and a location.</p>\n<h3>Business rule</h3>\n<p>You create the following <b>Set field</b> rule in the <b>Classification</b> metaphase of <b>IT Support Request</b>, in the <b>After change</b> section:</p>\n<div><a class=\"image\" href=\"/file/images/2/22/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/rule-sc-rd.png\" title=\"/file/images/2/22/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/rule-sc-rd.png\"> <img alt=\"Rule implementing assignment by routing definition\" data-file-height=\"142\" data-file-width=\"512\" height=\"142\" src=\"../../../images/rule-sc-rd_80bbb7a5.png\" width=\"512\"/> </a></div>\n<div class=\"example\">\n<pre>If ${entity.ServiceDeskGroup == null} </pre>\n<pre>Set Service desk group based on routing definition Service based RD with Actual Services: entity.RegisteredForActualService.Id Locations: entity.RequestedByPerson.CurrentLocation.Id</pre>\n</div>\n<p>The condition in this rule checks to see whether <b>Service desk group</b> already has a value, because you don't want to overwrite a value that the agent has entered. If there is no value, it specifies that <b>Service desk group</b> should be populated with the value determined by the routing definition.</p>\n<p>In this use case, the location of the <b>Requested by</b> person is used.</p>\n<h2 class=\"mw-headline\" id=\"Use_case_number_3\">Use case number 3</h2>\n<p>When an end user creates a request in the <span class=\"SAW_VariablesSelf-Service_Portal\">Service Portal</span>, set <b>Service desk group</b> based on the following:</p>\n<ul>\n<li>For a specified offering or incident model, or change model, set the service desk group based on one of:\n\t<ul>\n<li>A specified routing definition, or</li>\n<li>The 1st level support field in the associated service definition, or</li>\n<li>A specified group</li>\n</ul>\n</li>\n<li>Or, if the actual service is defined, then set the service desk group based on:\n\t<ul>\n<li>A specified routing definition, or</li>\n<li>The 1st level support field in the actual service record, or</li>\n<li>A specified group</li>\n</ul>\n</li>\n<li>Or, if the service isn't defined, but a location is part of a specific geography, then set the service desk group based on a different location based routing definition</li>\n<li>Or set the group to a specific default group</li>\n</ul>\n<p>There are two parts to the implementation of this use case:</p>\n<ul>\n<li>Creating the business rules for each offering</li>\n<li>Creating the general business rules for the Request record type</li>\n</ul>\n<h3>Business rules for offerings</h3>\n<p>To implement this use case, you must add the relevant assignment rules to each Service Offering, Incident Model, and Change Model record that has specific rules. You enter these rules:</p>\n<ul>\n<li>In the <b>Default values</b> tab, if setting to a specific value, or</li>\n<li>In the <b>Rules</b> tab, if using a routing definition</li>\n</ul>\n<p>You can set rules to run before or after the general record business rules. For the present use case, you must run the offering and model rules <b>before</b> the general ones.</p>\n<div><a class=\"image\" href=\"/file/images/9/9b/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/use-case-assignment-offerings.png\" title=\"/file/images/9/9b/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/use-case-assignment-offerings.png\"> <img alt=\"Example of rule for an offering\" class=\"z_migration_tba_PDF\" data-file-height=\"668\" data-file-width=\"1272\" height=\"668\" src=\"../../../images/use-case-assignment-offerings_67e1a8bd.png\" width=\"1272\"/> </a></div>\n<h3>Business rules for the Request record type</h3>\n<p>The remaining logic is in the general record rules. In this case, the request record rules, for example in the <b>Request &gt; IT Support &gt; Classification &gt; Classify</b> phase. For each rule, the current value of the group field in question (Service desk group in our case) is checked to see if it's still blank before attempting to supply a value.</p>\n<div><a class=\"image\" href=\"/file/images/b/b3/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/uc3r.png\" title=\"/file/images/b/b3/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/uc3r.png\"> <img alt=\"Example of rules for request\" data-file-height=\"379\" data-file-width=\"887\" height=\"379\" src=\"../../../images/uc3r_c5989bb2.png\" width=\"887\"/> </a></div>\n<p>With these rules, our initial logic is now met. The correct group is set only if the current field has not already been filled in. Using this method, any number of automatic assignment rules may be defined to follow the assignment logic for any implementation.</p>\n<h2 class=\"mw-headline\" id=\"Use_case_number_4\">Use case number 4</h2>\n<p>In some situations, it may be necessary to pass a particular record between multiple groups. Instead of relying on the agent to pick the correct entry from the entire list of groups, we want to suggest one or more groups to choose from. Two rule types are useful for this purpose, both of which should be used in the <b>Rendering forms</b> section of the rules:</p>\n<ul>\n<li>Define suggested values for entity link based on filter</li>\n<li>Define suggested values based on routing definition</li>\n</ul>\n<p>An important feature to note is that multiple rules can be configured for the same field, resulting in multiple suggestions being shown to the agent when entering that field. Since each suggestion may be labeled differently, this can be a valuable tool to assist the Agent in selecting the right group.</p>\n<p>Similar to the automatic assignment, these rules may be placed either in the general record or in the associated offering or model record, as appropriate. When the agent selects a group, all suggestions (from both the general and associated rules) are displayed. </p>\n<h3>Define suggested values for entity link based on filter</h3>\n<p> For this example, we will create a total of three rules that will display:</p>\n<p>● The 1st level support of the associated Service (if one is specified)</p>\n<p>● A hard-coded list of Service Desks if there is no 1st level support (or no Service specified)</p>\n<p>● The 2nd and 3rd level support of the associated Service (if one is specified)</p>\n<p>● A list of all groups</p>\n<p>The actual rules needed are:</p>\n<div><a class=\"image\" href=\"/file/images/4/4c/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/use-case-4-rules.png\" title=\"/file/images/4/4c/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/use-case-4-rules.png\"> <img alt=\"Define suggested values based on filter\" data-file-height=\"405\" data-file-width=\"855\" height=\"405\" src=\"../../../images/use-case-4-rules_40fec007.png\" width=\"855\"/> </a></div>\n<p>When an agent selects a Service desk group, and the service has a 1st level support, the following is displayed:</p>\n<div><a class=\"image\" href=\"/file/images/9/96/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/use-case-4-incident-1.png\" title=\"/file/images/9/96/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/use-case-4-incident-1.png\"> <img alt=\"Suggested values displayed based on filter\" data-file-height=\"754\" data-file-width=\"1004\" height=\"754\" src=\"../../../images/use-case-4-incident-1_f0b19081.png\" width=\"1004\"/> </a></div>\n<p>If the actual service has no 1st level support, this is displayed:</p>\n<div><a class=\"image\" href=\"/file/images/c/c5/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/use-case-4-incident-2.png\" title=\"/file/images/c/c5/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/use-case-4-incident-2.png\"> <img alt=\"Suggested values displayed based on filter where there is no level 1 support group\" data-file-height=\"691\" data-file-width=\"1008\" height=\"691\" src=\"../../../images/use-case-4-incident-2_24e4dd49.png\" width=\"1008\"/> </a></div>\n<h3>Define suggested values based on routing definition</h3>\n<p>This rule has the same result of displaying the suggested groups to the agent, but instead of a simple filter a routing definition is used. Identical to the <b>Set field based on routing definition</b> rule, a combination of Service, Location, and Organization may be used to dynamically select the suggested groups. The groups that are displayed come from the combination of the default group used in the set field rule, and any suggested groups that have been defined. Note that each node of the routing definition displays the number of groups, if any, that will be used as suggestions. To see the actual groups you must edit the node.</p>\n<div><a class=\"image\" href=\"/file/images/1/13/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/sbrd-uc.png\" title=\"/file/images/1/13/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/sbrd-uc.png\"> <img alt=\"Routing definition\" data-file-height=\"198\" data-file-width=\"296\" height=\"198\" src=\"../../../images/sbrd-uc_c58dda79.png\" width=\"296\"/> </a></div>\n<p>The actual rule is as follows:</p>\n<div><a class=\"image\" href=\"/file/images/6/64/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/uc4-rule.png\" title=\"/file/images/6/64/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/uc4-rule.png\"> <img alt=\"Rule displaying groups\" data-file-height=\"140\" data-file-width=\"716\" height=\"140\" src=\"../../../images/uc4-rule_b13f1bf8.png\" width=\"716\"/> </a></div>\n<p>This rule displays the suggested groups in a <b>Location routing</b> section. This rule could be included with the previous rules to give the agent multiple suggestion options. However, it's recommended to keep the number of different suggestion rules to the minimum needed, to avoid the risk of confusing the agent.</p>\n<h2>Use case number 5</h2>\n<p>Define a custom <strong>Current assignment</strong> value.</p>\n<ol>\n<li>Go to <strong>Administration &gt; Lists &gt; </strong>select <strong>Request Current Assignment Enum</strong>.</li>\n<li>Add a new list item. For example, <strong>ExternalProvider_c</strong>.</li>\n<li>Go to <strong>Administration &gt; Configuration &gt; Studio</strong>, select <strong>Request</strong> record type.</li>\n<li>Go to the <strong>Processes and Rules</strong> tab. In the <strong>After change</strong> section, locate the following rule:<br/>\n<b>Verifies that the Current assignment field is not empty when the request is in one of the following phases:Service request: Accept, FulfillSupport request: Accept, Escalate, FirstLineSupport</b></li>\n<li>Add the list item newly added in step 2 to the <strong>Current Assignment</strong> list. For example:<br/>\n<a class=\"image\" href=\"/file/images/a/ab/SMAXAutoAssignmentCase5.png\" title=\"/file/images/a/ab/SMAXAutoAssignmentCase5.png\"> <img alt=\"SMAXAutoAssignmentCase5.png\" height=\"308\" src=\"../../../images/SMAXAutoAssignmentCase5_09d21ec6.png\" width=\"600\"/> </a></li>\n<li>Save the rule.</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}