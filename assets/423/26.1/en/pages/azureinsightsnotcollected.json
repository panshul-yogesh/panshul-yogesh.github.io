{
  "title": "Insights aren't collected for Azure",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><div>CMP FinOps Insights doesn't collect or display recommendations for Azure, even after a successful billing data collection. When this issue occurs, errors that resemble the following are written to the log:</div>\n<div>\n<pre><code>2023-12-20 08:51:09.474 INFO  [System   ] [pool-5-thread-15] c.m.h.i.e.i.InsightJobEventProducer : successfully sent insight event to [539826139.insights.insight-job.lifecycle.failed]\n2023-12-20 08:51:09.475 WARN  [System   ] [pool-5-thread-15] c.m.h.i.engine.engine.InsightEngine : insight job failed\norg.springframework.web.client.HttpClientErrorException$TooManyRequests: 429 Too Many Requests: \"{\"error\":{\"code\":\"429\",\"message\":\"Too many requests. Please Retry after 30 seconds.\"}}\"\n        at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:130)\n        at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\n        at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\n        at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\n        at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:915)\n        at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:864)\n        at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:764)\n        at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:646)\n        at com.microfocus.hcm.insights.client.azure.savingsplan.AzureBenefitRecommendationsApiClient.getBenefitRecommendationsWithBillingScope(AzureBenefitRecommendationsApiClient.java:127)\n        at com.microfocus.hcm.insights.client.azure.savingsplan.AzureBenefitRecommendationsApiClient.getBenefitRecommendationsForBillingAccount(AzureBenefitRecommendationsApiClient.java:73)\n        at com.microfocus.hcm.insights.insight.commitment.azure.source.recommendation.AzureSavingsPlanRecommendationClient.getRecommendationsForEA(AzureSavingsPlanRecommendationClient.java:236)\n        at com.microfocus.hcm.insights.insight.commitment.azure.source.recommendation.AzureSavingsPlanRecommendationClient.getRecommendations(AzureSavingsPlanRecommendationClient.java:75)\n        at com.microfocus.hcm.insights.insight.commitment.azure.insight.AzureSavingsPlanProviderInsightManager.getSavingsPlanRecommendations(AzureSavingsPlanProviderInsightManager.java:65)\n        at com.microfocus.hcm.insights.insight.commitment.azure.runner.AzureSavingsPlanRecommendationInsightRunner.sourceData(AzureSavingsPlanRecommendationInsightRunner.java:87)\n        at com.microfocus.hcm.insights.engine.engine.InsightEngine.lambda$deriveInsight$0(InsightEngine.java:71)\n        at io.reactivex.rxjava3.internal.operators.observable.ObservableFromCallable.subscribeActual(ObservableFromCallable.java:46)\n        at io.reactivex.rxjava3.core.Observable.subscribe(Observable.java:13262)\n        at io.reactivex.rxjava3.internal.operators.observable.ObservableSubscribeOn$SubscribeTask.run(ObservableSubscribeOn.java:96)\n        at io.reactivex.rxjava3.internal.schedulers.ScheduledDirectTask.call(ScheduledDirectTask.java:38)\n        at io.reactivex.rxjava3.internal.schedulers.ScheduledDirectTask.call(ScheduledDirectTask.java:25)\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n        at java.base/java.lang.Thread.run(Thread.java:840)\n</code></pre>\n<h2>Cause</h2>\n<p>This issue occurs when too many API requests are sent to Azure. In this situation, Azure temporarily blocks API requests.</p>\n<h2>Solution</h2>\n<p>Avoid configuring the same root account to collect billing and Insights data in different tenants.</p>\n</div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}