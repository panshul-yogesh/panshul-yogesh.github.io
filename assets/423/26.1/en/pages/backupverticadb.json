{
  "title": "Back up the Vertica database",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>See the Vertica documentation for detailed instructions on Vertica backup and restore.</p>\n<p>To understand the Vertica database backup and restore usecases, see <a href=\"https://my.vertica.com/kb/Vertica-Backup-and-Restore-Whats-Your-Use-Case/Content/BestPractices/Vertica-Backup-and-Restore-Whats-Your-Use-Case.htm\" rel=\"nofollow\" target=\"1\">Vertica documentation - Vertica Backup and Restore: What's Your Use Case?</a></p>\n<p>The example here outlines the steps to <a href=\"https://my.vertica.com/kb/Copy-and-Restore-Data-from-a-Vertica-Cluster-to-a-Backup/Content/BestPractices/Copy-and-Restore-Data-from-a-Vertica-Cluster-to-a-Backup.htm\" rel=\"nofollow\" target=\"1\">Copy and restore data from a Vertica cluster to a backup (Vertica documentation)</a>.</p>\n<p>For more details on performing Vertica database backup and restore, see <a href=\"https://www.vertica.com/docs/12.0.x/HTML/Content/Authoring/AdministratorsGuide/BackupRestore/BackingUpAndRestoringTheDatabase.htm\" rel=\"nofollow\" target=\"1\">Vertica backup and restore document</a>.</p>\n<h2 id=\"Prepare_the_Vertica_database_for_backup\">Prepare the Vertica database for backup</h2>\n<ol>\n<li>Review the Vertica backup README and example VBR .ini files (typically in /opt/vertica/share/vbr/example_configs/).</li>\n<li>Select a backup strategy (below illustrates a simple backup_restore_full_external.ini).\n\t<ol type=\"a\">\n<li>Update the backup configuration to specify (in this example) the external backup host.</li>\n<li>Specify the dbUser and dbPassword, if needed.</li>\n</ol>\n</li>\n<li>Setup password-less SSH connection to the backup host.</li>\n<li>Initialize a backup using your selected approach (.ini file) running vbr.py as the Vertica user</li>\n</ol>\n<h2 id=\"Specify_Backup_Host\">Specify the Vertica database backup host</h2>\n<pre>[Mapping]\n; !!Mandatory!! This section defines what host and directory will store the backup for each node.\n; node_name = backup_host:backup_dir\n; In this \"parallel backup\" configuration, each node backs up to a distinct external host.\n; To backup all database nodes to a single external host, use that single hostname/IP address in each entry below.\nv_cgro_node0001 = 10.20.100.156:/home/vertica/backups\nv_cgro_node0002 = 10.20.100.157:/home/vertica/backups\nv_cgro_node0003 = 10.20.100.158:/home/vertica/backups\n</pre>\n<h3 id=\"Specify_Database_Password\">Specify the Vertica database password</h3>\n<pre>[Database]\n; Vertica user name for vbr to connect to the database.\n; This setting is rarely needed since dbUser is normally identical to the database administrator\ndbUser = vertica\ndbPassword = password\n</pre>\n<h2 id=\"Initialize_Vertica_database_backup\">Initialize Vertica database backup</h2>\n<pre>/opt/vertica/bin/vbr.py -t init -c backup_restore_full_external.ini\nInitializing backup locations.\nBackup locations initialized.\n</pre>\n<h2 id=\"Back_up_Vertica_database\">Back up Vertica database</h2>\n<pre>/opt/vertica/bin/vbr.py -t backup -c backup_restore_full_external.ini \nStarting backup of database cgro.\nParticipating nodes: v_cgro_node0001.\nSnapshotting database.\nSnapshot complete.\nApproximate bytes to copy: 362692227 of 362692227 total.\n[==================================================] 100%\nCopying backup metadata.\nFinalizing backup.\nBackup complete!</pre>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}