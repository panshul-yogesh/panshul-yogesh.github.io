{
  "title": "Back up the Vertica database on AWS",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>This topic introduces the procedures of creating an Eon mode Vertica database and how to back up and restore the newly created database.</p>\n<h2><span style=\"color: rgb(0, 115, 231); font-family: Roboto, sans-serif; font-size: 24px;\">Create an Eon mode Vertica database</span></h2>\n<p>The Eon Mode database stores your data in an independent location (for example, the AWS S3 or Google Storage) instead of in a traditional file system, which provides the elasticity to execute a different number of queries concurrently based on your needs. The Vertica Management utility, deployed with CloudFormation Templates (CFTs) on the AWS Marketplace, is part of the Management Console Stack (MC Stack). </p>\n<p>Follow these steps to create an Eon mode Vertica database on AWS:</p>\n<ol>\n<li>Log in to the <strong>Vertica Management Console</strong> via port 5450 with the default credentials of \"vertica/vertica\".</li>\n<li>Reset the password from \"vertica/vertica\" to \"vertica/Admin_1234\"\n\t<div class=\"Admonition_Note\"><span class=\"autonumber\">Note</span>: The Vertica instance and the database are deployed along with the MC Stack deployment.</div>\n</li>\n<li>On the <strong>Management Console</strong> homepage, click <strong>Create new database</strong> under<strong> Provision</strong>.</li>\n<li>On<strong> Database Storage Mode</strong>, click<strong> Eon Mode</strong>, and then click <strong>Next</strong> to continue.</li>\n<li>On the<strong> Vertica License </strong>page, select the <strong>Community Edition</strong>, and then click <strong>Next </strong>to complete the license selection.</li>\n<li>Complete the required fields listed on the <strong>AWS Environment</strong>, <strong>Database Parameters</strong>, and <b>AWS Configuration</b><strong> </strong>pages one by one. After you finish the configurations, click <strong>Next</strong>.<br/>\n\tFor details about each field, see the <a href=\"https://www.vertica.com/docs/12.0.x/HTML/Content/Authoring/ManagementConsole/ManagingDatabaseClusters/MCAWSClusters/ProvisionEonDBClusterMC.htm\">Vertica documentation</a>.\n\t<div class=\"Admonition_Note\"><span class=\"autonumber\">Note</span>: If you need to restore the Vertica database, configure the <strong>Database Name</strong> field in the <strong>Database Parameters </strong>page with the name that you backed up earlier. If not, set up the database name of your choice.</div>\n</li>\n<li>Click<strong> Edit </strong>to make changes to a previous section. If you have no changes to make, check <strong>I accept the terms and conditions</strong>, and then click<strong> Create Cluster</strong>.</li>\n<li>After you complete the above configurations, the system will start working on building the Vertica database cluster.</li>\n<li>After the AWS instances, Cluster, and Database are created, click <strong>Get Started</strong> to view the newly created database in the <strong>Recent Databases</strong> section of <strong>Vertica Management Console</strong>.<br/>\n\tNote that a new EC2 instance is created with a private IP, and you can SSH to it using the <strong>Key Pair</strong> used during database creation. In the following examples, the private IP is 10.0.1.175.</li>\n</ol>\n<h2>Back up and restore the new database</h2>\n<p>After the new database is created, you need to restore the database on the new instance from the AWS S3 bucket.</p>\n<h3>Re-initialize the backup on the new Vertica node</h3>\n<pre>[vertica@ip-10-0-1-175 ~]$ /opt/vertica/bin/vbr.py -t init -c backup_restore_cloud_storage.ini --s3-force-init\nInitializing backup locations.\nBackup locations initialized.\n[vertica@ip-10-0-1-175 ~]$ /opt/vertica/bin/vbr.py -t listbackup -c backup_restore_cloud_storage.ini\nEnter vertica password:\nbackup                            backup_type   epoch   objects   include_patterns   exclude_patterns   version     file_system_type   communal_storage\nbackup_snapshot_20220721_061003   full          8085                                                    v12.0.x-x   [S3]               s3://srcenv-backup/novasrc05-vertica\n[vertica@ip-10-0-1-175 ~]$\n</pre>\n<div class=\"Admonition_Note\"><span class=\"autonumber\">Note:</span> You can use the <code>s3-force-init</code> if running the <code>force init task </code>is required.</div>\n<h3 class=\"Admonition_Note\">List the existing Vertica backups</h3>\n<pre>[vertica@ip-10-0-1-175 ~]$ /opt/vertica/bin/vbr.py -t listbackup -c backup_restore_cloud_storage.ini\nEnter vertica password:\nbackup                            backup_type   epoch   objects   include_patterns   exclude_patterns   version     file_system_type   communal_storage\nbackup_snapshot_20220721_061003   full          8085                                                    v12.0.x-x   [S3]               s3://srcenv-backup/novasrc05-vertica\n[vertica@ip-10-0-1-175 ~]$\n[vertica@ip-10-0-1-175 ~]$\n</pre>\n<h3>Restore the Vertica database from S3</h3>\n<pre>[vertica@ip-10-0-1-175 ~]$ /opt/vertica/bin/vbr.py -t restore --archive=20220721_061003 -c backup_restore_cloud_storage.ini\nEnter vertica password:\nStarting full restore of database cgrodb.\nParticipating nodes: v_cgrodb_node0001.\nRestoring from restore point: backup_snapshot_20220721_061003\nDetermining what data to restore from backup.\n[==================================================] 100%\nApproximate bytes to copy: 1034038427 of 1034038427 total.\nSyncing data from backup to cluster nodes.\n[==================================================] 100%\nRestoring catalog.\nRestore complete!\n[vertica@ip-10-0-1-175 ~]$\n</pre>\n<h3>Start the Vertica database</h3>\n<p>Before starting your Vertica database, make sure that you have updated the database ConfigMap to point to the new Vertica IP/Instance and restart the cgro-showback deployment YAML. Then, you can now start and manage your new Vertica database.</p>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}