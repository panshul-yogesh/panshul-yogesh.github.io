{
  "title": "Load balance optimization among online platform pods",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>A load balance mechanism is embedded in the online platform pod's readiness probe, which runs every 10 seconds. A script constantly monitors the CPU usage of this pod, if the CPU usage exceeds the threshold (2.5 CPU cores by default) for longer than 30 seconds, the system will set the readiness status to \"Unavailable.\" Whenever the probe detects that the CPU usage is lower than the threshold, the system resumes the readiness status to \"Available.\"</p>\n<p>This mechanism operates optimally when sufficient online pods are available within the deployment. As the incoming online workload is evenly distributed across all pods, in scenarios where some pods remain idle while others are busy, overall performance may be affected. Enabling this mechanism allows busy pods to rest while idle ones manage the workload, thereby reducing response time.</p>\n<p>Conversely, if resources are limited (with only a few pods), enabling this mechanism might further degrade performance by reducing already scarce resources.</p>\n<h2>Enable the load balance mechanism</h2>\n<p>This mechanism is disabled by default, it can be turned on by the <code>enable_cpu_check</code> parameter in the <code>itom-xruntime-infra-config</code> config map. You can run the following command to edit it:</p>\n<pre>kubectl edit configmap  itom-xruntime-infra-config -n &lt;namespace&gt;</pre>\n<p>Then, change <strong>ENABLE_CPU_CHECK</strong> from false to true. Meanwhile, if your <code>itom-xruntime-platform</code> deployment’s CPU limit has been customized, you may consider adjusting the <strong>CPU_THRESHOLD</strong> accordingly. The recommended <strong>CPU_THRESHOLD</strong> value is the CPU limit minus 1.5.</p>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}