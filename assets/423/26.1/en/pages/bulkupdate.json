{
  "title": "Record bulk update and collection APIs",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>Bulk update APIs are highly recommended from a performance perspective because they reduce traffic and enable the EMS to optimize interaction with the database and increase its capacity. </p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">We don't recommend using the APIs for data deletion, as this is not yet officially supported. If you need to delete any transactional data, we recommend that you use the <a href=\"/doc/423/26.1/appsettings#Enable_purge\" title=\"Purge\">Purge</a> feature provided by the system to ensure that all associated data is completely removed.</div>\n</div>\n<h2 class=\"mw-headline\" id=\"Getting_a_record_collection\">Getting a record collection</h2>\n<p>To run an HTTP GET method for a collection, the following syntax is supported:</p>\n<p><code>rest/&lt;tenant-id&gt;/ems/&lt;entity-type&gt;?&lt;query-params&gt;</code></p>\n<p>Where:</p>\n<ul>\n<li><b>tenant-id</b> represents the tenant ID. To access the tenant ID, right-click the <b>Launch</b> button next to the required product on MyAccount, select <b>Copy link address</b> and paste it into a browser. The tenant ID is the number following <b>TENANTID=</b>.</li>\n<li><b>entity-type</b> represents the logical name of the record to return. Example: incident.</li>\n<li><b>query-params</b> represents query parameters compatible with the query language specifications.</li>\n</ul>\n<p>Enter the following request URI:</p>\n<pre>https://&lt;serverAddress&gt;/rest/&lt;tenant-id&gt;/ems/Incident/11704?layout=SolvedTime,RegisteredForActualService,UserOptionsType,EntityModel,\nUrgency,KnowledgeCandidate,ClosedByPerson,ExpectedResolutionTime,TasksExecutionPlanClassify,IncidentAttachments,MajorIncident,\nTasksExecutionPlanInitialSupport,ImpactScope,Active,RequestedByPerson,\nIsDeleted,Id,TasksWorkspace,CompletionCode,CloseTime,ExplicitStakeholders,TasksInternalData,\nPhaseId,ProcessId,LastUpdateTime,<span style=\"font-size:11.0pt\"><span style='font-family:\"Calibri\",sans-serif'>RecordedByPerson</span></span>,ExternalProcessReference,OwnedByPerson,\nServiceDeskGroup,ProblemCandidate,RegisteredForLocation,Solution,AssignedGroup,Escalated,\nGlobalId,Description,LastUpdatedByPerson,TasksExecutionPlanEscalate,Priority,Name,\nAllStakeholders,Status,Category,NextTargetTime,DisplayLabel,UserOptions,SolvedByPerson,\nEmsCreationTime,TasksExecutionPlanValidate,AssignedPerson,FirstTouch</pre>\n<p>The following is an example of the structure of the returned data in JSON format:</p>\n<pre>{\n        \"entities\": [\n                {\n                        \"entity_type\": \"Incident\",\n                        \"properties\": {\n                                \"RegisteredForActualService\": \"10938\",\n                                \"Urgency\": \"TotalLossOfService\",\n                                \"IncidentAttachments\": \"{\\\"complexTypeProperties\\\":[]}\",\n                                \"ImpactScope\": \"Enterprise\",\n                                \"Active\": false,\n                                \"RequestedByPerson\": \"10426\",\n                                \"IsDeleted\": false,\n                                \"Id\": \"11704\",\n                                \"CompletionCode\": \"NoFaultFound\",\n                                \"PhaseId\": \"Close\",\n                                \"ProcessId\": \"normal\",\n                                \"LastUpdateTime\": 1388039152247,\n                                \"OwnedByPerson\": \"10620\",\n                                \"ServiceDeskGroup\": \"10649\",\n                                \"Solution\": \"Changed the fanTry reading the following article:\n&lt;a href=\\\"https://{serverAddress}/saw/ess/viewResult/13422\\\"&gt;BlackBerry&lt;/a&gt;&lt;br&gt;&lt;br&gt;\n&lt;p&gt;sdfgsdgsdg&lt;/p&gt;\",\n                                \"Description\": \"&lt;p&gt;Everyday around lunch time my PC starts \nrebooting for no apparent reason. Can you please check what's wrong? I'm getting an error \nmessage about CPU temperature.&lt;/p&gt;\",\n                                \"Priority\": \"CriticalPriority\",\n                                \"Name\": \"IM000003\",\n                                \"Status\": \"Complete\",\n                                \"Category\": \"10707\",\n                                \"DisplayLabel\": \"Computer reboots for no apparent reason\",\n                                \"EmsCreationTime\": 1385656925089\n                        },\n                        \"related_properties\": {}\n                }\n        ],\n        \"meta\": {\n                \"completion_status\": \"OK\"\n        }\n}</pre>\n<h2 id=\"Bulk_Create/Update\"><span class=\"mw-headline\" id=\"Bulk_Create.2FUpdate\">Bulk Create/Update</span></h2>\n<p>For executing a Create or Update command for a collection, the following syntax is supported for the request URI:</p>\n<p><code>rest/&lt;tenant-id&gt;/ems/bulk</code></p>\n<p>Where:</p>\n<ul>\n<li><b>tenant-id</b> represents the tenant ID. To access the tenant ID, right-click the <b>Launch</b> button next to the required product on MyAccount, select <b>Copy link address</b> and paste it into a browser. The tenant ID is the number following <b>TENANTID=</b>.</li>\n<li>the request body includes the information of <b>entity-type </b>and <b>query-params</b>.\n\t<ul>\n<li><b>entity-type</b> represents the logical name of the record to retrieve. Example: incident.</li>\n<li><b>query-params</b> represents query parameters compatible with the query language specifications.</li>\n</ul>\n</li>\n</ul>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">If the <strong>entity-type</strong> is Request, make sure that the role that runs the API has \"Log into the application\" enabled through <strong>People</strong> &gt; <strong>Roles</strong> &gt; <strong>General</strong>.</div>\n</div>\n<p>A bulk processing request gets a JSON object which contains record and relationship data and an operation to process. A bulk may contain multiple record and relationship types but only a single operation.</p>\n<p>The operation property specifies the bulk operation type. Supported values are: CREATE and UPDATE.</p>\n<p>The record's JSON array contains the records to be processed. When processing an UPDATE operation, the EMS assumes that the provided properties are the subset of the record properties that need to be updated. Note that the Update JSON body must contain the \"Id\"; property to identify the entity to be updated. That is, you can't perform an UPDATE on an entity without providing the \"Id\" property. </p>\n<p>The relationship's JSON array contains the relationships to be processed. Each relationship entry includes the following properties:</p>\n<ul>\n<li><b>name.</b> The name of the relationship (as defined in the metadata).</li>\n<li><b>&lt;FirstEndPoint-Name&gt;.</b> The name of the first endpoint record (as a string).</li>\n<li><b>&lt;SecondEndPoint-Name&gt;.</b> The name of the second endpoint record (as a string).</li>\n</ul>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">\n<p>The bulk processing order isn't defined.</p>\n</div>\n</div>\n<h3><br/>\nExample: Bulk Create</h3>\n<p>The following is an example of the structure of the bulk operation payload JSON format:</p>\n<pre>https://{serverAddress}/rest/{tenant-id}/ems/bulk</pre>\n<pre>{\n        \"entities\": [\n                {\n                        \"entity_type\": \"Incident\",\n                        \"properties\": {\n                                \"ImpactScope\": \"SingleUser\",\n                                \"Active\": true,\n                                \"RequestedByPerson\": \"10073\",\n                                \"PhaseId\": \"Log\",\n                                \"ProcessId\": \"normal\",\n                                \"FirstTouch\": true,\n                                \"Urgency\": \"SlightDisruption\",\n                                \"RegisteredForActualService\": \"10916\",\n                                \"ServiceDeskGroup\": \"10646\",\n                                \"CompletionCode\": null,\n                                \"DisplayLabel\": \"Test_Incident\",\n                                \"Priority\": \"LowPriority\",\n                                \"Description\": \"&lt;p&gt;Test&lt;/p&gt;\"\n                        }\n                }\n        ],\n        \"operation\": \"CREATE\"\n}</pre>\n<p>The following is an example of the structure of the bulk create operation result JSON format:</p>\n<pre>{\n        \"entity_result_list\": [\n                {\n                        \"entity\": {\n                                \"entity_type\": \"Incident\",\n                                \"properties\": {\n                                        \"Id\": \"20036\",\n                                        \"LastUpdateTime\": 1388060910959\n                                },\n                                \"related_properties\": {}\n                        },\n                        \"completion_status\": \"OK\"\n                }\n        ],\n        \"relationship_result_list\": [],\n        \"meta\": {\n                \"completion_status\": \"OK\"\n        }\n}</pre>\n<p>A bulk response body contains an aggregated <b>completion_status</b>, which represents the overall success of the bulk operation. The status is marked as <b>OK</b> only if all the contained operations were processed successfully.</p>\n<p>In addition, the response body contains a JSON object for each request element (record or relationship) that failed to process, which represents the failed object with details. The response body JSON should be symmetrical to the request body, with records listed in one array and relationships in a separate one.</p>\n<h3>Example: Bulk Update</h3>\n<p>The following is an example of the structure of the bulk operation payload JSON format:</p>\n<pre>https://{serverAddress}/rest/{tenant-id}/ems/bulk\n</pre>\n<pre>{\n   \"entities\":[\n      {\n         \"entity_type\":\"Contract\",\n         \"properties\":{\n            \"Id\":\"11104\",\n            \"Vendor\":\"10080\"\n         }\n      }\n   ],\n   \"operation\":\"UPDATE\"\n}\n</pre>\n<p>The following is an example of the structure of the bulk update operation result JSON format:</p>\n<pre><code>\"data\": {\n    \"entity_result_list\": [\n      {\n        \"entity\": {\n          \"entity_type\": \"Contract\",\n          \"properties\": {\n            \"LastUpdateTime\": 1593499152727,\n            \"Id\": \"11104\"\n          },\n          \"related_properties\": {}\n        },\n        \"completion_status\": \"OK\"\n      }\n    ],\n    \"relationship_result_list\": [],\n    \"translation_result_list\": [],\n    \"meta\": {\n      \"completion_status\": \"OK\",\n      \"correlationId\": \"RID-e92b34ac-8160-4186-8676-12e34502383d\"\n    }\n  }\n</code></pre>\n<p>You can also use this API to add Many2Many relationships.  </p>\n<pre><code>{\"relationships\":[{\"name\":\"SystemElementAffectedByIncident\",\"firstEndpoint\":{\"SystemElement\":\"&lt;system elelemt id&gt;\"},\"secondEndpoint\":{\"Incident\":\"&lt;incident id&gt;\"}}],\"operation\":\"CREATE\"}</code></pre>\n<p>For example, <code> </code></p>\n<pre><code>{\"relationships\":[{\"name\":\"SystemElementAffectedByIncident\",\"firstEndpoint\":{\"SystemElement\":\"11460\"},\"secondEndpoint\":{\"Incident\":\"13098\"}}],\"operation\":\"CREATE\"}</code></pre>\n<h3></h3>\n<h3>Example: Clear the value in a field</h3>\n<p>To clear the value in a field by using Bulk Update, you must set the field to <strong>null</strong>. The following example will clear the value in the Vendor field. </p>\n<pre><code>{\n   \"entities\":[\n      {\n         \"entity_type\":\"Contract\",\n         \"properties\":{\n            \"Id\":\"11104\",\n            \"Vendor\":null\n         }\n      }\n   ],\n   \"operation\":\"UPDATE\"\n}</code></pre>\n<h2></h2>\n<h2>Limitations</h2>\n<p>The following limitations apply to bulk requests:</p>\n<ul>\n<li>A bulk request can only perform a single CREATE or UPDATE operation.</li>\n<li>Records are processed one by one, to enable workflow rules on each record.</li>\n</ul>\n<h2 class=\"mw-headline\" id=\"Related_topics\">Related topics</h2>\n<ul>\n<li><a href=\"/doc/423/26.1/restapi\" title=\"SMAX:25.1/RESTAPI\">Overview of the REST API</a></li>\n<li><a href=\"/doc/423/26.1/connecttorestapi\" title=\"SMAX:25.1/ConnectToRESTAPI\">How to connect to the REST API</a></li>\n<li><a href=\"/doc/423/26.1/apirestauth\" title=\"SMAX:25.1/ApiRESTAuth\">Authentication endpoint service</a></li>\n<li><a href=\"/doc/423/26.1/singleentityops\" title=\"SMAX:25.1/SingleEntityOps\">Single record API</a></li>\n<li><a href=\"/doc/423/26.1/queryproperties\" title=\"SMAX:25.1/QueryProperties\">REST API queries</a></li>\n<li><a href=\"/doc/423/26.1/collectqueryprotocol\" title=\"SMAX:25.1/CollectQueryProtocol\">REST API collection query protocol</a></li>\n<li><a href=\"/doc/423/26.1/usecasesimport\" title=\"SMAX:25.1/UseCasesImport\">REST API use case scenario - import REST API</a></li>\n</ul>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}