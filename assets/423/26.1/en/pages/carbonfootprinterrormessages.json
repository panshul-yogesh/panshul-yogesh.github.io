{
  "title": "Error messages in carbon-footprint-deployment log",
  "content": "<div class=\"mw-parser-output\">\n<p>You may find some error messages in the carbon-footprint-deployment log.</p>\n<p>To check the carbon-footprint-deployment log, run the following command:</p>\n<pre><code>kubectl logs --tail=20 deploy/itom-carbon-footprint-deployment -c itom-carbon-footprint-deployment -n &lt;namespace&gt;</code></pre>\n<h2 id=\"Cause\"><a id=\"Possible_causes\" name=\"Possible_causes\" title=\"Possible causes\"></a>Possible causes</h2>\n<h3><a id=\"Cause_1\" name=\"Cause_1\" title=\"Cause 1\"></a>Cause 1</h3>\n<p>The following error message indicates that the PostgreSQL server's <strong>pg_hba.conf</strong> file isn't properly defined with the database connection settings for the <b>carbon </b>database.</p>\n<pre>Postgres DB Error!\nFailed to perform sql!\nCREATE SCHEMA IF NOT EXISTS carbon AUTHORIZATION maas_admin;\nno pg_hba.conf entry for host \"xxx.x.x.x\", user \"maas_admin\", database \"carbon\", no encryption\nerror: no pg_hba.conf entry for host \"xxx.x.x.x\", user \"maas_admin\", database \"carbon\", no encryption\n</pre>\n<h3><a id=\"Cause_2\" name=\"Cause_2\" title=\"Cause 2\"></a>Cause 2</h3>\n<p>The following error message indicates that the public key of PostgreSQL CA or server certificate is less than 2048-bit.</p>\n<pre>Failed to perform sql!\nCREATE SCHEMA IF NOT EXISTS carbon AUTHORIZATION maas_admin;\nCA certificate key too weak\nError: CA certificate key too weak</pre>\n<p>or</p>\n<pre>Failed to perform sql!\nCREATE SCHEMA IF NOT EXISTS carbon AUTHORIZATION maas_admin;\nEE certificate key too weak\nError: EE certificate key too weak</pre>\n<h2><a id=\"Solutions\" name=\"Solutions\" title=\"Solutions\"></a>Solutions</h2>\n<h3><a id=\"Solution_for_cause_1\" name=\"Solution_for_cause_1\" title=\"Solution for cause 1\"></a>Solution for cause 1</h3>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Follow the instructions to <a href=\"/doc/423/26.1/carbonfootprintcalculation\" title=\"Measure your carbon footprint - Service Management\">Measure your carbon footprint - Service Management</a>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Restart the itom-carbon-footprint-deployment pod:\n\t<pre><code>kubectl rollout restart deploy/itom-carbon-footprint-deployment -n &lt;namespace&gt;</code></pre>\n</li></ol>\n<h3><a id=\"Solution_for_cause_2\" name=\"Solution_for_cause_2\" title=\"Solution for cause 2\"></a>Solution for cause 2</h3>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-important-icon\"></div><div class=\"admonition-content admonition-important-content\"><div>This error indicates that the public key of PostgreSQL CA or server certificate is less than 2048-bit. For security concerns, we strongly recommend that you use a certificate with 2048-bit or higher RSA key to replace your existing certificate. If you insist on using your existing certificate, you may follow the steps below to change <code>tls_cipher_seclevel</code>. By doing this, you are disabling or bypassing security features, thereby exposing the system to increased security risks. By using this option, you understand and agree to assume all associated risks and hold OpenText harmless for the same.</div></div></div>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Run the following command to edit configmap:\n\t<pre><code>kubectl edit cm itom-carbon-footprint-configmap -n &lt;namespace&gt;</code></pre>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Search for the <code>tls_cipher_seclevel</code> line:\n\t<pre><code>tls_cipher_seclevel: \"2\"</code></pre>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Change the value of <code>tls_cipher_seclevel</code> from 2 to 1:\n\t<pre><code>tls_cipher_seclevel: \"1\"</code></pre>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Save the changes:\n\t<pre><code>:wq</code></pre>\n</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Restart the itom-carbon-footprint-deployment pod: \n\t<pre><code>kubectl rollout restart deploy/itom-carbon-footprint-deployment -n &lt;namespace&gt;</code></pre>\n</li></ol>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}