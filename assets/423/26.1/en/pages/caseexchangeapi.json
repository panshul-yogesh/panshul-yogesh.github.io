{
  "title": "Case Exchange REST API",
  "content": "<br/><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>Service Management provides a Case exchange REST API to exchange data between Service Management and an external system. The REST API enables you to create and update records in Service Management. It also enables you to relate those records to records in the external system. </p>\n<p>The following REST calls are available:</p>\n<ul>\n<li><b>Get multiple records.</b> Retrieves multiple records.</li>\n<li><b>Get single record.</b> Retrieves a specific record.</li>\n<li><b>Get attachments.</b> Retrieves the attachments to files.</li>\n<li><b>Create record.</b> Creates new records.</li>\n<li><b>Update record.</b> Updates existing records.</li>\n<li><b>Add attachments.</b> Adds attachments to files.</li>\n</ul>\n<h2 class=\"mw-headline\" id=\"Get_multiple_records\">Get multiple records</h2>\n<p>Enter the following GET request URI:</p>\n<div class=\"example\">\n<p>https://&lt;serverAddress&gt;/rest/&lt;tenant-id&gt;/ces?layout=&lt;list-of-record-properties&gt;&amp;type=&lt;record-type&gt;&amp;system=&lt;external-system-name&gt;&amp;time=&lt;last=update-time&gt;&amp;skip=&lt;offset&gt;&amp;size=&lt;page-size&gt;</p>\n</div>\n<p>The parameters are as follows:</p>\n<ul>\n<li><b>Layout.</b> The list of record properties to retrieve.</li>\n<li><b>Type.</b> The record type.</li>\n<li><b>System.</b> The name of the external system as defined in the External systems under Integration Management.</li>\n<li>\n<p><b>Time.</b> Records with an operation time greater than this value are retrieved. A record's operation time is the time when the record's specific properties are updated and the update of those specific properties must trigger one of the operations described on these pages:</p>\n<p><a href=\"/doc/423/26.1/incidentcasexchange\" title=\"Case Exchange integration operations for incidents\">Case Exchange integration operations for incidents</a></p>\n<p><a href=\"/doc/423/26.1/requestcasexchange\" title=\"Case Exchange integration operations for requests\">Case Exchange integration operations for requests</a></p>\n<p><a href=\"/doc/423/26.1/changecasexchange\" title=\"Case Exchange integration for changes\">Case Exchange integration operations for changes</a></p>\n<p>The value of the time is the UTC milliseconds from the epoch.</p>\n</li>\n<li><b>Skip.</b> The offset (where the page starts). Used for pagination. The default is 0.</li>\n<li><b>Size.</b> The maximum number of records that you can retrieve (starting from offset). Used for pagination. The default is 4000.</li>\n</ul>\n<p>For example, enter the following REST call to retrieve multiple incidents:</p>\n<pre>GET http://.../rest/100000001/ces?layout=Id,DisplayLabel,ImpactScope,Urgency, \nRegisteredForActualService.DisplayLabel,IncidentAttachments&amp;type=Incident&amp;system=SM\n&amp;time=0&amp;skip=0&amp;size=100</pre>\n<p>The following is the response JSON:</p>\n<pre>    {\n\"entities\": [\n{\n\"entity_type\": \"Incident\",\n\"properties\": {\n\"Id\": \"11385\",\n\"DisplayLabel\": \"Incident for Central IT\",\n\"ImpactScope\": \"SingleUser\",\n\"Urgency\": \"SevereDisruption\",\n\"IncidentAttachments\": \"{\\\"complexTypeProperties\\\":[{\\\"properties\\\":\n                      {\\\"id\\\":\\\"e940074a-50da-45e7-aaf6-04738946d86e\\\",\\\"file_name\\\":\\\"CDP \n                      Quick Start Guide for Individuals.docx\\\",\\\"file_extension\\\":\\\"docx\\\",\n                      \\\"size\\\":1246120,\\\"mime_type\\\":\\\"application/vnd.openxmlformats-\n                      officedocument.wordprocessingml.document\\\",\\\"Creator\\\":\\\"devUser1\\\",\n                      \\\"LastUpdateTime\\\":1397011728993}},{\\\"properties\\\":{\\\"id\\\":\\\n                      \"22291a78-c529-470f-965a-8f5a6f6414bf\\\",\\\"file_name\\\":\\\n                      \"Analytic_Reqs.xlsx\\\",\\\"file_extension\\\":\\\"xlsx\\\",\\\"size\\\":14830,\n                      \\\"mime_type\\\":\\\"application/vnd.openxmlformats-officedocument.\n                      spreadsheetml.sheet\\\",\\\"Creator\\\":\\\"devUser1\\\",\\\"LastUpdateTime\\\":\n                      1397064286794}}]}\"\n},\n\"related_properties\": {\n\"RegisteredForActualService\": {\n\"DisplayLabel\": \"PC Support\"\n},\n\"ext_properties\": {\n\"Operation\": \"Update\",\n\"ExternalId\": \"External Test Incident 1\",\n\"ExternalEntityType\": \"Incident\",\n\"OperationTime\": 1395428400000,\n},\n\"Comments\": [\n{\n\"Name\": Dave Davies,\n\"Body\": Need to assign to IT\n\"CreatedTime\": 1366201234968\n}\n],\n}\n],\n\"meta\": {\n\"completion_status\": \"OK\",\n\"total_count\": 3\n}\n}</pre>\n<h2 class=\"mw-headline\" id=\"Get_single_record\">Get single record</h2>\n<p>Enter the following GET request URI:</p>\n<div class=\"example\">\n<p>https://&lt;serverAddress&gt;/rest/&lt;tenant-id&gt;/ces/&lt;record-id&gt;?layout=&lt;list-of-record-properties&gt;&amp;type=&lt;record-type&gt;&amp;system=&lt;external-system-name&gt;</p>\n</div>\n<p>The parameters are as follows:</p>\n<ul>\n<li><b>Record Id.</b> The Id of the specific record to retrieve.</li>\n<li><b>Layout.</b> The list of record properties to retrieve.</li>\n<li><b>Type.</b> The record type.</li>\n<li><b>System.</b> The name of the external system as defined in the External systems under Integration Management.</li>\n</ul>\n<p>For example, enter the following REST call to retrieve a single incident:</p>\n<div class=\"example\">\n<p><code>GET http://.../rest/100000001/ces/16116?layout=Id,Description,ImpactScope,IncidentAttachments,RegisteredForActualService.DisplayLabel &amp;type=Incident&amp;system=SM</code></p>\n</div>\n<p>The following is the response JSON:</p>\n<pre>{\n\"entities\": [\n{\n\"entity_type\": \"Incident\",\n\"properties\": {\n\"ImpactScope\": \"SingleUser\",\n\"Description\": \"&lt;p&gt;Case exchange test incident&lt;/p&gt;\\n\",\n\"IncidentAttachments\": \"{\\\"complexTypeProperties\\\":[]}\",\n\"Id\": \"16116\"\n},\n\"related_properties\": {\n\"RegisteredForActualService\": {\n\"DisplayLabel\": \"Backup - Data Center\"\n}\n},\n\"ext_properties\": {\n\"Operation\": \"Assign\",\n\"OperationTime\": 1404950069913\n},\n\"Comments\": []\n}\n],\n\"meta\": {\n\"completion_status\": \"OK\",\n\"total_count\": 1\n}\n}</pre>\n<h2 class=\"mw-headline\" id=\"Get_attachments\">Get attachments</h2>\n<p>Enter the following GET request URI:</p>\n<div class=\"example\">\n<p>https://&lt;serverAddress&gt;/rest/&lt;tenant-id&gt;/ces/attachment/&lt;attachment-id&gt;</p>\n</div>\n<p>where the &lt;attachment-id&gt; parameter is taken from the response JSON in the Get single record or Get multiple records call. Make sure to include this property in the layout parameter of the Get call. In the above example for incidents, the property is: <b>IncidentAttachments</b>.</p>\n<p>For example, enter the following REST call:</p>\n<pre>GET http://.../rest/100000001/ces/attachment/e940074a-50da-45e7-aaf6-04738946d86e</pre>\n<h2 class=\"mw-headline\" id=\"Create_record\">Create record</h2>\n<p>Enter the following POST request URI:</p>\n<div class=\"example\">\n<p>https://&lt;serverAddress&gt;/rest/&lt;tenant-id&gt;/ces</p>\n</div>\n<p>There are no parameters for this URI.</p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">To create a new record, the Operation field must be set to <b>Create</b>. Additionally, when creating a record, the API assigns an <strong>Actual service</strong> value based on the following fields, which are listed from the highest to lowest priority: \n\n<ul>\n<li>The <strong>RegisteredForActualService.Id</strong> field in the JSON body of the REST call</li>\n<li>The <strong>Default actual service</strong> field in the external system configuration</li>\n<li>The <strong>RegisteredForActualService</strong> field in the JSON body of the REST call</li>\n</ul>\n</div>\n</div>\n<ul>\n</ul>\n<p>For example, enter the REST call with the following JSON body to create incident records:</p>\n<pre>    {\n\"entities\": [\n{\n\"entity_type\": \"Incident\",\n\"template\": \"SAW Template name to apply on create (optional)\",\n\"properties\": {\n\"DisplayLabel\": \"This incident opened from external system.\",\n\"Description\":  \"Description of incident\",\n\"ImpactScope\": \"MultipleUsers\",\n\"Urgency\": \"SevereDisruption\",\n\"RegisteredForActualService\":  \"20132\",\n\"Category.DisplayLabel\": \"Cloud\",\n\"DeviceAffectedByIncident.DisplayLabel\": [\"SERV23SD090\", \"SERV23SD090\"],\n\"IncidentCausedByIncident&lt;\": [\"20500\", \"20505\"],\n\"IncidentCausedByIncident&gt;\": [\"20510\", \"20515\"],\n\"IncidentAttachments\": \"{\\\"complexTypeProperties\\\":[{\\\"properties\\\":\n                      {\\\"id\\\":\\\"161ecd4d-0fa4-4a48-a9c8-12371561545e\\\",\\\"file_name\\\":\n                      \\\"attach1.txt\\\",\\\"file_extension\\\":\\\"txt\\\",\\\"size\\\":26,\\\"mime_type\\\":\n                      \\\"text/plain\\\",\\\"Creator\\\":\\\"devUser1\\\",\\\"LastUpdateTime\\\":\n                      1398389475854}}]}\"\n},\n\"Comments\": [\n{   \n\"Name\": \"John Smith\"\n\"Body\": \"Assigned to Central IT.\",\n\"CreatedTime\": \"April 24, 2014 5:00 PM PST\"\n}\n],\n\"ext_properties\": { \n\"ExternalSystem\": \"SM\",\n\"Operation\": \"Create\",\n\"ExternalId\": \"IM20123\",\n\"ExternalEntityType\": \"Incident\",\n\"ExternalStatus\": \"Pending Vendor\",\n\"URL\": &lt;optional URL to external system&gt;,\n}\n}\n]\n}</pre>\n<p>The following is the response JSON:</p>\n<pre>    {\n\"entities\": [\n{\n\"entity\": {\n\"entity_type\": \"Incident\",\n\"properties\": {\n\"Id\": \"10034\"\n}\n},\n\"completion_status\": \"OK\",\n\"operation\": \"Create\",\n\"warningDetails\": […],\n\"errorDetails\": {…}\n}\n],\n\"meta\": {\n\"completion_status\": \"OK\",\n\"errorDetails\": {…}\n}\n}</pre>\n<p>The possible completion status values are:</p>\n<ul>\n<li>OK</li>\n<li>FAILED</li>\n</ul>\n<p><b>Comments</b></p>\n<p>You can add comments to a Create call by including a Comments section in the request JSON. The <b>Name</b> and <b>CreatedTime</b> parameters under each comment must be provided as strings in any format. These strings aren't interpreted by Service Management but they are added to the body of the comment for identification purposes.</p>\n<p>Comments are always added as new comment records. Older comments can't be updated via this POST API. Comments submitted in a POST by a user aren't presented back to the same user as part of a GET response.</p>\n<p><b>Relationships</b></p>\n<p>When setting relationships in a Create call, the following options are supported:</p>\n<table>\n<tbody>\n<tr>\n<th></th>\n<th>One to one, One to many relationships</th>\n<th>Many to many asymmetric relationships</th>\n<th>Many to many relationships to records of the same type</th>\n</tr>\n<tr>\n<td>Related record ID</td>\n<td>\n<p>Set relationship to a related record specified by ID.</p>\n<p>Syntax: <b>RelationName:Id</b></p>\n<p>Example: <b>RegisteredForActualService: 20132</b></p>\n</td>\n<td>\n<p>Set relationship to a list of related records specified by IDs.</p>\n<p>Syntax: <b>RelationName: [Id-1, Id-2, …, Id-n]</b></p>\n<p>Example: <b>DeviceAffectedByIncident: [11534, 11535]</b></p>\n</td>\n<td>\n<p>Set relationship to a list of related records specified by Ids. The relationship side of RelationName corresponding to the related records must be specified (&lt; = left side, &gt; = right side).</p>\n<p>Syntax: <b>RelationName(&lt;|&gt;): [Id-1, Id-2, …, Id-n]</b></p>\n<p>Example: <b>IncidentCausedByIncident&lt;: [12324, 12327]</b></p>\n</td>\n</tr>\n<tr>\n<td>Related record property value</td>\n<td>\n<p>Set relationship to a related record specified by a value of a property on the related record.</p>\n<p>Syntax: <b>RelationName.Property:Value</b></p>\n<p>Example: <b>RegisteredForActualService.DisplayLabel: Catalog</b></p>\n</td>\n<td>\n<p>Set relationship to a list of related records specified by the values of a property on the related records.</p>\n<p>Syntax: <b>RelationName.Property: [Value-1, Value-2, …, Value-n]</b></p>\n<p>Example: <b>DeviceAffectedByIncident.DisplayLabel: [SERV02SD059, SERV02SD063]</b></p>\n</td>\n<td>\n<p>Set relationship to a list of related records specified by the values of a property on the related records. The relationship side of RelationName corresponding to the related entities must be specified (&lt; = left side, &gt; = right side).</p>\n<p>Syntax: <b>RelationName(&lt;|&gt;).Property\": [Value-1, Value-2, …, Value-n]</b></p>\n<p>Example: <b>IncidentCausedByIncident&lt;.Category: [12345, 12346]</b></p>\n</td>\n</tr>\n<tr>\n<td>Related record related property value</td>\n<td>\n<p>Set relationship to a related record specified by the value of a related property on the related record. (RelatedEntityRelationName must be a one to one or one to many relationship of the related record.)</p>\n<p>Syntax: <b>RelationName.RelatedEntityRelationName.Property :Value</b></p>\n<p>Example: <b>RegisteredForActualService.SupportLevel1Group.Name: CAB Group</b></p>\n</td>\n<td>\n<p>Set relationship to a list of related records specified by the values of a related property of the related records. (RelatedEntityRelationName must be a one to one or one to many relationship of the related record.)</p>\n<p>Syntax: <b>RelationName.RelatedEntityRelationName.Property: [Value-1, Value-2, …, Value-n]</b></p>\n<p>Example: <b>DeviceAffectedByIncident.SupportLevel1Group.Name: [CAB Group]</b></p>\n</td>\n<td>\n<p>Set relationship to a list of related records specified by the values of a related property on the related records. (RelatedEntityRelationName must be a one to one or one to many relationship of the related record.) The relationship side of RelationName corresponding to the related entities must be specified (&lt; = left side, &gt; = right side).</p>\n<p>Syntax: <b>RelationName(&lt;|&gt;).RelatedEntityRelationName.Property: [Value-1, Value-2, …, Value-n]</b></p>\n<p>Example: <b>IncidentCausedByIncident&lt;.Category.DisplayLabel: [Category-1, Category-2]</b></p>\n</td>\n</tr>\n</tbody>\n</table>\n<h2 class=\"mw-headline\" id=\"Update_record\">Update record</h2>\n<p>Enter the following POST request URI:</p>\n<div class=\"example\">\n<p>https://&lt;serverAddress&gt;/rest/&lt;tenant-id&gt;/ces</p>\n</div>\n<p>There are no parameters for this URI.</p>\n<p>To update a record, the Operation field must be set to any valid operation value except <b>Create</b>.</p>\n<p>For example, enter the REST call with the following JSON body to update incident records:</p>\n<pre> {\n    \"entities\": [{\n        \"entity_type\": \"Incident\",\n        \"properties\": {\n            \"Id\": \"10034\",\n            \"DisplayLabel\": \"This incident is updated from external system.\",\n            \"Description\": \"Update of the Description of incident\",\n            \"ImpactScope\": \"SingleUser\",\n            \"Urgency\": \"NoDisruption\",\n            \"RegisteredForActualService\": \"20135\",\n            \"Category.DisplayLabel\": \"Cloud\",\n            \"DeviceAffectedByIncident.DisplayLabel\": {\n                \"add\": [\n                    \"SERV18SD018\",\n                    \"SERV18SD019\"\n                ],\n                \"delete\": [\n                    \"SERV23SD090\"\n                ]\n            },\n            \"IncidentCausedByIncident&lt;\": {\n                \"add\": [\n                    \"20600\",\n                    \"20605\"\n                ]\n            },\n            \"IncidentCausedByIncident&gt;\": {\n                \"delete\": [\n                    \"20510\"\n                ]\n            },\n            \"IncidentAttachments\": \"{\\\"complexTypeProperties\\\":[{\\\"properties\\\":{\\\"id\\\":\\\"161ecd4d-0fa4-4a48-a9c8-12371561545e\\\",\\\"file_name\\\":\\\"attach1.txt\\\",\\\"file_extension\\\":\\\"txt\\\",\\\"size\\\":26,\\\"mime_type\\\":\\\"text/plain\\\",\\\"Creator\\\":\\\"devUser1\\\",\\\"LastUpdateTime\\\":1398389475854}},{\\\"properties\\\":{\\\"id\\\":\\\"90166d96-031f-46b8-9a6f-02067092a552\\\",\\\"file_name\\\":\\\"attach2.txt\\\",\\\"file_extension\\\":\\\"txt\\\",\\\"size\\\":32,\\\"mime_type\\\":\\\"text/plain\\\",\\\"Creator\\\":\\\"devUser1\\\",\\\"LastUpdateTime\\\":1398389674101}}]}\"\n        },\n        \"Comments\": [{\n            \"Name\": \"John Smith\",\n            \"Body\": \"Any updates?\",\n            \"CreatedTime\": \"April 24, 2014 5:30 PM PST\"\n        }],\n        \"ext_properties\": {\n            \"ExternalSystem\": \"SM\",\n            \"Operation\": \"Update\",\n            \"ExternalId\": \"IM20123\",\n            \"ExternalEntityType\": \"Incident\",\n            \"ExternalStatus\": \"Pending Vendor\",\n            \"URL\": \"&lt;optional URL to external system&gt;\"\n        }\n    }]\n}</pre>\n<p>The following is the response JSON:</p>\n<pre>    {\n\"entities\": [\n{\n\"entity\": {\n\"entity_type\": \"Incident\",\n\"properties\": {\n\"Id\": \"10034\",\n}\n},\n\"completion_status\": “OK”,\n\"operation\": \"UPDATE\",\n\"warningDetails\": […],\n\"errorDetails\": {…}\n}\n],\n\"meta”: {\n\"completion_status\": \"OK\",\n\"errorDetails\": {…}\n}\n}</pre>\n<p><b>Comments</b></p>\n<p>You can add comments to an Update call by including a Comments section in the request JSON. The <b>Name</b> and <b>CreatedTime</b> parameters under each comment must be provided as strings in any format. These strings aren't interpreted by Service Management but they are added to the body of the comment for identification purposes.</p>\n<p>Comments are always added as new comment records. Older comments can't be updated via this POST API. Comments submitted in a POST by a user aren't presented back to the same user as part of a GET response.</p>\n<p><b>Relationships</b></p>\n<p>When setting relationships in an Update call, the following options are supported:</p>\n<table>\n<tbody>\n<tr>\n<th></th>\n<th>One to one, One to many relationships</th>\n<th>Many to many asymmetric relationships</th>\n<th>Many to many relationships to records of the same type</th>\n</tr>\n<tr>\n<td>Related record ID</td>\n<td>\n<p>Update relationship to related record specified by ID or to null.</p>\n<p>Syntax: <b>RelationName:Id | null</b></p>\n<p>Example: <b>RegisteredForActualService: 2013</b>,<b>Category: null</b></p>\n</td>\n<td>\n<p>Update the existing set of related records by adding and/or deleting a list of related records specified by IDs. You can specify Add only, Delete only, or both.</p>\n<p>Syntax: <b>RelationName: {add: [Id-add-1, Id-add-2, …, Id-add-n], delete: [Id-del-1, Id-del-2, …, Id-del-m]}</b></p>\n<p>Example: <b>DeviceAffectedByIncident: {add: [11534, 11535, 11536], delete: [11537, 11538]}</b></p>\n</td>\n<td>\n<p>Update the existing set of related records by adding and/or deleting a list of related records specified by IDs. You can specify Add only, Delete only, or both. The relationship side of RelationName corresponding to the related records must be specified (&lt; = left side, &gt; = right side).</p>\n<p>Syntax: <b>RelationName: {add: [Id-add-1, Id-add-2, …, Id-add-n], delete: [Id-del-1, Id-del-2, …, Id-del-m]}</b></p>\n<p>Example: <b>IncidentCausedByIncident&lt;: {add : [12324, 12327], delete: [12328]}</b></p>\n</td>\n</tr>\n<tr>\n<td>Related record property value</td>\n<td>\n<p>Update relationship to a related record specified by a value of a property on the related record.</p>\n<p>Syntax: <b>RelationName.Property:Value</b></p>\n<p>Example: <b>RegisteredForActualService.DisplayLabel: Catalog</b></p>\n</td>\n<td>\n<p>Update the existing set of related records by adding and/or deleting a list of related records specified by the values of a property on the related records. You can specify Add only, Delete only, or both.</p>\n<p>Syntax: <b>RelationName.Property: {add: [Value-add-1, Value-add-2, …, Value-add-n], delete: [Value-del-1, Value-del-2, …, Value-del-m]}</b></p>\n<p>Example: <b>DeviceAffectedByIncident.DisplayLabel: {add: [SERV02SD059, SERV02SD063, SERV02SD064], delete: [SERV02SD065, SERV02SD066]}</b></p>\n</td>\n<td>\n<p>Update the existing set of related records by adding and/or deleting a list of related records specified by the values of a property on the related records. You can specify Add only, Delete only, or both. The relationship side of RelationName corresponding to the related entities must be specified (&lt; = left side, &gt; = right side).</p>\n<p>Syntax: <b>RelationName.Property: {add: [Value-add-1, Value-add-2, …, Value-add-n], delete: [Value-del-1, Value-del-2, …, Value-del-m]}</b></p>\n<p>Example: <b>IncidentCausedByIncident&lt;.Category: [12345, 12346]</b></p>\n</td>\n</tr>\n<tr>\n<td>Related record related property value</td>\n<td>\n<p>Update relationship to a related record specified by the value of a related property on the related record. (RelatedEntityRelationName must be a one-to-one or one-to-many relationship of the related record.)</p>\n<p>Syntax: <b>RelationName.RelatedEntityRelationName.Property :Value</b></p>\n<p>Example: <b>RegisteredForActualService.SupportLevel1Group.Name: CAB Group</b></p>\n</td>\n<td>\n<p>Update the existing set of related records by adding and/or deleting a list of related records specified by the values of a related property on the related records. (RelatedEntityRelationName must be a one-to-one or one-to-many relationship of the related record.)</p>\n<p>Syntax: <b>RelationName.RelatedEntityRelationName.Property: {add: [Value-add-1, Value-add-2, …, Value-add-n], delete: [Value-del-1, Value-del-2, …, Value-del-m]}</b></p>\n<p>Example: <b>DeviceAffectedByIncident.SupportLevel1Group.Name: {add:[CAB Group, ECAB Group], delete: [Change Manager Group]}</b></p>\n</td>\n<td>\n<p>Update the existing set of related records by adding and/or deleting a list of related records specified by the values of a related property on the related records. (RelatedEntityRelationName must be a one-to-one or one-to-many relationship of the related record.) The relationship side of RelationName corresponding to the related entities must be specified (&lt; = left side, &gt; = right side).</p>\n<p>Syntax: <b>RelationName.RelatedEntityRelationName.Property: {add: [Value-add-1, Value-add-2, …, Value-add-n], delete: [Value-del-1, Value-del-2, …, Value-del-m]}</b></p>\n<p>Example: <b>IncidentCausedByIncident&lt;.Category.DisplayLabel: {add: [Category-1, Category-2], delete: [Category-3]}</b></p>\n</td>\n</tr>\n</tbody>\n</table>\n<h2 class=\"mw-headline\" id=\"Add_attachments\">Add attachments</h2>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-tip-icon\"></div>\n<div class=\"admonition-content admonition-tip-content\"> For detailed steps to add attachments, see <a href=\"/doc/423/26.1/cg_caseexchangerest\" title=\"Attachments\">Attachments</a>.</div>\n</div>\n<p>To add attachments via the Case exchange REST service, you need to first upload the attachments via the attachment API. Enter the following POST request URI:</p>\n<div class=\"example\">\n<p><strong>https://&lt;serverAddress&gt;/rest/&lt;tenant-id&gt;/ces/attachment/</strong></p>\n<p>The \"Headers\" section must contain two specific headers:</p>\n<ul>\n<li><strong>Content-Type</strong>: Set it to \"multipart/form-data;boundary=YYYY\". The boundary in this example is set to “YYYY”, but any unique boundary may be used. Any change to this boundary must be reflected in the body of the request. </li>\n<li><strong>User-Agent</strong>: Set it to \"Apache-HttpClient/4.4.1\". This allows Postman to pass the authorization to Service Management based on a logged-in UI session. </li>\n</ul>\n<p>To authenticate, include an appropriate \"Cookie\" header containing the authentication token as described in <a href=\"/doc/423/26.1/connecttorestapi\" title=\"Connect to the REST API\">Connect to the REST API</a>.</p>\n</div>\n<p>The JSON body is as follows:</p>\n<pre>--YYYY\nContent-Disposition: form-data; name=\"files[]\"; filename=\"&lt;file-name&gt;\"\nContent-Type: &lt;media-type&gt;\n&lt;Attachment body (text or binary)&gt;\n\n--YYYY--\n</pre>\n<p>The following is an example of a response JSON:</p>\n<pre>{\n        \"eTag\":\"570b45f50d2cc11fc8de465bb6a1ac96\",\n\"contentLanguage\":\"\",\n\"lastModified\":1439876814727,\n\"contentMD5\":\"570b45f50d2cc11fc8de465bb6a1ac96\",\n\"contentType\":\"text/plain\",\n\"creator\":\"devUser1\",\n\"guid\":\"44067c4a-5c0a-4ca8-b2a8-b726af03d458\",\n\"name\":\"notes.txt\",\n\"serverTime\":1439876814856,\"contentEncoding\":\"\",\n\"expiredTimestamp\":1439963214773,\n\"success\":true,\n\"contentLength\":819,\"metadata\":[]\n}</pre>\n<p>Then, POST an update to the relevant property for the record type.</p>\n<p>For example, for incidents, run a POST call to update the <b>IncidentAttachments</b> property, with the attachment IDs returned by the attachment API for the newly added attachments.</p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">\n<p>You must always provide the full list of current attachments in the <b>IncidentAttachments</b> property, not only the ones that have just been added.</p>\n</div>\n</div>\n<p>To delete one or more attachments, POST an update to the <b>IncidentAttachments</b> property with the attachment to be deleted.</p>\n<h2 class=\"mw-headline\" id=\"Security\">Security</h2>\n<p><b>Configuration</b></p>\n<p>Each External system record must be configured with an Authorized User property. Only users with a tenant administrator role have permission to create or update External system records, which includes setting the Authorized User.</p>\n<p>To provide appropriate security, the following best practices are strongly recommended:</p>\n<ul>\n<li>Special Integration users should be created for external integrations. Do not use regular Service Management users.</li>\n<li>A different integration user should be used for each external integration.</li>\n<li>Integration users should be granted the minimum set of permissions necessary.</li>\n</ul>\n<p><b>Authentication</b></p>\n<p>As with other Service Management REST APIs, access to the Case exchange API requires authentication. Integration users must authenticate via the Authentication endpoint service:</p>\n<p><strong>/auth/authentication-endpoint/authenticate/token</strong></p>\n<p>For more information, see <a href=\"/doc/423/26.1/apirestauth\" title=\"Authentication endpoint service\">Authentication endpoint service</a>.</p>\n<p><b>Authorization</b></p>\n<p>Once authenticated, the Case exchange API is restricted to the set of Authorized Users for the External System records configured in Service Management. REST API calls from a non-authorized user are rejected.</p>\n<p>Furthermore, the separation between external integrations is also provided as follows:</p>\n<ul>\n<li>For GET calls, the authenticated user must match the Authorized User corresponding to the system URL parameter of the GET message. Therefore, each integration user is restricted to their own records only and can't retrieve the records of a different integration. </li>\n<li>For POST calls, the authenticated user must match the Authorized User defined in the <b>ExternalSystem</b> property under <b>ext_properties</b>. Therefore, each integration user can only create or update records in their own integration.</li>\n</ul>\n<p>By configuring integration users with the minimum permissions necessary, you also ensure that their access is limited to the Case exchange API. In particular, these users aren't permitted to directly access the EMS API, and they must do it by using the Case Exchange API.</p>\n<h2 class=\"mw-headline\" id=\"Related_topics\">Related topics</h2>\n<ul>\n<li><a href=\"/doc/423/26.1/restapi\" title=\"SMAX:24.4/RESTAPI\">Overview of the REST API</a></li>\n<li><a href=\"/doc/423/26.1/connecttorestapi\" title=\"SMAX:24.4/ConnectToRESTAPI\">How to connect to the REST API</a></li>\n<li><a href=\"/doc/423/26.1/apirestauth\" title=\"SMAX:24.4/ApiRESTAuth\">Authentication endpoint service</a></li>\n<li><a href=\"/doc/423/26.1/bulkupdate\" title=\"SMAX:24.4/BulkUpdate\">Record bulk update and collection APIs</a></li>\n<li><a href=\"/doc/423/26.1/queryproperties\" title=\"SMAX:24.4/QueryProperties\">REST API queries</a></li>\n<li><a href=\"/doc/423/26.1/collectqueryprotocol\" title=\"SMAX:24.4/CollectQueryProtocol\">REST API collection query protocol</a></li>\n<li><a href=\"/doc/423/26.1/usecasesimport\" title=\"SMAX:24.4/UseCasesImport\">REST API use case scenario - import REST API</a></li>\n</ul>\n<div></div>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}