{
  "title": "Change nginx certificate",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>You can change the UD/UCMDB nginx secret certificate to your own certificate.</p>\n<p>If your certificate is ready, you need to export the server certificate and private key from your CA certificate, and then update the nginx secret certificate <b>nginx-default-secret</b> with the server certificate and private key.</p>\n<p>In the unlikely event that your organization can't provide you with certificates, an OMT script (<code>cdfcert</code>) can create a CA that can issue server certificates for all external resources. For instructions, see <a href=\"/doc/406/25.4/issuecertsexternalaccess\" title=\"Create a CA and issue certificates for external resources\">Create a CA and issue certificates for external resources</a>.</p>\n<p>When your server certificate and private keys are ready, perform the following steps to change nginx certificate:</p>\n<ol>\n<li>\n<p>Backup the nginx secret certificate</p>\n<pre>kubectl get secret nginx-default-secret -n &lt;<em>namespace</em>&gt; -o yaml &gt; nginx-default-secret_old.yaml</pre>\n</li>\n<li>\n<p>Change the nginx secret certificate</p>\n<pre>kubectl patch secret nginx-default-secret -p '{\"data\":{\"tls.crt\":\"'$(base64 -w 0 &lt;<em>server.crt</em>&gt;)'\",\"tls.key\":\"'$(base64 -w 0 &lt;<em>server.key</em>&gt;)'\"}}' -n &lt;<em>namespace</em>&gt;</pre>\n<p>Where, <code>&lt;server.crt&gt;</code> is your server certificate, <code>&lt;server.key&gt;</code> is the private key of your server.crt, and <code>&lt;namespace&gt;</code> is the UD/UCMDB namespace.</p>\n<p>Example:</p>\n<pre>kubectl patch secret nginx-default-secret -p '{\"data\":{\"tls.crt\":\"'$(base64 -w 0 server.crt)'\",\"tls.key\":\"'$(base64 -w 0 server.key)'\"}}' -n cms\n</pre>\n</li>\n</ol>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-caution-icon\"></div>\n<div class=\"admonition-content admonition-caution-content\"><b>Caution</b> Make sure you protect the backup secret file as it contains sensitive information.</div>\n</div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}