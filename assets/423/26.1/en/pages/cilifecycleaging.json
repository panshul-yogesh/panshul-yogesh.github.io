{
  "title": "Enhanced CI aging solution with Native SACM",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>If Native SACM is enabled, the enhanced CI aging feature enables you to manage the lifecycle of CIs. If Universal Discovery hasn't discovered a CI for a predefined period of time, the system sets its discovery state to <strong>Purgeable</strong> in UD/UCMDB rather than auto-purges it in the traditional way. Accordingly, the CI's <strong>missing</strong> flag will be automatically set and one email notification will be sent to the CI owner for confirmation, the owner can then decide if he/she needs to retire the purgeable CI either manually or automatically through workflows.</p>\n<p>Likewise, if a CI is provisioned by a Service Design through the DND integration, the CI will be created in UCMDB and then synchronized to Service Management. At this point, the provision state field is set to <strong>Provisioned</strong>, which indicates that it is provisioned by DND. Later when it is decommissioned by DND, the provision state will be set to <strong>Purgeable</strong>. Then, for Devices and System Elements, the CI will be automatically moved to the <strong>Retired</strong> or <strong>Ended</strong> phase respectively. For Service Components and Actual Services, you're also recommended to update the existing transition (<strong>Operate</strong> to <strong>Decommission</strong>) from manual to automatic transition when the provision state is detected to be set to <strong>Purgeable</strong>.</p>\n<p>The following tables list the UCMDB attributes and Service Management fields introduced for this feature. </p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">UCMDB attribute name</th>\n<th scope=\"col\">Display name</th>\n<th scope=\"col\">Type</th>\n<th scope=\"col\">Note</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\n<p>metaphase</p>\n</td>\n<td>\n<p>MetaPhase</p>\n</td>\n<td>\n<p>String</p>\n</td>\n<td>\n<p>This is the <strong>MetaPhaseName </strong>value from Service Management. </p>\n</td>\n</tr>\n<tr>\n<td>\n<p>discovery_state</p>\n</td>\n<td>\n<p>Discovery State</p>\n</td>\n<td>\n<p>Enum</p>\n</td>\n<td>This value is controlled by UCMDB. If Universal Discovery (UD) detects the CI, this field will be set to <strong>Discovered</strong>. If UD hasn't detected the CI for a predefined period of time, this field will be set to <strong>Purgeable</strong>.  </td>\n</tr>\n<tr>\n<td>provision_state</td>\n<td>Provision State</td>\n<td>String</td>\n<td>This value is controlled by DND. If DND provisions the CI, this field will be set to <strong>Provisioned</strong>. When DND decommissions the CI, this field will be set to <strong>Purgeable</strong>.</td>\n</tr>\n</tbody>\n</table>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">Service Management field name</th>\n<th scope=\"col\">Display name</th>\n<th scope=\"col\">Applicable record types</th>\n<th scope=\"col\">Note</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\n<p>MetaPhaseName</p>\n</td>\n<td>\n<p>Metaphase name</p>\n</td>\n<td>\n<ul>\n<li>Actual Service</li>\n<li>Service Component</li>\n<li>System Element</li>\n<li>Device</li>\n</ul>\n</td>\n<td>Service Management assigns a metaphase name to all CIs.</td>\n</tr>\n<tr>\n<td>\n<p>DiscoveryState</p>\n</td>\n<td>\n<p>Discovery state</p>\n</td>\n<td>\n<ul>\n<li>Actual Service</li>\n<li>Service Component</li>\n<li>System Element</li>\n<li>Device</li>\n</ul>\n</td>\n<td>This is the discovery state synchronized from UCMDB.</td>\n</tr>\n<tr>\n<td>ProvisionState</td>\n<td>Provision State</td>\n<td>\n<ul>\n<li>Actual Service</li>\n<li>Service Component</li>\n<li>System Element</li>\n<li>Device</li>\n</ul>\n</td>\n<td>This is the provision state indicated by DND.</td>\n</tr>\n</tbody>\n</table>\n<h2>How does the enhanced CI aging work with CI topology</h2>\n<p>Once a CI has entered the End of Life metaphase, it disappears from the CI Topology widget, the Impact Analysis widget, and the dropdown list in a field that has a \"Define suggested values for entity link based on filter\" business rule defined; however, the CI is still available on the CI grid list in the Service Management agent interface.</p>\n<ol>\n</ol>\n<h2>How to enable this feature</h2>\n<p>To enable the enhanced CI aging solution, see <a href=\"/doc/423/26.1/enableenhancedciaging\" title=\"Enable enhanced CI aging\">Enable enhanced CI aging</a>. </p>\n<h2>How to use this feature</h2>\n<p>The following is an example use case. This is not a mandatory procedure, you can adjust the configurations based on your business needs.</p>\n<h3>Configure the CI workflow</h3>\n<p>For actual service and service component in Service Management Studio, configure the workflow as follows:</p>\n<p>Update the existing transition (<strong>Operate</strong> to <strong>Decommission</strong>) from manual to automatic transition when the provision state is detected to be set to <strong>Purgeable</strong> (with the condition entity.ProvisionState == 'Purgeable'). The CI is moved to the <strong>Decommission</strong> phase because DND has already decommissioned the CI when its provision state was set to <strong>Purgeable</strong> and you can't add a new automatic transition (instead, you can change the current manual transition to automatic transition) due to the limitation <a href=\"/doc/423/25.1/addtransition#Limitation\" title=\"Add a transition in a process\">Add a transition in a process</a>.</p>\n<h3>Add columns to the CI grid view</h3>\n<p>You can add the <strong>Metaphase name</strong>, <strong>Discovery state</strong>, and <strong>Provision State</strong> fields to the CI grid view so that you can easily identify Purgeable CIs. </p>\n<div><a class=\"image\" href=\"/file/images/0/08/CI_grid.PNG\" title=\"/file/images/0/08/CI_grid.PNG\"> <img alt=\"CI_grid\" border=\"0\" file=\"/mediawiki/images/0/08/CI_grid.PNG\" height=\"152\" hspace=\"0\" src=\"../../../images/CI_grid_d039b36c.png\" style=\"width: 800px; height: 152px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></div>\n<h3>View the metaphase tag in UCMDB UI</h3>\n<p>Native SACM automatically synchronizes the metaphase name value to the UD/UCMDB. </p>\n<ol>\n<li>Open the CI in the agent interface. For example, open a Device record.</li>\n<li>Click <strong>Explore</strong> from a CI record to open the CI details form in the UCMDB UI.</li>\n<li>Check that the <strong>Meta Phase</strong> tag in the Properties pane has a value, for example, <strong>mpInUse</strong>. </li>\n</ol>\n<h3>View the discovery state in UCMDB and Service Management</h3>\n<p>If a CI has a Meta Phase tag and Universal Discovery hasn't discovered it for a predefined number of days, UCMDB automatically sets the discovery state of the CI to <strong>Purgeable</strong>. </p>\n<p>Native SACM synchronizes the CI's discovery state to Service Management, sets its missing flag to true, and sends one email notification to the CI's owner. If you confirm that the missing CI should be moved to the phase after <strong>In use</strong> or <strong>Operate</strong>, you can move it with the manual transition or customized automatic transition.</p>\n<div><a class=\"image\" href=\"/file/images/b/bc/view_discovery_state_ucmdb_smax.png\" title=\"/file/images/b/bc/view_discovery_state_ucmdb_smax.png\"> <img alt=\"view_discovery_state_ucmdb_smax\" border=\"0\" file=\"/mediawiki/images/b/bc/view_discovery_state_ucmdb_smax.png\" height=\"154\" hspace=\"0\" src=\"../../../images/view_discovery_state_ucmdb_smax_0e044c4f.png\" style=\"width:800px;height:154px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"800\"/> </a></div>\n<h3>View the provision state in Service Management</h3>\n<p>When a user subscribes to a service design aggregated offering from DND, its corresponding software/hardware CIs are created in UCMDB and instantly synchronized back to Service Management (by Native SACM). As long as the subscription is in use, these software/hardware CIs' provision states stay <strong>Provisioned</strong>. Later when the user cancels the subscription, as soon as the cancel request is completed, these CIs' provision states become <strong>Purgeable, </strong>and will be automatically moved to the <strong>Retire</strong> (for Device) or <strong>Ended</strong> (for System Element) phase. </p>\n<div><a class=\"image\" href=\"/file/images/8/8c/CI_DND_purgeable.PNG\" title=\"/file/images/8/8c/CI_DND_purgeable.PNG\"> <img alt=\"CI_DND_purgeable\" border=\"0\" file=\"/mediawiki/images/8/8c/CI_DND_purgeable.PNG\" height=\"145\" hspace=\"0\" src=\"../../../images/CI_DND_purgeable_7034c4da.png\" style=\"width: 800px; height: 145px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></div>\n<h3>Verify the CI metaphase in the workflow</h3>\n<p>If you have moved the CI to the <strong>End of Life</strong> or <strong>Final </strong>metaphase by either manual or auto transition, open the CI record, and check the CI's phase on the workflow tab. </p>\n<div><a class=\"image\" href=\"/file/images/3/37/SMA202205_CI_aging_end.png\" title=\"/file/images/3/37/SMA202205_CI_aging_end.png\"> <img alt=\"SMA202205_CI_aging_end\" border=\"0\" file=\"/mediawiki/images/3/37/SMA202205_CI_aging_end.png\" height=\"282\" hspace=\"0\" src=\"../../../images/SMA202205_CI_aging_end_86d061c8.png\" style=\"width: 800px; height: 282px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></div>\n<h3>Check the CI Topology widget</h3>\n<p>If it is a related CI of another CI and has entered the <strong>End of Life</strong> or <strong>Final </strong>metaphase, it disappears from the other CI's topology widget. To verify this, you can click the <strong>Related CIs </strong>tab of that CI. </p>\n<p>The following example figure shows the topology when the CI is in use.</p>\n<div><a class=\"image\" href=\"/file/images/3/3e/SMA202205_CI_aging_topology_before.png\" title=\"/file/images/3/3e/SMA202205_CI_aging_topology_before.png\"> <img alt=\"SMA202205_CI_aging_topology_before\" border=\"0\" file=\"/mediawiki/images/3/3e/SMA202205_CI_aging_topology_before.png\" height=\"689\" hspace=\"0\" src=\"../../../images/SMA202205_CI_aging_topology_before_2e699412.png\" style=\"width:659px;height:689px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"659\"/> </a></div>\n<p>The following example figure shows the topology when the CI is End of Life. </p>\n<div><a class=\"image\" href=\"/file/images/b/ba/SMA202205_CI_aging_topology_after.png\" title=\"/file/images/b/ba/SMA202205_CI_aging_topology_after.png\"> <img alt=\"SMA202205_CI_aging_topology_after\" border=\"0\" file=\"/mediawiki/images/b/ba/SMA202205_CI_aging_topology_after.png\" height=\"679\" hspace=\"0\" src=\"../../../images/SMA202205_CI_aging_topology_after_7f8594f9.png\" style=\"width:624px;height:679px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"624\"/> </a></div>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}