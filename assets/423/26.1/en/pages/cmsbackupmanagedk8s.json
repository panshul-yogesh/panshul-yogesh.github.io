{
  "title": "Back up UD/UCMDB (managed Kubernetes)",
  "content": "<div class=\"mw-parser-output\"><p>To back up the containerized UD/UCMDB deployment before the upgrade, do the following:</p>\n<ol>\n<li>\n<p>Back up cms-secret.</p>\n<p>Run the following command:</p>\n<pre>kubectl get secret cms-secret -o yaml -n &lt;UD/UCMDB NAMESPACE&gt; &gt; &lt;UD/UCMDB SECRET BACKUP FILE&gt; </pre>\n<p>For example,</p>\n<pre>kubectl get secret cms-secret -o yaml -n ucmdb-prod &gt; secret_backup.yaml </pre>\n</li>\n<li>\n<p>Back up external databases.</p>\n<p>For specific database backup instructions, refer to the documentation of the specific database. </p>\n<p>For instructions about backing up the PostgreSQL database, see the following: <br/>\n<a href=\"https://www.postgresql.org/docs/12/backup.html\" title=\" \">https://www.postgresql.org/docs/12/backup.html</a> (PostgreSQL version 12)<br/>\n<a href=\"https://www.postgresql.org/docs/13/backup.html\" title=\" \">https://www.postgresql.org/docs/13/backup.html</a> (PostgreSQL version 13)<br/>\n<a href=\"https://www.postgresql.org/docs/14/backup.html\" title=\" \">https://www.postgresql.org/docs/14/backup.html</a> (PostgreSQL version 14)<br/>\n<a href=\"https://www.postgresql.org/docs/15/backup.html\" rel=\"noreferrer noopener\" target=\"_blank\" title=\"  \">https://www.postgresql.org/docs/15/backup.html</a> (PostgreSQL version 15)</p>\n</li>\n<li>\n<p>Back up the configuration file that you are using. For example, <b>my-values.yaml</b> file. <br/>\n\tIf you don't remember the path of your custom <strong>my-values.yaml</strong> file, run the following command to create a copy of that file in the current directory:</p>\n<pre><code>helm get values &lt;UD/UCMDB RELEASE NAME&gt; -n &lt;UD/UCMDB NAMESPACE&gt; &gt; my-values.yaml</code></pre>\n</li>\n<li>\n<p>Back up the <b>ucmdb-pv.yaml</b> file. For example:</p>\n<pre>cp ucmdb-pv.yaml ucmdb-pv.yaml.bak</pre>\n</li>\n<li>\n<p>Back up the UCMDB Gateway data:</p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">\n<p>Component</p>\n</th>\n<th scope=\"col\">\n<p>NFS volume name</p>\n</th>\n<th scope=\"col\">\n<p>Directory</p>\n</th>\n<th scope=\"col\">\n<p>Description</p>\n</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\n<p>UCMDB Gateway</p>\n</td>\n<td>\n<p>ucmdb-data-volume</p>\n</td>\n<td>\n<p>&lt;ucmdb-data-volume&gt;/cms-gateway</p>\n</td>\n<td>\n<p>Data generated by the UCMDB Gateway</p>\n</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ol></div>",
  "modifiedon": "2025-10-24 08:51:12"
}