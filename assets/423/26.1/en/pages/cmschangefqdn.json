{
  "title": "Change UD/UCMDB FQDN",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>This topic describes how you can change the external access host FQDN of the containerized UD/UCMDB in a deployment using embedded Kubernetes or managed Kubernetes.</p>\n<h2>Change FQDN for a deployment using embedded Kubernetes </h2>\n<p>Perform the following tasks to change FQDN for UD/UCMDB deployed in an embedded Kubernetes environment.</p>\n<h3>Update my-values.yaml</h3>\n<p>Navigate to your custom <strong>my-values.yaml</strong> file with properties configured for the UD/UCMDB deployment, and then update the <strong>global.externalAccessHost</strong> parameter value with the new FQDN.</p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>global.externalAccessHost</td>\n<td>Yes</td>\n<td>Set the value to the new FQDN</td>\n<td></td>\n<td>cms.new.com</td>\n</tr>\n</tbody>\n</table>\n<h3>Update UD/UCMDB deployment</h3>\n<p>Run the following command to trigger the UD/UCMDB upgrade:</p>\n<pre>helm upgrade &lt;<em>UD/UCMDB RELEASE NAME</em>&gt; &lt;<em>UD/UCMDB CHART FILE</em>&gt; --namespace &lt;<em>NAMESPACE</em>&gt; -f &lt;<em>VALUES YAML FILE</em>&gt;</pre>\n<p>Where,</p>\n<ul>\n<li><code>&lt;<em>UD/UCMDB RELEASE NAME</em>&gt;</code> is the release name to be created by Helm for the UD/UCMDB deployment.</li>\n<li><code>&lt;<em>UD/UCMDB CHART FILE</em>&gt;</code> is the new tar file containing the UD/UCMDB installation charts.</li>\n<li><code>&lt;<em>NAMESPACE</em>&gt;</code> is the unique namespace of the UD/UCMDB deployment.</li>\n<li><code>&lt;<em>VALUES YAML FILE</em>&gt;</code> is your custom <strong>my-</strong><b>values.yaml </b>file with new FQDN.</li>\n</ul>\n<p>For example:</p>\n<pre>helm upgrade ucmdb-prod ucmdb-helm-charts/charts/ucmdb-1.xx.x-xxx+2x.x.x.tgz --namespace ucmdb-prod -f my-values.yaml</pre>\n<h3></h3>\n<h3>Replace nginx certificate with new FQDN</h3>\n<p>Follow the instructions in <a href=\"/doc/423/26.1/changenginxcertificate\">Change nginx certificate</a> to replace the nginx certificate with the new FQDN. Then you can access UD/UCMDB via the new FQDN.</p>\n<h2>Change FQDN for a deployment using managed Kubernetes</h2>\n<p>Perform the following tasks to change FQDN for UD/UCMDB deployed in a deployment using managed Kubernetes.</p>\n<h3 id=\"AWS_.28classical_AWS_and_EKS.29\">Prerequisites for AWS (with EKS)</h3>\n<p>Bind the new FQDN with the Application Load Balancer. Do the following:</p>\n<ol>\n<li>Log in to the AWS Management Console with your AWS account.</li>\n<li>Navigate to <b>All services</b> &gt; <b>Networking &amp; Content Delivery</b> &gt; <b>Route 53</b> &gt; <b>Hosted Zone</b>.</li>\n<li>Click your domain and then click your record set.</li>\n<li>On the <b>Alias</b> tab, click <b>Yes</b>.</li>\n<li>On the <b>Alias Target</b> tab, type the created load balancer's DNS name, for example, <strong>dualstack.eks-alb-wj-347689543.us-west-2.elb.amazonaws.com</strong>.</li>\n<li>On the <b>Evaluate Target Health</b> tab, click <b>Yes</b>.</li>\n<li>Leave other settings as is, and click <b>Save Record Set</b>.</li>\n<li>\n<p>Import the self-signed certificate to AWS Certificate Manager (ACM), and replace the application load balancer certificate bound in the listener.</p>\n<div class=\"Admonition_Important\"><span class=\"autonumber\">Important </span> Currently, services integrated with AWS Certificate Manager only support the <code>RSA_1024</code> and <code>RSA_2048</code> algorithms.</div>\n<p>To do this, follow these steps:</p>\n<ol>\n<li>Run the following command on the bastion node (managed Kubernetes) to import the key pair and CA to ACM. This step is required only if you want to use an external certificate (not required if using AWS issued certificate).\n\t\t<pre>aws acm import-certificate --certificate file://&lt;server.crt&gt; --private-key file://&lt;server.key&gt; --certificate-chain file://&lt;ca.crt&gt; --region &lt;region&gt;\n</pre>\n</li>\n<li>Run the following commands to create a <strong>cms-ingress-new.yaml </strong>file based on your latest <strong>cms-ingress.yaml</strong>.\n\t\t<pre>cd &lt;ingress_yaml_folder&gt;\ncp cms-ingress.yaml cms-ingress-new.yaml</pre>\n</li>\n<li>\n<p>Modify the following parameters in <strong>cms-ingress-new.yaml </strong>to configure the new certificate arn and the new FQDN.</p>\n<pre>alb.ingress.kubernetes.io/certificate-arn: &lt;new_cert_arn&gt;\n...\nspec:\n  tls:\n  - hosts:\n    - &lt;new_fqdn&gt;</pre>\n</li>\n<li>Run the following command to apply the new yaml file:\n\t\t<pre>kubectl apply -f cms-ingress-new.yaml</pre>\n</li>\n<li>Verify whether the default SSL cert is set to the new certificate. To do this, go to EC2 &gt; <strong>Load Balancers,</strong> select the target ALB, and then check <strong>Default SSL cert</strong>.</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"Azure_.28AKS.29\">Prerequisites for Azure (AKS)</h3>\n<p>Follow the instructions below to replace the application gateway certificate:</p>\n<p>Before you begin, do the following:</p>\n<p><span id=\"cke_bm_1623C\" style=\"display: none;\"> </span></p>\n<ol>\n<li>Log in to the bastion node, and then run the following command to change the SSL certificate to PFX format. \n\t<pre>openssl pkcs12 -export -out certificate.pfx -inkey server.key -in server.crt</pre>\n</li>\n<li>Rename your root CA certificate to <strong>.cer</strong> format. For example, change <strong>ca.crt</strong> to <strong>ca.cer</strong>. </li>\n</ol>\n<p>Then, replace the certificate as follows:</p>\n<ol>\n<li>Log in to the Azure portal, and navigate to your application gateway.</li>\n<li>Click the listener for port 443, and then click<strong> </strong><strong>Create new</strong> under <strong>Choose a certificate</strong>. Select your <strong>certificate.pfx</strong> file to upload it. </li>\n<li>Click <strong>Backend settings</strong>, and update the http-settings for port 443 as follows:\n\t<ol>\n<li>Make sure that your root CA certificate is renamed to <strong>.cer</strong> format. Replace the http-settings ssl certificate with the root CA certificate(<strong>&lt;ca.cer&gt;</strong>). </li>\n<li>In the <strong>Override with specific domain name</strong> field, change the value to the new FQDN.</li>\n</ol>\n</li>\n<li>Locate the health probe for port 443, and update the <strong>Host</strong> value to the new FQDN.</li>\n<li>Rebind the new FQDN to the IP address of the application gateway. </li>\n</ol>\n<h3>Update my-values.yaml (managed Kubernetes)</h3>\n<p>Navigate to your custom <strong>my-values.yaml</strong> file with properties configured for the UD/UCMDB deployment, and update the <strong>global.externalAccessHost</strong> parameter value with the new FQDN.</p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>global.externalAccessHost</td>\n<td>Yes</td>\n<td>Set the value to the new FQDN</td>\n<td></td>\n<td>cms.new.com</td>\n</tr>\n</tbody>\n</table>\n<h3>Update UD/UCMDB deployment (managed Kubernetes)</h3>\n<p>Perform the following to trigger the UD/UCMDB upgrade:</p>\n<ol>\n<li>On the bastion node, navigate to the OMT installation directory:\n\t<pre>cd OMT_External_K8s_2x.x-xxx/bin</pre>\n</li>\n<li>Delete the UD/UCMDB secret (<b>nginx-default-secret</b>) to refresh the certificate for the new FQDN:\n\t<pre>kubectl delete secret nginx-default-secret --namespace &lt;NAMESPACE&gt;</pre>\n</li>\n<li>Run the following command to update the UD/UCMDB deployment:\n\t<pre>./helm upgrade &lt;UD/UCMDB RELEASE NAME&gt; &lt;UD/UCMDB CHART FILE&gt; --namespace &lt;NAMESPACE&gt; -f &lt;VALUES YAML FILE&gt;</pre>\n<p>Where,</p>\n<ul>\n<li><code>&lt;<em>UD/UCMDB RELEASE NAME</em>&gt;</code> is the release name to be created by Helm for the UD/UCMDB deployment.</li>\n<li><code>&lt;<em>UD/UCMDB CHART FILE</em>&gt;</code> is the new tar file containing the UD/UCMDB installation charts.</li>\n<li><code>&lt;<em>NAMESPACE</em>&gt;</code> is the unique namespace of the UD/UCMDB deployment.</li>\n<li><code>&lt;<em>VALUES YAML FILE</em>&gt;</code> is your custom <b>values.yaml </b>file with new FQDN.</li>\n</ul>\n<p>For example:</p>\n<pre>./helm upgrade ucmdb-prod ucmdb-helm-charts/charts/ucmdb-1.xx.x-xxx+2x.x.x.tgz --namespace ucmdb-prod -f my-values.yaml</pre>\n</li>\n</ol>\n<h2>Reconfigure integrations after the UD/UCMDB FQDN has changed</h2>\n<p>After the UD/UCMDB FQDN has changed, reconfigure the following integration settings. </p>\n<h3>Update the UCMDB Gateway URL for Native SACM and SAM</h3>\n<p>When UD/UCMDB is deployed with Service Management as a secondary deployment, follow these steps to reconfigure the <b>UCMDB gateway service </b>in <b>Application settings</b> in Service Management for Native SACM and SAM:</p>\n<ol>\n<li>Log in to <b>Suite Administration</b> of Service Management as <b>suite-admin. </b></li>\n<li>In tenant settings, go to the <b>Application settings</b> tab.</li>\n<li>Update <b>UCMDB gateway service</b> value with the UCMDB Gateway server URL based on the new FQDN in the format: <b>http(s)://&lt;New_UD/UCMDB_FQDN&gt;:&lt;port&gt;/cms-gateway</b></li>\n</ol>\n<h3>Reconfigure the UCMDB and OO download links in Service Management UI</h3>\n<p>If you have customized these download links in the Service Management UI, reconfigure them with the new UD/UCMDB FQDN. </p>\n<p>For details, see <a href=\"/doc/423/26.1/customizeucmdbdownloadlinks\">Enable direct download of UD Probe and UCMDB Local Client from the Service Management UI</a> and <a href=\"/doc/423/26.1/customizeoodownloadlinks\">Enable direct download of OO RAS and OO Workflow Designer from the Service Management UI</a>.</p>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}