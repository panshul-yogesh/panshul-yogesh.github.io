{
  "title": "Upgrade UD/UCMDB (managed Kubernetes)",
  "content": "<div class=\"mw-parser-output\"><p>Perform the following tasks to upgrade UD/UCMDB deployment.</p><div class=\"admonition\"><div class=\"admonition-icon admonition-important-icon\"></div><div class=\"admonition-content admonition-important-content\"><div><p>When you upgrade the containerized UD/UCMDB, the system will have downtime for over 10 minutes based on the number of customers and the CI volume of these customers.</p></div></div></div><h2 id=\"Check_the_certificates_before_CMS_upgrade\">Download the new UD/UCMDB chart package</h2><div><span class=\"snippet-start\" data-sname=\"423-25.4-423-25.3-DownloadCmsChartsEks\"></span><div class=\"transcontent lst-SMAX:25.1/CmsWithSmaxDownloadCmsChartPackage\">\n<p>You need to download the UD/UCMDB chart package from the Software website to a control plane node (embedded Kubernetes) or the bastion node (managed Kubernetes).</p>\n<p>The </p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>The product version is <span class=\"versionvariable-start\" data-nv=\"product_version\"></span>25.3<span class=\"versionvariable-end\"></span> on this page; <strong>&lt;nn.n &gt;</strong> is used to indicate the version number. For example, <b>UCMDB_Helm_Chart-&lt;nn.n&gt;</b> <b>.zip</b></div></div></div>\n<p>To do this, follow these steps:</p>\n<ol>\n<li>Download the <b>UCMDB_Helm_Chart- nn.n.zip</b> file from the <a href=\"https://sld.microfocus.com/mysoftware/index\" title=\"Software Licenses and Downloads\">Software Licenses and Downloads</a> website.</li>\n<li>Copy the file to a temporary directory. </li>\n<li>\n<p>Unzip the UD/UCMDB installation package:</p>\n<pre>unzip UCMDB_Helm_Chart-<span class=\"_MF_Product_Version\">&lt;nn.n&gt;</span>.zip</pre>\n<p>The unzipped files are as follows:</p>\n<ul>\n<li><code>ucmdb-helm-charts-<span class=\"_MF_Product_Version\">&lt;nn.n&gt;</span>.tgz</code></li>\n<li><code>ucmdb-helm-charts-<span class=\"_MF_Product_Version\">&lt;nn.n&gt;</span>.tgz.sig</code></li>\n<li><code>Read_Me.pdf</code></li>\n</ul>\n</li>\n<li>(Optional) Verify the UD/UCMDB installation package. Skip this step if you don't want to verify the package. <br/>\n\tTo verify the UD/UCMDB installation package, visit <a href=\"https://portal.microfocus.com/s/article/KM000003948?language=en_US\" title=\"KM000003948\">KM000003948</a> to download the attached compressed tar file and get detailed steps to verify signatures. Unzip the downloaded file, locate the <code>ot-package-sign.pub</code> key, and use it to verify the package.</li>\n<li>Untar the UD/UCMDB chart package:\n\t<pre>cd UCMDB_Helm_Chart-<span class=\"_MF_Product_Version\">nn.n</span>/\ntar -xvzf ucmdb-helm-charts-<span class=\"_MF_Product_Version\">nn.n</span>.tgz</pre>\n<p>The following table describes the essential files inside the UD/UCMDB chart package:</p>\n<table>\n<caption>UD/UCMDB chart package</caption>\n<thead>\n<tr>\n<th scope=\"col\">\n<p>Name</p>\n</th>\n<th scope=\"col\">\n<p>File</p>\n</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\n<p>UCMDB helm chart file</p>\n</td>\n<td>\n<p>UCMDB_Helm_Chart-<span class=\"_MF_Product_Version\">&lt;nn.n&gt;</span>/ucmdb-helm-charts/charts/ucmdb-1.nn.n-nnn+2n.n.n.tgz</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>Example PV yaml file</p>\n</td>\n<td>\n<p>UCMDB_Helm_Chart-<span class=\"_MF_Product_Version\">&lt;nn.n&gt;</span>/ucmdb-helm-charts/samples/ucmdb-pv.yaml</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>Example values.yaml file</p>\n</td>\n<td>\n<p>For standalone containerized UD/UCMDB environment:</p>\n<p>UCMDB_Helm_Chart-<span class=\"_MF_Product_Version\">25.1</span>/ucmdb-helm-charts/samples/values.yaml</p>\n<p>For shared IdM (suite IdM) environment (non-FIPS mode):</p>\n<p>UCMDB_Helm_Chart-<span class=\"_MF_Product_Version\">25.1</span>/ucmdb-helm-charts/samples/values-with-smax.yaml</p>\n<p>For shared IdM (suite IdM) environment (FIPS mode):</p>\n<p>UCMDB_Helm_Chart-<span class=\"_MF_Product_Version\">25.1</span>/ucmdb-helm-charts/samples/values-fips-with-smax.yaml</p>\n</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ol>\n</div>\n<span class=\"snippet-end\" data-sname=\"423-25.4-423-25.3-DownloadCmsChartsEks\"></span></div><h2 id=\"Download_new_CMS_charts\">Download and upload new UD/UCMDB images</h2><p>Before you upgrade UD/UCMDB, you need to download the UD/UCMDB images from Docker Hub or other registries and then upload the images to your registry.</p><ul><li>For EKS, see <a href=\"/doc/423/26.1/downloadcontainerimagescms\" title=\"Download and upload container images for UD/UCMDB\">Download and upload container images for UD/UCMDB (EKS)</a>.</li><li>For AKS, see <a href=\"/doc/423/26.1/downloadcontainerimagescmsaks\" title=\"Download container images (AKS)\">Download and upload container images (AKS)</a>.</li><li>For OpenShift, see <a href=\"/doc/423/26.1/cmswithsmaxdownloadcontainerimagesopenshift\" title=\"Download container images for UD/UCMDB (OpenShift)\">Download container images (OpenShift)</a> and <a href=\"/doc/423/26.1/cmswithsmaxuploadinstallationimagesopenshift\" title=\"Upload container images for UD/UCMDB to a registry (OpenShift)\">Upload container images (OpenShift)</a>.</li></ul><h2>Perform UD/UCMDB version update</h2><p>To upgrade UD/UCMDB to the current release, follow these steps:</p><ol><li>On the bastion node, navigate to the OMT installation directory:\n\t<pre>cd OMT_External_K8s_2n.n-nnn/bin</pre></li><li><p>Run the following command to upgrade UD/UCMDB: </p><pre>./helm upgrade &lt;<em>UD/UCMDB RELEASE NAME</em>&gt; &lt;<em>UD/UCMDB CHART FILE</em>&gt; -n &lt;<em>UD/UCMDB NAMESPACE</em>&gt; -f &lt;VALUES YAML FILE&gt;</pre><p>Where,</p><ul><li><code>&lt;<em>UD/UCMDB RELEASE NAME</em>&gt;</code>is the release name of the UD/UCMDB deployment that you specified when installing UD/UCMDB.</li><li><code>&lt;<em>UD/UCMDB CHART FILE</em>&gt;</code> is the new tar file containing the UD/UCMDB installation charts.</li><li><code>&lt;<em>UD/UCMDB NAMESPACE</em>&gt;</code> is the unique namespace of the UD/UCMDB deployment.</li><li><code>&lt;<em>VALUES YAML FILE</em>&gt;</code> is your custom <strong>my-v</strong><b>alues.yaml </b>file with properties configured for the UD/UCMDB deployment you back up in the previous step, see <a href=\"/doc/423/26.1/cmsbackupmanagedk8s\" title=\"Back up UD/UCMDB (managed Kubernetes)\">Back up UD/UCMDB (managed Kubernetes)</a>.</li></ul><p>For example:</p><pre>./helm upgrade ucmdb-prod UCMDB_Helm_Chart-2x.x/ucmdb-helm-charts/charts/ucmdb-1.nn.n-nnn+2n.n.n.tgz -n ucmdb-prod -f my-values.yaml</pre><div class=\"admonition\"><div class=\"admonition-icon admonition-tip-icon\"></div><div class=\"admonition-content admonition-tip-content\"><div> You can run the above command with the <code>--dry-run</code> argument to simulate an upgrade.</div></div></div></li><li><p>Verify the UD/UCMDB deployment. </p><ul><li>For EKS, see <a href=\"/doc/423/26.1/installcmswithsmaxverifyeks\" title=\"Verify the UD/UCMDB installation\">Verify the UD/UCMDB installation (EKS)</a>.</li><li>For AKS, see <a href=\"/doc/423/26.1/installcmswithsmaxverifyaks\" title=\"Verify the UD/UCMDB installation\">Verify the UD/UCMDB installation (AKS)</a>.</li><li>For OpenShift: see <a href=\"/doc/423/26.1/installcmswithsmaxverifyopenshift\" title=\"Download container images for UD/UCMDB (OpenShift)\">Verify the UD/UCMDB installation (OpenShift)</a></li></ul></li><li><p>Access the <strong>UCMDB Server Status</strong> page (<strong>https://&lt;EXTERNAL_ACCESS_HOST&gt;:&lt;EXTERNAL_ACCESS_PORT&gt;/status</strong>) to make sure that the status is <strong>Fully Up</strong> for all customers. </p></li></ol></div>",
  "modifiedon": "2025-10-24 08:51:12"
}