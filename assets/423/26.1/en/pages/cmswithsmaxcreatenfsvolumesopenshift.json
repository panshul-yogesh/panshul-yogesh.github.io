{
  "title": "Configure NFS volumes for UD/UCMDB (OpenShift)",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>To save information such as configuration files, the information must be stored in a persistent volume provided by a Network File System (NFS). To install UD/UCMDB, you need to export NFS volumes to store the application data.</p>\n<p>The storage technology that provides NFS implementation must support the Kubernetes persistent mount option of ReadWriteMany. That means a storage volume can be mounted to multiple nodes in read/write mode in parallel.</p>\n<p>Each NFS exported volume must have the following settings:</p>\n<ul type=\"disc\">\n<li>rw</li>\n<li>sync</li>\n<li>\n<p>Be configured in the <strong>/etc/exports</strong> file with the following text:</p>\n<pre>/&lt;path to the shared folder on the NFS server&gt; (rw,sync,anonuid=&lt;user&gt;,anongid=&lt;fsGroup&gt;,root_squash)</pre>\n<p>Where the <code>&lt;user&gt;</code> and <code>&lt;fsGroup&gt;</code> need to be of the same values as those of the <strong>global.securityContext.user</strong> and <strong>global.securityContext.fsGroup</strong> parameters specified in the custom <strong>values.yaml</strong> file. For details, see <a href=\"/doc/423/26.1/cmswithsmaxcreateyamlopenshift\">Create a custom values.yaml file (OpenShift)</a>.</p>\n</li>\n<li>\n<p>Be configured with the following permissions:</p>\n<pre>chmod -R 755 &lt;path to the exported volume&gt;\nchown &lt;user&gt;:&lt;fsGroup&gt; &lt;path to the exported volume&gt;</pre>\n</li>\n</ul>\n<div class=\"Admonition_Note\"><span class=\"autonumber\">Note </span>\n<ul>\n<li>\n<p>The <code>&lt;user&gt;</code> and <code>&lt;fsGroup&gt;</code> are configured in the custom <strong>values.yaml</strong> file. These parameters are UID and GID that must be the same as the ones in the UD/UCMDB OpenShift project. See <a href=\"/doc/423/26.1/prepareopenshiftcms#Check_the_UID_and_GID\">Check the UID and GID</a>. For example, if the UID and GID range is <strong>1000590000/10000</strong>, you need to use \"<strong>1000590000</strong>\"<strong> </strong>as the UID and GID value by removing \"<strong>/10000</strong>\".</p>\n</li>\n<li>\n<p>The NFS server must support NFSv3 or NFSv4.</p>\n</li>\n</ul>\n</div>\n<div>\n<h2>Volumes required for UD/UCMDB</h2>\n<p>The following NFS volumes are required for the UD/UCMDB deployment. Make sure the exported NFS volumes are empty and have no data.</p>\n</div>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Component</th>\n<th scope=\"col\">NFS volume name</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Example Directory path</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>UD/UCMDB</td>\n<td>ucmdb-data-volume</td>\n<td>Stores data that is generated by UD/UCMDB.</td>\n<td>/var/vols/itom/ucmdb/data_volume</td>\n</tr>\n<tr>\n<td>UD/UCMDB</td>\n<td>ucmdb-config-volume</td>\n<td>Stores UD/UCMDB configuration files.</td>\n<td>/var/vols/itom/ucmdb/conf_volume</td>\n</tr>\n<tr>\n<td>UD/UCMDB</td>\n<td>ucmdb-log-volume</td>\n<td>Stores logs generated by UD/UCMDB.</td>\n<td>/var/vols/itom/ucmdb/log_volume</td>\n</tr>\n<tr>\n<td>UD/UCMDB</td>\n<td>ucmdb-db-volume</td>\n<td>\n<div>(Optional) Stores database data of UD/UCMDB. It is not needed when external databases are used.</div>\n</td>\n<td>/var/vols/itom/ucmdb/db_volume</td>\n</tr>\n</tbody>\n</table>\n<h2>Set up self-hosted NFS shared volumes</h2>\n<p>You can set up an NFS server and NFS shared volumes on any NFS server. We recommend that you use a dedicated NFS server for the UD/UCMDB NFS volumes. As an example, the following steps assume that you use a dedicated NFS server and will use the external databases for UD/UCMDB.</p>\n<ol>\n<li>\n<p>Log on to the NFS server as a root or sudo user.</p>\n</li>\n<li>\n<p>Copy the OMT installation package to a temporary directory on the NFS server.</p>\n</li>\n<li>\n<p>Run the following command to unzip the OMT installation package:</p>\n<pre>unzip OMT_External_K8s_2x.x-xxx.zip</pre>\n</li>\n<li>\n<p>Navigate to the OMT_External_K8s_2x.x-xxx/scripts directory, and then run the following command:</p>\n<pre>./setupNFS.sh &lt;shared volume&gt; true &lt;user&gt; &lt;fsGroup&gt;</pre>\n<p>The <code>&lt;user&gt;</code> and <code>&lt;fsGroup&gt;</code> must be the same as the ones in the UD/UCMDB OpenShift project. See <a href=\"/doc/423/26.1/prepareopenshiftcms#Check_the_UID_and_GID\">Check the UID and GID</a>. For example, if the UID and GID range is <strong>1000590000/10000</strong>, you need to use \"<strong>1000590000</strong>\"<strong> </strong>as the UID and GID value by removing \"<strong>/10000</strong>\".<br/>\n<br/>\n\tFor example:</p>\n<pre>./setupNFS.sh /var/vols/itom/ucmdb/data_volume true 1000590000 1000590000\n./setupNFS.sh /var/vols/itom/ucmdb/conf_volume true 1000590000 1000590000\n./setupNFS.sh /var/vols/itom/ucmdb/log_volume true 1000590000 1000590000</pre>\n</li>\n<li>\n<p>The permission of each folder must be set to 755. If it not, run the following command to change the permissions:</p>\n<pre>chmod -R 755 &lt;path to shared folder&gt;</pre>\n<p>For example, run the following commands:</p>\n<pre>chmod -R 755 /var/vols/itom/ucmdb/data_volume\nchmod -R 755 /var/vols/itom/ucmdb/conf_volume\nchmod -R 755 /var/vols/itom/ucmdb/log_volume</pre>\n</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}