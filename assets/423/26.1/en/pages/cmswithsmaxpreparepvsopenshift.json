{
  "title": "Prepare persistent volumes for UD/UCMDB (OpenShift)",
  "content": "<h2><a id=\"Static_PV_creation\" name=\"Static_PV_creation\" title=\"Static PV creation\"></a>Static PV creation </h2><span class=\"snippet-start\" data-sname=\"423-25.4-423-25.3-CmsPrepareCreatePV||N\"></span><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>UD/UCMDB installation in Helm mode requires the following Persistent Volumes (PVs). PVs are relevant to NFS volumes.</p>\n<div>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Component</th>\n<th scope=\"col\">Persistent volume name</th>\n<th scope=\"col\">Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>UD/UCMDB</td>\n<td>ucmdb-config-volume</td>\n<td>PV for configuration</td>\n</tr>\n<tr>\n<td>UD/UCMDB</td>\n<td>ucmdb-data-volume</td>\n<td>PV for data</td>\n</tr>\n<tr>\n<td>UD/UCMDB</td>\n<td>ucmdb-log-volume</td>\n<td>PV for logs</td>\n</tr>\n</tbody></table>\n</div>\n<p>If you already have the PVs available for use, you need to ensure that the storageClassName attribute of the PVs is the same as the storage class name in the <strong>values.yaml</strong> file. In the later step, you will need to specify the name of PV to be bound with one of the persistent volume claims (PVCs).</p>\n<p>If you want to create the required PVs from scratch, perform the following tasks:</p>\n<ol>\n<li>\n<p>Navigate to the chart package directory. For example:</p>\n<p><b><code>cd UCMDB_Helm_Chart-2x.x/ucmdb-helm-charts/samples/</code></b></p>\n</li>\n<li>\n<p>Open the <b>ucmdb-pv.yaml </b>file with a text editor, provide the FQDN of the NFS server and the NFS directory path that you provided during the creation of the NFS volumes, and then save the file.</p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">By default, the storageClassName attribute of the PVs is empty. If you change the value, make sure that the storageClassName attribute of the PVs is the same as the storage class name in the <strong>values.yaml</strong> file so that the PVs and PVCs can be bound together.</div>\n</div>\n</li>\n<li>\n<p>Run the following command to create persistent volumes:</p>\n<p><b><code>kubectl create -f UCMDB_Helm_Chart-2x.x/ucmdb-helm-charts/samples/ucmdb-pv.yaml</code></b></p>\n</li>\n<li>\n<p>Run the following command to verify the volume creation:</p>\n<p><b><code>kubectl get pv |grep ucmdb</code></b></p>\n</li>\n</ol>\n<p><br/>\n</p><p><br/>\n</p>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p><span class=\"snippet-end\" data-sname=\"423-25.4-423-25.3-CmsPrepareCreatePV||N\"></span><h2><a id=\"Dynamic_PV_creation\" name=\"Dynamic_PV_creation\" title=\"Dynamic PV creation\"></a><a id=\"Dynamic\" name=\"Dynamic\" title=\"Dynamic\"></a>Dynamic PV creation  </h2><div>To dynamically create the Persistent Volumes, follow these steps:</div><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Navigate to the <span class=\"nanospell-typo\">OpenShift</span> console, select <strong>Storage </strong>from the left side panel, and then select <strong><span class=\"nanospell-typo\">StorageClasses</span></strong>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click the <strong>Create <span class=\"nanospell-typo\">StorageClass</span> </strong>button.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the <strong><span class=\"nanospell-typo\">StorageClass</span> </strong>pane, provide the following mandatory fields:\n\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\"><strong>Name</strong>. Enter a name for the Storage Class.</li><li style=\"margin-left: 40px; position: relative;\"><strong><span class=\"nanospell-typo\">Provisioner</span></strong>. Select the appropriate <span class=\"nanospell-typo\">Provisioner</span> based on your <span class=\"nanospell-typo\">NFS</span> configuration. If the required <span class=\"nanospell-typo\">Provisioner</span> is not listed, you will need to install it via Helm. If you choose <strong>No <span class=\"nanospell-typo\">Provisioner</span></strong>, the creation of Persistent Volumes will be static. In this case, you must follow the steps from the <em>Static PV creation</em> section. </li></ul></li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the left side panel, select <strong><span class=\"nanospell-typo\">PersistentVolumeClaims</span></strong>, and then click the <strong>Create <span class=\"nanospell-typo\">PersistentVolumeClaim</span></strong> button.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the <strong>Create <span class=\"nanospell-typo\">PersistentVolumeClaim</span> </strong>pane, provide the following details for each Persistent Volume Claim:\n\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\"><strong><span class=\"nanospell-typo\">StorageClass</span></strong>. Select the Storage Class created in <em>Step 3</em>.</li><li style=\"margin-left: 40px; position: relative;\"><strong><span class=\"nanospell-typo\">PersistentVolumeClaim</span> name</strong>. Enter a name for the <span class=\"nanospell-typo\">PVC</span>.</li><li style=\"margin-left: 40px; position: relative;\"> <strong>Access mode</strong>. Leave the default option.</li><li style=\"margin-left: 40px; position: relative;\"><strong>Size</strong>. Set the size to at least 5 <span class=\"nanospell-typo\">GIB</span>.</li></ul></li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <strong>Create</strong>.</li><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Repeat <em>Step 5</em> to create all three required <span class=\"nanospell-typo\">PVCs</span>: one <span class=\"nanospell-typo\">PVC</span> for data, one <span class=\"nanospell-typo\">PVC</span> for logs, and one <span class=\"nanospell-typo\">PVC</span> for configuration.\n\t<table><thead><tr><th scope=\"col\">Component</th><th scope=\"col\">Persistent volume claim name</th><th scope=\"col\">Description</th></tr></thead><tbody><tr><td>UD/<span class=\"nanospell-typo\">UCMDB</span></td><td><span class=\"nanospell-typo\">ucmdb</span>-<span class=\"nanospell-typo\">config</span>-volume-claim</td><td><span class=\"nanospell-typo\">PVC</span> for configuration</td></tr><tr><td>UD/<span class=\"nanospell-typo\">UCMDB</span></td><td><span class=\"nanospell-typo\">ucmdb</span>-data-volume-claim</td><td><span class=\"nanospell-typo\">PVC</span> for data</td></tr><tr><td>UD/<span class=\"nanospell-typo\">UCMDB</span></td><td><span class=\"nanospell-typo\">ucmdb</span>-log-volume-claim</td><td><span class=\"nanospell-typo\">PVC</span> for logs</td></tr></tbody></table><div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>All <span class=\"nanospell-typo\">PVCs</span> must be in the <span class=\"nanospell-typo\">UCMDB</span> <span class=\"nanospell-typo\">namespace</span>.</div></div></div></li></ol>",
  "modifiedon": "2025-11-10 12:50:28"
}