{
  "title": "Enable CMP FinOps",
  "content": "<div class=\"mw-parser-output\">\n<p>Enable the CMP FinOps functionality for the tenants as a suite admin.</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<div>The CMP FinOps capability in Cloud Management is deprecated starting with version 25.3. </div>\n<ul style=\"padding-left: 0px;\">\n<li style=\"margin-left: 28px; position: relative;\">Cloud operations</li>\n<li style=\"margin-left: 28px; position: relative;\">Cloud cost limits</li>\n<li style=\"margin-left: 28px; position: relative;\">Cost governance reports</li>\n<li style=\"margin-left: 28px; position: relative;\">Cloud insights</li>\n</ul>\n<div>We encourage you to use the Operations Platform-based <strong>Cost reports </strong>instead of <strong>Cost governance reports</strong>. You can download the template from the <a href=\"https://marketplace.opentext.com/itom/content/finops-reports\" title=\"Marketplace portal\">Marketplace portal</a>.</div>\n</div></div></div>\n<h2 id=\"Prerequisites\"><a id=\"Prerequisites\" name=\"Prerequisites\" title=\"Prerequisites\"></a>Prerequisites</h2>\n<p>Make sure the CMP FinOps capability has been installed on the suite. To see if CMP FinOps is installed, run the <code>kubectl get pods --all-namespaces | grep cgro</code> command. Ensure that all the listed CGRO pods are running.</p>\n<p>If CMP FinOps isn't installed, you can <a href=\"/doc/423/26.1/addcapabilitieshelm#Install_new_capabilities\" title=\"add the CMP FinOps capability\">add the CMP FinOps capability</a> to an existing installation of the suite. Or you can install a new suite and select CMP FinOps when asked to select suite capabilities. Note that in an on-premises production environment, you must modify the <strong>pg_hba.conf</strong> file of the external PostgreSQL database as required.</p>\n<p>Make sure the tenants where you will enable the CMP FinOps capability meet the following requirements:</p>\n<ul style=\"padding-left: 0px;\">\n<li style=\"margin-left: 28px; position: relative;\">The tenant's Backend type is <strong>SMAX</strong>.</li>\n<li style=\"margin-left: 28px; position: relative;\">The tenant's Status is <strong>Active</strong>.</li>\n<li style=\"margin-left: 28px; position: relative;\">The DND capability is deployed and enabled.</li>\n<li style=\"margin-left: 28px; position: relative;\">A Could Management license is assigned to the tenant. </li>\n</ul>\n<p>For detailed steps, see <a href=\"/doc/423/26.1/deploytenantwflw\" title=\"Set up a tenant\">Set up a tenant</a>.</p>\n<p>During the capability enablement process, you need to specify a user to serve as the default CMP FinOps administrator. If this user doesn't exist yet, you need to create and activate the user. The user must have an <strong>Account user</strong> role.</p>\n<div><a class=\"image\" href=\"\"> <img alt=\"SMAX 2020.02 DeployDNDUserRole.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/a/aa/SMAX_2020.02_DeployDNDUserRole.png\" hspace=\"0\" src=\"../../../images/SMAX_2020.02_DeployDNDUserRole_cdf9685d.png\" style=\"width:563px;height:273px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\"/> </a></div>\n<p>See <a href=\"/doc/423/26.1/createuser\" title=\"How to create a user\">How to create a user</a>.</p>\n<p>Note that each CMP FinOps-enabled tenant has another default CMP FinOps administrator—the tenant admin specified in the Tenant details page. If you need only one default CMP FinOps administrator for the tenant, you can designate the tenant admin as the CMP FinOps admin user and don't need to create a user for this.</p>\n<h2 id=\"Copy_the_CA_certificate_to_the_HCM_NFS_share\"><a id=\"Import-the-Vertica-CA-certificate-into-the-suite\" name=\"Import-the-Vertica-CA-certificate-into-the-suite\" title=\"Import the Vertica CA certificate into the suite\"></a>Import the Vertica CA certificate into the suite</h2>\n<p>When configuring SSL for Vertica, you create a CA certificate for Vertica. Now, you need to import the CA certificate into the suite to enable SSL communication between Vertica and CMP FinOps. Refer to your deployment type to complete this task.</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>If you have already configured Vertica with SSL, and provided the Vertica CA certificate during installation, skip this task.</div></div></div>\n<h3><a id=\"Deployment\" name=\"Deployment\" title=\"Deployment\"></a>Deployment</h3>\n<div>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>The classic mode of integrating Vertica with CMP FinOps is deprecated starting with version 25.3. We encourage using the Operations Platform–based integration instead. The <em>classic mode </em>here specifically refers to the method by which Vertica was integrated with CMP FinOps until version 25.2.</div></div></div>\n</div>\n<ol style=\"padding-left: 0px;\">\n<li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Run the following command to get your <strong>my-values.yaml</strong> file:\n\n\t<pre>helm get values &lt;ESM_RELEASE_NAME&gt; -n &lt;ESM_NAMESPACE&gt; &gt; my-values.yaml\n</pre>\n<p>Where:</p>\n<ul style=\"padding-left: 0px;\">\n<li style=\"margin-left: 40px; position: relative;\"><strong>&lt;ESM_NAMESPACE&gt;</strong>: is the unique namespace of the suite deployment.</li>\n<li style=\"margin-left: 40px; position: relative;\"><strong>&lt;ESM_RELEASE_NAME&gt;:</strong> is the release name, which you can obtain by using the following command\n\t\t<pre>helm list -n &lt;ESM_NAMESPACE&gt; | awk '{print $1}'</pre>\n</li>\n</ul>\n</li>\n<li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Open your <strong>my-values.yaml</strong> file, and paste the content of the root CA certificate in parallel with the global settings:\n\t<pre>vertica:\n  caCertificates: \n    vertica_ca.crt: &lt;cert-file-base64-encoded&gt; or PEM</pre>\n</li>\n<li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">(Only for 24.2 and 24.3) Run the following command to make sure all job resources have a Complete status.\n\t<pre>kubectl get job -n &lt;ESM_NAMESPACE&gt; </pre>\n\tIf complete, it should return COMPLETIONS are 1/1. Run the following command to clean up unused jobs before applying changes\n\n\t<pre>kubectl get job -n &lt;ESM_NAMESPACE&gt;|grep -v NAME | awk '{print $1}'|xargs kubectl delete job -n &lt;ESM_NAMESPACE&gt;\n</pre>\n</li>\n<li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Run the follow command to make this update take effect\n\t<pre>helm upgrade &lt;ESM_RELEASE_NAME&gt; &lt;ESM_HELM_CHART_PATH&gt; -n &lt;ESM_NAMESPACE&gt; -f  my-values.yaml\n</pre>\n<p>Where <strong>&lt;ESM_HELM_CHART_PATH&gt;</strong> is the absolute path of the helm package.</p>\n<p>Example:</p>\n<pre>helm upgrade sma esm-1.0.0+2x.x-xxx\\charts\\esm-1.0.0+2x.x-xxx.tgz -n itsma-xxx -f my-values.yaml </pre>\n</li>\n<li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Run the following commands to restart the showback and insights pods:\n\t<pre><code>kubectl rollout restart deployment itom-cgro-showback -n &lt;ESM_NAMESPACE&gt;\nkubectl rollout restart deployment itom-cgro-showback-gateway -n &lt;ESM_NAMESPACE&gt;\nkubectl rollout restart deployment itom-cgro-insights -n &lt;ESM_NAMESPACE&gt;\nkubectl rollout restart deployment itom-cgro-insights-gateway -n &lt;ESM_NAMESPACE&gt;\n</code></pre>\n<p>Replace the <strong>&lt;ESM_NAMESPACE&gt;</strong> placeholder with your suite namespace (for example,<strong> itsma-dfgh4</strong>).</p>\n</li>\n</ol>\n<h2 id=\"To_enable_CGRO\"><a id=\"Enable-CMP-FinOps\" name=\"Enable-CMP-FinOps\" title=\"Enable CMP FinOps\"></a>Enable CMP FinOps</h2>\n<p>Perform the following tasks as a suite administrator:</p>\n<ol style=\"padding-left: 0px;\">\n<li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Log in to Suite Administration: <strong>https://&lt;EXTERNAL_ACCESS_HOST&gt;/bo</strong>.</li>\n<li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Navigate to <strong>TENANTS</strong>, select the tenant, and then click <strong>Capability settings</strong> &gt; <strong>Deploy new capability</strong>.</li>\n<li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the pop-up window, select <strong>Cloud Management Platform FinOps</strong> from the drop-down list, and then click <strong>Next</strong>.</li>\n<li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">On the <em>Config and deploy</em> page, complete the following details:\n\t<ul style=\"padding-left: 0px;\">\n<li data-end=\"657\" data-start=\"541\" style=\"margin-left: 40px; position: relative;\">\n<p data-end=\"657\" data-start=\"543\"><strong>CMP FinOps admin user</strong>: Select the account user or tenant admin who will act as the CMP FinOps administrator.</p>\n</li>\n<li data-end=\"742\" data-start=\"658\" style=\"margin-left: 40px; position: relative;\">\n<p data-end=\"742\" data-start=\"660\"><strong>CMP FinOps admin password</strong>: Enter the password for the CMP FinOps admin user.</p>\n</li>\n<li data-end=\"829\" data-start=\"743\" style=\"margin-left: 40px; position: relative;\">\n<p data-end=\"829\" data-start=\"745\"><strong>Vertica Hostname</strong>: Enter the hostname of the Vertica server for CMP FinOps.</p>\n</li>\n<li data-end=\"920\" data-start=\"830\" style=\"margin-left: 40px; position: relative;\">\n<p data-end=\"920\" data-start=\"832\"><strong>Vertica Port</strong>: Enter the port number that Vertica uses for client connections.</p>\n</li>\n<li data-end=\"1000\" data-start=\"921\" style=\"margin-left: 40px; position: relative;\">\n<p data-end=\"1000\" data-start=\"923\"><strong>Vertica Schema name</strong>: Enter the schema in Vertica where CMP FinOps data will be stored.</p>\n</li>\n<li data-end=\"1084\" data-start=\"1001\" style=\"margin-left: 40px; position: relative;\">\n<p data-end=\"1084\" data-start=\"1003\"><strong>Vertica Database name</strong>: Enter the name of the Vertica database created for CMP FinOps.</p>\n</li>\n<li data-end=\"1168\" data-start=\"1085\" style=\"margin-left: 40px; position: relative;\">\n<p data-end=\"1168\" data-start=\"1087\"><strong>Vertica RO user</strong>: Enter the username of the read-only user created for CMP FinOps reports.</p>\n</li>\n<li data-end=\"1243\" data-start=\"1169\" style=\"margin-left: 40px; position: relative;\">\n<p data-end=\"1243\" data-start=\"1171\"><strong>Vertica RO user password</strong>: Enter the password for the read-only user.</p>\n</li>\n<li data-end=\"1331\" data-start=\"1244\" style=\"margin-left: 40px; position: relative;\">\n<p data-end=\"1331\" data-start=\"1246\"><strong>Vertica RW user</strong>: Enter the username of the read-write user created for CMP FinOps.</p>\n</li>\n<li data-end=\"1407\" data-start=\"1332\" style=\"margin-left: 40px; position: relative;\">\n<p data-end=\"1407\" data-start=\"1334\"><strong>Vertica RW user password</strong>: Enter the password for the read-write user.</p>\n</li>\n<li data-end=\"1510\" data-start=\"1408\" style=\"margin-left: 40px; position: relative;\">\n<p data-end=\"1510\" data-start=\"1410\"><strong>Enable TLS</strong>: Option to enable TLS encryption for securing the connection between CMP FinOps and Vertica.</p>\n</li>\n</ul>\n</li>\n<li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <strong>DEPLOY</strong>. Note that once deployed, the added capability can't be removed.</li>\n<li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">You can view the deployed settings in the <strong>Cloud Management Platform FinOps</strong> section of <strong>Capabilities settings page.</strong> </li>\n</ol>\n<ul style=\"padding-left: 0px;\">\n</ul>\n<h2><a id=\"Sample-data-seeding\" name=\"Sample-data-seeding\" title=\"Sample data seeding\"></a>Sample data seeding</h2>\n<p>For demo or testing purposes, you can configure the demo mode for the tenant and create a sample integration.</p>\n<ol style=\"padding-left: 0px;\">\n<li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Log in to IdM Admin Portal at <strong>https://&lt;&lt;SMAX_SUITE_HOST&gt;&gt;/idm-admin</strong>.</li>\n<li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Select the tenant on which you have enabled CMP FinOps.</li>\n<li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Select <strong>Customization</strong> on the left.</li>\n<li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">On the <strong>Others</strong> tab, add a metadata entry with the key <strong>CGRO-TENANT-TIER</strong> and assign the value <strong>demo</strong> to it.\n\t<div><a class=\"image\" href=\"\"> <img alt=\"Add a metadata entry\" border=\"1\" file=\"https://staging.docs.microfocus.com/mediawiki/images/0/0c/CGRO_enable_2021.11.png\" hspace=\"0\" src=\"../../../images/CGRO_enable_2021.11_4e4260f4.png\" style=\"width:800px;height:505px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:1px solid black;\" vspace=\"0\"/> </a></div>\n</li>\n<li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Go to <strong>Adminstration </strong>&gt;<strong> Providers </strong>&gt; <strong>Cloud Cost Data Providers</strong> and create a sample integration.\n\t<div><a class=\"image\" href=\"\"> <img alt=\"cost reporting integrations\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/7/7d/OT_CGRO_add_integration.jpg\" hspace=\"0\" src=\"../../../images/OT_CGRO_add_integration_9f83b29c.jpeg\" style=\"width:800px;height:183px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\"/> </a></div>\n<p>When creating a sample integration, you can supply dummy credentials, because these credentials are ignored by the system. For details, see <a href=\"/doc/179/2020.08/pn/pn5f576f2c5607e4.81068219\" title=\"Showback demo data\">Showback demo data</a>.</p>\n</li>\n</ol>\n<h3><a id=\"Important-notes-on-demo-mode\" name=\"Important-notes-on-demo-mode\" title=\"Important notes on demo mode\"></a>Important notes on demo mode</h3>\n<ul style=\"padding-left: 0px;\">\n<li style=\"margin-left: 28px; position: relative;\">Currently, the demo mode doesn't support upgrading from one suite version to the next. After an upgrade, you will need to delete and recreate all your Cloud Cost Data Providers for each demo tenant. To do this, follow these steps:\n\t<ol style=\"padding-left: 0px;\">\n<li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 48px; position: relative;\">If you have made customizations to the demo data seed files in the <strong>&lt;data-volume&gt;/cgro/showback/demo-collection/&lt;tenantId&gt;</strong> directory, back up those files.</li>\n<li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 48px; position: relative;\">Delete all Cloud Cost Data Providers for each demo tenant.</li>\n<li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 48px; position: relative;\">Delete the files in the <strong> &lt;data-volume&gt;/cgro/showback/demo-collection/&lt;tenantId&gt; </strong>directory.</li>\n<li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 48px; position: relative;\">Recreate the Cloud Cost Data Providers for each demo tenant.</li>\n<li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 48px; position: relative;\">Review the new seed files. If required, modify them to include the customizations from your backed up files.</li>\n<li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 48px; position: relative;\">If you needed to modify the files for a particular cloud provider, delete and recreate the associated Cloud Cost Data Providers again. For example, if you changed a file with an <strong>Aws </strong>prefix, delete and recreate the AWS Cloud Cost Data Provider. If you didn't need to modify the files for a particular cloud provider, no further action is required.</li>\n</ol>\n</li>\n<li style=\"margin-left: 28px; position: relative;\">If switching a tenant from demo mode to non-demo mode, make sure you delete all Cloud Cost Data Providers for the demo tenant before removing the <strong>CGRO-TENANT-TIER</strong> key configuration in IdM.</li>\n</ul>\n<h2><a id=\"Next-steps\" name=\"Next-steps\" title=\"Next steps\"></a>Next steps</h2>\n<p>To enable users to use the CMP FinOps capability, administrators must also complete the following tasks:</p>\n<ul style=\"padding-left: 0px;\">\n<li style=\"margin-left: 28px; position: relative;\">A tenant admin must assign CMP FinOps-related permissions to users. See <a href=\"/doc/423/26.1/configureauthfinops\" title=\"Configure authorization for CMP FinOps\">Configure authorization for CMP FinOps</a>.</li>\n<li style=\"margin-left: 28px; position: relative;\">A cloud integration administrator must configure integrations with cloud providers. See <a href=\"/doc/423/26.1/integratecloudproviderfinops\" title=\"Integrate with cloud platforms for CMP FinOps\">Integrate with cloud providers for CMP FinOps</a>.</li>\n</ul>\n<h2><a id=\"Related-topics\" name=\"Related-topics\" title=\"Related topics\"></a>Related topics</h2>\n<ul style=\"padding-left: 0px;\">\n<li style=\"margin-left: 28px; position: relative;\"><a href=\"/doc/423/26.1/getstartedfinops\" title=\"Get started with CMP FinOps\">Get started with CMP FinOps</a></li>\n</ul>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}