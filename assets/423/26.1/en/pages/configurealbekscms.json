{
  "title": "Configure load balancers for UD/UCMDB",
  "content": "<div class=\"mw-parser-output\">\n<p>To access UD/UCMDB, you need to create an Application Load Balancer (ALB) and configure the listener for UD/UCMDB on this ALB.</p>\n<h2>Prerequisites</h2>\n<p>Before creating and configuring an ALB, allocate an FQDN for UD/UCMDB (for example, via <a href=\"https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resource-record-sets-creating.html\" rel=\"nofollow\" target=\"1\" title=\"AWS route 53 services\">AWS route 53 services</a>) if you don't have one. You also need to prepare a new certificate using one of the following methods. Or else, unexpected errors might occur at later steps.</p>\n<h3 id=\"Apply_a_new_certificate_for_Load_Balancer\">Request a certificate</h3>\n<p>If you want to request a new certificate, follow these steps:</p>\n<ol>\n<li>Log in to the AWS Management Console in your target region.</li>\n<li>Navigate to <b>All services</b> &gt; <strong>Security, Identity, &amp; Compliance</strong> &gt; <b>Certificate Manager</b></li>\n<li>If the \"firstrun\" page is displayed, click <b>Get Started</b>.</li>\n<li>Click <b>Request a certificate</b>.</li>\n<li>Select <b>Request a public certificate</b> and click <b>Request a certificate</b>.</li>\n<li>Specify your target domain name. Use an asterisk (*) to request a wildcard certificate to protect several sites in the same domain. For example, <b>*.testcms-ng.org .</b></li>\n<li>Click <b>Next</b>.</li>\n<li>Select <b>DNS validation</b> or <b>Email validation</b> according to your permission.</li>\n<li>Click <b>Review</b> and then click <b>Confirm and request</b>.</li>\n<li>Click <b>Continue</b>.</li>\n<li>Finish the certificate validation based on the method you just selected. For more information, see <a href=\"https://docs.aws.amazon.com/console/acm/validation\" rel=\"nofollow\" target=\"1\" title=\"validation\">https://docs.aws.amazon.com/console/acm/validation</a>.</li>\n</ol>\n<h3 id=\"Import_a_certificate\">Import a certificate</h3>\n<p>If you want to use a customized certificate, follow these steps:</p>\n<ol>\n<li>Log in to the AWS Management Console in your target region.</li>\n<li>Navigate to <b>All services</b> &gt; <strong>Security, Identity, &amp; Compliance</strong> &gt; <b>Certificate Manager</b></li>\n<li>If the \"firstrun\" page is displayed, click <b>Get Started</b>.</li>\n<li>Click <b>Import a certificate</b>.</li>\n<li>For <b>Certificate body</b>, paste the PEM-encoded certificate to import.</li>\n<li>For <b>Certificate private key</b>, paste the PEM-encoded, unencrypted private key that matches the certificate's public key.\n\t<div class=\"admonition\">\n<div class=\"admonition-icon admonition-important-icon\"></div>\n<div class=\"admonition-content admonition-important-content\">Currently, services integrated with AWS Certificate Manager support only the <code>RSA_1024</code> and <code>RSA_2048</code> algorithms.</div>\n</div>\n</li>\n<li>(Optional) For <b>Certificate chain</b>, paste the PEM-encoded certificate chain.</li>\n<li>Click <b>Next &gt; Review and import &gt; Import.</b></li>\n</ol>\n<h2 id=\"Target_groups\">Create an Ingress for UD/UCMDB</h2>\n<div class=\"transcontent stn-begin--CreateIngressCMS\"> </div>\n<p>You need to create an Ingress for UD/UCMDB with an external access port such as 443:</p>\n<ol>\n<li>Save the content below as <code>cms-ingress.yaml</code>:\n\n\t<pre>apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: \"cms-ingress\"\n  namespace: &lt;ucmdb_namespace&gt;\n  annotations:\n    alb.ingress.kubernetes.io/scheme: internet-facing\n    alb.ingress.kubernetes.io/group.name: &lt;application_loadbalancer_name&gt;\n    alb.ingress.kubernetes.io/listen-ports: '[{\"HTTPS\": &lt;cms_external_port&gt;}]'\n    alb.ingress.kubernetes.io/backend-protocol: HTTPS\n    alb.ingress.kubernetes.io/healthcheck-protocol: HTTPS\n    alb.ingress.kubernetes.io/healthcheck-port: traffic-port\n    alb.ingress.kubernetes.io/healthcheck-path: /cms\n    alb.ingress.kubernetes.io/success-codes: 200-399\n    alb.ingress.kubernetes.io/target-type: instance\n    alb.ingress.kubernetes.io/load-balancer-attributes: idle_timeout.timeout_seconds=180\n    alb.ingress.kubernetes.io/certificate-arn: &lt;certificate_arn&gt;\n    alb.ingress.kubernetes.io/ssl-policy: ELBSecurityPolicy-TLS13-1-2-Res-2021-06\n    kubernetes.io/ingress.class: alb\n  labels:\n    app: cms-ingress\nspec:\n  ingressClassName: alb\n  tls:\n  - hosts:\n    - &lt;external_access_host&gt;\n  rules:\n    - host:\n      http:\n        paths:\n          - backend:\n              service:\n                name: \"itom-ingress-controller-svc\"\n                port: \n                  number: &lt;ingress_controller_port&gt;\n            path: /*\n            pathType: ImplementationSpecific\n</pre>\n<p>Replace the following with the actual values:</p>\n<ul>\n<li><code>&lt;ucmdb_namespace&gt;</code>: the unique namespace of the UD/UCMDB deployment. For example, <strong>ucmdb-prod</strong>.</li>\n<li><code>&lt;application_loadbalancer_name&gt;</code>: specify the name of the ALB to be created.\n\t\t<div class=\"admonition\">\n<div class=\"admonition-icon admonition-important-icon\"></div>\n<div class=\"admonition-content admonition-important-content\">The name must consist of <strong>lower case</strong> alphanumeric characters, '-', or '.', and must start and end with an alphanumeric character. </div>\n</div>\n</li>\n<li>&lt;cms_external_port&gt;: The port number for external access. Use the port number that you set in the <strong>global.externalAccessPort</strong> parameter in <strong>my-values.yaml</strong>. For example, <strong>443</strong>.</li>\n<li><code>&lt;certificate_arn&gt;</code>: the<a href=\"https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html\" title=\" resource name\"> resource name</a> of the prepared certificate. For example, <em>arn:aws:acm:region:123456789012:certificate/12345678-1234-1234-1234-123456789012</em>. See details in the<i> Prerequisites </i>section above.</li>\n<li><code>&lt;external_access_host&gt;</code>: the FQDN you've allocated for UD/UCMDB. For example, <em>www.example.com</em>.</li>\n<li><code>&lt;ingress_controller_port&gt;</code>: The port number of the Ingress controller for the UD/UCMDB deployment. Use the port number that you set in the <b>itom-ingress-controller.nginx.service.httpsPort</b> parameter in your <strong>my-values.yaml </strong>file. For example, <strong>30443</strong>.</li>\n</ul>\n</li>\n<li>Run the following command to apply the saved YAML file:\n\t<pre>kubectl create -f cms-ingress.yaml\n</pre>\n</li>\n</ol>\n<p>Now an ALB is created and the UD/UCMDB Ingress for the external access port (for example, 443) is bound to this ALB automatically.</p>\n<div class=\"transcontent stn-end--CreateIngressCMS\"> </div>\n<h2 id=\"Bind_an_FQDN_with_CMS_ALB\">Bind an FQDN with UD/UCMDB ALB</h2>\n<p>After you create and configure the ALB for UD/UCMDB, you need to bind the FQDN that you have allocated for UD/UCMDB with this ALB. See <a href=\"/doc/423/26.1/eksbootstrapcdf#Bind_an_FQDN_with_Application_Load_Balancer\" title=\"Bind an FQDN with Application Load Balancer\">Bind an FQDN with Application Load Balancer</a>. </p>\n<p>Now you can access UD/UCMDB with the following URLs. Note that at the moment you can only open these URLs. To log in to UD/UCMDB as <strong>suite-admin</strong>, you must perform the <a href=\"/doc/423/26.1/associatecmssuperadminroleeks\" title=\"Associate UD/UCMDB SuperAdmin role (EKS)\">Associate UD/UCMDB SuperAdmin role</a> task.</p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">It takes around 30 minutes to stabilize.</div>\n</div>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">To access</th>\n<th scope=\"col\">Enter the following URL in your web browser</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>UD/UCMDB landing page</td>\n<td><b>https://&lt;</b><strong>EXTERNAL_ACCESS_HOST</strong><b>&gt;:&lt;PORT&gt;/cms</b></td>\n</tr>\n<tr>\n<td>UCMDB JMX console</td>\n<td><b>https://&lt;</b><strong>EXTERNAL_ACCESS_HOST</strong><b>&gt;:&lt;PORT&gt;/jmx-console</b></td>\n</tr>\n<tr>\n<td>UCMDB UI</td>\n<td><b>https://&lt;</b><strong>EXTERNAL_ACCESS_HOST</strong><b>&gt;:&lt;PORT&gt;/ucmdb-browser</b></td>\n</tr>\n</tbody>\n</table>\n<p>Where, <b>&lt;</b><strong>EXTERNAL_ACCESS_HOST</strong><b>&gt;</b> is the one you bind with UD/UCMDB ALB and <strong>&lt;PORT&gt;</strong> is the value that you specify for the <strong>global.externalAccessPort</strong> parameter in <strong>my-values.yaml</strong>.</p>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}