{
  "title": "Configure values.yaml for Audit (EKS)",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>You need to create a custom<b> values.yaml</b> file and configure the parameters for an Audit deployment.</p>\n<h2>Create and configure values.yaml file</h2>\n<p>You can create and configure the <b>values.yaml</b> file based on the sample file (<strong>Example values.yaml</strong>) provided in the Audit charts package.</p>\n<ol>\n<li>\n<p>Create a copy of the sample file in the Install directory, for example, <strong>audit2x.x</strong>.</p>\n<pre>cp audit-helm-chart/audit/samples/values.yaml .</pre>\n</li>\n<li>\n<p>Edit the <b>values.yaml</b> file using any editor and enter the required values in the file.</p>\n</li>\n</ol>\n<h2>Configurable parameters</h2>\n<p>The <strong>values.yaml</strong> file contains configurable parameters that are categorized into the following two types:</p>\n<ul>\n<li>Global parameters: These parameters help define a setting that affects all deployed services. These parameters reside under the <code>global </code>helm key index. For example, <code>global.idm. idmSvcHost</code>.</li>\n<li>Component specific parameters: These are parameters that target a specified component/sub-chart. In the <strong>values.yaml</strong> file, you can find these parameters under the block of values whose name corresponds to the sub-chart/component name. <br/>\n\tFor example,\n\t<pre>auditService:\ndatabase:</pre>\n</li>\n</ul>\n<h3>Access parameters</h3>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n<tr>\n<td><strong>global.externalAccessHost</strong></td>\n<td>This is the FQDN you will use for external access to Audit services.</td>\n<td>Yes</td>\n<td>Not defined</td>\n<td><strong>audit.com</strong></td>\n</tr>\n<tr>\n<td><strong>global.externalAccessPort</strong></td>\n<td>\n<p>This is the port you will use for external access to Audit services.</p>\n</td>\n<td>Yes</td>\n<td>Not defined</td>\n<td><strong>443</strong></td>\n</tr>\n<tr>\n<td><strong>global.nginx.httpsPort</strong></td>\n<td>This is the listener port of the NGINX controller service. This need not be same as <strong>global.externalAccessPort</strong>.</td>\n<td>Yes</td>\n<td>Not defined</td>\n<td><strong>31051</strong></td>\n</tr>\n<tr>\n<td><strong>global.securityContext.user</strong></td>\n<td>\n<p>This parameter specifies the operating system user ID that is used to run the process in the container.</p>\n<p>The value of this parameter and the ID of the NFS folder owner (the value of <code>&lt;user&gt;</code> when creating the Audit NFS volumes) must be the same. For example, if you use <strong>100001 </strong> instead of <strong>1999 </strong>when creating NFS, you must also use <strong>100001 </strong>as the value for this parameter. </p>\n<p><strong>NOTE</strong>: The value can't be changed after installation.</p>\n</td>\n<td>\n<p>Yes</p>\n</td>\n<td>1999</td>\n<td>100001</td>\n</tr>\n<tr>\n<td><strong>global.securityContext.fsGroup</strong></td>\n<td>\n<p>This parameter specifies the operating system group ID that is used to run the process in the container.</p>\n<p>The value of this parameter and the group ID (the value of <code>&lt;fsGroup&gt;</code> when creating the Audit NFS volumes) must be the same. For example, if you use <strong>200001</strong> instead of <strong>1999 </strong>when creating NFS, you must also use <b>2</b><strong>00001 </strong>as the value for this parameter. </p>\n<p><strong>NOTE</strong>: The value can't be changed after installation.</p>\n</td>\n<td>\n<p>Yes</p>\n</td>\n<td>1999</td>\n<td>200001</td>\n</tr>\n<tr>\n<td><strong>global.cluster.k8sProvider</strong></td>\n<td>Set the value to identify the type of the managed Kubernetes environment.<br/>\n<strong>Note</strong>: If this parameter is not present in the <strong>values.yaml </strong>file, you need to manually insert this parameter and set the value to <strong>aws</strong> for the EKS deployment.</td>\n<td>Yes</td>\n<td>None</td>\n<td>aws</td>\n</tr>\n</thead>\n</table>\n<h3>Docker registry settings</h3>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n<tr>\n<td><strong>global.docker.registry</strong></td>\n<td>The docker registry from where the system will pull the required images from.</td>\n<td>Yes</td>\n<td><strong>localhost:5000</strong></td>\n<td><strong>smax.docker.registry:5000</strong></td>\n</tr>\n<tr>\n<td><strong>global.docker.orgName</strong></td>\n<td>The docker organization name.</td>\n<td>Yes</td>\n<td><strong>hpeswitom</strong></td>\n<td><strong>hpeswitom</strong></td>\n</tr>\n<tr>\n<td><strong>global.docker.imagePullSecret</strong></td>\n<td>The K8s secret that contains the credentials required to pull images from the specified docker registry.</td>\n<td>Yes</td>\n<td><strong>registrypullsecret</strong></td>\n<td><strong>registrypullsecret</strong></td>\n</tr>\n<tr>\n<td><strong>global.docker.imagePullPolicy</strong></td>\n<td>The image pull policy.</td>\n<td>Optional</td>\n<td><strong>IfNotPresent</strong></td>\n<td><strong>IfNotPresent</strong></td>\n</tr>\n</thead>\n</table>\n<h3>External IdM configuration</h3>\n<p>IdM communication supports only https.</p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n<tr>\n<td><strong>global.idm.idmSvcHost</strong></td>\n<td>The FQDN to access IdM. It's usually same as the Service Management FQDN.</td>\n<td>Yes</td>\n<td>Not defined</td>\n<td><strong>smax.com</strong></td>\n</tr>\n<tr>\n<td><strong>global.idm.idmSvcPort</strong></td>\n<td>The external port to access IdM. It's usually same as the Service Management port.</td>\n<td>Yes</td>\n<td>443</td>\n<td><strong>443</strong></td>\n</tr>\n</thead>\n</table>\n<h3>Vault init configuration</h3>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n<tr>\n<td><strong>global.vaultInit.certname</strong></td>\n<td>The name used to generate a certificate within the vault init.</td>\n<td>Yes</td>\n<td>Not defined</td>\n<td><strong>vault_cert_name</strong></td>\n</tr>\n</thead>\n</table>\n<h3>Core audit service configuration</h3>\n<p>Audit service picks up the hostname and port for IdM in the following order: </p>\n<ol>\n<li><strong>auditService.idm.internalIdmHost</strong> and <strong>auditService.idm.internalIdmPort</strong> values (this is strongly recommended).</li>\n<li>When you don't specify <strong>auditService.idm.internalIdmHost</strong> and <strong>auditService.idm.internalIdmPort</strong> values, Audit service picks up <strong>auditService.idm.publicIdmHost</strong> and <strong>auditService.idm.publicIdmPort</strong> values.</li>\n<li>When you don't specify <strong>auditService.idm.publicIdmHost</strong> and <strong>auditService.idm.publicIdmPort</strong> values, then Audit service picks up the <strong>global.idm.idmSvcHost and global.idm.idmSvcPort values</strong>.</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n<tr>\n<td><strong>auditService.replicas</strong></td>\n<td>The number of Audit service pods that need to be running</td>\n<td>No</td>\n<td><strong>2</strong></td>\n<td><strong>2</strong></td>\n</tr>\n<tr>\n<td><strong>auditService.database.user</strong></td>\n<td>The external DB user.</td>\n<td>Yes</td>\n<td>Not defined</td>\n<td><strong>auditdbuser</strong></td>\n</tr>\n<tr>\n<td><strong>auditService.database.jdbcUrl</strong></td>\n<td>The external DB database JDBC URL.</td>\n<td>Yes</td>\n<td>Not defined</td>\n<td><strong>jdbc:postgresql://auditdb.us-west-2.rds.amazonaws.com:5432/audit?ssl=true&amp;sslmode=verify-ca&amp;sslfactory=org.postgresql.ssl.DefaultJavaSSLFactory</strong></td>\n</tr>\n<tr>\n<td><strong>auditService.hpa.maxReplicas</strong></td>\n<td>Maximum number of pods for Horizontal Pod Autoscaling (HPA) to trigger.</td>\n<td>Optional</td>\n<td><strong>2</strong></td>\n<td><strong>2</strong></td>\n</tr>\n<tr>\n<td><strong>auditService.hpa.minReplicas</strong></td>\n<td>Minimum number of pods for HPA to trigger.</td>\n<td>Optional</td>\n<td><strong>2</strong></td>\n<td><strong>2</strong></td>\n</tr>\n<tr>\n<td><strong>auditService.hpa.targetCPUUtilizationPercentage</strong></td>\n<td>Threshold percentage for HPA.</td>\n<td>Optional</td>\n<td><strong>75</strong></td>\n<td><strong>75</strong></td>\n</tr>\n<tr>\n<td><strong>auditService.idm.publicIdmHost</strong></td>\n<td>This is the hostname of the public ALB that's used to access the IdM service externally.</td>\n<td>Optional</td>\n<td>Not defined</td>\n<td><strong>smax.com</strong></td>\n</tr>\n<tr>\n<td><strong>auditService.idm.publicIdmPort</strong></td>\n<td>This is the port in the public ALB that's used to access the IdM service externally.</td>\n<td>Optional</td>\n<td><strong>443</strong></td>\n<td><strong>443</strong></td>\n</tr>\n<tr>\n<td><strong>auditService.idm.internalIdmHost</strong></td>\n<td>This is the hostname used to access the IdM service that's internal to the Service Management deployment. This hostname isn't exposed externally.</td>\n<td>Recommended</td>\n<td>Not defined</td>\n<td><strong>internal.com</strong></td>\n</tr>\n<tr>\n<td><strong>auditService.idm.internalIdmPort</strong></td>\n<td>This is the port that's used to access the IdM service that's internal to the Service Management deployment. This port isn't exposed externally.</td>\n<td>Recommended</td>\n<td><strong>443</strong></td>\n<td><strong>443</strong></td>\n</tr>\n<tr>\n<td><strong>auditService.jmx.enable </strong></td>\n<td>Enables JMX support for Audit service. Use this only in the debugging mode.</td>\n<td>Optional</td>\n<td><strong>false</strong></td>\n<td><strong>false</strong></td>\n</tr>\n</thead>\n</table>\n<h3>IDM user configuration</h3>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n<tr>\n<td><strong>auditService.idm.superUser</strong></td>\n<td>The user that's used to call IdM APIs to create the required groups, roles, and permissions. The user on IdM has to have the admin/super user privilege.</td>\n<td>Yes</td>\n<td>Not defined</td>\n<td><strong>suite-admin</strong></td>\n</tr>\n<tr>\n<td><strong>auditService.idm.superUserOrgName</strong></td>\n<td>The super user organization.</td>\n<td>Yes</td>\n<td>Not defined</td>\n<td><strong>sysbo</strong></td>\n</tr>\n</thead>\n</table>\n<h3>Audit gateway configuration</h3>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required</th>\n<th scope=\"col\">Default</th>\n<th scope=\"col\">Example</th>\n</tr>\n<tr>\n<td><strong>auditGateway.deployment.publicIdmHost</strong></td>\n<td>This is the hostname of the public ALB that's used to access the IdM service externally. If the value isn't specified, then Audit gateway will take the FQDN from <strong>global.idm.idmSvcHost</strong>.</td>\n<td>Optional</td>\n<td>Not defined</td>\n<td><strong>smax.com</strong></td>\n</tr>\n<tr>\n<td><strong>auditGateway.deployment.publicIdmPort</strong></td>\n<td>This is the port in the public ALB that's used to access the IdM service externally. If the value isn't specified, then Audit gateway will take the value from <strong>global.idm.idmSvcPort</strong>.</td>\n<td>Optional</td>\n<td><strong>443</strong></td>\n<td><strong>443</strong></td>\n</tr>\n<tr>\n<td><strong>auditGateway.deployment.internalIdmHost</strong></td>\n<td>This is the hostname that's used to access the IdM service that's internal to the Service Management deployment. This hostname isn't exposed externally. If the value isn't specified, then Audit gateway will take the FQDN from <strong>global.idm.idmSvcHost</strong>.</td>\n<td>Recommended</td>\n<td>Not defined</td>\n<td><strong>internal.com</strong></td>\n</tr>\n<tr>\n<td><strong>auditGateway.deployment.internalIdmPort</strong></td>\n<td>This is the port that's used to access the IdM service that's internal to the Service Management deployment. This port isn't exposed externally. If the value isn't specified, then Audit gateway will take the value from <strong>global.idm.idmSvcPort</strong>.</td>\n<td>Recommended</td>\n<td><strong>443</strong></td>\n<td><strong>443</strong></td>\n</tr>\n<tr>\n<td><strong>auditGateway.deployment.idmTransportUser</strong></td>\n<td>The IdM transport username.</td>\n<td>Optional</td>\n<td><strong>idmTransportUser</strong></td>\n<td><strong>idmTransportUser</strong></td>\n</tr>\n<tr>\n<td><strong>auditGateway.deployment.auditEndPoint</strong></td>\n<td>The Audit service end point.\n\t\t\t<p>Pass the integration/internal ALB FQDN and port. <strong>https://&lt;internal ALB FQDN&gt;:&lt;internal ALB port to access Audit service&gt;/audit-service-engine</strong></p>\n<p>If you don't give a value, the end point will get generated using the</p>\n<p><strong>global.externalAccessHost</strong> and <strong>global.externalAccessPort</strong>.</p>\n</td>\n<td>Recommended</td>\n<td><strong>https://&lt;global.externalAccessHost&gt;:&lt;global.externalAccessPort&gt;/audit-service-engine</strong></td>\n<td><strong>https://audit.internal.com:443/audit-service-engine</strong></td>\n</tr>\n<tr>\n<td><strong>auditGateway.hpa.maxReplicas</strong></td>\n<td>Maximum number of pods for HPA to trigger.</td>\n<td>Optional</td>\n<td><strong>2</strong></td>\n<td><strong>2</strong></td>\n</tr>\n<tr>\n<td><strong>auditGateway.hpa.minReplicas</strong></td>\n<td>Minimum number of pods for HPA to trigger.</td>\n<td>Optional</td>\n<td><strong>2</strong></td>\n<td><strong>2</strong></td>\n</tr>\n<tr>\n<td><strong>auditGateway.hpa.targetCPUUtilizationPercentage</strong></td>\n<td>Threshold percentage for HPA.</td>\n<td>Optional</td>\n<td><strong>75</strong></td>\n<td><strong>75</strong></td>\n</tr>\n<tr>\n<td><strong>auditGateway.jmx.enable</strong></td>\n<td>Enables JMX support for Audit gateway. Use this only in the debugging mode.</td>\n<td>Optional </td>\n<td><strong>false</strong></td>\n<td><strong>false</strong></td>\n</tr>\n<tr>\n<td><strong>auditGateway.logging.level.root</strong></td>\n<td>Sets the log level for root. For example, info, debug, and error.</td>\n<td>Optional</td>\n<td><strong>info</strong></td>\n<td><strong>info</strong></td>\n</tr>\n<tr>\n<td><strong>auditGateway.logging.level.com.microfocus.itom.audit</strong></td>\n<td>Sets the log level for the Audit gateway code. For example, info, debug, and error.</td>\n<td>Optional</td>\n<td><strong>info</strong></td>\n<td><strong>info</strong></td>\n</tr>\n</thead>\n</table>\n<h2>Related topic</h2>\n<p>To know how to create an internal ALB and to find the FQDN and port, see <a href=\"https///staging./doc/423/25.4/integrationalbaudit\" title=\"Create application load balancer for Audit service\">Create application load balancer for Audit service</a>.</p>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}