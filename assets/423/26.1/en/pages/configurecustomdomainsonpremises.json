{
  "title": "Configure custom domains (on-premises, AWS, GCP, or OpenShift)",
  "content": "<div class=\"mw-parser-output\">\n<p>If SMA is deployed in an on-premises environment or deployed on AWS, GCP, or OpenShift, perform the following steps to configure a custom domain per tenant.</p>\n<h2>Prerequisite</h2>\n<p>Before you begin, prepare one or more certificate files for your custom domains. For details, see <a _ngcontent-c23=\"\" href=\"/doc/423/26.1/configurecustomdomainsfortenants\" title=\"Configure custom domains for tenants\">Configure custom domains for tenants</a>. </p>\n<h2>Step 1: Configure DNS</h2>\n<p>Ask your IT department to help complete the required DNS mapping configuration for your custom domains so that end users can access the custom domains from their browser. The custom domains must be mapped to the same IP address, to which the external access host name of your suite environment is mapped. This IP address must be the HA VIP or the load balancer IP address or any other IP address that was used to visit your suite system before.</p>\n<h2>Step 2: Configure the custom domains in Suite Administration</h2>\n<div class=\"transcontent stn-begin--custom_domain_bo\"></div>\n<p>To do this, follow these steps:</p>\n<ol>\n<li>Log in to Suite Administration as suite-admin.</li>\n<li>Open an active tenant record.</li>\n<li>Make sure that the original tenant URL (<code>https://&lt;EXTERNAL_ACCESS_HOST&gt;/saw/ess?TENANTID=XXXXXXXX</code>) displayed in the <strong>General</strong> tab is accessible.</li>\n<li>From the <strong>General</strong> tab, enter a fully qualified domain name in the <strong>Custom domain</strong> field. For example, enter <strong>customer1.example.com</strong>. Note that each custom domain value must be unique. <br/>\n<strong>Note</strong>: The custom domain must be at least a third-level domain such as <strong>customer1.example.com</strong>. In other words, <strong>example.com</strong> isn't supported. See the following figure for an example. <a class=\"image\" href=\"\"> <img alt=\"SMA 2020.02 shortURL custom domain field.png\" src=\"../../../images/SMA_2020.02_shortURL_custom_domain_field_700f9c62.png\"/> </a></li>\n<li>Save the tenant record. </li>\n<li>Repeat the steps for the rest of the tenants that need a custom domain. </li>\n<li>Launch each https://&lt;custom domain&gt; URL in a browser to test the configurations. For example: <strong><a href=\"https://customer1.example.com\" target=\"1\" title=\"https://customer1.example.com\">https://customer1.example.com</a></strong>. You should be able to log in to the tenant as the tenant admin. </li>\n</ol>\n<div class=\"transcontent stn-end--custom_domain_bo\"></div>\n<h2>Step 3: Reconfigure the certificate for the suite</h2>\n<p>If using an external load balancer in front of SMA, refer to your specific load balancer documentation for instructions on how you should configure the certificates that you have prepared in the previous step on the external load balancer.</p>\n<p>If not using an external load balancer in front of SMA, replace the SMA suite certificate as follows:</p>\n<ol>\n<li>Log in to the OMT Management Portal as the <strong>admin</strong> user: https://&lt;EXTERNAL_ACCESS_HOST&gt;:5443.</li>\n<li>Navigate to <strong>APPLICATION</strong> &gt; <strong>Certificate</strong>.</li>\n<li>Upload your CA certificate file, server certificate file, and server private key.</li>\n<li>Click <strong>Update</strong>.</li>\n</ol>\n<p>Once you have replaced the certificate, it should work for both OMT (on port 5443) and the suite (on port 443). If the new certificate doesn't work for the suite, try the following steps to restart the itom-ingress-controller pod.</p>\n<ol>\n<li>Log in to the control plane node.</li>\n<li>Run the following command to locate the itom-ingress-controller pod:\n\t<pre>kubectl get pods -n &lt;suite namespace&gt;|grep ingress</pre>\n<p>Your terminal should resemble the following:</p>\n<pre>itom-ingress-controller-c9b846b98-9rhnp            1/1     Running     0          15h\n</pre>\n</li>\n<li>Run the following command to restart the itom-ingress-controller pod:\n\t<pre>kubectl delete pod -n &lt;suite namespace&gt; itom-ingress-controller-xxxxxxx</pre>\n<p>For example:</p>\n<pre>kubectl delete pod -n &lt;suite namespace&gt; itom-ingress-controller-c9b846b98-9rhnp</pre>\n</li>\n<li>Wait for a while and then run the following command to make sure that the pod has restarted:\n\t<pre>kubectl get pods -n &lt;suite namespace&gt;|grep ingress</pre>\n</li>\n</ol>\n<h2 id=\"Step_5:_Reconfigure_SAML_authentication_(accounts_with_SAML_authentication_only)\">Step 4: Reconfigure SAML authentication (accounts with SAML authentication only)</h2>\n<p>If SAML authentication was set up on the account associated with the tenant, <a href=\"/doc/423/26.1/configureauthenticationinidm#Download_metadata_from_the_suite\" title=\"Download metadata from the suite\">Download metadata from the suite</a> and <a href=\"/doc/423/26.1/configureauthenticationinidm#Add_Relying_Party_Trust_in_ADFS\" title=\"Add Relying Party Trust in ADFS\">Add Relying Party Trust in ADFS</a> after the custom domain configuration.</p>\n<h2>Step 5: Test the custom domain configuration</h2>\n<p>Launch the following URLs:</p>\n<ul>\n<li>Tenant URLs: https://&lt;custom domain&gt; (user: the tenant admin)</li>\n<li>OMT management portal: https://&lt;External Access Host&gt;:5443 (user: admin)</li>\n<li>Suite Administration: https://&lt;External Access Host&gt;/bo (user: suite-admin)</li>\n</ul>\n<p>Make sure that there is no certificate security warning displayed in the browser address bar, and you can successfully log in. </p>\n<h2>Example: Configure custom domains in an on-premises test environment</h2>\n<p>In this example, we will configure the following custom domains for two tenants in a test environment:</p>\n<ul>\n<li>myhr.mycompany.com</li>\n<li>myit.mycompany.net</li>\n</ul>\n<h3>Step 1: Set up a test environment</h3>\n<ol>\n<li>Use only one virtual machine as a control plane node, a worker node, and an NFS server to install the suite.</li>\n<li>Create two standard tenants of the Trial type.</li>\n<li>Deploy the two tenants.</li>\n</ol>\n<h3>Step 2: Configure the custom domains in Suite Administration</h3>\n<ol>\n<li>Log in to Suite Administration as suite-admin: https://&lt;External Access Host&gt;/bo.</li>\n<li>Open a tenant record, enter <strong>myhr.mycompany.com</strong> in the <strong>Custom domain</strong> field, and then save the tenant.</li>\n<li>Open the second tenant record, enter <strong>myit.mycompany.net</strong> in the <strong>Custom domain</strong> field, and then save the tenant.</li>\n</ol>\n<h3>Step 3: Add DNS mappings to the hosts file</h3>\n<p>This step is to enable you to open the new URLs from your local Windows machine.</p>\n<ol>\n<li>Add the following lines to your Windows machine's <strong>hosts</strong> file:\n\n\t<pre>&lt;IP address&gt; myhr.mycompany.com \n&lt;IP address&gt; myit.mycompany.net \n</pre>\n<p>Where: &lt;IP address&gt; is the IP address mapped to the external access host name of the SMA environment. In this example, it's the IP address of the VM in our test environment.</p>\n</li>\n<li>Launch the URLs from your browser:\n\t<ul>\n<li><a href=\"https://myhr.mycompany.com\" target=\"1\" title=\"https://myhr.mycompany.com\">https://myhr.mycompany.com</a></li>\n<li><a href=\"https://myit.mycompany.net\" target=\"1\" title=\"https://myit.mycompany.net\">https://myit.mycompany.net</a></li>\n</ul>\n</li>\n</ol>\n<h3>Step 4: Generate a SAN certificate for the custom domains</h3>\n<p>Since we need two different domains and have no external load balancer, we will generate a self-signed wildcard SAN certificate for the two custom domains. For details, see the example steps in <a _ngcontent-c23=\"\" href=\"/doc/423/26.1/configurecustomdomainsfortenants\" title=\"Configure custom domains for tenants\">Configure custom domains for tenants</a>.</p>\n<p>Now, we have the following files available:</p>\n<ul>\n<li>the CA certificate file: ca.crt</li>\n<li>the server certificate file: server.crt</li>\n<li>the server private key file: server.key</li>\n</ul>\n<p>In the next step, we will upload these files to the OMT management portal to replace the suite certificate.</p>\n<h3>Step 5: Replace the suite certificate</h3>\n<ol>\n<li>Log in to the OMT management portal as <strong>admin</strong>.</li>\n<li>Replace the certificate as described in \"Step 2: Replace the certificate for SMA\" on this page.<br/>\n\tThe following figure shows our example configuration.<br/>\n<a class=\"image\" href=\"\"> <img alt=\"SMA 2020.02 shortURL replace cert.png\" src=\"../../../images/SMA_2020.02_shortURL_replace_cert_ec0e5913.png\"/> </a></li>\n</ol>\n<h3>Step 6: Import the CA certificate into the browser</h3>\n<p>Take Chrome for example.</p>\n<ol>\n<li>Launch the certificate import wizard.</li>\n<li>Follow the screen prompts to import the root CA certificate generated into the browser. Note that for Certificate Store, you need to select <strong>Trusted Root Certificate Authorities</strong>.<br/>\n<a class=\"image\" href=\"\"> <img alt=\"SMA 2020.02 shortURL import cert to browser.png\" src=\"../../../images/SMA_2020.02_shortURL_import_cert_to_browser_4338d86f.png\"/> </a></li>\n</ol>\n<h3>Step 7: Test the configuration</h3>\n<ol>\n<li>Launch the tenant URLs with custom domains, and check that the \"Not secure\" security warning isn't displayed and you can successfully log in as the tenant admins. In this example, test the following URLs:\n\t<ul>\n<li><a href=\"https://myit.mycompany.net\" target=\"1\" title=\"https://myit.mycompany.net\">https://myit.mycompany.net</a></li>\n<li><a href=\"https://myhr.mycompany.com\" target=\"1\" title=\"https://myhr.mycompany.com\">https://myhr.mycompany.com</a></li>\n</ul>\n</li>\n<li>Launch the OMT management portal: https//&lt;EXTERNAL ACCESS HOST&gt;:5443. Check that the \"Not secure\" security warning isn't displayed and you can successfully log in as admin.</li>\n<li>Launch Suite Administration: https//&lt;EXTERNAL ACCESS HOST&gt;/bo. Check that the \"Not secure\" security warning isn't displayed and you can successfully log in as suite-admin.</li>\n</ol>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}