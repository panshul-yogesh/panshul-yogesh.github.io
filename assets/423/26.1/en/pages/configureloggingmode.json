{
  "title": "Configure logging mode (Synchronous or Asynchronous)",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p aria-hidden=\"true\">In synchronous mode, the logger writes entries directly to the destination. In asynchronous mode, the logger writes entries to a queue, then later writes the entries from the queue to the destination. Each logger has its own queue. </p>\n<p aria-hidden=\"true\">The system implements synchronous logging by default. You can switch to the asynchronous logging mode if absolutely required, for example, when the application is performing a high rate of IO operations, you may switch to the asynchronous logging mode. </p>\n<p>Please contact Support before activating asynchronous mode to validate the change to your system.</p>\n<p aria-hidden=\"true\">To configure the logging mode, follow these steps:</p>\n<h2 aria-hidden=\"true\">Add the logging mode parameter</h2>\n<p>If you haven't added the LOGBACK_MODE parameter before, you need to add it first.</p>\n<h3 aria-hidden=\"true\">Add LOGBACK_MODE to configmap</h3>\n<ol>\n<li>Log in to a control plane node or bastion node as root or a sudo user.</li>\n<li>Run the following command (replace &lt;namespace&gt; with your own suite namespace): \n\t<pre><code>kubectl edit cm itom-xruntime-infra-config -n &lt;namespace&gt;</code></pre>\n</li>\n<li>Locate the <code>CONNECTION_TIMEOUT </code>parameter.<br/>\n\tAdd the <code>LOGBACK_MODE</code> parameter after the <code>CONNECTION_TIMEOUT </code>parameter.<br/>\n\tIf you need to implement synchronous logging:\n\t<pre>LOGBACK_MODE: sync</pre>\n\tIf you need to implement asynchronous logging:\n\n\t<pre>LOGBACK_MODE: async</pre>\n</li>\n</ol>\n<h3>Add LOGBACK_MODE to itom-xruntime-serviceportal</h3>\n<ol>\n<li> Create a patch file named <strong>serviceportal-patch.yaml</strong> with the following content.\n\n\t<pre>spec:\n  template:\n    spec:\n      containers:\n        - name: itom-xruntime-serviceportal\n          env:\n            - name: LOGBACK_MODE\n              valueFrom:\n                configMapKeyRef:\n                  key: LOGBACK_MODE\n                  name: itom-xruntime-infra-config</pre>\n</li>\n<li>Apply the patch file on the control plane node or bastion node.\n\t<pre>kubectl patch deployment itom-xruntime-serviceportal  -n &lt;namespace&gt; --patch-file serviceportal-patch.yaml</pre>\n</li>\n</ol>\n<h3>Add LOGBACK_MODE to itom-xruntime-platform</h3>\n<ol>\n<li> Create a patch file named <strong>platform-patch.yaml</strong> with the following content.\n\n\t<pre>spec:\n  template:\n    spec:\n      containers:\n        - name: itom-xruntime-platform\n          env:\n            - name: LOGBACK_MODE\n              valueFrom:\n                configMapKeyRef:\n                  key: LOGBACK_MODE\n                  name: itom-xruntime-infra-config\n</pre>\n</li>\n<li>Apply the patch file on the control plane node or bastion node.\n\t<pre>kubectl patch deployment itom-xruntime-platform  -n &lt;namespace&gt; --patch-file platform-patch.yaml</pre>\n</li>\n</ol>\n<h3>Add LOGBACK_MODE to itom-xruntime-platform-offline</h3>\n<ol>\n<li> Create a patch file named <strong>platform-patch</strong><b>-offline</b><strong>.yaml</strong> with the following content.\n\n\t<pre>spec:\n  template:\n    spec:\n      containers:\n        - name: itom-xruntime-platform\n          env:\n            - name: LOGBACK_MODE\n              valueFrom:\n                configMapKeyRef:\n                  key: LOGBACK_MODE\n                  name: itom-xruntime-infra-config\n</pre>\n</li>\n<li>Apply the patch file on the control plane node or bastion node.\n\t<pre>kubectl patch deployment itom-xruntime-platform-offline  -n &lt;namespace&gt; --patch-file platform-offline-patch.yaml</pre>\n</li>\n</ol>\n<h3>Add LOGBACK_MODE to itom-xruntime-gateway</h3>\n<ol>\n<li>Create a patch file named <strong>gateway-patch.yaml</strong> with the following content.\n\n\t<pre>spec:\n  template:\n    spec:\n      containers:\n        - name: gateway\n          env:\n            - name: LOGBACK_MODE\n              valueFrom:\n                configMapKeyRef:\n                  key: LOGBACK_MODE\n                  name: itom-xruntime-infra-config\n</pre>\n</li>\n<li>Apply the patch file on the control plane node or bastion node.\n\t<pre>kubectl patch deployment itom-xruntime-gateway  -n &lt;namespace&gt; --patch-file gateway-patch.yaml</pre>\n</li>\n</ol>\n<h3>Add LOGBACK_MODE to itom-bo-ats</h3>\n<ol>\n<li>Create a patch file named <strong>itom-bo-ats-patch.yaml</strong> with the following content.\n\n\t<pre>spec:\n  template:\n    spec:\n      containers:\n        - name: itom-bo-ats\n          env:\n            - name: LOGBACK_MODE\n              valueFrom:\n                configMapKeyRef:\n                  key: LOGBACK_MODE\n                  name: itom-xruntime-infra-config\n</pre>\n</li>\n<li>Apply the patch file on the control plane node or bastion node.\n\t<pre>kubectl patch deployment itom-bo-ats-deployment -n &lt;namespace&gt; --patch-file itom-bo-ats-patch.yaml</pre>\n</li>\n</ol>\n<h3>Add LOGBACK_MODE to itom-bo-config</h3>\n<ol>\n<li>Create a patch file named <strong>itom-bo-config-patch.yaml</strong> with the following content.\n\n\t<pre>spec:\n  template:\n    spec:\n      containers:\n        - name: itom-bo-config\n          env:\n            - name: LOGBACK_MODE\n              valueFrom:\n                configMapKeyRef:\n                  key: LOGBACK_MODE\n                  name: itom-xruntime-infra-config\n</pre>\n</li>\n<li>Apply the patch file on the control plane node or bastion node.\n\t<pre>kubectl patch deployment itom-bo-config-deployment -n &lt;namespace&gt; --patch-file itom-bo-config-patch.yaml</pre>\n</li>\n</ol>\n<h3>Add LOGBACK_MODE to itom-bo-facade</h3>\n<ol>\n<li>Create a patch file named <strong>itom-bo-facade-patch.yaml</strong> with the following content.\n\n\t<pre>spec:\n  template:\n    spec:\n      containers:\n        - name: itom-bo-facade\n          env:\n            - name: LOGBACK_MODE\n              valueFrom:\n                configMapKeyRef:\n                  key: LOGBACK_MODE\n                  name: itom-xruntime-infra-config\n</pre>\n</li>\n<li>Apply the patch file on the control plane node or bastion node.\n\t<pre>kubectl patch deployment itom-bo-facade-deployment -n &lt;namespace&gt; --patch-file itom-bo-facade-patch.yaml</pre>\n</li>\n</ol>\n<h3>Add LOGBACK_MODE to itom-bo-license</h3>\n<ol>\n<li>Create a patch file named <strong>itom-bo-license-patch.yaml</strong> with the following content.\n\n\t<pre>spec:\n  template:\n    spec:\n      containers:\n        - name: itom-bo-license\n          env:\n            - name: LOGBACK_MODE\n              valueFrom:\n                configMapKeyRef:\n                  key: LOGBACK_MODE\n                  name: itom-xruntime-infra-config\n</pre>\n</li>\n<li>Apply the patch file on the control plane node or bastion node.\n\t<pre>kubectl patch deployment itom-bo-license-deployment  -n &lt;namespace&gt; --patch-file itom-bo-license-patch.yaml</pre>\n</li>\n</ol>\n<h3>Add LOGBACK_MODE to itom-bo-login</h3>\n<ol>\n<li>Create a patch file named <strong>itom-bo-login-patch.yaml</strong> with the following content.\n\n\t<pre>spec:\n  template:\n    spec:\n      containers:\n        - name: itom-bo-login\n          env:\n            - name: LOGBACK_MODE\n              valueFrom:\n                configMapKeyRef:\n                  key: LOGBACK_MODE\n                  name: itom-xruntime-infra-config\n</pre>\n</li>\n<li>Apply the patch file on the control plane node or bastion node.\n\t<pre>kubectl patch deployment itom-bo-login-deployment  -n &lt;namespace&gt; --patch-file itom-bo-login-patch.yaml</pre>\n</li>\n</ol>\n<h3>Add LOGBACK_MODE to itom-bo-user</h3>\n<ol>\n<li>Create a patch file named <strong>itom-bo-user-patch.yaml</strong> with the following content.\n\n\t<pre>spec:\n  template:\n    spec:\n      containers:\n        - name: itom-bo-user\n          env:\n            - name: LOGBACK_MODE\n              valueFrom:\n                configMapKeyRef:\n                  key: LOGBACK_MODE\n                  name: itom-xruntime-infra-config\n</pre>\n</li>\n<li>Apply the patch file on the control plane node or bastion node.\n\t<pre>kubectl patch deployment itom-bo-user-deployment  -n &lt;namespace&gt; --patch-file itom-bo-user-patch.yaml</pre>\n</li>\n</ol>\n<h2 aria-hidden=\"true\">Change the logging mode</h2>\n<p>If you need to change the logging mode from synchronous to asynchronous, or from asynchronous to synchronous, follow these steps:</p>\n<h3>Update LOGBACK_MODE from configmap</h3>\n<ol>\n<li>Log in to a control plane node or bastion node as root or a sudo user.</li>\n<li>Run the following command (replace &lt;namespace&gt; with your own suite namespace): \n\t<pre><code>kubectl edit cm itom-xruntime-infra-config -n &lt;namespace&gt;</code></pre>\n</li>\n<li>Change the <code>LOGBACK_MODE</code> parameter as required. <br/>\n\tIf you need to implement synchronous logging:\n\t<pre>LOGBACK_MODE: sync</pre>\n\tIf you need to implement asynchronous logging:\n\n\t<pre>LOGBACK_MODE: async</pre>\n</li>\n</ol>\n<h3 aria-hidden=\"true\">Restart the core services</h3>\n<ol>\n<li>Restart itom-xruntime-platform service:\n\t<pre>kubectl rollout restart deployment itom-xruntime-platform -n &lt;namespace&gt;</pre>\n</li>\n<li>Restart itom-xruntime-platform-offline service:\n\t<pre>kubectl rollout restart deployment itom-xruntime-platform-offline -n &lt;namespace&gt;</pre>\n</li>\n<li>Restart the itom-xruntime-serviceportal service\n\t<pre>kubectl rollout restart deployment itom-xruntime-serviceportal -n &lt;namespace&gt;</pre>\n</li>\n<li>Restart the itom-xruntime-gateway service:\n\t<pre>kubectl rollout restart deployment itom-xruntime-gateway -n &lt;namespace&gt;</pre>\n</li>\n<li>\n<p>Restart the itom-bo-ats service:</p>\n<pre>kubectl rollout restart deployment itom-bo-ats-deployment -n &lt;namespace&gt;</pre>\n</li>\n<li>Restart the itom-bo-config service:\n\t<pre>kubectl rollout restart deployment itom-bo-config-deployment -n &lt;namespace&gt;</pre>\n</li>\n<li>Restart the itom-bo-facade service:\n\t<pre>kubectl rollout restart deployment itom-bo-facade-deployment -n &lt;namespace&gt;</pre>\n</li>\n<li>Restart the itom-bo-license service:\n\t<pre>kubectl rollout restart deployment itom-bo-license-deployment -n &lt;namespace&gt;</pre>\n</li>\n<li>Restart the itom-bo-login service:\n\t<pre>kubectl rollout restart deployment itom-bo-login-deployment -n &lt;namespace&gt;</pre>\n</li>\n<li>Restart the itom-bo-user service:\n\t<pre>kubectl rollout restart deployment itom-bo-user-deployment -n &lt;namespace&gt;</pre>\n</li>\n</ol>\n<p aria-hidden=\"true\"></p>\n<p>​​​​​</p>\n<p>  </p>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}