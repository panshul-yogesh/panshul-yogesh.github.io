{
  "title": "Contact support",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>You can contact the support team at <a class=\"external text\" href=\"https://www.microfocus.com/support-and-services\" rel=\"nofollow\" target=\"1\">Support and services</a>.<br/>\n<br/>\nBefore you contact support, collect the information required by support as follows.</p>\n<h2 class=\"mw-headline\" id=\"Diagnostic_toolkit\">Diagnostic toolkit</h2>\n<p>The <a class=\"external text\" href=\"https://marketplace.microfocus.com/itom/content/service-management-automation-diagnostic-toolkit\" rel=\"nofollow\" target=\"1\">SMA diagnostic toolkit</a> includes scripts that you can use to collect diagnostic information of your SMA suite environment:</p>\n<ul>\n<li>system information (hardware, network, and service status)</li>\n<li>resource utilization, monitoring, and NFS/docker free space</li>\n</ul>\n<p>For details, see the readme file shipped with the toolkit.</p>\n<h2 class=\"mw-headline\" id=\"Support_toolset\">Support toolset</h2>\n<p>OPTIC Management Toolkit (OMT) provides a support toolset that helps to collect the following information about Docker, Kubernetes, suites, commands, directories, and files:</p>\n<ul>\n<li>Docker: containers, inspect, docker service systemd logs</li>\n<li>Kubernetes: nodes, pods, namespaces, images, containers, cluster-info, describe, and logs</li>\n<li>Suite: cdfapiserver-db dump, suite data, modules, products deployments, and features</li>\n<li>Commands: user defined</li>\n<li>Directories and files: user defined</li>\n</ul>\n<p>You can view the summary information on a console, and view detailed output information in an encrypted .tar file.</p>\n<h3 class=\"mw-headline\" id=\"How_to_use_the_support_toolset\">How to use the support toolset</h3>\n<p>To use the <span class=\"Project_Variablesst\">support toolset, follow these steps:</span></p>\n<ol>\n<li>\n<p>Log on to the control plane node.</p>\n</li>\n<li>\n<p>Run the following command:<br/>\n<b>cd $CDF_HOME/tools/support-tool</b></p>\n</li>\n<li>\n<p>Run the following command:</p>\n<p><b># ./support-dump [ -c &lt;<i>dump-filename-with-path</i>&gt; ] [-u &lt;<i>username</i>&gt; [-p &lt;<i>password</i>&gt;]] [-P &lt;<i>package_password</i>&gt;]</b></p>\n<div class=\"Admonition_Note\">\n<p><span class=\"autonumber\">Note</span><br/>\n\tExample usage</p>\n<ul>\n<li>Run the following command to create a dump file with a default file name in a default directory:<br/>\n<b># ./support-dump</b></li>\n<li>Run the following command to create a dump file with a specified file name in a specified directory (for example, create a dump.aes file in /var/test):<br/>\n<b>./support-dump -c /var/test/dump.aes</b></li>\n<li>Run the following command to create a dump file with a specified user name and password. For example, create a dump file with a default file name in a default directory with the password 'abcdef'. Connect the suite-installer with 'admin' as the user and '123456' as the password.<br/>\n<b># ./support-dump -u admin -p 123456 -P abcdef</b></li>\n</ul>\n</div>\n</li>\n<li>Run the following command to unpack the dump file:<br/>\n<b>dd if=xxxx.aes |openssl aes-256-cbc -md sha1 -d -k &lt;package_password&gt;|tar zxf -</b></li>\n</ol>\n<h3>Encryption of the output file</h3>\n<p>A dump file is encrypted by default.  However, if you choose not to encrypt the output file, you can use the <code>--no-encrypt-output</code> option. </p>\n<div class=\"Admonition_Caution\"><strong>Caution: </strong>By selecting the disable output file encryption option, you are disabling or bypassing security features, thereby exposing the system to increased security risks. By using this option, you understand and agree to assume all associated risks and hold OpenText harmless for the same.</div>\n<h3 class=\"mw-headline\" id=\"How_to_use_configuration_files\">How to use configuration files</h3>\n<p>The support toolset provides a configuration file (conf/supportdump.config) that includes some predefined <code>[commands], [files],</code> and <code>[dirs]</code> to specify information collection details. You can define your own <code>[commands], [files],</code> and <code>[dirs]</code> in this configuration file. Additionally, you can create other configuration files in the same directory. When using the configuration files, pay attention to the following:</p>\n<ul>\n<li>The output of the same command will be saved into one file. For example, all the output of the cat command will be saved to the cat.out file.</li>\n<li>All directories, files and output of commands are stored in the &lt;<i>local_ip</i>&gt;-&lt;<i>NodeType</i>&gt;/os directory.</li>\n<li>Wildcard characters can be used in a file name and directory name. For example, /etc/sysconfig/network-scripts/ifcfg-*</li>\n<li>Single environment variable is supported. For example, ${<i>CDF_HOME</i>}/log.</li>\n<li>A file or files (separated by spaces) following a directory will be excluded from the support toolset collection.</li>\n</ul>\n<div class=\"Admonition_Note\">\n<p><span class=\"autonumber\">Note</span><br/>\nExample usage<br/>\nThe <span class=\"Project_Variablesst\">support toolset</span> collects all files and directories in the ${<i>CDF_HOME</i>}/cfg except the * _User.json file:<br/>\n${CDF_HOME}/cfg *_User.json</p>\n</div>\n<h4 class=\"mw-headline\" id=\"Dump_file\">Dump file</h4>\n<p>The default support dump file is: dmp/support_data_YYYYMMDD-hhmmss.des3. The dump file contains the <span>support_data_YYYYMMDD-hhmmss.log</span> file of the running <span class=\"Project_Variablesst\">support toolset</span> and the ITOM_Core_Platform directory for the dump files. The following table describes the dump files in the ITOM_Core_Platform directory.</p>\n<div class=\"table-wrap\">\n<table>\n<tbody>\n<tr>\n<th><span>Name</span></th>\n<th>Description</th>\n<th>Type</th>\n</tr>\n<tr>\n<td><b>&lt;<i>local_ip</i>&gt;-&lt;<i>NodeType</i>&gt;</b></td>\n<td>\n<p>The directory of docker information and user defined information on the current node.</p>\n<ul>\n<li><b>docker</b> docker information dump files</li>\n</ul>\n<p><b>bootstrap</b>:</p>\n<ul>\n<li><b>bootstrap_containers.out</b>: docker-bootstrap containers</li>\n<li><b>bootstrap_docker_inspect.out</b>: docker-bootstrap inspect</li>\n<li><b>journalctl_docker-bootstrap.out</b>: docker-bootstrap service log workload</li>\n</ul>\n<p><b>workload</b>:</p>\n<ul>\n<li><b>containers.out</b>: docker containers</li>\n<li><b>docker_inspect.out</b>: docker inspect information</li>\n<li><b>journalctl_docker.out</b>: docker service log</li>\n</ul>\n<ul>\n<li><b>os</b>: user defined commands, directories and files\n\n\t\t\t\t<ul>\n<li><b>commands</b><span>: directory of output files of commands defined in the </span><code>[commands]</code><span> section in .config files. The file name format: &lt;command&gt;.out.</span></li>\n<li><span><b>other directories</b><span>: directories and files defined in the</span> <code>[files],</code><span> and </span><code>[dirs]</code><span>sections in .config files. The structure of directories will be reserved.</span></span></li>\n</ul>\n</li>\n</ul>\n</td>\n<td>Directory</td>\n</tr>\n<tr>\n<td><b>global</b></td>\n<td>\n<p><b>deployment</b>:</p>\n<ul>\n<li><b>suite_data</b><span>: JSON files of all suites data</span></li>\n<li><span><b>suite-db_pgdump.tar</b><span>: PostgreSQL db dump file of suite-db pod</span></span></li>\n<li><span><b>suite_features.out</b><span>: suite deployment and features</span></span></li>\n</ul>\n<p><b>kubernetes</b><span>:</span></p>\n<p><b>cluster_info:</b>:</p>\n<ul>\n<li><b>cluster_info.out</b>: output of running command 'kubectl cluster_info dump'</li>\n<li><b>other dirs &amp; files</b>: generated by command 'kubectl cluster_info dump'</li>\n</ul>\n<p><b>kube_describe.out</b><span>: describe of all pods</span></p>\n<p><span><b>kube_summary.out</b><span>: namespaces, pv, pvc, nodes, deployments, services, pods, ingress</span></span> <b>platform</b>:</p>\n<ul>\n<li><b>containers_by_pod.out</b>: all containers, images on all pods</li>\n</ul>\n</td>\n<td>Directory</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 class=\"mw-headline\" id=\"Example:_Running_the_support_toolset\">Example: Running the support toolset</h3>\n<p>The following output is an example of running the support toolset on a console.</p>\n<pre>[root@abc-sma-testserver support-tool]# ./support-dump\nPackage password:\nRetype package password:\n##############################################\n ITOM Core Platform - Support Data Export\n\n  Date:         2021-09-18 10:50:13\n  Current node: abc-sma-testserver.swlab.net\n  Node type:    Master\n  Containerd:   vv1.5.5\n  Kubernetes:   server-v1.21.4 client-v1.21.4\n##############################################\n----------------------------------------------\n Containers in k8s.io namespace\n  Export:   containers.out\n  Comments: on Master node abc-sma-testserver.swlab.net\n----------------------------------------------\nCONTAINER                                                           IMAGE                                                                                                                RUNTIME    \n00ec6c555567aa6f3ffc5daaf971d8b30113224d350ae08d9d267d8731331740    itom-docker.xxx.xx.net:443/hpeswitomsandbox/kubernetes-vault-init:0.11.0-008                         io.containerd.runc.v2\n023874eaf67ab5446c8706e29ff9b5845d6d786f0fc47edcae50efa1edbe6573    itom-docker.xxx.xx.net:443/hpeswitomsandbox/kube-controller-manager:v1.21.4                          io.containerd.runc.v2\n...\n\nCollecting containerd images information\nCollecting containerd configuration information\n----------------------------------------------\n Nodes\n  Export:   kube_summary.out\n----------------------------------------------\nNAME                           STATUS   ROLES                         AGE   VERSION\nabc-sma-testserver.swlab.net   Ready    control-plane,master,worker   10h   v1.21.4\nabc-sma-testserver.swlab.net   Ready    worker                        9h    v1.21.4\nabc-sma-testserver.swlab.net   Ready    worker                        9h    v1.21.4\n\n----------------------------------------------\n Pods\n  Export:   kube_summary.out\n----------------------------------------------\nNAMESPACE   NAME                                READY   STATUS      RESTARTS   AGE   IP            NODE                           NOMINATED NODE   READINESS GATES\ncore        apphub-apiserver-687c877c7f-ljsc8   2/2     Running     0          9h    123.45.6.7    abc-sma-testserver.swlab.net   &lt;none&gt;           &lt;none&gt;\ncore        apphub-ui-6d9c9fdc8b-nhdnm          2/2     Running     0          9h    123.45.6.7    abc-sma-testserver.swlab.net   &lt;none&gt;           &lt;none&gt;\n...\n\n----------------------------------------------\n POD Containers\n  Export:   containers_by_pod.out\n----------------------------------------------\nNAMESPACE   POD                                  NODE                          IMAGE                                                                                             CONTAINER                      CONTAINER_ID\ncore        apphub-apiserver-687c877c7f-ljsc8    abc-sma-testserver.swlab.net  itom-docker.xxx.xx.net:443/hpeswitomsandbox/apphub-apiserver:1.1.0-90             apphub-apiserver               6f294ec3609e\ncore        apphub-apiserver-687c877c7f-ljsc8    abc-sma-testserver.swlab.net  itom-docker.xxx.xx.net:443/hpeswitomsandbox/kubernetes-vault-renew:0.15.0-0033    kubernetes-vault-renew         4de20e1760e2\n...\n\nManagement Portal user(-p):admin\nPassword:\n----------------------------------------------\n Suite Deployment\n  Export:   suite_features.out\n----------------------------------------------\nSUITE  VERSION  NAMESPACE    DEPLOYMENT_STATUS  INSTALL_DATE  NFS_SERVER  NFS_OUTPUT_PATH\nitsma  202x.xx  itsma-ankbs  INSTALL_FINISHED                 null        null\n----------------------------------------------\n Suite Features\n  Export:   suite_features.out\n----------------------------------------------\nSUITE  EDITION              SELECTED  FEATURE_SET               FEATURE\n...\n\nInspect containers .................... exported to containerd_inspect.out\ncluster-info dump .......... exported to cluster_info.out\ndescribe pods ................... exported to kube_describe.out\nSuite data ........................ exported to suite_data directory\nGet logs from all pods ............ exported\nRun kube-status.sh ................ exported\nRun get pods wide ................. exported\nGet describe from all pods ........ exported\nMaking OS commands &amp; files list ... done\nRunning OS commands in list ....... done\nCollecting OS files in list ....... done\nPacking dump files ................ package file is /opt/cdf/tools/support-tool/dmp/support_data_20210918-130502.aes. \n\nPlease use below command to uncompress the package file:\n      dd if=/opt/cdf/tools/support-tool/dmp/support_data_20210918-130502.aes |openssl aes-256-cbc -md sha1 -d -k &lt;your_password&gt;|tar zxf -\n</pre>\n<h2 id=\"diagnoseIdM_command\" tabindex=\"-1\">diagnoseIdM command</h2>\n<p>The <code>diagnoseIdM</code> command is a subcommand of the idm.sh script. It collects diagnostic information about IdM, including:</p>\n<ul>\n<li>All IdM log files</li>\n<li>All IdM configuration files</li>\n<li>Tomcat configuration files</li>\n<li>IdM version information </li>\n<li>Frequently used SQL query results</li>\n</ul>\n<p>Diagnostic information is saved to a file in the <code>/idmtools/idm-installer-tools/</code> directory. To run the command, follow these steps:</p>\n<ol>\n<li>Run the following command to get into the IdM pod:\n\t<pre><code>kubectl exec -it $(kubectl get pod -n &lt;namespace&gt; -ocustom-columns=NAME:.metadata.name |grep idm|head -1) -n &lt;namespace&gt; -c idm sh</code></pre>\n<br/>\n\tFor example:\n\t<pre><code>kubectl exec -it $(kubectl get pod -n core -ocustom-columns=NAME:.metadata.name |grep idm|head -1) -n core -c idm sh</code></pre>\n</li>\n<li>Run the following command to collect diagnostic information about IdM:\n\t<pre><code>sh /idmtools/idm-installer-tools/idm.sh diagnoseIdM</code></pre>\n</li>\n</ol>\n<namespace><namespace> </namespace></namespace>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}