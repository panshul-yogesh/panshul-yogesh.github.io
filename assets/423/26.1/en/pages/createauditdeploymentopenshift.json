{
  "title": "Create a deployment (OpenShift)",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>You should deploy the Audit service in a separate namespace. Don't use any existing namespaces (for example, the ESM namespace). You can use the tool provided by OPTIC Management Toolkit (OMT) to create an Audit deployment. This tool gets a unique namespace for Audit, default certificate, and service account prepared for installing the Audit Helm charts.</p>\n<ol>\n<li>Log in to the bastion node as a root user.</li>\n<li>Run the following commands to create an Audit service deployment.\n\t<pre>cd $CDF_HOME/scripts\ncdfctl deployment create -d &lt;Audit Deployment Name&gt; [-n &lt;Audit Namespace&gt;]</pre>\n\tor\n\n\t<pre>$cdfctl deployment create -d &lt;Audit Deployment Name&gt; -n ${Audit Namespace} -t helm</pre>\n\tFor example:\n\n\t<pre>cd $CDF_HOME/scripts\ncdfctl deployment create -d audit-prod</pre>\n\tor\n\n\t<pre>cdfctl deployment create -d auditns -n auditns -t helm</pre>\n\tThe <code>-n</code> option is optional. If you don't specify this option, the value defaults to the deployment name (the value of the <code>-d</code> option). You can run the <code>./cdfctl.sh deployment -h</code> command to view other options. When the application deployment is successful, you will see this message: \"Successfully created deployment <em>&lt;name&gt;</em>\".</li>\n<li>After successful deployment, patch the namespace by updating the <code>openshift.io/sa.scc.supplemental-groups</code> field to the desired group ID and the <code>openshift.io/sa.scc.uid-range</code> field to the desired user ID in the following command:\n\t<pre><code>kubectl patch ns &lt;namespace&gt; -p '{\"metadata\":{\"annotations\":{\"openshift.io/sa.scc.supplemental-groups\":\"GroudID/10000\"}}}'\nkubectl patch ns &lt;namespace&gt; -p '{\"metadata\":{\"annotations\":{\"openshift.io/sa.scc.uid-range\":\"UserID/10000\"}}}'\n</code></pre>\n<p>For example, to specify <strong>1000000</strong> and <strong>2000000</strong> for the user ID and group ID respectively, update the ranges as follows:</p>\n<pre><code>kubectl patch ns auditns -p '{\"metadata\":{\"annotations\":{\"openshift.io/sa.scc.supplemental-groups\":\"2000000/10000\"}}}'\nkubectl patch ns auditns -p '{\"metadata\":{\"annotations\":{\"openshift.io/sa.scc.uid-range\":\"1000000/10000\"}}}'</code></pre>\n<p>Output:</p>\n<pre><code>\"namespace/&lt;namespace&gt; patched\"</code></pre>\n<p><br/>\n\t </p>\n</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}