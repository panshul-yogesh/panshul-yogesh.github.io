{
  "title": "Create UD/UCMDB Consumer customer for Native SACM",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p>This section describes the procedure to create a UCMDB Consumer customer for a Native SACM.</p><div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\">This section only introduces UD/UCMDB Multi-Customer under the converged authorization solution. For UD/UCMDB Multi-Customer management details, see the UD/UCMDB documentation <a href=\"/doc/403/25.4/multicustomermgmt\" title=\"Multi-Customer management\">Multi-Customer management</a>.</div></div><div><h2>Roles</h2><div class=\"transcontent stn-begin--role\"></div><p>When the system provisions a UCMDB customer, the UD/UCMDB out-of-the-box (OOTB) roles with built-in permissions are automatically seeded to the corresponding IdM organization. The application field of these seeded UD/UCMDB roles is \"CMDB\" (as shown in the following screenshot).</p><div><a class=\"image\" href=\"/file/images/b/b8/cms202102_ootb_role_application_field_idm_2.jpg\" title=\"/file/images/b/b8/cms202102_ootb_role_application_field_idm_2.jpg\"><img alt=\"cms202102_ootb_role_application_field_idm_2\" border=\"0\" file=\"/mediawiki/images/b/b8/cms202102_ootb_role_application_field_idm_2.jpg\" height=\"218\" hspace=\"0\" src=\"../../../images/cms202102_ootb_role_application_field_idm_2_143bf59e.jpeg\" vspace=\"0\" width=\"800\"/></a></div><p>For details of the UD/UCMDB OOTB roles, see <a href=\"/doc/ucmdb_containerized/25.4/rlmpermsum#Out-of-the-Box_Roles\" title=\"UD/UCMDB out-of-the-box roles\">UD/UCMDB out-of-the-box roles</a>.</p><p>The suite admin can do UD/UCMDB pre-authorization in IdM by associating these UD/UCMDB OOTB roles to corresponding IdM groups so that the suite admin doesn't need to grant permissions to the roles in UD/UCMDB manually but mapping to the built-in permissions. With the converged authorization solution, you can use the seeded UD/UCMDB OOTB <strong>SuperAdmin</strong> role directly in the Service Management agent portal without the need of creating a new UD/UCMDB Super Admin role manually.</p><div class=\"transcontent stn-end--role\"></div><h2 lang=\"EN-US\" xml:lang=\"EN-US\">Personas </h2><p lang=\"EN-US\" xml:lang=\"EN-US\">Setting up UD/UCMDB Multi-Customer includes sequential procedures and involves different personas in your organization. With the converged authorization solution, Service Management and UD/UCMDB share the users to manage both Service Management and UD/UCMDB. </p><table><thead><tr><th scope=\"col\">User</th><th scope=\"col\">IdM Organization</th><th scope=\"col\">UCMDB customer</th><th scope=\"col\">Responsibility</th></tr></thead><tbody><tr><td><strong>suite-admin</strong></td><td><strong>sysbo</strong></td><td>Provider customer</td><td><p>The <strong>suite-admin</strong> user is the out-of-the-box suite administration user, who has full admin rights on both Suite Administration and IdM. </p><p>After you manually associate the OOTB role \"<strong>SuperAdmin</strong>\" with the <strong>CMDB</strong> application field to the administrators group during the UD/UCMDB deployment, users under this group are pre-authorized with the UD/UCMDB super admin permissions. As a result, <strong>suite-admin</strong> becomes the super admin of the UCMDB Provider customer (with the Server Administrator Privileges flag set and the <strong>SuperAdmin</strong> role granted) and replaces the OOTB super admin users <strong>admin</strong> and <strong>sysadmin </strong>in the Provider customer. The <strong>suite-admin</strong> user can log in to JMX console with full access and can perform global JMX operations, such as creating Consumer customers and deleting Consumer customers. </p><p><strong>Note</strong>: We highly recommend that you use the shared administration user (<strong>suite-admin</strong>) to manage UD/UCMDB and Service Management. If you insist on using the original UD/UCMDB OOTB admin users (<strong>admin </strong>or <strong>sysadmin</strong>) to manage UD/UCMDB, see <a href=\"/doc/423/26.1/usecmsadminorsysadmin\" title=\"Use the original UD/UCMDB admin or sysadmin instead of suit-admin\">Use the original UD/UCMDB admin or sysadmin instead of suit-admin</a>.</p></td></tr><tr><td>The user with the Tenant Admin role</td><td>Organization of the corresponding Service Management tenant ID</td><td>Consumer customer (Best practice is to use the Service Management tenant ID as customer name)</td><td>The tenant admin manages the tenant-level business. This person is also the administration user of the UCMDB Consumer customer who can only manage its own customer data isolated per customer and with limited JMX console permission. </td></tr></tbody></table><h2 id=\"Quick_start_for_UCMDB_multi-customer\">Create a UCMDB Consumer customer with the converged authorization solution</h2><p>In the UD/UCMDB Multi-Customer mode, the UCMDB Provider customer is a system-level customer used to administer the UCMDB application and manage UCMDB Consumer customers. You must have one and only one UCMDB Provider customer in the system. Don't use the UCMDB Provider customer to manage any business data.</p><p>To create a UCMDB Consumer customer that manages the data within its own customer territory under the converged authorization solution, perform the following steps:</p><table border=\"1\"><thead><tr role=\"row\"><th role=\"rowheader\" scope=\"col\"><div lang=\"EN-US\" xml:lang=\"EN-US\">Step</div></th><th role=\"columnheader\" scope=\"col\"><div lang=\"EN-US\" xml:lang=\"EN-US\">Persona </div></th><th role=\"columnheader\" scope=\"col\"><div lang=\"EN-US\" xml:lang=\"EN-US\">Location  </div></th><th role=\"columnheader\" scope=\"col\"><div lang=\"EN-US\" xml:lang=\"EN-US\">Task </div></th></tr></thead><tbody><tr role=\"row\"><td role=\"rowheader\"><div lang=\"EN-US\" xml:lang=\"EN-US\">1 </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Suite admin </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Suite Administration </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Provision a Service Management tenant with an IdM organization  </div></td></tr><tr role=\"row\"><td role=\"rowheader\"><div lang=\"EN-US\" xml:lang=\"EN-US\">2 </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Suite admin </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">UCMDB JMX console </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Provision a UCMDB Consumer customer </div></td></tr><tr role=\"row\"><td role=\"rowheader\"><div lang=\"EN-US\" xml:lang=\"EN-US\">3 </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Suite admin </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">UCMDB JMX console </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Map the UCMDB Consumer customer to the IdM organization  </div></td></tr><tr role=\"row\"><td role=\"rowheader\"><div lang=\"EN-US\" xml:lang=\"EN-US\">4 </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Suite admin </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">IdM  </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Pre-authorize the UD/UCMDB <strong>superAdmin </strong>permission to the Service Management tenant admin user </div></td></tr><tr><td role=\"rowheader\">5</td><td>Tenant admin</td><td>UCMDB Local Client  </td><td>Select tenants for roles when multi-tenancy is enabled</td></tr><tr role=\"row\"><td role=\"rowheader\"><div lang=\"EN-US\" xml:lang=\"EN-US\">6</div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Suite admin </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Suite Administration </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Enable Native SACM for this Service Management tenant  </div></td></tr><tr role=\"row\"><td role=\"rowheader\"><div lang=\"EN-US\" xml:lang=\"EN-US\">7</div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Tenant admin </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Service Management agent interface</div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Create UD/UCMDB custom roles, users, and groups </div></td></tr><tr role=\"row\"><td role=\"rowheader\"><div lang=\"EN-US\" xml:lang=\"EN-US\">8</div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Tenant admin </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">UCMDB Local Client  </div></td><td><div lang=\"EN-US\" xml:lang=\"EN-US\">Assign UD/UCMDB permissions to custom roles </div></td></tr></tbody></table><h3>Step 1: Create a Service Management tenant</h3><p>When the <strong>suite-admin</strong> creates a Service Management tenant in Suite Administration, a corresponding IdM organization (with the same ID as the Service Management tenant) is automatically created in the suite IdM. The assigned tenant admin user is then seeded into the newly created IdM organization. For example, when you create a tenant with ID 654596672, the corresponding IdM organization name will be automatically set as 654596672.</p><h3>Step 2: Create a UCMDB Consumer customer</h3><ol><li><p>Log in to the JMX Console of the UCMDB Provider customer as <strong>suite-admin</strong>: <strong>https://&lt;EXTERNAL_ACCESS_HOST&gt;:&lt;PORT&gt;/jmx-console</strong></p></li><li><p>Search for the <b>addCustomer</b> JMX method in the <b>UCMDB:service=Customer and States Services</b> category.</p></li><li><p>Provide values for the following parameters:</p><div><table><thead><tr><th scope=\"col\"><p>Parameter</p></th><th scope=\"col\"><p>Required</p></th><th scope=\"col\"><p>Description</p></th><th scope=\"col\"><p>Example</p></th></tr></thead><tbody><tr><td><p>customerId</p></td><td><p>Yes</p></td><td><p>Enter the Service Management tenant ID (9-digit number) that is created in \"Step 1: Create a Service Management tenant\".</p></td><td><p>654596672</p></td></tr><tr><td><p>customerName</p></td><td><p>Yes</p></td><td><p>Enter a unique customer name (the name can't be changed after creation). Use the same display name as supplied when creating the Service Management tenant in step 1. </p></td><td><p>654596672</p></td></tr><tr><td><p>configId</p></td><td><p>No</p></td><td><p>Leave the field empty.</p></td><td></td></tr></tbody></table></div></li><li>Click <b>Invoke</b>.</li><li>Access the <strong>UCMDB Server Status</strong> page (<strong>https://&lt;EXTERNAL_ACCESS_HOST&gt;:&lt;EXTERNAL_ACCESS_PORT&gt;/status</strong>) to make sure that the status is <strong>Fully Up</strong> for the newly added customer. This will take around 10 minutes. </li></ol><h3>Step 3: Map the UCMDB Consumer customer to the IdM organization  </h3><p>To define the mapping between the UCMDB Consumer customer and the IdM organization, follow these steps as<strong> suite-admin</strong>:</p><ol><li>Log in to the JMX Console of the UCMDB Provider customer: <strong>https://&lt;EXTERNAL_ACCESS_HOST&gt;:&lt;PORT&gt;/jmx-console</strong></li><li><p>Search for the <strong>assignIDMInfo </strong>JMX method in the <b>UCMDB:service=Customer and States Services</b> category.</p></li><li><p>Provide values for the following parameters:</p><div><table><thead><tr><th scope=\"col\"><p>Parameter</p></th><th scope=\"col\"><p>Required</p></th><th scope=\"col\"><p>Description</p></th><th scope=\"col\"><p>Example</p></th></tr></thead><tbody><tr><td><p>customerID</p></td><td><p>Yes</p></td><td><p>Enter the UCMDB Consumer customer ID that you created in \"Step 2: Create a UCMDB Consumer customer\". This should be the same as the Service Management tenant ID created in step 1. </p></td><td><p>654596672</p></td></tr><tr><td><p>tenantName</p></td><td><p>Yes</p></td><td><p>Enter the IdM organization ID. This is the same as the Service Management tenant ID created in step 1. This will then map the UCMDB customer ID to the IdM organization. </p></td><td><p>654596672</p></td></tr><tr><td><p>defaultGroup</p></td><td><p>No</p></td><td><p>This sets the Default UCMDB group used by IdM users. Users in that group will inherit all the roles assigned to that default group. Make sure the default group is assigned with proper permissions for accessing UCMDB UI and if relevant the UCMDB Admin UI.</p></td><td></td></tr></tbody></table></div></li><li>Click <b>Invoke</b>.</li></ol><p>After you invoke the <strong>assignIDMInfo </strong>operation in JMX, the system automatically triggers a process to seed the UD/UCMDB OOTB roles to the mapped IdM organization.</p><p>To check the seeding status, follow these steps as<strong> suite-admin</strong>:</p><ol><li>Log in to the JMX Console of the UCMDB Provider customer: <strong>https://&lt;EXTERNAL_ACCESS_HOST&gt;:&lt;PORT&gt;/jmx-console</strong></li><li>Search for the <strong>showAllCustomers </strong>JMX method in the <b>UCMDB:service=Customer and States Services</b> category.</li><li>Make sure that the value of column <strong>Seeding role status</strong> is <strong>SUCCESS</strong>. </li></ol><h3>Step 4: Create a tenant admin group in the IdM organization</h3><p>To create a tenant admin group and associate the seeded UCMDB admin role, follow these steps as <strong>suite-admin</strong>:</p><ol><li>Log in to the IdM (<strong>https://&lt;External_Access_Host&gt;/idm-admin</strong>), and then access the IdM organization that correlated to the Service Management tenant and the UCMDB Consumer customer (Created in step 1 and step 2 above).</li><li>Go to <strong>Groups </strong>in the navigation pane,  and then click the add icon in the toolbar. The <strong>ADD GROUP</strong> page appears.</li><li>Provide values for the following parameters:\n\t<div><table align=\"center\"><thead><tr><th scope=\"col\"><p>Field (*required)</p></th><th scope=\"col\"><p>Description</p></th></tr></thead><tbody><tr><td><p>Name *</p></td><td><p>Name of the tenant admin group.</p></td></tr><tr><td><p>Display Name *</p></td><td><p>Display name of the tenant admin group.</p></td></tr><tr><td><p>Description</p></td><td><p>Description of the tenant admin group.</p></td></tr><tr><td><p>Associated Roles*</p></td><td><p>Search for and add the OOTB role <strong>SuperAdmin </strong>with the <strong>CMDB</strong> application field.</p><p><strong>Note</strong>: Only UD/UCMDB roles can be added here; the Service Management roles aren't represented in IdM. </p></td></tr><tr><td><p>Associated Users*</p></td><td><p>Search for and add the tenant admin user.</p></td></tr></tbody></table></div></li><li>Click <strong>Save</strong>.</li></ol><p>The following is an example:</p><div><a class=\"image\" href=\"/file/images/e/e4/SMAX21.05_shared_IdM_group_settings.png\" title=\"/file/images/e/e4/SMAX21.05_shared_IdM_group_settings.png\"><img alt=\"SMAX21\" border=\"0\" file=\"/mediawiki/images/e/e4/SMAX21.05_shared_IdM_group_settings.png\" height=\"401\" hspace=\"0\" src=\"../../../images/SMAX21.05_shared_IdM_group_settings_4bf2d493.png\" style=\"width: 800px; height: 401px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/></a></div><p>Now you can access the UCMDB customer with the tenant admin account. The tenant admin is the administrative user of the new UCMDB Consumer customer. This specific tenant admin can only manage its own customer data and has limited JMX console permissions.</p><table><thead><tr><th scope=\"col\"><p>User interface</p></th><th scope=\"col\"><p>Login URL</p></th></tr></thead><tbody><tr><td><p>UCMDB UI</p></td><td><p><strong>https://&lt;EXTERNAL_ACCESS_HOST&gt;:&lt;PORT&gt;/ucmdb-browser?customerID=&lt;CustomerID&gt;</strong></p></td></tr><tr><td><p>UCMDB Admin UI</p></td><td><p><strong>https://&lt;EXTERNAL_ACCESS_HOST&gt;:&lt;PORT&gt;/ucmdb-ui?customerID=&lt;CustomerID&gt;</strong></p></td></tr><tr><td><p>UCMDB JMX Console</p></td><td><p><strong>https://&lt;EXTERNAL_ACCESS_HOST&gt;:&lt;PORT&gt;/jmx-console?customerID=&lt;CustomerID&gt;</strong></p></td></tr><tr><td><p>UCMDB Landing Page</p></td><td><p><strong>https://&lt;EXTERNAL_ACCESS_HOST&gt;:&lt;PORT&gt;/cms</strong></p></td></tr></tbody></table><h3>Step 5: (Optional) Select tenants for roles when UCMDB multi-tenancy is enabled</h3><span class=\"snippet-start\" data-sname=\"423-25.4-423-25.3-SelectTenantsForRole||N\"></span><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>When multi-tenancy is enabled, you need to use the <b>Select Tenants for Role </b>dialog box to select tenants for roles after synchronizing groups and roles from IdM to UCMDB.</p>\n<p>To select tenants for roles, follow these steps:</p>\n<ol start=\"1\">\n<li>\n<p>In the Local Client, from the <b>Security</b> module, click <b>Users and Groups</b>.</p>\n</li>\n<li>\n<p>Select a group, and then go to the <b>Roles </b>tab. The roles synchronized from IdM are displayed in the<strong> Selected Roles </strong>section.</p>\n</li>\n<li>\n<p>Click the <b>Edit</b> link at the top right of the <strong>Selected Roles </strong>section.</p>\n</li>\n<li>\n<p>Move the roles from the <strong>Selected Roles </strong>section to the <strong>Available Roles</strong> section by using the arrow buttons.</p>\n</li>\n<li>\n<p>Select a role synchronized from IdM such as \"SuperAdmin\" in the <strong>Available Roles</strong> section and move it back to the <strong>Selected Roles </strong>section by using the arrow buttons. The<b> Select Tenants for Role </b>dialog box opens.</p>\n<div class=\"Admonition_Note\"><span class=\"autonumber\">Note</span> Only select the role that is synchronized from IdM and move it to the <strong>Selected Roles </strong>section. Don't move other roles that are not synchronized from IdM. The association between roles and groups is defined in IdM instead of the Local Client.</div>\n</li>\n<li>\n<p>In the <b>Select Tenants for Role </b>dialog box, select the tenants that you want to associate with the role. User interface elements are described as follows:</p>\n<table>\n<tbody><tr>\n<th>UI Element (A-Z)</th>\n<th>Description</th>\n</tr>\n<tr>\n<td><b>All Tenants</b></td>\n<td>Select <b>All Tenants</b> to associate all tenants with the role assigned to the user or group.</td>\n</tr>\n<tr>\n<td><b>Available Tenants</b></td>\n<td>The list of all available tenants.</td>\n</tr>\n<tr>\n<td><b>Selected Tenants</b></td>\n<td>The tenants selected for the role assigned to the user or group.</td>\n</tr>\n<tr>\n<td><b>Specified Tenants</b></td>\n<td>Select <b>Specified Tenants</b> to associate only the specified tenants with the role assigned to the user or group.</td>\n</tr>\n</tbody></table>\n<p>\tFor example, if you select <strong>All Tenants</strong> for the \"SuperAdmin\" admin role, the <strong>Role's Assigned Tenants</strong> section is updated as in the following screenshot:<br/>\n</p>\n<a class=\"image\" href=\"/file/images/4/41/cms_select_role.png\" title=\"/file/images/4/41/cms_select_role.png\"> <img alt=\"Role's Assigned Tenants\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/4/41/cms_select_role.png\" height=\"431\" hspace=\"0\" src=\"../../../images/cms_select_role_f520aa79.png\" style=\"width:800px;height:431px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"800\"/> </a></li>\n<li>\n<p>Repeat these steps 5-6 for the other roles synchronized from IdM.</p>\n</li>\n</ol>\n<p><br/>\n</p>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p><span class=\"snippet-end\" data-sname=\"423-25.4-423-25.3-SelectTenantsForRole||N\"></span><h3>Step 6: Enable Native SACM</h3><p>Now you can continue to enable Native SACM for the UCMDB Consumer customer. For details, see <a href=\"/doc/423/26.1/enablenativesacminsma\" title=\"Enable Native SACM in Service Management\">Enable Native SACM in Service Management</a>.</p><h3>Step 7: (Optional) Create custom roles, users, and groups in the new UCMDB Consumer customer</h3>\nIf only the tenant admin account is needed, you can skip this step.\n\n<p>To create custom accounts in the newly added UCMDB Consumer customer under the UD/UCMDB Multi-Customer mode, see <a href=\"/doc/423/26.1/createcmsnonadiminroleuserssharedidm\" title=\"Create UD/UCMDB custom roles, users, and groups\">Create UD/UCMDB custom roles, users, and groups</a>.</p><h3>Step 8: Assign UD/UCMDB permissions to custom roles </h3><p>After the groups and roles are synchronized from IdM to UCMDB automatically, the tenant admin can assign UD/UCMDB permissions to the custom roles in UCMDB Local Client. See <a href=\"/doc/423/26.1/createcmsnonadiminroleuserssharedidm#Grant_CMS_permissions_to_synchronized_roles\" title=\"Grant UD/UCMDB permissions to synchronized roles\">Grant UD/UCMDB permissions to synchronized roles</a>.</p></div></div><p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}