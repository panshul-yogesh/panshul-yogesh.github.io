{
  "title": "Create a deployment for ESM",
  "content": "<div class=\"mw-parser-output\"><table>\n<tbody>\n<tr>\n<th>Role</th>\n<th>Location</th>\n</tr>\n<tr>\n<td>Service Networking Admin and Editor</td>\n<td>Bastion node</td>\n</tr>\n</tbody>\n</table>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>Perform this task if you're going to install the suite using the CLI method. Skip it if you're going to use OMT AppHub. If you have already created namespace for the deployment, you can ignore this page.</div></div></div>\n<p>The <code>cdfctl </code>OMT tool is required to create a new deployment with helm charts. This tool uses a namespace, default certificate, and service account to install an application.</p>\n<p>If you're using OMT, you must make sure that the system user ID and group ID in the OMT and suite namespaces are the same. This topic describes how to do this. Additionally, the default value of the system user ID and group ID used by OMT (<strong>1999</strong>) is outside the range permitted by OpenShift. Therefore, you will have to specify the custom values that you configure in this topic later when you configure NFS directories and when you configure the values.yaml file. </p>\n<p>Use the following steps to create a new deployment for the suite. </p>\n<ol>\n<li>Log on to the bastion node as the root user or the regular user with elevated permissions.</li>\n<li>Run the following command to create a namespace for the suite:\n\t<pre><span style=\"font-size:11.0pt\"><span style=\"font-family:Calibri\">OMT_External_K8s_2x.x-xxx</span></span>/bin/cdfctl deployment create -d &lt;Deployment_Name&gt;</pre>\n\tIn this command, <em>&lt;Deployment_Name&gt;</em> is a placeholder for the name that you wish to refer to your deployment. \n\n\t<pre><span style=\"font-size:11.0pt\"><span style=\"font-family:Calibri\">OMT_External_K8s_2x.x-xxx</span></span>/bin/cdfctl deployment create -d itsma</pre>\n</li>\n<li>The deployment will automatically create a namespace with the same name as the deployment. Run the following command to confirm that a namespace with the same name is created:\n\t<pre>kubectl get ns &lt;namespace&gt; -o yaml</pre>\n\tThe output resembles the following:\n\n\t<pre><code>apiVersion: v1\nkind: Namespace\nmetadata:\n annotations:\n   openshift.io/sa.scc.mcs: s0:c27,c4\n   openshift.io/sa.scc.supplemental-groups: 1000710000/10000\n   openshift.io/sa.scc.uid-range: 1000710000/10000\n creationTimestamp: \"2025-03-17T02:41:59Z\"\n labels:\n  deployments.microfocus.com/deployment-name: itsma\n  deployments.microfocus.com/deployment-uuid: d8425c67-4680-4600-9bef-e1724f139e62\n  kubernetes.io/metadata.name: itsma\n  pod-security.kubernetes.io/audit: restricted\n  pod-security.kubernetes.io/audit-version: v1.24\n  pod-security.kubernetes.io/warn: restricted\n  pod-security.kubernetes.io/warn-version: v1.24\n name: itsma\n resourceVersion: \"47110206\"\n uid: fa9e8dfe-7920-4457-b1ac-a68049fca938\nspec:\n finalizers:\n - kubernetes\nstatus:\n phase: Active</code></pre>\n</li>\n<li>Confirm your group ID according to <code>openshift.io/sa.scc.supplemental-groups</code> field  and user ID according to the <code>openshift.io/sa.scc.uid-range</code> field  For example, confirm <strong>1000710000 </strong>and <strong>1000710000 </strong>for the group ID and  user ID respectively, they will be needed in later steps such as configuring NFS volumes:\n\t<pre><code>openshift.io/sa.scc.supplemental-groups: 1000710000/10000\nopenshift.io/sa.scc.uid-range: 1000710000/10000</code></pre>\n</li>\n</ol>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}