{
  "title": "Dev2Prod - Package size is too large",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>When you run a Dev2Prod simulation import or a real import, one of the following errors occurs. </p>\n<p>Error 1:</p>\n<pre><code>Max Dev2Prod package file size exceeded. You can't import a PKB file larger than xxxxx KB in size.</code></pre>\n<p>Error 2: </p>\n<pre><code>413: Package size exceeds an internal size limit. </code></pre>\n<h2>Cause</h2>\n<p>When you import a Dev2Prod package in .pkb format into a tenant, the import fails in any of the following scenarios:</p>\n<ul>\n<li>Error 1: The package file size exceeds the <strong>Max Dev2Prod package file size </strong>value defined in Suite Administration (tenant details &gt; <strong>Application settings</strong> tab). The default value is 50 MB. </li>\n<li>Error 2: The package file size exceeds an internal size limit defined in the relevant ingress and nginx configurations (default: 100 MB). </li>\n</ul>\n<h2>Solution</h2>\n<p>Fix the issue according to the error that you receive. </p>\n<h3>If error 1 occurs</h3>\n<p>Ask the Suite Admin to increase the tenant's <strong>Max Dev2Prod package file size </strong>value in Suite Administration. </p>\n<h3>If error 2 occurs</h3>\n<p>When this issue occurs, ask the Suite Admin to perform the following steps:</p>\n<ol>\n<li>Log in to a control plane node or the bastion node as the root or a sudo user.</li>\n<li>Change the <strong>proxy-body-size </strong>value in ingress itom-xruntime-bots-ingress:\n\t<ol start=\"1\">\n<li>Run the following command:\n\t\t<pre><code>kubectl edit ingress itom-xruntime-bots-ingress -n &lt;suite namespace&gt;</code></pre>\n</li>\n<li>Change the <strong>ingress.kubernetes.io/proxy-body-size</strong> value from 100m to your desired value:\n\t\t<pre><code>apiVersion: extensions/v1beta1\nkind: Ingress\nmetadata:\n  annotations:\n    ingress.kubernetes.io/backend-protocol: HTTPS\n    ingress.kubernetes.io/proxy-body-size: 100m</code></pre>\n</li>\n<li>Save the file.</li>\n</ol>\n</li>\n<li>Change the nginx size limit in the maas-locations.conf file in the itom-xruntime-ui container:\n\t<ol start=\"1\">\n<li>Run the following command to get the name of the itom-xruntime-ui pod (the pod name is in itom-xruntime-ui-xxxxxxxxx format):\n\t\t<pre><code>kubectl get pods -n &lt;suite namespace&gt;|grep itom-xruntime-ui</code></pre>\n</li>\n<li>Enter the itom-xruntime-ui container:\n\t\t<pre><code>kubectl exec -it itom-xruntime-ui-xxxxxxxxx -c itom-xruntime-ui -n &lt;suite namespace&gt; /bin/bash</code></pre>\n</li>\n<li>Run the following commands:\n\t\t<pre><code>cd /opt/maas-apps/ui/nginx/conf  \nvim maas-locations.conf</code></pre>\n</li>\n<li>Update the <strong>client_max_body_size</strong> value from <strong>100M</strong> to your desired value.\n\t\t<pre><code># for dev2prod\nlocation ~ ^/rest/\\w*/package-manager/frs/file-list {\n  #turn off gzip for file calls so it will not gzip attachments.\n  gzip off;\n\n    limit_req zone=bots burst=999;\n    proxy_pass https://gateway;\n\n  proxy_set_header Host $http_host;\n  client_max_body_size 100M;\n  #proxy_read_timeout 300s;\n</code></pre>\n</li>\n<li>Save the file.</li>\n<li>Run the following command to reload nginx:\n\t\t<pre><code>nginx -s reload</code></pre>\n</li>\n<li>Run the following command to exit the container:\n\t\t<pre><code>exit</code></pre>\n</li>\n</ol>\n</li>\n</ol>\n<p>Now, you can retry the import.</p>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}