{
  "title": "Dev2Prod - Synchronize Service Catalog content",
  "content": "<div class=\"mw-parser-output\"><br/><p style=\"margin-bottom:12px\">As a tenant admin, you can also use the <strong>Dev2Prod</strong> process to synchronize Service Catalog content data from one tenant to another, in particular, from a development tenant to a production tenant. </p>\n<h2 style=\"margin-top: 4px;\">Typical use cases</h2>\n<p>The following are typical use cases of this feature. </p>\n<h3>Incremental <strong>Dev2Prod</strong> catalog development</h3>\n<p>A customer may define Service Catalog content in a Development tenant. Once ready, the content can be packaged and moved to Production. Just as with normal <strong>Dev2Prod</strong>, this activity can take place any time as the customer develops new Service Catalog content incrementally and moves the latest changes to Production. The following diagram illustrates this use case.</p>\n<div><a class=\"image\" href=\"\"> <img alt=\"SMA_202011_dev2prod_catalog_usecase1\" border=\"0\" file=\"/mediawiki/images/3/3e/SMA_202011_dev2prod_catalog_usecase1.png\" height=\"310\" hspace=\"0\" src=\"../../../images/SMA_202011_dev2prod_catalog_usecase1_2601ed0c.png\" style=\"width: 800px; height: 310px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></div>\n<h3>Golden Catalog provider</h3>\n<p>A partner or MSP may develop a Golden Catalog with best-practice content. This catalog can be packaged and made available for importing into customer tenants. The customer may have developed Catalog content of their own, and the provider’s Golden Catalog can be imported and merged into content already available in the customer tenant. The following diagram illustrates this use case.</p>\n<div><a class=\"image\" href=\"\"> <img alt=\"SMA_202011_dev2prod_catalog_usecase2\" border=\"0\" file=\"/mediawiki/images/a/ae/SMA_202011_dev2prod_catalog_usecase2.png\" height=\"244\" hspace=\"0\" src=\"../../../images/SMA_202011_dev2prod_catalog_usecase2_a9b46486.png\" style=\"width: 800px; height: 244px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></div>\n<h2>How it works</h2>\n<p>The following describes how this feature works, including what's included in a catalog package (<strong>.pkb</strong>) when exported from a source tenant and how data is reconciled when a package is imported into a target tenant. </p>\n<h3>Supported record types</h3>\n<p>When you create a new package (<strong>Administration</strong> &gt; <strong>Utilities</strong> &gt; <strong>Packages</strong>) to export Service Catalog data, you can select the <strong>Service Portfolio/Catalog</strong> module, and then select the following types of records:</p>\n<ul>\n<li>Categories</li>\n<li>Service Definitions</li>\n<li>Offerings (including DND aggregated offerings—see <a href=\"/doc/423/26.1/dev2prodsyncaggregatedofferings\" title=\"Dev2Prod - Synchronize aggregated offerings\">Dev2Prod - Synchronize aggregated offerings</a>)</li>\n<li>Fulfillment Plans</li>\n</ul>\n<p>For each of these record types, two options are available: <strong>Configurations</strong> and <strong>Data</strong>. Normally, you need to select both options in one export so that the selected Service Catalog records and their supporting configuration changes (if any) are exported together: configurations first, and then data. For each record type, you can select a subset of the records by using a data filter. If there is no filter defined for Data, all data of this record type will be exported, except that aggregated offerings are always excluded. You can define the same filters as you do in the grid view. </p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">When exporting catalog records, the Package Manager also exports Entitlement Rules and Asset Models that are referenced in these catalog records as their supporting data, but doesn't export the entity link data in the Entitlement Rules and Asset Models. For example, the Package Manager doesn't export the Group record referenced by an Entitlement Rule, and exports only the relationship between the Group and Entitlement Rule records. </div>\n</div>\n<h3>Packaging of data fields</h3>\n<p>The following explains how the fields of packaged catalog records are handled.</p>\n<h4>Non-packaged fields</h4>\n<p>For packaged catalog data records, all fields are exported, except the following out-of-the-box fields:</p>\n<ul>\n<li>Category: History, Creation Time, and Last Update Time</li>\n<li>Service Definition: Workflow, Related records, Related knowledge, Discussion, History, Number of related records, Creation Time, and Last Update Time</li>\n<li>Offering: Discussions, History, Number of requests, Created Time, Creation Time, and Last Update Time</li>\n<li>Fulfillment Plan: Discussions, History, Creation Time, and Last Update Time</li>\n<li>Entitlement Rule: History, Creation Time, and Last Update Time</li>\n</ul>\n<p>Additionally, the following types of fields/attributes aren't packaged:</p>\n<ul>\n<li>Custom calculated fields</li>\n<li>Custom <strong>Many2Many</strong> fields (links with a custom record type), which are created by using the <strong>New association</strong> button in Studio</li>\n<li><strong>M:M Grid</strong> and <strong>1:M Grid</strong> fields</li>\n<li>Filter and Columns settings of the <strong>Audience</strong> and <strong>Subject matter experts</strong> fields</li>\n<li>Images defined in the Rules of an offering</li>\n</ul>\n<h4>Attachments</h4>\n<p>Attachments in the following record types are exported:</p>\n<ul>\n<li>Category: files attached in the Image section</li>\n<li>Service Definition: files attached in the Description field, and in the Attachments section</li>\n<li>Offering: files attached in the Description field, and in the Image section</li>\n</ul>\n<p>In order to be imported into a target tenant, packaged attachments must comply with the attachment allowlist and maximum file size defined on the target tenant.</p>\n<h4>Relationship handling</h4>\n<p>For selected catalog records, the system handles relationships as follows:</p>\n<ul>\n<li>It doesn't package related records that are related through entity links: only the key of the relationship is packaged. An exception is when an out-of-the-box entity link references the Offered asset model field; in this case the related records are packaged.</li>\n<li>It packages out-of-the-box Many2Many fields - both the relationships and related records are packaged. This includes Entitlement Rules, Asset Models, and bundled Offerings. Persons are an exception (only the UPN of the related person is packaged).</li>\n<li>It doesn't package related Asset Model data that is related through custom entity links (including user options) or Many2Many relationships.</li>\n<li>It packages only 1st-level related records (whether related through entity links or Many2Many relationships).</li>\n</ul>\n<p>You need to make sure the package content definition includes all relevant catalog data, and that any referenced entity data already exists in the target tenant before you import the package.</p>\n<h4>Localizations</h4>\n<p>When exporting a package, the system also includes the following localization data for selected catalog records: </p>\n<ul>\n<li>Localization data created from the UI. This includes localization data created from the UI for items such as user option labels, user option help text, rule descriptions, volatile enumeration display values, and localizable parameters of business rules.</li>\n<li>Localized content that's managed by the Export/Import localization process. This includes localized content of Categories, Service Definitions, and Offerings, which is created by exporting the English data through the <strong>Export for localization</strong> option to a CSV file and then importing the translated CSV file back to the system. </li>\n</ul>\n<h3>Catalog data reconciliation</h3>\n<p>When importing a package into a target tenant, the system uses a unique key to look for matching records.</p>\n<h4>Types of unique keys</h4>\n<p>Two types of unique keys are used for reconciliation for different record types:</p>\n<ul>\n<li>UUID: UUID is a system-level field that stores a system-generated unique identifier for each record of these record types. This field is enabled for Categories, Service Definitions, Offerings, Fulfillment Plans, Entitlement Rules, and Asset Models. Note that when creating new records, the system automatically generates a UUID, unless it has detected that the UUID field has already a value. This is to protect UUID values imported from a <strong>Dev2Prod</strong> package.\n\n\t<div class=\"admonition\">\n<div class=\"admonition-icon admonition-important-icon\"></div>\n<div class=\"admonition-content admonition-important-content\"> Rule reconciliation doesn't use UUID as the catalog data reconciliation does but still uses a unique key or <strong>DisplayLabel</strong>. When a record is referenced by a rule in an offering, if a unique key is defined out-of-the-box for its record type, the unique key is used for reconciliation; otherwise, <strong>DisplayLabel</strong> is used. For example, when an offering has a rule that sets an Entitlement Rule, DisplayLable (instead of UUID) is used to look for the entitlement rule during the import. </div>\n</div>\n</li>\n<li>Unique key or key group: used for record types (including custom record types) that are linked from Categories, Service Definitions, Offerings, Fulfillment Plans, Entitlement Rules, and Asset Models.\n\t<ul>\n<li>For each out-of-the-box record type, the field with enforced uniqueness is used. If there is no unique property defined, the <strong>DisplayLabel</strong> field is used by default unless otherwise stated. </li>\n<li>For custom record types, if a primary key is defined, the primary key is used; otherwise, <strong>DisplayLabel</strong> is used. </li>\n</ul>\n</li>\n</ul>\n<p>See the following tables for more details.</p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n<caption>Type 1: Using UUID as the reconciliation key</caption>\n<thead>\n<tr>\n<th scope=\"col\">Packaged or not</th>\n<th scope=\"col\">Record type</th>\n<th scope=\"col\">Reconciliation key</th>\n<th scope=\"col\">Notes</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td colspan=\"1\" rowspan=\"6\">Not packaged</td>\n<td>Category</td>\n<td>UUID</td>\n<td colspan=\"1\" rowspan=\"4\">These are the main catalog record types.</td>\n</tr>\n<tr>\n<td>Offering</td>\n<td>UUID</td>\n</tr>\n<tr>\n<td>Service Definition</td>\n<td>UUID</td>\n</tr>\n<tr>\n<td>Fulfillment Plan</td>\n<td>UUID</td>\n</tr>\n<tr>\n<td>Entitlement Rule</td>\n<td>UUID</td>\n<td colspan=\"1\" rowspan=\"2\">These are <strong>M2M</strong> record types (except Person) referenced in the main catalog record types listed above. </td>\n</tr>\n<tr>\n<td>Asset Model</td>\n<td>UUID</td>\n</tr>\n</tbody>\n</table>\n<table style=\"border-collapse:collapse; width:515px\" width=\"644\">\n<caption>Type 2: Using an OOTB unique key as the reconciliation key</caption>\n<colgroup>\n<col style=\"width:78pt\" width=\"130\"/>\n<col span=\"2\" style=\"width:106pt\" width=\"177\"/>\n<col style=\"width:95pt\" width=\"159\"/>\n</colgroup>\n<thead>\n<tr>\n<th scope=\"col\">Packaged or not</th>\n<th scope=\"col\">\n<p>Record type</p>\n</th>\n<th scope=\"col\">\n<p>Reconciliation key</p>\n</th>\n<th scope=\"col\">\n<p>Notes</p>\n</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td colspan=\"1\" rowspan=\"30\">Not packaged</td>\n<td>\n<p><strong>Person</strong></p>\n</td>\n<td>\n<p><strong>Upn</strong></p>\n</td>\n<td rowspan=\"30\">\n<p>The reconciliation key is a field that has the \"Enforce uniqueness\" property enabled in the out-of-the-box (OOTB) system.</p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>Group</strong></p>\n</td>\n<td>\n<p><strong>Upn</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>Company</strong></p>\n</td>\n<td>\n<p><strong>Code</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>CostType</strong></p>\n</td>\n<td>\n<p><strong>Code</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>Contract</strong></p>\n</td>\n<td>\n<p><strong>ContractNumber</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>Stockroom</strong></p>\n</td>\n<td>\n<p><strong>Code</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>AccountingPeriod</strong></p>\n</td>\n<td>\n<p><strong>BusinessKey</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>BudgetLine</strong></p>\n</td>\n<td>\n<p><strong>BusinessKey</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>Budget</strong></p>\n</td>\n<td>\n<p><strong>BusinessKey</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>BudgetType</strong></p>\n</td>\n<td>\n<p><strong>Code</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>BusinessObjective</strong></p>\n</td>\n<td>\n<p><strong>BusinessKey</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>CostCenter</strong></p>\n</td>\n<td>\n<p><strong>Code</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>Device</strong></p>\n</td>\n<td>\n<p><strong>AssetTag</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>ExternalSystem</strong></p>\n</td>\n<td>\n<p><strong>SystemId</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>FinancialSummary</strong></p>\n</td>\n<td>\n<p><strong>BusinessKey</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>FiscalYear</strong></p>\n</td>\n<td>\n<p><strong>BusinessKey</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>FixedAsset</strong></p>\n</td>\n<td>\n<p><strong>FixedAssetNumber</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>InfrastructurePeripheral</strong></p>\n</td>\n<td>\n<p><strong>AssetTag</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>Issue</strong></p>\n</td>\n<td>\n<p><strong>BusinessKey</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>License</strong></p>\n</td>\n<td>\n<p><strong>AssetTag</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>Package</strong></p>\n</td>\n<td>\n<p><strong>UniqueId</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>Program</strong></p>\n</td>\n<td>\n<p><strong>BusinessKey</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>Project</strong></p>\n</td>\n<td>\n<p><strong>BusinessKey</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>ProjectPortfolio</strong></p>\n</td>\n<td>\n<p><strong>BusinessKey</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>Proposal</strong></p>\n</td>\n<td>\n<p><strong>BusinessKey</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>ResourceType</strong></p>\n</td>\n<td>\n<p><strong>DisplayLabel</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>Risk</strong></p>\n</td>\n<td>\n<p><strong>BusinessKey</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>Stockroom</strong></p>\n</td>\n<td>\n<p><strong>Code</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>Vendor Catalog</strong></p>\n</td>\n<td>\n<p><strong>Code</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>Survey</strong></p>\n</td>\n<td>\n<p><strong>Name</strong></p>\n</td>\n</tr>\n</tbody>\n</table>\n<table>\n<caption>Type 3: Using a predefined key group as the reconciliation key</caption>\n<colgroup>\n<col/>\n<col span=\"2\"/>\n<col/>\n</colgroup>\n<thead>\n<tr>\n<th scope=\"col\">\n<p>Packaged or not</p>\n</th>\n<th scope=\"col\">\n<p>Record type</p>\n</th>\n<th scope=\"col\">\n<p>Reconciliation key</p>\n</th>\n<th scope=\"col\">\n<p>Notes</p>\n</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td rowspan=\"5\">\n<p>Not packaged</p>\n</td>\n<td>\n<p><strong>Agreement</strong></p>\n</td>\n<td>\n<p><strong>DisplayLabel + Type</strong></p>\n</td>\n<td rowspan=\"5\">\n<p>Each of these record types has no field that has the\"Enforce uniqueness\" property enabled in the OOTB system. </p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>Location</strong></p>\n</td>\n<td><strong>Name + LocationType + FullName</strong></td>\n</tr>\n<tr>\n<td>\n<p><strong>TimePeriod</strong></p>\n</td>\n<td>\n<p><strong>DisplayLabel+TimePeriodType</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>TargetSet</strong></p>\n</td>\n<td>\n<p><strong>DisplayLabel+TargetSetType+AgreementType</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>&lt;Other record types not listed above&gt;</strong></p>\n</td>\n<td>\n<p><strong>DisplayLabel</strong></p>\n</td>\n</tr>\n<tr>\n<td></td>\n<td><strong>Custom applications</strong></td>\n<td><strong>&lt;Primary key&gt; or DisplayLabel</strong></td>\n<td>If a primary key is defined, the primary key is used; otherwise, <strong>DisplayLabel</strong> is used. </td>\n</tr>\n</tbody>\n</table>\n<h4>Reconciliation approach</h4>\n<p>The following table describes the actions during an import depending on whether the record is packaged or not. </p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n<thead>\n<tr>\n<th scope=\"col\">Reconciliation result</th>\n<th scope=\"col\">Packaged record</th>\n<th scope=\"col\">Non-packaged record (referenced in packaged records)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Only one matching record is found.</td>\n<td>Override the record in the target tenant</td>\n<td>Create a relationship in the target tenant</td>\n</tr>\n<tr>\n<td>No matching record or more than one matching record is found.</td>\n<td>Create a new  record in the target tenant</td>\n<td>Leave the field empty and issue a warning in the log</td>\n</tr>\n</tbody>\n</table>\n<p>When using UUID as the reconciliation key, if a matching record is found, the source record overrides the target record. The system uses the current state of the record in the source tenant as a baseline, so the current value of each field of the source record replaces the field in the target record. No merge happens. The following table provides examples.</p>\n<table style=\"border-collapse: collapse;\" width=\"743\">\n<colgroup>\n<col span=\"2\" style=\"width:103pt\" width=\"171\"/>\n<col style=\"width:122pt\" width=\"203\"/>\n<col style=\"width:119pt\" width=\"198\"/>\n</colgroup>\n<thead>\n<tr>\n<th scope=\"col\">\n<p>Field of Offering</p>\n</th>\n<th scope=\"col\">\n<p>Value in the source tenant</p>\n</th>\n<th scope=\"col\">\n<p>Value in the target tenant</p>\n</th>\n<th scope=\"col\">\n<p>After override</p>\n</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\n<p><strong>A</strong></p>\n</td>\n<td>\n<p><strong>a1</strong></p>\n</td>\n<td>\n<p><strong>(null)</strong></p>\n</td>\n<td>\n<p><strong>a1</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>B</strong></p>\n</td>\n<td>\n<p><strong>b1</strong></p>\n</td>\n<td>\n<p><strong>b2</strong></p>\n</td>\n<td>\n<p><strong>b1</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>C</strong></p>\n</td>\n<td>\n<p><strong>(null)</strong></p>\n</td>\n<td>\n<p><strong>c1</strong></p>\n</td>\n<td>\n<p><strong>(null)</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><strong>D (M2M)</strong></p>\n</td>\n<td>\n<p><strong>d1, d2, d3</strong></p>\n</td>\n<td>\n<p><strong>d1, d2, d4</strong></p>\n</td>\n<td>\n<p><strong>d1, d2, d3</strong></p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>For a catalog record, if no matching record is found in the target tenant, the catalog record is imported as a new record. </p>\n<h4>Entity link handling</h4>\n<p>A catalog record may reference an \"entity link\" record - for example, an offering may reference a Cost Type record. The<strong> Dev2Prod</strong> functionality exports the related record (through the Entity Link) with its unique key into the <strong>Dev2Prod</strong> package instead of ID stored in the main catalog record. </p>\n<p>The import process attempts a matching by the unique key. If the entity link record can't be found in the target tenant, the catalog record is imported with that entity link field left empty. </p>\n<p>If the entity link field without a match happens to be a required field, the catalog record will fail to be created. You need to manually create the entity link record in the target tenant and rerun the import.</p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">Only first-layer relationships with catalog records are considered. For example, if an Offering is linked with an Entitlement Rule that's further linked with a Location, a reconciliation is attempted only for the linkage between the Offering and Entitlement Rule, and not for the relationship between the Entitlement Rule and Location. You need to turn on the <strong>Enable a custom entity link between two out-of-the-box record types</strong> setting in <strong>Administration</strong> &gt; <strong>Application Settings</strong>.</div>\n</div>\n<ol>\n</ol>\n<h4><strong>Many2Many</strong> field handling</h4>\n<p>Service Catalog uses the following out-of-the-box <strong>Many2Many</strong> fields for supported catalog record types:</p>\n<ul>\n<li>Category: Audience (with Entitlement Rule)</li>\n<li>Service Definition: Subject matter experts (with Person), and Audience (with Entitlement Rule)</li>\n<li>Offering: Offering bundles (with Offering), Related asset models (with Asset Model), and Audience (with Entitlement Rule)</li>\n<li>Fulfillment Plan: None</li>\n</ul>\n<p><strong>Many2Many</strong> fields are treated in one of the following ways:</p>\n<ul>\n<li>Full packaging - for Entitlement Rule and Asset Model records. The system packages the referenced data together with the catalog data and imports them to the target tenant. For a second-layer related record (for example, a Location related to an Entitlement Rule), the system attempts a matching - if no matching record is found, it leaves the field empty and issues a warning in the log to call for manual follow-up action.</li>\n<li>Matching existing only - for Person records. Only the UPN of the related person is packaged. The system only attempts a matching by UPN. If no matching record is found, it leaves the field empty and issues a warning in the log to call for manual follow-up action.</li>\n</ul>\n<h4>List handling</h4>\n<p>Referenced ENUM lists (including both volatile and non-volatile lists) are packaged together with catalog data: for non-volatile lists, only custom ones are packaged; for out-of-the-box lists, only their custom values are packaged.</p>\n<p>When a matching list is found, the source list is merged with the target list. </p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-caution-icon\"></div>\n<div class=\"admonition-content admonition-caution-content\">If a catalog package contains a list that also exists in the target tenant but has a different type (it is volatile in the package and non-volatile in the target tenant, or vice versa), each relevant record (for example, an offering that references this list in a user option) can't be imported. </div>\n</div>\n<h4>Error handling</h4>\n<p>During a <strong>Dev2Prod</strong> catalog data import, an error is displayed when the creation of a catalog record fails, and a warning is displayed when the catalog record is created but with issues. Neither errors nor warnings block the import process. </p>\n<ul>\n<li>For errors, you can fix the issues in the target tenant and then rerun the import.</li>\n<li>For warnings, you can fix the issues in the target tenant and then rerun the import, or manually fix the issues in the target tenant, whichever requires less effort.</li>\n</ul>\n<h4>Task plan handling</h4>\n<p>If user option mappings are set in a bundle offering or if a bundle offering includes bundle offering(s), you must locate the offering ID in the task plan after a Dev2Prod synchronization, and then replace it with the target tenant offering ID.</p>\n<p>The following are examples of user option mappings set in a bundle offering and a bundle offering included in a bundle offering:</p>\n<ul>\n<li><code>${entity.BundleToRequest[RequestsOffering='10242'].Id}</code></li>\n<li><code>Description: ${entity.RequestsOffering.OfferingBundlesToOfferings[Id='11387'].Description}</code></li>\n</ul>\n<h2>Best practices</h2>\n<p>The following are some best practices for using this feature. </p>\n<h3>Running an initial import in an upgraded environment</h3>\n<p>The UUID field was introduced in version 2020.11 for catalog record reconciliation between tenants. This field isn't available for existing catalog records created in a version earlier than 2020.11. For the first-time import, UUID will always fail because UUID generated in the source tenant is unlikely to match any UUID generated in the target tenant. To mitigate this limitation, the following is the recommended practice to initiate data <strong>Dev2Prod</strong> for the first time:</p>\n<ol>\n<li>The suite administrator upgrades the production tenant to the current release.</li>\n<li>The suite administrator performs a crawling upgrade for the production tenant. For detailed steps, see <a href=\"/doc/423/26.1/saconfig#How_to_run_a_crawling_upgrade\" title=\"How to run a crawling upgrade\">How to run a crawling upgrade</a>. This step creates a UUID for each old catalog record.\n\t<div class=\"admonition\">\n<div class=\"admonition-icon admonition-caution-icon\"></div>\n<div class=\"admonition-content admonition-caution-content\">If no crawling upgrade is performed after the suite is upgraded, when you attempt to export catalog data to a package file, the system will report an error that indicates records without a UUID were found. </div>\n</div>\n</li>\n<li>The tenant admin exports the catalog data records from the production tenant to a package (in <strong>.pkb</strong> format) and imports the package to a development tenant on the current release version. This step ensures that the same catalog data record has the same UUID on the two tenants. </li>\n<li>The tenant admin takes the catalog data state in the development tenant as a new starting point to make further development as usual.</li>\n<li>Catalog data updates since then moved via <strong>Dev2Prod</strong> will get reconciled based on UUID successfully. </li>\n</ol>\n<h3>Exporting customization dependencies</h3>\n<p>When you package Service Catalog data, catalog configurations aren't included by default. A catalog package itself may have dependencies on configurations such as the following:</p>\n<ul>\n<li>Custom record types referenced in User Option entity links, Business Rules, and custom fields of Service Catalog</li>\n<li>OPB agent and endpoints (referenced in Business Rules)</li>\n</ul>\n<p>You need to export the related catalog configurations together with the catalog content. When you import the package, configurations are always imported first, and then data. </p>\n<h3>Running data synchronization during non-business hours</h3>\n<p>We strongly recommend that you run a <strong>Dev2Prod</strong> job during non-business or non-peak hours to ensure data integrity as well as minimize the impact on end users.</p>\n<h2>How to run a catalog data synchronization</h2>\n<p>The following are the steps to synchronize Service Catalog data from your development tenant to your production tenant. If you need to import a catalog package from a golden catalog provider, skip the export steps and directly perform the import steps. </p>\n<h3>Export a Service Catalog package<strong> </strong></h3>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-important-icon\"></div>\n<div class=\"admonition-content admonition-important-content\">  During an import, if the package contains a huge number of data records, the system performance could be downgraded. For performance considerations, you are allowed to export up to 10,000 data records into one package. If the number of data records to be exported exceeds this limit, the export will fail with an error. In this case, redefine the package content by using a data filter to narrow down the data to be exported.</div>\n</div>\n<ol>\n<li>Log in to your development tenant.</li>\n<li>From the main menu, select <b>Administration</b> &gt; <b>Utilities</b> &gt; <b>Packages</b> &gt; <b>PACKAGES</b>. </li>\n<li>Click <b>New</b>, enter a title, and optionally provide information in other fields.</li>\n<li>Click <b>SAVE</b>.</li>\n<li>Open the new package from the list.</li>\n<li>In the Tags field, enter information that can help identify the package. For example, you can enter version information for the package. The tag information will be saved in a <b>package-bundle-info.json</b> file in the package bundle file (<b>.pkb</b>) that will be exported in a later step.</li>\n<li>In the Content section, click <b>Add</b> to select the <strong>Service Portfolio/Catalog</strong> module from the list and then click <b>OK</b>. </li>\n<li>Hover your mouse over the <strong>Service Portfolio/Catalog</strong> module, and click the down arrow to bring up a list of related record types (\"entities\"). Click the down arrow for Categories, Service Definitions, Offerings, and Fulfillment Plans, to bring up a Content pane on the right side. By default, both the <strong>Configurations</strong> and <strong>Data</strong> options are selected for each catalog record type. \n\t<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">Currently, aggregated offerings aren't supported. To exclude aggregated offerings during export, the Package Manager excludes offerings that have a non-empty value in their Provider Type field. </div>\n</div>\n</li>\n<li>If you don't want to include a catalog record type (for example, Fulfillment Plans), deselect its <strong>Data</strong> option. </li>\n<li>For each catalog record type, we recommend that you select both of the <strong>Configurations</strong> and <strong>Data</strong> options. </li>\n<li>If you want to export only a subset of the records of a record type, add a filter. To do this, click the data filter icon for that entity, select a field from the list, and then enter a value. You can click <strong>Preview </strong>to<strong> </strong>bring up a filtered list of records of that record type and then review the results.<br/>\n<a class=\"image\" href=\"\"> <img alt=\"SMA_202011_dev2prod_catalog_export\" border=\"0\" file=\"/mediawiki/images/9/90/SMA_202011_dev2prod_catalog_export.png\" src=\"../../../images/SMA_202011_dev2prod_catalog_export_0f38233b.png\" style=\"width: 800px; height: 261px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></li>\n<li>If everything looks fine, click <b>Save</b>. The new package is displayed in the package list.</li>\n<li>Open the package record from the package list.</li>\n<li>Click the <b>List of Objects</b> button to preview the content to be exported. Additionally, you can save the preview content as HTML or PDF simply by clicking a button.</li>\n<li>Click <b>Export</b>.\n\t<p>If your browser is configured to save files automatically to the default download directory, you aren't prompted to save the file. You can access the package bundle file (<b>Package-&lt;package ID&gt;-&lt;tenant ID&gt;-yyyy-mm-dd hh-mm.pkb</b>) in the browser's default download directory. You can open the package file (<strong>.pkb</strong>) in a compression tool, such as WinZip to view its content. There are one data file and one descriptor file for each object. Each data file is in good JSON or XML format and human-readable.</p>\n</li>\n</ol>\n<h3>Run a simulation import</h3>\n<p>We strongly recommend that you run a simulation import before running the real import. </p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">Unlike a real import, a simulation doesn't validate the entity link relationships between Categories, Service Definitions, Offerings, Fulfillment Plans, Asset Models, and Entitlement Rules. For this reason, you may see fewer issues reported during an import simulation than a real import. For example, the <strong>Service definition</strong> and <strong>Service Desk group</strong> fields are entity link fields in an offering - if the two field values defined for an offering in the package can't be found in the target tenant, a simulation will report a warning only about the <strong>Service Desk group</strong> field, and a real import will report two warnings about the two fields. </div>\n</div>\n<ol>\n<li>Log in to your production tenant.</li>\n<li>From the main menu, select <b>Administration &gt; Utilities &gt; Packages &gt; Options.</b></li>\n<li>Click <b>SIMULATE</b>, browse to the package bundle file created previously and click <b>Open</b>. The simulation automatically starts. Wait for the simulation to complete without error. If any issues, fix them and then rerun the simulation import. For troubleshooting instructions, see <a href=\"/doc/423/26.1/troubleshootdev2prod\" title=\"Troubleshoot Dev2Prod issues\">Troubleshoot<strong> Dev2Prod</strong> issues</a>.</li>\n</ol>\n<h3>Import a Service Catalog package</h3>\n<p>After a successful simulation import, run the real import in your production tenant as follows.</p>\n<ol>\n<li>From the main menu, select <b>Administration &gt; Utilities &gt; Packages &gt; Options.</b></li>\n<li>Click <b>IMPORT</b>, and browse to the package bundle (<b>.pkb</b>) file to import it. A window opens and displays the progress and statistics of the package import process (the process may take a long time). The package content is imported and integrated into the production tenant.\n\t<div class=\"admonition\">\n<div class=\"admonition-icon admonition-important-icon\"></div>\n<div class=\"admonition-content admonition-important-content\"><br/>\n\tAfter you click <strong>IMPORT</strong>, it may take a long time before the import starts. The following explains why:\n\n\t<p>Since rules defined in offerings contain workflow metadata, for the safety of the production tenant, the system needs to create a backup of the <strong>EntityWorkflow</strong> table before starting the import. The <strong>EntityWorkflow</strong> table stores all workflow-related metadata and rules defined in offerings, models, and tasks, so the table size can be large if you have a lot of configurations or a large volume of offerings (with rules for each), and it may take a long time (several minutes) for the system to back up the table.</p>\n</div>\n</div>\n</li>\n<li>Verify the imported configuration and data changes in the target tenant.</li>\n</ol>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}