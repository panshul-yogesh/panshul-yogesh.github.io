{
  "title": "The DND upgrade pod can't start successfully",
  "content": "<div class=\"mw-parser-output\">\n<div></div>\n<p>The <code>itom-dnd-upgrade-job</code> pod crashes during upgrade. If you run the <code>kubectl logs itom-dnd-upgrade-job-xxx -n &lt;itsma_namespace&gt; -f</code> command when this issue occurs, you see the following log:</p>\n<pre><code>Caused</code><code> by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439)\n        at java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306)\n        at java.base/sun.security.validator.Validator.validate(Validator.java:264)\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:231)\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:132)\n        at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1335)</code></pre>\n<p>This issue happens only in classic deployments.</p>\n<h2><a id=\"Cause\" name=\"Cause\" title=\"Cause\"></a>Cause</h2>\n<p>This issue occurs because the certificate in Vault used by the <code>itom-dnd-upgrade-job</code> pod was not updated correctly.</p>\n<h2><a id=\"Solution\" name=\"Solution\" title=\"Solution\"></a>Solution</h2>\n<p>Perform the following steps.</p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Follow the steps in the <a href=\"/doc/423/26.1/changecertforpostgresql\" title=\"Change Cert For PostgreSQL\">Change Cert For PostgreSQL</a> topic to prepare the <code>updateSMAExternalDBInfo.sh</code> tool. </li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Run the following commands to update the CA certificates for DND, CMP, and CMP FinOps components:\n\t<pre>updateSMAExternalDBInfo.sh --component CMPFinOps --cacert &lt;certificate-file-path&gt; </pre>\n<pre>updateSMAExternalDBInfo.sh --component CMP --cacert &lt;certificate-file-path&gt;</pre>\n<pre>updateSMAExternalDBInfo.sh --component DND --cacert &lt;certificate-file-path&gt;</pre>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Retry the suite upgrade. To do this, following the steps described in <a href=\"/doc/423/26.1/upgradesuitehelm\" title=\"Upgrade the suite - Service Management\">Upgrade the suite - Service Management</a>.</li></ol>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}