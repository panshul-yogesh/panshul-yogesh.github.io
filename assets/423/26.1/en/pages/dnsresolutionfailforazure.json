{
  "title": "DNS Resolution Failure in Bastion Cluster During Azure Service Management–UCMDB Integration",
  "content": "<div class=\"mw-parser-output\">\n<p><a id=\"Cause\" name=\"Cause\" title=\"Cause\"></a></p>\n<p>During the native integration of SACM with Service Management and UCMDB, data synchronization issues occurred. Changes made in Service Management were not reflected in UCMDB, and updates from UCMDB did not appear in Service Management.</p>\n<div>\n<style type=\"text/css\">a {\n    text-decoration: none;\n    color: #464feb;\n}\ntr th, tr td {\n    border: 1px solid #e6e6e6;\n}\ntr th {\n    background-color: #f5f5f5;\n}\n</style>\n<h2>Cause</h2>\nIf the Bastion cluster or integration nodes cannot resolve hostnames (DNS failure), the systems cannot communicate, causing updates to fail.</div>\n<h2><a id=\"Solution\" name=\"Solution\" title=\"Solution\"></a>Solution</h2>\n<div>\n<ol style=\"padding-left: 0px;\"></ol>\n<div>\n<style type=\"text/css\">a {\n    text-decoration: none;\n    color: #464feb;\n}\ntr th, tr td {\n    border: 1px solid #e6e6e6;\n}\ntr th {\n    background-color: #f5f5f5;\n}\n</style>\n<div>\n<p><strong>Steps to Resolve DNS Resolution Issues in Service Management and UCMDB Pods:</strong></p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p><strong>Retrieve the Frontend IP of the Azure Application Gateway</strong></p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">Navigate to the <strong>Azure Portal</strong> and locate your Application Gateway.</li><li style=\"margin-left: 40px; position: relative;\">Copy the Frontend<strong> IP address</strong>.</li></ul>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p><strong>Access the Azure Bastion Node</strong></p>\n</li></ol>\n<div style=\"margin-left: 40px; position: relative;\">Log in to the Bastion node using your preferred method.</div>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p><strong>Update CoreDNS Custom ConfigMap</strong></p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">In the <code>kube-system</code> namespace, edit the <code>coredns-custom</code> ConfigMap.</li><li style=\"margin-left: 40px; position: relative;\">Add a DNS entry that maps the required hostname to the Frontend<strong> IP address</strong> you retrieved in Step 1. \n\t\t<pre><code class=\"language-yaml\">apiVersion: v1\n\ndata:\n\n  custom-hosts.override: |\n\n    hosts {\n\n          &lt;app-gw frontendip &gt; &lt;service_management_dns&gt;\n          &lt;app-gw frontendip &gt; &lt;cms_dns&gt;\n          &lt;app-gw frontendip &gt; &lt;oo_dns&gt;\n          fallthrough\n\n    }</code></pre>\n<div>\n<style type=\"text/css\">a {\n    text-decoration: none;\n    color: #464feb;\n}\ntr th, tr td {\n    border: 1px solid #e6e6e6;\n}\ntr th {\n    background-color: #f5f5f5;\n}\n\t\t</style>\n<div>Replace <code>&lt;app-gw frontendip&gt;</code> with the correct Frontend IP address and use the appropriate DNS names for Service Management, CMS, and OO.</div>\n<br/>\n\t\t               </div>\n</li></ul>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p><strong>Apply Changes</strong></p>\n</li></ol>\n<div style=\"margin-left: 40px; position: relative;\">Save the ConfigMap and ensure the CoreDNS pods reload the updated configuration.</div>\n</div>\n</div>\n</div>\n</div>",
  "modifiedon": "2025-12-16 06:19:51"
}