{
  "title": "Action rule examples",
  "content": "<div class=\"mw-parser-output\">\n<p>The following examples demonstrate how to formulate rules for each of the action rule templates:</p>\n<h2 class=\"mw-headline\" id=\"Add_comment\">Add comment</h2>\n<ol>\n<li>\n<p>For the <b>comment</b> parameter, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Enter the required text in the text box.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns the required text.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n</li>\n<li>\n<p>For the <b>System</b> parameter, select <b>current user</b> to record the comment in the name of the current user or <b>System</b> to record the comment as a system comment.</p>\n</li>\n<li>\n<p>For the <b>visibility</b> parameter, select <b>public</b> to make the comment available to all users on the <span class=\"SAW_VariablesSelf-Service_Portal\">Service Portal</span>. Select <b>internal</b> to restrict the comment to Service Management users only. The default value is <b>public</b>.</p>\n</li>\n<li>\n<p>For the <b>purpose</b> parameter, select a value from the drop-down list. This defines the purpose of the comment. The default value is <b>StatusUpdate</b>. This parameter is optional.</p>\n</li>\n<li>\n<p>When the rule runs, the comment is added in the name of the selected user.</p>\n</li>\n</ol>\n<p>Example: There is a rule in Service Request Management under the After change process event, which adds a comment if the request was assigned to a person. The condition is defined by the following Expression Language phrase:</p>\n<p>${current_update.AssignedToPerson.IsChanged == true &amp;&amp; entity.AssignedToPerson != null}</p>\n<p>It checks if the <b>AssignedToPerson</b> property has been changed and that the value isn't null. If the condition is true, it adds the comment <b>\"Request has been assigned\"</b> as a system comment.</p>\n<h2 class=\"mw-headline\" id=\"Add_comment_on_related_record\">Add comment on related record</h2>\n<ol>\n<li>\n<p>For the <b>comment</b> parameter, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Enter the required text in the text box.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns the required text.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n</li>\n<li>\n<p>For the <b>System</b> parameter, select <b>current user</b> to record the comment in the name of the current user or <b>System</b> to record the comment as a system comment.</p>\n</li>\n<li>\n<p>For the <b>Record type</b> parameter, select the record type of a related record from the drop-down list.</p>\n</li>\n<li>\n<p>For the <b>record ID</b> parameter, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Select the required related records from the drop-down list.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns the required related records.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n</li>\n<li>For the <b>from</b> and <b>to</b> parameters, select <b>Agent</b> or <b>User</b> as appropriate. These parameters are optional and are only available if <b>current user</b> was selected for the System parameter.</li>\n<li>For the <b>visibility</b> parameter, select <b>public</b> to make the comment available to all users on the <span class=\"SAW_VariablesSelf-Service_Portal\">Service Portal</span>. Select <b>internal</b> to restrict the comment to Service Management users only. The default value is <b>public</b>. This parameter is optional.</li>\n<li>For the <b>purpose</b> parameter, select a value from the drop-down list. This defines the purpose of the comment. The default value is <b>StatusUpdate</b>. This parameter is optional.</li>\n<li>\n<p>When the rule runs, the comment is added to the selected related records in the name of the selected user.</p>\n</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Add_Roles\">Add Roles</h2>\n<p>The <b>Add roles</b> rule template is only available for <b>Person</b> records under the<strong> After applying changes</strong> event.</p>\n<p>The only parameter in this rule template is <b>roles</b>.</p>\n<ul>\n<li>Select the required user role from the drop-down list.</li>\n<li>Click <b>Add item</b> to add a box for another role.</li>\n</ul>\n<p>When the rule runs, the roles are assigned to the person records.</p>\n<h2 class=\"mw-headline\" id=\"Append_or_Remove_values_in_a_multi-value_field\">Append or Remove values in a multi-value field</h2>\n<ol>\n<li>\n<p>For the <b>action</b> parameter, select the required action from the drop-down list. The available options are:</p>\n<ul>\n<li><b>Append to.</b> Add additional values to an Enum Set field.</li>\n<li><b>Remove from.</b> Remove values from an Enum Set field.</li>\n</ul>\n</li>\n<li>For the <b>field</b> parameter, select the required Enum Set field from the drop-down list.</li>\n<li>\n<p>For the <b>values</b> parameter, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Select the required value from the drop-down list.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns the required value.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n</li>\n<li>\n<p>When the rule runs, it adds the additional value to the field or removes the selected value from the field as specified.</p>\n</li>\n</ol>\n<p>Example: There is a rule in Service Request Management which adds the Primary domain of the request's Service desk group to the Data domains field of the request. The expression parameter checks if the Service Desk Group field of the request has been changed and verifies that the Primary domain property of the Service Desk Group field isn't null. The action parameter is <b>Append to</b> and the field parameter is <b>Data domains</b>. For the values parameter the Primary domain property of the Service Desk Group field is denoted by the following Expression Language phrase:</p>\n<p><b>${entity.ServiceDeskGroup.PrimaryDataDomain}</b>.</p>\n<h2>Create multiple records based on relationship</h2>\n<p>This template allows you to add a rule that allows the creation of new records based on the values defined in a collection (usually M2M relationships), and for each new record populates an entity_link field with a value from the current record and populates other fields with field values you specify. </p>\n<p>For example, if you go to Studio and navigate to <strong>Request</strong> &gt; <strong>Processes and Rules</strong> &gt; <strong>Service</strong> &gt; <strong>Close</strong> &gt; <strong>Entering</strong>, you can find an out-of-the-box rule that performs the following tasks:</p>\n<ul>\n<li>Creates Subscription records for the related Device records defined in the <strong>Request fulfilled by device</strong> field of the current Request record. This means if the current Request record is fulfilled by 5 devices, this rule will create 5 Subscription records. </li>\n<li>Saves each related device record of the current request record in the Device field of each new Subscription record.</li>\n<li>Populates the new Subscription records with other specified field values, which are field-value pairs for the new Subscription records. </li>\n</ul>\n<p>To add a rule based on this template for a record type:</p>\n<ol>\n<li>Under an applicable event, click <b>Add</b>, and then select either <strong>Simple rule</strong> or <b>\"If...Then\" rule</b>.<br/>\n\tThis template is available under the following events: Leaving, Entering, Before change, After change, After applying changes, and Before deleting. </li>\n<li>Select this template and then click <strong>OK.</strong> </li>\n<li>Enter a condition if it's not a simple rule.</li>\n<li>Configure the following parameters:\n\t<ul>\n<li>For the <strong>record type</strong> parameter, select the record type of the records you want to create. In this example, select <strong>Subscription</strong>. </li>\n<li>For the <strong>relationship </strong>parameter, select a relationship, which is a relationship between the current record and its related records. For example, select <strong>Request fulfilled by device</strong>.<strong> </strong></li>\n<li>For the <strong>field</strong> parameter, select an entity_link field of the selected record type; this field must be linked to the related records defined in the selected relationship. For example, select the <strong>Device </strong>field of the Subscription record type.</li>\n<li>For the <strong>field values</strong> parameter: click <strong>Add item</strong> to select multiple fields of the selected record type, and specify a value for each. The following figure shows an example, where <strong>Display label</strong> is a field of Subscription and its value is mapped to the <strong>Subscription name</strong> value of the current Request record. <br/>\n<a class=\"image\" href=\"\"> <img alt=\"SMAX202205_create_muti_records_relationship_fields.png\" border=\"0\" file=\"/mediawiki/images/d/d7/SMAX202205_create_muti_records_relationship_fields.png\" height=\"172\" hspace=\"0\" src=\"../../../images/SMAX202205_create_muti_records_relationship_fields_89b07edc.png\" style=\"width: 800px; height: 172px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></li>\n</ul>\n</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Add_Roles\">Allocate cost</h2>\n<p>An allocate cost rule can generate expense lines based on the configured cost allocation rules under a specific condition.</p>\n<p>To add an allocate cost rule:</p>\n<ol>\n<li>In the \"After applying changes\" section, click <b>Add</b> and select either <strong>Simple rule</strong> or <b>\"If...Then\" rule</b>.</li>\n<li>Select the <b>Allocate cost</b> template and then click <b>OK</b>.</li>\n<li>Click   <a class=\"image\" href=\"\"> <img alt=\"EditIcon.png\" data-file-height=\"21\" data-file-width=\"24\" height=\"21\" src=\"../../../images/EditIcon_ad95cc14.png\" width=\"24\"/> </a> <b>Edit </b>and select <strong>Add condition</strong> if it's a simple rule.</li>\n<li>For the <b>expression</b> parameter, enter a condition under which the rule will be triggered. </li>\n</ol>\n<h2>Call Aviator with record data</h2>\n<p>This template allows you to use Aviator models based on record data to empower service automation workflows via business rules.</p>\n<p>To add a <strong>Call Aviator with record data</strong> rule:</p>\n<ol>\n<li>In the <strong>After applying changes</strong> section, click <b>Add</b> and select either <strong>Simple rule</strong> or <b>\"If...Then\" rule</b>.</li>\n<li>Select the <strong>Call Aviator with record data</strong> template and specify these fields.\n\t<ul>\n<li><strong>field</strong>: Specify the field for which you want Aviator to generate content. Supported field types include SMALL_TEXT, MEDIUM_TEXT, LARGE_TEXT, and RICH_TEXT.\n\t\t<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>When applying this rule in a task plan, if the target field already contains data, Aviator will not make any updates to it.</div></div></div>\n</li>\n<li><b>input(optional)</b>: Specify the user prompt field that Aviator should use to generate content. This field is optional.</li>\n<li><strong>context</strong>: Specify the context fields that Aviator should use to generate content. Supported field types include SMALL_TEXT, MEDIUM_TEXT, RICH_TEXT, and COMMENTS. We recommend that you add up to five context fields for Aviator to generate better answers.</li>\n<li><strong>Aviator model</strong>: Select a model you want Aviator to use for generating content. Ensure the model is in <strong>Active </strong>phase and its context source is <strong>Applications</strong>. For more information, see <a href=\"/doc/423/26.1/136-aviatormodels\" title=\"Aviator models\">Aviator models</a>.</li>\n</ul>\n</li>\n<li>Save the settings.</li>\n</ol>\n<h2>Call Aviator with record and search data</h2>\n<p>This template allows you to use Aviator models based on record and search data to empower service automation workflows via business rules.</p>\n<p>To add a <strong>Call Aviator with record and search data</strong> rule:</p>\n<ol>\n<li>In the <strong>After applying changes</strong> section, click <b>Add</b> and select either <strong>Simple rule</strong> or <b>\"If...Then\" rule</b>.</li>\n<li>Select the <strong>Call Aviator with record and search data</strong> template and specify these fields.\n\t<ul>\n<li><strong>field</strong>: Specify the field for which you want Aviator to generate content. Supported field types include SMALL_TEXT, MEDIUM_TEXT, LARGE_TEXT, and RICH_TEXT.\n\t\t<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>When applying this rule in a task plan, if the target field already contains data, Aviator will not make any updates to it.</div></div></div>\n</li>\n<li><strong>input: </strong>Specify the user prompt field that Aviator should use to generate content. This field corresponds to the <strong>input</strong> field in the model's prompt template.</li>\n<li><strong>application context(optional): </strong>Specify the application context fields that Aviator should use to generate content. Supported field types include SMALL_TEXT, MEDIUM_TEXT, RICH_TEXT, and COMMENTS. This field corresponds to the <strong>app-context</strong> field in the model's prompt template. We recommend that you add up to five context fields for Aviator to generate better answers. </li>\n<li><strong>search text: </strong>Specify the search keyword or query used for searching record data from the Vector database or IDOL. This field corresponds to the <strong>context</strong> field in the model's prompt template.</li>\n<li><strong>user: </strong>Specify the user who has access to the search text and the <strong>Access Aviator</strong> permission. You can specify an integration user as the user or define a user via DSL. When using DSL, you can enter <strong>current_user</strong> to select the current user or an entity link of the Person record type (such as <strong>entity.owner</strong>). The integration user configured in the integration scenario will be used if the user specified via DSL doesn't exist, for example, when the value of <strong>entity.owner</strong> is empty.</li>\n<li><strong>variables(optional): </strong>Specify the variables used in the prompt template of the Aviator model. This field corresponds to the <strong>variables</strong> field in the model's prompt template.<strong> </strong>You can add up to five variables in a single BR. The variables don't support localization.</li>\n<li><strong>Aviator model</strong>: Select a model you want Aviator to use for generating content. Ensure the model is in <strong>Active </strong>phase and its context source is <strong>Semantic search</strong> or <strong>Global search</strong>. For more information, see <a href=\"/doc/423/26.1/136-aviatormodels\" title=\"Aviator models\">Aviator models</a>.</li>\n</ul>\n</li>\n<li>Save the settings.</li>\n</ol>\n<h2>Cancel cost</h2>\n<p>A cancel cost rule can stop generating new expense lines generation and delete the generated expense lines that are in Projected status under a specific condition.</p>\n<p>To add a cancel cost rule:</p>\n<ol>\n<li>In the \"After applying changes\" section, click <b>Add</b> and select either <strong>Simple rule</strong> or <b>\"If...Then\" rule</b>.</li>\n<li>Select the <b>Cancel cost</b> template and then click <b>OK</b>.</li>\n<li>Click   <a class=\"image\" href=\"\"> <img alt=\"EditIcon.png\" data-file-height=\"21\" data-file-width=\"24\" height=\"21\" src=\"../../../images/EditIcon_ad95cc14.png\" width=\"24\"/> </a> <b>Edit </b>and select <strong>Add condition</strong> if it's a simple rule.</li>\n<li>For the <b>expression</b> parameter, enter a condition under which the rule will be triggered. </li>\n</ol>\n<h2>Convert contact to user</h2>\n<p>This template allows you to convert a contact to a user. It's available for the <strong>Request</strong>, <strong>Person</strong>, <strong>Task</strong>, <strong>Change</strong>, <strong>Offering</strong>, <strong>Incident</strong>, and <strong>Project</strong> record types under the <strong>After applying changes</strong> event.</p>\n<ol>\n<li>\n<p>For the <strong>Person</strong> parameter, choose either of the following options:</p>\n<ul>\n<li>Simple Mode. Select the required value from the drop-down list.</li>\n<li>Expression Language. Enter an Expression Language phrase that returns the required value.</li>\n</ul>\n<p>Click Expression Language <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" src=\"../../../images/30px-SMAiconfx_894ae630.png\"/> </a>  to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n</li>\n<li>\n<p>For the <strong>Authentication type</strong> parameter, also use the Simple Mode or Expression Language option to specify the desired authentication type of the user.</p>\n</li>\n<li>\n<p>When the rule runs, it converts the contact to the user as specified.</p>\n</li>\n</ol>\n<h2>Convert user to contact</h2>\n<p>This template allows you to convert a user to a contact. It's available for the <strong>Request</strong>, <strong>Person</strong>, <strong>Task</strong>, <strong>Change</strong>, <strong>Offering</strong>, <strong>Incident</strong>, and <strong>Project</strong> record types under the <strong>After applying changes</strong> event.</p>\n<ol>\n<li>\n<p>For the <strong>Persons</strong> parameter, click <strong>Add Item</strong> and choose one of the following options:</p>\n<p>Click Expression Language <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" src=\"../../../images/30px-SMAiconfx_894ae630.png\"/> </a>  to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n<ul>\n<li>Simple Mode. Select the required value from the drop-down list. You can continue to click <strong>Add Item</strong> and add up to 100 people.</li>\n<li>Expression Language. Enter an Expression Language phrase that returns the required value. </li>\n</ul>\n</li>\n<li>\n<p>When the rule is run, it activates the Manage Persons API, which converts the specified users to contacts in Service Management. Running this rule produces an equivalent outcome to performing the Delete operation using the <a href=\"/doc/423/26.1/managepersonsapi\" title=\"Manage Persons API\">Manage Persons API</a>. If the users were members of any groups, they are removed from the groups and the following fields and sections are cleared:</p>\n<ul>\n<li><strong>Group membership</strong> section on the User page.</li>\n<li><strong>Organization</strong> field on the User page.</li>\n<li><b>License and Role</b> fields on the User page.</li>\n<li><strong>Request on behalf</strong> tab on the User page.</li>\n<li><strong>Group members</strong> section on the Group page.</li>\n<li><strong>Owner</strong> and <strong>Group owner backup</strong> fields on the Group page.</li>\n<li><strong>Delegations</strong> tab in the Service Portal.</li>\n</ul>\n</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Count_attachments\">Count attachments</h2>\n<ol>\n<li>For the <b>attachments</b> parameter, select a notification template from the drop-down list.</li>\n<li>For the <b>field</b> parameter, select the required field from the drop-down list.</li>\n<li>When the rule runs, the number of selected attachments is displayed in the record details page.</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Count_related_records\">Count related records</h2>\n<p>When the rule runs, the number of related records is displayed on the <b>Related records</b> tab.</p>\n<h2 class=\"mw-headline\" id=\"Create_record\">Create record</h2>\n<ol>\n<li>\n<p>For the <b>Record type</b> parameter, select the required type of record from the drop-down list.</p>\n</li>\n<li>\n<p>For the <b>fields values</b> parameter, click the <b>Add Item</b> button, which displays two boxes, one for a field name and one for its value. In the first box, select the required field name from the drop-down list. In the second box, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Enter the value for the selected record field manually or select it from a drop-down list, according to the value type.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns the value for the selected record field.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n<p>Click <b>Add Item</b> again to add another row and select or enter the required record field and value. Repeat this for all required record fields.</p>\n</li>\n<li>\n<p>When the rule runs, it creates a record of the selected type and fills the parameters with the specified values.</p>\n</li>\n</ol>\n<p>Example: In Incident Management, you can define a rule called <b>CreateIncident</b> which creates a new incident record. For the <b>Record type</b> parameter, select <b>Incident</b>. For the <b>fields values</b> parameter, enter the following pairs of field names and values (select the field name from the drop-down list and enter the text or Expression Language phrase in the value box):</p>\n<ul>\n<li><b>Description</b>, <b>${concat('Automatically created incident for', entity.Description)}</b></li>\n<li><b>DisplayLabel</b>, <b>${concat('Automatically created incident for', entity.DisplayLabel)}</b></li>\n<li><b>ImpactScope</b>, <b>SingleUser</b></li>\n<li><b>Urgency</b>, <b>SlightDisruption</b></li>\n<li><b>RegisteredForActualService</b>, <b>${entity.Id}</b></li>\n</ul>\n<p>When the rule runs, it creates a new incident record and populates these fields with the respective values.</p>\n<h2 class=\"mw-headline\" id=\"Create_record_and_relationship\">Create record and relationship</h2>\n<ol>\n<li>\n<p>For the <b>fields values</b> parameter, click the <b>Add Item</b> button, which displays two boxes, one for a field name and one for its value. In the first box, select the required field name from the drop-down list. In the second box, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Enter the value for the selected record field manually or select it from a drop-down list, according to the value type.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns the value for the selected record field.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n<p>Click <b>Add Item</b> again to add another row and select or enter the required record field and value. Repeat this for all required record fields.</p>\n</li>\n<li>\n<p>For the <b>relationship type</b> parameter, select the required field from the drop-down list.</p>\n</li>\n<li>\n<p>When the rule runs, it creates a new record and fills the parameters with the specified values (the record type depends on the relationship selected). It also creates the selected type of relationship between the new record and the specified existing record.</p>\n</li>\n</ol>\n<h2>Create record and entity link</h2>\n<p>An Action rule that creates a record that links to the original record. Fields of the new record can also be specified by this rule. </p>\n<ol>\n<li>For the <strong>entity link type</strong> parameter, select the type of the linked record you want to create.</li>\n<li>For the <b>fields values</b> parameter, click the <b>Add Item</b> button, which displays two boxes, one for a field name and one for its value. In the first box, select the required field name from the drop-down list. In the second box, select one of the following options:\n\t<ul>\n<li><b>Simple Mode.</b> Enter the value for the selected record field manually or select it from a drop-down list, according to the value type.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns the value for the selected record field.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n<p>Click <b>Add Item</b> again to add another row and select or enter the required record field and value. Repeat this for all required record fields.</p>\n</li>\n<li>\n<p>When the rule runs, it creates a new record that links to the original record.</p>\n</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Create_relationship\">Create relationship</h2>\n<ol>\n<li>\n<p>For the <b>relationship type</b> parameter, select the required field from the drop-down list.</p>\n</li>\n<li>\n<p>For the <b>from record</b> and <b>to record</b> parameters, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Select the required record from the drop-down list.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns the required record.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n</li>\n<li>\n<p>When the rule runs, it creates the specified relationship between the specified records.</p>\n</li>\n</ol>\n<p>Example: You can define a rule called <b>AddUserToUsedByList</b> which adds the current user to the <b>Used by</b> list. For the relationship type parameter, enter <b>DeviceUsedByPerson</b>. For the <b>from record</b> parameter, enter <b>${entity.Id}</b> and for the <b>to record</b> parameter, enter <b>${current_user.Id}</b>.</p>\n<h2 class=\"mw-headline\" id=\"Delete_relationship\">Delete relationship</h2>\n<ol>\n<li>\n<p>For the <b>relationship type</b> parameter, select the required field from the drop-down list.</p>\n</li>\n<li>\n<p>For the <b>from record</b> and <b>to record</b> parameters, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Select the required record from the drop-down list.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns the required record.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n</li>\n<li>\n<p>When the rule runs, it deletes the specified relationship between the specified records.</p>\n</li>\n</ol>\n<p>Example: You can define a rule called <b>DeleteUserFromUsedByList</b> which deletes the current user from the <b>Used by</b> list. For the relationship type parameter, enter <b>DeviceUsedByPerson</b>. For the <b>from record</b> parameter, enter <b>${entity.Id}</b> and for the <b>to record</b> parameter, enter <b>${current_user.Id}</b>.</p>\n<h2>Create user</h2>\n<p>This template allows you to create a user in the system. It's available for the <strong>Request</strong>, <strong>Person</strong>, <strong>Task</strong>, <strong>Change</strong>, <strong>Offering</strong>, <strong>Incident</strong>, and <strong>Project</strong> record types under the <strong>After applying changes</strong> event. You can only use this rule when creating a user that’s not available in Agent Interface, Suite Administration, or IdM. If the user already exists, the rule won’t be triggered and even if it's triggered, user creation will fail. In this case, you can use the auto-sync functionality to meet your requirements.</p>\n<ol>\n<li>\n<p>For the <strong>UPN</strong>, <strong>First name</strong>, <strong>Last name</strong>, <strong>Email</strong>, and <strong>Authentication type</strong> parameters, click Expression Language <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" src=\"../../../images/30px-SMAiconfx_894ae630.png\"/> </a>  and enter an Expression Language phrase that returns the required value. For example:</p>\n<ul>\n<li>UPN: ${entity.UserOptions.Upn_c}</li>\n<li>First name: ${entity.UserOptions.FirstName_c}</li>\n<li>Last name: ${entity.UserOptions.LastName_c}</li>\n<li>Email: ${entity.UserOptions.Email_c}</li>\n<li>Authentication type: ${entity.UserOptions.AuthType_c}</li>\n</ul>\n<strong>Note:</strong> If you add an additional field and set it to <strong>OrganizationalGroup</strong>, the user will be created but the <strong>Organization Group</strong> field won't be updated. </li>\n<li>\n<p>When the rule runs, it creates a user as specified.</p>\n</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Delete_all_relationships_of_one_type\">Delete all relationships of one type</h2>\n<p>The only parameter in this rule is <b>relationship type</b>. Select the required field from the drop-down list. When the rule runs, the many-to-many relationships of the selected type are deleted.</p>\n<p>Example: In Service Asset and Configuration Management, for a device, you could select <b>User list</b> as the relationship type to be deleted. This deletes all the relationships between the device and associated users.</p>\n<h2 class=\"mw-headline\" id=\"Delete_attachments\">Delete attachments</h2>\n<p>A <b>Delete attachments</b> rule can delete attachments from specific record types under a specified condition. If you want to delete attachments from a record type, you must configure such a rule at the entity level or the entity workflow level.</p>\n<p>Take the Request record type for example. You need to navigate to <b>Studio</b>, open the <b>Request</b> entity, and then define a <b>Delete attachments</b> rule at the Request entity level or for a specific workflow phase.</p>\n<p><b>Notes</b>:</p>\n<ul>\n<li>You can run a \"Delete attachments\" rule only after applying changes or per-schedule.</li>\n<li>Once the attachments have been soft deleted from a record by this rule, you can find an \"Attachments was deleted\" log entry on the History tab of the record.</li>\n<li>Attachments are stored in the <b>share1</b> and <b>share2</b> subfolders under the suite's &lt;data-volume&gt; NFS folder, for example, <code>/var/vols/itom/itsma/data-volume</code>. An asynchronous FRS cleansing daemon job keeps monitoring soft-deleted attachments and physically deletes them from the file system on a daily basis. For performance considerations, this job deletes only up to 20,000 attachment files per day. Be aware that attachments files can't be restored once physically deleted, and you need to develop a good backup and restore plan for your file system if necessary.</li>\n</ul>\n<h3 class=\"mw-headline\" id=\"Delete_attachments_after_applying_changes\">Delete attachments after applying changes</h3>\n<p>The example configuration below will delete attachments from request records that were closed at least 10 seconds earlier.</p>\n<ol>\n<li>In the \"After applying changes\" section, click <b>Add</b> and select <b>\"If...Then\" rule</b>.</li>\n<li>Select the <b>Delete attachments</b> template and then click <b>OK</b>.</li>\n<li>For the <b>expression</b> parameter, enter a condition under which the rule will be triggered. In this example, enter: <code>${(now()-entity.CloseTime)&gt;=10000}</code>.</li>\n<li>For the <b>excluding</b> parameter, select <b>excluding</b> or <b>including</b> to exclude or include attachments in Rich Text fields. In this example, select <b>including</b>.</li>\n<li>Click <b>Save</b>.</li>\n</ol>\n<p>To verify the configuration, close a request record that has an image attached in the Description field and an attachment file in the Attachments section. Wait for a while, and then check that both the image and the attachment file have been removed from the request record.</p>\n<h3 class=\"mw-headline\" id=\"Delete_attachments_per_schedule\">Delete attachments per-schedule</h3>\n<p>You can also delete attachments per-schedule. The example configuration below will delete attachments from all closed request records 10 seconds after they are closed.</p>\n<ol>\n<li>In the <b>Per-Schedule</b> section, click <b>Add</b> and then select <b>Calculated time schedule</b>.</li>\n<li>Select the <b>Delete attachments</b> template.</li>\n<li>Click <b>OK</b>.</li>\n<li>Enter each of the following parameter values:\n\t<ul>\n<li><b>execution condition</b>: ${true}</li>\n<li><b>execution date</b>: ${entity.CloseTime+10000}</li>\n<li><b>runtime condition (optional)</b>: ${true}</li>\n<li><b>excluding</b>: excluding</li>\n</ul>\n</li>\n<li>Click <b>Save</b>.</li>\n</ol>\n<p>To test the configuration, close a request that has an attachment in the Attachments section and an image attached in the Description field. Wait for a while, and then check that the attachment file has been removed from the record, and the image remains with the Description field.</p>\n<h2>Copy attachments</h2>\n<p>This template allows you to copy attachments from a selected field to the Attachment section of specific types of records.  </p>\n<ol>\n<li>For the <b>attachments </b>parameter, select the required attachments field from the drop-down list.</li>\n<li>\n<p>For the <strong>value</strong> parameter, select one of the following options:</p>\n<ul>\n<li><strong>Simple Mode</strong>. Enter or select the required value.</li>\n<li><strong>Expression Language</strong>. Enter an Expression Language phrase that returns the required value.<br/>\n<strong>Note:</strong> Click the Expression Language button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see Expression Language functions and syntax.</li>\n</ul>\n</li>\n</ol>\n<p>When the rule runs, the selected attachments field will copy all designated attachments and use them to replace the original attachments.</p>\n<p>For example, if you have created one incident record from a request and want to copy the request's attachment to the incident, the following rule may come in handy:</p>\n<p><strong>Incident </strong>&gt; <strong>Process and rule</strong>&gt; <strong>after adding relationship </strong>&gt; <strong>add if then rule </strong>&gt; <strong>copy attachments</strong>. </p>\n<pre>if ${current_association_update.association_name == 'IncidentCausedByRequest'}\n\ncopy attachment from ${entity.IncidentCausedByRequest.RequestAttachments} </pre>\n<h2>Lock user</h2>\n<p>This template allows you to lock a user. It's available for the <strong>Request</strong>, <strong>Person</strong>, <strong>Task</strong>, <strong>Change</strong>, <strong>Offering</strong>, <strong>Incident</strong>, and <strong>Project</strong> record types under the <strong>After applying changes</strong> event.</p>\n<ol>\n<li>\n<p>For the <strong>User</strong> parameter, choose either of the following options:</p>\n<ul>\n<li>Simple Mode. Select the required value from the drop-down list.</li>\n<li>Expression Language. Enter an Expression Language phrase that returns the required value.</li>\n</ul>\n<p>Click the Expression Language <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" src=\"../../../images/30px-SMAiconfx_894ae630.png\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n</li>\n<li>\n<p>When the rule runs, it locks the specified user.</p>\n</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Remove_Roles\">Remove Roles</h2>\n<p>The <b>Remove roles</b> event is only available for <b>Person</b> records.</p>\n<p>The only parameter in this rule template is <b>roles</b>.</p>\n<ul>\n<li>Select the required user role from the drop-down list.</li>\n<li>Click <b>Add item</b> to add a box for another role.</li>\n</ul>\n<p>When the rule runs, the roles are removed from the person records.</p>\n<h2>Reset password</h2>\n<p>This template allows you to send an email to a user for resetting the password. It's available for the <strong>Request</strong>, <strong>Person</strong>, <strong>Task</strong>, <strong>Change</strong>, <strong>Offering</strong>, <strong>Incident</strong>, and <strong>Project</strong> record types under the <strong>After applying changes</strong> event.</p>\n<ol>\n<li>\n<p>For the <strong>User</strong> parameter, choose either of the following options:</p>\n<ul>\n<li>Simple Mode. Select the required value from the drop-down list.</li>\n<li>Expression Language. Enter an Expression Language phrase that returns the required value.</li>\n</ul>\n<p>Click Expression Language <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" src=\"../../../images/30px-SMAiconfx_894ae630.png\"/> </a>  to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n</li>\n<li>\n<p>When the rule runs, it sends an email to the specified user with instructions on how to reset the password.</p>\n</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Reset_task_plan\">Reset task plan</h2>\n<p>The only parameter in this rule template is <b>record field</b>. Select the required field from the drop-down list. The execution for the task plan stored in the selected field is reset. When the workflow enters the phase, the task plan runs from the beginning.</p>\n<p>Example: In Change Management, select the <b>TasksExecutionPlanApproveDeployment</b> field. The task plan contained in that field is reset and the task can run again when the workflow re-enters the phase.</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>Upon executing the reset task plan, the system removes the previous task and replaces it with a new one, assigning a new task ID.</div></div></div>\n<h2 class=\"mw-headline\" id=\"Save_approval_plan_to_record\">Save approval plan to record</h2>\n<ol>\n<li>For the <b>approval plan</b> parameter, enter the name of the required out-of-the-box fulfillment plan, as defined in Service Catalog Management.</li>\n<li>For the <b>field</b> parameter, select the required field from the drop-down list.</li>\n<li>When the rule runs, the task flows contained in the selected fulfillment plan are stored in the specified field of the current record.</li>\n</ol>\n<p>Example: There is a rule in Change Management called <b>GLAForEmergencyGenerateExecutionPlan</b> which stores the task flows contained in the <b>ECAB</b> fulfillment plan in the <b>TasksExecutionPlanECAB</b> field of the current change record.</p>\n<h2 class=\"mw-headline\" id=\"Send_notification\">Send notification</h2>\n<ol>\n<li>\n<p>For the <b>recipients</b> parameter, select one of the following options:</p>\n<ul>\n<li><b>Simple rule</b>. Select the required recipients from the drop-down list. You can add both persons or groups as the receipients from the drop-down list.</li>\n<li><b>Expression Language</b>. Enter an Expression Language phrase that returns the required recipient.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n\tIf you are entering multiple recipients, click <b>Add Person</b> or <strong>Add Group</strong> to add another recipient box.\n\n\t<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>When you add the assignment group as the receipient:\n\t<ul>\n<li>If the group is defined with a group email and the <b>Use group email</b> check box is selected in the notification template:\n\n\t\t<ul>\n<li>The system sends the notification to the group email, rather than to each group member individually.</li>\n<li>The language defined for the group is used as the notification language. The default language is English. </li>\n<li>The ${:current_recipient.XXX} expression is allowed in the notification template but the current_recipient phrase will be automaticlly removed in the group emails.</li>\n</ul>\n</li>\n<li>If no group email is defined for the selected group, or if the notification template doesn't use the group email:\n\t\t<ul>\n<li>The system sends the notificationt to each group member individually. </li>\n<li>The language defined for the person is used as the notification language. The default language is English. </li>\n<li>The ${:current_recipient.FirstName} expression in the notification template can work as expected. </li>\n</ul>\n</li>\n</ul>\n</div></div></div>\n<p>You can also add external email addresses for recipients who aren't in the system. Follow these steps:</p>\n<ol>\n<li>Define a new field in the Fields tab, for example <b>ExternalEmail</b>.</li>\n<li>Add the field to a form in the Forms tab and enter an external email address in the field. If you enter multiple addresses, they must be separated by semicolons.</li>\n<li>In the business rule <b>recipients</b> parameter, select Expression Language and enter: <b>${split(entity.ExternalEmail_c)}</b>. (The <b>split</b> function is required to parse the semicolon separated email addresses.)</li>\n</ol>\n</li>\n<li>\n<p>For the <b>template</b> parameter, select a notification template from the drop-down list.</p>\n</li>\n<li>\n<p>For the <b>parameters</b> parameter, for each parameter, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Enter the template parameter value manually.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns the required template parameter value.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n<p>This parameter is optional.</p>\n</li>\n<li>When the rule runs, a notification based on the specified template with the specified parameters is sent to the specified recipients.</li>\n</ol>\n<p>Example: There is a rule in Change Management called <b>SendNotificationToServiceOwner</b>, which sends a notification based on the <b>ChangeHasBeenOpened</b> template (with no parameters) to the record owners denoted by the following Expression Language phrase:</p>\n<p>${entity.AffectsService.Owner}, ${entity.IsOwnedByPerson}</p>\n<h2 class=\"mw-headline\" id=\"Send_notification_with_cc_and_bcc_recipients\">Send notification with cc and bcc recipients</h2>\n<p>This rule is same as the <b>Send notification</b> rule, except that it has two additional parameters:</p>\n<ul>\n<li>cc recipients</li>\n<li>bcc recipients</li>\n</ul>\n<p>Use these two parameters to specify Cc and Bcc recipients for email notifications. Both the Cc and Bcc parameters support DSL expressions such as ${on_call.Primary(entity.AssignedGroup)} or ${first_non_empty_value(entity.AssignedPersion.Id, …)}, and the DSL expressions support external recipients such as ${'jack.smithxxxx@gmail.com'}.</p>\n<p><b>Notes</b>:</p>\n<ul>\n<li>It's a best practice to specify one \"To\" recipient (either an individual recipient or a Public Distribution List (PDL)) in the <b>recipients</b> parameter. This is because if there are more than one \"To\" recipient specified, each Cc and Bcc recipient will receive multiple separate email notifications with the same content, one for each \"To\" recipient.</li>\n<li>Each email notification sent to the <b>cc recipients</b>, and <b>bcc recipients</b> are based on the locale of each \"To\" recipient.</li>\n</ul>\n<h2 class=\"mw-headline\" id=\"Send_notification_to_all_reviewers\">Send notification to all reviewers</h2>\n<ol>\n<li>\n<p>For the <b>template</b> parameter, select a notification template from the drop-down list.</p>\n</li>\n<li>\n<p>For the <b>parameters</b> parameter, for each parameter, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Enter the template parameter value manually.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns the required template parameter value.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n</li>\n<li>\n<p>This rule is similar to the Send notification business rule, but the list of recipients isn't editable. When the rule runs, a notification based on the specified template with the specified parameters is sent to all the reviewers.</p>\n<p>This rule is relevant in Knowledge Management. The reviewers are defined in Service Request Management.</p>\n</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Send_notification_to_related_people\">Send notification to related people</h2>\n<ol>\n<li>\n<p>For the <b>template</b> parameter, select a notification template from the drop-down list.</p>\n</li>\n<li>\n<p>This rule is similar to the Send notification business rule, but the list of recipients isn't editable. When the rule runs, a notification based on the specified template is sent to all the related people.</p>\n<p>This rule is relevant for Idea records. The related people are determined by matching keywords in their <span class=\"SAW_VariablesSelf-Service_Portal\">Service Portal</span> profile with words in the Idea record content.</p>\n</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Send_notification_to_release_owner\">Send notification to release owner</h2>\n<ol>\n<li>For the <b>template</b> parameter, select a notification template from the drop-down list.</li>\n<li>For the <b>phase</b> parameter, select a phase from the drop-down list.</li>\n<li>This rule is similar to the Send notification business rule, but the list of recipients isn't editable. The rule sends a notification based on the specified template to the release owner when the record workflow reaches the specified phase.\n\t<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>This rule is available only for the <strong>Leaving</strong> event and transitions of Change Management workflows.  </div></div></div>\n</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Send_comment_notification\">Send comment notification</h2>\n<ol>\n<li>\n<p>For the <b>recipients</b> parameter, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Select the required recipient from the drop-down list. </li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns the required recipient.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n<p>If you are entering multiple recipients, click <b>Add item</b> to add another recipient box.</p>\n<p>When you select a recipient, the parameter is represented by an avatar icon <a class=\"image\" href=\"\"> <img alt=\"emAvatar.png\" data-file-height=\"39\" data-file-width=\"39\" height=\"39\" src=\"../../../images/emAvatar_ffcaafbb.png\" width=\"39\"/> </a> .</p>\n<p>If you don't enter a value, the notification will be sent to all stakeholders and previous comment submitters.</p>\n</li>\n<li>\n<p>For the <b>template</b> parameter, select a notification template from the drop-down list.</p>\n</li>\n<li>\n<p>For the <b>parameters</b> parameter, for each parameter, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Enter the template parameter value manually.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns the required template parameter value.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n<p>This parameter is optional, depending on the selected template.</p>\n</li>\n<li>When the rule runs, a notification based on the specified template with the specified parameters is sent to the specified recipients. The comments from the relevant record are inserted into the notification.</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Send_comment_notification_with_cc_and_bcc_recipients\">Send comment notification with cc and bcc recipients</h2>\n<p>This rule is the same as the <b>Send comment notification</b> rule, except that it has two additional parameters:</p>\n<ul>\n<li>cc recipients</li>\n<li>bcc recipients</li>\n</ul>\n<p>Use these two parameters to specify Cc and Bcc recipients for email notifications. Both the Cc and Bcc parameters support DSL expressions such as ${on_call.Primary(entity.AssignedGroup)} or ${first_non_empty_value(entity.AssignedPersion.Id, …)}, and the DSL expressions support external recipients such as ${'jack.smithxxxx@gmail.com'}.</p>\n<p><b>Notes</b>:</p>\n<ul>\n<li>It's a best practice to specify one \"To\" recipient (either an individual recipient or a Public Distribution List (PDL)) in the <b>recipients</b> parameter. This is because if there is more than one \"To\" recipient specified, each Cc and Bcc recipient will receive multiple separate email notifications with the same content, one for each \"To\" recipient.</li>\n<li>Each email notification sent to the <b>cc recipients</b>, and <b>bcc recipients </b>is based on the locale of each \"To\" recipient.</li>\n</ul>\n<h2 class=\"mw-headline\" id=\"Send_meeting_invitation\">Send meeting invitation</h2>\n<ol>\n<li>\n<p>For the <b>recipients</b> parameter, click <b>Add item</b> and select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Select the required recipient from the drop-down list.</li>\n<li>\n<p><b>Expression Language.</b> Enter an Expression Language phrase that returns the required recipient.</p>\n</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n<p>If you are entering multiple recipients, click <b>Add item</b> to add another recipient box.</p>\n</li>\n<li>\n<p>For the <b>canceled recipients</b> parameter, click <b>Add item</b> and select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Select the required recipient from the drop-down list.</li>\n<li>\n<p><b>Expression Language.</b> Enter an Expression Language phrase that returns the required recipient.</p>\n</li>\n</ul>\n<p>If you are entering multiple recipients, click <b>Add item</b> to add another recipient box.</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<p>The <b>recipients</b> and <b>canceled recipients</b> parameters are optional parameters, but one of them must be defined.</p>\n</div></div></div>\n</li>\n<li>\n<p>For the start parameter, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Select a record field from the drop-down list to indicate the start date and time of the meeting.</li>\n<li>\n<p><b>Expression Language.</b> Enter an Expression Language phrase that returns the start date and time of the meeting.</p>\n</li>\n</ul>\n</li>\n<li>\n<p>For the end parameter, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Select a record field from the drop-down list to indicate the end date and time of the meeting.</li>\n<li>\n<p><b>Expression Language.</b> Enter an Expression Language phrase that returns the end date and time of the meeting.</p>\n</li>\n</ul>\n</li>\n<li>For the <b>Busy</b> parameter, select a value from the drop-down list. The available options are <b>Busy</b> and <b>Free</b>.</li>\n<li>\n<p>When the rule runs, it sends a meeting invitation to the designated recipients and a cancellation to the canceled recipients. The meeting appears in their Outlook calendar at the specified date and time with the specified status.</p>\n</li>\n</ol>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<ul>\n<li>This rule is available for the Change record type only.</li>\n<li>In some versions of Outlook, if a change is made to the meeting, when you open the meeting, the end date isn't updated.</li>\n</ul>\n</div></div></div>\n<h2>Set fields</h2>\n<ol>\n<li>\n<p>For the <b>field values</b> parameter, click the <b>Add Item</b> button, which displays two boxes, one for a field name and one for its value. In the first box, select the required field name from the drop-down list. In the second box, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Enter the value for the selected record field manually or select it from a drop-down list, according to the value type.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns the value for the selected record field.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n<p>Click <b>Add Item</b> again to add another row and select or enter the required record field and value. Repeat this for all required record fields.</p>\n</li>\n<li>\n<p>When the rule runs, the selected fields are assigned the specified values.</p>\n</li>\n</ol>\n<p>Example 1: There is a rule in Change Management called <b>SetHighPriority</b> which assigns the value <b>High Priority</b> to the <b>Priority</b> field.</p>\n<p>Example 2: There is a rule in Change Management called <b>SetIsRequestedByPerson</b>, with <b>IsRequestedByPerson</b> as the field and the Expression language phrase <b>${current_user}</b> as the value. The rule assigns the person returned by <b>current_user</b> to the <b>IsRequestedByPerson</b> field.</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<ul>\n<li>Do not use this business rule to set the value of the <b>Phase Id</b> or <b>Process Id</b> fields.</li>\n<li>If you choose to use <b>Expression Language</b> for the <strong>value</strong> parameter and the value is defined by a hidden property, the business rule will set the field to null. This is a limitation. </li>\n</ul>\n</div></div></div>\n<h2 class=\"mw-headline\" id=\"Set_field_based_on_routing_definition\">Set field based on routing definition</h2>\n<ol>\n<li>For the <b>field</b> parameter, select the required group type field from the drop-down list.</li>\n<li>For the routing definition <b>name</b> parameter, select the required routing definition from the drop-down list.</li>\n<li>For the <b>parameters</b> parameter, there is one parameter for each lane of the routing definition. For each parameter, enter an Expression Language phrase that returns the required value. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</li>\n<li>When the rule runs, the selected group field is assigned the value calculated based on the path defined in the selected routing definition.</li>\n</ol>\n<p>For an example of the business rule, see <a href=\"/doc/423/26.1/routingdefovw#RoutingDefUseCaseSetField\" title=\"Routing definition use case - setting a field value\">Routing definition use case - setting a field value</a>.</p>\n<h2 class=\"mw-headline\" id=\"Set_fields_on_related_records\">Set fields on related records</h2>\n<ol>\n<li>\n<p>For the <b>record type</b> parameter, select the required type of record from the drop-down list.</p>\n</li>\n<li>\n<p>For the <b>record ids</b> parameter, click the <b>Add Item</b> button, and select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Select the required record from the drop-down list of related records.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns a related record of the selected type.</li>\n</ul>\n<p>Click <b>Add item</b> to add a box for another record.</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<p>Make sure you don't use \"entity.id\" for this parameter. Otherwise, this rule will try to set its own fields rather than a related record, and this may cause a conflict with an internal rule.</p>\n</div></div></div>\n</li>\n<li>\n<p>For the <b>fields values</b> parameter, click the <b>Add Item</b> button, which displays two boxes, one for a field name and one for its value. In the first box, select the required field name from the drop-down list. In the second box, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Enter or select the required values according to the type of field.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns a value of the required type.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n<p>Click <b>Add item</b> to add a box for another field.</p>\n</li>\n<li>\n<p>When the rule runs, the specified fields of the related records are assigned the entered values. Please be aware that this rules is consistently executed during the \"After applying changes\" process event, regardless of where it is initially defined. For details, see <a href=\"/doc/423/26.1/embizrules#Special_rules\" title=\"Special rules\">Special rules</a>.</p>\n</li>\n</ol>\n<p>Example: There is a rule in Change Management called <b>updateSubcategoriesLevel1ParentName</b>, with <b>ITProcessRecordCategory</b> as the record type. The record ids are given by the Expression Language phrase <b>${entity.CategoryHasLevel1Children.Id}</b> and the record values are given by the phrase <b>${entity.DisplayLabel}</b>. The rule assigns the values returned by the latter Expression Language phrase to the fields of the record returned by the former phrase.</p>\n<h3>Special usage of the rule</h3>\n<p>If the <strong>record type</strong> and <strong>record ids</strong> parameters are both specified by using DSL expressions, this rule can be used to set fields of any records instead of just related records of the current record. To do this, click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button and write the <strong>record type </strong>and <strong>record ids</strong> in this format ${''}. For example:</p>\n<div><a class=\"image\" href=\"\"> <img alt=\"set_fields_on_related_records.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/a/a4/set_fields_on_related_records.png\" height=\"54\" hspace=\"0\" src=\"../../../images/set_fields_on_related_records_4558acf7.png\" style=\"width: 800px; height: 54px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></div>\n<h2 class=\"mw-headline\" id=\"Set_fields_on_related_records\">Set fields on related tasks</h2>\n<p>This rule will update tasks that are related to the current record (the parent record).</p>\n<ul>\n<li>When using this rule, instead of updating all related tasks, we recommend that you set a proper condition so that the rule applies only to the specific tasks that do require updates according to the parent record’s update. For example:<br/>\n<a class=\"image\" href=\"\"> <img alt=\"SetFieldRelatedTasks1.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/a/af/SetFieldRelatedTasks1.png\" height=\"96\" hspace=\"0\" src=\"../../../images/SetFieldRelatedTasks1_4d082d59.png\" style=\"width: 800px; height: 96px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></li>\n<li>This rule is only available for modules that support Tasks.</li>\n<li>This rule is only available in the <strong>After applying change</strong> event which is an async update.</li>\n<li>This rule is only available for modules that support Tasks. They are Request, Incident, Change, Problem, Release, Article, Idea, Proposal, and all custom record types.</li>\n</ul>\n<p>To use this rule:</p>\n<ol>\n<li>\n<p>For the <b>condition</b> parameter, specify a condition, when certain related tasks meet this condition, this rule runs.</p>\n</li>\n<li>\n<p>For the <b>fields values</b> parameter, click the <b>Add Item</b> button, which displays two boxes, one for a field name and one for its value. In the first box, select the required field name from the drop-down list. In the second box, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Enter or select the required values according to the type of field.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns a value of the required type.</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n<p>Click <b>Add item</b> to add a box for another field.</p>\n</li>\n<li>\n<p>When the rule runs, the specified fields of the related tasks are assigned the entered values.</p>\n</li>\n</ol>\n<h2 class=\"mw-headline\">Update user option default value</h2>\n<p>This rule is available only for Offering and Model records under the <strong>After changes</strong> event. </p>\n<ul>\n<li>When a user option is deleted, on the <strong>Default values</strong> tab of an offering or model, the user option name along with its default value is deleted.</li>\n<li>When the field type of a user option is updated, on the <strong>Default values</strong> tab of an offering or model, the default value of that user option is cleared. </li>\n</ul>\n<h2>Unlock user</h2>\n<p>This template allows you to unlock a user. It's available for the <strong>Request</strong>, <strong>Person</strong>, <strong>Task</strong>, <strong>Change</strong>, <strong>Offering</strong>, <strong>Incident</strong>, and <strong>Project</strong> record types under the <strong>After applying changes</strong> event.</p>\n<ol>\n<li>\n<p>For the <strong>User</strong> parameter, choose either of the following options:</p>\n<ul>\n<li>Simple Mode. Select the required value from the drop-down list.</li>\n<li>Expression Language. Enter an Expression Language phrase that returns the required value.</li>\n</ul>\n<p>Click Expression Language <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" src=\"../../../images/30px-SMAiconfx_894ae630.png\"/> </a>  to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n</li>\n<li>\n<p>When the rule runs, it unlocks the specified user.</p>\n</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Survey_notification\">Survey notification</h2>\n<ol>\n<li>\n<p>For the <b>Survey name</b> parameter, select a survey from the drop-down list.</p>\n</li>\n<li>\n<p>For the <b>recipients</b> and <b>groups</b> parameters, click <b>Add item</b> to add a row and select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Select the required recipient or group from the drop-down list.</li>\n<li>\n<p><b>Expression Language.</b> Enter an Expression Language phrase that returns a value of the required type.</p>\n</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n<p>Click <b>Add item</b> to add a box for another field.</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<p>It's unnecessary to enter a value for both parameters. Enter or select a value for at least one recipient or at least one group.</p>\n</div></div></div>\n</li>\n<li>\n<p>For the <b>number of times</b> parameter, enter an integer.</p>\n</li>\n<li>For the <b>template</b> parameter, select a survey notification template from the drop-down list.</li>\n<li>\n<p>For the <b>parameters</b> parameter, for each parameter, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Enter or select the required values according to the type of field.</li>\n<li>\n<p><b>Expression Language.</b> Enter an Expression Language phrase that returns a value of the required type.</p>\n</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n<p>Some templates have no parameters.</p>\n</li>\n<li>When the rule runs, the selected survey is sent to the selected recipients and groups using the selected survey notification template.</li>\n</ol>\n<p>Example: If there is a survey called <b>User satisfaction survey</b>, you can define a rule in Service Request Management to send a notification to the <b>Requested for</b> user when a request is closed. You can configure the rule to send a survey once every 5 times it runs to reduce the number of mails sent to users. The rule sends the user a notification every 5 times the rule runs, using the <b>Survey default template</b> (with no parameters) with a link to the <b>User satisfaction survey</b>.</p>\n<h2>Call Integration Studio</h2>\n<p>This template enables you to create a rule to call the <a href=\"/doc/423/26.1/integrationhub\" title=\"Integration Studio\">Integration Studio</a> to run a scenario for an integration created under <strong>Administration </strong>&gt; <strong>Utilities </strong>&gt; <strong>Integration </strong>&gt; <strong>Integration Studio</strong>.</p>\n<ol>\n<li><strong>Expression</strong>: Specify a condition for triggering the rule. </li>\n<li><strong>Integration</strong>: Select the integration.</li>\n<li><strong>Scenario</strong>: Select a scenario defined for the integration.</li>\n<li><strong>Payload</strong>: If the scenario uses values of some Service Management record fields, click this link to add the fields. Click the <b>Add Item</b> button, which displays two boxes, one for a field name and one for its value. In the first box, enter the field name. In the second box, enter the value by using one of the following modes:\n\t<ul>\n<li>\n<p><b>Simple mode.</b> Enter a literal value.</p>\n</li>\n<li>\n<p><b>Expression Language mode.</b> Enter an Expression Language phrase that returns the value for a record field.</p>\n</li>\n</ul>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"\"> <img alt=\"30px-SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these modes. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode.</p>\n<p>For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"Expression Language functions and syntax\">Expression Language functions and syntax</a>.</p>\n<p>Click <b>Add Item</b> again to add another row and enter the required field and value. Repeat this for all required fields.</p>\n<p>The fields and values will be passed to the <em>payload</em> object in the Integration Studio. For how to use the field values in integration scenarios, see Integration Studio <a href=\"/doc/423/26.1/xieobjects#payload\" title=\"Objects\">Objects</a>.</p>\n</li>\n</ol>\n<h2 id=\"Execute_Operations_Orchestration_(OO)_flow\"><span class=\"mw-headline\" id=\"Execute_Operations_Orchestration_.28OO.29_flow\">Execute Operations Orchestration (OO) flow</span></h2>\n<p>This template enables you to create a rule to run OO flows from workflows of all entities, including custom entities. Additionally, you can run such a rule only after applying changes.</p>\n<p><b>Caution</b>: Use caution when running OO flows with this rule, because doing so on a large number of records may downgrade the system performance. Additionally, a massive or improper OO business rule configuration will impact other integrations that are configured on the same On-Premises Bridge (OPB) agent, and may cause a delay of several minutes or even hours in integration tasks depending on the number of tasks and the server load.</p>\n<ol>\n<li>Click the <b>expression</b> parameter in the business rule to specify a condition for triggering the OO flow.</li>\n<li>Click the <b>OO endpoint</b> parameter in the business rule to select the endpoint. Select the OO endpoint that you defined and click <b>OK</b>.</li>\n<li>Click the <b>flow name</b> parameter in the business rule to select the OO flow to run. Enter a string in the Search window to search for a flow. Select the required flow and click <b>OK</b>.</li>\n<li>Click the <b>flow parameters</b> parameter in the business rule to configure the input parameters of the OO flow. For each parameter, enter a value in Simple mode or enter an Expression language phrase.</li>\n<li>Click the <b>Record fields</b> parameter to map the OO flow output to record fields.</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Execute_REST\">Execute REST</h2>\n<p>For information on this business rule, see <a href=\"/doc/423/26.1/executerest\" title=\"REST Execution through OPB\">REST Execution through OPB</a>.</p>\n<h2>Execute Agentless REST</h2>\n<p>For information on this business rule, see <a href=\"/doc/423/26.1/excuterestwithoutopb\" title=\"Agentless REST Execution\">Agentless REST Execution</a>. </p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>Agentless REST is not supported in SaaS environments.</div></div></div>\n<h2 class=\"mw-headline\" id=\"Per_schedule_rules\">Per-schedule rules</h2>\n<p>For the <b>Per-schedule</b> process event, all the available rules have additional parameters related to the scheduling of the rule. Furthermore, only the Simple rule option is available. However the rule template includes an Execution condition parameter which enables you to define a conditional rule.</p>\n<p>Per-schedule rules are executed using the internal integration user: <strong>saw-integration-internal@dummy.com</strong>.</p>\n<p>Select one of the following options to define a Per-Schedule rule:</p>\n<ul>\n<li>\n<p><b>Calculated timer schedule.</b> Define a rule to run at a specific time.</p>\n<p>Follow these steps to define the rule:</p>\n<ol>\n<li>For the <b>Execution date</b> parameter, enter an Expression language phrase specifying a date and time. Due to the per-schedule framework design, the actual execution time may be 5~10 minutes later than this specified value.  </li>\n<li>\n<p>For the <b>Execution condition</b> parameter, enter an Expression Language phrase that returns a boolean value. This serves as the condition for scheduling the rule. If you want to define a simple rule (with no condition), enter an expression that's always true (for example, <b>${true}</b>).</p>\n</li>\n<li>For the <b>Runtime condition</b> parameter, enter an Expression Language phrase that returns a boolean value. This serves as the condition for running the rule.</li>\n<li>\n<p>If the Execution condition is satisfied, the rule is scheduled to run at the time specified in the Execution date. If the Runtime condition is satisfied at the specified time, the rule is run. If no value is entered for the Runtime condition, the Execution condition is verified again; if it's satisfied, the rule is run.</p>\n</li>\n</ol>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<ul>\n<li>If the Execution date parameter returns a negative value (a value in the past), the business rule isn't scheduled to run.</li>\n<li>After the rule has run once at the specified time, it continues to run at the next specified time according to the Expression language phrase, when the workflow is run.</li>\n</ul>\n</div></div></div>\n<p>Example: You can define a Per-schedule rule in Contract Management as follows:</p>\n<p>If <b>${entity.EndDate != null}</b> is true, schedule execution at <b>${first_non_empty_value(entity.EndDate,0) + 24*60*60*1000}</b> Set PhaseId to Close.</p>\n<p>If the <b>EndDate</b> field of the contract isn't empty, the execution is scheduled to take place 24 hours after the end of the contract. (No runtime condition is defined for this rule.)</p>\n<p>Example: You can define a rule with the following execution condition:</p>\n<p><b>${current_update.EmployeeStatus.IsChanged &amp;&amp; (current_update.EmployeeStatus.NewValue == 'Inactive' || current_update.EmployeeStatus.NewValue == 'Retired' || current_update.EmployeeStatus.NewValue == 'Terminated')}</b></p>\n<p>and the following runtime condition:</p>\n<p><b>${entity.EmployeeStatus == 'Inactive' || entity.EmployeeStatus == 'Retired' || entity.EmployeeStatus == 'Terminated'}</b></p>\n<p>If the Employee status is changed to Inactive, Retired, or Terminated, the rule is scheduled to run at the execution time. The runtime condition checks the Employee status again at the execution time; if it's still one of those values, the rule runs. This provides an additional status check before running the rule.</p>\n</li>\n</ul>\n<ul>\n<li>\n<p><b>Fixed timer schedule.</b> Define a rule to run on a recurring basis.</p>\n<p>Follow these steps to define the rule:</p>\n<ol>\n<li>\n<p>For the <b>Initial timeout</b> parameter, enter a numeric value.</p>\n</li>\n<li>\n<p>For the <b>Initial timeout units</b> parameter, enter a time unit (hours or days).</p>\n</li>\n<li>\n<p>For the <b>Recurrence time</b> parameter, enter a numeric value.</p>\n</li>\n<li>\n<p>For the <b>Recurrence time units</b> parameter, enter a time unit (hours or days).</p>\n</li>\n<li>\n<p>For the <b>Execution condition</b> parameter, enter an Expression Language phrase that returns a boolean value. This serves as the condition for a conditional rule. If you want to define a simple rule (with no condition), enter an expression that's always true (for example, <b>${true}</b>).</p>\n</li>\n<li>\n<p>When the rule is enabled, the rule is implemented every <b>x</b> recurrence time units from the time that the entity has been in the current phase/metaphase/process for time specified in the initial timeout parameter.</p>\n</li>\n</ol>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<p>In out-of-the-box rules, the <b>Initial timeout units</b> and <b>Recurrence time units</b> parameters can be in minutes or seconds in addition to hours or days.</p>\n</div></div></div>\n<p>Example: The following rule in Tasks is defined as Per-schedule:</p>\n<p>After the record is in this phase for 48 hours, then every 48 hours, if <b>${(entity.ActualStartTime != null) &amp;&amp; (entity.PhaseId != 'Completed' &amp;&amp; entity.PhaseId != 'Cancel')} Send notification to ${entity.Assignee.Id}</b>.</p>\n<p>The Initial timeout parameter is <b>48</b>. The Initial timeout units parameter is <b>hours</b>. The Recurrence time parameter is <b>48</b> and the Recurrence time units parameter is <b>hours</b>. The Execution condition parameter is <b>${(entity.ActualStartTime != null) &amp;&amp; (entity.PhaseId != 'Completed' &amp;&amp; entity.PhaseId != 'Cancel')}</b>.</p>\n<p>After an initial wait of 48 hours (2 days), if the condition is satisfied, the rule sends a notification to the record's assignees every 48 hours.</p>\n</li>\n</ul>\n<h2 id=\"Use_business_rules_to_modify_CI_relationships\">Create a CI relationship</h2>\n<p>You can create a CI relationship with either a simple or \"If...Then\" rule.</p>\n<p>To create a CI relationship with a business rule:</p>\n<ol>\n<li>Select a record type in Studio.</li>\n<li>On the <b>Processes and Rules</b> tab, in a desired process event, click <b>Add,</b> select either <b>Simple rule</b> or <b>\"If...Then\" rule</b>.</li>\n<li>Select the <b>Create CI relationship</b> action.</li>\n<li>Enter the <b>If</b> condition with a DSL expression if it's an <b>\"If...Then\" rule</b>.</li>\n<li>In the <code>Create CI relationship of type &lt;relationship type&gt; from &lt;record type 1&gt; with ID &lt;id 1&gt; to &lt;record type 2&gt; with ID &lt;id 2&gt;</code> action, populate the following fields:\n\t<ul>\n<li><b>&lt;relationship type&gt;</b>: Select <b>Composition</b>, <b>Containment</b>, or <b>Usage</b>.</li>\n<li><b>&lt;record type 1&gt;</b>: Select the source SACM record type, which can be <b>Actual Service</b>, <b>Device</b>, <b>Service Component</b>, or <b>System Element</b>.</li>\n<li><b>&lt;id 1&gt;</b>: Select the source SACM record.</li>\n<li><b>&lt;record type 2&gt;</b>: Select the target SACM record type, which can be <b>Actual Service</b>, <b>Device</b>, <b>Service Component</b>, or <b>System Element</b>.</li>\n<li><b>&lt;id 2&gt;</b>: Select the target SACM record.</li>\n</ul>\n</li>\n<li>When this rule is run, a CI relationship is created from record <b>&lt;id 1&gt;</b> to record <b>&lt;id2&gt;</b> in both Service Management and UCMDB.</li>\n</ol>\n<h2 id=\"Delete_a_CI_relationship_with_a_business_rule\">Delete a CI relationship with a business rule</h2>\n<p>You can delete a CI relationship with either a simple or \"If...Then\" rule.</p>\n<p>To delete a CI relationship with a business rule:</p>\n<ol>\n<li>Select a record type in Studio.</li>\n<li>On <b>Processes and Rules</b> tab, in a desired process event, click <b>Add,</b> select either <b>Simple rule</b> or <b>\"If...Then\" rule</b>.</li>\n<li>Select the <b>Delete CI relationship</b> action.</li>\n<li>Enter the <b>If</b> condition with a DSL expression if it's an <b>\"If...Then\" rule</b>.</li>\n<li>In the <code>Delete CI relationship of type &lt;relationship type&gt; from &lt;record type 1&gt; with ID &lt;id 1&gt; to &lt;record type 2&gt; with ID &lt;id 2&gt;</code> action, populate the following fields:\n\t<ul>\n<li><b>&lt;relationship type&gt;</b>: Select <b>Composition</b>, <b>Containment</b>, or <b>Usage</b>.</li>\n<li><b>&lt;record type 1&gt;</b>: Select the source SACM record type, which can be <b>Actual Service</b>, <b>Device</b>, <b>Service Component</b>, or <b>System Element</b>.</li>\n<li><b>&lt;id 1&gt;</b>: Select the source SACM record.</li>\n<li><b>&lt;record type 2&gt;</b>: Select the target SACM record type, which can be <b>Actual Service</b>, <b>Device</b>, <b>Service Component</b>, or <b>System Element</b>.</li>\n<li><b>&lt;id 2&gt;</b>: Select the target SACM record.</li>\n</ul>\n</li>\n<li>When this rule is run, a CI relationship is deleted from record <b>&lt;id 1&gt;</b> to record <b>&lt;id2&gt;</b> in both Service Management and UCMDB.</li>\n</ol>\n<h2 class=\"mw-headline\">Related topics</h2>\n<ul>\n<li><a href=\"/doc/423/26.1/processes\" title=\"Processes and Rules\">Processes and Rules</a></li>\n<li><a href=\"/doc/423/26.1/embizrules\" title=\"Studio business rules\">Studio business rules</a></li>\n<li><a href=\"/doc/423/26.1/rulesdescriptionstags\" title=\"Business rule descriptions and tags\">Business rule descriptions and tags</a></li>\n<li><a href=\"/doc/423/26.1/dslvalidationrules\" title=\"Validation rule examples\">Validation rule examples</a></li>\n<li><a href=\"/doc/423/26.1/renderingrules\" title=\"Rendering rule examples\">Rendering rule examples</a></li>\n<li><a href=\"/doc/423/26.1/fieldselectionrulesexamples\" title=\"Field selection rule examples\">Field selection rule examples</a></li>\n<li><a href=\"/doc/423/26.1/executerest\" title=\"REST Execution\">REST Execution</a></li>\n<li><a href=\"/doc/423/26.1/wflwusecase\" title=\"Studio - use case\">Studio - use case</a></li>\n<li><a href=\"/doc/423/26.1/addbizrule\" title=\"How to add a business rule\">How to add a business rule</a></li>\n<li><a href=\"/doc/423/26.1/modifybizrule\" title=\"How to edit, remove, or disable a business rule\">How to edit, remove, or disable a business rule</a></li>\n<li><a href=\"/doc/423/26.1/enrichmentrules\" title=\"Enrichment rules\">Enrichment rules</a></li>\n<li><a href=\"/doc/423/26.1/taskplans\" title=\"Task plans\">Task plans</a></li>\n</ul>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}