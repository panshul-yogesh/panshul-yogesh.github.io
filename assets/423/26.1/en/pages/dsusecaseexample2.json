{
  "title": "Data domain segmentation example 2",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p><br/>\nThis example shows a use case of a Managed Service Provider (MSP) using domain segmentation to separate the support of various customers. This example use case works as follows:</p>\n<ul>\n<li>Request tickets are assigned automatically to the domain of the company of <b>RequestedForPerson</b></li>\n<li>Service Desk agents in each company can only see tickets assigned to their company. Within a ticket, they can select locations, groups, people, etc. that are in their company’s Domain</li>\n<li>MSP agents can see tickets of all companies. When they drill down to work on a ticket, they can select locations, groups, or people of all companies</li>\n</ul>\n<p>The following describes how to configure the Service Management applications and prepare sample data to test this use case.</p>\n<h2 class=\"mw-headline\" id=\"Set_up_SMAX_applications\">Set up Service Management applications</h2>\n<p>Perform the following steps to set up the Request application and other applications such as Incident and Change:</p>\n<ol>\n<li><a href=\"/doc/423/26.1/dsusecaseexample2#Step_1/_Add_two_business_rules_to_the_Request_Workflow\" title=\"Step 1: Add two business rules to the Request Workflow\">Step 1: Add two business rules to the Request Workflow</a></li>\n<li><a href=\"/doc/423/26.1/dsusecaseexample2#Step_2/_Configure_other_processes\" title=\"Step 2: Configure other processes\">Step 2: Configure other processes</a></li>\n<li><a href=\"/doc/423/26.1/dsusecaseexample2#Step_3/_Add_data_domain_fields_to_forms\" title=\"Step 3: Add data domain fields to forms\">Step 3: Add data domain fields to forms</a></li>\n</ol>\n<h3 class=\"mw-headline\" id=\"Step_1:_Add_two_business_rules_to_the_Request_Workflow\">Step 1: Add two business rules to the Request Workflow</h3>\n<p>In this step, you need to add two business rules that provide a default behavior of assigning a Request ticket to the domain of <b>RequestForPerson</b>.</p>\n<ol>\n<li>Log in to the agent interface as the tenant admin, go to <b>Studio</b> &gt; <b>Request</b> &gt; <b>Processes and Rules</b>, select <b>Request</b> and then expand the <b>After change</b> section.</li>\n<li>Click <b>Add</b>, select <b>If ...Then rule</b>, select the <b>Append or remove values in a multi-value field</b> action and then click <b>OK</b> to add the two rules shown below.\n\t<p><b>Note</b>: This is a suggested best practice, and you may choose a different logic if appropriate, such as having the agent explicitly select a Company for the ticket and assigning the domain from there.</p>\n<div><a class=\"image\" href=\"/file/images/3/33/OT_SMA_2023.05_data_domain_business_rules_for_request.png\" title=\"/file/images/3/33/OT_SMA_2023.05_data_domain_business_rules_for_request.png\"> <img alt=\"OT_SMA_2023\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/3/33/OT_SMA_2023.05_data_domain_business_rules_for_request.png\" height=\"350\" hspace=\"0\" src=\"../../../images/OT_SMA_2023.05_data_domain_business_rules_for_request_c600c838.png\" style=\"width: 800px; height: 350px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></div>\n\tThe following table provides the details of these rules.\n\n\t<table>\n<tbody>\n<tr>\n<th>Rule template</th>\n<th>Rule description</th>\n<th>If expression</th>\n<th>Action</th>\n</tr>\n<tr>\n<td><b>Append or remove values in a multi-value field</b></td>\n<td>MSP Data Domains - Remove \"Public\" from the data domains of the current request</td>\n<td><code>If ${current_update.RequestedForPerson.IsChanged &amp;&amp; current_update.RequestedForPerson.NewValue != null &amp;&amp; current_update.RequestedForPerson.NewValue.DataDomains != null}</code></td>\n<td>\n<p><code><u>Remove</u> from multi-value field <u>Data domains </u> the following values <u>Public</u></code></p>\n</td>\n</tr>\n<tr>\n<td><b>Append or remove values in a multi-value field</b></td>\n<td>MSP Data Domains - Assign the record to the same domain as the requested for person's domain</td>\n<td><code>If ${current_update.RequestedForPerson.IsChanged &amp;&amp; current_update.RequestedForPerson.NewValue != null &amp;&amp; current_update.RequestedForPerson.NewValue.DataDomains != null}</code></td>\n<td><code><u>Append</u> to multi-value field <u>Data domains</u> the following values <u>${current_update.RequestedForPerson.NewValue.DataDomains}</u> </code></td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>Save the workflow.</li>\n</ol>\n<h3 class=\"mw-headline\" id=\"Step_2:_Configure_other_processes\">Step 2: Configure other processes</h3>\n<p>The rules added to the Request workflow provide a suggested practice for the Request process based on the <b>Request.RequestedForPerson</b> link. For other processes such as Incident or Change, you can add similar rules but take the default domain from a Company assigned to the record.</p>\n<p>A suggested practice is as follows:</p>\n<ul>\n<li>Add a Company field to the New and Full Incident forms</li>\n<li>Add a Rule to make Company a required field</li>\n<li>If desired, add a Rule to set a default company value based on the <b>current_user.Company</b> field</li>\n<li>Add a rule to set the data domains based on the Company's data domains</li>\n</ul>\n<p>To achieve this, add the following business rule to the Incident workflow (you can add similar ones to the workflows of other applications such as Change): go to <b>Studio</b> &gt; <b>Incident</b> &gt; <b>Processes and Rules</b> &gt; <b>Incident</b> &gt; <b>After change</b>, click <b>Add</b> and then select <b>If...Then rule</b> to add the rules.</p>\n<div><a class=\"image\" href=\"/file/images/c/ca/SMA_202305_data_domain_business_rules_for_incident.png\" title=\"/file/images/c/ca/SMA_202305_data_domain_business_rules_for_incident.png\"> <img alt=\"SMA_202305_data_domain_business_rules_for_incident\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/c/ca/SMA_202305_data_domain_business_rules_for_incident.png\" height=\"306\" hspace=\"0\" src=\"../../../images/SMA_202305_data_domain_business_rules_for_incident_7c21eb21.png\" style=\"width: 800px; height: 306px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></div>\n<p>The following table provides the details of these rules.</p>\n<table>\n<tbody>\n<tr>\n<th>Rule template</th>\n<th>Rule description</th>\n<th>If expression</th>\n<th>Action</th>\n</tr>\n<tr>\n<td><b>Set field</b></td>\n<td>MSP Data Domains - Set the default Company of the Incident to the Company of the current user</td>\n<td><code>If ${current_user.Company != null &amp;&amp; entity.IncidentToCompany == null}</code></td>\n<td><code>Set <u>Incident to Company</u> to <u>${current_user.Company}</u></code></td>\n</tr>\n<tr>\n<td><b>Append or remove values in a multi-value field</b></td>\n<td>MSP Data Domains - Remove the Domains of the previous Company setting (in case Company has changed)</td>\n<td><code>If ${current_update.IncidentToCompany.IsChanged &amp;&amp; current_update.IncidentToCompany.OldValue != null &amp;&amp; current_update.IncidentToCompany.OldValue.DataDomains != null}</code></td>\n<td><code><u>Remove</u> from multi-value field <u>Data domains</u> the following values <u>${current_update.IncidentToCompany.OldValue.DataDomains}</u></code></td>\n</tr>\n<tr>\n<td><b>Append or remove values in a multi-value field</b></td>\n<td>MSP Data Domains - Remove Public domain in case the incident is being assigned to a Company domain</td>\n<td><code>If ${current_update.IncidentToCompany.IsChanged &amp;&amp; current_update.IncidentToCompany.NewValue != null &amp;&amp; current_update.IncidentToCompany.NewValue.DataDomains != null}</code></td>\n<td><code><u>Remove</u> from multi-value field <u>Data domains</u> the following values <u>Public</u></code></td>\n</tr>\n<tr>\n<td><b>Append or remove values in a multi-value field</b></td>\n<td>MSP Data Domains - Set the Domain of the Incident to the Domain of the Company that owns the Incident</td>\n<td><code>If ${current_update.IncidentToCompany.IsChanged &amp;&amp; current_update.IncidentToCompany.NewValue != null &amp;&amp; current_update.IncidentToCompany.NewValue.DataDomains != null}</code></td>\n<td><code><u>Append</u> to multi-value field <u>Data domains</u> the following values <u>${current_update.IncidentToCompany.NewValue.DataDomains}</u></code></td>\n</tr>\n</tbody>\n</table>\n<h3 class=\"mw-headline\" id=\"Step_3:_Add_data_domain_fields_to_forms\">Step 3: Add data domain fields to forms</h3>\n<ol>\n<li>Go to <b>Administration</b> &gt; <b>Configuration</b> &gt; <b>Studio</b>.</li>\n<li>Add the <b>Primary domain</b> and <b>Data domains</b> fields to the forms of the following record types:\n\t<ul>\n<li>Person</li>\n<li>Group</li>\n</ul>\n</li>\n<li>Add the <b>Data domains</b> field to the forms of the following record types:\n\t<ul>\n<li>Location</li>\n<li>Company</li>\n<li>Category</li>\n</ul>\n</li>\n<li>(Optional) Add the <b>Data domains</b> field to the forms of the following record types (this is optional as the data domains of these record types are set by business rules, but you can have the field displayed in the form for testing purposes):\n\t<ul>\n<li>Request (<b>withoutResolution</b>, and <b>New Request form</b>)</li>\n<li>Incident (<b>New Incident form</b>, and <b>Full Incident form</b>)</li>\n<li>Change (<b>New Change form</b>, and <b>Full Change form</b>)</li>\n</ul>\n</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Prepare_MSP_data\">Prepare MSP data</h2>\n<p>To implement this example use case, prepare the following data records.</p>\n<h3 class=\"mw-headline\" id=\"Domains\">Domains</h3>\n<p>Go to <b>Administration</b> &gt; <b>Configuration</b> &gt; <b>Lists</b>, and then add three domains to the <b>Data domains</b> list:</p>\n<ul>\n<li>MSP</li>\n<li>CompA</li>\n<li>CompB</li>\n</ul>\n<h3 class=\"mw-headline\" id=\"Roles\">Roles</h3>\n<p>Go to <b>Administration</b> &gt; <b>Master Data</b> &gt; <b>People</b> &gt; <b>ROLES</b>, and then click <b>Add</b> to create three roles named as follows and assign each one an authorized domain (in the Security section) as appropriate to give users domain access:</p>\n<ul>\n<li>DomainMSP (authorized domain: MSP)</li>\n<li>DomainA (authorized domain: CompA)</li>\n<li>DomainB (authorized domain: CompB)</li>\n</ul>\n<h3 class=\"mw-headline\" id=\"Customer_data\">Customer data</h3>\n<p>Create the following data records for two customers (Customer A and Customer B) and the MSP.</p>\n<ul>\n<li>To create a Company record, go to <b>Plan</b> &gt; <b>Company</b>, and then click <b>New</b>.</li>\n<li>To create an Agent record, you can create a user in Suite Administration as suite-admin (https://&lt;External Access Host&gt;/bo), or go to <b>Administration</b> &gt; <b>Master data</b> &gt; <b>People</b> in the agent interface as the tenant admin and then click <b>New</b> and enable the <b>Create user</b> option (this method requires that the tenant's <b>Manage users in tenant</b> setting is enabled in Suite Administration).</li>\n<li>To create a Group record, go to <b>Administration</b> &gt; <b>Master data</b> &gt; <b>People</b> &gt; <b>GROUPS</b>, and then click <b>New</b>.</li>\n<li>To create a Location record, go to <b>Administration</b> &gt; <b>Master data</b> &gt; <b>Locations</b>, and then click <b>New</b>.</li>\n</ul>\n<table>\n<tbody>\n<tr>\n<th></th>\n<th>Company</th>\n<th>Agent</th>\n<th>Group</th>\n<th>Location</th>\n</tr>\n<tr>\n<td>Customer A</td>\n<td>\n<ul>\n<li>Name: Company A</li>\n<li>Data domains: CompA</li>\n</ul>\n</td>\n<td>Annie Brown (login: annie)\n\t\t\t<ul>\n<li>Roles (given to gain Domain access): DomainA</li>\n<li>Data domains: CompA</li>\n<li>Company: Company A</li>\n</ul>\n</td>\n<td>\n<ul>\n<li>Name: Service Desk A</li>\n<li>Data domains: CompA</li>\n</ul>\n</td>\n<td>\n<ul>\n<li>Name: Headquarter A</li>\n<li>Data domains: CompA</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>Customer B</td>\n<td>\n<ul>\n<li>Name: Company B</li>\n</ul>\n<ul>\n<li>Data domains: CompB</li>\n</ul>\n</td>\n<td>Benny Lopez (login: benny)\n\t\t\t<ul>\n<li>Roles (given to gain Domain access) = DomainB</li>\n<li>Data domains: CompB</li>\n<li>Company: Company B</li>\n</ul>\n</td>\n<td>\n<ul>\n<li>Name: Service Desk B</li>\n</ul>\n<ul>\n<li>Data domains: CompB</li>\n</ul>\n</td>\n<td>\n<ul>\n<li>Name: Headquarter B</li>\n</ul>\n<ul>\n<li>Data domains: CompB</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>MSP</td>\n<td>\n<ul>\n<li>Name: Company MSP</li>\n</ul>\n<ul>\n<li>Data domains: MSP</li>\n</ul>\n</td>\n<td>Mike Smith (login: mike)\n\t\t\t<ul>\n<li>Roles (given to gain Domain access) = DomainMSP, DomainA, DomainB</li>\n<li>Data domains: CompA, CompB, MSP</li>\n<li>Company: Company MSP</li>\n</ul>\n</td>\n<td>\n<ul>\n<li>Name: Service Desk MSP</li>\n</ul>\n<ul>\n<li>Data domains: CompA, CompB, MSP</li>\n</ul>\n</td>\n<td>\n<ul>\n<li>Name: Headquarter MSP</li>\n</ul>\n<ul>\n<li>Data domains: MSP</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Note how the Persons and Groups that belong to an MSP are assigned to the domains of each company. This is needed so that an Agent of such companies may assign the ticket over to the MSP group or MSP agents.</p>\n<h2 class=\"mw-headline\" id=\"Test_the_use_case\">Test the use case</h2>\n<ol>\n<li>Log in to the agent interface as Annie (from Comp A), go to <b>Run</b> &gt; <b>Service Request</b> and then click <b>New </b>to create a request:\n\n\t<ol start=\"1\">\n<li>Select Annie Brown for the <b>Requested by</b> and <b>Requested for</b> fields, and check that Mike (from MSP) is also available for selection but Benny from Company B isn't.</li>\n<li>Once the ticket is created, check that its <b>Data domains</b> field is automatically set to <b>CompA</b>.</li>\n<li>Assign it Service Desk A, Headquarter A, and note here too that options from other companies aren't available.</li>\n</ol>\n</li>\n<li>Repeat the previous step as Benny, using Company B values.</li>\n<li>Check the Request queue as Annie and then as Benny, and note only their company tickets are visible.</li>\n<li>Check the Request queue as Mike, and note that all company tickets are visible. In addition, Mike can assign MSP groups and people to these tickets.</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}