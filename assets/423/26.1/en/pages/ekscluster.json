{
  "title": "Build EKS cluster",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><table>\n<tbody>\n<tr>\n<th>Role</th>\n<th>Location</th>\n</tr>\n<tr>\n<td>IT / Kubernetes Cluster administrator</td>\n<td>AWS Management Console</td>\n</tr>\n</tbody>\n</table>\n<p>To use Amazon Elastic Kubernetes Service (EKS) to install and manage the suite on AWS, you need to perform the following tasks to create an EKS cluster and then launch the EKS cluster worker nodes.</p>\n<h2 class=\"mw-headline\" id=\"Create_EKS_cluster\">Create an EKS cluster</h2>\n<ol>\n<li>Log in to the AWS Management Console and switch to the selected region.</li>\n<li>Go to <b>All services</b> &gt; <b>Management &amp; Governance</b> &gt; <b>CloudFormation.</b> </li>\n<li>Click <b>Create stack </b> &gt; select <strong>With new resources  (standard)</strong>, click <b>Template is ready</b> &gt; <b>Upload a template file</b> &gt; <b>Choose file</b>, and then select the <code>smax-eks.template</code> file under directory <code>../Cloud Deployment x.x.x/../byok/smax-cloudformation-aws </code>in the <a href=\"/doc/423/26.1/downloadcloudpackage\" title=\"Download the cloud deployment package\">cloud deployment package</a>.<code> </code>\n<ol>\n<li>Click <b>Next</b> and populate the following fields.\n\t\t<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n<thead>\n<tr>\n<th scope=\"col\">Field</th>\n<th scope=\"col\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><b>Stack name</b></td>\n<td>Give a name to this stack, such as <em>sma-eks</em>.</td>\n</tr>\n<tr>\n<td><b>VPC ID</b></td>\n<td>Select the created VPC from the drop-down list.</td>\n</tr>\n<tr>\n<td><b>Subnets for EKS Cluster</b></td>\n<td>Select the three private subnets created.</td>\n</tr>\n<tr>\n<td><b>EKS Cluster Name:</b></td>\n<td>\n<p>Enter the EKS cluster name you defined in the <a href=\"/doc/423/26.1/eksvpc\" title=\"Prepare VPC\">Prepare VPC</a><i> </i>step.<br/>\n<span style=\"background-color: transparent;\">You must use the same EKS cluster name when creating VPC, EKS cluster, and worker nodes; otherwise, the suite installation will fail.</span></p>\n</td>\n</tr>\n<tr>\n<td><b>EKS Cluster Version</b></td>\n<td>Select a <a href=\"/doc/423/26.1/ekssupportmatrix\" title=\"Support matrix for EKS deployment\">supported EKS version</a>.</td>\n</tr>\n<tr>\n<td><b>EKS Cluster Security Group</b></td>\n<td>Select the security group created for the control plane.</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ol>\n</li>\n<li>Click <b>Next</b> &gt; <b>Next</b>, acknowledge the required capabilities, and click <b>Submit</b>. Wait until the stack creation is completed, and check the results on the <b>Outputs</b> tab.\n\t<div class=\"Admonition_Tip\"><span class=\"autonumber\">Tip<strong>: </strong></span>Take a note of the<b> NodeInstanceRole</b> value on the <b>Outputs</b> tab. You will need it to launch worker nodes in the next section.</div>\n<p>After the creation of the EKS cluster, the system creates a security group for the EKS cluster (<strong>eks-cluster-sg-*</strong>). You will need it when launching EFS and creating RDS later.</p>\n</li>\n<li>Check if your VPC has been properly tagged so that the EKS cluster can discover it. For details, see the AWS document <a class=\"external text\" href=\"https://docs.aws.amazon.com/eks/latest/userguide/network_reqs.html#vpc-tagging\" rel=\"nofollow\" target=\"1\" title=\"AWS VPC tagging\">VPC tagging requirements</a>.</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Launch_EKS_cluster_worker_nodes\">Launch EKS cluster worker nodes</h2>\n<ol>\n<li>Log in to the AWS Management Console and switch to the selected region.</li>\n<li>Go to <b>All services</b> &gt; <b>Management &amp; Governance</b> &gt; <b>CloudFormation.</b></li>\n<li>Click <b>Create stack </b>&gt; <b>With new resources(standard)</b>, click <b>Template is ready</b> &gt; <b>Upload a template file</b> &gt; <b>Choose file</b> and select the <code>smax-managed-workernode.template </code>file under directory <code>../Cloud Deployment x.x.x/../byok/smax-cloudformation-aws</code> in<a href=\"/doc/423/26.1/downloadcloudpackage\" title=\"Download the cloud deployment package\"> the cloud deployment package</a>.<code> </code></li>\n<li>Click <b>Next</b> and populate the following fields.\n\t<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n<thead>\n<tr>\n<th scope=\"col\">Field</th>\n<th scope=\"col\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>UseCustomizedImage</strong></td>\n<td>Leave it as <strong>false</strong>. Only configure if you use your own customized image to build work nodes.\n\t\t\t\t<ul>\n<li><strong>AMI ID of the custom image for the worker nodes</strong>: If you set <strong>UseCustomizedImageID</strong>=false, leave it as is.</li>\n<li><strong>Snapshot ID of the AMI volume</strong>:  If you set <strong>UseCustomizedImageID</strong>=false, leave it as is.</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td><b>Stack name</b></td>\n<td>Give a name to this stack, such as <strong>sma-workernode</strong>.</td>\n</tr>\n<tr>\n<td><b>VPC ID</b></td>\n<td>Select the created VPC from the drop-down list.</td>\n</tr>\n<tr>\n<td><b>Subnets for EKS Cluster</b></td>\n<td>Select the three private subnets created.</td>\n</tr>\n<tr>\n<td><b>EKS cluster name</b></td>\n<td>Enter the EKS cluster name you defined in the <a href=\"/doc/423/26.1/eksvpc\" title=\"Prepare VPC\">Prepare VPC</a><i> </i>step.<br/>\n\t\t\t\tYou must use the same EKS cluster name when creating the  VPC, EKS cluster, and worker nodes; otherwise, the suite installation will fail.</td>\n</tr>\n<tr>\n<td><b>EKS Worker Node Security Group</b></td>\n<td>Select the security group created for the worker nodes.</td>\n</tr>\n<tr>\n<td><b>AmiType</b></td>\n<td>Select AL2_x86_64 AMI type.</td>\n</tr>\n<tr>\n<td><b>Worker Node instance Root Volume Size</b></td>\n<td>100 (the default value).</td>\n</tr>\n<tr>\n<td><b>Worker Node Group name</b></td>\n<td>Give a name to the worker nodes group.</td>\n</tr>\n<tr>\n<td><b>CapacityType</b></td>\n<td>Select <strong>ON_DEMAND </strong>for production as SPOT instance may be unstable. For R&amp;D, we recommend you select <strong>SPOT</strong> instance due to its cost-saving abilities.</td>\n</tr>\n<tr>\n<td><b>Worker Node Number per Availability Zone</b></td>\n<td>Enter the minimum number of worker nodes per Availability Zone. For example, <strong>1</strong>.</td>\n</tr>\n<tr>\n<td><b>Desired capacity of Node Group ASG</b></td>\n<td>Enter the desired number of worker nodes by referring to the <a href=\"/doc/423/26.1/ekssizing\" title=\"Sizing considerations for EKS deployment\">Sizing guides</a>.</td>\n</tr>\n<tr>\n<td><b>Maximum Worker Node Number per Availability Zone</b></td>\n<td>\n<p>Enter the maximum number of worker nodes per Availability Zone. For example, <strong>3</strong>.</p>\n</td>\n</tr>\n<tr>\n<td><b>Worker Node Instance Type</b></td>\n<td>Select an instance type from the drop-down list by referring to the <a href=\"/doc/423/26.1/ekssizing\" title=\"Sizing considerations for EKS deployment\">Sizing guides</a>.</td>\n</tr>\n<tr>\n<td><b>KeyName</b></td>\n<td>Select your created EC2 key pair. For information about creating an EC2 key pair, see the AWS document <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair\" title=\"AWS Create Key Pair\">Create a key pair</a>.</td>\n</tr>\n<tr>\n<td><b>NodeInstanceRole</b></td>\n<td>Enter the<b> NodeInstanceRole</b> value collected on the <b>Outputs</b> tab when the EKS cluster is created successfully (see the <em><b>Create an EKS cluster</b></em> section).</td>\n</tr>\n</tbody>\n</table>\n<div class=\"Admonition_Tip\"><span class=\"autonumber\">Tip: </span> If you want to modify the <b>Worker Node Number per Availability Zone</b>, <b>Desired capacity of Node Group ASG</b>, and <b>Maximum Worker Node Number per Availability Zone </b>values<b> </b>after you have created the worker nodes, see the AWS document <a href=\"https://docs.aws.amazon.com/autoscaling/ec2/userguide/as-manual-scaling.html\" title=\"AWS Manual Scaling\">Manual scaling</a>.</div>\n</li>\n<li>Click <b>Next</b> &gt; <b>Next</b> &gt; <b>Submit</b>.</li>\n</ol>\n<h2>Related topics</h2>\n<ul>\n<li>For information on EKS, see <a href=\"https://docs.aws.amazon.com/eks/latest/userguide/what-is-eks.html\" title=\"AWS EKS\">Amazon EKS</a>.</li>\n<li>For information on AMI, see <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html\" title=\"AWS AMI\">Amazon Machine Images</a>.</li>\n</ul>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}