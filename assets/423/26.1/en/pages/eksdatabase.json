{
  "title": "Launch RDS",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\">\n<p>The suite contains an internal (embedded) PostgreSQL database instance, which should be used for demonstration purposes only. You must use external databases in a production environment. For information about supported external databases, see <a href=\"/doc/423/26.1/ekssupportmatrix\" title=\"Support matrix for EKS\">Support matrix for EKS</a>.</p>\n<p>When deployed on AWS, the suite uses RDS as the database engine. This RDS instance will be used as the external databases for the suite in a production environment.</p>\n<h2 class=\"mw-headline\" id=\"Create_an_RDS_instance\">Create an RDS instance</h2>\n<table>\n<tbody>\n<tr>\n<th>Role</th>\n<th>Location</th>\n</tr>\n<tr>\n<td>Database administrator</td>\n<td>AWS Management Console</td>\n</tr>\n</tbody>\n</table>\n<p>We recommend that you use RDS as the database engine on AWS. Follow these steps to launch RDS.</p>\n<ol>\n<li>Log in to the AWS Management Console and switch to the selected region.</li>\n<li>Go to <b>All services</b> &gt; <b>Management &amp; Governance</b> &gt; <b>CloudFormation</b>.</li>\n<li>Click <b>Create stack </b>&gt; <strong>With new resources(standard)</strong>, click <b>Template is ready</b> &gt; <b>Upload a template file</b> &gt; <b>Choose file</b> and select the <code>smax-rds.template</code> file under <code>../Cloud Deployment x.x.x/../byok/smax-cloudformation-aws</code>.</li>\n<li>Click <b>Next</b> and populate the following fields:\n\t<ul>\n<li><b>Stack name:</b> Give a name to this stack, such as <em>sma-rds</em>.</li>\n<li><b>VPC ID:</b> Select the created VPC from the drop-down list.</li>\n<li><b>First/Second Subnet for RDS:</b> Select the two database subnets created for RDS.</li>\n<li><b>RDS Instance Type:</b> Select an instance type from the drop-down list. See <a href=\"/doc/423/26.1/ekssizing\" title=\"Sizing considerations\">Sizing considerations</a>.</li>\n<li><b>RDS instance identifier:</b> Enter an RDS instance name.</li>\n<li><b>User name:</b> Define a username for the database admin account, such as <em><strong>postgres</strong></em>.</li>\n<li><b>Password:</b> Define a password for the database admin account.</li>\n<li><b>RDS Storage size:</b> Enter a storage size. See <a href=\"/doc/423/26.1/ekssizing\" title=\"Sizing considerations\">Sizing considerations</a>.</li>\n<li><b>Postgres engine version:</b> Type an engine version. See <a href=\"/doc/423/26.1/ekssupportmatrix\" title=\"Support matrix\">Support matrix</a>.</li>\n<li><b>Multi-AZ RDS:</b> Select <b>false</b> for test and development environments; select <b>true</b> for staging and production environments.</li>\n<li><strong>BastionSecurityGroup</strong>: Select the bastion's security group to allow the bastion node to communicate with RDS.</li>\n<li><strong>ClusterSecurityGroup</strong>: Select the EKS cluster's security group (<em>eks-cluster-sg-*</em>) to allow the EKS cluster to communicate with RDS.</li>\n</ul>\n</li>\n<li>Click <b>Next</b> &gt; <b>Next</b> &gt; <b>Submit</b>. Wait until the stack creation is completed and you can check the results on the <b>Outputs</b> tab.\n\t<div class=\"admonition\">\n<div class=\"admonition-icon admonition-tip-icon\"></div>\n<div class=\"admonition-content admonition-tip-content\">  Take a note of the value of <b>RDSEndpointAddress</b>. It will be used in later steps.</div>\n</div>\n</li>\n<li>Make sure the <b>pg_trgm </b>extension is allowed in the RDS server. Once done, the DBA user should be able to run the following SQL statement in the <strong>postgres </strong>database.\n\t<pre>create extension pg_trgm;</pre>\n<strong>Note: </strong>You can restrict which extensions can be installed on a PostgreSQL DB instance. To do so, set the <strong>rds.allowed_extensions</strong> parameter to a string of comma-separated extension names. Only these extensions can then be installed in the PostgreSQL DB instance. The default string for the rds.allowed_extensions parameter is '*', which means that any extensions available for the engine version can be installed. Changing the <strong>rds.allowed_extensions</strong> parameter does not require a database restart because it's a dynamic parameter. For details about extensions, see <a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/PostgreSQLReleaseNotes/postgresql-extensions.html\" title=\"Extension versions for Amazon RDS for PostgreSQL\">Extension versions for Amazon RDS for PostgreSQL</a>.</li>\n</ol>\n<p>Now, to enforce TLSv1.3 on the PostgreSQL server side, set the <a href=\"https://postgresqlco.nf/doc/en/param/ssl_min_protocol_version/\" title=\"ssl_min_protocol_version\"><strong>ssl_min_protocol_version</strong></a> and <strong><a href=\"https://postgresqlco.nf/doc/en/param/ssl_max_protocol_version/\" title=\"ssl_max_protocol_version\">ssl_max_protocol_version</a> </strong>parameters to <strong>TLSv1.3</strong>. See <a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_WorkingWithDBInstanceParamGroups.html\" title=\"Working with DB parameter groups\">Working with DB parameter groups</a> for details. This step is optional.</p>\n<p>In addition, the default <code>rds.force_ssl</code> parameter is set to 1 (on) for PostgreSQL version 15, which means an SSL connection must be used. </p>\n<div class=\"transcontent stn-end--relatedTopics\"> </div>\n</div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}