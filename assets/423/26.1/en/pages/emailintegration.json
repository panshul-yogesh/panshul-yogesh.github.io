{
  "title": "OPB based email integration",
  "content": "<div class=\"mw-parser-output\">\n<div class=\"transcontent stn-begin--part1\"></div>\n<p>The email integration enables users to request appropriate knowledge articles, create requests, add comments, and accept solutions to existing requests without logging in, using specially prepared email messages to do so. This integration uses the On-Premises Bridge (OPB) agent to connect to an external mailbox to process inbound emails. To enable the email integration, you must install an OPB agent and configure an email integration endpoint for the agent to use. Additionally, you can also set up notification templates used when the system sends automatic replies to inbound emails.</p>\n<p>These emails contain an encrypted authentication string that's appended to the body of the email, and contains all the internal data that's required for Service Management to uniquely identify the user and required action. These authentication strings are valid only for a limited period and can be used only once. The end user mustn't change the authentication string. Changing the authentication string might cause the email not to be processed or possibly to be handled as a first-time email.</p>\n<ul style=\"padding-left: 0px;\"></ul>\n<h2 class=\"mw-headline\" id=\"Use_cases\"><a id=\"Use_cases\" name=\"Use_cases\" title=\"Use cases\"></a>Use cases</h2>\n<p>You can use the email integration to implement the following use cases, by configuring the <b>New email action</b> setting when configuring the email integration endpoint.</p>\n<h3 class=\"mw-headline\" id=\"Use_case_1:_Send_knowledge_and_offering_suggestions_to_inbound_email\"><a id=\"Use_case_1_Send_knowledge_and_offering_suggestions_to_inbound_email\" name=\"Use_case_1_Send_knowledge_and_offering_suggestions_to_inbound_email\" title=\"Use case 1: Send knowledge and offering suggestions to inbound email\"></a>Use case 1: Send knowledge and offering suggestions to inbound email</h3>\n<p>Inbound emails are handled through a smart auto-reply function. After sending an email to the specified mailbox, a user receives a self-service email containing suggestions related to the request that is sent. The template of this self-service email is configurable by a user who has the <b>Service Portal Administrator</b> role. The self-service email can also contain links to suggested knowledge and news articles, questions, and offerings.</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">Links to <b>articles</b> and <b>questions</b> direct the user to the Service Portal.</li><li style=\"margin-left: 28px; position: relative;\">Links to <b>offerings:</b>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">If an offering has the <b>Allow request creation from email</b> option enabled, a link to that offering results in an email being created (for the email account specified in the endpoint configuration) that the user can send to open a request based on the offering. The email includes a questionnaire section to collect user data, containing specific questions that were defined for the offering record.</li><li style=\"margin-left: 40px; position: relative;\">If an offering doesn't have the <b>Allow request creation from email</b> option enabled, a link to that offering directs the user to Service Portal, where the user may create a request based on that offering.</li></ul>\n</li></ul>\n<h3 class=\"mw-headline\" id=\"Use_case_2:_Automatically_create_requests_based_on_inbound_email\"><a id=\"Use_case_2_Automatically_create_requests_based_on_inbound_email\" name=\"Use_case_2_Automatically_create_requests_based_on_inbound_email\" title=\"Use case 2: Automatically create requests based on inbound email\"></a>Use case 2: Automatically create requests based on inbound email</h3>\n<p>A new request is opened directly after the user sends an email to the specified email account (which you will configure in the On-Premises Bridge agent).</p>\n<p>If you want the requests to be created with a specific offering, you need to do the following:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">Enable the <b>Allow request creation from email</b> option in the offering record</li><li style=\"margin-left: 28px; position: relative;\">Select this offering in the <b>Offering</b> field in the email integration endpoint configuration</li></ul>\n<h2 class=\"mw-headline\"><a id=\"Set_up_the_integration\" name=\"Set_up_the_integration\" title=\"Set up the integration\"></a>Set up the integration</h2>\n<p>This section describes how to set up the email integration by using a Gmail account as the external mailbox. The steps for other external mailboxes (such as xxxxxx@outlook.com) are similar.</p>\n<h3 class=\"mw-headline\" id=\"General_security_guidelines\"><a id=\"General_security_guidelines\" name=\"General_security_guidelines\" title=\"General security guidelines\"></a>General security guidelines</h3>\n<p>When implementing email integration with SMA, consider the following guidelines:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">Never set up a connection without encryption.</li><li style=\"margin-left: 28px; position: relative;\">Set up a secured email service configuration to protect your email system from any malicious cyber attacks. For example, use authorized SMTP via SSL/TLS, use encrypted Pop3s/IMAPS, and only allow a limited number of connections to fight against DoS attack.</li></ul>\n<h3 class=\"mw-headline\" id=\"Prerequisites\"><a id=\"Prerequisites\" name=\"Prerequisites\" title=\"Prerequisites\"></a>Prerequisites</h3>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">You have already created an external email account. In this example, it's a Gmail account.</li><li style=\"margin-left: 28px; position: relative;\">You have prepared a machine for the installation of the OPB agent. You must install the OPB agent on a machine that has access at all times to both the external mailbox's mail server and the Service Management tenant. We recommend against installing the agent on laptops or machines that aren't actively maintained to have consistent uptime.<br/>\n<b>Note</b>: To use Gmail as the external mail server, the firewall on the machine must allow the agent to connect to ports 993 and 465 (the default Gmail IMAP and SMTP ports). If this isn't possible, the integration isn't possible from this machine. The primary cause of the ports not appearing open is a firewall between the OPB machine and the Internet.</li></ul>\n<h3 class=\"mw-headline\" id=\"Configure_the_external_mailbox_account\"><a id=\"Configure_the_external_mailbox_account\" name=\"Configure_the_external_mailbox_account\" title=\"Configure the external mailbox account\"></a>Configure the external mailbox account</h3>\n<p>The email integration uses IMAP to communicate with the remote email server. By default, Gmail disables the ability to connect using IMAP, so you must enable IMAP in the Gmail account settings as follows:</p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Access the Gmail settings.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Select the <b>Forwarding and POP/IMAP</b> tab.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the IMAP Access section, click the <b>Enable IMAP</b> radio button.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Save your settings.<br/>\n<a class=\"image\" href=\"\"> <img alt=\"EmailInt-1.png\" border=\"0\" class=\"z_migration_tba_PDF\" data-file-height=\"371\" data-file-width=\"957\" file=\"https://staging.docs.microfocus.com/mediawiki/images/4/4a/2018.08_Helpcenter/Resources/Images/OPB/EmailInt-1.png\" hspace=\"0\" src=\"../../../images/EmailInt-1_396094dd.png\" style=\"width: 800px; height: 310px; margin: 0px; border: 0px solid black;\" vspace=\"0\"/> </a></li></ol>\n<p>The IMAP protocol allows Service Management to move emails from the mailbox to other folders once they have been processed. By default, emails that have been successfully processed are moved into a folder called “Processed,” while emails that aren't successfully processed are moved into a folder called <i>Errors</i>. Create the Processed and Errors folders in your Gmail account. Once the folders are created and IMAP is enabled, the configuration of the Gmail account is complete.</p>\n<h3><a id=\"Generate_an_App_Password_in_your_Google_account\" name=\"Generate_an_App_Password_in_your_Google_account\" title=\"Generate an App Password in your Google account\"></a>Generate an App Password in your Google account</h3>\n<p>You must create an App Password in your Google account. You will use this password instead of your Gmail password when configuring the OPB credential for Gmail.</p>\n<p>When you create the App Password, select <strong>Mail</strong> as the app and <strong>Windows Computer</strong> as the device.</p>\n<p>For details about how to create App Passwords, see the <a href=\"https://support.google.com/mail/answer/185833?hl=en\" title=\"Google documentation\">Google documentation</a>.</p>\n<h3 class=\"mw-headline\" id=\"Create_an_integration_user\"><a id=\"Prepare_an_integration_user\" name=\"Prepare_an_integration_user\" title=\"Prepare an integration user\"></a>Prepare an integration user</h3>\n<div class=\"transcontent stn-begin--CreateIntUser\"></div>\n<p>When you install an OPB agent later, you will need to specify a Service Management user, which will be used to connect the agent to Service Management. Pay attention to the following:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">This user must be assigned the <b>OPB Remote Agent</b> role in Service Management.</li><li style=\"margin-left: 28px; position: relative;\">This user must be an integration user, rather than a federated user.</li></ul>\n<div class=\"transcontent stn-end--part1\"></div>\n<p>To prepare an integration user, follow these steps:</p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p>Create an integration user. See <a href=\"/doc/423/26.1/createuser\" title=\"How to create a user\">How to create an integration user</a>.</p>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Log in to the agent interface as the tenant admin, navigate to <strong>Administration</strong> &gt; <strong>Master Data</strong> &gt; <strong>People</strong>, and then assign the<b> OPB Remote Agent</b> role to the user.</li></ol>\n<p>Later, when installing the OPB agent, specify this integration user's credentials.</p>\n<div class=\"transcontent stn-end--CreateIntUser\"></div>\n<div class=\"transcontent stn-begin--part2\"></div>\n<h3 class=\"mw-headline\" id=\"Install_the_OPB_agent\"><a id=\"Install_the_OPB_agent\" name=\"Install_the_OPB_agent\" title=\"Install the OPB agent\"></a>Install the OPB agent</h3>\n<p>In this example, we install the OPB agent on a Windows machine.</p>\n<p>First, check that the firewall on the machine allows the agent to connect to ports 993 and 465 (the default Gmail IMAP and SMTP ports). To do this, go to your <b>Control Panel</b> &gt; <b>Programs and Features</b> &gt; <b>Turn Windows features on or off</b>, and then select the <b>Telnet Client</b> option. Then, open your Windows Command Prompt, and run the following commands to verify that you can connect to the ports:</p>\n<pre>telnet imap.gmail.com 993\ntelnet smtp.gmail.com 465\n</pre>\n<p>Now, install the On-Premises Bridge (OPB) agent. For details, see <a href=\"/doc/423/26.1/opbinstall\" title=\"How to use On-Premises Bridge agents on Windows\">How to use On-Premises Bridge agents on Windows</a>. Note that, when prompted to enter authentication credentials on the <b>Setup authentication</b> page, enter the user name and password of the integration user that you created.</p>\n<p><b>Note</b>: If you want to install on Linux, see <a href=\"/doc/423/26.1/opbinstalllinux\" title=\"How to use On-Premises Bridge agents on Linux\">How to use On-Premises Bridge agents on Linux</a>.</p>\n<h3 class=\"mw-headline\" id=\"Import_the_suite_CA_certificate_to_the_OPB_truststore\"><a id=\"Import_the_suite_CA_certificate_to_the_OPB_trusted_keystore\" name=\"Import_the_suite_CA_certificate_to_the_OPB_trusted_keystore\" title=\"Import the suite CA certificate to the OPB trusted keystore\"></a>Import the suite CA certificate to the OPB trusted keystore</h3>\n<p>This step is required for the OPB agent to connect to Service Management. If you skip this step, when you add an OPB agent later, it will fail to connect to Service Management.</p>\n<p>For details, see <a href=\"/doc/423/25.1/opbinstall#How_to_import_the_suite_CA_certificate_to_the_OPB_trusted_keystore\" title=\"How to import the suite CA certificate to the OPB trusted keystore\">How to import the suite CA certificate to the OPB trusted keystore</a>.</p>\n<h3 class=\"mw-headline\" id=\"Add_the_OPB_agent\"><a id=\"Add_the_OPB_agent\" name=\"Add_the_OPB_agent\" title=\"Add the OPB agent\"></a>Add the OPB agent</h3>\n<div class=\"transcontent stn-begin--AddOPB\"></div>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Log in to the tenant as the tenant admin.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Go to <b>Administration</b> &gt; <b>Utilities</b> &gt; <b>Integration</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Add agent</b> on the left-side pane, enter a name (for example, <b>OPB</b>) and description, and then click <b>DOWNLOAD CONNECTION FILE</b>. The agent is created and the connection file (server-connection.conf) is automatically downloaded from your browser.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Copy the downloaded server-connection.conf file to the C:\\ProgramData\\MicroFocus\\On-Premise Bridge Agent\\product\\conf folder.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">From the Control Panel, start the <b>On-Premises Bridge Agent</b> Windows service.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Return to the Service Management agent interface, and check that the OPB agent is successfully connected to Service Management and is ready for use. If not, try restarting the agent. If restarting the agent doesn't correct the issue, review the controller log located in the <code>C:\\ProgramData\\MicroFocus\\On-Premise Bridge Agent\\product\\log\\controller</code> directory for more information about connection issues.<br/>\n<a class=\"image\" href=\"\"> <img alt=\"opb agent connected.png\" data-file-height=\"314\" data-file-width=\"1379\" src=\"../../../images/opb_agent_connected_16c95523.png\" style=\"width: 1379px; height: 314px;\"/> </a></li></ol>\n<div class=\"transcontent stn-end--AddOPB\"></div>\n<h3 class=\"mw-headline\" id=\"Add_external_mailbox_credentials_to_the_OPB_agent\"><a id=\"Add_external_mailbox_credentials_to_the_OPB_agent\" name=\"Add_external_mailbox_credentials_to_the_OPB_agent\" title=\"Add external mailbox credentials to the OPB agent\"></a>Add external mailbox credentials to the OPB agent</h3>\n<p>Use the Endpoint Credentials Manager to add the email integration credentials to the OPB agent so that the agent can connect to the external mailbox (in this example, the Gmail account that you have created).</p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Start</b> &gt; <b>Programs</b> &gt; <b>MicroFocus</b> &gt; <b>On-Premises Bridge Agent</b> &gt; <b>Endpoint Credentials Manager</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>New</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">From the drop-down list, select <b>OPB email integration domain</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>OK</b>.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Enter the following information:\n\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">\n<p>The name that will appear in Service Management when you add the email integration endpoint. For example: <b>Service Management</b>.</p>\n</li><li style=\"margin-left: 40px; position: relative;\">\n<p>The user name (email address) and password that you use to log in to Gmail.</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>Use the App Password that you generated in your Google account in a previous step.</div></div></div>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-caution-icon\"></div><div class=\"admonition-content admonition-caution-content\"><div>\n<p>: You must use an email account that is dedicated to this email integration. Otherwise, the email integration will not work as expected.</p>\n</div></div></div>\n</li></ul>\n<a class=\"image\" href=\"\"> <img alt=\"endpoint credential manager\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/9/94/opb_endpoint_credentials_2.jpeg\" hspace=\"0\" src=\"../../../images/opb_endpoint_credentials_2_1eb62bda.jpeg\" style=\"width:800px;height:252px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\"/> </a></li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Save</b>.</li></ol>\n<h3 class=\"mw-headline\" id=\"Set_up_an_integration_endpoint\"><a id=\"Set_up_an_integration_endpoint\" name=\"Set_up_an_integration_endpoint\" title=\"Set up an integration endpoint\"></a>Set up an integration endpoint</h3>\n<p>Perform the following steps to set up an integration point:</p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the agent interface, navigate to <b>Administration</b> &gt; <b>Utilities</b> &gt; <b>Integration</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click the <b>Endpoints</b> tab.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Add</b>, and then enter the following information:\n\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">Endpoint type: select <b>Email integration</b>.</li><li style=\"margin-left: 40px; position: relative;\">Endpoint name: enter the name that you specified when adding the endpoint credentials. For example: <b>Service Management</b>.</li><li style=\"margin-left: 40px; position: relative;\">Running on agent: Select the OPB agent that you have configured.</li></ul>\n<a class=\"image\" href=\"\"> <img alt=\"SMAX add emailintg endpoint.png\" border=\"0\" data-file-height=\"262\" data-file-width=\"459\" file=\"https://staging.docs.microfocus.com/mediawiki/images/e/e7/SMAX_add_emailintg_endpoint.png\" hspace=\"0\" src=\"../../../images/SMAX_add_emailintg_endpoint_ff3290f3.png\" style=\"width:459px;height:262px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\"/> </a></li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>ADD</b>. The endpoint is added.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Select the endpoint, and then click <b>Configure</b>.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Configure the required settings. For details, see the email integration section in <a href=\"/doc/423/26.1/opbuseendpoints\" title=\"Use endpoints\">Use endpoints</a>.\n\t<p>Notes:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">Proxy configuration is done in the Advanced connection configuration section of the form. Since Gmail uses default port settings, no specific customization is generally required. If you are using a different email server (with non-default ports), you may need to modify the values on this form.</li></ul>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">Only authorized email addresses can create requests in Service Management. If the domain of the sending email address doesn't appear in the <b>Authorized email domains</b> list, the email will not be accepted. The same is true for email accounts that don't belong to a valid user in Service Management. Even when the domain is added to the <b>Authorized email domains</b> list, the email address must be associated with a valid user for a request to be created. Therefore, you must add any domains that will be sending emails to the Authorized email domains list.</li></ul>\n</li><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Test connection</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Save</b>.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Enable</b> to enable automatic email synchronization.</li></ol>\n<p>Once the endpoint has been enabled, two tasks are created in Service Management:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">UpdateEmailAccountTask: this task syncs the email account from the OPB agent credentials manager.</li><li style=\"margin-left: 28px; position: relative;\">OpbEmailSyncTask: this task downloads emails from the external email mailbox.</li></ul>\n<p>If you change the <b>Authorized email domains</b> value, you must restart OPB for the change to take effect.<br/>\n<b>Note</b>: To avoid from overloading your enterprise email server, the email integration sometimes sends responses from the external mailbox itself and sometimes directly from Service Management. For example, it sends a response from the external mailbox when the user sends an inbound email from an unauthorized domain, and sends a response directly from Service Management (that is, from your enterprise email server) with links to suggested knowledge articles or offerings.</p>\n<h3 class=\"mw-headline\" id=\"Enable_request_creation_from_email_in_the_default_offering\"><a id=\"Enable_request_creation_from_email_in_the_default_offering\" name=\"Enable_request_creation_from_email_in_the_default_offering\" title=\"Enable request creation from email in the default offering\"></a>Enable request creation from email in the default offering</h3>\n<p>This step is required only if you have specified a default offering for request creation in the email integration endpoint configuration.</p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the agent interface, navigate to <b>Plan</b> &gt; <b>Service Catalog</b> &gt; <b>OFFERINGS</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Open the offering record from the list, go to the <b>Submission via email</b> section, and select the <b>Allow request creation from email</b> option.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Save the offering record.</li></ol>\n<h3 class=\"mw-headline\" id=\"Configure_email_integration_settings\"><a id=\"Configure_email_integration_settings\" name=\"Configure_email_integration_settings\" title=\"Configure email integration settings\"></a>Configure email integration settings</h3>\n<p>To configure email integration settings, from the agent interface, select <b>Administration</b> &gt; <b>Configuration</b> &gt; <b>Service Portal Settings</b> &gt; <b>Feature Settings</b>, and then configure the following email integration settings:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">Suggested links in email and virtual agent support</li><li style=\"margin-left: 28px; position: relative;\">Enable request creation and actions from email</li><li style=\"margin-left: 28px; position: relative;\">Select <strong>Agent </strong>as email integration mode</li><li style=\"margin-left: 28px; position: relative;\">Email integration agent</li><li style=\"margin-left: 28px; position: relative;\">Specify email validity time frame</li><li style=\"margin-left: 28px; position: relative;\">Enable approval through email</li></ul>\n<p>For details, see <a href=\"/doc/423/26.1/setfeature\" title=\"Configure Service Portal feature settings\">Configure Service Portal feature settings</a>. </p>\n<h3 class=\"mw-headline\" id=\"Add_eml_extension_to_the_tenant_attachment_allowlist\"><a id=\"Add_eml_extension_to_the_tenant_attachment_allowlist\" name=\"Add_eml_extension_to_the_tenant_attachment_allowlist\" title=\"Add eml extension to the tenant attachment allowlist\"></a>Add eml extension to the tenant attachment allowlist</h3>\n<p>To allow the email integration to process inbound emails, make sure that the .eml extension is included in the tenant attachment allowlist. </p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-tip-icon\"></div><div class=\"admonition-content admonition-tip-content\"><div>Skip this step if Service Management is running on SaaS. The attachment allowlist of each SaaS tenant already contains the eml extension. </div></div></div>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Log in to Suite Administration as suite-admin: https://&lt;EXTERNAL_ACCESS_HOST&gt;/bo.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>TENANTS</b> and then open the tenant record for which you are configuring the email integration.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">On the <b>Application settings</b> tab, check that the <b>eml</b> extension is included in the attachment allowlist. By default, it's included. If not, add the extension.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Save</b>.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Restart the <b>On-Premises Bridge Agent</b> service.</li></ol>\n<div class=\"transcontent stn-begin--part3\"></div>\n<h3 id=\"(Optional)_Set_up_notification_templates_for_email_integration\"><a id=\"_Optional_Set_up_notification_templates_for_email_integration\" name=\"_Optional_Set_up_notification_templates_for_email_integration\" title=\"(Optional) Set up notification templates for email integration\"></a><span class=\"mw-headline\" id=\".28Optional.29_Set_up_notification_templates_for_email_integration\">(Optional) Set up notification templates for email integration</span></h3>\n<p>Special tags exist to enable direct access to Service Management, which you can use when creating email notification templates. For more information about creating these templates, see <a href=\"/doc/423/26.1/notifications\" title=\"Notifications\">Notifications</a>.</p>\n<h4 class=\"mw-headline\" id=\"Generate_a_reply_email\"><a id=\"Generate_a_reply_email\" name=\"Generate_a_reply_email\" title=\"Generate a reply email\"></a>Generate a reply email</h4>\n<p>A <b>mailto</b> tag is required when a user will act by responding to the email:</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-caution-icon\"></div><div class=\"admonition-content admonition-caution-content\"><div>\n<p>Copy and paste the following strings into a text editor to remove formatting.</p>\n</div></div></div>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">\n<p>accept a request</p>\n<div class=\"example\">\n<p><code>&lt;%=create_mailto(ACCEPT_REQUEST,${:entity.Type},${:entity.Id},${:entity. RequestedForPerson.Id},${:entity.RequestedForPerson.Email},${:entity. DisplayLabel})%&gt;</code></p>\n</div>\n</li><li style=\"margin-left: 28px; position: relative;\">\n<p>reject a request</p>\n<div class=\"example\">\n<p><code>&lt;%=create_mailto(REJECT_REQUEST,${:entity.Type},${:entity.Id},${:entity. RequestedForPerson.Id},${:entity.RequestedForPerson.Email},${:entity. DisplayLabel})%&gt;</code></p>\n</div>\n</li><li style=\"margin-left: 28px; position: relative;\">\n<p>approve a request</p>\n<div class=\"example\">\n<p><code>&lt;%=create_mailto(APPROVE_REQUEST,${parentType},${parentId},${parentName},${assigneeId}, ${assigneeEmail},${:entity.Id})%&gt;</code></p>\n</div>\n</li><li style=\"margin-left: 28px; position: relative;\">\n<p>deny a request</p>\n<div class=\"example\">\n<p><code>&lt;%=create_mailto(DENY_REQUEST,${parentType},${parentId},${parentName}, ${assigneeId},${assigneeEmail},${:entity.Id})%&gt;</code></p>\n</div>\n</li><li style=\"margin-left: 28px; position: relative;\">\n<p>add a comment in the <span class=\"SAW_VariablesSelf-Service_Portal\">Service Portal</span></p>\n<div class=\"example\">\n<p><code>&lt;%=create_mailto(ADD_COMMENT,${:entity.Type},${:entity.Id},${:entity. RequestedForPerson.Id},${:entity.RequestedForPerson.Email},${:entity. DisplayLabel})%&gt;</code></p>\n</div>\n</li><li style=\"margin-left: 28px; position: relative;\">\n<p>provide information</p>\n<div class=\"example\">\n<p><code>&lt;%=create_mailto(PROVIDE_INFO,${:entity.Type},${:entity.Id},${:entity.RequestedForPerson. Id},${:entity.RequestedForPerson.Email},${:entity.DisplayLabel})%&gt;</code></p>\n</div>\n</li></ul>\n<p>If any of these operations fail, an error message notification is automatically sent. The notification is based on the <b>Template Definition for send error message email with email integration</b> template. By default, the notification includes a link to the Service Portal. You can manually configure this template not to display the link by adding <b>true</b> as an additional optional parameter in the email body of the template:</p>\n<div class=\"example\">\n<p>&lt;%=show_error_message(${errorCode},${entityType},${entityId},${entityDisplayLabel}<b>,true</b>)%&gt;</p>\n</div>\n<p>If the parameter isn't added or if the parameter value is false, the <span class=\"SAW_VariablesSelf-Service_Portal\">Service Portal</span> portal link is displayed.</p>\n<h4 class=\"mw-headline\" id=\"Link_to_knowledge_articles\"><a id=\"Link_to_knowledge_articles\" name=\"Link_to_knowledge_articles\" title=\"Link to knowledge articles\"></a>Link to knowledge articles</h4>\n<p>A <b>showRelatedKnowledge</b> tag is used to include a section in a notification that contains links to related knowledge articles:</p>\n<div class=\"example\">\n<p><code>&lt;%=showRelatedKnowledge(${email.subject},${email.body},${userId})%&gt;</code></p>\n</div>\n<h3 class=\"mw-headline\" id=\"Link_to_offerings\"><a id=\"Link_to_offerings\" name=\"Link_to_offerings\" title=\"Link to offerings\"></a>Link to offerings</h3>\n<p>A <b>showRelatedOffering</b> tag is used to include a section in a notification that contains links to related offerings:</p>\n<div class=\"example\">\n<p><code>&lt;%=showRelatedOffering(${email.subject},${email.body},${userId}, ${email.address})%&gt;</code></p>\n</div>\n<h3 class=\"mw-headline\" id=\"Verify_the_email_integration_setup\"><a id=\"Verify_the_email_integration_setup\" name=\"Verify_the_email_integration_setup\" title=\"Verify the email integration setup\"></a>Verify the email integration setup</h3>\n<p>Perform the following steps to verify that your email integration setup is successful:</p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the agent interface, create a user or update an existing sample user with your own email address. Make sure that your email address belongs to a domain that is configured in the <b>Authorized email domains</b> field in the email integration endpoint configuration.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Send an email from your email address to the external mailbox (in this example, the Gmail account that you have configured).</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Wait for a while. You should then be able to receive a notification email from the external mailbox. The email either provides the link to a request that has been created from your email or provides knowledge article links based on your email, depending on the email action that you have defined in the email integration endpoint configuration. If you log in to the external mailbox, you should be able to see that the email you sent has been moved to the <b>Processed</b> folder. </li></ol>\n<h2 class=\"mw-headline\"><a id=\"Limitations\" name=\"Limitations\" title=\"Limitations\"></a>Limitations</h2>\n<p>Messages that users send to the email server are limited to 2 MB each, including attachments.</p>\n<h2 class=\"mw-headline\" id=\"Troubleshooting\"><a id=\"Troubleshooting\" name=\"Troubleshooting\" title=\"Troubleshooting\"></a>Troubleshooting</h2>\n<p>For troubleshooting information, see <a href=\"/doc/423/26.1/troubleshootopbemailinteg\" title=\"Troubleshoot email integration\">Email integration doesn't work</a>.</p>\n<div class=\"transcontent stn-end--part3\"></div>\n</div>",
  "modifiedon": "2025-12-04 19:11:08"
}