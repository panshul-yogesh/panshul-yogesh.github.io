{
  "title": "Enable enhanced CI aging",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>After you enabled Native SACM, it is strongly recommended that you enable the enhanced CI aging feature.</p>\n<p>With Native SACM enabled, the enhanced CI aging feature enables you to manage the lifecycle of CIs. If Universal Discovery hasn't discovered a CI for a predefined period of time, the system sets its discovery state to <strong>Purgeable</strong> in UD/UCMDB rather than auto-purges it in the traditional way. You can then retire the purgeable CI either manually or automatically via workflows. For example, you can configure the CI workflow in the agent interface so CIs can be retired and moved to the End of Life metaphase automatically.  </p>\n<p>Likewise, if a CI is provisioned by a Service Design through the DND integration, the CI will be created in UCMDB and then synchronized to Service Management. At this point, the provision state field is set to <strong>Provisioned</strong>, which indicates its active connection with DND. Later when it enters the end of its lifecycle, the provision state will be set to <strong>Purgeable</strong>.</p>\n<h2>How to enable enhanced CI aging</h2>\n<p>Perform the following steps to enable this feature. </p>\n<div class=\"Admonition_Note\"><span class=\"autonumber\">Note</span> Once you've enabled this feature, you can't disable it. </div>\n<ol>\n</ol>\n<h3>Enable enhanced CI lifecycle in UCMDB UI</h3>\n<ol>\n<li>Log in to the UCMDB UI as an administrator: https://&lt;host&gt;:&lt;port&gt;/ucmdb-browser?customerID=xxxxxxxxx.</li>\n<li>Navigate to <strong>Infrastructure Settings Management</strong>, and set the value of <strong>Enable Enhanced CI Lifecycle</strong> to <strong>true</strong>. <br/>\n<a class=\"image\" href=\"https://staging.docs.microfocus.com/file/images/5/5b/SMA202305_ci_aging_CMS_UI.png\" title=\"https://staging.docs.microfocus.com/file/images/5/5b/SMA202305_ci_aging_CMS_UI.png\"> <img alt=\"SMA202305_ci_aging_CMS_UI.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/5/5b/SMA202305_ci_aging_CMS_UI.png\" height=\"337\" hspace=\"0\" src=\"../../../images/SMA202305_ci_aging_CMS_UI_2afd3e4b.png\" style=\"width:800px;height:337px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"800\"/> </a></li>\n</ol>\n<p>For more options to enable the enhanced CI lifecycle, please refer to <a href=\"/doc/ucmdb_containerized/25.4/enhancedcil#Enable_the_Enhanced_CI_Lifecycle_mode\" title=\"Enable the Enhanced CI Lifecycle mode (Containerized UCMDB)\">Enable the Enhanced CI Lifecycle mode (Containerized UCMDB)</a> or <a href=\"/doc/ucmdb/2023.05/enhancedcil#Enable_the_Enhanced_CI_Lifecycle_mode\" title=\"Enable the Enhanced CI Lifecycle mode (Classic UCMDB)\">Enable the Enhanced CI Lifecycle mode (Classic UCMDB)</a>.</p>\n<h3>(Optional) Configure metaphase for specific node elements in UCMDB</h3>\n<p>This is an additional step for the following four child CI types of NodeElement in UCMDB: <strong>Cpu</strong>, <strong>DiskDevice</strong>, <strong>FileSystem</strong>, and <strong>Interface</strong>. Make sure you don't run this step for other child CI types under NodeElement.</p>\n<p>These NodeElement CI types correspond to CI attributes in Service Management. You need to manually configure metaphase for them so that they are included in the enhanced CI aging solution. This is to prevent them from being unexpectedly deleted by UCMDB when their parent device still exists. Otherwise, it will cause inconsistencies, for the example, the CPU will be deleted by UCMDB while its parent device still exists. </p>\n<p><a class=\"image\" href=\"https://staging.docs.microfocus.com/file/images/3/3c/ci_aging_NodeElement.png\" title=\"https://staging.docs.microfocus.com/file/images/3/3c/ci_aging_NodeElement.png\"> <img alt=\"ci_aging_NodeElement\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/3/3c/ci_aging_NodeElement.png\" height=\"401\" hspace=\"0\" src=\"../../../images/ci_aging_NodeElement_bfa5c9c0.png\" style=\"width:398px;height:401px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"398\"/> </a></p>\n<p>To enable aging for a child CI type of NodeElement:</p>\n<ol>\n<li>Log in to the UCMDB Server.</li>\n<li>Go to <strong>CI Type Manager</strong> &gt; <strong>CI Type</strong>, and then select a child CI type of NodeElement, such as <strong>CPU</strong>.</li>\n<li>Go to <strong>Attributes</strong>, select <strong>Meta Phase </strong>and then<strong> </strong>click the Edit icon.</li>\n<li>Select <strong>Enable default value</strong>, enter <strong>Inherited from the parent node</strong> or any other non-empty value in the <strong>Default value</strong> field, and then click <strong>OK</strong>.</li>\n<li>Repeat these steps for <strong>DiskDevice</strong>, <strong>FileSystem</strong>, and <strong>Interface</strong>.</li>\n</ol>\n<p>Now, all newly created/detected NodeElement CIs will have a default value for metaphase. Then, you need to run enrichment rules to make sure all existing NodeElement CIs have a metaphase value. To do this, follow these steps:</p>\n<ol>\n<li>Log in to the UCMDB Server.</li>\n<li>Go to <strong>CI Type Manager</strong> &gt; <strong>CI Type</strong>, and then select <strong>ConfigurationItem</strong>.</li>\n<li>Click the <strong>Attributes</strong> tab, select <strong>Meta Phase</strong>, then click <strong>Edit</strong>.</li>\n<li>On the <strong>Advanced</strong> tab, check the <strong>Editable</strong> checkbox, then click<strong> OK</strong>.</li>\n<li>Go to <strong>Enrichment Manager </strong>and create a new rule under the <strong>SMAX</strong> folder.</li>\n<li>In the <strong>New Enrichment Rule</strong> wizard, name the new rule and click <strong>Next</strong> till the end.</li>\n<li>From the <strong>CI Type Selector</strong> on the right, find <strong>ConfigurationItem</strong> &gt; <strong>InfrastructureElement </strong>&gt; <strong>NodeElement </strong>&gt; <strong>CPU </strong>and drag it to the main window in the center.</li>\n<li>In <strong>Query Mode</strong>, double-click the CPU icon.</li>\n<li>On the <strong>Attributes</strong> tab, create a new condition and click <strong>OK</strong>:\n\t<ul>\n<li><strong>Attribute Name</strong> = <strong>Meta Phase - (string)</strong></li>\n<li><strong>Operator</strong> = <strong>Is null</strong></li>\n</ul>\n</li>\n<li>In <strong>Enrichment Mode</strong>, double-click the CPU icon.</li>\n<li>Select <strong>Meta Phase</strong>, then enter <strong>Inherited from the parent node </strong>in the <strong>Value</strong> box. Click <strong>OK</strong>.</li>\n<li>Right-click the rule you just created, then click <strong>Activate Rule</strong>.</li>\n<li>Now, the rule for <strong>CPU</strong> is running. Repeat the same steps for <strong>DiskDevice</strong>, <strong>FileSystem</strong>, and <strong>Interface</strong>.</li>\n<li>Wait till there are no node elements with the null meta phase. You can make sure of this using a query in <strong>IT Universe Manager</strong>. </li>\n<li>Right-click each rule and click <strong>Deactivate Rule</strong>. </li>\n<li>Remove all these four rules. </li>\n<li>Go to <strong>CI Type Manager</strong> &gt; <strong>CI Type</strong>, and then select <strong>ConfigurationItem</strong>. Click the <strong>Attributes</strong> tab, select <strong>Meta Phase</strong>, then click <strong>Edit</strong>. On the <strong>Advanced</strong> tab, uncheck the <strong>Editable</strong> checkbox, then click <strong>OK</strong>.</li>\n</ol>\n<p><strong>Note: </strong>If the metaphase default value of NodeElement child CIs other than <strong>Cpu</strong>, <strong>DiskDevice</strong>, <strong>FileSystem</strong>, and <strong>Interface</strong> have been incorrectly configured (they should be left empty), they may not be deleted by Native SACM in a timely manner. To solve this, see <a href=\"/doc/423/26.1/childcisnodeelementcantbedeleted\" title=\"here\">here</a>.</p>\n<h3>Enable CI aging in UCMDB</h3>\n<ol>\n<li>Log in to the UCMDB Server from the UCMDB Local Client.</li>\n<li>Navigate to <strong>Administration - CI Lifecycle</strong>, and then click the <strong>Aging Status</strong> tab.</li>\n<li>Make sure that the <strong>Enable Aging</strong> option is selected. Note that each time you change this setting, you need to restart the UCMDB customer. <br/>\n<a class=\"image\" href=\"/file/images/2/2e/SMA202205_enable_aging_UCMDB.png\" title=\"/file/images/2/2e/SMA202205_enable_aging_UCMDB.png\"> <img alt=\"SMA202205_enable_aging_UCMDB.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/2/2e/SMA202205_enable_aging_UCMDB.png\" height=\"421\" hspace=\"0\" src=\"../../../images/SMA202205_enable_aging_UCMDB_2d505838.png\" style=\"width:800px;height:421px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"800\"/> </a></li>\n</ol>\n<h2>If you decide not to enable enhanced CI aging</h2>\n<p>We strongly recommend that you enable enhanced CI aging, however, if you decide not to do so, make sure you disable the CI aging process in UCMDB. If the aging process is still active, CIs not discovered by Universal Discovery for more than 40 days will be automatically removed by UCMDB and therefore will also be removed in Service Management without any warnings or notifications. This breaks the CI lifecycle management.</p>\n<ol>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}