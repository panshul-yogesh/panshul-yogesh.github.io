{
  "title": "Run agentless REST calls",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>You can use REST calls based an endpoint that doesn't require an On-Premises Bridge (OPB) agent. </p>\n<h2>Create an agentless endpoint</h2>\n<ol>\n<li>From the main menu, select <b>Administration &gt; Utilities &gt; Integration</b>. Click the <b>Endpoints</b> tab.</li>\n<li>Click <strong>Add</strong>.</li>\n<li>\n<p>Enter the endpoint details.</p>\n<table>\n<tbody>\n<tr>\n<th>Field</th>\n<th>Description</th>\n</tr>\n<tr>\n<td>Endpoint type</td>\n<td>Select <strong>Agentless Rest Executor 1.0</strong>.</td>\n</tr>\n<tr>\n<td>Endpoint name</td>\n<td>Enter a name for the endpoint. Use only Latin letters and spaces.</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>Click <b>Add</b>. Service Management creates the endpoint.</li>\n<li>Click <strong>Configure</strong>, and then provide the following details. \n\t<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n<thead>\n<tr>\n<th scope=\"col\">Field</th>\n<th scope=\"col\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Protocol</td>\n<td>Select <strong>http </strong>or <strong>https</strong>.</td>\n</tr>\n<tr>\n<td>Certificate</td>\n<td>Available only when the <strong>https</strong> protocol is selected.<br/>\n<br/>\n\t\t\t\tCopy the content of the SSL certificate of the remote server. The certificate must be in PEM format. When connecting to the remote server, Service Management uses this certificate to verify if the remote server can be trusted. </td>\n</tr>\n<tr>\n<td>Location</td>\n<td>Enter the URL of the remote server to which you want to direct the REST call, including the protocol, host, port, and root context, if any.<br/>\n<strong>Note</strong>: don't enter an encoded URL.  </td>\n</tr>\n<tr>\n<td>Authentication</td>\n<td>Select an authentication method to be used for the remote server:\n\t\t\t\t<ul>\n<li><strong>No Authentication</strong>: used when the remote server doesn't require credentials</li>\n<li><strong>Basic Authentication</strong>: used when the remote server requires a user name and password</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>Name</td>\n<td>Enter a user name for accessing the remote server.</td>\n</tr>\n<tr>\n<td>Password</td>\n<td>Enter the password of the user name for accessing the remote server.<br/>\n<br/>\n<strong>Note</strong>: Make sure that you have created a <strong>Tenant key chain</strong> in  <b>Administration &gt; Configuration &gt; Application Settings</b>. The key chain is used to encrypt data in encrypted fields. </td>\n</tr>\n<tr>\n<td>Confirm Password</td>\n<td>Reenter the password.</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>Click <strong>Save</strong>. Later, after a business rule triggers agentless REST calls, you can see corresponding tasks created on the Endpoints tab. </li>\n</ol>\n<h2 id=\"Execute_REST_business_rule_configuration\">Configure an Execute Agentless REST business rule </h2>\n<p>Once you have created an agentless endpoint, you can configure an Execute Agentless REST business rule. You can configure this rule in the following scenarios:</p>\n<ul>\n<li>When you select a workflow phase and then add a rule in the \"After applying changes\" section</li>\n<li>When you select a transition between two phases in a workflow, and then add a rule in the \"During transition\" pane</li>\n<li>When you select the task plan of a record (for example, the task plan of an offering)</li>\n</ul>\n<p>An Execute Agentless REST business rule accepts the following parameters.</p>\n<table>\n<tbody>\n<tr>\n<th>Parameter</th>\n<th>Value</th>\n</tr>\n<tr>\n<td>Endpoint ID</td>\n<td>Select an agentless endpoint from the drop-down list. </td>\n</tr>\n<tr>\n<td>Uri Suffix</td>\n<td>\n<p>Select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Enter the required value manually.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns the required value.</li>\n</ul>\n<p>The prefix of the URL is taken from the endpoint. This parameter is the suffix of the URL. The concatenated expression forms the URL of the REST call. This parameter must be HTTP encoded.<br/>\n<br/>\n<strong>Note</strong>: don't enter the suffix of an encoded URL. </p>\n</td>\n</tr>\n<tr>\n<td>Web Method</td>\n<td>Select a method from the drop-down list (POST/PUT/GET/DELETE).</td>\n</tr>\n<tr>\n<td>Payload Type (optional)</td>\n<td>Select a payload type from the drop-down list (HTML/JSON/XML/TEXT). </td>\n</tr>\n<tr>\n<td>Body</td>\n<td>\n<p>Select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Enter the required data manually.</li>\n<li><b>Expression Language.</b> Enter an Expression Language phrase that returns the required data.</li>\n</ul>\n<p>This is the body that will be used in the REST call request to the remote server. The Body parameter is only relevant if POST or PUT is selected as the web method.</p>\n</td>\n</tr>\n<tr>\n<td>Headers</td>\n<td>\n<p>A dialog box opens with two boxes, in which you need to enter a key-value pair. For the header key, enter data as free text. For the header value, select one of the following options:</p>\n<ul>\n<li><b>Simple Mode.</b> Enter the value manually. You don't need to enclose the value with quotation marks.</li>\n<li><b>Expression Language.</b> Click the <strong>fx</strong> button to turn it on. Enter an Expression Language phrase that returns the required data.</li>\n</ul>\n<p>If you need to use multiple headers, click <b>Add item</b> to add an additional row with boxes for each of the headers. </p>\n<p>The following screenshot is an example: </p>\n<div><a class=\"image\" href=\"/file/images/2/2e/Header_eg.png\" title=\"/file/images/2/2e/Header_eg.png\"> <img alt=\"header\" border=\"1\" file=\"https://staging.docs.microfocus.com/mediawiki/images/2/2e/Header_eg.png\" height=\"243\" hspace=\"0\" src=\"../../../images/Header_eg_95ad26da.png\" style=\"width:800px;height:243px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:1px solid black;\" vspace=\"0\" width=\"800\"/> </a></div>\n<p>The REST call request headers provide additional information for the REST call, such as the file type to be returned.</p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">If not specified, the following values are used for Headers:\n\t\t\t<ul>\n<li>Accept: application/json</li>\n<li>Content-Type: application/json</li>\n</ul>\n<p>You must explicitly specify Headers if the default values don't work for you. </p>\n</div>\n</div>\n</td>\n</tr>\n<tr>\n<td>Output field name</td>\n<td>\n<p>Enter a field of the current record. This parameter defines the field where the returned results are stored. <br/>\n<br/>\n\t\t\tSelect the <b>Simple Mode</b> option to enter the required field manually (the <strong>Express Language</strong> option isn't supported).</p>\n<p>When selecting the output field, you should select a field of the type that matches the type of results to be returned by the REST call. The field types are defined for each field in the Fields tab. </p>\n<p>You can define the output field for the business rule execution with the Textual field type. A textual field is defined according to size. The following options are available:</p>\n<ul>\n<li>SMALL_TEXT</li>\n<li>MEDIUM_TEXT</li>\n<li>LARGE_TEXT</li>\n<li>RICH_TEXT</li>\n</ul>\n<p>If the defined field size is large enough to contain the full response string, it's stored in the field as is. If the field size is smaller than the response value, the response value isn't stored.</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Click the <b>Expression Language</b>  <a class=\"image\" href=\"/file/images/thumb/f/f3/SMAiconfx.png/30px-SMAiconfx.png\" title=\"/file/images/thumb/f/f3/SMAiconfx.png/30px-SMAiconfx.png\"> <img alt=\"SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a>  button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"SMAX:25.1/ExpLangFunctions\">Expression Language functions and syntax</a>.</p>\n<h2 id=\"Output_field_types\">Verify the execution of the REST calls</h2>\n<ol>\n<li>Update a relevant record to manually trigger the business rule that you have configured.</li>\n<li>Go to the Endpoints tab, select the endpoint, and check that a task of the <strong>AgentlessRestCall</strong> type has been completed successfully. </li>\n<li>Check the output field of the record to verify that the REST call has returned an expected result. </li>\n</ol>\n<h2><br/>\nExample</h2>\n<p>In this example, you will configure an Operations Bridge Manager (OBM) server as an agentless endpoint, which will synchronize event information from a device in OBM to certain Service Management requests that are associated with that device. </p>\n<h3>Export the endpoint certificate</h3>\n<ol>\n<li>Launch the OBM server URL from a browser:  https://myobm.mycompany.mygroup.net.</li>\n<li>From the browser, export the server certificate to a PEM certificate, such as OBM.cer. Note that you must select the <strong>Base-64 encoded X.509 (.CER)</strong> format.</li>\n</ol>\n<h3>Create a tenant key chain</h3>\n<p>If no key chain has been created for your tenant, an error will occur when you try to save your agentless endpoint settings later. </p>\n<p>If you haven't already done so, perform the following steps:</p>\n<ol>\n<li>Go to <b>Administration &gt; Configuration &gt; Application Settings</b>.</li>\n<li>Click <strong>Create key chain</strong>.</li>\n<li>Enter a passcode and confirm it.</li>\n<li>Click <strong>Save</strong>.  </li>\n</ol>\n<h3>Create an agentless endpoint</h3>\n<p>Create an agentless endpoint with the following settings. </p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n<thead>\n<tr>\n<th scope=\"col\">Field</th>\n<th scope=\"col\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Protocol</td>\n<td>Select <strong>https</strong>.</td>\n</tr>\n<tr>\n<td>Certificate</td>\n<td>Copy the content of the OBM server certificate (in PEM format) to this field. \n\t\t\t<pre><code>-----BEGIN CERTIFICATE-----\nMIIEODCCAyCgAwIBAgIRAN6FbMN/8BWdSoWIDEGPNzswDQYJKoZIhvcNAQELBQAw\nSTELMAkGA1UEBhMCR0IxFDASBgNVBAoTC01pY3JvIEZvY3VzMSQwIgYDVQQDExtP\nQk0gQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNMjAwNTI5MjE0MjQ5WhcNMjIw\nNTI5MjE0MjQ5WjBMMQswCQYDVQQGEwJHQjEUMBIGA1UEChMLTWljcm8gRm9jdXMx\nJzAlBgNVBAMTHm9ibTIwMjAwNS5lbWVhLnNvZnR3YXJlZ3JwLm5ldDCCASIwDQYJ\nKoZIhvcNAQEBBQADggEPADCCAQoCggEBAM9rcQ8VIM+dhhor/jxkoK2pPNOxyjF1\njgFNuHjn10n5LzSLD3ImZyUM5SQdP//n6DG27NNcO0YJ50n2/yl/uGVrGwWVhpFo\nY1MzQsLRV+5ACyE++WTG2cRdW+lzGJnzg4W2GdQ6UC5UuKVUhsCVU2bd2fLJkkCW\nFTTsm8zGBwHHmrWWk1ixTznULdQZDcFc7BeIPG7KrO1AjdWIlvvHbP+7Q/IZbnEr\nKJkapoLPxPIrccYznbR3+nCsP3x73YAhER6zFYKs/aLxBf2H/B6pIrLaLFl+GH0A\nrjR+LgR33KqcJhgc4TH3zYNuYsnznzDnLLXlNgS1hp9V1++H9SrYSIsCAwEAAaOC\nARYwggESMA4GA1UdDwEB/wQEAwIDqDCBgAYDVR0jBHkwd4AUYL91nUqjnAoVJJ6M\ntVJuqiXnupGhTaRLMEkxCzAJBgNVBAYTAkdCMRQwEgYDVQQKEwtNaWNybyBGb2N1\nczEkMCIGA1UEAxMbT0JNIENlcnRpZmljYXRpb24gQXV0aG9yaXR5ghAcRtnjFeIU\nvRptTTDLceSFMB0GA1UdJQQWMBQGCCsGAQUFBwMCBggrBgEFBQcDATA/BgNVHREE\nODA2gglsb2NhbGhvc3SCHm9ibTIwMjAwNS5lbWVhLnNvZnR3YXJlZ3JwLm5ldIIJ\nb2JtMjAyMDA1MB0GA1UdDgQWBBRGX2UQxlXJEn6i/uzhTt7jES8MvDANBgkqhkiG\n9w0BAQsFAAOCAQEACUx96kY33T+yZDQaU61MyGCkDJhZsBeUTQBHV/+nUfJ+NGtz\npV8uD4L4JRInfNwpIUbPzBnUKLD/L07WTZp1MowFI5ayNDdcttuDC+Nin3HW0C5x\nrJPls26V23Y793DRX9GzCDyZDl2rUkBJhT2ZoLyFUIJCSzNhKR8c7kKWJAbPLKiE\nqpkXNJXvwS/1YTnrvDHAhdt95BF4Wqm658smQZ1io5bPVMCOKh4/clS3sWKbDa1B\n61KJFFk0o59uNROihxWsjICbRNut/jkQpCG5b9doP2D/9JgFlh+JHCuRNQJrezKf\nLcW2QbFnY1tTJnE1hBKZf2PX4jRKKPOQcB3Rng==\n-----END CERTIFICATE-----</code></pre>\n</td>\n</tr>\n<tr>\n<td>Location</td>\n<td>Enter the OBM server URL:<br/>\n\t\t\thttps://myobm.mycompany.mygroup.net<br/>\n\t\t\t </td>\n</tr>\n<tr>\n<td>Authentication</td>\n<td>Select <strong>Basic Authentication</strong>.</td>\n</tr>\n<tr>\n<td>Name</td>\n<td>Enter <strong>admin</strong>.</td>\n</tr>\n<tr>\n<td>Password</td>\n<td>Enter the password of the <strong>admin</strong> user.</td>\n</tr>\n<tr>\n<td>Confirm Password</td>\n<td>Reenter the password.</td>\n</tr>\n</tbody>\n</table>\n<h3>Associate an OBM device with a Service Management device</h3>\n<p>First, find a device in OBM and record its global ID: </p>\n<ol>\n<li>log in to OBM as the admin user.</li>\n<li>Go to <strong>Workspaces</strong> &gt; <strong>My Workspace</strong> &gt; <strong>Health Perspective</strong>. </li>\n<li>In the filter field, select <strong>System_Infrastructure</strong>, and then locate a device.</li>\n<li>Right-click the device,  and then select <strong>Show</strong> &gt; <strong>Properties</strong>. </li>\n<li>Make a note of the Global ID value. For example: 4ce576fada0f512eaa6c02f583ad3c26.</li>\n</ol>\n<p>Associate the OBM device with a Service Management device:</p>\n<ol>\n<li>Go to <strong>Build</strong> &gt; <strong>Service Asset &amp; Configuration</strong> &gt; <strong>SACM Home</strong> &gt; <strong>Devices</strong>, and then click <strong>New</strong>.  Alternatively, you can use an existing device record. </li>\n<li>In the Global ID field, enter the value of the OBM device. For example: 4ce576fada0f512eaa6c02f583ad3c26.</li>\n<li>Save the record. </li>\n</ol>\n<h3>Create a business rule for requests</h3>\n<ol>\n<li>Go to <strong>Administration</strong> &gt; <strong>Configuration</strong> &gt; <strong>Studio</strong>, and then open <strong>Request</strong>. </li>\n<li>Click <strong>Processes and Rules</strong>, expand <strong>After applying changes</strong>, click <strong>Add</strong>, and then select <strong>\"If...Then\" rule</strong>. </li>\n<li>Select <strong>Execute Agentless Rest</strong>, and then click <strong>OK</strong>.</li>\n<li>Configure the following parameters for the rule: \n\t<table>\n<tbody>\n<tr>\n<th>Parameter</th>\n<th>Value</th>\n</tr>\n<tr>\n<td>Expression</td>\n<td>Enter the following value: <br/>\n\t\t\t\t \n\t\t\t\t<pre><code>${(entity.ImpactScope == 'Enterprise' &amp;&amp; entity.Urgency == 'TotalLossOfService' &amp;&amp; entity.RegisteredForDevice.GlobalId != null) }</code></pre>\n</td>\n</tr>\n<tr>\n<td>Endpoint ID</td>\n<td>Select the agentless endpoint that you created. </td>\n</tr>\n<tr>\n<td>Uri Suffix</td>\n<td>Enter the following value:\n\t\t\t\t<pre><code>${concat('/opr-web/rest/9.10/event_list?format=json&amp;start_index=1&amp;page_size=2&amp;query=related_ci[target_global_id EQ ', '\\'',entity.RegisteredForDevice.GlobalId,'\\']')}}</code></pre>\n</td>\n</tr>\n<tr>\n<td>Web Method</td>\n<td>Select <strong>GET</strong>.</td>\n</tr>\n<tr>\n<td>Payload Type (optional)</td>\n<td>Leave it empty. </td>\n</tr>\n<tr>\n<td>Body</td>\n<td>\n<p>Leave it empty.</p>\n</td>\n</tr>\n<tr>\n<td>Headers</td>\n<td>\n<p>Leave it empty. </p>\n</td>\n</tr>\n<tr>\n<td>Output field name</td>\n<td>\n<p>Select <strong>Notes</strong>.</p>\n</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ol>\n<h3>Update a request to trigger the business rule</h3>\n<p>Update an existing request record so that it meets the condition to trigger the business rule, and then verify the expected result is returned to the output field that you specified. </p>\n<ol>\n<li>Go to <strong>Run</strong> &gt; <strong>Service Request</strong>. </li>\n<li>Update the request as follows:\n\t<ul>\n<li>Impact: select <strong>Enterprise</strong></li>\n<li>Urgency: select <strong>I am blocked from doing my job</strong></li>\n<li>Device: select the device that you associated with the OBM device</li>\n</ul>\n</li>\n<li>Click <strong>Save</strong>.</li>\n<li>Check that the Notes field is populated with a list of events from the corresponding device on the OBM server side. </li>\n<li>Go to <strong>Utilities</strong> &gt; <strong>Integration</strong> &gt; <strong>Endpoints</strong>, select the agentless endpoint, and check that a task of the AgentlessRESTCall type is displayed with a status of Success. </li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}