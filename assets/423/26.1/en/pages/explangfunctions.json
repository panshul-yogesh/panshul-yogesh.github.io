{
  "title": "Expression Language functions and syntax",
  "content": "<div class=\"mw-parser-output\">\n<p>The following reference lists all functions and operations available in the Expression Language, organized by category. For a comprehensive explanation of the Expression Language syntax with examples, refer to the Expression Language documentation.</p>\n<p>Functions are grouped by functionality—if you know the relevant category, you can navigate directly to that section. These functions <strong>do not apply to System User Accounts.</strong></p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-tip-icon\"></div><div class=\"admonition-content admonition-tip-content\"><div>\n<p>You can also search the page by pressing <b>Ctrl+F</b>, and entering the first few letters of a function or a word that describes what you are looking for. Use the <strong>Next </strong>and <strong>Previous </strong>buttons to move from one occurrence to another. </p>\n</div></div></div>\n<h2 class=\"mw-headline\" id=\"General_functions\"><a id=\"General_functions\" name=\"General_functions\" title=\"General functions\"></a><a id=\"General-functions\" name=\"General-functions\" title=\"General functions\"></a>General functions</h2>\n<table>\n<tbody>\n<tr>\n<th>Function</th>\n<th>Description</th>\n</tr>\n<tr>\n<td>case_when</td>\n<td>\n<p lang=\"EN-US\" xml:lang=\"EN-US\">Takes the first argument as the initial value, and then goes through each even-number argument and returns the value of the first odd-numbered argument after the first matching argument (like an \"if-then-else\" statement). Stops reading and returns the result once an even-argument is matched with the first argument. If no even positional argument is met, the function returns the last argument (default value). If there is no default value, it returns an empty string. </p>\n<p lang=\"EN-US\" xml:lang=\"EN-US\">Examples: </p>\n<p><strong>case_when(\"key1\", \"key1\", \"v1\", \"defaultValue\")</strong> returns <strong>\"v1\"</strong></p>\n<p><strong>case_when(\"key2\", \"key1\", \"v1\", \"key2\", \"v2\")</strong> returns <strong>\"v2\"</strong></p>\n<p><b>case_when(true, \"true\", \"v1\", \"defaultValue\")</b> returns<b> \"v1\"</b></p>\n<p><b>case_when(true, \"yes\", \"v1\", \"defaultValue\")</b> returns<b> \"v1\"</b></p>\n<p><b>case_when(null, null, \"v1\", \"defaultValue\")</b> returns <b>\"v1\"</b></p>\n<p><b>case_when(null, \"\", \"v1\", \"defaultValue\") </b>returns<b> \"v1\"</b></p>\n<p><b>case_when(\"\", null, \"v1\", \"defaultValue\") </b>returns <b>\"v1\"</b></p>\n</td>\n</tr>\n<tr>\n<td>concat(Object...args)</td>\n<td>\n<p>Concatenate all arguments into a single string.</p>\n<p>Example: Returns a string indicating the old and new values of the change model on which a change record is based:</p>\n<p><b>concat('Change Model replaced from \\\"',current_update.BasedOnChangeModel.OldValue.DisplayLabel,'\\\" to \\\"',current_update.BasedOnChangeModel.NewValue.DisplayLabel,'\\\"')</b></p>\n</td>\n</tr>\n<tr>\n<td>union(Object...args)</td>\n<td>\n<p>Returns a set of values. The arguments can be of different data types, such as strings, numeric values, and boolean values. If any of the arguments are collections, the collection elements are merged with the set of values.</p>\n<p>Example: <b>union('string1', 5, true)</b> returns <b>['string1', 5, true]</b>.</p>\n</td>\n</tr>\n<tr>\n<td>union_with_null(Object...args)</td>\n<td>\n<p>Returns a set of values. If any of the arguments are collections, the collection elements are merged with the set of values. If one of the arguments is a null value, the null value is included in the returned set.</p>\n<p>Example: union('string1', 5, true, null) returns: ['string1' , 5, true,null]</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<p>This is an exception to the rules for null values, as defined in <a href=\"/doc/423/26.1/explang#Null\" title=\"Null values and collections in Expression Language\">Null values and collections in Expression Language</a>.</p>\n</div></div></div>\n</td>\n</tr>\n<tr>\n<td>intersection(Object...args)</td>\n<td>\n<p>Returns a new collection that contains only the elements contained in all of the collections entered.</p>\n<p>Example: intersection(['arg1' , 'arg2', 'arg3', 5],['arg1', 'arg4', 'arg5', 5],['arg1', 5]) Returns: ['arg1', 5]</p>\n</td>\n</tr>\n<tr>\n<td>first_non_empty_value(Object...args)</td>\n<td>\n<p>Returns the first argument that has a non-null value.</p>\n<p>Example: first_non_empty_value(null, 'args1', 'args2') Returns: 'args1'</p>\n</td>\n</tr>\n<tr>\n<td>contain(collection arg1, Object arg2)</td>\n<td>\n<p>Returns true if arg2 is contained within arg1.</p>\n<p>Examples: </p>\n<p>contain(['args1', 'args2'], 'args1') Returns: true<br/>\n\t\t\t <br/>\n\t\t\tcontain(['args1', 'args2'], ['args1',2]) Returns: false</p>\n</td>\n</tr>\n<tr>\n<td>is_empty_collection(collection arg1)</td>\n<td>\n<p>Returns true if arg1 is an empty collection.</p>\n<p>Example: is_empty_collection(['args']) Returns: false</p>\n</td>\n</tr>\n<tr>\n<td>count_collection(collection arg1)</td>\n<td>\n<p>Return the number of elements in arg1 collection.</p>\n<p>Example: count_collection([0,1]) Returns: 2</p>\n</td>\n</tr>\n<tr>\n<td>is_confidential (Object arg1)</td>\n<td>\n<p>Returns true if the value of arg1 is encrypted by the tenant key chain.</p>\n<p>Example: is_confidential ('args') Returns: false</p>\n</td>\n</tr>\n<tr>\n<td>is_ci_type_of (child CI type, parent CI type 1, parent CI type 2, ... parent CI type n)</td>\n<td>\n<p>Returns:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">true if the child CI type belongs to any of the parent CI types (from 1 to n) in the UCMDB CI Type Manager. For example, is_ci_type_of(entity.CiType, 'host_node') will return true if entity.CiType is \"unix\" or \"nt,\" which belongs to 'host_node'</li><li style=\"margin-left: 28px; position: relative;\">false if the child CI type doesn't belong to any of the parent CI types (from 1 to n) in the UCMDB CI Type Manager, it will return false. For example, is_ci_type_of(entity.CiType, 'firewall', 'ip_phone', 'lb', 'netprinter', 'router', 'storagearray', 'switch') will return false if entity.Citype is \"netdevice,\" which doesn't belong to any of the CI types specified in the function.</li></ul>\n<p>This function is only applicable when Native SACM is enabled, it will return an error otherwise.</p>\n</td>\n</tr>\n<tr>\n<td>lookup(Object...args)</td>\n<td>Returns a field value of a record type. If the record is not found, returns null.<br/>\n<br/>\n<strong>Syntax: </strong><code>lookup(&lt;record_type&gt;, &lt;return_field&gt;, &lt;condition_field_1&gt;, &lt;condition_value_1&gt;, &lt;condition_field_2&gt;, &lt;condition_value_2&gt;,…, &lt;condition_field_N&gt;, &lt;condition_value_N&gt;)</code><br/>\n<br/>\n\t\t\tThis expression returns the value of the &lt;return_field&gt; of the &lt;record_type&gt; where the following conditions are met:\n\t\t\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">&lt;condition_field_1&gt;=&lt;condition_value_1&gt;</li><li style=\"margin-left: 28px; position: relative;\">and &lt;condition_field_2&gt;=&lt;condition_value_2&gt;</li><li style=\"margin-left: 28px; position: relative;\">...</li><li style=\"margin-left: 28px; position: relative;\">and &lt;condition_field_N&gt;=&lt;condition_value_N&gt;</li></ul>\n<br/>\n\t\t\tIf multiple records meet the conditions, only the first one is returned as the result.<br/>\n<br/>\n\t\t\tExample: The following expression returns the value of the <strong>Email</strong> field of the <strong>Person</strong> record whose <strong>Location.City </strong>is <strong>Shanghai</strong> and <strong>OrganizationalGroup.Name</strong> is<strong> IT.</strong> <br/>\n\t\t\t <code>lookup('Person', 'Email', 'Location.City', 'Shanghai', 'OrganizationalGroup.Name', 'IT')</code>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div> <br/>\n<strong>*</strong> Arguments can be DSL expressions. For example, in the following expression <code>lookup('Person', 'Email', 'Id', entity.CreatedByPerson.Id), </code>DSL expression <code> entity.CreatedByPerson.Id </code>is used in the condition value.<br/>\n<br/>\n<strong>*</strong> Both out-of-the-box and custom record types are supported.<br/>\n<br/>\n<strong>*</strong> Fields federated using Native SACM are supported.<br/>\n<br/>\n<strong>*</strong> The returned field can be any type except M2M and complex types. <br/>\n<br/>\n<strong>*</strong> If a Request's user option is used in arguments, no matter as returned field or condition field, one RequestsOffering's ID must be specified in one of the conditions. For example,<br/>\n<code>lookup('Request', 'UserOptions.Person_c.Id',  'RequestsOffering.Id', '10000', Attr_1, Value_1, … , Attr_n, Value_N) </code>or<br/>\n<code>lookup('Request', 'Id', 'RequestsOffering.Id', '10000', 'UserOptions.Person_c.Name', 'Smith', Attr_2, Value_2, … , Attr_n, Value_N)</code><br/>\n<br/>\n\t\t\tSimilarly, if a Change's user option is used in arguments, a BasedOnChangeModel's ID must be specified. If an Incident's user option is used in arguments, an EntityModel's ID must be specified. If a Release's user option is used, a BasedOnReleaseModel's ID must be specified.<br/>\n<br/>\n<strong>*</strong> When comparing boolean fields, the boolean values (true and false) must be enclosed in quotation marks, that is, 'true' and 'false.' Otherwise, the function does not work.<br/>\n<br/>\n<strong>*</strong> When there are a large number of records to be queried, a performance issue may occur. If this happens, try to reduce the number of <code>lookup</code> functions to simplify the expression. <br/>\n<br/>\n<strong>*</strong> The condition fields can't be of the LARGE_TEXT, RICH_TEXT,  or COMPLEX_TEXT type.</div></div></div>\n</td>\n</tr>\n<tr>\n<td>join(collection arg1, collection arg2, collection arg3)</td>\n<td>\n<p>Joins multiple collections, and performs data deduplication when joining multiple collections. </p>\n<p>Example: Join(['args1','args2'],['args3']) Returns: ['args1','args2','args3']</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>This function is similar to the  <strong>union</strong> function, which is also described in this table. The differences are: the two functions have different input parameters; the <strong>union</strong> function can handle non-collection data and the current function can't. </div></div></div>\n</td>\n</tr>\n<tr>\n<td>uuid()</td>\n<td>\n<p>Generates a random universally unique identifier (UUID). Refer to Java.util.UUID.</p>\n<p>Example: uuid() Returns: fcaef38a-fa66-4e14-a369-76bca44e5928</p>\n</td>\n</tr>\n<tr>\n<td>is_unique_in_collection(listOfEntities, propertyArray)</td>\n<td>\n<p>Returns true if the given array of property values is unique in the collection. </p>\n<p>Example: Checks if the combination of the Target Set Module and Type values of a target set is unique for any agreement:</p>\n<p><strong>is_unique_in_collection(entity.AgreementEntityTargetSet, 'TargetSetType,AgreementType')</strong></p>\n</td>\n</tr>\n<tr>\n<td>does_field_exist_in_collection(listOfEntities, property, value)</td>\n<td>\n<p>Returns true if the value of the specified property of any record in the collection matches the given value.</p>\n<p>Example: check if the Target Set Module of a target set that the user is trying to add to an agreement matches an existing Target Set Module in the collection:</p>\n<p><strong>does_field_exist_in_collection(entity.GroupTargetSetsEntityTargetSet, 'TargetSetType', current_association_update.association_end2.TargetSetType)</strong></p>\n</td>\n</tr>\n<tr>\n<td>locale_is_valid(locale)</td>\n<td>\n<p>Returns true if the given locale is supported by Service Management.</p>\n<p>Example: </p>\n<p>locale_is_valid('en-US') Returns: true<br/>\n\t\t\tlocale_is_valid('any text') Returns: false</p>\n</td>\n</tr>\n<tr>\n<td>is_email_integration_enabled(entityType)</td>\n<td>\n<p>Returns true if the email integration is enabled for the given record type (Request, Change, Release, Proposal, or Article).</p>\n<p>Example: Check if the email integration is enabled for the current record's Parent Entity Type: </p>\n<p><strong>is_email_integration_enabled(entity.ParentEntityType)</strong></p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div> Email integration settings are available in  <strong>Administration</strong> &gt; <strong>Configuration</strong> &gt; <strong>Service Portal Settings</strong> &gt; <strong>Feature Settings</strong>:\n\n\t\t\t<ul style=\"padding-left: 0px;\"><li class=\"Admonition_Note\" style=\"margin-left: 28px; position: relative;\"><strong>Enable request creation and actions from email</strong>: if set to <strong>On</strong>, enables the email integration (<strong>tenant_settings.EMAIL_INTEGRATION_ENABLED == </strong><strong>true</strong>)</li><li class=\"Admonition_Note\" style=\"margin-left: 28px; position: relative;\"><strong>Enable approval through email &gt; &lt;Release/Article/Change/Request/Proposal&gt; approval</strong>: when the email integration is enabled, if set to <strong>On</strong>, enables approval through email for Release, Article, Change, Request, or Proposal</li></ul>\n</div></div></div>\n</td>\n</tr>\n<tr>\n<td>is_valid_timezone(timezone)</td>\n<td>Returns true if the given string is a valid timezone. \n\t\t\t<p>Example: <strong>is_valid_timezone('Etc/UTC')</strong> Returns <strong>true</strong>.</p>\n</td>\n</tr>\n</tbody>\n</table>\n<h2 class=\"mw-headline\" id=\"Mathematical_functions\"><a id=\"Mathematical_functions\" name=\"Mathematical_functions\" title=\"Mathematical functions\"></a><a id=\"Mathematical-functions\" name=\"Mathematical-functions\" title=\"Mathematical functions\"></a>Mathematical functions</h2>\n<table>\n<tbody>\n<tr>\n<th>Function</th>\n<th>Description</th>\n</tr>\n<tr>\n<td>avg(Number...args)</td>\n<td>\n<p>Returns an average of the given numbers.</p>\n<p>Example: The expression <b>avg(5, 10, 12)</b> Returns <b>9</b>.</p>\n</td>\n</tr>\n<tr>\n<td>power(Number arg1, Number arg2)</td>\n<td>\n<p>Returns arg1^arg2</p>\n<p>Example: Power(5,2) Returns:25</p>\n</td>\n</tr>\n<tr>\n<td>round_down(arg1, num_digits)</td>\n<td>\n<p>Rounds arg1 downward using num_digit as the number of digits to round the number.</p>\n<p>Example: round_down(523.535444, 2) Returns:523.53</p>\n</td>\n</tr>\n<tr>\n<td>round_up(arg1, num_digits)</td>\n<td>\n<p>Rounds arg1 upward using num_digit as the number of digits to round the number.</p>\n<p>Example: round_up(31415.22654, 0) Returns: 31416.0</p>\n</td>\n</tr>\n<tr>\n<td>sqrt(Number arg)</td>\n<td>\n<p>Returns the square root of arg.</p>\n<p>Example: Sqrt(4) Returns: 2</p>\n</td>\n</tr>\n<tr>\n<td>max(Number arg1, Number arg2)</td>\n<td>\n<p>Returns the higher of the two numbers.</p>\n<p>Example: Max(2, 3) Returns: 3</p>\n</td>\n</tr>\n<tr>\n<td>min(Number arg1, Number arg2)</td>\n<td>\n<p>Returns the lower of the two numbers.</p>\n<p>Example: Min(2, 3) Returns: 2</p>\n</td>\n</tr>\n</tbody>\n</table>\n<h2 class=\"mw-headline\" id=\"Date_functions\"><a id=\"Date_functions\" name=\"Date_functions\" title=\"Date functions\"></a><a id=\"Date-functions\" name=\"Date-functions\" title=\"Date functions\"></a>Date functions</h2>\n<table>\n<tbody>\n<tr>\n<th>Function</th>\n<th>Description</th>\n</tr>\n<tr>\n<td>now()</td>\n<td>\n<p>Returns the current time in milliseconds since January 1, 1970. You can indicate a date in the past or future by adding to or subtracting from the now() function. Add or subtract the required time in milliseconds.</p>\n<p>Example: The expression <b>now() + 259200000</b> returns the date 3 days from now, because 259200000 represents the number of milliseconds in 3 days.</p>\n</td>\n</tr>\n<tr>\n<td>days(long date1, long date2)</td>\n<td>\n<p>Returns the number of days between date1 and date2. If date1 is later than date2, the number is negative.</p>\n<p>Example: The expression <b>days(entity.CreateTime, now())</b> returns the number of days between the date when the current record was created until today.</p>\n</td>\n</tr>\n<tr>\n<td>months(long date1, long date2)</td>\n<td>\n<p>Returns the number of months between date1 and date2. If date1 is later than date2, the number is negative.</p>\n<p>Example: months(entity.CreateTime, now()) returns the number of months since the time the record was created.</p>\n</td>\n</tr>\n<tr>\n<td>hours(long date1, long date2)</td>\n<td>\n<p>Returns the number of hours between date1 and date2. If date1 is later than date2, the number is negative.</p>\n<p>Example: hours(entity.CreateTime, now()) returns the number of hours since the time the record was created.</p>\n</td>\n</tr>\n<tr>\n<td>minutes(long date1, long date2)</td>\n<td>\n<p>Returns the number of minutes between date1 and date2. If date1 is later than date2, the number is negative.</p>\n<p>Example: minutes(entity.CreateTime, now()) returns the number of minutes since the time the record was created.</p>\n</td>\n</tr>\n<tr>\n<td>format(long time, string format, locale, string timezone)</td>\n<td>\n<p>Returns the formatted date according to the time and format entered. The following options are available for the format:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">'<b>long'.</b> Displays the date and time as follows: <strong>June 3, 2024 at 7:49:50 AM WEST</strong></li><li style=\"margin-left: 28px; position: relative;\">'<b>short'.</b> Displays the date and time as follows: <strong>6/3/24, 7:49 AM</strong></li><li style=\"margin-left: 28px; position: relative;\">'<b>long_date'.</b> Displays the date only as <strong>June 3, 2024</strong></li><li style=\"margin-left: 28px; position: relative;\">'<b>short_date'.</b> Displays the date only as <strong>6/3/24</strong></li></ul>\n<p>The locale and timezone parameters are optional.</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">You need to specify the locale before specifying the time zone.</li><li style=\"margin-left: 28px; position: relative;\">To specify a time zone, enter <b>timezone.</b> to get a list of supported timezones.</li></ul>\n<p><b>Note:</b> The date is calculated using the time zone defined in the <b>Time zone definition</b> field in Application Settings if you don't specify the timezone parameter.</p>\n<p>Example: format(now(), 'short_date','en_US','') Returns: '6/3/24'</p>\n</td>\n</tr>\n<tr>\n<td>to_date_time(date source, format, time zone)</td>\n<td>\n<p>Converts a date in string format to a long value. Returns the specified date and time in milliseconds since January 1, 1970.</p>\n<p>The <b>date source</b> parameter is the string containing the date.</p>\n<p>The <b>format</b> parameter defines the format of the string. The string in the date source parameter must match this format. For example, if the date source parameter contains the string '<b>2000-01-01'</b> and the format is <b>'yyyy/MM/dd'</b>, the function will fail.</p>\n<p>The <b>time zone</b> parameter defines the time zone for the value. This parameter is optional (if not entered, time zone is GMT+0).</p>\n<p>Example: <b>to_date_time(source.expiredDate,'yyyy/MM/dd',GMT+8)</b></p>\n</td>\n</tr>\n<tr>\n<td>working_hours.EffectiveDuration(start time, end time, work schedule ID)</td>\n<td>\n<p>Returns the business duration of an issue based on the work schedule in milliseconds.</p>\n<p>The <b>start time</b> and <b>end time</b> parameters represent the beginning and ending times. The <b>start time</b> parameter can't be more than 3 months ago and the difference between the start time and end time can't be greater than 3 months.</p>\n<p>The <b>work schedule ID</b> parameter specifies the relevant work schedule.</p>\n\t\t\tExample: <b>working_hours.EffectiveDuration(entity.ImpactStart, entity.ImpactEnd, entity.OwnedByPerson.WorkSchedule)</b>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">This function should be used only in fields and parameters that accept a value in milliseconds (for example, DOUBLE).</li><li style=\"margin-left: 28px; position: relative;\">This function can't be used with user option fields, this is a known limitation.</li></ul>\n</div></div></div>\n</td>\n</tr>\n<tr>\n<td>working_hours.EffectiveEndTime(start time, duration, work schedule ID)</td>\n<td>\n<p>Returns the ending time of an issue based on the work schedule and the business duration.</p>\n<p>The <b>start time</b> parameter represents the beginning time. The <b>duration</b> parameter represents the business duration in milliseconds (it can be a numeric value or a field containing a numeric value). The <b>start time</b> parameter can't be more than 3 months ago and the <b>duration</b> parameter can't be greater than 3 months.</p>\n<p>The <b>work schedule ID</b> parameter specifies the relevant work schedule.</p>\n\t\t\tExample: <b>working_hours.EffectiveEndTime(entity.ImpactStart, 7500000, entity.OwnedByPerson.WorkSchedule)</b>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">This function should be used only in fields and parameters that accept a value in milliseconds (for example, DOUBLE).</li><li style=\"margin-left: 28px; position: relative;\">This function can't be used with user option fields, this is a known limitation.</li></ul>\n</div></div></div>\n</td>\n</tr>\n</tbody>\n</table>\n<h2 class=\"mw-headline\" id=\"Text_functions\"><a id=\"Text_functions\" name=\"Text_functions\" title=\"Text functions\"></a><a id=\"Text-functions\" name=\"Text-functions\" title=\"Text functions\"></a>Text functions</h2>\n<table>\n<tbody>\n<tr>\n<th>Function</th>\n<th>Description</th>\n</tr>\n<tr>\n<td>escape()</td>\n<td>Escapes special characters such as backslash (\\) and double quotation marks (\"\") in a text string. <br/>\n\t\t\tThe following is an example of using this function in the <strong>Set field</strong> business rule: \n\t\t\t<pre><code>Set Description to ${escape(entity.Solution)}</code></pre>\n\t\t\tIf the Solution field value is the following: \n\n\t\t\t<pre><code>Escape function testing \\   \"   \"</code></pre>\n<br/>\n\t\t\tThe Description field is the following:\n\t\t\t<pre><code>Escape function testing \\\\   \\\"   \\\"</code></pre>\n</td>\n</tr>\n<tr>\n<td>unescape()</td>\n<td>\n<p>Replaces escaped special characters with their actual values.</p>\n<p>Example: Unescape(\"&lt;p&gt;this is&lt;span style=\\\"color:#ff0000\\\"&gt;red&lt;/span&gt;&lt;/p&gt;\"</p>\n<p>The \\\\\\\" unescapes to \\\" because the first two characters \\\\ escapes to \\ and the last two characters \\\" escaped to \"</p>\n</td>\n</tr>\n<tr>\n<td>substitute(text, old_text, new_text)</td>\n<td>\n<p>Substitutes new_text for old_text in a text string.</p>\n<p>Example: Substitutes('Hello my Friends!!!', 'my', 'dear') Returns:  Hello dear Friends!!!</p>\n</td>\n</tr>\n<tr>\n<td>length(text)</td>\n<td>\n<p>Returns the text length.</p>\n<p>Example: The expression <b>length('Hello world')</b> Returns: <b>11</b>.</p>\n</td>\n</tr>\n<tr>\n<td>substring(text, startIdx, [length])</td>\n<td>\n<p>Returns the characters from the text beginning with startIdx for the number of characters specified in [length]. The index of the first character is 0. If [length] isn't entered, it returns all the characters until the end of the text.</p>\n<p>Example: substring('Hello my Friends!!!',  1, 5) Returns: 'ello '</p>\n</td>\n</tr>\n<tr>\n<td>match_pattern(text, pattern)</td>\n<td>\n<p>Returns true if the text matches the pattern. The pattern syntax is as follows:</p>\n<p><b>?</b> represents a single character</p>\n<p><b>*</b> represents any number of characters</p>\n<p>If the text is null or blank, the function returns true.</p>\n<p><strong>Note:</strong> If the <a href=\"/doc/423/26.1/appsettings#Enable_full_character_set_for_regular_expressions\" title=\"Enable full character set for regular expressions\">Enable full character set for regular expressions</a> application setting is enabled, a timeout of 100 milliseconds will be turned on for security considerations. A timeout indicates that the pattern is too complicated, please try to simplify the regular expression that defines the pattern. This timeout applies to any features that invoke the match_pattern(text, pattern) function.</p>\n<p>Example: <span style=\"background-color: transparent;\">match_pattern('Hello my Frends!!!', 'Hello*Fr?ends!!!') </span><span style=\"background-color: transparent;\">Returns: true</span></p>\n</td>\n</tr>\n<tr>\n<td>split(text, [delimiter])</td>\n<td>\n<p>Returns a list of strings in the text separated by the delimiters. The default delimiter is a semicolon (;).</p>\n<p>You can override the default by adding an additional optional delimiter parameter.</p>\n<p>Example: The expression <b>split('Alpha%Beta%Gamma', '%')</b> Returns <b>Alpha</b>, <b>Beta</b>, and <b>Gamma</b>.</p>\n</td>\n</tr>\n<tr>\n<td>to_plain_text(Object arg)</td>\n<td>Removes all HTML tags from rich text and returns a string.\n\t\t\t<p>Example: The expression <b>to_plain_text(entity.Description)</b> Returns: a string with the contents from the description.</p>\n</td>\n</tr>\n<tr>\n<td>trim(text)</td>\n<td>\n<p>Returns a string whose value is the text, with the leading and trailing whitespace removed.</p>\n<p>Example: trim('Hello      ') Returns: 'Hello'</p>\n</td>\n</tr>\n<tr>\n<td>alpha_numeric(text)</td>\n<td>\n<p>Returns true if the given text matches regular expression <strong>^[a-zA-Z0-9]*$</strong>.</p>\n<p>Example: alpha_numeric('Hello1234') Returns: true</p>\n</td>\n</tr>\n<tr>\n<td>is_lower_case(text)</td>\n<td>\n<p>Returns true if all characters in the given text are in lowercase.</p>\n<p>Example: is_lower_case('hello') Returns: true</p>\n</td>\n</tr>\n<tr>\n<td>is_upper_case(text)</td>\n<td>\n<p>Returns true if all characters in the given text are in uppercase.</p>\n<p>Example: is_upper_case('hello') Returns: false</p>\n</td>\n</tr>\n<tr>\n<td>to_lower_case(text)</td>\n<td>\n<p>Converts all characters in the given text to lowercase.</p>\n<p>Example: to_lower_case('HELLO1234) Returns: 'hello1234'</p>\n</td>\n</tr>\n<tr>\n<td>to_upper_case(text)</td>\n<td>\n<p>Converts all characters in the given text to uppercase.</p>\n<p>Example: to_upper_case('hello1234') Returns: 'HELLO1234'</p>\n</td>\n</tr>\n<tr>\n<td>indexof(text, indexString)</td>\n<td>\n<p>Returns the index within this text of the first occurrence of the specified indexString. </p>\n<p><strong><span style=\"background-color: transparent;\">Notes:</span></strong></p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\"><span style=\"background-color: transparent;\">The index of the first character is 0. </span></li><li style=\"margin-left: 28px; position: relative;\"><span style=\"background-color: transparent;\">If the </span><span style=\"background-color: transparent;\">specified indexString doesn't exist in the first parameter \"text,\" the function returns -1.</span></li></ul>\n<p>Example: indexOf('hello my friends.', 'e' ) Returns: 1</p>\n</td>\n</tr>\n<tr>\n<td>is_numeric(text)</td>\n<td>Returns true if the text is zero or a positive integer.  <br/>\n<br/>\n\t\t\tExample: <strong>is_numeric(entity.TargetDuration)</strong></td>\n</tr>\n</tbody>\n</table>\n<h2 class=\"mw-headline\" id=\"Person_and_group_functions\"><a id=\"Person_and_group_functions\" name=\"Person_and_group_functions\" title=\"Person and group functions\"></a><a id=\"Person-and-group-functions\" name=\"Person-and-group-functions\" title=\"Person and group functions\"></a>Person and group functions</h2>\n<table>\n<tbody>\n<tr>\n<th>Function</th>\n<th>Description</th>\n</tr>\n<tr>\n<td>is_in_group(person_id, group_id)</td>\n<td>\n<p>Returns true if the user entered exists in the group entered.<br/>\n<strong>Note:</strong> This function has a known issue. If the user has been assigned to more than 250 groups, this function may return false even if the user is in the group.</p>\n<p>Example: is_in_group(current_user.Id,current_update.OwnedByGroup.NewValue))</p>\n</td>\n</tr>\n<tr>\n<td>is_manager_of(person_id, employee_id, depth)</td>\n<td>\n<p>Returns true if person_id is the manager of employee_id. Depth indicates the number of levels to search, in the current version, it can only be 2, which means one level of reporting line only.</p>\n<p>Example: is_manager_of(current_user.Id, entity.Assignee.Id, 2)</p>\n</td>\n</tr>\n<tr>\n<td>is_employee_of(person_id, manager_id, depth)</td>\n<td>\n<p>Returns true if manager_id is the manager of person_id. Depth indicates the number of levels to search, in the current version, it can only be 2, which means one level of reporting line only.</p>\n<p>Example: is_employee_of(entity.requestByPerson, entity.manager.Id, 2)</p>\n</td>\n</tr>\n<tr>\n<td>group_id_by_upn(upn)</td>\n<td>\n<p>Returns the ID of the group with the specified UPN.</p>\n<p>Example: Returns the group ID for the group with UPN Change_Manager_Group:</p>\n<p><b>group_id_by_upn('Change_Manager_Group')</b></p>\n</td>\n</tr>\n<tr>\n<td>group_by_upn(upn)</td>\n<td>\n<p>Returns the group object with the specified UPN.</p>\n<p>Example: group_by_upn('ECAB_Group')</p>\n</td>\n</tr>\n<tr>\n<td>filter_group_by_domains(group, domain list)</td>\n<td>\n<p>Returns a collection of users from the group entered who have permission to view at least one of the domains in the data domain list.</p>\n<p>Example: filter_group_by_domains(group_id_by_upn('Change_Manager_Group'), entity.DataDomains)</p>\n</td>\n</tr>\n<tr>\n<td>filter_users_by_domains(user list, domain list)</td>\n<td>\n<p>Returns a collection of users from the user list entered that are permitted to view at least one of the domains in the data domain list.</p>\n<p>Example: filter_users_by_domains(union(current_user, entity.OwnedByPerson), entity.DataDomains)</p>\n</td>\n</tr>\n<tr>\n<td>active_delegates_of_user(person_id)</td>\n<td>\n<p>Returns all users who are authorized to approve the tasks assigned to the person entered, related to parent records of any record type. The parameter must be a person ID.</p>\n<p>Example: Returns all the users authorized to approve the tasks of the assignee of the current record:</p>\n<p>${active_delegates_of_user(entity.Assignee.Id)}</p>\n<p>Any field of type person can be used for the parameter: <b>entity.&lt;person field&gt;.Id</b>.</p>\n</td>\n</tr>\n<tr>\n<td>on_call.&lt;identifier&gt;(group)</td>\n<td>\n<p>Returns the current on-call person or persons conforming to the identifier and group selection. The identifier may be one of:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\"><b>Primary</b> - Primary on-call person.</li><li style=\"margin-left: 28px; position: relative;\"><b>Backup1</b> - First backup on-call person.</li><li style=\"margin-left: 28px; position: relative;\"><b>Backup2</b> - Second backup on-call person.</li><li style=\"margin-left: 28px; position: relative;\"><b>AllUsers</b> - Primary, first backup, and second backup on-call persons.</li></ul>\n<p>Example: The following returns the current Primary, first backup, and second backup on-call persons of the Service desk group.</p>\n<p><b>${on_call.AllUsers(entity.ServiceDeskGroup)}</b></p>\n</td>\n</tr>\n<tr>\n<td>is_group_empty(upn)</td>\n<td>\n<p>Returns true if the group with the specified UPN contains no members. </p>\n<p>Example: is_group_empty(entity.ReferToPersonGroup.Upn)</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>is_permitted_to_domains(person, domain list)</p>\n<p>is_permitted_to_domains(person_id, domain list) </p>\n</td>\n<td>\n<p>Returns true if the person has access to any of the given domains. </p>\n<p>Example: is_permitted_to_domains(current_user.Id,  entity.parentEntityId.DataDomains)</p>\n</td>\n</tr>\n<tr>\n<td>is_permitted(upn, permissions, roles)</td>\n<td>\n<p>Returns true if the person with the specified UPN is assigned any of the given permissions and roles (which are separated by a comma). </p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">The  *permissions* argument is a string of permissions that has the following format: <strong>'permissionName1(param1=val1,param2=[val2,val3]);permissionName2()'</strong> (including the quotation). </li><li style=\"margin-left: 28px; position: relative;\">The *roles* argument is a string of roles that has the following format: <strong>'role1,role2'</strong> (including the quotation).</li></ul>\n<p>Example: Check if the current record's Assignee is assigned the View permission for the Change record type:</p>\n<p> <strong>is_permitted(entity.AssignedToPerson, 'EMS-View-Template(entityType=Change)')</strong></p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>This function is similar to the  <strong>&lt;person&gt;.IsPermitted(permissions, roles)</strong> function, described in the <em>Object properties expressions</em> section. The difference is that the <strong>is_permitted</strong> function can check the permissions and roles of a person other than the current user, and <strong>IsPermitted</strong> works only for the current user. When not using the roles parameter, simply leave it empty rather than entering <b>null</b> for the <strong>roles</strong> parameter.</div></div></div>\n</td>\n</tr>\n<tr>\n<td>is_delegate_of(delegateId, delegatorId, parentEntityType)</td>\n<td>\n<p>Returns true if delegateId has the authority to approve, on behalf of delegatorId, tasks related to the specified parent record type (for example, Change). </p>\n<p>Both the delegateId and delegatorId arguments are a person UPN. </p>\n<p>Example: <strong>is_delegate_of(current_user.Id,entity.Assignee.Id,entity.ParentEntityType)</strong></p>\n</td>\n</tr>\n</tbody>\n</table>\n<h2 class=\"mw-headline\" id=\"Comments_functions\"><a id=\"Comments_functions\" name=\"Comments_functions\" title=\"Comments functions\"></a><a id=\"Comments-functions\" name=\"Comments-functions\" title=\"Comments functions\"></a>Comments functions</h2>\n<p>The following table lists functions that are useful when working with comments of a record.</p>\n<table>\n<tbody>\n<tr>\n<th>Function</th>\n<th>Description</th>\n</tr>\n<tr>\n<td>comments_filtered(comments, filters)</td>\n<td>\n<p>Returns a collection of all comments which match the filters entered. The filters are key-value pairs such as '<b>PrivacyType', 'PUBLIC'</b>. If no comments match the filters, an empty collection is returned.</p>\n<p>Example: Returns a collection of all PUBLIC comments added in this update:</p>\n<p><b>comments_filtered(comments_added(current_update.Comments.OldValue, current_update.Comments.NewValue), 'PrivacyType', 'PUBLIC')</b></p>\n</td>\n</tr>\n<tr>\n<td>filter_comments(comments, filters, offset)</td>\n<td>\n<p>Returns the last comment which matches the filters entered.</p>\n<p>The comments parameter must be one of the following:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">entity.Comments</li><li style=\"margin-left: 28px; position: relative;\">current_update.Comments</li><li style=\"margin-left: 28px; position: relative;\">comments_added function</li><li style=\"margin-left: 28px; position: relative;\">comments_filtered function</li><li style=\"margin-left: 28px; position: relative;\">existing_comments_modified function</li></ul>\n<p>The filters are key-value pairs such as '<b>PrivacyType', 'PUBLIC'</b>. If the record has no comments, returns null. If there are comments, but none of them match the filters, returns an empty collection.</p>\n<p>The offset parameter is optional and refers to the index of the comment from the last one (e.g. 2 indicates the second-to-last comment). The first offset value is 1, and by default is <b>1</b>.</p>\n<p><strong>Example</strong>:</p>\n<p>From the comments added in this update, returns the second to last comment with <b>Purpose</b> equal to <b>Request more information</b> and <b>To</b> equal to <b>User</b>:</p>\n<p><b>filter_comments(comments_added(current_update.Comments.OldValue, current_update.Comments.NewValue), 'FunctionalPurpose', 'RequestMoreInformation', 'CommentTo', 'User','Offset',2)</b></p>\n</td>\n</tr>\n<tr>\n<td>count(comments)</td>\n<td>\n<p>Returns the number of comments in the collection.</p>\n<p>Example: Count the number of all comments added in this update:</p>\n<p><b>count(comments_added(current_update.Comments.OldValue, current_update.Comments.NewValue))</b></p>\n</td>\n</tr>\n<tr>\n<td>extract_property(comment, property_name)</td>\n<td>\n<p>Returns the specified property of the comment. The comment parameter is a comment returned by a different function (e.g. <b>filter_comments</b>).</p>\n<p>For details about comment properties, see <a href=\"/doc/423/26.1/commentsapi\" title=\"Comments API\">Comments API</a>. Additionally, for enumerated attributes, you can get their details by checking the definitions on the Lists UI screen (filter by \"comment\").</p>\n<p>For example, to return the body of the last comment of this record:</p>\n<p><b>extract_property (filter_comments (entity.Comments), 'CommentBody')</b></p>\n</td>\n</tr>\n<tr>\n<td>comments_added(current_update.Comments.OldValue, current_update.Comments.NewValue)</td>\n<td>Returns a list of the comments added in this update.</td>\n</tr>\n<tr>\n<td>existing_comments_modified(current_update.Comments.OldValue, current_update.Comments.NewValue, oldCommentsNeeded, filters)</td>\n<td>\n<p>Returns a list of the comments that have been changed in this update.</p>\n<p>Returns the old comments if <b>oldCommentsNeeded</b> is true; returns the new comments otherwise. Default is <b>true</b>.</p>\n<p>The filters are the properties to ignore in the comparison.</p>\n<p>Example: existing_comments_modified(current_update.Comments.OldValue, current_update.Comments.NewValue,true, 'PrivacyType')</p>\n<p>This example returns the old values of a list of comments that have been changed except \"PrivacyType\" in this update.</p>\n</td>\n</tr>\n</tbody>\n</table>\n<h2 class=\"mw-headline\"><a id=\"CSM_Relationship_and_entitlement_functions\" name=\"CSM_Relationship_and_entitlement_functions\" title=\"CSM - Relationship and entitlement functions\"></a><a id=\"CSM-Relationship-and-entitlement-functions\" name=\"CSM-Relationship-and-entitlement-functions\" title=\"CSM - Relationship and entitlement functions\"></a>CSM - Relationship and entitlement functions</h2>\n<p>The following functions are specific to Customer Service Management (CSM). They evaluate company relationships and user entitlements.</p>\n<div>\n<h3><a id=\"related_companies\" name=\"related_companies\" title=\"related_companies\"></a><a id=\"related-companies\" name=\"related-companies\" title=\"related_companies\"></a>related_companies</h3>\n<div>This function supports two syntaxes.</div>\n<h4><a id=\"Syntax_1\" name=\"Syntax_1\" title=\"Syntax 1\"></a><a id=\"Syntax-1\" name=\"Syntax-1\" title=\"Syntax 1\"></a>Syntax 1</h4>\n<div>\n<pre><code>related_companies(companyId, arrayOfDirectionsWithRelationshipTypes)</code></pre>\n<h4><a id=\"Parameter_descriptions\" name=\"Parameter_descriptions\" title=\"Parameter descriptions\"></a><a id=\"Parameter-descriptions\" name=\"Parameter-descriptions\" title=\"Parameter descriptions\"></a><br/>\nParameter descriptions</h4>\n<div>\n<table cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required or Optional</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>companyId</td>\n<td>The ID of the company for which you want to retrieve related companies.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>arrayOfDirectionsWithRelationshipTypes</td>\n<td>An array that specifies the relationship types and directions to consider when retrieving related companies. Each entry in the array must use the format <strong>'Direction:RelationshipType'</strong>, for example, <code>'Forward:MSP'</code>.</td>\n<td>Required</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<h4><a id=\"Function_description\" name=\"Function_description\" title=\"Function description\"></a><a id=\"Function-description\" name=\"Function-description\" title=\"Function description\"></a>Function description</h4>\n<div><br/>\nReturns an array of company IDs that are related to the specified <strong>companyId</strong> based on the specified relationships. For example, <code>related_companies(entity.RequestedByCompany, union('Forward:MSP','Backward:Partner'))</code>.</div>\n<div>\n<h4><a id=\"Syntax_2\" name=\"Syntax_2\" title=\"Syntax 2\"></a><a id=\"Syntax-2\" name=\"Syntax-2\" title=\"Syntax 2\"></a>Syntax 2</h4>\n<div>\n<pre><code>related_companies(userCompanyId, arrayOfDirectionsWithRelationshipTypes, checkEntitlement, personId, offeringId)</code></pre>\n<h4><br/>\nParameter descriptions</h4>\n<div>\n<table cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required or Optional</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>userCompanyId</td>\n<td>The ID of the company to which the user (<strong>personId</strong>) belongs.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>arrayOfDirectionsWithRelationshipTypes</td>\n<td>An array that specifies the relationship types and directions to consider when retrieving related companies. Each entry in the array must use the format <strong>'Direction:RelationshipType'</strong>, for example, <code>'Forward:MSP'</code>.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>checkEntitlement</td>\n<td>A boolean flag to enable entitlement checks. Set this to <strong>true</strong>.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>personId</td>\n<td>The ID of the user.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>offeringId</td>\n<td>The ID of the offering under which the user is trying to raise a request.</td>\n<td>Required </td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<h4>Function description</h4>\n<div><br/>\nReturns an array of company IDs related to <strong>userCompanyId</strong> for which the specified user is entitled to raise requests under the specified offering. For example, <code>related_companies(entity.RequestedByCompany, union('Forward:MSP','Backward:Partner'), true, entity.RequestedByPerson, entity.RequestsOffering)</code>.</div>\n</div>\n<div>\n<h3><a id=\"has_matching_related_company\" name=\"has_matching_related_company\" title=\"has_matching_related_company\"></a><a id=\"has-matching-related-company\" name=\"has-matching-related-company\" title=\"has_matching_related_company\"></a>has_matching_related_company</h3>\n<p>This function supports two syntaxes.</p>\n<h4>Syntax 1</h4>\n<div>\n<pre><code>has_matching_related_company(companyId1, companyId2, arrayOfDirectionsWithRelationshipTypes)\n</code></pre>\n<h4><br/>\nParameter descriptions </h4>\n<div>\n<table cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required or Optional</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>companyId1, companyId2</td>\n<td>The IDs of the two companies that you want to check for a valid relationship.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>arrayOfDirectionsWithRelationshipTypes</td>\n<td>An array that specifies the relationship directions and types to consider when checking the relationship between <strong>companyId1</strong> and <strong>companyId2</strong>. Each entry in the array must use the format <strong>'Direction:RelationshipType'</strong>, for example, <code>'Forward:MSP'</code>.</td>\n<td>Required</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<h4>Function description</h4>\n<div>\n<p>Returns <strong>true</strong> if a valid relationship exists from <b>companyId1</b> to <strong>companyId2</strong> based on the specified relationships. Returns <strong>false</strong> otherwise. For example, <code>has_matching_related_company(entity.RequestedByCompany, entity.RequestToCompany, union('Forward:MSP', 'Backward:Partner'))</code>.</p>\n<h4>Syntax 2</h4>\n<div>\n<pre><code>has_matching_related_company(userCompanyId, targetCompanyId, arrayOfDirectionsWithRelationshipTypes, checkEntitlement, personId, offeringId)</code></pre>\n<h4>Parameter descriptions</h4>\n</div>\n<div>\n<table cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required or Optional</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>userCompanyId</td>\n<td>The ID of the company to which the user (<strong>personId</strong>) belongs.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>targetCompanyId</td>\n<td>The ID of the company for which the user is trying to raise a request.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>arrayOfDirectionsWithRelationshipTypes</td>\n<td>Set this parameter to <strong>null. </strong></td>\n<td>Required</td>\n</tr>\n<tr>\n<td>checkEntitlement</td>\n<td>A boolean flag to enable entitlement checks. Set this to <strong>true.</strong></td>\n<td>Required</td>\n</tr>\n<tr>\n<td>personId</td>\n<td>The ID of the user.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>offeringId</td>\n<td>The ID of the offering under which the user is trying to raise a request.</td>\n<td>Required</td>\n</tr>\n</tbody>\n</table>\n<h4>Function description</h4>\n</div>\n<p>Returns <strong>true</strong> if the specified user is entitled to raise a case for <strong>targetCompanyId </strong>under the specified offering. Returns <strong>false</strong> otherwise. For example, <code>has_matching_related_company(entity.RequestedByCompany, entity.RequestToCompany, union('Forward:MSP', 'Backward:Partner'), true, entity.RequestedByPerson, entity.RequestsOffering)</code>.</p>\n<h3><a id=\"lookup_entitlements\" name=\"lookup_entitlements\" title=\"lookup_entitlements\"></a><a id=\"lookup-entitlements\" name=\"lookup-entitlements\" title=\"lookup_entitlements\"></a>lookup_entitlements</h3>\n<h4><a id=\"Syntax\" name=\"Syntax\" title=\"Syntax\"></a>Syntax</h4>\n<pre><code>lookup_entitlements('EntitlementType', 'Permission', offeringId, personId, userCompanyId, targetCompanyId, entitledItemId)</code></pre>\n<h4>Parameter descriptions</h4>\n<div>\n<table cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required or Optional</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>'EntitlementType'</td>\n<td>The type of entitlement to look up. Currently, <strong>'Product'</strong> is the only entitlement type available.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>'Permission'</td>\n<td>\n<div>The action permitted on the <b>entitledItemId.</b> It can be one of the following:</div>\n<div><strong>'View' -</strong> Indicates that the user can view the requests for the item.</div>\n<div><strong>'Create' - </strong>Indicates that the user can create requests for the item.</div>\n<div><strong>'Update' - </strong>Indicates that user can update requests for the item.</div>\n</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>offeringId</td>\n<td>The ID of the offering under which the user is trying to raise a request.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>personId</td>\n<td>The ID of the user whose entitlements you want to retrieve.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>userCompanyId</td>\n<td>The ID of the company to which the user belongs.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>targetCompanyId</td>\n<td>The ID of the company for which the user is trying to raise a request.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>entitledItemId</td>\n<td>The ID of the item.</td>\n<td>Required</td>\n</tr>\n</tbody>\n</table>\n<h4>Function description</h4>\n<div>Returns all entitlements that allow the specified user to perform the action specified in <strong>'Permission'</strong> on the <strong>entitledItemId</strong> for the specified <strong>targetCompanyId</strong> under the specified <strong>offeringId</strong>. For example, <code>lookup_entitlements('Product', 'Create', entity.RequestsOffering, entity.RequestedByPerson, entity.RequestedByCompany, entity.RequestToCompany, entity.ProductInstance)</code>.</div>\n</div>\n<h3><a id=\"has_matching_entitlement\" name=\"has_matching_entitlement\" title=\"has_matching_entitlement\"></a><a id=\"has-matching-entitlement\" name=\"has-matching-entitlement\" title=\"has_matching_entitlement\"></a>has_matching_entitlement</h3>\n<h4>Syntax</h4>\n<pre><code>has_matching_entitlement('EntitlementType', 'Permission', offeringId, personId, userCompanyId, targetCompanyId, entitledItemId, entitlementId)\n</code></pre>\n<h4>Parameter descriptions</h4>\n<div>\n<table cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required or Optional</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>'EntitlementType'</td>\n<td>The type of entitlement. Currently, <strong>'Product' </strong>is the only entitlement type available.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>'Permission'</td>\n<td>\n<div>The action permitted on the <b>entitledItemId.</b> It can be one of the following:</div>\n<div><strong>'View' -</strong> Indicates that the user can view the requests for the item.</div>\n<div><strong>'Create' - </strong> Indicates that the user can create requests for the item.</div>\n<div><strong>'Update' - </strong> Indicates that user can update requests for the item.</div>\n</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>offeringId</td>\n<td>The ID of the offering under which the user is trying to raise a request.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>personId</td>\n<td>The ID of the user.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>userCompanyId</td>\n<td>The ID of the company to which the user belongs.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>targetCompanyId</td>\n<td>The ID of the company for which the user is trying to raise a request.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>entitledItemId</td>\n<td>The ID of the item.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>entitlementId</td>\n<td>The ID of the entitlement.</td>\n<td>Required</td>\n</tr>\n</tbody>\n</table>\n<h4>Function description</h4>\n</div>\n<p>Returns <strong>true</strong> if the specified user is allowed to perform the action specified in '<strong>Permission'</strong> on the <strong>entitledItemId</strong> for the specified <strong>targetCompanyId </strong>using the specified <strong>entitlementID</strong> under the <strong>offeringId</strong>. Returns <strong>false</strong> otherwise. For example, <code>has_matching_entitlement('Product', 'Create', entity.RequestsOffering, entity.RequestedByPerson, entity.RequestedByCompany, entity.RequestToCompany, entity.ProductInstance, entity.Entitlement)</code>.</p>\n<h3><a id=\"lookup_entitled_items\" name=\"lookup_entitled_items\" title=\"lookup_entitled_items\"></a><a id=\"lookup-entitled-items\" name=\"lookup-entitled-items\" title=\"lookup_entitled_items\"></a>lookup_entitled_items</h3>\n<h4>Syntax</h4>\n<pre><code>lookup_entitled_items('EntitlementType', 'Permission', offeringId, personId, userCompanyId, targetCompanyId)\n\n</code></pre>\n<h4>Parameter descriptions</h4>\n<div>\n<table cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required or Optional</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>'EntitlementType'</td>\n<td>The type of entitlement. Currently, <strong>'Product' </strong>is the only entitlement type available.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>'Permission'</td>\n<td>\n<div>The action permitted on the <b>entitledItemId.</b> It can be one of the following:</div>\n<div><strong>'View' -</strong> Indicates that the user can view the requests for the item.</div>\n<div><strong>'Create' -</strong> Indicates that the user can create requests for the item.</div>\n<div><strong>'Update' - </strong> Indicates that user can update requests for the item.</div>\n</td>\n<td>Required </td>\n</tr>\n<tr>\n<td>offeringId</td>\n<td>The ID of the offering under which the user is trying to raise a request.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>personId</td>\n<td>The ID of the user for whom you want to retrieve the entitled items.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>userCompanyId</td>\n<td>The ID of the company to which the user belongs.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>targetCompanyId</td>\n<td>The ID of the company for which the user is trying to raise a request.</td>\n<td>Required</td>\n</tr>\n</tbody>\n</table>\n<h4>Function description</h4>\n</div>\n<p>Returns all items on which the specified user can perform the action specified in <strong>'Permission' </strong>for the specified <strong>targetCompanyId</strong> under the specified offering. For example, <code>lookup_entitled_items('Product', 'Create', entity.RequestsOffering, entity.RequestedByPerson, entity.RequestedByCompany, entity.RequestToCompany)</code>.</p>\n<h3><a id=\"has_matching_entitled_item\" name=\"has_matching_entitled_item\" title=\"has_matching_entitled_item\"></a><a id=\"has-matching-entitled-item\" name=\"has-matching-entitled-item\" title=\"has_matching_entitled_item\"></a>has_matching_entitled_item</h3>\n<h4>Syntax</h4>\n<pre><code>has_matching_entitled_item('EntitlementType', 'Permission', offeringId, personId, userCompanyId, targetCompanyId, entitledItemId)</code></pre>\n<h4>Parameter descriptions</h4>\n<div>\n<table cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Required or Optional</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>'EntitlementType'</td>\n<td>The type of entitlement. Currently, <strong>'Product' </strong>is the only entitlement type available.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>'Permission'</td>\n<td>\n<div>The action permitted on the <b>entitledItemId.</b> It can be one of the following:</div>\n<div><strong>'View' -</strong> Indicates that the user can view the requests for the item.</div>\n<div><strong>'Create' - </strong> Indicates that the user can create requests for the item.</div>\n<div><strong>'Update' - </strong>Indicates that user can update requests for the item.</div>\n</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>offeringId</td>\n<td>The ID of the offering under which the user is trying to raise a request.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>personId</td>\n<td>The ID of the user.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>userCompanyId</td>\n<td>The ID of the company the user belongs to.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>targetCompanyId</td>\n<td>The ID of the company for which the user wants to raise a request.</td>\n<td>Required</td>\n</tr>\n<tr>\n<td>entitledItemId</td>\n<td>The ID of the item.</td>\n<td>Required</td>\n</tr>\n</tbody>\n</table>\n<h4>Function description</h4>\n</div>\n<p>Returns <strong>true </strong>if the specified user is entitled to perform the action specified in <strong>'Permission'</strong> on the <strong>entitledItemId</strong> for the specified <strong>targetCompanyId</strong> under the specified offering. Returns <strong>false</strong> otherwise. For example, <code>has_matching_entitled_item('Product', 'Create', entity.RequestsOffering, entity.RequestedByPerson, entity.RequestedByCompany, entity.RequestToCompany, entity.ProductInstance)</code>.</p>\n</div>\n</div>\n</div>\n<h2><a id=\"Identification_functions_for_LDAP_integration\" name=\"Identification_functions_for_LDAP_integration\" title=\"Identification functions for LDAP integration\"></a><a id=\"Identification-functions-for-LDAP-integration\" name=\"Identification-functions-for-LDAP-integration\" title=\"Identification functions for LDAP integration\"></a>Identification functions for LDAP integration</h2>\n<table>\n<tbody>\n<tr>\n<th>Function</th>\n<th>Description</th>\n</tr>\n<tr>\n<td>\n<p>Identification.findBy(record type, field, data source)</p>\n<p><span style=\"font-weight: normal;\">or</span></p>\n<p>Identification.identify(record type, field, data source)</p>\n</td>\n<td>\n<p>Returns a record of the specified type that matches the field specified.</p>\n<p>Example: To return a location record with the name <b>Boston</b>, enter the following phrase, where <b>source.co</b> contains the string <b>Boston</b>:</p>\n<p><b>identification.findBy('Location', 'Name', source.co)</b></p>\n<p>If the data source is a Service Management record, you can enter the value directly for the data source.</p>\n<p>Example: To return a person record with the Upn <b>test@microfocus.com</b>, enter the following phrase:</p>\n<p><b>identification.identify('Person', 'Upn', 'test@microfocus.com')</b></p>\n<p>It's also possible to enter multiple sets of parameters.</p>\n<p>Example: The phrase:</p>\n<p><b>identification.identify('Person', 'Upn', 'test@microfocus.com', 'Email', 'testEmail@microfocus.com')</b></p>\n<p>returns the person with the Upn field value of <b>test@microfocus.com</b> and the Email field value <b>testEmail@microfocus.com</b>.</p>\n<p><strong>Note:</strong> When using Identification.identify, if the record type is Person or PersonGroup, there must be at least one Upn field and its corresponding value. Otherwise, the function returns null.</p>\n</td>\n</tr>\n<tr>\n<td>external://&lt;external record type&gt;/&lt;external record ID&gt;</td>\n<td>\n<p>This format can be used to refer to a record from external imported data. Both parameters can be either an Expression Language phrase or a string. Strings must be enclosed within single quote marks to comply with the Expression Language syntax.</p>\n<p>Example: To refer to a person record from the LDAP server, enter the following phrase:</p>\n<p><b>external://'ldapPerson'/source.manager</b></p>\n<p>where <b>source.manager</b> contains the external ID of the record in the LDAP server.</p>\n</td>\n</tr>\n</tbody>\n</table>\n<h2 class=\"mw-headline\" id=\"Logical_and_mathematical_expressions\"><a id=\"Logical_and_mathematical_expressions\" name=\"Logical_and_mathematical_expressions\" title=\"Logical and mathematical expressions\"></a><a id=\"Logical-and-mathematical-expressions\" name=\"Logical-and-mathematical-expressions\" title=\"Logical and mathematical expressions\"></a>Logical and mathematical expressions</h2>\n<p>The following table lists the available logical and mathematical operations in the Expression Language. The expressions constructed with these operations evaluate to a numeric or boolean value.</p>\n<table>\n<tbody>\n<tr>\n<th>Operation</th>\n<th>Symbol</th>\n</tr>\n<tr>\n<td>Or</td>\n<td>||</td>\n</tr>\n<tr>\n<td>And</td>\n<td>&amp;&amp;</td>\n</tr>\n<tr>\n<td>Not</td>\n<td>!</td>\n</tr>\n<tr>\n<td>Addition</td>\n<td>+</td>\n</tr>\n<tr>\n<td>Subtraction</td>\n<td>\n<p>-</p>\n<p><strong>Note:</strong> </p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">When used as the negative symbol, please make sure there is no space between the negative symbol and the number. For example: <code>${-2+6}</code></li><li style=\"margin-left: 28px; position: relative;\">When used as the minus operator, please make sure there is at least one space character between the operator and the second number. Or, include the second number in parenthesis. For example, <code>${2- 3}</code> or <code>${2-(3)}</code> </li></ul>\n</td>\n</tr>\n<tr>\n<td>Multiplication</td>\n<td>*</td>\n</tr>\n<tr>\n<td>Division</td>\n<td>/</td>\n</tr>\n<tr>\n<td>Modulo</td>\n<td>\n<p>%</p>\n<p>Example: <b>15%4</b> returns <b>3</b> (15 modulo 4 equals 3)</p>\n</td>\n</tr>\n<tr>\n<td>Equal</td>\n<td>= or ==</td>\n</tr>\n<tr>\n<td>Not Equal</td>\n<td>!= or &lt;&gt;</td>\n</tr>\n<tr>\n<td>Less Than</td>\n<td>&lt;</td>\n</tr>\n<tr>\n<td>Less Than or Equal</td>\n<td>&lt;=</td>\n</tr>\n<tr>\n<td>Greater Than</td>\n<td>&gt;</td>\n</tr>\n<tr>\n<td>Greater Than or Equal</td>\n<td>&gt;=</td>\n</tr>\n</tbody>\n</table>\n<h2 class=\"mw-headline\" id=\"Object_property_expressions\"><a id=\"Object_property_expressions\" name=\"Object_property_expressions\" title=\"Object property expressions\"></a><a id=\"Object-property-expressions\" name=\"Object-property-expressions\" title=\"Object property expressions\"></a>Object property expressions</h2>\n<p>An object property expression is composed of an object, such as a record, followed by a property of the object. The expression can also include an additional property of the first property. The expression must conform to the following format:</p>\n<p><code>object.property1.property2</code></p>\n<p>For example, <b>entity.Owner.Name</b> would return the name property of the owner property of the given record.</p>\n<p>The following table lists the available object property expressions in the Expression Language.</p>\n<table>\n<tbody>\n<tr>\n<th>Syntax</th>\n<th>Output</th>\n</tr>\n<tr>\n<td>entity</td>\n<td>Returns the &lt;entityID&gt;:&lt;entityType&gt; of the record. Example: <strong>10300:Incident</strong>.</td>\n</tr>\n<tr>\n<td>entity.attribute_name</td>\n<td>\n<p>Returns the value of the specified attribute. The value can be a primitive or a record.</p>\n<p>Examples:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\"><b>entity.Urgency</b> returns the value of the Urgency field of the current record.</li><li style=\"margin-left: 28px; position: relative;\"><b>entity.Status == 'Suspended' </b></li><li style=\"margin-left: 28px; position: relative;\"><strong>entity.Status == 'Pending'</strong><b> </b>returns a boolean value (<strong>true</strong><b> </b>if the Status field of the current record equals either Suspended or Pending;<b> </b><strong>false</strong><b> </b>otherwise).</li></ul>\n</td>\n</tr>\n<tr>\n<td>entity.relation_attribute_name.attribute_name</td>\n<td>\n<p>Returns the value of the specified attribute of the specified related record. The value can be a primitive or a record.</p>\n<p>The <b>relation_attribute_name</b> is a property of the record, defined in its metadata. Examples:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\"><b>entity.OwnedByPerson.Id</b> returns the ID of the set of people identified by the relationship <b>OwnedByPerson</b> (a one-to-many relationship) for the current record.</li><li style=\"margin-left: 28px; position: relative;\"><b>entity.OwnedByGroup.Upn</b> returns the UPN of the owner group of the current record.</li></ul>\n</td>\n</tr>\n<tr>\n<td>entity.relation_attribute_name.special_field</td>\n<td>\n<p>Returns the value of the specified field of the specified related record.</p>\n<p>The <b>relation_attribute_name</b> is a property of the record, defined in its metadata.</p>\n</td>\n</tr>\n<tr>\n<td>entity.association_name</td>\n<td>Returns the collection of records related to the specified record by the specified relationship.</td>\n</tr>\n<tr>\n<td>entity.association_name.attribute_name</td>\n<td>Returns the collection of values of the specified attribute for each of the related records, related by the specified relationship.</td>\n</tr>\n<tr>\n<td>entity.association_name.special_field</td>\n<td>Returns the collection of values of the specified field for each of the related records, related by the specified relationship.</td>\n</tr>\n<tr>\n<td>entity.path_name</td>\n<td>Returns the collection of records included on the specified path defined to a related record.</td>\n</tr>\n<tr>\n<td>entity.path_name_attribute_name</td>\n<td>Returns the value of the specified attribute of the related record at the end of the specified path.</td>\n</tr>\n<tr>\n<td>entity.path_name.special_field</td>\n<td>Returns the value of the specified field of the related record at the end of the specified path.</td>\n</tr>\n<tr>\n<td>entity.CurrentApprovalDisplayComment</td>\n<td>Returns the comments indicating the approval status of the current record.</td>\n</tr>\n<tr>\n<td>entity.CurrentApprovalStatus</td>\n<td>Returns the pending approvals on the \"active\" approval tasks. Be aware that it doesn't include the non-instantiated approvals.</td>\n</tr>\n</tbody>\n</table>\n<p>For records of type person, the following functions are available.</p>\n<table>\n<tbody>\n<tr>\n<th>Syntax</th>\n<th>Output</th>\n</tr>\n<tr>\n<td>&lt;person&gt;.IsPermitted(permissions, roles)</td>\n<td>\n<p>Returns true if the specified person has the specified permissions. (&lt;person&gt; represents a record of type person.)</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">\n<p>The following examples use the <b>IsPermitted</b> function for specific permissions:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\"><b>${current_user.IsPermitted('EMS-View-Template(entityType= Request)')}</b> returns <b>true</b> if the current user has permission to view records of type request; otherwise, it returns <b>false</b>.</li><li style=\"margin-left: 40px; position: relative;\"><b>${current_user.IsPermitted('EMS-Create-Template(entityType= Request)')}</b> returns <b>true</b> if the current user has permission to create records of type request; otherwise, it returns <b>false</b>.</li><li style=\"margin-left: 40px; position: relative;\"><b>${current_user.IsPermitted('EMS-Update-Template(entityType= Request)')}</b> returns <b>true</b> if the current user has permission to update records of type request; otherwise, it returns <b>false</b>.</li></ul>\n<p>You can combine multiple permissions in a single expression:</p>\n<p><b>${current_user.IsPermitted('EMS- View -Template(entityType= Request), EMS- Update -Template(entityType= Request)')}</b> returns <b>true</b> if the current user has permission to view and to update records of type request. It returns <b>false</b> if he is lacking either of the permissions.</p>\n</li><li style=\"margin-left: 28px; position: relative;\">\n<p>The following example uses the <b>IsPermitted</b> function for a specific role:</p>\n<p><b>${current_user.IsPermitted(null, 'Service Portal Administrator')}</b> returns <b>true</b> if the current user is assigned the <b>Service Portal Administrator</b> role; otherwise, it returns <b>false</b>.</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">When using the roles parameter only, make sure to enter <b>null</b> for the permissions parameter.</li><li style=\"margin-left: 40px; position: relative;\">When you try to use the <b>IsPermitted</b> function for the \"Tenant Admin Role\" role, make sure the role is specified as \"tenantAdmin,\" otherwise the expression will fail. For example, use <b>${current_user.IsPermitted(null, 'tenantAdmin')}</b> for the \"Tenant Admin Role\" role.</li><li style=\"margin-left: 40px; position: relative;\">When you try to use the <b>IsPermitted</b> function for a role other than the \"Tenant Admin Role\" role, you must grant that role permission to access the RMS resource that lists the roles.</li></ul>\n</div></div></div>\n</li></ul>\n</td>\n</tr>\n<tr>\n<td>&lt;person&gt;.EntitlementRules</td>\n<td>\n<p>Returns a collection of the entitlement rule ID numbers for the entitlement rules that apply to the person.</p>\n<p>For example:</p>\n<div style=\"margin-left: 2em\">\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\"><b>current_user.EntitlementRules</b> returns the ID numbers of the entitlement rules that apply to the current user.</li><li style=\"margin-left: 28px; position: relative;\"><b>entity.AssignedToPerson.EntitlementRules</b> returns the ID numbers of the entitlement rules that apply to the assignee of the selected record.</li></ul>\n</div>\n</td>\n</tr>\n<tr>\n<td>&lt;person&gt;.EntitledServices</td>\n<td>\n<p>Returns a collection of the ID numbers for the service definitions that are available to the person, according to the entitlement rules defined for the service definition and its category.</p>\n<p>For example: <b>current_user.entitledServices</b> returns the ID numbers of the service definitions that are available to the current user.</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>The following table lists some of the special fields available for the records.</p>\n<table>\n<tbody>\n<tr>\n<th>Syntax</th>\n<th>Output</th>\n</tr>\n<tr>\n<td>Id</td>\n<td>Returns the record's ID as a string.</td>\n</tr>\n<tr>\n<td>Link</td>\n<td>Returns the link to the record as a string.</td>\n</tr>\n<tr>\n<td>Type</td>\n<td>Returns the record type as a string.</td>\n</tr>\n<tr>\n<td>PhaseId</td>\n<td>Returns the current phase of the record as a string.</td>\n</tr>\n<tr>\n<td>MetaPhase</td>\n<td>Returns the current metaphase of the record as a string.</td>\n</tr>\n<tr>\n<td>AllStakeholders</td>\n<td>Returns all the stakeholders of the record as a collection.</td>\n</tr>\n<tr>\n<td>ActiveStakeholders</td>\n<td>Returns the active stakeholders of the record as a collection.</td>\n</tr>\n</tbody>\n</table>\n<h2><a id=\"Other_expressions\" name=\"Other_expressions\" title=\"Other expressions\"></a><a id=\"Other-expressions\" name=\"Other-expressions\" title=\"Other expressions\"></a>Other expressions</h2>\n<p>You can get collection records by giving a filter condition in <code>[]</code>:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\"><code>[].count</code> returns the collection count</li><li style=\"margin-left: 28px; position: relative;\"><code>[].fieldname</code> returns the field value of each collection record. Note that the field here must be a field of one many2many associated record.</li></ul>\n<p>The following are examples of using these methods for the small text, integer, and enum field types.</p>\n<h3><a id=\"Example_for_the_Small_Text_field_type\" name=\"Example_for_the_Small_Text_field_type\" title=\"Example for the Small Text field type\"></a><a id=\"Example-for-the-Small-Text-field-type\" name=\"Example-for-the-Small-Text-field-type\" title=\"Example for the Small Text field type\"></a>Example for the Small Text field type</h3>\n<p>The following figure shows an example of the small text field type. </p>\n<div><a class=\"image\" href=\"\"> <img alt=\"SMAX_202305_DSL_small_text_count.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/5/52/SMAX_202305_DSL_small_text_count.png\" hspace=\"0\" src=\"../../../images/SMAX_202305_DSL_small_text_count_e2e8b70f.png\" style=\"width:800px;height:260px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\"/> </a></div>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n<thead>\n<tr>\n<th scope=\"col\">Field type</th>\n<th scope=\"col\">Condition</th>\n<th scope=\"col\">Action</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Small text</td>\n<td><code>If ${entity.ActualServiceContainsServiceComponent[AssetTag='Test'].count&gt;0}</code></td>\n<td><code>Set <strong>Environment</strong> to <strong>Test</strong></code></td>\n</tr>\n</tbody>\n</table>\n<p>This example rule retrieves a collection of Service Component records contained in an Actual Service record in a non-Native SACM scenario, by using a filter where each Service Component has an <strong>Asset tag</strong> value of “Test”. If the collection count is greater than 0 (zero), this rule sets the Environment field of the Actual Service record to “Test”.</p>\n<p>In this example, the filter uses the Equal (=) operator. </p>\n<h3><a id=\"Example_for_the_Integer_field_type\" name=\"Example_for_the_Integer_field_type\" title=\"Example for the Integer field type\"></a><a id=\"Example-for-the-Integer-field-type\" name=\"Example-for-the-Integer-field-type\" title=\"Example for the Integer field type\"></a>Example for the Integer field type</h3>\n<p>The following figure shows an example of the Integer field type.</p>\n<div><a class=\"image\" href=\"\"> <img alt=\"SMAX_202305_DSL_count_integer_example.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/2/27/SMAX_202305_DSL_count_integer_example.png\" hspace=\"0\" src=\"../../../images/SMAX_202305_DSL_count_integer_example_27b1be72.png\" style=\"width: 800px; height: 153px; margin: 0px; border: 0px solid black;\" vspace=\"0\"/> </a></div>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n<thead>\n<tr>\n<th scope=\"col\">Field type</th>\n<th scope=\"col\">Condition</th>\n<th scope=\"col\">Action</th>\n</tr>\n<tr>\n<td>Integer</td>\n<td><code>If ${entity.ProblemCausedByChange[EstimatedCost&gt;1000].count&gt;0}</code></td>\n<td><code>Set <strong>Risk</strong> to <strong>Some risk</strong></code></td>\n</tr>\n</thead>\n</table>\n<p>This example rule retrieves a collection of Problem records defined in the <strong>Effects of the change</strong> section of a Change record, by using a filter where the Problem record has an <strong>Estimated cost</strong> field value greater than 1,000. If the collection count is greater than 0 (zero), this rule sets the Risk field of the Change record to \"Some risk\". </p>\n<p>In this example, the filter uses the Greater Than (&gt;) operator. </p>\n<h3><a id=\"Example_for_the_Enum_field_type\" name=\"Example_for_the_Enum_field_type\" title=\"Example for the Enum field type\"></a><a id=\"Example-for-the-Enum-field-type\" name=\"Example-for-the-Enum-field-type\" title=\"Example for the Enum field type\"></a>Example for the Enum field type</h3>\n<p>The following figure shows an example of the Enum field type.</p>\n<div><a class=\"image\" href=\"\"> <img alt=\"SMAX_202305_DSL_enum_field_example.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/a/a7/SMAX_202305_DSL_enum_field_example.png\" hspace=\"0\" src=\"../../../images/SMAX_202305_DSL_enum_field_example_2d57b0c6.png\" style=\"width: 800px; height: 229px; margin: 0px; border: 0px solid black;\" vspace=\"0\"/> </a></div>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n<thead>\n<tr>\n<th scope=\"col\">Field type</th>\n<th scope=\"col\">Condition</th>\n<th scope=\"col\">Action</th>\n</tr>\n<tr>\n<td>Enum</td>\n<td><code>If ${entity.OwnedByGroup != null}</code></td>\n<td><code>Define suggested values for Owner with header AVAILABLE PERSON with filter Name IN {entity.OwnedByGroup.PersonToGroup[EmployeeStatus in('Active','LeaveOfAbsence')].Name}</code></td>\n</tr>\n</thead>\n</table>\n<p>This example rule provides a collection of Person names as suggested values with a header of <strong>AVAILABLE PERSON</strong> for the Owner field of a Change record, by using a filter where each Person record belongs to the <strong>Owning group</strong> of the Change record and has a <strong>Person status</strong> of <strong>Active</strong> or <strong>Leave of absence</strong>. The rule condition is that the Change record has a non-empty <strong>Owning group</strong> value.</p>\n<p>In this example, the filter uses the IN operator.</p>\n<p>The figure below shows an example of the suggested values for the Owner field of a Change record.</p>\n<div><a class=\"image\" href=\"\"> <img alt=\"SMAX_202305_DSL_count_enum_suggested_values.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/4/4c/SMAX_202305_DSL_count_enum_suggested_values.png\" hspace=\"0\" src=\"../../../images/SMAX_202305_DSL_count_enum_suggested_values_0f8ef114.png\" style=\"width:633px;height:357px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\"/> </a></div>\n<h2 class=\"mw-headline\" id=\"Related_topics\"><a id=\"Related_topics\" name=\"Related_topics\" title=\"Related topics\"></a><a id=\"Related-topics\" name=\"Related-topics\" title=\"Related topics\"></a>Related topics</h2>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\"><a href=\"/doc/423/26.1/explang\" title=\"Expression Language\">Expression Language</a></li><li style=\"margin-left: 28px; position: relative;\"><a href=\"/doc/423/26.1/explangeditor\" title=\"Expression Language editor\">Expression Language editor</a></li><li style=\"margin-left: 28px; position: relative;\"><a href=\"/doc/423/26.1/objectpropertyexp\" title=\"How to form object property expressions\">How to form object property expressions</a></li><li style=\"margin-left: 28px; position: relative;\"><a href=\"/doc/423/26.1/explangexampleoutput\" title=\"Expression Language examples by output type\">Expression Language examples by output type</a></li><li style=\"margin-left: 28px; position: relative;\"><a href=\"/doc/423/26.1/explangexamplerec\" title=\"Expression Language examples with record properties\">Expression Language examples with record properties</a></li><li style=\"margin-left: 28px; position: relative;\"><a href=\"/doc/423/26.1/explangquickhelp\" title=\"Expression Language for notifications\">Expression Language for notifications</a></li></ul>\n</div>",
  "modifiedon": "2025-12-09 05:10:21"
}