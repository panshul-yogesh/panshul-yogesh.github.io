{
  "title": "Failed to accept or reject Solution from email",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>When you enable email integration, if the Solution and the Completion Code are with valid values but the request isn't in the Validation phase, you will still receive an email with Accept and Reject options. In this case, after you accept or reject the solution from this email, you will receive an action failure email.</p>\n<h2 id=\"Causes\">Cause</h2>\n<p>This issue is caused by the definition of request notification rules for sending solution and completion code with email integration.</p>\n<h2 id=\"Solutions\">Solution</h2>\n<ol>\n<li>From the main menu, select <strong>Administration &gt; Configuration &gt; Studio &gt; Fields</strong>.</li>\n<li>Select <strong>Request</strong> in the drop-down list at the top of the page.</li>\n<li>Click <strong>New </strong>field. Set the <strong>Name </strong>as \"SendNotificaiton\" and set the <strong>Logical </strong>type as \"BOOLEAN\", then save this field.</li>\n<li>Go to the <strong>Processes and Rules</strong> tab. <br/>\n\tDisable the following two rules:<br/>\n<strong>After change</strong> &gt; the rule named \"Notify requesters (Requested by person and Requested for person) that a solution was provided to the request. This notification does not contain email integration actions.\"<br/>\n<strong>After applying changes</strong> &gt; the rule named \"Sends solution notification to requester, when the email integration is enabled.\"</li>\n<li>Copy a rule condition for later use:\n\t<ul>\n<li>If Email integration is disabled, copy the following condition:<br/>\n<code>${entity.CompletionCode != 'CompletionCodeSolvedBySocial' &amp;&amp; ((current_update.Solution.IsChanged == true &amp;&amp; entity.CompletionCode != null &amp;&amp; entity.CompletionCode != '') || (current_update.CompletionCode.IsChanged == true &amp;&amp; (current_update.CompletionCode.OldValue == null || current_update.CompletionCode.OldValue == '') &amp;&amp; entity.Solution != null &amp;&amp; entity.Solution != ''))&amp;&amp; tenant_settings.EMAIL_INTEGRATION_ENABLED == false}</code></li>\n<li>If Email integration is enabled, copy the following condition:<br/>\n<code>${entity.CompletionCode != 'CompletionCodeSolvedBySocial' &amp;&amp; ((current_update.Solution.IsChanged == true &amp;&amp; entity.CompletionCode != null &amp;&amp; entity.CompletionCode != '') || (current_update.CompletionCode.IsChanged == true &amp;&amp; (current_update.CompletionCode.OldValue == null || current_update.CompletionCode.OldValue == '') &amp;&amp; entity.Solution != null &amp;&amp; entity.Solution != '')) &amp;&amp; tenant_settings.EMAIL_INTEGRATION_ENABLED == true}</code></li>\n</ul>\n</li>\n<li>Add a new rule in the <strong>After change</strong> section.</li>\n<li>Select <strong>Set field</strong>.</li>\n<li>Add condition to this rule, and then paste the the condition copied in step 5 to the expression.</li>\n<li>Set the field as “SendNotificaiton\" which was created in step 3, then set the value to \"true\" and save this rule.</li>\n<li>If Email integration is disabled, add a new rule in the <strong>After change</strong> section.<br/>\n\tIf Email integration is enabled, add a new rule in the <strong>After applying changes</strong> section.</li>\n<li>Select <strong>Send notification</strong>.</li>\n<li>Add condition to this rule, and then set the expression as <code>entity.SendNotification_c == true &amp;&amp; current_update.MetaPhase.IsChanged &amp;&amp; current_update.MetaPhase.NewValue == 'Validation'</code></li>\n<li>Add two recipients with following expressions:<br/>\n<code>${entity.RequestedForPerson.Id}</code><br/>\n<code>${entity.RequestedByPerson.Id}</code></li>\n<li>If Email integration is disabled, set <strong>template </strong>as <strong>Template Definition for sending solution and completion code</strong> and save this rule.<br/>\n\tIf Email integration is enabled, set <strong>template </strong>as <strong>Template definition for send solution and completion code with email integration</strong> and save this rule.</li>\n</ol>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">Make sure the rule added in step 5 is placed before the rule added in step 9.</div>\n</div>\n<div></div>\n<div></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}