{
  "title": "Failed to launch controller with Init:Error for EKS upgrade",
  "content": "<div class=\"mw-parser-output\">\n<div></div>\n<p>When you upgrade the suite on EKS, the upgrade fails because the controller pod is in <code>Init:Error</code> state. </p>\n<p>Additionally, if you check the logs of the pod,  you see \"<code>Permission denied\"</code> errors.</p>\n<p>Here are example steps to reproduce this issue.</p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">To check the logs of this pod, run the following command:\n\t<pre><span id=\"cke_bm_5503S\" style=\"display: none;\"> </span>kubectl logs -f -n &lt;itsma_namespace&gt;  itom-bo-deploy-controller-pod -c itom-bo-deploy-controller-init-data</pre>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">The \"<code>Permission denied\"</code> errors you see resemble the following:\n\t<pre>rm: cannot remove '/pv/itsma/services/manifest.tmpl': Permission denied\nrm: cannot remove '/pv/itsma/services/manifest.yaml': Permission denied\nrm: cannot remove '/pv/itsma/services/service-property/new_install.tmpl': Permission denied</pre>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">If you further go to the EFS share folder <strong>/mnt/efs/var/vols/itom/itsma/global-volume</strong> and check the ownership of folder <strong>service-deploy-controller</strong>, you may receive a message that resembles the following:\n\t<pre>drwxr-xr-x. 4 root root 36 May 5 14:28 service-deploy-controller</pre>\n</li></ol>\n<h2><a id=\"Cause\" name=\"Cause\" title=\"Cause\"></a>Cause</h2>\n<p>This issue occurs because the EFS folders don’t have the “w” and “s” permissions for group.</p>\n<h2><a id=\"Solution\" name=\"Solution\" title=\"Solution\"></a>Solution</h2>\n<div>\n<p>Run the commands below for all share folders and then rerun the upgrade process.</p>\n<pre>chmod g+w /mnt/efs/var/vols/itom/itsma/*\nchmod g+s /mnt/efs/var/vols/itom/itsma/*</pre>\n</div>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}