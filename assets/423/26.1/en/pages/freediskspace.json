{
  "title": "Free disk space for control plane nodes and worker nodes",
  "content": "<div class=\"mw-parser-output\"><span class=\"snippet-start\" data-sname=\"423-25.4-423-25.3-FreeDiskSpace||N\"></span><p class=\"mw-empty-elt\">\n</p><div>If you don't have enough disk space for the upgrade, perform the following steps to free up the disk space: </div>\n<ol>\n<li>Remove the offline download image directory if it exists. By default, the directory is <code>/var/opt/cdf/offline</code>.</li>\n<li>Remove the OMT build bundle file if it exists. The name of the bundle file resembles <code>OMT_Embedded_K8s_&lt;release number&gt;.zip</code>.</li>\n<li>Run the following commands to clean up unused images from the cache on the current node:\n\t<pre><code>for im in `ctr i ls | grep -- /pause: | awk '{print $1}'`\ndo\n\t   ctr i export bk-pause-`date +%s`.tar $im\n\t   sleep 1\ndone\n\t \ncrictl rmi -q\n\t \nls bk-pause-*.tar | xargs -i sh -c \"ctr i import {}; rm -f {}\"</code></pre>\n</li>\n</ol>\n<p>If If you don't have enough disk space on the NFS server, you can also perform the following steps to free up the disk space:</p>\n<ol>\n<li>Locate the OMT log files folder on NFS server with the below command:\n\t<pre><code>kubectl get pv -o json|jq '.items[].spec | select(.claimRef.name==\"itom-logging-vol\")' |jq -r .nfs.path</code></pre>\n</li>\n<li>Go to the NFS server and remove the log files. Replace <code>&lt;nfs path&gt;</code> with the output from the previous step and <code>&lt;days&gt;</code> to indicate that you'll remove the log files which are older than the specified days:\n\t<pre><code>cd &lt;nfs path&gt;\nfind -mtime +&lt;days&gt; -name \"*.log\" -delete</code></pre>\n\tFor example, if you'll remove the log files that are older than 30 days, then it should be: <code>find -mtime +30 -name \"*.log\" -delete</code></li>\n</ol>\n<p><br/>\n</p>\n<p class=\"mw-empty-elt\"></p><span class=\"snippet-end\" data-sname=\"423-25.4-423-25.3-FreeDiskSpace||N\"></span></div>",
  "modifiedon": "2025-10-24 08:51:12"
}