{
  "title": "Perform a full reindex for Smart Analytics",
  "content": "<div class=\"mw-parser-output\"><br/><p>You need to perform a full reindex after you update the Smart Analytics stop words, synonyms, or IDOL configure file. The whole process may take hours depending on your data size and the hardware capacity (CPU, memory, and storage I/O). The search functionality is temporarily unavailable during the reindex process, users are informed with the reindex progress if they perform a search in the following locations when the reindex isn't completed:</p>\n<ul>\n<li>Search in Service Portal</li>\n<li>Global search in Service Management</li>\n<li>Search in live support</li>\n<li>Search when adding related records</li>\n</ul>\n<ul>\n</ul>\n<h2>Prerequisite</h2>\n<p>To run the reindex script, ensure that the <code>curl</code> command is available in the current Linux environment. Additionally, the OpenSSL library version used by <code>curl</code> must be <strong>1.1.1</strong> or higher to support TLS 1.3, which is required for API communication.</p>\n<p>You can use the <code>curl -V</code> command to check both the <code>curl</code> version and its OpenSSL library version.</p>\n<h2 id=\"Full_reindex_for_the_suite_that_is_deployed_on_AWS_(EKS),_Azure_(AKS),_or_GCP\"><span class=\"mw-headline\" id=\"Full_reindex_for_the_suite_that_is_deployed_on_AWS_.28EKS.29.2C_Azure_.28AKS.29.2C_or_GCP\">Perform a full reindex</span></h2>\n<p>To perform a full reindex for your suite, follow these steps:</p>\n<ol>\n<li>Download and unzip the reindex script <strong>reindex.sh</strong>, included in the SMA Operation Toolkit folder, to a Linux environment that is properly configured to resolve the suite's FQDN.</li>\n<li>Navigate to the <strong>SMAX_search_reindex</strong> folder and run the following command:\n\t<pre>sh reindex.sh &lt;FQDN&gt; -t &lt;tenant_id&gt;</pre>\n\tWhere <i>&lt;tenant_id&gt;</i> is the ID of the tenant where you want to perform a full reindex. For example, <strong>sh reindex.sh smax-cluster.itsma-ng.com -t 100000002</strong>.<br/>\n\tThe shell script will prompt you to<span id=\"cke_bm_17715C\" style=\"display: none;\"> </span> input the username and password of your integration user <b>bo-integration@dummy.com</b> to get a valid token for API calls. For more information on how to get the password, see <a href=\"/doc/423/26.1/changeintegrationuserpswd#Retrieve_the_integration_user_password\" title=\"Retrieve the integration user password\">Retrieve the integration user password</a>.<br/>\n\tAfter you provide the integration username and password, the full reindex process will be triggered.</li>\n<li>Log in to Service Portal of the tenant where full reindex is performed. Verify that a progress bar appears below the search box, indicating that the full reindex is in progress.</li>\n<li>Log in to Agent Interface of the tenant where full reindex is performed. Verify that a progress bar appears below the search box, indicating that the full reindex is in progress.</li>\n<li>(Optional) For more information about the reindex process, go to the NFS/EFS/Azure file system of the suite and check the logs of the platform online and offline pods. For example:<br/>\n<strong>&lt;root_path&gt;/logging-volume/xservices/platform/itom-xruntime-platform-offline-xxx/maas/maas_reindex.log</strong><br/>\n<strong>&lt;root_path&gt;/logging-volume/xservices/platform/itom-xruntime-platform-online-xxx/maas/maas_reindex.log</strong></li>\n<li>(Optional) To rebuild the prediction models of smart tickets after the reindex, log in to Agent Interface, from the main menu, choose <strong>Administration </strong>&gt; <strong>Configuration </strong>&gt; <strong>Smart Analytics Settings</strong> &gt;<strong> Smart Ticket</strong>. Select all tasks and click <strong>Train</strong>.</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Other_reindex_scenarios\">Other reindex scenarios</h2>\n<p>By default, a full reindex is performed for the following record types in this order:</p>\n<p>AccountingPeriod &gt; ActualService &gt; Article &gt; AssetModel &gt; Brand &gt; Budget &gt; BudgetCenter &gt; BudgetLine &gt; Change &gt; Company &gt; Contract &gt; CostCenter &gt; CostType &gt; DashboardDefinition &gt; Device &gt; EntityModel &gt; ITProcessRecordCategory &gt; Idea &gt; Incident &gt; InfrastructurePeripheral &gt; License &gt; Location &gt; Offering &gt; Optimization &gt; Person &gt; PersonGroup &gt; Portfolio &gt; Problem &gt; Program &gt; Project &gt; ProjectPortfolio &gt; Proposal &gt; Release &gt; Request &gt; ServiceComponent &gt; ServiceDefinition &gt; SystemElement &gt; QNA &gt; USER &gt; SurveyResult &gt; OOIntegrationFlow</p>\n<p>To reindex record types with a specified sequence, you can use the <code>-s </code>command. Each step reindexes a group of record types:</p>\n<ol>\n<li>Offering, Article, Portfolio, ActualService, ServiceDefinition</li>\n<li>AccountingPeriod, AssetModel, Brand, Budget, BudgetCenter, BudgetLine, Change, Company, Contract, CostCenter, CostType, DashboardDefinition, EntityModel, ITProcessRecordCategory, Idea, InfrastructurePeripheral, License, Location, Optimization, PersonGroup, Problem, Program, Project, ProjectPortfolio, Proposal, Release, ServiceComponent, SystemElement, QNA, SurveyResult, OOIntegrationFlow</li>\n<li>Incident, Request, Device, Person, USER</li>\n</ol>\n<p>The following table lists some commands you can use for reindexing:</p>\n<table>\n<caption>Reindex commands</caption>\n<tbody>\n<tr>\n<th>Task</th>\n<th>Command</th>\n<th>Applicable scenario</th>\n</tr>\n<tr>\n<td>Clear the IDOL database and then perform a full reindex</td>\n<td><code>sh reindex.sh &lt;External_Access_Host&gt; -t &lt;tenant_id&gt; -c</code></td>\n<td>\n<p>The tenant's data is incomplete or has been corrupted. To ensure data completeness, you want to clear the database, and then perform a full reindex at the tenant level.</p>\n<p><strong>Note:</strong> After running reindex with <code>-c</code>, you might not be able to find the expected search results for a while.</p>\n</td>\n</tr>\n<tr>\n<td>Perform a reindex on specific record types</td>\n<td><code>sh reindex.sh &lt;External_Access_Host&gt; -t &lt;tenant_id&gt; -T \"&lt;record type&gt;,&lt;record type&gt;\"</code></td>\n<td>\n<p>You want to do a partial reindex and only want to reindex certain record types, such as request, device, and offering.</p>\n<p>Use commas (,) to separate multiple record types.</p>\n<p><strong>Notes:</strong></p>\n<ul>\n<li>Don't use <code>-c</code> along with <code>-T</code> because <code>-c</code> will remove all the indexed data.</li>\n<li>\n<p>If you are using Aviator and want to clear the Milvus database when reindexing news, knowledge articles, and offerings, run this command:</p>\n<code><code>sh reindex.sh &lt;External_Access_Host&gt; -t &lt;tenant_id&gt; -T</code><smax_fqdn><tenant_id> \"Article,Offering\" -m</tenant_id></smax_fqdn></code></li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>Perform a full reindex for a tenant with a specified sequence</td>\n<td><code>sh reindex.sh &lt;External_Access_Host&gt; -t &lt;tenant_id&gt; -s 2,1,3</code></td>\n<td>A full reindex might be time-consuming and will affect the search service. To save time, you want to reindex the record types with a specific sequence. This is a tenant-level full reindex.</td>\n</tr>\n<tr>\n<td>Perform a reindex for a tenant with specified steps</td>\n<td><code>sh reindex.sh &lt;External_Access_Host&gt; -t &lt;tenant_id&gt; -s 2,3</code></td>\n<td>\n<p>This command is similar to <code>sh reindex.sh &lt;External_Access_Host&gt; -t &lt;tenant_id&gt; -s 2,1,3</code> but you only want to reindex the record types specified in steps 2 and 3. This is a partial reindex.</p>\n<p><strong>Note:</strong> Don't use <code>-c</code> along with <code>-s 2,3</code> because <code>-c</code> will remove all the indexed data.</p>\n</td>\n</tr>\n<tr>\n<td>Stop a previous index</td>\n<td><code>sh reindex.sh &lt;External_Access_Host&gt; --stop</code></td>\n<td>You want to stop a reindex already in progress.</td>\n</tr>\n<tr>\n<td>Get help</td>\n<td><code>sh reindex.sh -h</code></td>\n<td>\n<p>You are new to reindexing and want to learn more about it.</p>\n</td>\n</tr>\n</tbody>\n</table>\n<div> </div>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}