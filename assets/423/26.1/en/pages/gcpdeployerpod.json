{
  "title": "Deploy bootstrap",
  "content": "<div class=\"mw-parser-output\">\n<div></div>\n<table>\n<tbody>\n<tr>\n<th>Role</th>\n<th>Location</th>\n</tr>\n<tr>\n<td>Suite administrator</td>\n<td>Bastion node</td>\n</tr>\n</tbody>\n</table>\n<p>Before starting the bootstrap installation, you must copy the JSON key of the Compute Engine default service account into a file (for example, <code>key.json</code>) under the <b>OMT_External_K8s_2x.x-xxx</b> directory on the bastion node. To obtain the required JSON key, navigate to GCP Console &gt; <b>IAM &amp; Admin</b> &gt; <b>Service Accounts</b>, select the Compute Engine default service account, and click <b>Actions</b> &gt;<b> Create key</b> &gt; <b>JSON</b>.</p>\n<p>You will also need to allocate an external access hostname for the suite if you don't have one, see <a href=\"/doc/423/26.1/gcpsetip\" title=\"Set up IP and external access hostname\">Set up IP and external access hostname</a>.</p>\n<p>Now you can follow these steps to start the bootstrap installation:</p>\n<ol>\n<li>Log in to the bastion and navigate to the OMT installation directory:\n\t<pre>cd OMT_External_K8s_2x.x-xxx</pre>\n</li>\n<li>Run <strong>openssl vesion</strong> to check whether <strong>OpenSSL </strong>has been installed. If not, run the following command to install it.\n\t<pre>sudo yum install openssl</pre>\n</li>\n<li>Run the following command:\n\t<pre>./install --nfs-server &lt;nfs_server&gt; \\\n   --nfs-folder &lt;nfs_folder&gt; \\\n   --registry-url &lt;registry_url&gt; \\\n   --registry-username &lt;registry_username&gt; \\\n   --registry-orgname &lt;registry_orgname&gt; \\\n   --registry-password-file &lt;registry_password_file&gt; \\\n   --external-access-host &lt;external_access_host&gt; \\\n   --k8s-provider gcp \\\n   --system-user-id &lt;system_user_id&gt; \\\n   --system-group-id &lt;system_group_id&gt; \\\n   --loadbalancer-info \"LOADBALANCERIP=&lt;smax_static_ip&gt;\" \\\n   --db-user &lt;external_db_username&gt; \\\n   --db-password &lt;external_db_password&gt; \\\n   --db-url &lt;external_db_url&gt; \\\n   [--capabilities \"Tools=true,Monitoring=false,LogCollection=false,DeploymentManagement=true,ClusterManagement=false,K8sBackup=true\"]\n</pre>\n\twhere:\n\n\t<ul>\n<li><code>&lt;nfs_server&gt;</code>: The IP address of your created Filestore. Find it by navigating to the GCP Console&gt; <b>Filestore</b> &gt; your created Filestore instance <b>&gt; IP address </b>column.</li>\n<li><code>&lt;nfs_folder&gt;</code>: The exported NFS folder you created for \"core\" in Filestore. For example: <i>/&lt;fileshare-name&gt;/var/vols/itom/itsma/core</i>.</li>\n<li><code>&lt;registry_url&gt;</code>: <i><b>gcr.io</b></i>.</li>\n<li><code>&lt;registry_username&gt;</code> : <i><b>_json_key</b></i>.</li>\n<li><code>&lt;registry_orgname&gt;</code>: The project ID of the Google Cloud Registry where you store the suite images. It's your own project <strong>ID</strong>, which you can find by navigating to the GCP Console <b>Home</b> &gt; <b>Dashboard</b> &gt; <b>Project info &gt; Project ID</b>.</li>\n<li><code>&lt;registry_password_file&gt;</code>: The ful path where you saved the JSON key of the Compute Engine default service account. For example, /tmp/<code>key.json</code>.</li>\n<li><code>&lt;external_access_host&gt;</code>: The external access hostname allocated for the suite and bound with the load balancer's IP. See <a href=\"/doc/423/26.1/gcpsetip\" title=\"SMAX:25.1/GCPSetIP\">Set up IP and external access hostname</a>.</li>\n<li><code>&lt;system_user_id&gt;</code> and <code>&lt;system_group_id&gt;</code>: must be the same as the user ID and group ID that you specified when configuring NFS volumes (see <a href=\"/doc/423/26.1/gcpstorage#Configure_NFS_volumes\" title=\"Subscribe NFS Filestore\">Subscribe NFS Filestore</a>).</li>\n<li><code>&lt;smax_static_ip&gt;</code>: The static IP address <a href=\"/doc/423/26.1/gcpsetip\" title=\"you reserved for the suite\">you reserved for the suite</a>. For example: <code>--loadbalancer-info \"LOADBALANCERIP=192.0.2.1\"</code>.</li>\n</ul>\n<p>We strongly recommend that you use an <a href=\"/doc/423/26.1/gcpdatabase#Set_up_a_PostgreSQL_database_for_CDF_API_Server_on_the_instance\" title=\"external database for the OMT API Server\">external database for the OMT API Server</a> in a production environment. To do so, include the following parameters:</p>\n<ul>\n<li><code>&lt;external_db_username&gt;</code>: The login user name of the external database for the OMT API Server. For example, <em>cdfapiserver</em>.</li>\n<li><code>&lt;external_db_password&gt;</code>: The login password of the external database for the OMT API Server. For example, <em>mypassword</em>.</li>\n<li><code>&lt;external_db_url&gt;</code>: The DB URL for connections to the external database for the OMT API Server. For example, <i>jdbc:postgresql://db_private_ipv4_address:5432/cdfapiserverdb</i>.</li>\n</ul>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-important-icon\"></div><div class=\"admonition-content admonition-important-content\"><div><strong>Limitation:</strong>  OMT doesn't support SSL connections to the native Google PostgreSQL database in deployments on GKE. The native Google PostgreSQL server certificate doesn't include the required IP/FQDN for SSL connections to the native Google PostgreSQL database. Therefore, the connection (with sslmode=verify-full) can't be validated and the installation fails. To make OMT connect to the native Google PostgreSQL database with SSL mode after installation, see the solution <a href=\"https://cloud.google.com/sql/docs/postgres/configure-ssl-instance\" title=\"here\">here</a>.</div></div></div>\n</li>\n</ol>\n<p>The bootstrap installation command will ask you to set up a &lt;admin_password&gt; for <code>admin</code>. You will need it for the suite installation.<br/>\nAfter the command is run successfully, you should have a number of pods under the <i>core</i> namespace. The port 3000 should also be configured automatically.</p>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}