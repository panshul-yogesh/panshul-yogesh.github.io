{
  "title": "Uninstall the suite on GCP",
  "content": "<div class=\"mw-parser-output\"><br/><p>This topic explains how to remove the external Kubernetes (K8s) configurations and uninstall the suite on GCP. </p><table><tbody><tr><th>Role</th><th>Location</th></tr><tr><td>Suite administrator</td><td>Bastion node</td></tr></tbody></table><h2 id=\"Uninstall_Kubernetes_configurations\">Uninstall OMT</h2><p>Skip this section if you have not installed OMT for external K8s in your GCP environment. To uninstall OMT from your GCP environment, see <a href=\"/doc/406/25.4/uninstallext\" title=\" Uninstall OMT (external K8s)\"> Uninstall OMT (external K8s)</a>.</p><h2>Remove K8s configurations</h2><p>Remove external K8s configuraiton for your suite. For details, see <b>Uninstall Kubernetes configurations</b> in <a href=\"/doc/423/26.1/uninstallk8sdb#Uninstall_Kubernetes_configurations\" title=\"How to uninstall suite Kubernetes configurations and databases\">How to uninstall suite Kubernetes configurations and databases</a>. </p><h2 class=\"mw-headline\" id=\"Clean_up_volumes\">Cleanup PVs</h2><p>Clean up suite data on persistent volumes (PV). Refer to the instructions relevant to your PV type - Cloud Filestore or Persistent Disk.</p><h3>Cleanup PV on Cloud Filestore</h3><p>If you do not use Cloud Filestore for PV provisioning, skip this section.</p><p>To clean up suite data on Cloud Filestore, you must first make sure make sure that the NFS volumes are mounted to the bastion node.</p><p><u><strong>Check mount points</strong></u></p><div><span class=\"snippet-start\" data-sname=\"423-25.4-423-25.3-Check mount points\"></span><p>Make a note of the mount points used for the classic deployment in your environment. You will need it later for syncing data from classic to helm deployment. If the mount points in your environment is different from the mount points shown in the examples in this document, you may have to update the sample commands to suite your environment. To know the mount points in your environment, run the command <code>df-h</code>. The output from the command lists all the filesystems and their mount points. </p><p>In the following sample output from Azure environment that uses NetApp Files storage, the filesystems <strong>&lt;hostname&gt;:/generic</strong> and <strong>&lt;hostname&gt;:/smarta</strong> are mounted on <strong>/mnt/efs/generic</strong> and <strong>/mnt/efs/smarta, </strong>respectively. The mount points are listed under the <strong>Mounted on</strong> column:</p><p><code>#df -h</code><br/><br/><strong>Filesystem                        Size      Used      Avail      Use%      Mounted on</strong><br/>&lt;hostname&gt;:/generic      8.0E      318G       8.0E      1%         /mnt/efs/generic<br/>&lt;hostname&gt;:/smarta       8.0E      318G       8.0E      1%         /mnt/efs/smarta</p><span class=\"snippet-end\" data-sname=\"423-25.4-423-25.3-Check mount points\"></span></div><p>Complete the following steps to clean up the PV on Cloud Filestore.</p><ol><li>Copy and save the following script as <b>cleanSMANFS.sh</b> file on the bastion node, and replace the placeholder <em>&lt;MOUNT_POINT&gt;</em> with the mount point from your environment:\n\n\t<pre>#!/bin/bash\nshopt -s extglob\n# Edit as needed\nMOUNT_POINT=\"/mnt/nfs\"\nNFS_PARENT=\"var/vols/itom/itsma\"\n\nrm -rf ${MOUNT_POINT}/${NFS_PARENT}/*/*\nls -l ${MOUNT_POINT}/${NFS_PARENT}/*/\n</pre></li><li>Run the following commands to clean up the suite data in storage:\n\t<pre>chmod 755 cleanSMANFS.sh\nsudo ./cleanSMANFS.sh</pre></li></ol><h3>Cleanup PV on Peristent Disk </h3><p>If you do not use Peristent Disk for PV provisioning, skip this section.</p><p>To clean up suite data on Peristent Disk, you must manually delete the Peristent Disk.</p><ol><li>Run the following command to get a list of PVs that are using Peristent Disk. Make a note of the PVs that have the text <strong>pvc-</strong> prefixed to its name. These are the PVs to delete. For example, <strong>pvc-xxx-xx-xxx-xxxx. </strong><pre><code> kubectl get pv | grep &lt;disk_storageclass&gt;</code></pre></li><li>Log in to Google Cloud console and go to <b>Storage </b>&gt; <strong>Disks</strong>.<strong> </strong></li><li>Delete the disks you listed in the earlier step.</li></ol><h2 id=\"Clean_up_the_suite_databases\">Cleanup suite databases</h2><p>For instructions to cleanup suite databases, see <a href=\"/doc/423/26.1/uninstallk8sdb#Clean_up_the_suite_databases\" title=\"Clean up the suite databases\">Clean up the suite databases</a>.</p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}