{
  "title": "Install an ESM patch",
  "content": "<div class=\"mw-parser-output\">\n \n\n<div><span style=\"font-size: 14px;\">This page contains the steps to apply a patch to an ESM Helm chart deployment using either OMT's embedded Kubernetes or a managed Kubernetes. For detailed information about fixed issues, patch name, and download link, see the corresponding patch release notes.</span></div>\n<h2 id=\"Back_up\"><a id=\"Back_up\" name=\"Back_up\" title=\"Back up\"></a>Back up</h2>\n<p>You can back up the system by using Velero. For details, see <a href=\"/doc/423/26.1/smabackupprocedure\" title=\"SMA backup procedure\">SMA Backup Procedure</a>.</p>\n<h2 id=\"Install\"><a id=\"Prepare\" name=\"Prepare\" title=\"Prepare\"></a>Prepare</h2>\n<p>Follow these steps to prepare for the installation:</p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Download the patch package <strong>ESM_Helm_Chart-2x.x.x.zip</strong>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Run the following command to unzip the package:\n\t<pre>unzip <code>ESM_Helm_Chart-2x.x.x.zip </code>-d ESM_Helm_Chart-2x.x.x</pre>\n\tThe unzipped file contains the following files:\n\n\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\"><strong>esm-1.x.x+2x.x.x.zip</strong>: Contains the suite installation package.</li><li style=\"margin-left: 40px; position: relative;\"><strong>esm-1.x.x+2x.x.x.zip.sig</strong>: The signature file to verify the package.</li></ul>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">(Optional) Verify the ESM helm package. Skip this step if you don't want to verify the package.\n\t<p start=\"1\" style=\"list-style-type: lower-alpha;\">Visit <a href=\"https://portal.microfocus.com/s/article/KM000003948?language=en_US\" title=\"KM000003948\">KM000003948</a> to download the <strong>ot-package-sign.pub</strong> key and follow the instructions in the doc to verify the ESM helm package.</p>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Run the following command to unzip the <strong>esm-1.x.x+2x.x.x.zip</strong> file:\n\t<pre>cd ESM_Helm_Chart-2x.x.x\nunzip <code>esm-1.x.x+2x.x.x.zip</code></pre>\n<p>The unzipped file contains the following files:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">\n<div><strong>charts</strong>: Contains files you need for the ESM patch installation, <strong>esm-1.x.x+2x.x.x.tgz</strong> and <strong>esm-1.x.x+2x.x.x.tgz.prov</strong>.</div>\n</li><li style=\"margin-left: 40px; position: relative;\">\n<div><strong>samples</strong>: Contains a values.yaml sample. This sample file includes the definition for each key to help you in the customization of your <strong>values.yaml</strong> file.</div>\n</li><li style=\"margin-left: 40px; position: relative;\">\n<div><strong>scripts</strong>: Contains configuration and installation scripts.</div>\n</li></ul>\n</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Prepare the container images by following the instructions in <a href=\"/doc/423/26.1/uploadimagestoexternalregistryhelm#Download_the_OMT_and_suite_images\" title=\"Download the suite images\">Download the suite images</a>.</li></ol>\n<h2 tabindex=\"-1\"><a id=\"Install\" name=\"Install\" title=\"Install\"></a>Install</h2>\n<p>Use the steps in this section to install the patch according to your deployment.</p>\n<h3><a id=\"Install_with_CLI\" name=\"Install_with_CLI\" title=\"Install with CLI\"></a>Install with CLI</h3>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">[Optional] If you don't remember the path of your custom <strong>my-values.yaml</strong> file, get your yaml file by running the following command on a control plane node or the bastion node:\n\n\t<pre> helm get values &lt;ESM_RELEASE_NAME&gt; -n &lt;ESM_NAMESPACE&gt; &gt; my-values.yaml</pre>\n<p>Where:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\"><strong>&lt;ESM_NAMESPACE&gt;</strong> is the unique namespace of the ESM Helm chart deployment.</li><li style=\"margin-left: 40px; position: relative;\"><strong>&lt;ESM_RELEASE_NAME&gt;</strong> is the release name, which you can obtain by using the following command:\n\t\t<pre>helm list -n &lt;ESM_NAMESPACE&gt; | awk '{print $1}'</pre>\n</li></ul>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Run the following commands to apply the patch:\n\t<pre>helm upgrade &lt;ESM_RELEASE_NAME&gt; &lt;ESM_CHART_FILE&gt; -n &lt;ESM_NAMESPACE&gt; -f my-values.yaml</pre>\n<p>Where <strong>&lt;ESM_CHART_FILE&gt;</strong> is the tar file in the extracted patch package containing the installation file. This file is located in the <strong>charts </strong>folder.</p>\n</li></ol>\n<h3><a id=\"Install_with_AppHub\" name=\"Install_with_AppHub\" title=\"Install with AppHub\"></a>Install with AppHub</h3>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Sign in to AppHub.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Upload the ESM application chart (the .tgz file and the .prov file at a time). If you upload more than one application, the upload fails with a warning.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Go to <strong>Deployments</strong>. The ESM deployment will have a highlighter indicating an upgrade is available.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click the actions menu and select <strong>Upgrade</strong>.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">From the drop-down list, select the version of the chart to which you want to upgrade.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <strong>Configure</strong>.\n\t<div class=\"admonition\"><div class=\"admonition-icon admonition-important-icon\"></div><div class=\"admonition-content admonition-important-content\"><div>\n<p>While upgrading, don't enable any new capabilities. You can enable new capabilities after the upgrade.</p>\n</div></div></div>\n</li><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">You will see all values that you configured in your previous deployment in the <strong>General</strong>, <strong>Capabilities</strong>, <strong>Security</strong>, <strong>Databases</strong>, <strong>Integrations</strong>, and <strong>Advanced </strong>sections. Review each category tab in the side menu to ensure that you have configured all the required parameters.\n\t<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<p>You will see an \"<strong>X</strong>\" marked for the <strong>Databases </strong>tab. Go to this tab and click <strong>Verify to</strong> validate all the database connections to proceed with <strong>Upgrade</strong>. </p>\n</div></div></div>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">A tab with an X icon (   <a class=\"image\" href=\"\"> <img alt=\"X icon\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/3/3c/apphub_x_icon.png\" hspace=\"0\" src=\"../../../images/apphub_x_icon_03cd04cf.png\" style=\"width:17px;height:17px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\"/> </a>   )  icon indicates that one or more parameters are incomplete or invalid.  </li><li style=\"margin-left: 40px; position: relative;\">A tab with a check mark (   <a class=\"image\" href=\"\"> <img alt=\"check icon\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/a/aa/apphub_check_icon.png\" hspace=\"0\" src=\"../../../images/apphub_check_icon_a65a88c3.png\" style=\"width:20px;height:19px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\"/> </a>   ) indicates that all parameters are complete and valid.</li><li style=\"margin-left: 40px; position: relative;\">A new icon (  <a class=\"image\" href=\"\"> <img alt=\"new\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/0/06/apphub_new.png\" hspace=\"0\" src=\"../../../images/apphub_new_3f84e44b.png\" style=\"width:42px;height:19px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\"/> </a>  ) appears on a category tab when new parameters are available. A banner also appears at the top of the dialog box and the new icon appears at the top of the group that contains the new parameters.  </li><li style=\"margin-left: 40px; position: relative;\">A preview icon (  <a class=\"image\" href=\"\"> <img alt=\"preview\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/e/e0/apphub_preview.png\" hspace=\"0\" src=\"../../../images/apphub_preview_6cda1e7a.png\" style=\"width:78px;height:19px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\"/> </a>  ) appears at the top of the group when a parameter in the group is fully functional, but not recommended for use in a production environment yet. </li></ul>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Once you have all the configurations in place, the sidebar for all the tabs will show a \"✔\" mark.\n\t<div class=\"admonition\"><div class=\"admonition-icon admonition-tip-icon\"></div><div class=\"admonition-content admonition-tip-content\"><div>If you want to upgrade later, you can save your configurations as a draft. For details, see <a href=\"/doc/406/26.1/saveasdraft\" target=\"_blank\" title=\"Draft deployments\">Save a draft application configuration</a>.</div></div></div>\n</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <strong>Upgrade</strong>.\n\t<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>You can check the deployment status from the <strong>View details </strong>tab.</div></div></div>\n</li><li style=\"--number-width: 19px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Check the <strong>Open Text End User License Agreement </strong>and then click <strong>OK</strong>.</li><li style=\"--number-width: 17px; --number-spacing: 24px; margin-left: 36px; position: relative;\">You must wait until the deployment status moves to <strong>Deployed</strong>. Once the deployment is successful, check the pod status in CLI.</li></ol>\n<h2 id=\"Verify\" tabindex=\"-1\"><a id=\"Verify\" name=\"Verify\" title=\"Verify\"></a>Verify</h2>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Run the following command to make sure all job resources are complete. If complete, it should return <strong>COMPLETIONS are 1/1</strong><em>.</em>\n<pre>kubectl get job -n &lt;ESM_NAMESPACE&gt;</pre>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Run the following command to make sure that all the pods are ready:\n\t<pre><code>kubectl get pod -n &lt;ESM_NAMESPACE&gt; |grep -v 1/1|grep -v 2/2|grep -v 3/3|grep -v 4/4|grep -v Complete | grep -v sma-approle-secret| grep -v upgrade-tenants</code></pre>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Confirm you can access this URL as suite-admin: https://&lt;EXTERNAL_ACCESS_HOST&gt;/bo.</li></ol>\n</div>",
  "modifiedon": "2026-02-02 07:34:29"
}