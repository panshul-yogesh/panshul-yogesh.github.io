{
  "title": "Implement an in-house article retriever plugin",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>To package articles from a custom knowledge base, you need to implement an article retriever. An article retriever is a Java class that implements the com.hp.saw.upload.ArticleRetriever interface. The retriever reads the contents of the articles from the knowledge base and formats them as com.hp.saw.upload.Article objects. </p>\n<p>For an example, see the default java implementations, found in the <strong>&lt;Packaging_tool_deployment&gt;/saw-article-packaging-tool/src</strong> folder:<br/>\n<strong>com.hp.saw.upload.folder.FolderArticleRetriever</strong> and <strong>com.hp.saw.upload.folder.FileSystemArticle</strong>. </p>\n<p>The knowledge packaging tool source code is found in the same folder in the <strong>/upload</strong> folder.</p>\n<p>To implement the retriever plugin and package the retrieved files:</p>\n<ol>\n<li>Implement the Java interface com.hp.saw.upload.ArticleRetriever (provided in the JAR file). This interface requires implementing the getArticles() method, which returns Article objects that represent your knowledge articles.\n\t<p><strong>ArticleRetriever interface source code</strong></p>\n<div class=\"Admonition_Note\"><span class=\"autonumber\">Note</span> Located in <strong>&lt;Packaging_tool_deployment&gt;/saw-article-packaging-tool/src</strong>.</div>\n<pre><code>public interface ArticleRetriever {\n\n    /**\n     * This method initializes the retriever with arguments from the packager command line –\n     * this enables the YOUR retriever implementation to get external parameters for identifying\n     * the article source such as database connections, folder path etc\n     *\n     * @param retrieverArgs list of params\n     */\n    void init(List&lt;String&gt; retrieverArgs);\n\n    /**\n     * This method should return a list of Article objects. Each article represents a document which will\n     * be used in ESS system.\n     * @return a list of Article objects having an id, title and content.\n     */\n    List&lt;Article&gt; getArticles();\n}</code></pre>\n</li>\n<li>Implement the Article interface. An article represents a single HTML-formatted document from your knowledge base.\n\t<p><strong>Article interface source code</strong></p>\n<pre><code>public interface Article {\n\n\t/**\n\t * Method for retrieving the Article's id string.\n\t *\n\t * @return the id string of the article.\n\t */\n    String getId() ;\n\n\t/**\n\t * Method for retrieving the Article's title.\n\t *\n\t * @return the title of the article.\n\t */\n    String getTitle();\n\n\t/**\n     * Method for retrieving the Article's serviceDefinitionDisplayLabel.\n     *\n     * @return the serviceDefinitionDisplayLabel of the article.\n     */\n    String getServiceDefinitionDisplayLabel();\n\n\tString getSubType();\n\n\tString getCategory();\n\n\tString getDescription();\n\n\t/**\n\t * Method for retrieving the Article's content.\n\t *\n\t * @return the content of the article.\n\t */\n    String getContent();\n\n    /**\n     * Method for setting the Article's serviceDefinitionDisplayLabel.\n     *\n     * @param serviceDefinitionDisplayLabel the author of the article.\n     */\n    void setServiceDefinitionDisplayLabel(String serviceDefinitionDisplayLabel);\n\n\tvoid setSubType(String subType);\n\n\tvoid setCategory(String category);\n\n\tvoid setDescription(String description);\n\n\t/**\n\t * Method for retrieving the Article's author.\n\t *\n\t * @return the author of the article.\n\t */\n    String getAuthor() ;\n\n\t/**\n\t * Method for setting the Article's author.\n\t *\n\t * @param author the author of the article.\n\t */\n    void setAuthor(String author);\n\n\t/**\n\t * Method for retrieving the Article's creation time.\n\t *\n\t * @return the creation time of the article.\n\t */\n    Date getCreatedTime();\n\n\t/**\n\t * Method for setting the Article's creation time.\n\t *\n\t * @param createdTime the creation time of the article.\n\t */\n    void setCreatedTime(Date createdTime);\n\n\t/**\n\t * Method for retrieving the Article's last modification time.\n\t *\n\t * @return the last modification time of the article.\n\t */\n    Date getLastModifiedTime() ;\n\n\t/**\n\t * Method for setting the Article's last modification time.\n\t *\n\t * @param lastModifiedTime the last modification time of the article.\n\t */\n    void setLastModifiedTime(Date lastModifiedTime);\n\n\t/**\n\t * Method for retrieving the Article's tags.\n\t *\n\t * @return the tags of the article (as a List of Strings).\n\t */\n    Set&lt;String&gt; getTags();\n\n\t/**\n\t * Method for setting the Article's tags.\n\t *\n\t * @param tags the tags of the article (List of Strings).\n\t */\n    void setTags(Collection&lt;String&gt; tags);\n\n\n    /**\n     * When an &lt;img&gt; or &lt;video&gt; tag pointing to an image or video is found, this method is called to create a real URL representation of the resource.\n     * The package tool will try to execute the URL.connect method to retrieve the resource and store it offline with the package.\n     * @param url a url string found in the Article content\n     * @return  A URL object that represents a real resource\n     * @throws  MalformedURLException  description\n     */\n    URL resolveResourceURL(String url) throws MalformedURLException;\n\n\n    /**\n     * When an &lt;a&gt; tag is found in this article, this method is called with the value of the href attribute. If the &lt;a&gt; link references another article, the other article ID should be returned.\n     * Otherwise, if null is returned, it means the identified link is not referencing another article and is assumed to be pointing to an external resource.\n     * Hence, the link will remain unchanged.\n     * @param href reference to another article\n     * @return an ID of another Article or null if the link is not referencing another article\n     */\n    String resolveReferencedArticleId(String href);\n\n    /**\n     * Get the charset to use in order to read the article from file.\n     * If a Charset is not provided by the Article implementation. If you are using the FileSystemArticle\n     * it will try to find it automatically by looking at the &lt;meta&gt; tag\n     * @return  Charset\n     */\n    Charset getCharset();\n}</code></pre>\n<div class=\"Admonition_Note\"><span class=\"autonumber\">Note</span> Use Java 7 to compile your implementation.</div>\n</li>\n<li>Package your compiled retriever code as a JAR file or in a folder structure. For example:\n\t<pre><code>com/myretriever/MyRetrieverImpl.class</code></pre>\n</li>\n<li>Put the following files in the &lt;Packaging_tool_deployment&gt;/user_impl folder:\n\t<ul>\n<li>The JAR file or folder that contains your classes</li>\n<li>The implementation class of the ArticleRetriever interface</li>\n<li>Additional JAR files that your implementation requires—for example, third-party JARs</li>\n</ul>\n</li>\n<li>Open a command line prompt, and change to the saw-article-packager-tool folder:\n\t<pre><code>cd &lt;Packaging_tool_deployment&gt;/saw-article-packager-tool</code></pre>\n</li>\n<li>To run the Knowledge Packaging tool with the retriever plugin, run article_packager.bat with the following parameters:\n\t<pre><code>article_packager.bat [-options] parameters</code></pre>\n<p>where <strong>-options</strong> can be:</p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n<thead>\n<tr>\n<th scope=\"col\">Option</th>\n<th scope=\"col\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-destination<br/>\n\t\t\t\t&lt;Destination folder&gt;</td>\n<td>If no option is provided, an out folder is created in the packaging<br/>\n\t\t\t\ttool folder.</td>\n</tr>\n<tr>\n<td>-retriever &lt;Fully<br/>\n\t\t\t\tqualified name of Class implementing the<br/>\n\t\t\t\tArticleRetriever<br/>\n\t\t\t\tinterface&gt;</td>\n<td>If no class is provided, the default retriever folder is used.</td>\n</tr>\n<tr>\n<td>-override</td>\n<td>This option overwrites the previous packaged zip file.</td>\n</tr>\n<tr>\n<td>parameters</td>\n<td>This is a list of string arguments that will be passed as-is to the<br/>\n\t\t\t\tJava class referenced by the retriever option. The only<br/>\n\t\t\t\tparameter required for the retriever folder (default) is a root folder<br/>\n\t\t\t\tpath in which HTML files are read as articles.</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>After you run the packaging tool:</p>\n<ol start=\"1\">\n<li>\n<p>Open and review the log files that were created and check for errors. The log files are located in the <strong>Packaging_tool_deployment&gt;\\saw-article-packager-tool\\logs</strong> folder:</p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n<thead>\n<tr>\n<th scope=\"col\">Log file</th>\n<th scope=\"col\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>error.log</td>\n<td>Includes information about errors in the packaging process</td>\n</tr>\n<tr>\n<td>info.log</td>\n<td>Includes information about the packaging process</td>\n</tr>\n<tr>\n<td>summary.log</td>\n<td>Includes the following information:\n\t\t\t\t\t<ul>\n<li>The number of articles that were created.</li>\n<li>The IDs of the articles that were skipped and the reason for each.</li>\n<li>The URLs of the images that could not be extracted and the reason for each. The IDs of the affected articles are also listed.</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>Extract and explore the contents of the <strong>knowledge-articles.zip</strong> file. The <strong>knowledgearticles.zip</strong> file contains the following structure:\n\t\t<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n<thead>\n<tr>\n<th scope=\"col\">Folder/file</th>\n<th scope=\"col\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>articles</td>\n<td>Contains the output knowledge articles.<br/>\n\t\t\t\t\tThe title of each article is placed under the &lt;head&gt;&lt;title&gt; tag in the HTML. The names of the files are generated as part of the conversion<br/>\n\t\t\t\t\tprocess, and are all located in the same folder with unique names.\n\t\t\t\t\t<ul>\n<li>file1.html</li>\n<li>file2.html</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>resources</td>\n<td>Contains images that are embedded in the knowledge articles.</td>\n</tr>\n<tr>\n<td>metadata.xml</td>\n<td>For example, title, author, or tags for each article, as well as each knowledge article's external ID.<br/>\n\t\t\t\t\tThe external IDs are required in the future if a knowledge article needs to be overwritten.</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>Open the HTML files to check that everything was implemented as you expected, including embedded images appearing properly, and that links between knowledge articles are working.\n\t\t<div class=\"Admonition_Note\"><span class=\"autonumber\">Note</span> If you rerun the batch and a <strong>knowledge-articles.zip</strong> file already exists, an additional ZIP file is created with a sequential number appended to the name. If, however, you used the <strong>-override</strong> option, the <strong>knowledge-articles.zip</strong> file is overwritten each time.</div>\n</li>\n</ol>\n</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}