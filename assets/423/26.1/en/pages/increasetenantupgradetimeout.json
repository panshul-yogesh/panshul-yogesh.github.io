{
  "title": "The itom-xruntime-upgrade-tenants pod fails",
  "content": "<div class=\"mw-parser-output\">\n<p>The <code>itom-xruntime-upgrade-tenants</code> pod fails, and you can find the following or a similar error message in the log file.</p>\n<p><i>2025-05-15T10:32:23.227+0200 INFO ThreadPoolExecutor-0_3-140391310456384 Round No.90 - tenant 477204788, actualStatus is Upgrade, initialStatus is Active, upgradeStatus is RUNNING, content version is v29</i></p>\n<p><i>2025-05-15T10:32:23.228+0200 ERROR ThreadPoolExecutor-0_3-140391310456384 Round No.90 - Tenant 477204788 upgrade content failed!</i></p>\n<h2><a id=\"Cause\" name=\"Cause\" title=\"Cause\"></a>Cause</h2>\n<div>The default timeout and backOffLimit settings in the suite-upgrade-tenant job were inadequate for handling upgrades of instances with large data volumes.</div>\n<h2><a id=\"Solution\" name=\"Solution\" title=\"Solution\"></a>Solution</h2>\n<p>Make the <code>TENANT_UPGRADE_TIMEOUT_MINUTE</code>  and <code>backOffLimit</code> configurable.</p>\n<p>To customize the xruntime-upgrade-tenants job execution resiliency, follow the steps:</p>\n<p>Step 1: Create a custom YAML named <code>itom-xruntime-upgrade-tenants.yaml</code>, configure <code>backoffLimit</code> as 6 (or as needed) and <code>tenantUpgradeTimeoutMinute</code> as 360(or as needed)</p>\n<pre><code class=\"language-yaml\">xruntime:\n  xruntime-upgrade-tenants:\n    deployment:\n      upgradeTenant:\n        backoffLimit: 6\n        tenantUpgradeTimeoutMinute: 360</code></pre>\n<p>Step 2: Run the following command to export or use the existing values.yaml of the itsma installation</p>\n<p>              </p>\n<pre><code> helm get values &lt;release-name&gt; -n &lt;name-space&gt; -o yaml &gt; itsma.yaml</code></pre>\n<p>Step 3: Run the following command to retry the upgrade with the customized xruntime-upgrade-tenants config</p>\n<p>              </p>\n<pre><code> helm upgrade &lt;release-name&gt; esm-chart.tgz -n &lt;name-space&gt;  -f itsma.yaml -f itom-xruntime-upgrade-tenants.yaml</code></pre>\n<p>                 Example:  <code>helm upgrade sma esm-chart.tgz -n itsma -f sma-values.yaml -f itom-xruntime-upgrade-tenants.yaml</code></p>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}