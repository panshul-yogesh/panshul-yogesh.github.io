{
  "title": "Install Audit collector on OpenShift",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>This section provides the steps required to install the Audit collector.</p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">Install and configure Audit collector in each of the namespaces that contain the Audit producer services, for example, Service Management and UCMDB. Audit collector requires the Audit producer file system and it will use the Audit producer PVC and subpath. </div>\n</div>\n<h2>Generate vault secrets</h2>\n<p>To generate vault secrets for the Audit collector chart, perform the following steps on the bastion node:</p>\n<ol>\n<li>\n<p>Run the following command:</p>\n<pre>$CDF_HOME/scripts/gen_secrets.sh -n &lt;Audit Producer Namespace&gt; -c &lt;Audit Collector Chart File&gt; -o &lt;Secrets YAML File&gt;</pre>\n<p>where,</p>\n<p><em>&lt;Audit Audit Producer Namespace&gt;</em> is the namespace in which the Audit Producer (for example, Service Management or UCMDB) is running.<br/>\n<em>&lt;Audit Collector Chart File&gt;</em> is the tar file containing the Audit collector installation charts (<strong>audit-collector-&lt;version&gt;.tgz</strong>).<br/>\n<strong>&lt;Secrets YAML File&gt;</strong> is the YAML file that stores the Audit collector secrets. Specify the file name (for example, <strong>audit-collector-secrets.yaml</strong>), and then the script will generate this YAML file after you run the script. You will need to use this file when you run the command to install the Audit collector.</p>\n<p>For example,</p>\n<pre>/root/cdf/scripts/gen_secrets.sh -n itsma-cfpni -c audit-collector-&lt;version&gt;.tgz -o audit-collector-secrets.yaml</pre>\n</li>\n<li>\n<p>The vault secret utility prompts you for the Audit collector integration user password: <strong>audit_collector_integration_user_pass_key</strong>.</p>\n</li>\n</ol>\n<h2>Install</h2>\n<p>To complete the deployment, you will need to install the Audit collector.</p>\n<p>To install Audit collector, run the following command:</p>\n<pre>$helm install &lt;Audit Collector Release Name&gt; &lt;Audit Collector Chart&gt; -n &lt;Audit Producer Namespace&gt; -f values.yaml -f audit-collector-secrets.yaml --set-file \"caCertificates.cert_one\\.crt\"=/path/to/cert_one.crt --set-file \"caCertificates.cert_two\\.crt\"=/path/to/cert_two.crt\n</pre>\n<p>where,</p>\n<p><em>&lt;Audit Collector Release Name&gt; </em>is the unique release name that you need to specify for the Audit collector deployment. You need to use the same release name as specified here when you upgrade the Audit collector in the future.<em> </em><br/>\n<em>&lt;Audit Collector Chart&gt;</em> is the tar file containing the Audit collector installation charts.<br/>\n<em>&lt;Audit Producer Namespace&gt;</em> is the namespace where the Audit producer is running.<br/>\n<em>&lt;Values YAML File&gt;</em> is your <b>values.yaml </b>file with properties configured for the Audit collector deployment.<br/>\n<em>&lt;Audit Collector Secrets YAML file&gt;</em> is the file that gen_secret script generates and holds the Audit collector secrets.<br/>\nYou can pass certificates using the <code>--set-file</code> option. In the following example, you can see the suite and Audit service engine certificates.</p>\n<p>For example:</p>\n<pre>$helm install audit-collector audit-collector-&lt;version&gt;.tgz -n itsma-cfpni -f values.yaml -f audit-collector-secrets.yaml --set-file \"caCertificates.idm\\.crt\"=idm.crt --set-file \"caCertificates.auditservice\\.crt\"=ase.crt</pre>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}