{
  "title": "Install a UD/UCMDB patch (embedded Kubernetes)",
  "content": "<div class=\"mw-parser-output\">\n \n\n<div>\n<p>This page contains the steps to apply a UD/UCMDB patch to an on-premises environment. For detailed information about fixed issues, patch name, and download link, see the corresponding patch release notes.</p>\n<div>\n<div>The UD/UCMDB GA version update includes a class model update, which may take hours to complete in the backend. To ensure a smooth class model update, either perform the patch version update at least one day<strong> </strong>after the GA version update, or you can directly upgrade to the latest patch version if you haven't already upgraded to the GA version.</div>\n</div>\n<h2><a id=\"Back_up\" name=\"Back_up\" title=\"Back up\"></a>Back up</h2>\n<p>To back up your UD/UCMDB deployment, see<a href=\"/doc/423/26.1/backupcms\" title=\"Back up containerized UD/UCMDB deployment\"> Back up containerized UD/UCMDB deployment</a>.</p>\n<h2><a id=\"Install_patch\" name=\"Install_patch\" title=\"Install patch\"></a><a id=\"Install\" name=\"Install\" title=\"Install\"></a>Install patch</h2>\n<p>To install a UD/UCMDB patch, follow these steps:</p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p>Extract the downloaded package and obtain the patch file (<strong>ucmdb-1.nn.n-nnn+2n.n.n.tgz</strong>) from the<b> \\ucmdb-helm-charts-2n.n\\ucmdb-helm-charts\\charts</b> directory.</p>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p>Prepare the container images by following the instructions in <a href=\"/doc/423/26.1/cmswithsmaxdownloadcontainerimages\" title=\"Download container images for UD/UCMDB\">Download container images for UD/UCMDB</a>.</p>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p>Run the following command to apply the patch:</p>\n<pre>helm upgrade <em>&lt;UD/UCMDB RELEASE NAME&gt;</em> <em>&lt;UD/UCMDB CHART FILE&gt;</em> -n <em>&lt;UD/UCMDB NAMESPACE&gt;</em> -f <em>&lt;VALUES YAML FILE&gt;</em></pre>\n<p><em><code>&lt;UD/UCMDB RELEASE NAME&gt;</code></em> is the release name, which you can obtain by using the following command:</p>\n<pre>helm list -n &lt;UD/UCMDB NAMESPACE&gt; | awk '{print $1}'</pre>\n<p><em><code>&lt;UD/UCMDB CHART FILE&gt;</code></em> is <strong>ucmdb-1.nn.n-nnn+2n.n.n.tgz</strong> in this patch.<br/>\n<code>&lt;<em>UD/UCMDB NAMESPACE</em>&gt;</code> is the unique namespace of the UD/UCMDB deployment.</p>\n<p><code>&lt;<em>VALUES YAML FILE</em>&gt;</code> is your custom <strong>my-</strong><b>values.yaml </b>file with properties configured for the current UD/UCMDB deployment. If you don't remember the path of your custom <strong>my-values.yaml</strong> file, run the following command to create a copy of that file in the current directory:</p>\n<pre>helm get values <em>&lt;UD/UCMDB RELEASE NAME&gt;</em> -n <em>&lt;UD/UCMDB NAMESPACE&gt;</em> &gt; my-values.yaml</pre>\n</li></ol>\n<h2><a id=\"Verify\" name=\"Verify\" title=\"Verify\"></a>Verify</h2>\n<p>Run the following command to verify the correct chart and app version are deployed.</p>\n<pre>helm list -n <em>&lt;UD/UCMDB NAMESPACE&gt;</em></pre>\n<p>In the returned result, check CHART and APP VERSION, for example,</p>\n<pre>NAME             NAMESPACE     REVISION      UPDATED      STATUS        CHART                  APP VERSION\n&lt;RELEASE NAME&gt;   &lt;NAMESPACE&gt;    2                         deployed      <strong>cms-1.n.n+2n.n.n-nnn      2n.n.Pn</strong></pre>\n<h2><a id=\"Roll_back\" name=\"Roll_back\" title=\"Roll back\"></a>Roll back</h2>\n<p>This patch supports rollback.</p>\n<p>To roll back the patch, follow these steps:</p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">List revision numbers of the release by running the following command:\n\t<pre>helm history <em>&lt;UD/UCMDB RELEASE NAME&gt; </em>-n <em>&lt;UD/UCMDB NAMESPACE&gt;</em></pre>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p>Roll back the patch and revert to a previous revision number:</p>\n<pre>helm rollback <em>&lt;UD/UCMDB RELEASE NAME&gt;</em> -n <em>&lt;UD/UCMDB NAMESPACE&gt;</em> <em>&lt;REVISION NUMBER&gt;</em></pre>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Run the following patch command:\n\t<pre>kubectl patch secret nginx-default-secret -n &lt;ucmdb_namespace&gt; -p \"{ \\\"metadata\\\": { \\\"annotations\\\": { \\\"meta.helm.sh/release-name\\\": \\\"&lt;ucmdb_releasename&gt;\\\", \\\"meta.helm.sh/release-namespace\\\": \\\"&lt;ucmdb_namespace&gt;\\\" }, \\\"labels\\\":{ \\\"app.kubernetes.io/managed-by\\\": \\\"Helm\\\" } } }\"</pre>\n</li></ol>\n</div>\n</div>",
  "modifiedon": "2026-02-02 07:34:29"
}