{
  "title": "Install and configure Vertica database",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>If you plan to install Cloud Management Platform (CMP) FinOps, you must install and configure the Vertica database as a prerequisite.</p>\n<h2>Create a Vertica cluster</h2>\n<p>You can install by creating a Vertica cluster using a CloudFormation template and step-by-step wizards in MC, or manually deploy it using an Amazon Machine Image (AMI) that has Vertica installed when you create your instances. <a href=\"https://www.vertica.com/docs/12.0.x/HTML/Content/Authoring/Eon/EonModeLandingPage.htm\" target=\"_blank\">Eon Mode databases</a> are currently only supported on AWS resources.</p>\n<p>For the AWS-specific installation procedure, see <a href=\"https://www.vertica.com/docs/12.0.x/HTML/Content/Authoring/UsingVerticaOnAWS/InstallingAndRunningVerticaOnAWSTheDetailedProcedure.htm\" target=\"_blank\">Deploy AWS Instances for your Vertica Database Cluster</a>.</p>\n<p>For information on configuring a Vertica database, see <a href=\"https://www.vertica.com/docs/12.0.x/HTML/Content/Authoring/Security/TLS/GeneratingCertificatesAndKeys.htm\" target=\"_blank\">Generating TLS Certificates and Keys</a>.</p>\n<h2>Configure Vertica</h2>\n<p><span style=\"color: rgb(0, 0, 0); font-family: Roboto, sans-serif; font-size: 20px;\">Set up an AWS network load balancer (NLB) for the Vertica cluster</span></p>\n<p>Once you have set up a Vertica cluster, Vertica recommends putting an AWS NLB in front of your Vertica cluster. This section describes how to configure an NLB.  </p>\n<h4>Create a target group</h4>\n<ol>\n<li>In the AWS Management Console, navigate to the AWS EC2 for the region where you have deployed the Vertica cluster.</li>\n<li>Under <strong>Load Balancing</strong>, click <strong>Target Groups</strong>.</li>\n<li>Click<strong> Create Target Group.</strong></li>\n<li>Select the<strong> Instances </strong>target type.</li>\n<li>Enter a value for<strong> Target group name.</strong> For example, enter <strong>vertica-target-group.</strong></li>\n<li>Select<strong> Protocol TCP </strong>and<strong> Port 5433</strong>.</li>\n<li>Select the same VPC that you used to deploy the Vertica cluster.</li>\n<li>Select <strong>TCP</strong> for<strong> Health check</strong>.</li>\n<li>Leave advanced settings as the default.</li>\n<li>Click <strong>Next</strong>.</li>\n<li>From the<strong> </strong>Vertica instance list, select the ones with <strong>key-pair</strong> in them. Don't select the management console.</li>\n<li>For ports of the selected instances, keep the value of <strong>5443</strong>.</li>\n<li>Click<strong> Include as Pending below</strong>.</li>\n<li>Click<strong> Create target group</strong>.<br/>\n\tOnce done, you will have a new target group created.</li>\n</ol>\n<h4>Create a load balancer</h4>\n<ol>\n<li>On the left side, select <strong>Load Balancing </strong>and<strong> </strong>click<strong> Load Balancers</strong>.</li>\n<li>Click<strong> Create load balancer</strong>.</li>\n<li>Select<strong> NLB </strong>and<strong> </strong>click<strong> Create</strong>.</li>\n<li>Enter a<strong> </strong>name for the<strong> </strong>load balancer. For example, enter <strong>vertica-nlb.</strong></li>\n<li>Select<strong> Internet-facing</strong>.</li>\n<li>Select<strong> IPv4</strong>.</li>\n<li>Select the same VPC<strong> </strong>that you used to deploy the Vertica cluster.</li>\n<li>Within<strong> Mappings, </strong>select the same availability zone as you did for your EC2 instance. Select also the same subnet you've been selecting once you select the<strong> </strong>availability zone.</li>\n<li>For <strong>Listeners and routing</strong>, select <strong>TCP</strong> for <strong>Protocol</strong>, <strong>5443</strong> for <strong>Port</strong>,<strong> </strong>and the target group you earlier created for <strong>Forward</strong> <strong>to</strong>.</li>\n<li>Click <strong>Create load balancer</strong>.</li>\n<li>Observe that the load balancer is available.</li>\n<li>Select the load balancer.</li>\n<li>Make a note of the DNS name as you will need it later in the Vertica database connection settings configuration during the suite installation (you will need to enter this DNS name as the Vertica hostname). </li>\n</ol>\n<p>You've now completed Vertica installation, database creation, and load balancer setup.</p>\n<h3>Configure connection settings</h3>\n<p>Run the following commands as a database admin to configure connection settings on Vertica:</p>\n<p>These two changes will help with timeouts between the load balancer and Vertica nodes and also increase the maximum client sessions from 50 to 150 per node.  </p>\n<pre><code>ALTER DATABASE DEFAULT SET KeepAliveIdleTime = 250;\nALTER DATABASE DEFAULT SET MaxClientSessions = 150;</code></pre>\n<h3></h3>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}