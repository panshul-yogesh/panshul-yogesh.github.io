{
  "title": "Integrate with LDAP",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>Person and group records can be synchronized from an LDAP compatible server to Service Management through the On-Premises Bridge (OPB) Agent. When configuring the endpoint for the integration, field mappings between the LDAP compatible server and record fields in Service Management can be defined. </p>\n<h2>Sample use case</h2>\n<h3>Import contacts from Active Directory</h3>\n<p>This use case explains how to use the LDAP integration to import contacts into Service Management. </p>\n<p>Company ABC is using Microsoft Active Directory to manage their users and wants to use the LDAP integration to import some of their users as contacts into Service Management. Only Active Directory members who are currently active users and are in the MyCompany Organization Unit (OU) need to be imported; all other Active Directory members will not be imported.</p>\n<p>While importing the contacts, the company wants to import the following fields:</p>\n<ul>\n<li>First and Last name</li>\n<li>Email Address</li>\n<li>UID (unique identifier)</li>\n<li>User Status</li>\n<li>Location</li>\n<li>Manager</li>\n<li>Hire Date</li>\n<li>Home Phone number</li>\n<li>Mobile phone number</li>\n<li>Distinguished Name</li>\n</ul>\n<ol>\n</ol>\n<h2>Set up the integration</h2>\n<p>To import contacts from Active Directory, you need to configure the integration in the Service Management UI and use the On-Premises Bridge (OPB) to connect Service Management to the Active Directory server. The integration can create new contacts or update existing contacts based on a matching UPN. Note that the integration only pulls information from the Active Directory server, and does not push back updates made to Service Management users. There are configurable filters to control which users are imported based on criteria set in their profile. </p>\n<p>Text fields will directly populate values during the import from Active Directory to Service Management. When the fields that are being imported are list values (location, cost center) or a manager, a mapping process occurs. It is important to note that if any customized workflow rules or mandatory fields have been added to Service Management, the fields used during the import must satisfy those conditions; otherwise, the contact may not be imported.</p>\n<h3 id=\"Configuration_Steps_-_Summary\">Prerequisites</h3>\n<p>Before proceeding, make sure that the following prerequisites have been met:</p>\n<ul>\n<li>Enable SSL on the LDAP server to synchronize using the LDAPS protocol.</li>\n<li>Download and configure the OPB agent. For more information about downloading, installing and configuring the OPB Agent, see <a href=\"/doc/423/26.1/opbinstall\" title=\"SMAX:25.1/OpbInstall\">How to use On-Premises Bridge agents on Windows</a> or <a href=\"/doc/423/26.1/opbinstalllinux\" title=\"SMAX:25.1/OpbInstallLinux\">How to use On-Premises Bridge agents on Linux</a>.</li>\n</ul>\n<p>The following are the steps to implement the example use case of using the LDAP integration to import contacts into Service Management. </p>\n<h3 id=\"1_—_Confirm_the_version_of_Active_Directory_is_supported\">Confirm the version of Active Directory supported</h3>\n<p>The Service Management integration doesn't support all AD\\LDAP distributions. For supported LDAP servers, see the <a href=\"/doc/423/26.1/supportmatrixonprem#LDAP_servers\">support matrix</a>.</p>\n<h3 id=\"3_—_Confirm_the_credentials_of_an_account_capable_of_viewing_the_active_directory\">Confirm the credentials of an account capable of viewing the active directory</h3>\n<p>Log in to a machine using the credentials that should be able to connect to the Active directory and confirm that you can see users or groups. Most importantly, make sure that the OU intended to be imported is visible. In the following example, the Active Directory administration tool on a Windows Server is showing the user account named “Stone Smith” that exists inside the <b>MyCompany</b> OU.</p>\n<p><a class=\"image\" href=\"/file/images/c/c8/LDAP_Image8.png\" title=\"/file/images/c/c8/LDAP_Image8.png\"> <img alt=\"LDAP Image8.png\" border=\"2\" data-file-height=\"537\" data-file-width=\"768\" file=\"/mediawiki/images/c/c8/LDAP_Image8.png\" height=\"537\" hspace=\"0\" src=\"../../../images/LDAP_Image8_74b038dd.png\" vspace=\"0\" width=\"768\"/> </a></p>\n<p>There are a number of third-party tools that you can use to view an Active Directory that may make it easier to find the fields that need to be mapped to Service Management. Below is an example of one of the free tools distributed by Microsoft named the <a href=\"https://technet.microsoft.com/en-us/sysinternals/bb963907.aspx\" rel=\"nofollow\" target=\"1\">Active Directory Explorer</a> available for download on the Microsoft website. In the active directory explorer, the names of the attributes are all visible with the value set for them in each entry. In the example the <b>OU=MyCompany</b> is visible, all users in any of the OUs under will be imported if they match the import criteria defined in the endpoint.</p>\n<p><a class=\"image\" href=\"/file/images/9/95/ActiveDRCT.png\" title=\"/file/images/9/95/ActiveDRCT.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/9/95/ActiveDRCT.png\" height=\"291\" hspace=\"0\" src=\"../../../images/ActiveDRCT_b234545d.png\" style=\"width: 800px; height: 291px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></p>\n<h3 id=\"4_—_Determine_which_fields_in_Active_Directory_are_needed_and_match_them_in_Service_Management_Automation_X\">Determine which fields in Active Directory are needed and match them in Service Management</h3>\n<p>The names of attributes in Active Directory may or may not match the name of the field in Service Management. In many cases, the field names are different and you need to map them when configuring the integration. In the screenshot above note the AD sn attribute, in Service Management the equivalent field would be the ‘LastName’ field. The best practice is to make a chart like the below to confirm all the fields and names are known.</p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Name</th>\n<th scope=\"col\">Active Directory attribute name</th>\n<th scope=\"col\">Service Management field name</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>First Name</td>\n<td>givenName</td>\n<td>FirstName</td>\n</tr>\n<tr>\n<td>Last Name</td>\n<td>sn</td>\n<td>LastName</td>\n</tr>\n<tr>\n<td>Email Address</td>\n<td>mail</td>\n<td>Email</td>\n</tr>\n<tr>\n<td>Unique Account Identifier</td>\n<td>userPrincipalName</td>\n<td>Upn</td>\n</tr>\n<tr>\n<td>Status</td>\n<td>userAccountControl</td>\n<td>Person Status</td>\n</tr>\n<tr>\n<td>Location</td>\n<td>l (But sometimes co )</td>\n<td>Location</td>\n</tr>\n<tr>\n<td>Manager</td>\n<td>manager</td>\n<td>Manager</td>\n</tr>\n<tr>\n<td>Hire Date</td>\n<td>whenCreated</td>\n<td>HireDate</td>\n</tr>\n<tr>\n<td>Phone Number</td>\n<td>homePhone</td>\n<td>HomePhoneNumber</td>\n</tr>\n<tr>\n<td>Mobile Phone Number</td>\n<td>mobile</td>\n<td>\n<p>MobilePhoneNumber</p>\n</td>\n</tr>\n<tr>\n<td>Distinguished Name</td>\n<td>DN</td>\n<td>DistinguishedName</td>\n</tr>\n</tbody>\n</table>\n<p>The userAccountControl field has a number of values that need to be mapped to fit into the Service Management status field. This field contains the current user account status and is needed to determine which accounts are Active and which are Inactive. Active Directory uses a number of decimal values to indicate active accounts in various states. In this example, we’ll use ‘0’, ‘512’ and ‘66048’ as valid decimal values for active accounts. Note that Service Management changes all userAccountControl values to either a ‘0’ or a ‘2’. Zero is the value for an active account no matter what the value is in AD. Two is the status value no matter what the inactive value in AD.</p>\n<h3 id=\"5_—_Add_the_Active_Directory_connection_credentials_to_the_OPB\">Add the Active Directory connection credentials to OPB</h3>\n<p>The login required for access to Active Directory needs to be added to OPB. On the machine where OPB is installed, launch the Endpoint Credentials Manager from the Start menu.</p>\n<p><a class=\"image\" href=\"/file/images/1/1b/SMAX202205_credential_manager.png\" title=\"/file/images/1/1b/SMAX202205_credential_manager.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/1/1b/SMAX202205_credential_manager.png\" height=\"336\" hspace=\"0\" src=\"../../../images/SMAX202205_credential_manager_844861fc.png\" style=\"width:276px;height:336px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"276\"/> </a></p>\n<p>Add a new OPB LDAP Domain endpoint with the login to Active Directory server. </p>\n<p><a class=\"image\" href=\"https://staging.docs.microfocus.com/file/images/4/42/ldap2_2.jpeg\" title=\"https://staging.docs.microfocus.com/file/images/4/42/ldap2_2.jpeg\"> <img alt=\"\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/4/42/ldap2_2.jpeg\" height=\"468\" hspace=\"0\" src=\"../../../images/ldap2_2_9cfacdf9.jpeg\" style=\"width: 800px; height: 468px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></p>\n<h3 id=\"6_—_Add_and_configure_the_endpoint_to_Service_Management_Automation_X\">Add LDAP endpoint in the OPB agent</h3>\n<ol>\n<li>\n<p>Log in to the Service Management portal. From the main menu, select <b>Administration &gt; Utilities &gt; Integration &gt; Endpoints</b>.</p>\n</li>\n<li>Click <a class=\"image\" href=\"/file/images/6/64/2018.08_Helpcenter/Resources/Images/Icons/PlusIcon.png\" title=\"/file/images/6/64/2018.08_Helpcenter/Resources/Images/Icons/PlusIcon.png\"> <img alt=\"Add\" data-file-height=\"22\" data-file-width=\"24\" height=\"22\" src=\"../../../images/PlusIcon_8ed60e27.png\" width=\"24\"/> </a> <b>Add</b>.</li>\n<li>Enter the endpoint details and select <strong>Add</strong>.\n\t<table>\n<tbody>\n<tr>\n<th>Field</th>\n<th>Description</th>\n</tr>\n<tr>\n<td>Endpoint type</td>\n<td>Select <b>LDAP integration</b>.</td>\n</tr>\n<tr>\n<td>Endpoint name</td>\n<td>Type a name for the endpoint. Use only Latin letters and spaces.</td>\n</tr>\n<tr>\n<td>Running on agent</td>\n<td>Select the agent from the drop-down list.</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ol>\n<p><a class=\"image\" href=\"/file/images/2/24/ldap3.png\" title=\"/file/images/2/24/ldap3.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/2/24/ldap3.png\" height=\"333\" hspace=\"0\" src=\"../../../images/ldap3_0adb61a0.png\" style=\"width:529px;height:333px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"529\"/> </a></p>\n<h3>Configure LDAP endpoint in Service Management</h3>\n<h4>Connection configuration</h4>\n<ol start=\"1\">\n<li>Click <a class=\"image\" href=\"/file/images/3/3a/2018.08_Helpcenter/Resources/Images/Icons/ConfigureIcon.png\" title=\"/file/images/3/3a/2018.08_Helpcenter/Resources/Images/Icons/ConfigureIcon.png\"> <img alt=\"Configure\" data-file-height=\"18\" data-file-width=\"18\" height=\"18\" src=\"../../../images/ConfigureIcon_2bb1bcf3.png\" width=\"18\"/> </a> <b>Configure</b>. The <b>Endpoint Configuration</b> dialog box opens.</li>\n<li>\n<p>Enter the endpoint details.</p>\n<p><a class=\"image\" href=\"/file/images/6/66/SMAX202205_connection_settings_2.png\" title=\"/file/images/6/66/SMAX202205_connection_settings_2.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/6/66/SMAX202205_connection_settings_2.png\" height=\"253\" hspace=\"0\" src=\"../../../images/SMAX202205_connection_settings_2_d35b1842.png\" style=\"width: 800px; height: 253px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></p>\n<table>\n<tbody>\n<tr>\n<th>Field</th>\n<th>Description</th>\n</tr>\n<tr>\n<td>Endpoint name</td>\n<td>\n<p>The name of the endpoint.</p>\n<div class=\"Admonition_Note\"><span class=\"autonumber\">Note</span> This field is read-only.</div>\n</td>\n</tr>\n<tr>\n<td>Host name</td>\n<td>Enter the name or IP address of the LDAP server.</td>\n</tr>\n<tr>\n<td>Port</td>\n<td>\n<p>Enter the number of the port listened to by the LDAP server. The default is <b>389</b>.</p>\n</td>\n</tr>\n<tr>\n<td>Credentials</td>\n<td>\n<p>Enter the credentials used to connect to the LDAP server. The full credentials are those defined as part of the agent to which the endpoint is connected.</p>\n<p>On the Microsoft Active Directory server, both Distinguished name and username login are supported. On the Apache DS server, only Distinguished name login is supported.</p>\n</td>\n</tr>\n<tr>\n<td>Scheduled integration interval</td>\n<td>\n<p>Select the interval between successive runs of the integration. The default value is <b>1 day</b>. In the real world, to avoid the situation where a new task is started while the previous synchronization is still running, every 10 minutes, the system checks the status of the previous synchronization. When the system finds out the previous synchronization has finished, a clock will start ticking and a new synchronization will be triggered after the preset interval. </p>\n<p>For example, the <strong>Scheduled integration interval</strong> is set to 1 day. If a synchronization started at 18:00 and finished at 18:29 on the same day, the system checked its status at 18:10, 18:20, and 18:30. At 18:30, the system found out the synchronization had finished, then, a new synchronization would be triggered at 18:30 the next day.</p>\n</td>\n</tr>\n<tr>\n<td>Encrypted connection</td>\n<td>\n<p>Select this check box to run the sync using SSL encryption. </p>\n</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ol>\n<h4>Integration configuration</h4>\n<p>Enter the following details for <strong>Integration configuration</strong>:</p>\n<ol>\n<li><strong>LDAP Server type: </strong>\n<p>For supported LDAP servers, see the <a href=\"/doc/423/26.1/supportmatrixonprem#LDAP_servers\">support matrix</a>.</p>\n</li>\n<li>\n<p><strong>Starting search directory: </strong>The root directory on the LDAP server where the data is stored. In the Active Directory Administrative Center, this can be seen by highlighting the OU. In the example below, the DN is <code>OU=MyCompany,DC=oxygent,DC=com</code>. In this example, only entries below this will be imported. The Active Directory explorer tool also displays the DN (distinguishedName). </p>\n<p><a class=\"image\" href=\"/file/images/9/95/ActiveDRCT.png\" title=\"/file/images/9/95/ActiveDRCT.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/9/95/ActiveDRCT.png\" height=\"291\" hspace=\"0\" src=\"../../../images/ActiveDRCT_b234545d.png\" vspace=\"0\" width=\"800\"/> </a></p>\n</li>\n<li>\n<p>After entering the details, click <b>Test connection</b> to test the connection to the server.</p>\n<ul>\n<li>\n<p>LDAP server type:  select a supported version of Microsoft Active Directory </p>\n</li>\n<li>\n<p>Starting search directory: ou=MyCompany,DC=oxygent,DC=com</p>\n<p><a class=\"image\" href=\"/file/images/0/03/SMAX202205_connection_settings_3.png\" title=\"/file/images/0/03/SMAX202205_connection_settings_3.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/0/03/SMAX202205_connection_settings_3.png\" height=\"178\" hspace=\"0\" src=\"../../../images/SMAX202205_connection_settings_3_33bcb605.png\" style=\"width: 700px; height: 178px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"700\"/> </a></p>\n</li>\n</ul>\n</li>\n<li>\n<p>Click <b>Save</b>.</p>\n</li>\n</ol>\n<h4>Configure Record to Record mapping</h4>\n<p>There is a Record to record mapping section for Person records and for Group records. You must define at least one mapping to save the endpoint. You can define mappings for both Person and Group records in the same integration, but you can't add more than one mapping section for each record type in a single integration.</p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Field</th>\n<th scope=\"col\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Target record</td>\n<td>Select <b>Person</b> or <b>Group</b>.</td>\n</tr>\n<tr>\n<td>Source record</td>\n<td>Enter the corresponding record type from LDAP.</td>\n</tr>\n<tr>\n<td>Filter</td>\n<td>\n<p>The default filter is based on the selected record type (person or group). You can enter a custom filter to specify the relevant records for the integration.</p>\n<p>Example:</p>\n<p>To sync all people from groups 1 and 2 only, enter: <b>(&amp;(objectClass=person)(&amp;(group=group1)(group=group2)))</b>.</p>\n<p>To sync all people in either level 1 or level 3, enter:<b>(&amp;(objectClass=person)(|(level=level1)(level=level3)))</b>.</p>\n</td>\n</tr>\n<tr>\n<td>&lt;Field mappings&gt;</td>\n<td>\n<p>In each section, complete the following:</p>\n<ul>\n<li>\n<p><b>Target fields.</b> Select the record fields from Service Management to be mapped.</p>\n<p>If you select a field of type Enum, click the arrow button next to <strong>Map values</strong>. Select the target values from the drop-down list and enter the source values from LDAP. Click <b>Add map value</b> to add additional value mappings.</p>\n<div class=\"Admonition_Note\"><span class=\"autonumber\">Note</span> It's possible to map multiple source values to the same target value.</div>\n</li>\n<li>\n<p><b>Source fields.</b> Enter the corresponding fields from LDAP for the mapping. You can enter the fields in simple text or an Expression Language phrase.</p>\n<p>Click the <b>Expression Language</b> <a class=\"image\" href=\"/file/images/thumb/f/f3/SMAiconfx.png/30px-SMAiconfx.png\" title=\"/file/images/thumb/f/f3/SMAiconfx.png/30px-SMAiconfx.png\"> <img alt=\"SMAiconfx.png\" data-file-height=\"75\" data-file-width=\"79\" height=\"28\" src=\"../../../images/30px-SMAiconfx_894ae630.png\" width=\"30\"/> </a> button to toggle between these options. When the button is selected (blue), the field is in Expression Language mode. When it's not selected (white), the field is in Simple mode. For a full list of Expression Language functions, see <a href=\"/doc/423/26.1/explangfunctions\" title=\"SMAX:25.1/ExpLangFunctions\">Expression Language functions and syntax</a>.</p>\n</li>\n<li><b>Mapping condition.</b> Optionally, enter an Expression Language phrase defining a condition. The mapping applies only when the condition is satisfied.</li>\n</ul>\n<p>In each section, several default fields are provided. Click <b>Add field</b> to add additional field mappings. Click <b>Remove</b> next to any mapping to remove it.</p>\n<div class=\"Admonition_Important\"><span class=\"autonumber\">Important</span> You must include mappings for all fields defined as mandatory for the selected record type.</div>\n</td>\n</tr>\n</tbody>\n</table>\n<div class=\"Admonition_Note\"><span class=\"autonumber\">Note</span> When updating existing records, the sync identifies records based on their Upn. If the Upn field is mapped to the Email field in LDAP, for example, and multiple LDAP records have the same Email, they are mapped to the same record in Service Management. If there is a conflict in the record data between any of the LDAP records, an error is generated when the sync runs.</div>\n<ol start=\"1\">\n</ol>\n<h5>Map record to record for Person records:</h5>\n<ol start=\"1\">\n<li>Enter the name of the person record type on the LDAP server in the <b>Source record</b> field.</li>\n<li>Optionally, enter an Expression Language phrase as a filter in the <b>Person filter</b> field.</li>\n<li>\n<p>For the <b>Language</b>, <b>Email</b>, and <b>Upn</b> target fields, enter the corresponding fields from the LDAP records in the <b>Source field</b> column. The Upn field must be unique in Service Management person records. You can enter the fields in simple text or an Expression Language phrase.</p>\n<div class=\"Admonition_Note\"><span class=\"autonumber\">Note</span> In addition to the regular Expression Language functions, you can use the identification functions for LDAP integration described in <a href=\"/doc/423/26.1/explangfunctions#Identification_LDAP\" title=\"SMAX:25.1/ExpLangFunctions\">Identification functions for LDAP integration</a>.</div>\n</li>\n<li>Optionally, enter an Expression Language phrase as a condition for the field mapping in the <b>Mapping condition</b> column.</li>\n<li>You can click <b>Add field</b> to add additional field mappings.</li>\n</ol>\n<h5>Map record to record for Group records:</h5>\n<ol start=\"1\">\n<li>Enter the name of the Group record type on the LDAP server in the <b>Source record</b> field.</li>\n<li>Optionally, enter an Expression Language phrase as a filter in the <b>Group filter</b> field.</li>\n<li>\n<p>For the <b>Name</b> and <b>Upn</b> target fields, enter the corresponding fields from the LDAP records in the <b>Source field</b> column. You can enter the fields in simple text or an Expression Language phrase.</p>\n<div class=\"Admonition_Note\"><span class=\"autonumber\">Note</span> In addition to the regular Expression Language functions, you can use the identification functions for LDAP integration described in <a href=\"/doc/423/26.1/explangfunctions#Identification_LDAP\" title=\"SMAX:25.1/ExpLangFunctions\">Identification functions for LDAP integration</a>.</div>\n<p>The <b>Group type</b> target field is an Enum type field. Click the arrow button next to Map values and enter the LDAP values corresponding to the target values in the Source value column. Click <b>OK</b>.</p>\n</li>\n<li>Optionally, enter an Expression Language phrase as a condition for the field mapping in the <b>Mapping condition</b> column.</li>\n<li>You can click <b>Add field</b> to add additional field mappings.</li>\n<li>\n<p>Click <b>Request full sync</b> to run a full synchronization. For subsequent, on-demand, synchronizations, click <b>Sync now</b> to synchronize only the delta.</p>\n<div class=\"Admonition_Note\"><span class=\"autonumber\">Note</span> If you make any changes to the field mappings, you must run a full sync to update the field values of existing records based on the new mappings.</div>\n</li>\n<li>\n<p>When the sync finishes, a status summary appears on the screen, displaying the total number of records synced as well as a breakdown by category: Added, Updated, Deleted, Unchanged, and Errors.</p>\n<div class=\"Admonition_Note\"><span class=\"autonumber\">Notes </span><br/>\n\tThere may be a delay between the end of the OPB task and the completion of the sync.<br/>\n\tIf an error occurred during the mapping of fields, the record is imported and is counted under Added/Updated in the summary, but the relevant fields are empty.<br/>\n\tYou can define enrichment rules to enrich the person and group data synced from LDAP. For more information, see <a href=\"/doc/423/26.1/enrichmentrules\">Enrichment rules</a>.</div>\n</li>\n<li>\n<p>Go to <b>Administration &gt; Master Data &gt; People &gt; People</b> to view the synchronized person records. Go to <b>Administration &gt; Master Data &gt; People &gt; Groups</b> to view the synchronized group records.</p>\n</li>\n</ol>\n<p>Enter the following details for <strong>Record to Record mapping. </strong>The target record refers to the Service Management record type, in this case, Person. The source record refers to the person objectClass in AD. The additional filtered parameter is filtering the person record if it doesn't contain the value 0,512 or 66048 in the userAccountControl attribute. If the objectClass of the AD entry doesn't match the filter, the user isn't imported. The syntax for the filter is <strong>(&amp;(objectClass=person)(|(userAccountControl=512)(userAccountControl=0)(userAccountControl=66048)))</strong>.</p>\n<p>If all users in an OU are needed, then (objectClass=person) on an Active Directory would be used while (objectClass=inetOrgPerson) on some LDAP implementations is used.</p>\n<p><a class=\"image\" href=\"/file/images/8/89/LDAP_Image18.png\" title=\"/file/images/8/89/LDAP_Image18.png\"> <img alt=\"LDAP Image18.png\" border=\"2\" data-file-height=\"165\" data-file-width=\"798\" file=\"/mediawiki/images/8/89/LDAP_Image18.png\" height=\"165\" hspace=\"0\" src=\"../../../images/LDAP_Image18_efb9f082.png\" vspace=\"0\" width=\"798\"/> </a></p>\n<p>In the active directory explorer, the objectClass is visible on the person entry. There can be multiple objectClasses on an entry, below there are multiple including person and also organziationalPerson – either could have been used, but in this case, person was used.</p>\n<p><a class=\"image\" href=\"/file/images/4/41/Screenshot_2022-02-23_135022.png\" title=\"/file/images/4/41/Screenshot_2022-02-23_135022.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/4/41/Screenshot_2022-02-23_135022.png\" height=\"321\" hspace=\"0\" src=\"../../../images/Screenshot_2022-02-23_135022_4430db73.png\" style=\"width: 800px; height: 321px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></p>\n<h3 id=\"Target_field_configuration\">Target field configuration</h3>\n<p>You also need to map text fields by selecting the target field name and then entering the source field. The example below shows the first name field mapped to the givenName source field. No DSL is needed because the text from the source is just added to the target. In Service Management, the Name field is generated from the first name and last name fields, it would have also been possible to import the name field as well but It's not necessary.</p>\n<p>The list of fields in the use case would appear as shown in the following figure.</p>\n<p><a class=\"image\" href=\"/file/images/8/8a/SMAX202205_connection_mappings7.png\" title=\"/file/images/8/8a/SMAX202205_connection_mappings7.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/8/8a/SMAX202205_connection_mappings7.png\" height=\"529\" hspace=\"0\" src=\"../../../images/SMAX202205_connection_mappings7_fde40b7e.png\" style=\"width: 800px; height: 529px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a><br/>\n </p>\n<p>There are a number of DSL functions that will find, convert, or map data to the correct format. Examples of this are included above for importing the location, manager, person status, and hire dates.</p>\n<p>In order to populate the location in Service Management, the location in the user’s Active Directory profile needs to match a value in the Service Management location list. In this example, the ‘l’ attribute in Active Directory is storing the name of the city where the user is located.</p>\n<p><a class=\"image\" href=\"/file/images/0/06/LDAP_Image22.png\" title=\"/file/images/0/06/LDAP_Image22.png\"> <img alt=\"LDAP Image22.png\" border=\"2\" data-file-height=\"155\" data-file-width=\"819\" file=\"/mediawiki/images/0/06/LDAP_Image22.png\" height=\"151\" hspace=\"0\" src=\"../../../images/LDAP_Image22_c1683f46.png\" vspace=\"0\" width=\"800\"/> </a></p>\n<p>Using a DSL expression, we can look up the matching Service Management Location and populate the field. The source field expression is written as the following: <strong>${identification.findBy('Location', 'Name', source.l)}</strong> where the AD attribute “l” is referenced with source.”l”. If there was another field such as an AD field named “city” that stored the location, the syntax would be “source.city” instead of “source.l”. Make sure to click the <strong><em>fx</em></strong> box so that It's green to indicate an expression is being used.</p>\n<p><a class=\"image\" href=\"/file/images/a/ab/SMAX202205_connection_mappings1.png\" title=\"/file/images/a/ab/SMAX202205_connection_mappings1.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/a/ab/SMAX202205_connection_mappings1.png\" height=\"57\" hspace=\"0\" src=\"../../../images/SMAX202205_connection_mappings1_2ef04820.png\" style=\"width:579px;height:57px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"579\"/> </a></p>\n<p>In the expression, the location is referring to the location entity and the ‘Name’ is referring to the Name of the location (San Diego).</p>\n<p><a class=\"image\" href=\"https://staging.docs.microfocus.com/file/images/a/a8/SMAX202205_connection_mappings2_new.png\" title=\"https://staging.docs.microfocus.com/file/images/a/a8/SMAX202205_connection_mappings2_new.png\"> <img alt=\"\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/a/a8/SMAX202205_connection_mappings2_new.png\" height=\"295\" hspace=\"0\" src=\"../../../images/SMAX202205_connection_mappings2_new_bb25514b.png\" style=\"width:633px;height:295px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"633\"/> </a></p>\n<p>To populate a date, the format of the source date needs to be included in the DSL. Dates stored in AD appear in the format yyyyMMddHHmmSS (in the active directory explorer, it's interpreted and displayed in a friendly manner). The name of the attribute that needs to be imported is whenCreated, so the rule would appear as <strong>${to_date_time(source.whenCreated,'yyyyMMddHHmmss')}</strong>.</p>\n<p><a class=\"image\" href=\"/file/images/a/aa/SMAX202205_connection_mappings3.png\" title=\"/file/images/a/aa/SMAX202205_connection_mappings3.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/a/aa/SMAX202205_connection_mappings3.png\" height=\"47\" hspace=\"0\" src=\"../../../images/SMAX202205_connection_mappings3_46aacf80.png\" style=\"width:576px;height:47px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"576\"/> </a></p>\n<p><a class=\"image\" href=\"/file/images/e/e8/intt.png\" title=\"/file/images/e/e8/intt.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/e/e8/intt.png\" height=\"519\" hspace=\"0\" src=\"../../../images/intt_787eda3a.png\" style=\"width: 800px; height: 519px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></p>\n<p>When a manager is assigned to a user in Active Directory, the manager’s full DN is stored in the manager field.</p>\n<p><br/>\n<a class=\"image\" href=\"/file/images/c/cb/LDAP_Image27.png\" title=\"/file/images/c/cb/LDAP_Image27.png\"> <img alt=\"LDAP Image27.png\" border=\"2\" data-file-height=\"152\" data-file-width=\"1090\" file=\"/mediawiki/images/c/cb/LDAP_Image27.png\" height=\"112\" hspace=\"0\" src=\"../../../images/LDAP_Image27_88e03a49.png\" vspace=\"0\" width=\"800\"/> </a></p>\n<p>The source field for the manager would be ${identification.findBy('Person','DistinguishedName',source.manager)}. Service Management is able to match the DN stored in AD to the Service Management user field DistinguishedName and correctly link the manager. In the query \"Person\" refers to the entity type in Service Management, \"DistinguishedName\" is the field in the Person record and the \"source.manager\" is the field manager field in AD. The sync may need to be run twice if the manager was not already added in a previous sync. The DN of the person in AD must be imported and populated in the DistinguishedName field.</p>\n<p><a class=\"image\" href=\"/file/images/9/96/SMAX202205_connection_mappings5.png\" title=\"/file/images/9/96/SMAX202205_connection_mappings5.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/9/96/SMAX202205_connection_mappings5.png\" height=\"48\" hspace=\"0\" src=\"../../../images/SMAX202205_connection_mappings5_e9746235.png\" style=\"width:603px;height:48px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"603\"/> </a></p>\n<p>When the field in Service Management is a list, there is a mapping that needs to occur so the integration knows which field to link to which. In this example, a variety of values are linked to the ‘Active’ status in Service Management. Any similar list in Service Management needs the same kind of mapping. Since userAccountControl is always converted to a 0 or 2, the mapping looks like below.</p>\n<p><a class=\"image\" href=\"/file/images/d/d2/LDAP_Image_29b.png\" title=\"/file/images/d/d2/LDAP_Image_29b.png\"> <img alt=\"LDAP Image 29b.png\" border=\"2\" data-file-height=\"400\" data-file-width=\"973\" file=\"/mediawiki/images/d/d2/LDAP_Image_29b.png\" height=\"329\" hspace=\"0\" src=\"../../../images/LDAP_Image_29b_60c50c31.png\" vspace=\"0\" width=\"800\"/> </a></p>\n<p>If the desired outcome is to only populate a field in Service Management under certain conditions, then using the mapping conditions may be an option. Customer ABC has two different business units for employees within its company, the business units name is stored in the businessCategory field in LDAP.  The Sales unit users use the employeeNumber as their Employee ID field in Service Management, while the Accounting unit users use the uidNumber as their Employee ID field. The company will use the mapping conditions to decide what value is populated into the Employee ID field.</p>\n<p><a class=\"image\" href=\"/file/images/d/d2/SMAX202205_cmappingCondition_ldap.png\" title=\"/file/images/d/d2/SMAX202205_cmappingCondition_ldap.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/d/d2/SMAX202205_cmappingCondition_ldap.png\" height=\"241\" hspace=\"0\" src=\"../../../images/SMAX202205_cmappingCondition_ldap_e33561cf.png\" style=\"width:408px;height:241px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"408\"/> </a></p>\n<p>Two Target fields are added with both being set to Employee Id. The source field for Sales will be set to employeeNumber and the source field for Accounting will be set to uidNumber. The mapping condition on Sales is<strong> ${source.businessCategory=='Sales'}</strong> and for Accounting is <strong>${source.businessCategory=='Accounting'}</strong>. When the synchronization runs, each field will be set if it meets the mapping condition.</p>\n<p><a class=\"image\" href=\"/file/images/c/cc/SMAX202205_cmappingCondition.png\" title=\"/file/images/c/cc/SMAX202205_cmappingCondition.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/c/cc/SMAX202205_cmappingCondition.png\" height=\"196\" hspace=\"0\" src=\"../../../images/SMAX202205_cmappingCondition_ca409b8f.png\" style=\"width: 800px; height: 196px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></p>\n<h2 id=\"7_—_Run_the_full_sync_to_import_the_contacts\">How to use</h2>\n<p>Log in to the Service Management Portal and go to <b>Administration &gt; Utilities &gt; Integration &gt; Endpoints.</b> Select created endpoint, using <b>Active Directory </b>as an example, and click on the <strong>Request full sync</strong> button to perform the initial sync. This will import all AD users matching the filter and criteria into Service Management as contacts. If the user doesn't currently exist in Service Management, a new contact will be added. If a contact OR user already exists in Service Management with a matching UID, the information in Service Management is updated to reflect the data pulled in from AD. Contacts who are made users will continue to be updated when a sync with AD occurs.</p>\n<p><a class=\"image\" href=\"/file/images/d/d9/SMAX202205_Endpoint.png\" title=\"/file/images/d/d9/SMAX202205_Endpoint.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/d/d9/SMAX202205_Endpoint.png\" height=\"152\" hspace=\"0\" src=\"../../../images/SMAX202205_Endpoint_236c08cd.png\" style=\"width: 800px; height: 152px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></p>\n<p>When the job runs it will add a status to the grid, by clicking on the ID It's possible to review the details of the import.</p>\n<p><a class=\"image\" href=\"/file/images/4/4e/SMAX202205_Endpoint_1.png\" title=\"/file/images/4/4e/SMAX202205_Endpoint_1.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/4/4e/SMAX202205_Endpoint_1.png\" height=\"201\" hspace=\"0\" src=\"../../../images/SMAX202205_Endpoint_1_0c049eef.png\" style=\"width: 800px; height: 201px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></p>\n<p>Details relating to the records appear for each record in the import queue. In the example below, a full sync was run against the AD server, but no records were updated; the message indicates that there were no changes since the last sync and the contacts were therefore not updated. If a field was missing or invalid data exists, an error message may appear indicating the issue.</p>\n<p><br/>\n<a class=\"image\" href=\"/file/images/0/0e/SMAX202205_Endpoint_2.png\" title=\"/file/images/0/0e/SMAX202205_Endpoint_2.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/0/0e/SMAX202205_Endpoint_2.png\" height=\"376\" hspace=\"0\" src=\"../../../images/SMAX202205_Endpoint_2_a3c357d1.png\" style=\"width: 800px; height: 376px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></p>\n<p>If the desire is just an incremental sync (only changes since the last sync), It's possible to click on the <strong>Sync now</strong> button. </p>\n<p><a class=\"image\" href=\"/file/images/d/df/SMAX202205_Endpoint_3.png\" title=\"/file/images/d/df/SMAX202205_Endpoint_3.png\"> <img alt=\"\" border=\"0\" file=\"/mediawiki/images/d/df/SMAX202205_Endpoint_3.png\" height=\"132\" hspace=\"0\" src=\"../../../images/SMAX202205_Endpoint_3_5bb255be.png\" style=\"width: 800px; height: 132px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></p>\n<h2 id=\"LDAP_integration_limitations\">Limitations</h2>\n<p>The following limitations apply to the LDAP integration:</p>\n<ul>\n<li>Only contacts are imported, the records added to Service Management are not users who can log in to Service Management.</li>\n<li>Deletion of records isn't supported by the sync. If a record that exists in both LDAP and Service Management is deleted in LDAP, it's not deleted in Service Management after the sync.</li>\n<li>The number of records imported from LDAP may not be equal to the total number of records added or updated in Service Management because multiple LDAP records may be identified with a single record in Service Management.</li>\n<li>For the fields defined in the record to record mapping section, the data imported from LDAP is read-only in the user interface, with the exception of the <b>Email</b> field in person records when the value isn't an actual email address but uses a placeholder domain.</li>\n<li>Many-to-many relationships aren't supported by the sync.</li>\n<li>When syncing a field with numeric data, the group separator isn't preserved. For example, in the number <b>123,456.789</b>, the comma isn't preserved.</li>\n<li>The <b>userAccountControl</b> attribute is relevant for Microsoft Active Directory only. Only the values <b>0</b> and <b>2</b> are supported.</li>\n<li>If records weren't imported due to an error that occurred during the sync, you must run the full sync again to import the missing records.</li>\n</ul>\n<h2>Related topics</h2>\n<ul>\n<li><a href=\"/doc/423/26.1/userscontacts\" title=\"SMAX:25.1/UsersContacts\">Users and contacts</a></li>\n<li><a href=\"/doc/423/26.1/people\" title=\"SMAX:25.1/People\">People</a></li>\n<li><a href=\"/doc/423/26.1/groups\" title=\"SMAX:25.1/Groups\">Groups</a></li>\n</ul>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}