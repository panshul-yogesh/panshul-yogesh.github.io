{
  "title": "Integrate with Salesforce Sales Cloud for SAM",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>This page describes how to configure integration with Salesforce Sales Cloud to to import user entitlement data and license consumption data from Salesforce. This is part of the <a href=\"/doc/423/26.1/integratesamwithsaasapplications\" title=\"Set up SaaS products for license compliance calculation\">SaaS product setup</a> in SAM.</p>\n<h2>Register a Salesforce application</h2>\n<p>Registering a Salesforce application for integration involves creating a connected app in your Salesforce organization. This <span style=\"background-color:#ffffff;\">enables your application to securely access Salesforce resources using </span><span style=\"background-color:#ffffff;\">OAuth</span><span style=\"background-color:#ffffff;\"> authentication. The following is a step-by-step guide on how to r</span>egister a Salesforce application for integration.</p>\n<h3>Log in to Salesforce</h3>\n<p>Log in to your Salesforce account with the necessary privileges to create and manage connected apps.</p>\n<h3>Configure permission sets</h3>\n<p>Permission sets in Salesforce allow you to grant specific permissions and access rights to users or applications. You need to create and assign a permission set to the API user to interact with your connected app.</p>\n<ol>\n<li>In the Salesforce<strong> Setup</strong> <strong>Home</strong> page, type <strong>Permission Sets</strong> in the <strong>Quick Find </strong>box on the top-left corner and open it.</li>\n<li>Click the <strong>New </strong>button to create a new permission set.</li>\n<li>Enter <strong>permission set information</strong> including <strong>Label </strong>and <strong>API Name</strong> for the new permission set, and click <strong>Save</strong>.</li>\n<li>Go to<strong> System </strong>&gt; <strong>System Permissions</strong>, and click <strong>Edit </strong>to enable the<strong> API Enabled </strong>and<strong> Api Only User</strong> system permissions.</li>\n<li>Save the permission set.</li>\n</ol>\n<h3>Set up an API user</h3>\n<ol>\n<li>In the Salesforce<strong> Setup</strong> <strong>Home</strong> page, type<strong> Users</strong> in the <strong>Quick Find </strong>box on the top-left corner and open it.</li>\n<li>Click the <strong>New User</strong> button to create a new user.</li>\n<li>Fill in the required user details. Specify the <strong>User License</strong> as the <strong>Salesforce Integration </strong>and the <strong>Profile</strong> as <strong>Salesforce API Only System Integrations</strong>.</li>\n<li>Under <strong>Permission Set Assignments</strong>, assign the permission sets that you've created to this user. This grants the necessary permissions for API interactions.</li>\n</ol>\n<h3>Access the App Manager</h3>\n<ol>\n<li>In the Salesforce<strong> Setup</strong> <strong>Home</strong> page, type<strong> App Manager</strong> in the <strong>Quick Find </strong>box on the top-left corner and open it.</li>\n<li>In the <strong>App Manager</strong>, click <strong>New Connected App </strong>on the top-right.<br/>\n\tConfigure the following settings:\n\t<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">Section</th>\n<th scope=\"col\">Field</th>\n<th scope=\"col\">Description</th>\n</tr>\n<tr>\n<td colspan=\"1\" rowspan=\"3\"><strong>Basic information</strong><br/>\n\t\t\t\t </td>\n<td><strong>Connected App Name</strong></td>\n<td>A name for your app</td>\n</tr>\n<tr>\n<td><strong>API Name</strong></td>\n<td>A name used in API requests</td>\n</tr>\n<tr>\n<td><strong>Contact Email</strong></td>\n<td>The contact email for the app</td>\n</tr>\n<tr>\n<td colspan=\"1\" rowspan=\"6\"><strong>API (Enable OAuth Settings)</strong></td>\n<td><strong>Enable OAuth Settings</strong></td>\n<td>Check this box to enable the OAuth authentication</td>\n</tr>\n<tr>\n<td><strong>Callback URL</strong></td>\n<td>\n<p>The URL will redirect the users after a successful authorization. This could be a URL in your application.</p>\n<p>For example, enter <code>https://login.salesforce.com/services/oauth2/callback</code></p>\n</td>\n</tr>\n<tr>\n<td><strong>Selected OAuth Scopes</strong></td>\n<td>\n<p>Choose the OAuth scopes that your application needs access to. These decide the level of access your app will have.<br/>\n\t\t\t\tThe following scopes are required :</p>\n<ul>\n<li><strong>Manage use data via APIs (api)</strong></li>\n<li><strong>Perform requests at any time (refresh_token, offline_access）</strong></li>\n</ul>\n</td>\n</tr>\n<tr>\n<td><strong>Enable Client Credentials Flow</strong></td>\n<td>Check this box to enable client credentials flow</td>\n</tr>\n</thead>\n</table>\n</li>\n<li>Click <strong>Save</strong> to create the new connected app after accepting the security warning, and click <strong>Continue </strong>to manage connected apps.</li>\n<li>In the <strong>Manage Connected Apps</strong> page, click <strong>Manage </strong>on the top.</li>\n<li>Go to the<strong> Client Credentials Flow </strong>section, populate the <strong>Run As </strong>field with a user that has privileges to access the APIs instead of the login user.</li>\n</ol>\n<h3>​​​​Find the essential information for configuring the endpoint</h3>\n<p>In the your connected app, go to the <strong>API (Enable OAuth Settings)</strong> section and note down the following values:</p>\n<ul>\n<li><strong>Consumer Key</strong>: The client ID of your Salesforce app.</li>\n<li><strong>Consumer Secret</strong>: The client secret of your Salesforce app.</li>\n</ul>\n<h2 id=\"Prepare_an_integration_user\">Prepare an integration user</h2>\n<p>You need to prepare an integration user before setting up the integration. For details on how to prepare an integration user, see <a href=\"/doc/423/26.1/integratesamwithsaasapplications#Prepare_an_integration_user\" title=\"Prepare an integration user\">Prepare an integration user</a>.</p>\n<h2>Set up the integration</h2>\n<p>To set up the integration based on the Integration Studio for Salesforce data import, perform the following steps.</p>\n<h3 id=\"Create_an_endpoint\">Create an endpoint</h3>\n<p>Create an endpoint using the Rest Executor 2.0 endpoint type:</p>\n<ol>\n<li>Log in to the Agent Interface as the integration administrator.</li>\n<li>Navigate to <strong>Administration </strong>&gt; <strong>Utilities </strong>&gt; <strong>Integration</strong> &gt;<strong> Endpoints</strong>.</li>\n<li>Click <strong>Add</strong>.</li>\n<li>Select<strong> Rest Executor 2.0</strong> as the endpoint type, enter a name for the endpoint (for example, Salesforce), and then click <strong>Add</strong>. The system creates the endpoint. </li>\n<li>\n<p>Click <strong>Configure</strong> and complete the following fields.</p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">Field</th>\n<th scope=\"col\">Value</th>\n</tr>\n<tr>\n<td colspan=\"2\"><strong>General configuration</strong></td>\n</tr>\n<tr>\n<td>Agent</td>\n<td>Select<strong> Agentless </strong>for a direct connection to the Salesforce API</td>\n</tr>\n<tr>\n<td>Authentication type</td>\n<td>Select <strong>OAuth 2.0</strong></td>\n</tr>\n<tr>\n<td>Protocol</td>\n<td>Select <strong>https</strong></td>\n</tr>\n<tr>\n<td>Base URL</td>\n<td>\n<p><code>https://&lt;Salesforce My Domain URL&gt;</code></p>\n</td>\n</tr>\n<tr>\n<td>Certificate type</td>\n<td>(optional) Select <strong>X.509</strong></td>\n</tr>\n<tr>\n<td>Certificate format</td>\n<td>(optional) Select <strong>PEM</strong></td>\n</tr>\n<tr>\n<td>Server certificate</td>\n<td colspan=\"1\">\n<p>(optional)</p>\n<p>Open the root CA certificate file of the Salesforce system in a text editor, and then copy and paste the content to this field. If the content is invalid, an error occurs when you click Save in the next step.</p>\n<p>The certificate content must resemble the following.</p>\n<p><code>-----BEGIN CERTIFICATE-----</code></p>\n<p><code>MIIF2TCCBMGgAwIBAgIQBMF1U8hY8bivE0+JHx922jANBgkqhkiG9w0BAQsFADBGMQswCQYDVQQGEwJVUzEPMA0GA1UEChMGQW1hem9uMRUwEwYDVQQLEwxTZXJ2ZXIgQ0EgMUIxDzANBgNVBAMTBkFtYXpvbjAeFw0yMTEwMTEwMDAwMDBaFw0yMjExMDkyMzU5NTlaMBsxGTAXBgNVBAMTEHhpZS5pdHNtYS1uZy5vcmcwggEiMA0GCSqGSIb31oIvQfpl2gj0S6JSJAYjJnY7HKCa7mkzBMiiXWI5aHMZfl1FsaNARM10LUpto61fIvk/SDNlOqVXuzGMTZkJBVZVmK5lNLvBB1Gk9+QlJ+SuUOW7FW2K5U+oQKWsHtvHC/DHn6yyhvqWes9q6A==</code></p>\n<p><code>-----END CERTIFICATE-----</code></p>\n</td>\n</tr>\n<tr>\n<td>Enable email notification for token expiration</td>\n<td>Check this option and configure the<strong> Recipients </strong>field based on your needs</td>\n</tr>\n<tr>\n<td>Recipients</td>\n<td>Configure the email notification recipients based on your needs</td>\n</tr>\n<tr>\n<td colspan=\"2\"><strong>Get token configuration</strong></td>\n</tr>\n<tr>\n<td>Grant Type</td>\n<td><strong>Client Credentials</strong></td>\n</tr>\n<tr>\n<td>Client ID</td>\n<td>Enter the<strong> Consumer key </strong>assigned to your Salesforce application</td>\n</tr>\n<tr>\n<td>Client Secret</td>\n<td>Enter the<strong> Consumer secret</strong> assigned to your Salesforce application</td>\n</tr>\n<tr>\n<td>Token URL</td>\n<td><code>https://&lt;Base URL&gt;/services/oauth2/token</code></td>\n</tr>\n<tr>\n<td>Scope</td>\n<td>Leave it empty</td>\n</tr>\n<tr>\n<td>Send client Id and secret</td>\n<td>Select <strong>In body</strong></td>\n</tr>\n<tr>\n<td>Content-Type</td>\n<td><code>application/x-www-form-unlencoded</code></td>\n</tr>\n</thead>\n</table>\n</li>\n<li>Click <strong>Test connection</strong> to validate your configurations.</li>\n<li>Click <strong>Save</strong>.</li>\n</ol>\n<h3 id=\"Create_an_integration\">Create an integration</h3>\n<p>In the following steps, you'll create an integration with the predefined template.</p>\n<ol>\n<li>Navigate to <strong>Administration </strong>&gt; <strong>Utilities</strong> &gt; <strong>Integration</strong> &gt;<strong> Integration Studio</strong>.</li>\n<li>Click <strong>New</strong>, enter the name of your integration, and then click <strong>Save</strong>. The system displays the Integration page.</li>\n<li>In the<strong> Details</strong> section, configure the integration user you created for the current Service Management system and activate the integration.</li>\n<li>In the<strong> Connector-Endpoint mappings</strong> section, click <strong>Add</strong> to add a mapping.</li>\n<li>Select <b>Query REST API</b> (under <strong>Salesforce</strong>) as the connector, select the Salesforce endpoint that you created earlier, and then enter an alias for the mapping.</li>\n<li>Click <strong>Save</strong>.</li>\n</ol>\n<h3 id=\"Configure_the_scenario\">Add the scenario</h3>\n<p>Perform the following steps to add the scenarios to the integration:</p>\n<ol>\n<li>Click <strong>Add scenario</strong>. </li>\n<li>Enter a name for the scenario. For example, Import Salesforce license consumption.</li>\n<li>In the <strong>Template</strong> field, select <strong>SAM - Import Salesforce license consumption</strong> (under <strong>Salesforce</strong>).\n\t<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">The  <strong>API version </strong>parameter in the <strong>SAM - Import Salesforce license consumption</strong> template <strong> </strong>is set to v58.0, and you can customize it based on your needs.</div>\n</div>\n</li>\n<li>Click <strong>Save</strong> to add the scenario. </li>\n<li>To add another scenario template, simply follow the steps again and select <strong>SAM - Import Salesforce user entitlement</strong> (under <strong>Salesforce</strong>) in the Template field.</li>\n</ol>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">\n<ul>\n<li>Using the out-of-the-box template simplifies integration configuration compared to starting from scratch. If you choose not to use this option, you'll need to manually build your logic from a blank page.</li>\n<li>You can update the <strong>APIVersion </strong>key in the template based on your business requirements.</li>\n</ul>\n</div>\n</div>\n<h2>Next steps</h2>\n<p>Complete the remaining steps of the <a href=\"/doc/423/26.1/integratesamwithsaasapplications#SaaSConfig\" title=\"SaaS product configuration process\">SaaS product configuration process</a>:</p>\n<ul>\n<li>Create and configure the Salesforce Sales Cloud product in SAM</li>\n<li>Create license metrics (if necessary)</li>\n<li>Create licenses for services included in Salesforce Sales Cloud (if necessary)</li>\n<li>Verify the Salesforce integration</li>\n<li>Verify the details of the license models for Salesforce Sales Cloud services</li>\n<li>Schedule the periodic triggering of the integration</li>\n</ul>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}