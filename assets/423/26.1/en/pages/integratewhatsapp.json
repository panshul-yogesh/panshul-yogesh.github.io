{
  "title": "Integration Studio—WhatsApp integration",
  "content": "<div class=\"mw-parser-output\"><p>You can integrate Service Management with WhatsApp. This integration enables you to proactively inform users about important issues in your environment.</p><p>The following depicts a typical use case. When a major incident happens, the system can send a WhatsApp message to all major incident team members.</p><p><a class=\"image\" href=\"https://staging.docs.microfocus.com/file/images/4/4b/XieWAppInteg.jpeg\" title=\"https://staging.docs.microfocus.com/file/images/4/4b/XieWAppInteg.jpeg\"><img alt=\"XieWAppInteg.jpeg\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/4/4b/XieWAppInteg.jpeg\" height=\"403\" hspace=\"0\" src=\"../../../images/XieWAppInteg_5dc85ff9.jpeg\" style=\"width: 800px; height: 403px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/></a></p><span class=\"snippet-start\" data-sname=\"423-25.4-423-25.3-IntegrateJira|Intg_Disclaimer|N\"></span><div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\" data-reuse-section-begin=\"3f8dcb4f\" data-reuse-section-end=\"3f8dcb4f\">The integration use cases described in this document serve as examples to inspire and guide your integration efforts. However, they should not be considered as prescriptive or guaranteed solutions for your particular scenario. The examples may or may not be applicable for your license edition.</div>\n</div>\n<p><br/>\n</p><span class=\"snippet-end\" data-sname=\"423-25.4-423-25.3-IntegrateJira|Intg_Disclaimer|N\"></span><h2>Set up the integration</h2><p>As an example, the procedure below will set up the integration to implement the documented use case.</p><p>The business logic for the integration is defined by the predefined scenario template <i>Send major incident notification</i>, which sends WhatsApp messages to the Major Incident team members. You can create an integration scenario based on the scenario template, and then update some environment-specific or control parameters to fine-tune the system behavior.</p><h3>Prerequisites</h3><p>To set up the integration, make sure the following prerequisites are available:</p><ul><li>WhatsApp business account including a registered app (see <a href=\"https://developers.facebook.com/docs/whatsapp/cloud-api/get-started\" title=\"Get Started - Cloud API\">Get Started - Cloud API</a>)</li><li>WhatsApp Phone Number ID</li><li>WhatsApp permanent access token (see <a href=\"https://developers.facebook.com/blog/post/2022/12/05/auth-tokens/\" title=\"Using Authorization Tokens for the WhatsApp Business Platform\">Using Authorization Tokens for the WhatsApp Business Platform</a> for how to generate the token)</li><li>A message template (see <a href=\"https://www.facebook.com/business/help/2055875911147364?id=2129163877102343\" title=\"Create message templates for your WhatsApp Business account\">Create message templates for your WhatsApp Business account</a>) </li></ul><p>The out-of-the-box WhatsApp scenario template requires that you create the following messaging template in WhatsApp.</p><p><strong>Header:</strong></p><p><a class=\"image\" href=\"https://staging.docs.microfocus.com/file/images/3/36/XIEWA_Header.jpeg\" title=\"https://staging.docs.microfocus.com/file/images/3/36/XIEWA_Header.jpeg\"><img alt=\"XIEWA_Header.jpeg\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/3/36/XIEWA_Header.jpeg\" height=\"122\" hspace=\"0\" src=\"../../../images/XIEWA_Header_303f3f3e.jpeg\" style=\"width: 800px; height: 122px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/></a></p><p><strong>Body:</strong></p><p><a class=\"image\" href=\"https://staging.docs.microfocus.com/file/images/3/34/XieWA_Body.png\" title=\"https://staging.docs.microfocus.com/file/images/3/34/XieWA_Body.png\"><img alt=\"XieWA_Body.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/3/34/XieWA_Body.png\" height=\"227\" hspace=\"0\" src=\"../../../images/XieWA_Body_5ada4d8e.png\" style=\"width: 800px; height: 227px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/></a></p><p><strong>Footer:</strong></p><p><a class=\"image\" href=\"https://staging.docs.microfocus.com/file/images/8/85/XieWA_Footer.png\" title=\"https://staging.docs.microfocus.com/file/images/8/85/XieWA_Footer.png\"><img alt=\"XieWA_Footer.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/8/85/XieWA_Footer.png\" height=\"98\" hspace=\"0\" src=\"../../../images/XieWA_Footer_5159a900.png\" style=\"width: 800px; height: 98px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/></a></p><p><strong>Buttons:</strong></p><p><a class=\"image\" href=\"https://staging.docs.microfocus.com/file/images/4/48/XieWA_Button.png\" title=\"https://staging.docs.microfocus.com/file/images/4/48/XieWA_Button.png\"><img alt=\"XieWA_Button.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/4/48/XieWA_Button.png\" height=\"214\" hspace=\"0\" src=\"../../../images/XieWA_Button_cd2fd9d6.png\" style=\"width: 800px; height: 214px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/></a></p><p><strong>Preview result:</strong></p><p><a class=\"image\" href=\"https://staging.docs.microfocus.com/file/images/5/5f/XieWA_Preview.png\" title=\"https://staging.docs.microfocus.com/file/images/5/5f/XieWA_Preview.png\"><img alt=\"XieWA_Preview.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/5/5f/XieWA_Preview.png\" height=\"352\" hspace=\"0\" src=\"../../../images/XieWA_Preview_cdc61ae4.png\" style=\"width:325px;height:352px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"325\"/></a></p><p>If you create a different messaging template, you need to modify the payload in the integration scenario.</p><h3>Prepare an integration user</h3><p>Perform the following steps to prepare an integration user:</p><ol><li>Create an integration user. See <a href=\"/doc/423/26.1/createuser\" title=\"How to create an integration user\">How to create an integration user</a>.</li><li>Log in to the Agent Interface as the tenant admin and do the following: \n     <ol start=\"1\"><li>Navigate to <strong>Administration</strong> &gt; <strong>Master Data</strong> &gt; <strong>People</strong>, locate the integration user, and then assign the proper roles to access the required modules.</li><li>At a minimum, the role should have the following permission or add the Tenant Admin role to grant general access.<br/><a class=\"image\" href=\"https://staging.docs.microfocus.com/file/images/a/a0/OPB_Admin.png\" title=\"https://staging.docs.microfocus.com/file/images/a/a0/OPB_Admin.png\"><img alt=\"OPB_Admin.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/a/a0/OPB_Admin.png\" height=\"95\" hspace=\"0\" src=\"../../../images/OPB_Admin_23a7b359.png\" style=\"width: 800px; height: 95px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/></a></li></ol></li></ol><h3>Create an endpoint</h3><p>Create an endpoint using the Rest Executor 2.0 endpoint type:</p><ol><li>Log in to the Agent Interface as the tenant admin.</li><li>Navigate to <strong>Administration </strong>&gt; <strong>Utilities </strong>&gt; <strong>Integration </strong>&gt; <strong>Endpoints</strong>.</li><li>Click <strong>Add</strong>.</li><li>Select <strong>Rest Executor 2.0</strong> as the endpoint type, enter a name for the endpoint (for example, WhatsApp), and then click <strong>Add</strong>. The system creates the endpoint.</li><li>Click <strong>Configure</strong> and complete the fields:<br/><span id=\"cke_bm_17462S\" style=\"display: none;\"> </span><span id=\"cke_bm_17462E\" style=\"display: none;\"> </span><table><thead><tr><th scope=\"col\">Field</th><th scope=\"col\">Value</th></tr><tr><td><div>\n          Agent\n         </div></td><td><div>\n          Select \n          <strong>Agentless</strong> for a direct connection to WhatsApp Cloud API. \n         </div></td></tr><tr><td><div>\n          Authentication type\n         </div></td><td><div>\n          Select \n          <strong>Bearer</strong><strong> Token</strong>.\n         </div></td></tr><tr><td><div>\n          Protocol\n         </div></td><td><div>\n          Select \n          <strong>https</strong>. \n         </div></td></tr><tr><td><div>\n          Base URL\n         </div></td><td><div>\n          Enter the base URL of the Meta Graph API: \n          <code>https://graph.facebook.com</code> \n         </div></td></tr><tr><td><div>\n          Token\n         </div></td><td><div>\n          Enter the permanent token of your system user in WhatsApp. See the \n          <strong>Prerequisites</strong> section. \n         </div></td></tr><tr><td><div>\n          Certificate type\n         </div></td><td>Leave it empty.</td></tr><tr><td><div>\n          Certificate format\n         </div></td><td>Leave it empty.</td></tr><tr><td><div>\n          Server certificate\n         </div></td><td><div>\n          Leave it empty. \n         </div></td></tr></thead></table> Example:<br/><a class=\"image\" href=\"https://staging.docs.microfocus.com/file/images/2/23/WA_EndptConfig.jpeg\" title=\"https://staging.docs.microfocus.com/file/images/2/23/WA_EndptConfig.jpeg\"><img alt=\"WA_EndptConfig.jpeg\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/2/23/WA_EndptConfig.jpeg\" height=\"534\" hspace=\"0\" src=\"../../../images/WA_EndptConfig_ef143ec9.jpeg\" style=\"width: 800px; height: 534px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/></a></li></ol><h3>Create an integration</h3><p>Perform the following steps to create an integration based on the WhatsApp connector.</p><ol><li>Navigate to <strong>Administration</strong> &gt; <strong>Utilities</strong> &gt; <strong>Integration</strong> &gt; <strong>Integration Studio</strong>.  </li><li>Click <strong>New</strong>, enter the name of your integration, and then click <strong>Save</strong>. The system displays the Integration page.</li><li>In the Details section, configure the integration user you created for the current Service Management system and activate the integration.</li><li>In the Connector-Endpoint mappings section, click <strong>Add</strong> to add a mapping.</li><li>Select <strong>WhatsApp</strong> (under <strong>Meta</strong>) as the connector, select the WhatsApp endpoint that you created earlier, and then enter an alias for the mapping.</li><li>Click <strong>Save</strong>.</li></ol><h3>Configure the scenario</h3><p>Perform the following steps to add and configure a scenario using the predefined template:</p><ol><li>Click <b>Add</b><b> scenario</b>.  </li><li>Enter a name for the scenario. For example, enter <b>Send</b><b> major incident notification</b>. </li><li><p>In the <b>Template</b> field, select <b>Send</b><b> major incident notification</b> (under <strong>Meta WhatsApp</strong>) from the list.</p><div class=\"Admonition_Note\"><span class=\"autonumber\">Note </span>Using templates will make the integration configuration easier than starting from scratch. If you don't select this option, you'll have to manually add your own logic, starting from a blank page.\n     </div></li><li><p>Click <strong>Save</strong> to add the scenario.</p></li><li><p><span style=\"background-color: transparent;\">In the <strong>Settings</strong> rule at the start of the <strong>process logic</strong> section, </span>configure the following parameters:</p><ul><li><i>WhatsAppPhoneID</i> – The WhatsApp PhoneId, which identifies the phone number to send messages from.</li><li><i>WhatsAppTemplateName</i> – The message template to send out. See the <strong>Prerequisites</strong> section for the details of the template.</li></ul></li><li><p>Click <strong>Save</strong>.</p></li></ol><h2>Use the scenario</h2><p>As the integration and endpoint are already created, all you need to do is to create a business rule to trigger the integration based on your condition.</p><p>Navigate to <strong>Studio</strong> &gt; <strong>Incident</strong> &gt; <strong>Processes and Rules</strong> &gt; <strong>After applying changes</strong> and add a new “Call Integration Studio” business rule. For example:</p><p><a class=\"image\" href=\"https://staging.docs.microfocus.com/file/images/f/f3/XieWA_BR.png\" title=\"https://staging.docs.microfocus.com/file/images/f/f3/XieWA_BR.png\"><img alt=\"XieWA_BR.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/f/f3/XieWA_BR.png\" height=\"281\" hspace=\"0\" src=\"../../../images/XieWA_BR_591a23c9.png\" style=\"width: 800px; height: 281px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/></a></p><p>The condition in this example is <code>${entity.MajorIncident==true and current_update.MajorIncident.IsChanged}</code>. This means when the Major Incident flag is set to true in the Incident,<b> </b>the integration is triggered.</p><h2>Understand the integration</h2><p>The following describes the logic of the scenario rules so that you can customize the scenario as needed.</p><ol><li>Defines some parameters.</li><li>Gets incident data from Service Management.</li><li>Gets the major Incident team members to get the phone numbers.</li><li><p>Iterates through all major incident members and sends out the message.</p><p>The payload for the WhatsApp message template is created in the “WhatApp: Send template message” rule.</p></li></ol><p><a class=\"image\" href=\"https://staging.docs.microfocus.com/file/images/6/6f/WhatsAppScnExample.png\" title=\"https://staging.docs.microfocus.com/file/images/6/6f/WhatsAppScnExample.png\"><img alt=\"WhatsAppScnExample.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/6/6f/WhatsAppScnExample.png\" height=\"506\" hspace=\"0\" src=\"../../../images/WhatsAppScnExample_a2cfca40.png\" style=\"width: 800px; height: 506px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/></a></p><div class=\"Admonition_Note\"><span class=\"autonumber\">Note </span>The inbound listener isn't supported for the WhatsApp integration. Replies to WhatsApp messages aren't handled.\n   </div></div>",
  "modifiedon": "2025-10-24 08:51:12"
}