{
  "title": "Set up Closed Loop Incident Process (CLIP)",
  "content": "<div class=\"mw-parser-output\"><p>The Service Management integration with OBM is bi-directional. It enables you to forward OBM events to Service Management to create and update incidents and synchronize incident changes back to OBM events.</p><p>The communication from OBM to Service Management occurs through direct REST calls using the Service Management Case Exchange REST API and External System. Service Management uses the Case Exchange framework to create and update incidents in Service Management based on events in OBM.</p><p>The communication from Service Management to OBM leverages the Service Management Integration Studio to prepare the payloads required by OBM to update the events.</p><div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div><p>This document applies to Operations Bridge Manager Classic, Operations Bridge Manager Containerized, and OpScope. For brevity, we use OBM to refer to all these flavors of Operations Bridge Manager in this document.</p></div></div></div><h2><a id=\"Integration_comparison\" name=\"Integration_comparison\" title=\"Integration comparison\"></a><a id=\"Integration-comparison\" name=\"Integration-comparison\" title=\"Integration comparison\"></a>Integration comparison</h2><p>Starting from version 24.2, we changed the way to send Service Management incident updates to OBM to update the events. We recommend customers to use the new Service Management Integration Studio-based solution to update events in OBM. To adopt the Integration Studio-based solution, a new version of the Groovy script is required. The following gives an overview of the differences between the classic integration and the Integration Studio-based integration. </p><table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 900px;\"><thead><tr><th scope=\"col\">Area</th><th scope=\"col\">Classic Integration</th><th scope=\"col\">Integration Studio-based Integration</th></tr></thead><tbody><tr><td>On-Premise Bridge</td><td>Mandatory</td><td>Optional</td></tr><tr><td>Endpoint type</td><td>Rest Executor 1.0</td><td>Rest Executor 2.0</td></tr><tr><td>Debugging REST calls sent to OBM</td><td>In On-Premise-Bridge logs</td><td>In endpoint</td></tr><tr><td>Retry of failed requests when updating events</td><td>Not available</td><td>Available</td></tr><tr><td>Trigger to update events</td><td>Fixed logic</td><td>Configurable via the Service Management Studio business rules</td></tr><tr><td>Configure payloads to update events</td><td>External System</td><td>Integration Studio</td></tr></tbody></table><div class=\"admonition\"><div class=\"admonition-icon admonition-important-icon\"></div><div class=\"admonition-content admonition-important-content\"><div><p>The usage of the classic integration is still supported and working. The customers can continue to use it, but we do not plan to enhance the classic integration.</p></div></div></div><h2><a id=\"Use_cases\" name=\"Use_cases\" title=\"Use cases\"></a><a id=\"Use-cases\" name=\"Use-cases\" title=\"Use cases\"></a>Use cases</h2><p>As an example, you can configure the integration to automatically open an incident in Service Management in response to CI Status alerts in OBM. The OBM event management console determines what events should generate incidents and be added to an ITSM process to resolve the incident and alert agents and end users. You can define an event forwarding rule that determines what events are automatically forwarded to Service Management.</p><h2><a id=\"Set_up_the_integration\" name=\"Set_up_the_integration\" title=\"Set up the integration\"></a><a id=\"Set-up-the-integration\" name=\"Set-up-the-integration\" title=\"Set up the integration\"></a>Set up the integration</h2><p>To support forwarding OBM events to Service Management to create incidents, the following components are involved:</p><ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">A Groovy script adapter.</li><li style=\"margin-left: 28px; position: relative;\">A connected server.</li><li style=\"margin-left: 28px; position: relative;\">An event forwarding rule.</li></ul><p>To support syncing Service Management incident changes to OBM events, the following components are involved:</p><ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">An agent including On-Premise Bridge (optional).</li><li style=\"margin-left: 28px; position: relative;\">An endpoint.</li><li style=\"margin-left: 28px; position: relative;\">An external system record.</li><li style=\"margin-left: 28px; position: relative;\">Integration Studio.</li></ul><p>To synchronize OBM events and event changes with Service Management incidents, you must configure the Service Management instance as a \"connected server\" in OBM. Communication from Service Management to OBM occurs using REST API calls through the Integration Studio. If the network connectivity doesn't allow direct communication from Service Management to OBM, the Service Management On-Premise Bridge can be used to connect to OBM.</p><div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div><p>In SaaS, only the SaaS Ops team can configure the connected server in OBM.</p></div></div></div><p>Pay attention to the following:</p><ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">The following SSL configuration steps are required to set up the integration.\n\n\t<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 48px; position: relative;\">Import the Service Management CA certificate to the OBM connected server or Global Trust store.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 48px; position: relative;\">Add the OBM CA certificate to the Endpoint used by the Integration Studio.</li></ol></li><li style=\"margin-left: 28px; position: relative;\">In case On-Premise Bridge (OPB) is required\n\t<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 48px; position: relative;\">Import the Service Management CA certificate into the On-Premises Bridge Agent's <strong>cacerts </strong>file (because Service Management allows only https requests).</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 48px; position: relative;\">Import the OBM certificate into the OPB Key store.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 48px; position: relative;\">If you stop the On-Premise-Bridge service, synchronization from OBM to Service Management still works. This is because synchronization from OBM to Service Management doesn't use OPB; instead, it uses REST API calls. On the other hand, synchronization from Service Management to OBM uses OPB, and you can stop the synchronization in this direction by stopping the OPB service.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 48px; position: relative;\">When you configure the OBM credentials record in OPB's Endpoint Credentials Manager, you should use the user name and password defined in the Incoming Connection setting in the connected server in OBM.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 48px; position: relative;\">Incident IDs created in Service Management aren't necessarily sequential. For example, ID 17080 may follow 17077. This is because some schedules may occupy incident numbers (for example, external reference or incident approval).</li></ol></li></ul><p>The following provides the steps to set up the integration, as well as instructions on how to customize the integration.</p><h3 id=\"Prerequisites\"><a id=\"Step_1_Prerequisites\" name=\"Step_1_Prerequisites\" title=\"Step 1: Prerequisites\"></a><a id=\"Step-1-Prerequisites\" name=\"Step-1-Prerequisites\" title=\"Step 1: Prerequisites\"></a>Step 1: Prerequisites</h3><p>Make sure to meet the following prerequisites:</p><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Service Management is installed, and a tenant is set up.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">OBM is installed and configured.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">For supported product versions, visit the <a class=\"external text\" href=\"/supportmatrix/integrations/100\" rel=\"nofollow\" target=\"1\" title=\"Integration Central\">Integration Central</a> website.</li></ol><h4><a id=\"1_1_Prepare_an_integration_user\" name=\"1_1_Prepare_an_integration_user\" title=\"1.1 Prepare an integration user\"></a><a id=\"1-1-Prepare-an-integration-user\" name=\"1-1-Prepare-an-integration-user\" title=\"1.1 Prepare an integration user\"></a>1.1 Prepare an integration user</h4><p>Perform the following steps to prepare an integration user:</p><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Create an integration user. For details, see <a href=\"/doc/423/26.1/createuser\" title=\"How to create a user\">How to create an integration user</a>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Log in to the agent portal as the tenant admin.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Navigate to <strong>Administration</strong> &gt; <strong>Master Data</strong> &gt; <strong>People &gt; Roles</strong>, and create a new role with <strong>View </strong>permissions for the <strong>External reference</strong>, <strong>External system and Incident</strong> record types.<br/><a class=\"image\" href=\"\"><img alt=\"Record type view permission\" src=\"../../../images/RecordType_SMAX_7cf21332.png\" style=\"width: 636px; height: 104px;\"/></a></li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\"><p>Navigate to <strong>Administration &gt; Master Data &gt; People</strong>, locate the integration user, and then assign the <b>OPB Remote Agent</b> role and the newly created role to the user.</p></li></ol><h4><a id=\"1_2_Configure_the_external_system_record\" name=\"1_2_Configure_the_external_system_record\" title=\"1.2 Configure the external system record\"></a><a id=\"1-2-Configure-the-external-system-record\" name=\"1-2-Configure-the-external-system-record\" title=\"1.2 Configure the external system record\"></a>1.2 Configure the external system record</h4><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">From the agent interface, navigate to <b>Administration &gt; Integration &gt; External Systems</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <strong>New</strong> to add a new External System.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Enter a System ID<strong>.</strong> This will be the identifier of the OBM External System. In this example, we use <strong>EventManagement</strong>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Enter a description.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Select an authorized user. This should be the integration user account that you created in step 1.1.<br/><br/><a class=\"image\" href=\"\"><img alt=\"External System\" border=\"1\" file=\"https://staging.docs.microfocus.com/mediawiki/images/c/cf/ExternalSystemOT.PNG\" hspace=\"0\" src=\"../../../images/ExternalSystemOT_57d0bc35.png\" style=\"width:800px;height:554px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:1px solid black;\" vspace=\"0\"/></a></li></ol><h4><a id=\"1_3_Prepare_the_Groovy_Script\" name=\"1_3_Prepare_the_Groovy_Script\" title=\"1.3 Prepare the Groovy Script\"></a><a id=\"1-3-Prepare-the-Groovy-Script\" name=\"1-3-Prepare-the-Groovy-Script\" title=\"1.3 Prepare the Groovy Script\"></a>1.3 Prepare the Groovy Script</h4><p>To integrate with your Service Management instance, OBM exchanges JSON-based REST messages with Service Management.</p><p>To configure the Groovy script adapter, you must configure some Service Management parameters in the Groovy script.</p><p>Download the latest <b>SMAGroovyAdapter</b> script from the <a href=\"https://marketplace.opentext.com/itom/content/obm-integration-with-service-management\" title=\"ITOM Marketplace\">ITOM Marketplace</a>. You may need to log in with your Software Passport. Select the correct adapter for your version of OBM.</p><p>Open the Groovy script with a text editor, and update the following parameters (located just after the import statements from the top). Keep other parameters as it is.</p><table><tbody><tr><td><b>Parameter</b></td><td><b>Description</b></td><td><b>Required/Optional</b></td></tr><tr><td>is_using_SMAX_Integration_Studio</td><td>Set to <strong>true</strong> if incident updates from Service Management to OBM are sent via the Service Management Integration Studio as described in this document. If incident updates are sent directly from the Service Management External System (the classic integration), set this flag to <strong>false</strong>.</td><td>Required</td></tr><tr><td>is_used_In_OpScope</td><td>Set to <strong>true</strong> if this script is used in an environment where OpScope is deployed. If used in an OBM (Classic or Containerized) system, set it to <strong>false</strong>. This flag determines which event drill-down URL is sent to the Service Management incident.</td><td>Required</td></tr><tr><td>is_used_In_SaaS</td><td>Set to <strong>true</strong> if this script is used in an OBM instance in SaaS, otherwise set it to <strong>false</strong>. If set to <strong>true</strong>, ensure the OBM tenant Id is properly set. The tenant Id is appended to the drill-down URL.</td><td>Required</td></tr><tr><td>OBM_TENANTID</td><td>The tenant Id of the OpScope or OBM instance/organization. Required when the OBM system is running in multi-tenant mode or when <strong>is_used_in_SaaS</strong> is set to <strong>true</strong>.</td><td>Required</td></tr><tr><td>SMA_TENANTID</td><td>The tenant Id for the Service Management instance where events will be forwarded.</td><td>Required</td></tr><tr><td>EXTERNAL_SYSTEM_ID</td><td>Set to the System ID defined in the External System record created in Service Management. We use <em>EventManagement</em> in this document. See the <em>Configure the external system record</em> section above.</td><td>Required</td></tr><tr><td>ADMINISTRATOR_LOGIN_NAME</td><td>Set to a valid Service Management user account with the appropriate permissions to update incidents. Set it to the integration user that you configured in step 1.1. </td><td>Required</td></tr><tr><td>DESCRIPTION</td><td>A default description used for the created incident when no description is entered for the event.</td><td>Optional</td></tr><tr><td>COMPLETION_CODE</td><td>The completion code to use when posting a solution from the event to the incident. The default value is <b>SuccessfulDiagnosis</b>.</td><td>Optional, but must be a valid Completion code in Service Management</td></tr><tr><td>URGENCY</td><td>Defines the <b>Severity</b> of the incident in Service Management when the property isn't specified for the event.</td><td>Optional, but must be a valid Urgeny value in Service Management</td></tr><tr><td>IMPACT_SCOPE</td><td>Defines the <b>Impact</b> of the incident in Service Management when the property isn't specified for the event.</td><td>Optional, but must be a valid Impact value in Service Management</td></tr><tr><td>SERVICE</td><td>Defines the <b>Service</b> of the incident in Service Management when the property isn't specified for the event.</td><td>Optional, but must be a valid Service in Service Management</td></tr><tr><td>SERVICE_DESK_GROUP</td><td>Defines the <b>Service desk group</b> of the incident in Service Management when the property isn't specified for the event.</td><td>Optional, but must be a valid Service Desk Group in Service Management</td></tr><tr><td>CATEGORY</td><td>Defines the <b>Category</b> of the incident in Service Management when the property isn't specified for the event.</td><td>Optional, but must be a valid Category in Service Management</td></tr></tbody></table><div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div><p>If necessary, the communication between Service Management and OBM can be done via a proxy server. For details, see the comments for PROXY_HOST &amp; PROXY_PORT in the Groovy script.</p></div></div></div><h3><a id=\"Step_2_Configure_OBM\" name=\"Step_2_Configure_OBM\" title=\"Step 2: Configure OBM\"></a><a id=\"Step-2-Configure-OBM\" name=\"Step-2-Configure-OBM\" title=\"Step 2: Configure OBM\"></a>Step 2: Configure OBM</h3><p><span style=\"color: rgb(0, 0, 0); font-family: Roboto, sans-serif;\">2.1 Import the </span>Service Management <span style=\"color: rgb(0, 0, 0); font-family: Roboto, sans-serif;\">certificate into OBM trust store</span></p><div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div><p> In SaaS, ask the SaaS Ops team to import the certificate into the OBM system.</p></div></div></div><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Get the suite CA certificate. For detailed steps, see <a href=\"/doc/423/26.1/getsuitecacertificate\" target=\"_blank\" title=\"Suite CA certificate\">Get the suite CA certificate</a>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Copy the suite CA certificate file or files to:\n\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\"><strong>C:\\HPBSM\\bin</strong> (Windows)</li><li style=\"margin-left: 40px; position: relative;\"><strong>/opt/HP/BSM/bin</strong> (Linux)\n\t\t<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>If you are using Containerized OBM, copy the certificate files to one of the worker nodes and then use kubectl cp to copy them to the OBM container. For example, if the file name is sma_CA.cer and the Kubernetes namespace is opsbridge1, run this command:<br/><code># kubectl cp -c omi sma_CA.cer opsbridge1/omi-0:/opt/HP/BSM/bin/sma_CA.cer</code></div></div></div></li></ul></li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">On the system running OBM, perform the following steps.\n\t<p><b>Windows (Classic)</b>:</p><p><b>Linux</b>:</p><p>If it's a Classic OBM installation, do the following:</p><p>If it's a Containerized OBM installation, you need to enter the container and then run the commands from within the container as the <b>omiuser</b> user as described below:</p><ol start=\"1\" style=\"padding-left: 0px;\"><li style=\"--number-width: 21px; --number-spacing: 25px; margin-left: 49px; position: relative;\">Open a command prompt and run the following command to import the certificate:\n\t\t<pre>C:\\HPBSM\\bin&gt;opr-cert-mgmt.bat -import &lt;alias name&gt; &lt;certificate name&gt;.cer</pre></li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">Restart OBM:\n\t\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 52px; position: relative;\">Windows 2008: Select <b>Start &gt; Programs &gt; Operations Bridge Manager &gt; Administration &gt; Enable Operations Bridge Manager</b>.</li><li style=\"margin-left: 52px; position: relative;\">Windows 2012: Press <b>Ctrl</b> + <b>Esc</b> and start typing <b>Enable Operations Bridge Manager</b>. Then click <b>Enable Operations Bridge Manager</b> in the search results.</li></ul></li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">Run the following command to import the certificate:\n\t\t<pre># cd /opt/HP/BSM/bin\n# ./opr-cert-mgmt.sh -import &lt;alias name&gt; &lt;certificate name&gt;.cer\n</pre></li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">Go to <strong>/opt/HP/BSM/scripts</strong> and run the following command to restart OBM:\n\t\t<pre># cd /opt/HP/BSM/scripts  \n# ./run_hpbsm restart\n</pre></li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">From a worker node, run the following commands:\n\t\t<pre># kubectl exec -ti omi-0 -c omi -n opsbridge1 bash \n# su omiuser  ## '''NOTE''': don't get a login shell \n$ cd /opt/HP/BSM/bin\n$ ./opr-cert-mgmt.sh -import &lt;alias name&gt; &lt;certificate name&gt;.cer \n</pre></li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">Go to <strong>/opt/HP/BSM/scripts</strong> and then run the following commands to restart OBM:\n\t\t<pre>$ cd /opt/HP/BSM/scripts  \n$ ./run_hpbsm restart \n</pre></li></ol></li></ol><p><strong>Example</strong></p><p>For example, if you are on a Service Management demonstration environment and a Windows OBM server, perform the following steps:</p><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Copy the suite CA certificate<b> </b>file to the <b>C:\\HPBSM\\bin</b> folder on the OBM server.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">On the OBM server, open a command prompt and run the following command to import the certificate (where <b>smax </b>is used as the alias name):\n\t<pre>C:\\HPBSM\\bin&gt;opr-cert-mgmt.bat -import smax &lt;suite CA certificate file&gt;</pre></li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Restart OBM as described above.</li></ol><h4><a id=\"2_2_Configure_Service_Management_as_a_connected_server_in_OBM\" name=\"2_2_Configure_Service_Management_as_a_connected_server_in_OBM\" title=\"2.2 Configure Service Management as a connected server in OBM\"></a><a id=\"2-2-Configure-Service-Management-as-a-connected-server-in-OBM\" name=\"2-2-Configure-Service-Management-as-a-connected-server-in-OBM\" title=\"2.2 Configure Service Management as a connected server in OBM\"></a>2.2 Configure Service Management as a connected server in OBM</h4><div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div><p> In SaaS, ask the SaaS Ops team to configure the connected server in OBM.</p></div></div></div><p>To synchronize OBM events and event changes with Service Management incidents, you must configure a connected server in OBM to correctly identify the target Service Managementinstance. To achieve this, configure Service Managementas a target connected server in the Connected Servers manager. For details about how to configure a connected server, see the Connecting Servers section in the OBM documentation.</p><p>To configure Service Managementas a target connected server, perform the following steps:</p><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Navigate to the Connected Servers manager in OBM:<strong> ADMINISTRATION &gt; SETUP AND MAINTENANCE &gt; Connected Servers</strong>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>External Event Processing &gt; New</b> to open the <strong>Create External Event Processing Server</strong> page.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the<strong> General</strong> section, perform the following steps:\n\t<ol start=\"1\" style=\"padding-left: 0px;\"><li style=\"--number-width: 21px; --number-spacing: 25px; margin-left: 49px; position: relative;\">In the <strong>Display label</strong> field, enter the desired name for the connected server.</li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">In the <strong>Identifier</strong> field, enter a value that will be used in the Service Management endpoint as the username to connect to OBM.</li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">Enter a description for the new target server (Optional)</li></ol></li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the <strong>Server Properties</strong> section, perform the following steps:\n\t<ol start=\"1\" style=\"padding-left: 0px;\"><li style=\"--number-width: 22px; --number-spacing: 26px; margin-left: 50px; position: relative;\">In the <strong>Fully qualified domain name</strong> field, enter the fully qualified domain name of The Service Management system.</li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">In the <strong>CI type</strong> field, select <strong>Service Manager System</strong>.</li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">In the <strong>Delivery options</strong> field, select <strong>Serial</strong><br/><a class=\"image\" href=\"\"><img alt=\"OBM Server Properties\" src=\"../../../images/OBM_Server_Properties2_0c29aa7a.png\" style=\"width: 807px; height: 626px;\"/></a></li></ol></li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the<strong> Integration Type</strong> section, perform the following steps:\n\t<ol start=\"1\" style=\"padding-left: 0px;\"><li style=\"--number-width: 21px; --number-spacing: 25px; margin-left: 49px; position: relative;\"><p>Select <b>Call Script Adapter</b> as the integration type.</p></li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\"><p>Click the <b>Manage Scripts</b> button below the <strong>Script name</strong> field.</p><div><a class=\"image\" href=\"\"><img alt=\"OBM Connected Server - scripts\" border=\"1\" file=\"https://staging.docs.microfocus.com/mediawiki/images/9/99/OBM_ConnectedServer2.PNG\" hspace=\"0\" src=\"../../../images/OBM_ConnectedServer2_30b5e71e.png\" style=\"width:800px;height:306px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:1px solid black;\" vspace=\"0\"/></a></div></li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\"><p>Click <b>New (*)</b> to create a new script.</p></li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\"><p>Enter <b>sa:ServiceManagementAutomationAdapter</b> in the <strong>Display Name</strong> field.</p><div><a class=\"image\" href=\"\"><img alt=\"Groovy Script\" border=\"1\" file=\"https://staging.docs.microfocus.com/mediawiki/images/4/47/SMAX_OMI_1.png\" hspace=\"0\" src=\"../../../images/SMAX_OMI_1_93257076.png\" style=\"width:800px;height:203px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:1px solid black;\" vspace=\"0\"/></a></div></li><li style=\"--number-width: 24px; --number-spacing: 28px; margin-left: 52px; position: relative;\"><p>Click the <strong>Script</strong> tab, and then replace the default script with the content of the <b>SMAGroovyAdapter</b> script that you updated in step 1.3. Set the <strong>Timeout</strong> in the Advanced section to 60000 ms and click <b>CREATE</b>.</p></li><li style=\"--number-width: 24px; --number-spacing: 28px; margin-left: 52px; position: relative;\"><p>Back in the Connected Server UI, select the Groovy script you just configured in the <strong>Script name</strong> field.</p></li></ol></li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the <strong>Outgoing Connection </strong>section, enter the account credentials specified in the Service Management External System record's <b>Authorized User</b> property:\n\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">In the <b>User Name</b> field, enter the username for the integration user that you set up in Service Management in step 1.2.</li><li style=\"margin-left: 40px; position: relative;\">In the <b>Password</b> field, enter the password for the integration user you just specified.</li><li style=\"margin-left: 40px; position: relative;\">In the <b>Port</b> field, specify the secure port for Service Management. The default SSL port is <b>443</b>. Make sure that the <b>Use secure HTTP</b> check box is selected.</li></ul></li><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Select <b>Enable Synchronize and Transfer Control</b>.\n\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">If <b>Enable Synchronize and Transfer Control</b> is selected, an OBM operator can transfer ownership of the event to the target connected server using the Transfer Control option in the Event Browser context menu.</li><li style=\"margin-left: 40px; position: relative;\">If it's not selected, the Synchronize and Transfer Control option isn't available from the Event Browser context menu or from the list of forwarding types for configuring forwarding rules.</li></ul></li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the <strong>Incoming Connection</strong> section, perform the following steps:\n\t<ol start=\"1\" style=\"padding-left: 0px;\"><li style=\"--number-width: 21px; --number-spacing: 25px; margin-left: 49px; position: relative;\">Select the <strong>Accept event changes from external event processing server</strong> checkbox.</li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">The <b>User name</b> is auto-generated, which is the same as the <b>Display label</b> that you specified for the External Event Processing server; enter the password for the user. You need to enter the username and password in the Service Management Endpoint or OPB configuration, depending on whether you choose the agent or agentless integration mode.<br/><a class=\"image\" href=\"\"><img alt=\"OBM connected server - incoming connection\" border=\"1\" file=\"https://staging.docs.microfocus.com/mediawiki/images/7/75/OBM_ConnectedServer3.PNG\" hspace=\"0\" src=\"../../../images/OBM_ConnectedServer3_d88654c5.png\" style=\"width:800px;height:266px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:1px solid black;\" vspace=\"0\"/></a></li></ol></li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the <b>Event Drilldown</b> section, perform the following steps:\n\t<ol start=\"1\" style=\"padding-left: 0px;\"><li style=\"--number-width: 21px; --number-spacing: 25px; margin-left: 49px; position: relative;\">In the <b>Fully qualified domain name</b> field, enter the external access hostname of the Service Management instance.</li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">Keep the default value (443) for the port number.</li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\"><p>Select <b>Use secure HTTP</b>.</p><p>The <b>URL</b> is auto-generated according to the settings above.</p><div><a class=\"image\" href=\"\"><img alt=\"OBM Connected Server - event drill down\" border=\"1\" file=\"https://staging.docs.microfocus.com/mediawiki/images/4/4a/OBM_ConnectedServer4.PNG\" hspace=\"0\" src=\"../../../images/OBM_ConnectedServer4_55c81b6a.png\" style=\"width:800px;height:310px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:1px solid black;\" vspace=\"0\"/></a></div></li></ol></li><li style=\"--number-width: 19px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click the <b>Run Test</b> button.<br/>\n\tA Success or ERROR hyperlink is displayed. Click the link to get more details.<br/>\n\tSee the following examples:<br/><b>Error:</b> Ping failed due to the following error: Request to Connected Server <strong>'Sample Name'</strong> on node <strong>'sample.hostname'</strong> failed with <code>exception: java.net.UnknownHostException</code>.<br/><b>Solution:</b> Check to ensure that the hostname for the Service Management server is correct.<br/><br/><b>Error:</b> Ping failed due to the following error: HTTP request to Connected Server <strong>'Sample Name'</strong> on node <strong>'sample.hostname'</strong> failed with HTTP status: (500) Internal Server Error.<br/><b>Solution:</b> Check to ensure that the Groovy Adapter properties for <strong>SMA_TENANTID</strong> and <strong>EXTERNAL_SYSTEM_ID</strong> and the username and password are correct. Also check to ensure that all of these settings correspond to the External System record settings within Service Management.<br/><br/>\n\tMake sure the result is successful.<br/><a class=\"image\" href=\"\"><img alt=\"SMAX omi intg test connection.png\" data-file-height=\"770\" data-file-width=\"1108\" src=\"../../../images/600px-SMAX_omi_intg_test_connection_49fb3718.png\" style=\"width: 600px; height: 417px;\"/></a></li><li style=\"--number-width: 17px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click the <b>Create</b> button.</li></ol><h4 class=\"mw-headline\" id=\"Step_5:_Configure_an_event_forwarding_rule\"><a id=\"2_3_Configure_event_forwarding_rules\" name=\"2_3_Configure_event_forwarding_rules\" title=\"2.3 Configure event forwarding rules\"></a><a id=\"2-3-Configure-event-forwarding-rules\" name=\"2-3-Configure-event-forwarding-rules\" title=\"2.3 Configure event forwarding rules\"></a>2.3 Configure event forwarding rules</h4><p>The next step is to configure an event forwarding rule that determines which events are automatically forwarded to Service Management. Refer to the OBM documentation for more details about configuring filters.</p><p>The following example describes how to open a Service Management incident ticket when the OBM event's Severity is Critical, by setting a new Event Filter <b>FilterCritical</b> in <b>Event Forwarding Rules</b>.<br/>\nTo configure a forwarding rule, perform the following steps:</p><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Navigate to the Forwarding Rules manager in the OBM user interface: <b>ADMINISTRATION &gt; EVENT PROCESSING&gt; Event Forwarding</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>New </b>to open the <strong>New Event Forwarding Rule</strong> pane.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the <b>Display Name</b> field, enter a name for the forwarding rule. In this example, we use <b>Forward Critical (Sync and Transfer Control)</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Enter a description for the forwarding rule you are creating (optional).</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Make sure the <b>Activate Rule after creation</b> check box is selected. A rule must be active for its status to be available in Service Management.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Browse</b> next to the <strong>Event Filter</strong> field. The <strong>EVENT FILTERS</strong> pane opens.</li><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the <strong>Select an Event Filter</strong> dialog box, do one of the following:\n\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">Select an existing filter</li><li style=\"margin-left: 40px; position: relative;\">Create a new filter as follows:\n\t\t<ol start=\"1\" style=\"padding-left: 0px;\"><li style=\"--number-width: 19px; --number-spacing: 24px; margin-left: 60px; position: relative;\">Click <b>New</b> to open the <strong>CREATE FILTER</strong> pane.</li><li style=\"--number-width: 23px; --number-spacing: 27px; margin-left: 63px; position: relative;\">In the <b>Name</b> field, enter a name for the new filter. In this example, we use <b>FilterCritical</b>.</li><li style=\"--number-width: 23px; --number-spacing: 27px; margin-left: 63px; position: relative;\">Click <strong>ADD CONDITION</strong>, select the <b>Severity</b>, and select <b>Critical</b>.</li><li style=\"--number-width: 23px; --number-spacing: 27px; margin-left: 63px; position: relative;\">Click <b>SAVE</b>. You should see your new filter in the <strong>EVENT FILTERS</strong> pane (select it, if it's not already highlighted).</li><li style=\"--number-width: 22px; --number-spacing: 26px; margin-left: 62px; position: relative;\">Click <b>CLOSE</b>.</li></ol></li></ul></li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\"><p>Under <b>TARGET SERVERS</b>, select the target connected server you configured in step 2.2. In this example, this is <b>Service Management</b>.</p></li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\"><p>Click the <b>Add target server</b> dropdown list next to the <strong>Target Servers</strong> field. You can now see the connected server's details.</p></li><li style=\"--number-width: 19px; --number-spacing: 24px; margin-left: 36px; position: relative;\"><p>In the <b>Forwarding Type</b> field, select the <b>Synchronize</b> forwarding type.</p></li><li style=\"--number-width: 17px; --number-spacing: 24px; margin-left: 36px; position: relative;\"><p>Click <b>CREATE</b>.</p></li></ol><p>For more information on configuring an Event Forwarding Rule, refer to the OBM documentation.</p><div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div><p>It's important to minimize system overload resulting from the creation of multiple incidents in Service Management. It's recommended to use advanced filters such that events generated from failures to communicate with Service Management don't attempt to generate incidents for Service Management.</p></div></div></div><h3 class=\"mw-headline\"><a id=\"Step_3_Configure_Service_Management\" name=\"Step_3_Configure_Service_Management\" title=\"Step 3: Configure Service Management\"></a><a id=\"Step-3-Configure-Service-Management\" name=\"Step-3-Configure-Service-Management\" title=\"Step 3: Configure Service Management\"></a>Step 3: Configure Service Management </h3><p>Configuring Service Management to communicate with OBM involves configuring an Agent (optional), an Endpoint, and an Integration record. These settings are used by Service Management to synchronize events back to OBM.  It's recommended to create a dedicated user account for this integration. We recommend to re-use the user account created in step 1.1. Do not use the account of a real user who will log in via the browser and update tickets through the Service Management user interface. </p><ol style=\"padding-left: 0px;\"></ol><h4 class=\"mw-headline\" id=\"Step_2.2:_Configure_a_Service_Management_agent_in_Service_Management\"><a id=\"3_1_Configure_an_agent_in_Service_Management_optional_\" name=\"3_1_Configure_an_agent_in_Service_Management_optional_\" title=\"3.1 Configure an agent in Service Management (optional)\"></a><a id=\"3-1-Configure-an-agent-in-Service-Management-optional\" name=\"3-1-Configure-an-agent-in-Service-Management-optional\" title=\"3.1 Configure an agent in Service Management (optional)\"></a>3.1 Configure an agent in Service Management (optional)</h4><div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div><p>This step is only required when Service Management cannot directly connect to OBM.</p></div></div></div><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">From the Service Management user interface, navigate to <b>Administration &gt; Integration &gt; Agents</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Add</b> to add a new agent.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Specify a name for the agent. In this example, we will use <b>OBM_Agent</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Enter a description (optional).</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Download connection file</b>.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Save the downloaded <strong>server-connection.conf</strong> file for later use.</li></ol><h4 id=\"Step_2.3:_Download,_install,_and_configure_the_On-Premises_Bridge_agent_on_a_local_server\"><a id=\"3_2_Set_up_the_On_Premises_Bridge_OPB_agent_on_a_local_server\" name=\"3_2_Set_up_the_On_Premises_Bridge_OPB_agent_on_a_local_server\" title=\"3.2 Set up the On-Premises Bridge(OPB) agent on a local server\"></a><a id=\"3-2-Set-up-the-On-Premises-Bridge-OPB-agent-on-a-local-server\" name=\"3-2-Set-up-the-On-Premises-Bridge-OPB-agent-on-a-local-server\" title=\"3.2 Set up the On-Premises Bridge(OPB) agent on a local server\"></a><span class=\"mw-headline\" id=\"Step_2.3:_Download.2C_install.2C_and_configure_the_On-Premises_Bridge_agent_on_a_local_server\">3.2 Set up the On-Premises Bridge(OPB) agent on a local server</span></h4><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">From the Service Management Agents page, click <b>Download agent</b> in the top right corner to download the file.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Install the downloaded On-Premises Bridge agent on a local Windows server. The agent will act as a forwarding agent to send Service Management incident updates back to OBM. Follow the on-screen instructions and enter the appropriate credentials and proxy information for Service Management. For more information, see <a href=\"/doc/423/26.1/onpremisebridge\" title=\"SMAX:25.1/OnPremiseBridge\">On-Premises Bridge Agents and Endpoints</a>.<br/><br/>\n\tIn the following example, the OPB agent is installed on the OBM server, so a proxy server is not required. A proxy is only needed when OBP must access APIs in a different environment, such as a managed cloud setup on a separate network.<br/><br/><s><a class=\"image\" href=\"\"><img alt=\"On Premise Bridge User\" border=\"1\" data-file-height=\"444\" data-file-width=\"620\" file=\"https://staging.docs.microfocus.com/mediawiki/images/thumb/f/f0/SMAX_omi_intg_install_opb.png/600px-SMAX_omi_intg_install_opb.png\" hspace=\"0\" src=\"../../../images/600px-SMAX_omi_intg_install_opb_8008c6cd.png\" style=\"width:600px;height:430px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:1px solid black;\" vspace=\"0\"/></a></s></li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Copy the <strong>server-connection.conf</strong> file downloaded in the previous section to <b>&lt;Agent_installation_directory&gt;/product/conf</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Import the Service Management CA certificate to the On-Premises Bridge (OPB) Agent's <strong>cacerts </strong>file. This is required because Service Management allows only https requests.\n\t<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 22px; --number-spacing: 26px; margin-left: 50px; position: relative;\">Get the Service Management CA certificate file. For details, see <a href=\"/doc/423/26.1/getsuitecacertificate\" target=\"_blank\" title=\"Suite CA certificate\">Get the suite CA certificate file</a>.</li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">Import the Service Management CA certificate file into the OPB Agent's cacerts file. For details, see <a href=\"/doc/423/26.1/opbinstall#Import_the_suite_CA_certificate_to_the_OPB_trusted_keystore\" title=\"Import the suite CA certificate into the OPB\">Import the suite CA certificate into the OPB's trusted keystore</a>.</li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">Restart the On-Premises Bridge Agent service from Windows services.</li></ol></li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Download the OBM server certificate from the browser\n\t<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 21px; --number-spacing: 25px; margin-left: 49px; position: relative;\">Open the OBM URL in a browser: https://[FQDN]/omi.</li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">Download the OBM certificate. Refer to your browser's documentation for instructions to download the certificate. The following steps illustrates the procedure to download the certificate on Chrome browser on Windows:\n\t\t<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 34px; --number-spacing: 38px; margin-left: 74px; position: relative;\">Click the padlock icon in the address bar.</li><li style=\"--number-width: 37px; --number-spacing: 41px; margin-left: 77px; position: relative;\">Click the <strong>Show certificate</strong> icon in the popup that appears.</li><li style=\"--number-width: 37px; --number-spacing: 41px; margin-left: 77px; position: relative;\">In the <strong>Certificate Viewer</strong>, go to the <strong>Details</strong> tab &gt; <strong>Certificate Fields </strong>&gt;<strong></strong>Select the OBM server hostname.</li><li style=\"--number-width: 38px; --number-spacing: 42px; margin-left: 78px; position: relative;\">Click <b>Export</b>. </li><li style=\"--number-width: 37px; --number-spacing: 41px; margin-left: 77px; position: relative;\">Save the OBM certificate. For example, <b>omi_cert.cer</b>.</li></ol></li></ol></li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Import the OBM certificate to the OPB CE Key store. \n\t<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 21px; --number-spacing: 25px; margin-left: 49px; position: relative;\"> Copy the <strong>omi_cert.cer</strong> file to the OPB folder: <strong>C:\\ProgramData\\MicroFocus\\On-Premise Bridge Agent\\product\\util\\opb</strong>.</li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">Use the following Windows commands to import the OBM certificate into the OPB CE Key store:\n\t\t<pre>cd C:\\ProgramData\\MicroFocus\\On-Premise Bridge Agent\\product\\util\\opb\nimport_ldap_certs.bat\n</pre><div><a class=\"image\" href=\"\"><img alt=\"Import certificate into OPB\" border=\"1\" data-file-height=\"137\" data-file-width=\"659\" file=\"https://staging.docs.microfocus.com/mediawiki/images/thumb/d/dd/SMAX_omi_intg_import_cert_finish.png/600px-SMAX_omi_intg_import_cert_finish.png\" hspace=\"0\" src=\"../../../images/600px-SMAX_omi_intg_import_cert_finish_e11935f9.png\" style=\"width:600px;height:125px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:1px solid black;\" vspace=\"0\"/></a></div></li></ol></li><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Launch the Endpoint Credentials Manager for the On-Premises Bridge agent. The shortcut is located in the <b>Start</b> menu under <b>MicroFocus &gt; On-Premises Bridge Agent</b>. You can also find the shortcut <strong>Endpoint Credentials Manager</strong> from the On-Premises Bridge Agent installation folder.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>New</b>.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Make sure that the target endpoint type is <b>Rest Executor Domain 2.0</b>.</li><li style=\"--number-width: 19px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Select <strong>Basic Authentication</strong> as Auth type.</li><li style=\"--number-width: 17px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Enter a name for this credential. In this example, we use <b>OBM</b>.</li><li style=\"--number-width: 19px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Enter the user and password information (repeat the password in the <b>Confirm password</b> field) for the user specified in step 2.2. The credentials will be used as OBM credentials for sending incident updates to OBM. In this example, we set the user to <b>Service Management</b>. <br/><a class=\"image\" href=\"\"><img alt=\"On Premise Bridge Endpoint\" border=\"1\" file=\"https://staging.docs.microfocus.com/mediawiki/images/5/50/OPB_OBM2.PNG\" hspace=\"0\" src=\"../../../images/OPB_OBM2_bfa7b06c.png\" style=\"width: 800px; height: 484px; margin: 0px; border: 1px solid black;\" vspace=\"0\"/></a></li><li style=\"--number-width: 19px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Save</b> and close the Endpoint Credentials Manager.</li><li style=\"--number-width: 19px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Restart the On-Premises Bridge agent service.</li><li style=\"--number-width: 19px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Check the <b>controller.log</b> under the default installation directory <strong>C:\\ProgramData\\MicroFocus\\On-Premise Bridge Agent\\product\\log\\controller</strong>. Make sure there is no error in the log file.</li></ol><p>For more information, see <a href=\"/doc/423/26.1/opbinstall\" title=\"SMAX:25.1/OpbInstall\">How to use On-Premises Bridge agents on Windows</a> and <a href=\"/doc/423/26.1/opbinstalllinux\" title=\"SMAX:25.1/OpbInstallLinux\">How to use On-Premises Bridge agents on Linux</a>.</p><h4 class=\"mw-headline\" id=\"Step_2.4:_Configure_a_Service_Management_endpoint\"><a id=\"3_3_Configure_a_Service_Management_endpoint\" name=\"3_3_Configure_a_Service_Management_endpoint\" title=\"3.3 Configure a Service Management endpoint\"></a><a id=\"3-3-Configure-a-Service-Management-endpoint\" name=\"3-3-Configure-a-Service-Management-endpoint\" title=\"3.3 Configure a Service Management endpoint\"></a>3.3 Configure a Service Management endpoint</h4><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">From the Service Management user interface, navigate to <b>Administration &gt; Integration &gt; Endpoints</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <strong>New</strong> to add a new endpoint.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the Endpoint type field, select <strong>Rest Executor 2.0</strong>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the Endpoint name field, enter a name for this endpoint. In this example, we use <strong>OBM_Endpoint</strong>.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <strong>Add</strong>.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <strong>Configure</strong> and complete the fields depending on whether the endpoint needs to use the OPB Agent.</li></ol><p>If the endpoint doesn't use the OPB Agent, complete these fields.</p><table><tbody><tr><th><p><b>Field</b></p></th><th><p><b>Value</b></p></th></tr><tr><td>Agent</td><td>Select <strong>Agentless</strong> for a direct connection to OBM.</td></tr><tr><td>Authentication type</td><td>Select <strong>Basic Authentication</strong>.</td></tr><tr><td>Protocol</td><td>Select <strong>https</strong>.</td></tr><tr><td>Base URL</td><td><p>Enter the URL of the OBM Server: <strong>https://[FQDN]/opr-gateway/.</strong> For example: <strong>https://host.domain.com/opr-gateway/.</strong></p></td></tr><tr><td>Username</td><td>Enter the username of the integration user from the OBM system. It is mentioned in Step 2.2.</td></tr><tr><td>Password</td><td>Enter the password of the integration user from the OBM System. It is mentioned in Step 2.2.</td></tr><tr><td>Confirm password</td><td>Re-enter the password.</td></tr><tr><td>Certificate type</td><td>Select <strong>X.509</strong></td></tr><tr><td>Certificate format</td><td>Select <strong>PEM</strong></td></tr><tr><td><p>Server certificate</p></td><td><p>Open the root CA certificate file in a text editor, and copy and paste the content to this field. If the content is invalid, an error occurs when you click <strong>Save</strong> in the next step. </p><p>The certificate content must resemble the following.</p><p><br/><code>-----BEGIN CERTIFICATE-----<br/>\n\t\t\tMIIF2TCCBMGgAwIBAgIQBMF1U8hY8bivE0+JHx922jANBgkqhkiG9w0BAQsFADBG<br/>\n\t\t\tMQswCQYDVQQGEwJVUzEPMA0GA1UEChMGQW1hem9uMRUwEwYDVQQLEwxTZXJ2ZXIg<br/>\n\t\t\tQ0EgMUIxDzANBgNVBAMTBkFtYXpvbjAeFw0yMTEwMTEwMDAwMDBaFw0yMjExMDky<br/>\n\t\t\tMzU5NTlaMBsxGTAXBgNVBAMTEHhpZS5pdHNtYS1uZy5vcmcwggEiMA0GCSqGSIb3<br/>\n\t\t\t1oIvQfpl2gj0S6JSJAYjJnY7HKCa7mkzBMiiXWI5aHMZfl1FsaNARM10LUpto61f<br/>\n\t\t\tIvk/SDNlOqVXuzGMTZkJBVZVmK5lNLvBB1Gk9+QlJ+SuUOW7FW2K5U+oQKWsHtvH<br/>\n\t\t\tC/DHn6yyhvqWes9q6A==<br/>\n\t\t\t-----END CERTIFICATE-----</code></p></td></tr></tbody></table><p>Example:</p><h4 class=\"mw-headline\" id=\"Step_2.5:_Configure_the_Service_Management_external_system_record\"><a class=\"image\" href=\"\"><img alt=\"Endpoint\" border=\"1\" file=\"https://staging.docs.microfocus.com/mediawiki/images/0/0c/EndPoint_OBM_11.PNG\" hspace=\"0\" src=\"../../../images/EndPoint_OBM_11_6c09224d.png\" style=\"width: 800px; height: 640px; margin: 0px; border: 1px solid black;\" vspace=\"0\"/></a></h4><p>(Optional) If the endpoint needs to use the On-Premise-Bridge Agent, complete the following fields instead.</p><table><tbody><tr><th><p><b>Field</b></p></th><th><p><b>Value</b></p></th></tr><tr><td>Agent</td><td>Select the <strong>OBM_Agent</strong> that you have created in step 3.1</td></tr><tr><td>Authentication type</td><td>Select <strong>Basic Authentication</strong>.</td></tr><tr><td>Protocol</td><td>Select <strong>https</strong>.</td></tr><tr><td>Base URL</td><td><p>Enter the URL of the OBM Server: <strong>https://[FQDN]/opr-gateway/</strong>. For example, <strong>https:// host.domain.com/opr-gateway/</strong>.</p></td></tr><tr><td>Credential</td><td><p>Select the credentials record that you've created for the endpoint in the Endpoint Credentials Manager in step 3.2.</p><p>For example, <strong>OBM.</strong></p></td></tr></tbody></table><h3 class=\"mw-headline\" id=\"Step_4:_Configure_SMAX_as_an_OMi_connected_server\"><a class=\"image\" href=\"\"><img alt=\"Endpoint with agent\" border=\"1\" file=\"https://staging.docs.microfocus.com/mediawiki/images/9/9d/EndPoint_OBM_Agent11.png\" hspace=\"0\" src=\"../../../images/EndPoint_OBM_Agent11_6be3563c.png\" style='color: rgb(51, 51, 51); font-family: Roboto, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"; font-size: 16px; width: 800px; height: 403px; margin: 0px; border: 1px solid black;' vspace=\"0\"/></a></h3><h4><a id=\"3_4_Configure_the_Service_Management_Integration_Studio_integration\" name=\"3_4_Configure_the_Service_Management_Integration_Studio_integration\" title=\"3.4: Configure the Service Management Integration Studio integration\"></a><a id=\"3-4-Configure-the-Service-Management-Integration-Studio-integration\" name=\"3-4-Configure-the-Service-Management-Integration-Studio-integration\" title=\"3.4: Configure the Service Management Integration Studio integration\"></a>3.4: Configure the Service Management Integration Studio integration</h4><p>This step is required to send updates back to OBM when the Service Management incident is updated.</p><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">From the Service Management user interface, navigate to <b>Administration &gt; Integration &gt; Integration Studio</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <strong>New</strong> to add a new integration.\n\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">Enter a name for the integration.</li><li style=\"margin-left: 40px; position: relative;\">Select OpenText Operations Bridge Manager as the connector.</li><li style=\"margin-left: 40px; position: relative;\">Select the endpoint you created in step 3.3.</li></ul></li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the <strong>Current system integration user</strong> field, set the integration user you created in the Prerequisite step.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Activate the integration by selecting the <strong>Active</strong> checkbox.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <strong>Save</strong>.<br/><a class=\"image\" href=\"\"><img alt=\"Integration Studio OBM\" border=\"1\" file=\"https://staging.docs.microfocus.com/mediawiki/images/5/50/OBM_Integration.PNG\" hspace=\"0\" src=\"../../../images/OBM_Integration_5c0046ee.png\" style=\"width: 800px; height: 415px; margin: 0px; border: 1px solid black;\" vspace=\"0\"/></a></li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <strong>Add Scenario</strong>.\n\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">Enter a name for the scenario. Example: <strong>Update Event</strong>.</li><li style=\"margin-left: 40px; position: relative;\">Select the template <strong>Update event</strong>.</li></ul></li><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <strong>Save</strong>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the Settings rule of the <b>Update</b><strong> Event </strong>scenario, enter the External System Id you created in step 1.2. In this example, we use <strong>EventManagement</strong>.\n\t<div class=\"admonition\"><div class=\"admonition-icon admonition-tip-icon\"></div><div class=\"admonition-content admonition-tip-content\"><div>Ensure the external system Id is wrapped by single quotes.</div></div></div></li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\"><a class=\"image\" href=\"\"><img alt=\"Integration Studio OBM settings\" border=\"1\" file=\"https://staging.docs.microfocus.com/mediawiki/images/6/65/OBM_Integration_Settings.PNG\" hspace=\"0\" src=\"../../../images/OBM_Integration_Settings_9414f632.png\" style=\"width:624px;height:441px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:1px solid black;\" vspace=\"0\"/></a></li></ol><h4><a id=\"3_5_Configure_a_business_rule_to_send_incident_updates_to_OBM\" name=\"3_5_Configure_a_business_rule_to_send_incident_updates_to_OBM\" title=\"3.5: Configure a business rule to send incident updates to OBM\"></a><a id=\"3-5-Configure-a-business-rule-to-send-incident-updates-to-OBM\" name=\"3-5-Configure-a-business-rule-to-send-incident-updates-to-OBM\" title=\"3.5: Configure a business rule to send incident updates to OBM\"></a>3.5: Configure a business rule to send incident updates to OBM</h4><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Go to Studio and select the <strong>Incident</strong> record type.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Select the <strong>Incident</strong> workflow.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the section <strong>After applying changes</strong>, click add and select <strong>If .... then</strong> rule</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Select <strong>Call Integration Studio </strong>rule.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Within the newly added rule\n\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">Select the integration and scenario created in step 3.4</li><li style=\"margin-left: 40px; position: relative;\">Configure the following condition for this rule:\n\t\t<pre><code>${(entity.MetaPhase.NewValue=='fix' || entity.MetaPhase.NewValue=='validate' || entity.MetaPhase.NewValue=='close') &amp;&amp; (current_update.Description.IsChanged || current_update.DisplayLabel.IsChanged || current_update.PhaseId.IsChanged || current_update.Solution.IsChanged) &amp;&amp; current_user.Upn != '&lt;The UPN of the Integration User&gt;' &amp;&amp; lookup('ExternalReference','ExternalSystem.SystemId','EntityType','Incident','EntityId',entity.Id,'ExternalSystem.SystemId','&lt;External SystemID&gt;')=='&lt;External SystemID&gt;'}</code></pre></li><li style=\"margin-left: 40px; position: relative;\">Replace the following placeholders in the condition:\n\t\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 52px; position: relative;\"><strong>&lt;The UPN of the Integration User&gt;</strong>: The integration user from the prerequisite step 1.1</li><li style=\"margin-left: 52px; position: relative;\"><strong>&lt;External SystemID&gt;</strong>: The external system ID from step 1.2. We use EventManagement in this example</li></ul></li></ul></li></ol><h3><a id=\"Step_4_Verify_the_integration\" name=\"Step_4_Verify_the_integration\" title=\"Step 4: Verify the integration\"></a><a id=\"Step-4-Verify-the-integration\" name=\"Step-4-Verify-the-integration\" title=\"Step 4: Verify the integration\"></a>Step 4: Verify the integration</h3><p>Verify the integration from both systems.</p><h4 class=\"mw-headline\" id=\"Step_6.1:_Sync_OMi_events_to_SMAX_incidents\"><a id=\"4_1_Sync_OBM_events_to_Service_Management_incidents\" name=\"4_1_Sync_OBM_events_to_Service_Management_incidents\" title=\"4.1: Sync OBM events to Service Management incidents\"></a><a id=\"4-1-Sync-OBM-events-to-Service-Management-incidents\" name=\"4-1-Sync-OBM-events-to-Service-Management-incidents\" title=\"4.1: Sync OBM events to Service Management incidents\"></a>4.1: Sync OBM events to Service Management incidents</h4><p>When an incident is created, you can click a link from the OBM event. This launches Service Management and takes you to the created incident. Use your Service Management credentials to log in.</p><p>To test the connection, send an event to the server hosting OBM that matches the filter you defined (in our example filter, the severity value is <b>Critical</b>), and then verify that the event is forwarded to Service Management as expected.</p><p>To do this, perform the following steps:</p><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">On the system running OBM, open a command prompt and change to the following directory: <strong>&lt;HPBSM root directory&gt;\\opr\\support</strong>. For example:\n\n\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\"><b>Windows</b>: <code>cd C:\\HPBSM\\opr\\support </code></li><li style=\"margin-left: 40px; position: relative;\"><b>Linux (Classic OBM)</b>: <code>cd /opt/HP/BSM/opr/support</code></li><li style=\"margin-left: 40px; position: relative;\"><b>Containerized OBM</b>: Enter the omi-0 container and then run the commands from within the container. To do this, from one of the worker nodes, run the following commands:\n\t\t<pre><code># kubectl exec -ti omi-0 -c omi -n opsbridge1 bash \n# su omiuser \n$ cd /opt/HP/BSM/opr/support</code></pre></li></ul></li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Send an event by using the following command:\n\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">Windows: \n\t\t<pre><code>sendevent -s critical -t testtest-1</code></pre></li><li style=\"margin-left: 40px; position: relative;\">Linux: \n\t\t<pre><code>sh sendEvent.sh -s critical -t testtest-1</code></pre></li></ul></li></ol><p>You may encounter the following issue:</p><pre>Request to http://localhost:2317/opr-gateway/EventReceiver failed with status code 503:\nError: Reception of events using sendEvent is disabled. To enable it go to Infrastructure Settings -&gt; Send Event Settings\n</pre><p>To resolve this issue, follow these steps:</p><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Log in to OBM as admin: <strong>https://[FQDN_OBM]/obm or https://[FQDN_OMi]/omi.</strong></li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Go to <b>ADMINISTRATION &gt; SETUP AND MAINTENANCE &gt; Infrastructure Settings</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Update the value of <b>Enable sendEvent</b> to <strong>true</strong>.<br/><a class=\"image\" href=\"\"><img alt=\"abc\" border=\"0\" file=\"/mediawiki/images/1/16/SMAX_OMI_3.png\" hspace=\"0\" src=\"../../../images/SMAX_OMI_3_61a9fc25.png\" style=\"width: 800px; height: 147px; margin: 0px; border: 0px solid black;\" vspace=\"0\"/></a><br/>\n\t </li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Run the command again. Events should be sent correctly.<br/><a class=\"image\" href=\"\"><img alt=\"SMAX omi intg events sent.png\" data-file-height=\"101\" data-file-width=\"854\" src=\"../../../images/800px-SMAX_omi_intg_events_sent_e3024e27.png\" style=\"width: 800px; height: 95px;\"/></a></li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Verify that the event appears in the OBM Event Browser.<br/>\n\tFrom the OBM UI, go to <b>WORKSPACES &gt;</b> <b>OPERATIONS CONSOLE</b>, and then select <b>Event Perspective</b>.<br/>\n\tYou should be able to find an event that was just created.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Expand <strong>More details</strong>, and then click <strong>Forwarding Info</strong>.<br/><a class=\"image\" href=\"\"><img alt=\"Forward Event\" border=\"1\" file=\"https://staging.docs.microfocus.com/mediawiki/images/7/72/SMAX_OMI_4.png\" hspace=\"0\" src=\"../../../images/SMAX_OMI_4_1b83011b.png\" style=\"width:800px;height:217px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:1px solid black;\" vspace=\"0\"/></a><br/>\n\t </li><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the <strong>External ID</strong> field, you should see a valid Service Management incident ID.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Verify that the incident appears in the Incident Details in Service Management:\n\t<p>If the event drill-down connection is configured correctly, you can click <strong>Show Details in External Application</strong>. A browser window opens, which takes you directly to the Incident details in Service Management, if you are already logged in. If you aren't logged in, you are taken to the Service Management login page.</p><p>If the event drill-down connection isn't configured, do the following:</p>\n\ta. In the Forwarding tab in the OBM Event Browser, copy the incident ID from the <strong>External Id</strong> field.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the Service Management user interface, click the global search icon at the top right of the UI.\n\t<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 21px; --number-spacing: 25px; margin-left: 49px; position: relative;\"><p>Paste the incident ID into the search field.</p></li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\"><p>Click the Search button.</p></li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\"><p>Click the Incident ID from the search results to view the incident details.</p><div><a class=\"image\" href=\"\"><img alt=\"SMAX Incident\" border=\"1\" file=\"https://staging.docs.microfocus.com/mediawiki/images/5/5d/202305SMAX_OMI_5.png\" hspace=\"0\" src=\"../../../images/202305SMAX_OMI_5_d970392e.png\" style=\"width:800px;height:289px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:1px solid black;\" vspace=\"0\"/></a></div></li></ol></li><li style=\"--number-width: 19px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Check the OBM event's current status from the Service Management incident record (<b>General &gt; External assignment</b>). You can drill down by clicking the URL. <a class=\"image\" href=\"\"><img alt=\"SMAX Incident\" border=\"1\" data-file-height=\"679\" data-file-width=\"1575\" file=\"https://staging.docs.microfocus.com/mediawiki/images/thumb/1/16/SMAX_omi_intg_check_event_in_incident.png/800px-SMAX_omi_intg_check_event_in_incident.png\" hspace=\"0\" src=\"../../../images/800px-SMAX_omi_intg_check_event_in_incident_b3d96e39.png\" style=\"width:800px;height:345px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:1px solid black;\" vspace=\"0\"/></a></li><li style=\"--number-width: 17px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Check the OBM event's update history from the Service Management incident's Discussions section.<br/><a class=\"image\" href=\"\"><img alt=\"SMAX omi intg check event history from incident.png\" border=\"0\" data-file-height=\"869\" data-file-width=\"1553\" file=\"https://staging.docs.microfocus.com/mediawiki/images/thumb/6/6d/SMAX_omi_intg_check_event_history_from_incident.png/800px-SMAX_omi_intg_check_event_history_from_incident.png\" hspace=\"0\" src=\"../../../images/800px-SMAX_omi_intg_check_event_history_from_incident_5de6d29b.png\" style=\"width:800px;height:448px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\"/></a></li></ol><p>Next, check the synchronization from Service Management incident to OBM event.</p><h4 class=\"mw-headline\" id=\"Step_6.2:_Sync_SMAX_incidents_to_OMi_events\"><a id=\"4_2_Sync_Service_Management_incidents_to_OBM_events\" name=\"4_2_Sync_Service_Management_incidents_to_OBM_events\" title=\"4.2: Sync Service Management incidents to OBM events\"></a><a id=\"4-2-Sync-Service-Management-incidents-to-OBM-events\" name=\"4-2-Sync-Service-Management-incidents-to-OBM-events\" title=\"4.2: Sync Service Management incidents to OBM events\"></a>4.2: Sync Service Management incidents to OBM events</h4><p>If you make some changes to an incident in the Resolution metaphase in Service Management, it will be reflected in OBM. Click the <b>General</b> tab of the incident, go to the <b>External assignment</b> section, and then click the URL link for the OBM remote system. This launches OBM and directly opens the event. You should see that the event details are updated.</p><p><b>Note</b>: For an OBM integration to work properly, the affected incidents must be in the Resolution metaphase. Further, you should check <b>Service Management &gt; Administration &gt; Utilities &gt; Integration &gt; External Systems</b> and ensure that you aren't logged in there as the Authorized user. Perform the following steps:</p><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Update the incident and move it to the Review phase with a resolution.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">From the Endpoints page, check that a REST call success message is displayed as shown below.<br/><a class=\"image\" href=\"\"><img alt=\"SMAX omi intg check REST call msg.png\" data-file-height=\"536\" data-file-width=\"2000\" src=\"../../../images/800px-SMAX_omi_intg_check_REST_call_msg_7bfbf410.png\" style=\"width: 800px; height: 214px;\"/></a><br/>\n\tIf the REST call failed as shown below, check the details of the failed step.<br/><a class=\"image\" href=\"\"><img alt=\"SMAX omi intg check REST call failed.png\" data-file-height=\"731\" data-file-width=\"2014\" src=\"../../../images/800px-SMAX_omi_intg_check_REST_call_failed_0040a221.png\" style=\"width: 800px; height: 290px;\"/></a><br/><br/>\n\tIn OBM, check that the event state has changed to Resolved, and the solution is synced from the incident.<br/><a class=\"image\" href=\"\"><img alt=\"Event\" border=\"1\" file=\"https://staging.docs.microfocus.com/mediawiki/images/0/01/SMAX_OMI_6.png\" hspace=\"0\" src=\"../../../images/SMAX_OMI_6_666b808c.png\" style=\"width:800px;height:183px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:1px solid black;\" vspace=\"0\"/></a></li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">You can also view the event updates from the event's History page.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Close the incident from Service Management.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">From the Service Management incident (<b>General &gt; External assignment</b>), check the OBM event's current status.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Check the OBM event from the OBM Perspective view. The status is closed.</li></ol><h2 class=\"mw-headline\" id=\"Step_7:_Customize_attribute_synchronization\"><a id=\"How_to_customize_attribute_synchronization\" name=\"How_to_customize_attribute_synchronization\" title=\"How to customize attribute synchronization\"></a><a id=\"How-to-customize-attribute-synchronization\" name=\"How-to-customize-attribute-synchronization\" title=\"How to customize attribute synchronization\"></a>How to customize attribute synchronization</h2><p>By default, not all attributes are synchronized from OBM to Service Management in every instance. When the Service Management incident is initially created from an OBM event, all properties required for incident creation in Service Management are populated with values from the event attributes, and other properties are populated with default values as configured in the Service Management Groovy adapter. After the initial incident creation, whenever the incident or event changes, only some of the event and incident attributes are synchronized.</p><p>The following describes how to customize the list of attributes to synchronize upon changes.</p><h3 class=\"mw-headline\" id=\"Attributes_required_for_incident_creation\"><a id=\"Attributes_required_for_incident_creation\" name=\"Attributes_required_for_incident_creation\" title=\"Attributes required for incident creation\"></a><a id=\"Attributes-required-for-incident-creation\" name=\"Attributes-required-for-incident-creation\" title=\"Attributes required for incident creation\"></a>Attributes required for incident creation</h3><p>The following attributes must be transferred from OBM to Service Management at the time of initial event creation. The transfer of control of the event is configured in the Connected Servers manager.</p><p>Most of these attributes have a default value, which can be set in the Groovy script adapter for Service Management:</p><ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">Title</li><li style=\"margin-left: 28px; position: relative;\">Description</li><li style=\"margin-left: 28px; position: relative;\">Severity</li><li style=\"margin-left: 28px; position: relative;\">Category</li><li style=\"margin-left: 28px; position: relative;\">Assigned Group</li><li style=\"margin-left: 28px; position: relative;\">Most Critically Affected Business Service</li></ul><p>In Service Management, Priority is a calculated value based on Urgency and Impact. An event's severity is mapped to an incident's Urgency, and since there is no Impact attribute for events, a default value for Impact is specified in Service Management.</p><p>If you want to change the out-of-the-box behavior regarding the attributes that are updated, you must specify the attributes in a Groovy script. You should specify:</p><ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\"> fields that are updated in Service Management</li><li style=\"margin-left: 28px; position: relative;\">fields that are posted to Service Management as comments</li><li style=\"margin-left: 28px; position: relative;\">fields that are updated in the OBM event from Service Management</li><li style=\"margin-left: 28px; position: relative;\">custom properties from Service Management and OBM</li></ul><p>You can also specify custom attributes in the Groovy script.</p><h3 class=\"mw-headline\" id=\"Tips_for_customizing_Groovy_scripts\"><a id=\"Tips_for_customizing_Groovy_scripts\" name=\"Tips_for_customizing_Groovy_scripts\" title=\"Tips for customizing Groovy scripts\"></a><a id=\"Tips-for-customizing-Groovy-scripts\" name=\"Tips-for-customizing-Groovy-scripts\" title=\"Tips for customizing Groovy scripts\"></a>Tips for customizing Groovy scripts</h3><p>This section provides some tips about customizing Groovy scripts. Below we provide a few examples of what can be customized. Check the configuration section of a Groovy script to see additional items that can be modified. In the configuration section of a Groovy script, you can define and modify the attributes that will be synchronized between OBM and Service Management. The configuration section also contains the default value mappings for the following fields:</p><ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">Category</li><li style=\"margin-left: 28px; position: relative;\">Completion code</li><li style=\"margin-left: 28px; position: relative;\">Description</li><li style=\"margin-left: 28px; position: relative;\">Impact scope</li><li style=\"margin-left: 28px; position: relative;\">Service</li><li style=\"margin-left: 28px; position: relative;\">Service desk group</li><li style=\"margin-left: 28px; position: relative;\">Urgency</li></ul><p>You can also modify these default values, as well as the mappings for enumerated properties. More advanced configuration can be done in other parts of the Groovy script, if necessary.</p><p>The beginning and the end of the configuration section of a Groovy script is marked as follows:</p><div class=\"example\"><pre>// ****************************************************************************************************\n\n// BEGIN MAPPING AND CUSTOMIZATION\n\n// ****************************************************************************************************\n\n…\n\n…\n\n// ****************************************************************************************************\n\n// END MAPPING AND CUSTOMIZATION\n\n// ****************************************************************************************************</pre></div><div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div><p>Modifications to Groovy scripts aren't overwritten by upgrades, patches or hotfixes; your customized version of a script will remain. If you want to adopt a newer version of a script, follow the instructions documented in step 1.3, and then re-apply your changes.</p></div></div></div><h4 class=\"mw-headline\" id=\"Controlling_attribute_synchronization\"><a id=\"Controlling_attribute_synchronization\" name=\"Controlling_attribute_synchronization\" title=\"Controlling attribute synchronization\"></a><a id=\"Controlling-attribute-synchronization\" name=\"Controlling-attribute-synchronization\" title=\"Controlling attribute synchronization\"></a>Controlling attribute synchronization</h4><p>You can control how updates to attributes are synchronized from OBM to Service Management by setting variables in the Groovy script. Variables with the word <b>Comments</b> in the name define the properties that are posted to Service Management as comments.</p><p>Use the following properties to define the properties that are synchronized on a Create Incident action:</p><pre><code>private static final Set SyncOPRPropertiesToSMAOnCreate = [\"initiated_by\", \"category\", \"assigned_group\", \"drill_down_url\"]\n\nprivate static final Set SyncOPRPropertiesToSMACommentsOnCreate = [\"initiated_by\", \"time_created\", \"time_received\",\"related_ci\"]</code></pre><p>Use the following properties to define the properties that are always synchronized:</p><pre><code>private static final Set SyncOPRPropertiesToSMA = [\"title\", \"description\", \"state\", \"severity\", \"solution\", \"cause\"]\n\nprivate static final Set SyncOPRPropertiesToSMAComments = [\"title\", \"description\", \"state\", \"time_state_changed\", \"severity\", \"priority\", \"annotation\", \"duplicate_count\", \"cause\", \"symptoms\", \"assigned_user\", \"assigned_group\", \"control_transferred_to\"]</code></pre><p>Edit the following variable to define the properties that are synchronized to OBM event properties:</p><pre><code>private static final Set SyncSMAPropertiesToOPR = [\"DisplayLabel\", \"Description\", \"PhaseId\", \"Solution\"]</code></pre><div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div><p>Remember to go back and update the Outgoing exchange payloads from the External System record to ensure that Service Management sends the data to be synchronized to OBM.</p></div></div></div><p>Edit the following variables to control which enumerated values in the corresponding OBM Event State, Severity, and Priority fields to synchronize with the Service Management Incident PhaseId, Urgency and Priorities fields:</p><pre><code>private static final Set SyncOPRStatesToSMA = [\"closed\"]\n\nprivate static final Set SyncOPRSeveritiesToSMA = [\"*\"]\n\nprivate static final Set SyncOPRPrioritiesToSMA = [\"*\"]\n\nprivate static final Set SyncSMAPhasesToOPR = [\"Validate\", \"Close\"]\n\nprivate static final Set SyncSMAUrgenciesToOPR = [\"*\"]\n\nprivate static final Set SyncSMAPrioritiesToOPR = [\"*\"]</code></pre><p>Edit the following variables to define the custom attributes to synchronize between OBM and Service Management:</p><pre><code>private static final Map&lt;String, String&gt; MapOPR2SMACustomAttribute = [:]\n\nprivate static final Map&lt;String, String&gt; MapSMA2OPRCustomAttribute = [:]</code></pre><p>Example:</p><pre><code>private static final Map&lt;String, String&gt; MapOPR2SMACustomAttribute = [\"CustomOMiEventAttribute\":\"CustomSMAAttribute_c\"]</code></pre><div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div><p>Remember to go back and update the Outgoing exchange payloads from the External System record to ensure that Service Management sends the data to be synchronized to OBM.</p></div></div></div><p>Edit the following map variables to control the mapping of the corresponding enumeration values between the OBM Event and Service Management Incidents:</p><pre><code>private static final Map MapOPRState2SMAPhase = [\"open\": \"Classify\", \"in_progress\": \"InitialSupport\", \"resolved\": \"Validate\", \"closed\": \"Close\"]\n\nprivate static final Map MapSMAPhase2OPRState = [\"Log\": \"open\", \"Classify\": \"open\", \"InitialSupport\": \"in_progress\", \"Escalate\": \"in_progress\", \"Validate\": \"resolved\", \"Close\": \"closed\"]\n\nprivate static final Map MapOPRSeverity2SMAUrgency = [\"critical\": \"TotalLossOfService\", \"major\": \"SevereDisruption\", \"minor\": \"SlightDisruption\", \"warning\":\"NoDisruption\", \"normal\": \"NoDisruption\", \"unknown\": \"NoDisruption\"]\n\nprivate static final Map MapSMAUrgency2OPRSeverity = [\"TotalLossOfService\":\"critical\", \"SevereDisruption\":\"major\", \"SlightDisruption\":\"minor\", \"NoDisruption\":\"normal\"]\n\nprivate static final Map MapOPR2SMAPriority = [\"highest\": \"CriticalPriority\", \"high\": \"HighPriority\", \"medium\": \"MediumPriority\", \"low\": \"LowPriority\", \"lowest\": \"4\", \"none\": \"4\"]\n\nprivate static final Map MapSMA2OPRPriority = [\"CriticalPriority\": \"highest\", \"HighPriority\": \"high\", \"MediumPriority\": \"medium\", \"LowPriority\": \"low\"]</code></pre><p>The following configurable properties can be synchronized to Service Management incident properties:</p><ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">drill_down_url</li><li style=\"margin-left: 28px; position: relative;\">title</li><li style=\"margin-left: 28px; position: relative;\">description</li><li style=\"margin-left: 28px; position: relative;\">severity</li><li style=\"margin-left: 28px; position: relative;\">solution</li><li style=\"margin-left: 28px; position: relative;\">state</li><li style=\"margin-left: 28px; position: relative;\">category</li><li style=\"margin-left: 28px; position: relative;\">assigned_user</li><li style=\"margin-left: 28px; position: relative;\">assigned_group</li><li style=\"margin-left: 28px; position: relative;\">initiated_by</li><li style=\"margin-left: 28px; position: relative;\">cause</li><li style=\"margin-left: 28px; position: relative;\">symptom</li></ul><p>The following configurable properties can be synchronized to Service Management comments:</p><ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">Id</li><li style=\"margin-left: 28px; position: relative;\">title</li><li style=\"margin-left: 28px; position: relative;\">description</li><li style=\"margin-left: 28px; position: relative;\">state</li><li style=\"margin-left: 28px; position: relative;\">priority</li><li style=\"margin-left: 28px; position: relative;\">severity</li><li style=\"margin-left: 28px; position: relative;\">service</li><li style=\"margin-left: 28px; position: relative;\">category</li><li style=\"margin-left: 28px; position: relative;\">subcategory</li><li style=\"margin-left: 28px; position: relative;\">application</li><li style=\"margin-left: 28px; position: relative;\">object</li><li style=\"margin-left: 28px; position: relative;\">original_data</li><li style=\"margin-left: 28px; position: relative;\">assigned_group</li><li style=\"margin-left: 28px; position: relative;\">assigned_user</li><li style=\"margin-left: 28px; position: relative;\">time_created</li><li style=\"margin-left: 28px; position: relative;\">time_received</li><li style=\"margin-left: 28px; position: relative;\">time_state_changed</li><li style=\"margin-left: 28px; position: relative;\">solution</li><li style=\"margin-left: 28px; position: relative;\">initiated_by</li><li style=\"margin-left: 28px; position: relative;\">related_ci</li><li style=\"margin-left: 28px; position: relative;\">control_transferred_to</li><li style=\"margin-left: 28px; position: relative;\">cause</li><li style=\"margin-left: 28px; position: relative;\">symptoms</li><li style=\"margin-left: 28px; position: relative;\">duplicate_count</li></ul><p>The following configurable properties can be synchronized to OBM Events:</p><ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">DisplayLabel</li><li style=\"margin-left: 28px; position: relative;\">Description</li><li style=\"margin-left: 28px; position: relative;\">Urgency</li><li style=\"margin-left: 28px; position: relative;\">Priority</li><li style=\"margin-left: 28px; position: relative;\">PhaseId</li><li style=\"margin-left: 28px; position: relative;\">Solution</li></ul><div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div><p>Additional out-of-the-box properties can be mapped using the option to synchronize custom attribute mapping.</p></div></div></div><h4><a id=\"Controlling_the_properties_sent_to_OBM\" name=\"Controlling_the_properties_sent_to_OBM\" title=\"Controlling the properties sent to OBM\"></a><a id=\"Controlling-the-properties-sent-to-OBM\" name=\"Controlling-the-properties-sent-to-OBM\" title=\"Controlling the properties sent to OBM\"></a>Controlling the properties sent to OBM</h4><p>The payloads for each of the outgoing exchange operations may be updated to add additional properties to synchronize back to OBM Events. To update the payload, update parameters in the <strong>Update Event </strong>scenario in the Integration Studio accordingly.</p><p>You can add additional data to send to OBM in the properties array of the payload in the <strong>Update Event</strong> rule. Make sure the properties are returned by the <strong>Get Incident details</strong> rule.</p><div><a class=\"image\" href=\"\"><img alt=\"OBM update event step\" border=\"1\" file=\"https://staging.docs.microfocus.com/mediawiki/images/5/54/OBM_Integration_Step.PNG\" hspace=\"0\" src=\"../../../images/OBM_Integration_Step_41996954.png\" style=\"width: 800px; height: 652px; margin: 0px; border: 1px solid black;\" vspace=\"0\"/></a></div><p>Check the OBM log file (<strong>&lt;OBM root directory&gt;/log/opr-scripting-host/opr-event-sync-adapter.log</strong>) for errors related to parsing the Service Management update payloads.</p><p>Set the log4j debug level in <strong>&lt;HPBSM root directory&gt;/conf/core/Tools/log4j/opr-scripting-host/opr-event-sync-adapter.properties</strong> to get additional debug and error messages in the <strong>opr-event-sync-adapter.log</strong>.</p><p class=\"mw-headline\" id=\"Mapping_OPR_lifecycle_states_to_Service_Management_phases\"><strong>Mapping OPR lifecycle states to Service Management phases</strong></p><p>Individual OPR event state and Service Management incident phase changes may be selected for synchronization. By default, only the <b>closed</b> state is synchronized. To change this behavior, add the desired states to the <b>SyncOPRStatesToSMA</b> list.</p><p>See the following example:</p><div class=\"example\"><pre><code>private static final Set SyncOPRStatesToSMA = [\"closed\", \"in_progress\", \"resolved\"]</code></pre><p>In the example, the OPR event lifecycle states <b>closed</b>, <b>in_progress</b>, and <b>resolved</b> are synchronized to the Service Management incident phases.</p></div><div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div><p>The special state<strong> *</strong> denotes all states. To synchronize all OPR event states to the Service Management incident phase Id property, specify the following:</p><p><code>private static final Set SyncOPRStatesToSMA = [\"<strong>*</strong>\"]</code></p></div></div></div><p>Additionally, maps are used to specify the mapping between OPR event attributes and Service Management incident fields. The maps are named <b>MapOPRState2SMAPhase</b>, <b>MapOPRSeverity2SMAUrgency</b>, and <b>MapOPR2SMAPriority</b>. Out of the box, all possible values have a mapping.</p><p>See the following example:</p><div class=\"example\"><pre><code>private static final Map MapOPRState2SMAPhase = [\"open\": \"Classify\", \"in_progress\": \"InitialSupport\", \"resolved\": \"Validate\", \"closed\": \"Close\"]\n\nprivate static final Map MapOPRSeverity2SMAUrgency = [\"critical\": \"TotalLossOfService\", \"major\": \"SevereDisruption\", \"minor\": \"SlightDisruption\", \"warning\":\"NoDisruption\", \"normal\": \"NoDisruption\", \"unknown\": \"NoDisruption\"]\n\nprivate static final Map MapOPR2SMAPriority = [\"highest\": \"CriticalPriority\", \"high\": \"HighPriority\", \"medium\": \"MediumPriority\", \"low\": \"LowPriority\", \"lowest\": \"4\", \"none\": \"4\"]</code></pre><h2><a id=\"Apply_update_for_using_Aviator_in_cross_domain_integration\" name=\"Apply_update_for_using_Aviator_in_cross_domain_integration\" title=\"Apply update for using Aviator in cross-domain integration\"></a>Apply update for using Aviator in cross-domain integration</h2><div><span class=\"snippet-start\" data-sname=\"cross-domain-integration-update-for-aviator\"></span><p>If Aviator capability is enabled, update the Suite configuration to allow seamless cross-domain integration You can skip this configuration update if you already applied it during Service Management  installation or upgrade.</p><p>The placeholder used in the commands in this section are as follows:</p><ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\"><strong>&lt;release name&gt;:</strong> The release name.</li><li style=\"margin-left: 28px; position: relative;\"><strong>&lt;suite namespace&gt;</strong>:  Unique namespace of the ESM deployment.</li><li style=\"margin-left: 28px; position: relative;\"><strong>&lt;ESM helm chart path&gt;</strong>: Path to the helm charts tar file. This file is located in the <strong>charts </strong>folder.</li></ul><p>Complete the following steps to update the configuration.</p><ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Run the following command. If it returns <strong>SMAX_AUTH_TOKEN_COOKIE_SAMESITE: None,</strong> the cross‑domain setup is complete and you can skip the remaining steps.\n\n\t<pre><code>kubectl get cm itom-bo-configmap -n &lt;suite namespace&gt; -o yaml | grep \"SMAX_AUTH_TOKEN_COOKIE_SAMESITE: None\"</code></pre></li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Get the deployment YAML values into a file named <strong>my-values.yaml</strong>.\n\t<pre><code>helm get values &lt;release name&gt; -n &lt;suite namespace&gt; &gt; my-values.yaml</code></pre></li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Run the following command to apply configuration update.\n\t<pre><code>helm upgrade &lt;release name&gt; &lt;ESM helm chart path&gt; -n &lt;suite namespace&gt; -f my-values.yaml -f &lt;ESM helm chart path&gt;/samples/enableSMAXAuthTokenSameSiteNone-values.yaml\n</code></pre></li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Restart the pods.\n\t<pre><code>kubectl rollout restart deployment itom-bo-login-deployment -n &lt;suite namespace&gt;</code></pre></li></ol><style type=\"text/css\">a {\n    text-decoration: none;\n    color: #464feb;\n}\ntr th, tr td {\n    border: 1px solid #e6e6e6;\n}\ntr th {\n    background-color: #f5f5f5;\n}\n</style><span class=\"snippet-end\" data-sname=\"cross-domain-integration-update-for-aviator\"></span></div><h3><a id=\"Aviator_limitations_in_cross_domain_integration_scenarios\" name=\"Aviator_limitations_in_cross_domain_integration_scenarios\" title=\"Aviator limitations in cross-domain integration scenarios\"></a>Aviator limitations in cross-domain integration scenarios</h3><div><span class=\"snippet-start\" data-sname=\"aviator limitation in cross-domain scenarios\"></span><p>The following limitations apply to Aviator users in cross-domain integration scenarios. An example of cross-domain integration scenario is when your Suite deployment is integrated with other products such as AI Operations Management (AIOM) or Universal Discovery and CMDB (UD/UCMDB) for information exchange.</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">\n<p>If you open Aviator in a private browsing mode, such as Incognito in Chrome, it may not return any responses to your requests.</p>\n</li><li style=\"margin-left: 28px; position: relative;\">\n<p>While using Aviator, if the session times out, you may be asked to log in again.</p>\n</li></ul>\n<span class=\"snippet-end\" data-sname=\"aviator limitation in cross-domain scenarios\"></span></div><h3><a id=\"Troubleshooting\" name=\"Troubleshooting\" title=\"Troubleshooting\"></a><span style=\"color: rgb(0, 115, 231); font-family: Roboto, sans-serif; font-size: 24px;\">Troubleshooting</span></h3></div><p>For troubleshooting information, see <a href=\"/doc/423/26.1/troubleshootomiintegration\" title=\"Troubleshoot the OBM integration\">Troubleshoot the OBM integration</a>.</p></div>",
  "modifiedon": "2025-12-16 07:42:23"
}