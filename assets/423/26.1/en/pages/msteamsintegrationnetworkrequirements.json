{
  "title": "Microsoft Teams integration network requirements",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>The Microsoft Teams (\"MS Teams\") integration requires bidirectional communications between Service Management and MS Teams. Depending on your environment, you can achieve this connectivity either without modifications or with certain enhancements to your network architecture. </p>\n<p>The following describes two typical Service Management networking scenarios and their requirements for MS Teams integration. In both scenarios, the integration uses the following URLs built on one of the FQDNs.</p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n<thead>\n<tr>\n<th scope=\"col\">URL</th>\n<th scope=\"col\">Built on</th>\n<th scope=\"col\">Note</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>URL registered on Azure for authentication callback</td>\n<td colspan=\"1\">\n<ul>\n<li>The custom domain configured for the tenant in Suite Administration (first priority)</li>\n<li>The external access host of Service Management (second priority)</li>\n</ul>\n</td>\n<td>You configure this URL on the Azure portal. See <a href=\"/doc/423/26.1/integratemsteamsthroughintegrationhub#Step_3._Register_the_SMAX_app_on_the_Azure_portal\" title=\"Register the SMAX app on the Azure portal\">Register the Service Management app on the Azure portal</a>.</td>\n</tr>\n<tr>\n<td>Azure consent URL</td>\n<td colspan=\"1\">\n<ul>\n<li>The custom domain configured for the tenant in Suite Administration (first priority)</li>\n<li>The external access host of Service Management (second priority)</li>\n</ul>\n</td>\n<td>The system generates this URL and displays it in the Authentication section on the integration configuration UI. See <a href=\"/doc/423/26.1/integratemsteamsthroughintegrationhub#Step_5._Connect_SMAX_with_MS_Teams\" title=\"Connect SMAX with MS Teams\">Connect Service Management with MS Teams</a>.</td>\n</tr>\n<tr>\n<td>MS Teams subscription URL</td>\n<td>\n<p>A public FQDN that is defined in <strong>itom-sma-xie-configmap</strong> via the <strong>public-fqdn</strong> parameter. The default value of the parameter is the external access host of Service Management.</p>\n<ul>\n<li>For public Service Management, use the default value.</li>\n<li>For private Service Management, you need to prepare a public FQDN and configure it in this parameter.</li>\n</ul>\n</td>\n<td>See Scenarios 1 and 2 described below</td>\n</tr>\n</tbody>\n</table>\n<h2>Scenario 1: Public Service Management</h2>\n<p>In this scenario, Service Management is reachable from the Internet. Here are typical environments for this scenario:</p>\n<ul>\n<li>Service Management deployed on <code><font face=\"monospace\">OpenText</font></code> SaaS</li>\n<li>Service Management deployed on a public cloud, where Service Management is open to the Internet</li>\n<li>Service Management deployed in an on-premises environment, where Service Management is open to the Internet</li>\n</ul>\n<p>The following diagram shows an example of this network architecture, where Integration Studio refers to the built-in Integration Studio of Service Management.</p>\n<div><a class=\"image\" href=\"/file/images/b/b5/SMAX_202105_teams_integ_network_public_new.png\" title=\"/file/images/b/b5/SMAX_202105_teams_integ_network_public_new.png\"> <img alt=\"SMAX_202105_teams_integ_network_public_new\" border=\"0\" file=\"/mediawiki/images/b/b5/SMAX_202105_teams_integ_network_public_new.png\" height=\"443\" hspace=\"0\" src=\"../../../images/SMAX_202105_teams_integ_network_public_new_95fedd0b.png\" style=\"width: 800px; height: 443px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></div>\n<p><strong>Steps in this architecture diagram</strong></p>\n<ol>\n<li>There's typically an external load balancer (<strong>External LB</strong>) exposing the external FQDN of Service Management (<strong>&lt;Service Management-external-FQDN&gt;</strong>) to users on the Internet. \n\n\t<div class=\"admonition\">\n<div class=\"admonition-icon admonition-important-icon\"></div>\n<div class=\"admonition-content admonition-important-content\"> <font face=\"monospace\">OpenText</font> encourages the customer to explicitly limit the IP/DNS range allowed access to the external LB endpoint, which is not provided by <code>OpenText</code>. By not implementing this measure you may be exposing the system to increased security risks. You understand and agree to assume all associated risks and hold <code>OpenText</code> harmless for the same. It remains at all times the Customer’s sole responsibility to assess its own regulatory and business requirements. <code>OpenText</code> doesn't represent or warrant that its products comply with any specific legal or regulatory standards applicable to Customer in conducting Customer's business.</div>\n</div>\n</li>\n<li>You can also use the same load balancer to establish inbound connectivity from MS Teams to Service Management for notifications.</li>\n<li>In the opposite direction, Service Management also needs to connect to MS Teams. You can establish this connectivity either via an HTTP proxy or directly through the firewall. </li>\n<li>Users connect to MS Teams directly through the Internet. </li>\n</ol>\n<p>You can achieve additional communication security by using your organization's existing web application firewall (WAF) (for inbound connectivity) and proxy filtering (for outbound connectivity). </p>\n<p><strong>More details</strong></p>\n<ul>\n<li>If a proxy is present in the environment, you need to configure it in the Service Management Suite Administration portal. See <a href=\"/doc/423/26.1/saconfig#Proxy_Settings_tab\" title=\"How to configure a proxy for SMAX\">How to configure a proxy for Service Management</a>.</li>\n<li>If a proxy and/or firewall is present in the environment with filtering enabled, you need to add the MS Teams FQDNs/IPs to the filter allowlist. See <a href=\"https://docs.microsoft.com/en-us/microsoft-365/enterprise/urls-and-ip-address-ranges?view=o365-worldwide#microsoft-365-common-and-office-online\" title=\"Office 365 URLs and IP address ranges\">Office 365 URLs and IP address ranges</a> for a list of FQDNs/IPs of MS Teams servers that need to be open in the proxy, firewall, or both (look for the section that includes <strong>graph.microsoft.com</strong> and <strong>login.microsoftonline.com</strong>).</li>\n<li>Normally no changes to the external LB WAF rules should be necessary, as this load balancer is already expected to route all URL paths to Service Management,including <strong>/xie/*</strong> URL paths used for MS Teams notifications.</li>\n</ul>\n<h2>Scenario 2: Private Service Management</h2>\n<p>In this scenario, Service Management isn't reachable from the Internet. Here are some typical environments for this scenario:</p>\n<ul>\n<li>Service Management deployed in an on-premises environment, where access to Service Management is limited to the corporate intranet</li>\n<li>Service Management deployed on a private or public cloud, where access to Service Management is limited to the corporate intranet (for example, via VPN)</li>\n</ul>\n<p>The following diagram shows an example of this network architecture, where <strong>XIE</strong> refers to the built-in Integration Studio of Service Management.</p>\n<div><a class=\"image\" href=\"/file/images/e/ed/SMAX_202105_teams_integ_network_private.png\" title=\"/file/images/e/ed/SMAX_202105_teams_integ_network_private.png\"> <img alt=\"SMAX_202105_teams_integ_network_private\" border=\"4\" file=\"/mediawiki/images/e/ed/SMAX_202105_teams_integ_network_private.png\" height=\"437\" hspace=\"0\" src=\"../../../images/SMAX_202105_teams_integ_network_private_33fc5bfb.png\" style=\"width: 800px; height: 437px; margin: 0px; border: 4px solid black;\" vspace=\"0\" width=\"800\"/> </a></div>\n<p><strong>Steps in this architecture diagram</strong></p>\n<ol>\n<li>There's typically an internal load balancer (<strong>Internal LB</strong>) exposing the internal FQDN of Service Management (<strong>&lt;Service Management-internal-FQDN&gt;</strong>) to users connected via the corporate intranet.</li>\n<li>To establish connectivity to Service Management from MS Teams, you need to add an external load balancer (<strong>External LB</strong>) to the architecture. This load balancer needs to expose a public FQDN (<strong>&lt;integration-external-FQDN&gt;</strong>) to the Internet. You can choose this FQDN as you like. The external LB needs to open the URL prefix <strong>https://&lt;integration-external-FQDN&gt;/xie/*</strong> (which is used for notifications from MS Teams) and needs to route it to the internal load balancer used for Service Management.\n\t<div class=\"admonition\">\n<div class=\"admonition-icon admonition-important-icon\"></div>\n<div class=\"admonition-content admonition-important-content\"><code>OpenText</code> encourages the customer to explicitly limit the IP/DNS range allowed access to the external LB endpoint, which is not provided by <code>OpenText</code>. By not implementing this measure you may be exposing the system to increased security risks. You understand and agree to assume all associated risks and hold <code>OpenText</code> harmless for the same. It remains at all times the Customer’s sole responsibility to assess its own regulatory and business requirements. <code>OpenText</code> doesn't represent or warrant that its products comply with any specific legal or regulatory standards applicable to Customer in conducting Customer's business.</div>\n</div>\n</li>\n<li>In the opposite direction, Service Management needs to connect to MS Teams. Similar to the previous scenario, you can establish this connectivity either via an HTTP proxy or directly through the firewall.</li>\n<li>Users connect to MS Teams also via the proxy.</li>\n</ol>\n<p>You can also achieve additional communication security by using a custom web application firewall (WAF) on the external LB (for inbound connectivity) and proxy filtering (for outbound connectivity), as described below.</p>\n<p><strong>More details</strong></p>\n<ul>\n<li> If a proxy is present in the environment, you need to configure it in the Service Management Suite Administration portal. See <a href=\"/doc/423/26.1/saconfig#Proxy_Settings_tab\" title=\"How to configure a proxy for SMAX\">How to configure a proxy for Service Management</a>.</li>\n<li>If a proxy and/or firewall is present in the environment with filtering enabled, you need to add the MS Teams FQDNs/IPs to the filter allowlist. See <a href=\"https://docs.microsoft.com/en-us/microsoft-365/enterprise/urls-and-ip-address-ranges?view=o365-worldwide#microsoft-365-common-and-office-online\" title=\"Office 365 URLs and IP address ranges\">Office 365 URLs and IP address ranges</a> for a list of FQDNs/IPs of MS Teams servers that need to be open in the proxy, firewall, or both (look for the section that includes <strong>graph.microsoft.com</strong> and <strong>login.microsoftonline.com</strong>).</li>\n<li>You need to set up an external load balancer to expose an external FQDN. This can be a new LB or an existing LB shared with other applications. The external load balancer needs to allow the <strong>/xie/*</strong> URL path prefix and route it to the internal LB used by Service Management. Optionally, the external LB can rewrite the host part of the URL from <strong>&lt;integration-external-FQDN&gt;</strong> to <strong>&lt;Service Management-internal-FQDN&gt;</strong> but needs to keep the URL path unchanged. For additional security, you can set the LB WAF to only allow traffic from specific source IPs belonging to MS Teams. See <a href=\"https://docs.microsoft.com/en-us/microsoft-365/enterprise/additional-office365-ip-addresses-and-urls?view=o365-worldwide\" title=\"Additional endpoints not included in the Office 365 IP Address and URL Web service\">Additional endpoints not included in the Office 365 IP Address and URL Web service</a> for a list of IPs from which notifications can be received (look for <strong>Microsoft Graph Change Notifications</strong>). </li>\n<li>Register the public FQDN (<strong>&lt;integration-external-FQDN&gt;</strong>) with the Service Management Integration Studio, so that the proper FQDN is sent to MS Teams for callback notifications. For details, see the <em>How to configure a public FQDN</em> section below.</li>\n</ul>\n<p><strong>How to configure a public FQDN</strong></p>\n<p>The integration configmap (<strong>itom-sma-xie-configmap</strong>) contains a <strong>public-fqdn</strong> parameter, which allows you to configure this public FQDN. To configure the public FQDN, follow these steps;</p>\n<ol>\n<li>Run the following command on a control plane node (on-premises deployment) or the bastion node (OpenShift deployment): \n\t<pre><code>kubectl get cm itom-sma-xie-configmap -o yaml  -n {namespaces}|   sed -e 's|public-fqdn=https://&lt;external-access-host&gt;|public-fqdn=https://&lt;integration-external-FQDN&gt;|' |   kubectl apply -f -\n</code></pre>\n<p>Replace <strong>&lt;external-access-host</strong>&gt; with the external access host of your suite installation, and replace <strong>&lt;integration-external-FQDN&gt;</strong> with your public FQDN for the MS Teams integration. This configuration doesn't need a restart of relevant pods and normally takes effect in one minute.</p>\n</li>\n<li>Verify the configuration by opening the following URL from a web browser: <strong>https://&lt;integration-external-FQDN&gt;/xie/public/v1</strong>. If you have configured the public FQDN correctly, the browser should return a value of <strong>1.0</strong>. If something goes wrong, see <a href=\"/doc/423/26.1/troubleshootmsteamsintegration\" title=\"Troubleshoot Microsoft Teams integration\">Troubleshoot Microsoft Teams integration</a> for instructions.</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}