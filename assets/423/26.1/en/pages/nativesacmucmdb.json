{
  "title": "Install UD/UCMDB for Native SACM",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>Native SACM can be enabled in the following two modes:</p>\n<ul>\n<li>Multi-deployment mode: Both Service Management and UD/UCMDB are containerized and deployed on OMT</li>\n<li>Classic mode: Service Management connecting with classic UD/UCMDB</li>\n</ul>\n<h2>Containerized UD/UCMDB</h2>\n<p>To install a containerized UD/UCMDB, follow the instructions documented here:</p>\n<ul>\n<li><a href=\"/doc/423/26.1/installcmshelm\" title=\"Install containerized UD/UCMDB (on-premises)\">Install containerized UD/UCMDB (on-premises)</a></li>\n<li><a href=\"/doc/423/26.1/installcmshelmeks\" title=\"Install containerized UD/UCMDB (EKS)\">Install containerized UD/UCMDB (EKS)</a></li>\n<li><a href=\"/doc/423/26.1/installcmshelmaks\" title=\"Install containerized UD/UCMDB (AKS)\">Install containerized UD/UCMDB (AKS)</a></li>\n<li><a href=\"/doc/423/26.1/installcmsopenshift\" title=\"Install containerized UD/UCMDB (OpenShift)\">Install containerized UD/UCMDB (OpenShift)</a></li>\n</ul>\n<h2>Classic UD/UCMDB</h2>\n<h3>Install the UCMDB server</h3>\n<p>You need a UCMDB server set up before you enable Native SACM.<br/>\n<br/>\nTo install an external UCMDB server, follow the instructions documented here:</p>\n<ul>\n<li><a href=\"/doc/401/2023.05/installucmdbserver\" title=\"Install UCMDB server\">Install UCMDB server</a></li>\n</ul>\n<h3>Enable UCMDB Gateway on UCMDB Server</h3>\n<ol>\n<li>\n<p>Obtain the UCMDB server installer and install the UCMDB server by following the instructions in the <i>UD/UCMDB Deployment Guide</i>.</p>\n</li>\n<li>\n<p>On the UCMDB server machine, locate the <b>wrapper-custom.conf</b> file in the <b>&lt;Ucmdb Server home&gt;\\conf\\</b> folder and open the file using a text editor.</p>\n</li>\n<li>\n<p>Add the following line and save the file:</p>\n<pre><code>wrapper.java.additional.91=-Dsmax.integration.gateway.enabled=true</code></pre>\n<a class=\"image\" href=\"/file/images/c/cf/wrapper-custom.png\" title=\"/file/images/c/cf/wrapper-custom.png\"> <img alt=\"wrapper-custom\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/c/cf/wrapper-custom.png\" height=\"135\" hspace=\"0\" src=\"../../../images/wrapper-custom_765bd829.png\" vspace=\"0\" width=\"800\"/> </a></li>\n<li>Restart the UCMDB server.</li>\n</ol>\n<h3>Check the super integration user for UCMDB Gateway</h3>\n<p> Check whether the super integration user is <strong>UISysadmin</strong> on the UCMDB server:</p>\n<ol>\n<li>Log into the JMX Console.</li>\n<li>Locate and invoke the <strong>retrieveCMDBSuperIntegrationUser </strong>JMX method.</li>\n<li>Make sure that the super integration user returned by the JMX method is <strong>UISysadmin</strong>. If the super integration user is not <strong>UISysadmin</strong>, run the <strong>setCMDBSuperIntegrationUser </strong>method to change it back to <strong>UISysadmin</strong>.</li>\n</ol>\n<h3>Install UCMDB Gateway</h3>\n<h4 id=\"Windows\">Windows</h4>\n<p>To install UCMDB Gateway on a Windows operating system, do the following:</p>\n<ol>\n<li>\n<p>Unzip the <b>UCMDB_Gateway-&lt;version&gt;_Windows.zip</b> package to your preferred directory. The directory you choose is the final installation directory for UCMDB Gateway. For example, <b>D:\\UCMDB_Gateway</b>.</p>\n</li>\n<li>Go to the <b>&lt;<i>UCMDB_Gateway</i>&gt;\\ucmdb-gateway-installer</b> folder, duplicate the <b>config.properties.default</b> file and rename it to <b>config.properties</b>. Do not delete the original <b>config.properties.default</b> file.</li>\n<li>Open the <b>config.properties</b> file using a text editor and then configure the required parameters. Make sure the host names are fully qualified domain names.\n\t<ol>\n<li>\n<p>In the <b>[node]</b> section, configure the http/https port number of UCMDB Gateway based on your needs by adding the following line:</p>\n<p><code>http_port=&lt;<i>your port</i>&gt; </code> (Default port: 3000)</p>\n<p><code>https_port=&lt;<i>your port</i>&gt; </code> (Default port: 3443)</p>\n</li>\n<li>\n<p>In the <b>[ucmdb]</b> section, enter your UCMDB server information.</p>\n<pre><code>[ucmdb]\nprotocol=https\nport=8443\ncontext=\n#Flag to enable synchronizing CI class model automatically. If enablePoll is set to true, make sure you set userName and password accordingly.\nenablePoll=true\nhost=&lt;UCMDB server hostname&gt;\nuserName=&lt;username&gt;\npassword=&lt;encrypted user password&gt;\n</code></pre>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">Only when <strong>enablePoll</strong>=<strong>true</strong>, customized UD/UCMDB attributes can be federated in Service Management. By default, it's set to <b>true </b>in the UCMDB Gateway. </div>\n</div>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">The connection between UCMDB Gateway and UCMDB requires SSL/TLS, so make sure HTTPS is used rather than HTTP even if HTTP is enabled on the UCMDB side.</div>\n</div>\n\t\tTo obtain the encrypted user password, do the following:\n\n\t\t<ol start=\"1\">\n<li>Open a command window and go to the <b>&lt;<i>UCMDB_Gateway</i>&gt;\\ucmdb-gateway-installer\\bin</b> folder.</li>\n<li>Run the following command: <b>encryptPassword.bat &lt;your password&gt;</b></li>\n<li>Replace the <code>&lt;encrypted user password&gt;</code> field with the encrypted string.</li>\n</ol>\n</li>\n<li>\n<p>In the <b>[smax]</b> section, enter the Service Management server information:</p>\n<pre><code>[smax]\nprotocol=https\nport=443\nhost=&lt;Service Management Hostname&gt;\n</code></pre>\n</li>\n<li>Save the file.</li>\n</ol>\n</li>\n<li>\n<p>Go to the <b>&lt;<i>UCMDB_Gateway</i>&gt;\\ucmdb-gateway-installer\\bin</b> folder, and run the <b>installService.bat</b> script as administrator. The script installs the <b>UCMDB Gateway</b> service.</p>\n<div><a class=\"image\" href=\"/file/images/3/36/cms2020.05_CmsGatewayService.png\" title=\"/file/images/3/36/cms2020.05_CmsGatewayService.png\"> <img alt=\"cms2020.05 CmsGatewayService.png\" data-file-height=\"251\" data-file-width=\"832\" height=\"251\" src=\"../../../images/cms2020.05_CmsGatewayService_2c2488c8.png\" width=\"832\"/> </a></div>\n</li>\n<li>\n<p>Start the UCMDB Gateway service.</p>\n</li>\n</ol>\n<p>If you want to change the certificate for the UCMDB Gateway on Windows, follow these steps:</p>\n<ol>\n<li>\n<p>Generate your <strong>server.crt</strong> and<strong> server.key</strong> files.</p>\n</li>\n<li>\n<p>Copy <strong>server.crt</strong> and<strong> server.key</strong> to <strong>&lt;UCMDB_Gateway_installation_folder&gt;\\ucmdb-gateway-installer\\ssl</strong>.</p>\n</li>\n<li>\n<p>Open a <strong>cmd</strong> window (<strong>Run as administrator</strong>), and then go to the <strong>&lt;UCMDB_Gateway_installation_folder&gt;\\ucmdb-gateway-installer\\bin</strong> directory.</p>\n</li>\n<li>\n<p>Run the following command: <code><strong>encryptPassword.bat &lt;your_cert_passphrase</strong></code><code><strong>&gt;</strong></code> </p>\n</li>\n<li>\n<p>Open the <strong>config.properties </strong>file and then copy the encrypted passphrase to the <strong>[node] </strong>section.</p>\n<pre>cert_passphrase=&lt;encrypted_cert_passphrase&gt;\n</pre>\n<p>For example:</p>\n<pre>cert_passphrase=ENC::g39rBiEuBeSfxdBf36BUEg==.eyJ55HgatgoqlaE8kAMEAA==\n</pre>\n</li>\n<li>\n<p>Restart the UCMDB Gateway service.</p>\n</li>\n</ol>\n<h4 id=\"Linux\">Linux</h4>\n<p>To install UCMDB Gateway on a Linux operating system, do the following:</p>\n<ol>\n<li>\n<p>Unzip the <b>UCMDB_Gateway-&lt;version&gt;_Linux.zip</b> package to your preferred directory. The directory you choose is the final installation directory for UCMDB Gateway.</p>\n</li>\n<li>\n<p>Go to the <b>&lt;<i>UCMDB_Gateway</i>&gt;/ucmdb-gateway-installer</b> folder, duplicate the <b>config.properties.default</b> file and rename it to <b>config.properties</b>. Do not delete the original <b>config.properties.default</b> file.</p>\n</li>\n<li>\n<p>Open the <b>config.properties</b> file using a text editor and then configure the required parameters. Make sure the host names are fully qualified domain names.</p>\n<ol>\n<li>\n<p>In the <b>[node]</b> section, configure the port number of UCMDB Gateway. For example, if you want your UCMDB Gateway to run on port 3001, set the value of <code>https_port</code> to <code>3001</code>.</p>\n<code>https_port=&lt;<i>your port</i>&gt;</code></li>\n<li>\n<p>In the <b>[ucmdb]</b> section, enter your UCMDB server information.</p>\n<pre><code>[ucmdb]\nprotocol=https\nport=8443\ncontext=\nenablePoll=true\nhost=&lt;UCMDB server hostname&gt;\nuserName=&lt;username&gt;\npassword=&lt;encrypted user password&gt;\n</code></pre>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">Only when <strong>enablePoll</strong>=<strong>true</strong>, customized UD/UCMDB attributes can be federated in Service Management. By default, it's set to <b>true </b>in the UCMDB Gateway. </div>\n</div>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">The connection between UCMDB Gateway and UCMDB requires SSL/TLS, so make sure HTTPS is used rather than HTTP even if HTTP is enabled on the UCMDB side.</div>\n</div>\n<p>To obtain the encrypted user password, do the following:</p>\n<ol>\n<li>Open a command window and go to the <b>&lt;<i>UCMDB_Gateway</i>&gt;/ucmdb-gateway-installer/bin</b> folder.</li>\n<li>Run the following command: <b>./encryptPassword.sh &lt;your password&gt;</b></li>\n<li>Replace the <code>&lt;encrypted user password&gt;</code> field with the encrypted string.</li>\n</ol>\n</li>\n<li>\n<p>In the <b>[smax]</b> section, enter the Service Management server information:</p>\n<pre><code>[smax]\nprotocol=https\nport=443\nhost=&lt;Service Management Hostname&gt;\n</code></pre>\n</li>\n<li>Save the file.</li>\n</ol>\n</li>\n<li>\n<p>Go to the <b>&lt;<i>UCMDB_Gateway</i>&gt;/ucmdb-gateway-installer/bin</b> folder and run the <b>installService.sh</b> script as administrator. The script installs the <b>ucmdb_gateway</b> service.</p>\n</li>\n<li>\n<p>Start the <b>ucmdb_gateway</b> service in your system.</p>\n<p>Normally you start the service by using either of the following commands:</p>\n<ul>\n<li><code>service ucmdb_gateway start</code>, or</li>\n<li><code>systemctl start ucmdb_gateway</code></li>\n</ul>\n<p>If none of the commands work, contact your system administrator for details about how to start a service in your system.</p>\n</li>\n</ol>\n<p>If you want to change the certificate for the UCMDB Gateway on Linux, follow these steps:</p>\n<ol>\n<li>\n<p>Generate your <strong>server.crt</strong> and<strong> server.key</strong> files.</p>\n</li>\n<li>\n<p>Copy <strong>server.crt</strong> and<strong> server.key</strong> to <strong>&lt;UCMDB_Gateway_installation_folder&gt;/ucmdb-gateway-installer/ssl</strong>.</p>\n</li>\n<li>\n<p>Go to the <strong>&lt;UCMDB_Gateway_installation_folder&gt;/ucmdb-gateway-installer/bin</strong> directory.</p>\n</li>\n<li>\n<p>Run the following command as a root user:<code> <b>encryptPassword.sh &lt;</b></code><strong>your_cert_passphrase</strong><code><b>&gt;</b></code> </p>\n</li>\n<li>\n<p>Open the <strong>config.properties </strong>file and then copy the encrypted passphrase to the <strong>[node] </strong>section.</p>\n<pre>cert_passphrase=&lt;encrypted_cert_passphrase&gt;\n</pre>\n<p>For example:</p>\n<pre>cert_passphrase=ENC::g39rBiEuBeSfxdBf36BUEg==.eyJ55HgatgoqlaE8kAMEAA==\n</pre>\n</li>\n<li>\n<p>Restart the UCMDB Gateway service.</p>\n</li>\n</ol>\n<h4 id=\"Configure_SSL_for_outbound_integrations\">Configure SSL for outbound integrations</h4>\n<p>UCMDB Gateway supports one-way SSL for outbound integrations so that it can communicate with external applications in a secure manner. For example, when UCMDB Gateway is deployed, you may want to enable SSL so that UCMDB Gateway can connect to the external Service Management system over SSL/TLS. </p>\n<p>The outbound integration SSL solution works as follows:</p>\n<p>When UCMDB Gateway connects to an external server as a client, UCMDB Gateway validates the server's certificate. To achieve this, UCMDB Gateway first loads the external server's CA certificate file (in <strong>PEM</strong> format) from the <b>%ucmdb-gateway-installer location%\\ssl</b> directory. Then when UCMDB Gateway attempts to connect to the external server, the PEM file is used to validate the external server's certificate. UCMDB Gateway is allowed to connect to the external server only when the validation passes.</p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">In a production system, third-party or corporate CA-signed certificates are recommended; self-signed certificates can be used in non-production systems. The certificates must be in PEM format. Note that a PEM certificate file may use the <b>.pem</b> extension or a different extension such as <b>.crt</b>.</div>\n</div>\n<p>To configure one-way SSL for an external server, perform the following steps:</p>\n<ol>\n<li>Upload the external server's CA certificate to the UCMDB Gateway CA folder: <b>%ucmdb-gateway-installer location%\\ssl</b></li>\n<li>Configure SSL in the external application. <br/>\n\tTo use SSL for an outbound integration, you also need to configure SSL in the external application. For details, see the specific product documentation.</li>\n</ol>\n<h2></h2>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}