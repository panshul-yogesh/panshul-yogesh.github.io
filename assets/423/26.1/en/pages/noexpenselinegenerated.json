{
  "title": "Expense lines aren't generated as expected",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>One-time expense line or recurring expense lines are not generated after the cost allocation rule is configured and triggered.</p>\n<h2>Possible causes</h2>\n<p>Cause 1: Allocate cost rule is disabled.</p>\n<ol>\n<li>In Service Management, from the main menu, select <b>Administration &gt; Configuration &gt; Studio</b>.</li>\n<li>From the drop-down box at the top of the screen, select the record type on which you want to generate expense lines, and then select the <b>Processes and Rules</b> tab.</li>\n<li>Under the After Applying changes event, check if the Allocate cost rule is disabled.</li>\n</ol>\n<p>Cause 2: Allocate cost rule condition mismatched.</p>\n<ol>\n<li>In Service Management, from the main menu, select <b>Administration &gt; Configuration &gt; Studio</b>.</li>\n<li>Select the record type on which you want to generate expense lines from the drop-down box at the top of the screen and select the <b>Processes and Rules</b> tab.</li>\n<li>Under the After Applying changes event, check the If condition of the Allocate cost rule.</li>\n</ol>\n<p>Cause 3: Cost allocation rule isn't active.</p>\n<ol>\n<li>\n<p>In Service Management, from the main menu, select <b>Run &gt; Financials &gt; Cost Allocation</b>. The Cost Allocation page is displayed.</p>\n</li>\n<li>Click the record identifier in the <b>ID</b> column to display the selected cost allocation rule.</li>\n<li>Check the phase of the cost allocation rule.</li>\n</ol>\n<p>Cause 4: Cost allocation rule isn't effective.</p>\n<ol>\n<li>\n<p>In Service Management, from the main menu, select <b>Run &gt; Financials &gt; Cost Allocation</b>. The Cost Allocation page is displayed.</p>\n</li>\n<li>Click the record identifier in the <b>ID</b> column to display the selected cost allocation rule.</li>\n<li>Check the start date and end date.</li>\n</ol>\n<p>Cause 5: Cost allocation rule condition mismatched.</p>\n<ol>\n<li>\n<p>In Service Management, from the main menu, select <b>Run &gt; Financials &gt; Cost Allocation</b>. The Cost Allocation page is displayed.</p>\n</li>\n<li>Click the record identifier in the <b>ID</b> column to display the selected cost allocation rule.</li>\n<li>Check the Condition section.\n\t<p>For example, a cost allocation rule is created to generate recurring expense lines, but the Condition section indicates that this rule only works on records without recurring costs.</p>\n</li>\n</ol>\n<p>Cause 6: miscellaneous</p>\n<ol>\n<li>Go to https://&lt;external access host&gt;/sap/rest-client?TENANTID=xxxxxx as a tenant administrator.</li>\n<li>\n<p>Check the log using one of the following:</p>\n<ul>\n<li>\n<p>Send a GET request to <code>cost-allocation/operation-log</code> to check the history of the latest 1000 operations related to the expense line generation triggered by the configured cost allocation rules within 3 days.</p>\n</li>\n<li>\n<p>Send a GET request to <code>cost-allocation/operation-log/history</code> to check the log for all errors related to the expense line generation triggered by the configured cost allocation rules since the Enable expense line is enabled.</p>\n<p>You can also add optional parameters such as entityType, ruleId, entityId, or day to narrow down the log. For example, <code>cost-allocation/operation-log/history?entityType=Subscription&amp;day=2020-09-20</code>.</p>\n</li>\n<li>\n<p>Send a GET request to <code>cost-allocation/statistic</code> to check the statistics of expense lines and expense plans.</p>\n<p>\"totalExpenseCount\" in the response indicates the number of expense lines generated on the tenant so far.</p>\n<p>\"totalExpensePlanCount\" in the response indicates the number of expense plan generated on the tenant so far.</p>\n</li>\n<li>\n<p>Send a GET request to <code>cost-allocation/statistic/history?</code> to check the statistics history on a daily basis.</p>\n\t\tYou can also add an optional day parameter to check the statistics of a specific date. For example, <code>cost-allocation/statistic/history?day=2020-09-20</code>.</li>\n</ul>\n</li>\n</ol>\n<h2>Solutions</h2>\n<p>Solution 1: Enable the Allocate cost rule in Studio.</p>\n<p>Solution 2: Modify the If condition of the Allocate cost rule in Studio.</p>\n<p>Solution 3: Move the cost allocation rule to ACTIVE.</p>\n<p>Solution 4: Make sure the cost allocation rule is effective within the effective date range.</p>\n<p>Solution 5: Modify the Condition of the cost allocation rule.</p>\n<p>Note that expense lines can't be generated or created for a date in the past, you need to regenenrate the expense lines or manually create the expense lines for a date in the future after the issue is fixed.</p>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}