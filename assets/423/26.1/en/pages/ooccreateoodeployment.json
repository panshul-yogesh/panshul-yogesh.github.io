{
  "title": "Create a new deployment for OO",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>You can use the tool provided by OMT to create a deployment, which gets a namespace, default certificate, and service account prepared for installing an application by Helm charts.</p>\n<ol>\n<li>Log on to the first control plane as a root user or a <code>sudo</code> user.</li>\n<li>Run the following commands to create an ITOM application deployment.\n\t<pre>cd $CDF_HOME/scripts\n./cdfctl.sh deployment create -d <em>&lt;OO DEPLOYMENT NAME&gt;</em> [-n <em>&lt;OO NAMESPACE&gt;</em>]</pre>\n\tFor example:\n\n\t<pre>cd $CDF_HOME/scripts\n./cdfctl.sh deployment create -d oo</pre>\n\tThe <code>-n</code> option is optional. If you don't specify this option, the value defaults to the deployment name (the value of the <code>-d</code> option). You can run the <code>./cdfctl.sh deployment -h</code> command to view other options.<br/>\n<br/>\n\tWhen the application deployment is successful, the message <code>\"Successfully created deployment <em>&lt;name&gt;</em>\"</code> appears on the console.</li>\n</ol>\n<h2>(Optional) Create custom certificates</h2>\n<p>Log in to the first control plane node as a root or non-root user. Then, perform the following steps to use the external certificates:</p>\n<ol>\n<li>Upload the custom certificates and key to a directory on the first control plane node. For example: <code>/tmp/ca.crt</code>, <code>/tmp/server.crt</code>, and <code>/tmp/server.key</code>.\n\n\t<ul>\n<li>The supported certificate format is <code>.pem</code> (base-64 encoded)</li>\n<li>If the certificate is signed by a multiple-level certificate authority, the CA cert file should be concatenated with the following order: \n\t\t<pre><code>-----BEGIN CERTIFICATE-----\n&lt;intermediate-level-1&gt;\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\n&lt;intermediate-level-2&gt;\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\n&lt;intermediate-level-n&gt;\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\n&lt;root.crt&gt;\n-----END CERTIFICATE-----\n</code></pre>\n</li>\n<li>There are no empty lines between certificates</li>\n</ul>\n</li>\n<li>Run the following commands to check the custom certificates:\n\t<pre><code>$CDF_HOME/scripts/certCheck -ca &lt;CA cert directory&gt;/&lt;CA cert file&gt; -cert &lt;cert file directory&gt;/&lt;cert file&gt; -key &lt;private key directory&gt;/&lt;private key&gt; -host &lt;external access hostname&gt; </code></pre>\n\tFor example:\n\n\t<pre><code>$CDF_HOME/scripts/certCheck -ca /tmp/ca.crt -cert /tmp/server.crt -key /tmp/server.key  -host fqdn1.example.com</code></pre>\n<br/>\n\tWhere:\n\t<ul>\n<li>The <code>&lt;CA cert directory&gt;/&lt;CA cert file&gt;</code> is your CA certificate file in the absolute path format.</li>\n<li>The <code>&lt;cert file directory&gt;/&lt;cert file&gt;</code> is your server certificate in the absolute path format.</li>\n<li>The <code>&lt;private key directory&gt;/&lt;private key&gt;</code> is your private key in the absolute path format.</li>\n</ul>\n\tThe <code>certCheck</code> script checks the following: \n\n\t<ul>\n<li>Whether the certificates and key files are well encoded in PEM.</li>\n<li>Whether the certificates match with the private key file.</li>\n<li>Whether the certificates have expired.</li>\n<li>Whether the certificates have been revoked based on a CRL distribution point.</li>\n<li>Whether the certificate subject's common name or SAN name matches with its FQDN.</li>\n</ul>\n\tIf your terminal resembles the following, you have passed the certificate checking.\n\n\t<pre>[root@sh ~]# $CDF_HOME/scripts/certCheck -ca /tmp/ca.crt -cert /tmp/server.crt -key /tmp/server.key -host fqdn1.example.com\nsuccess\n</pre>\n\tThe dbCheck script doesn’t support check connectivity for Oracle with SSL.</li>\n<li>Run the following command to use your custom certificates.\n\t<pre><code>$CDF_HOME/scripts/renewCert --renew -t external  -n &lt;namespace&gt; --tls-cacert &lt;ca cert directory&gt;/&lt;ca cert file&gt;  --tls-cert /&lt;cert file directory&gt;/&lt;cert file&gt; --tls-key &lt;private key directory&gt;/&lt;private key&gt; </code></pre>\n<br/>\n\tWhere:\n\t<ul>\n<li>The <code>-n</code> option specifies the namespace for the custom certificate. Specify the suite namespace for this option</li>\n<li>The <code>&lt;ca cert directory&gt;/&lt;ca cert file&gt;</code> is your CA certificate file in the absolute path format. </li>\n<li>The <code>&lt;cert file directory&gt;/&lt;cert file&gt;</code> is your server certificate in the absolute path format.</li>\n<li>The <code>&lt;private key directory&gt;/&lt;private key&gt;</code> is your private key in the absolute path format.</li>\n</ul>\n\tFor example:\n\n\t<pre><code>$CDF_HOME/scripts/renewCert --renew -t external -n suite-namespace --tls-cacert /tmp/ca.crt --tls-cert /tmp/server.crt --tls-key /tmp/server.key</code></pre>\n</li>\n</ol>\n<p>The whole deployment requires about 15 minutes to renew the certificates. Please allow some processing time for the certificate renewal. </p>\n<h2>View the installed deployments</h2>\n<p>Run the following command on any of the control plane nodes to view the installed applications:</p>\n<pre>$CDF_HOME/scripts/cdfctl.sh deployment get</pre>\n<p>You will need to enter the administrator's password.</p>\n<p>Your terminal resembles the following: </p>\n<pre><code>UUID                                  NAME            NAMESPACE       STATUS              TYPE      MODE      APPLICATION      VERSION\n73402ef5-7750-4f2d-8340-1e097bc35b05  oo              oo              PHASE2_FINISHED     SECONDARY HELM                 \n</code></pre>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}