{
  "title": "Create NFS volumes for OO",
  "content": "<div class=\"mw-parser-output\">\n<p class=\"mw-empty-elt\">To save information such as configuration files, the information must be stored in a persistent volume provided by a Network File System (NFS). To install Operations Orchestration (OO) Containerized, you need to export NFS volumes to store the application data.</p>\n<p>OO Containerized supports NFSv3 or NFSv4.</p>\n<p>The storage technology that provides NFS implementation must support the Kubernetes persistent mount option of <code>ReadWriteMany</code>. That means a storage volume can be mounted to multiple nodes in read/write mode in parallel.</p>\n<p>Each NFS exported volume must have the following settings:</p>\n<ul style=\"padding-left: 0px;\" type=\"disc\"><li style=\"margin-left: 28px; position: relative;\"><code>rw</code></li><li style=\"margin-left: 28px; position: relative;\"><code>sync</code></li><li style=\"margin-left: 28px; position: relative;\">Be configured in the <strong>/etc/exports</strong> file with the following text:\n\t<pre>/&lt;path to the shared folder on the NFS server&gt; *(rw,sync,anonuid=&lt;user&gt;,anongid=&lt;fsGroup&gt;,root_squash)</pre>\n<p>Where the <code>&lt;user&gt;</code> and <code>&lt;fsGroup&gt;</code> need to be of the same values as those of the <strong>global.securityContext.user</strong> and <strong>global.securityContext.fsGroup</strong> parameters specified in the custom <strong>values.yaml</strong> file. For details, see <a href=\"/doc/423/26.1/399-oocpreparecreateyaml\" title=\"Create values.yaml for OO Containerized on-premises\">Create values.yaml for OO</a>.</p>\n</li><li style=\"margin-left: 28px; position: relative;\">\n<p>Be configured with the following permissions:</p>\n<pre>chmod -R 755 &lt;path to the exported volume&gt;\nchown &lt;user&gt;:&lt;fsGroup&gt; &lt;path to the exported volume&gt;</pre>\n<p>The &lt;<code>user</code>&gt; and &lt;<code>fsGroup</code>&gt; are configured in the custom <strong>values.yaml</strong> file. Both of which can be set to a value which is <strong>1999</strong> (default), or between <strong>100000</strong> and <strong>2000000000</strong>.</p>\n</li></ul>\n<h2><a id=\"Volumes_required_for_OO\" name=\"Volumes_required_for_OO\" title=\"Volumes required for OO\"></a>Volumes required for OO</h2>\n<p>The following NFS volumes are required for the OO deployment. Make sure the exported NFS volumes are empty and have no data.</p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Component</th>\n<th scope=\"col\">NFS volume name</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Example Directory path</th>\n<th scope=\"col\">Size</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>OO</td>\n<td><code>oo-config-vol</code></td>\n<td>Stores OO configuration files.</td>\n<td><code>/var/vols/itom/oo/oo_config_vol</code></td>\n<td>~ 1 GB</td>\n</tr>\n<tr>\n<td>OO</td>\n<td><code>oo-data-vol</code></td>\n<td>Stores OO, OO deployed AutoPass, and OO deployed Vault generated data.</td>\n<td><code>/var/vols/itom/oo/oo_data_vol</code></td>\n<td>~ 1 GB</td>\n</tr>\n<tr>\n<td>OO</td>\n<td><code>oo-logs-vol</code></td>\n<td>Stores logs generated by the majority of OO components.</td>\n<td><code>/var/vols/itom/oo/oo_logs_vol</code></td>\n<td>1-5 GB</td>\n</tr>\n<tr>\n<td>OO</td>\n<td><code>oo-data-export-vol</code></td>\n<td>\n<p>OO runs a cron-job for purging OO database with a retention period set to 375 days (default value). </p>\n<p>All DB data that's marked for purge is exported first and exposed in this volume before purging. </p>\n</td>\n<td><code>/var/vols/itom/oo/oo_data_export_vol</code></td>\n<td>50-90 GB<br/>\n<br/>\n<em>See notes below</em></td>\n</tr>\n<tr>\n<td>OO</td>\n<td><code>oo-ras-logs-vol</code></td>\n<td>Stores OO RAS logs. </td>\n<td><code>/var/vols/itom/oo/oo_ras_logs_vol</code></td>\n<td>1-5 GB</td>\n</tr>\n</tbody>\n</table>\n<h3><a id=\"Notes_on_the_oo_data_export_vol_volume\" name=\"Notes_on_the_oo_data_export_vol_volume\" title=\"Notes on the oo-data-export-vol volume\"></a>Notes on the <em>oo-data-export-vol </em>volume</h3>\n<p>The OO Database Maintenance and Export Kubernetes job uses this volume. You can find information on what this job is and how it uses the NFS from <a href=\"/doc/423/26.1/399-oocpreparecreateyaml\" title=\"here\">here</a>.</p>\n<p>Two factors directly affect the size of the <em>oo-data-export-vol </em>volume:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">The complexity of the OO flows that OO runs. <br/>\n\tOO flows that work with &gt; 1 GB worth of data per flow context are considered \"heavy\" flows. This data is stored in the Database. </li><li style=\"margin-left: 28px; position: relative;\">The number of tenants.<br/>\n\tMore tenants means more data in the Database that will eventually be exported to this NFS volume.</li></ul>\n<h2><a id=\"Set_up_self_hosted_NFS_shared_volumes\" name=\"Set_up_self_hosted_NFS_shared_volumes\" title=\"Set up self-hosted NFS shared volumes\"></a>Set up self-hosted NFS shared volumes</h2>\n<p>You can set up an NFS server and NFS shared volumes on any NFS server. It's recommended that you use a dedicated NFS server for the OO NFS volumes. As an example, the following steps assume that you use a dedicated NFS server and will use the external databases for OO.</p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p>Log on to the NFS server as a root or sudo user.</p>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p>Copy the OMT installation package to a temporary directory on the NFS server.</p>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p>Run the following command to unzip the OMT installation package:</p>\n<pre><code>unzip &lt;OMT2xx-xxx-15001-Embedded-K8s.zip&gt;</code></pre>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p>Navigate to the <code>OMT_Embedded_K8s_2x.x-xxx/cdf/scripts</code> directory, and then run the following command:</p>\n<pre>./setupNFS.sh &lt;shared volume&gt; true &lt;user&gt; &lt;fsGroup&gt;</pre>\n<p>For example:</p>\n<pre>./setupNFS.sh /var/vols/itom/oo/oo_config_vol true 1999 1999\n./setupNFS.sh /var/vols/itom/oo/oo_data_vol true 1999 1999\n./setupNFS.sh /var/vols/itom/oo/oo_logs_vol true 1999 1999\n./setupNFS.sh /var/vols/itom/oo/oo_data_export_vol true 1999 1999\n./setupNFS.sh /var/vols/itom/oo/oo_ras_logs_vol true 1999 1999\n</pre>\n</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p>The permission of each folder must be set to 755. If it's not, run the following command to change the permissions:</p>\n<pre>chmod -R 755 &lt;path to shared folder&gt;</pre>\n<p>For example, run the following commands:</p>\n<pre>chmod -R 755 /var/vols/itom/oo/oo_config_vol\nchmod -R 755 /var/vols/itom/oo/oo_data_vol\nchmod -R 755 /var/vols/itom/oo/oo_logs_vol\nchmod -R 755 /var/vols/itom/oo/oo_data_export_vol\nchmod -R 755 /var/vols/itom/oo/oo_ras_logs_vol\n</pre>\n</li></ol>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}