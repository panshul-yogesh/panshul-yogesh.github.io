{
  "title": "Prepare external database for OO",
  "content": "<div class=\"mw-parser-output\">\n<div>To prepare the PostgreSQL database for Operations Orchestration Containerized (OO Containerized), perform the following tasks:</div>\n<h2 id=\"Install_PostgreSQL_or_Oracle_database\"><a id=\"Install_the_PostgreSQL_database\" name=\"Install_the_PostgreSQL_database\" title=\"Install the PostgreSQL database\"></a>Install the PostgreSQL database</h2>\n<p>You can use a PostgreSQL database server for OO Containerized. Please see the PostgreSQL documentation for installation details. </p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">It's strongly recommended to host the database server on a <b>physical machine</b>, and it should be an independent server without other applications running on it.</li><li style=\"margin-left: 28px; position: relative;\">If the database server machine is a virtual machine, you must have a dedicated resource as a database server.</li><li style=\"margin-left: 28px; position: relative;\">Set the database servers to the same time zone, daylight savings settings, and time as the OO servers.</li><li style=\"margin-left: 28px; position: relative;\">Install OO in the same LAN as the database servers (without a proxy and firewalls between them). Otherwise, your system's performance may get impacted.</li><li style=\"margin-left: 28px; position: relative;\">Set the machine's system resources where you install the PostgreSQL database according to the on-premises deployment sizing guide.</li></ul>\n<h2><a id=\"Configure_the_database_server\" name=\"Configure_the_database_server\" title=\"Configure the database server\"></a>Configure the database server</h2>\n<h3 id=\"Configure_PostgreSQL_database_server\"><a id=\"Configure_the_PostgreSQL_database_server_\" name=\"Configure_the_PostgreSQL_database_server_\" title=\"Configure the PostgreSQL database server​​​​​​\"></a>Configure the PostgreSQL database server​​​​​​</h3>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p>(Optional) Enable TLS connections for the database server. For details, see <em>Enable TLS connections to external PostgreSQL</em>.</p>\n<p>Both SSL modes (<code>verify-full</code> and <code>verify-ca</code>) are supported. For details, see the PostgreSQL documentation.</p>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p>In the <b>postgresql.conf</b> file, configure the following parameters: </p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>effective_cache_size</code></td>\n<td>7.5 GB</td>\n</tr>\n<tr>\n<td><code>maintenance_work_mem</code></td>\n<td>256 MB</td>\n</tr>\n<tr>\n<td><code>max_connections</code></td>\n<td>1400</td>\n</tr>\n<tr>\n<td><code>shared_buffers</code></td>\n<td>4.5 GB</td>\n</tr>\n<tr>\n<td><code>work_mem</code></td>\n<td>300 MB</td>\n</tr>\n<tr>\n<td><code>listen_addresses</code></td>\n<td>'*'</td>\n</tr>\n</tbody>\n</table>\n\tThe default value of the <code>listen_addresses</code> parameter is \"<code>localhost</code>\", which means only localhost can connect to the PostgreSQL instance. Set <code>listen_addresses = '*'</code> to allow remote connections.<br/>\n\tIf you share the database server with other suite components, make sure to add the OO database configuration requirements to the suite's database configuration options.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p>Configure encoding and locale. Make sure that the PostgreSQL instance uses the following encoding and locale settings:</p>\n<pre>Encoding: UTF8\nLC_COLLATE: en_US.UTF-8\nLC_CTYPE: en_US.UTF-8</pre>\n</li></ol>\n<h3 id=\"Create_OO_database_users_and_names\"><a id=\"Create_OO_database_users_and_database_names\" name=\"Create_OO_database_users_and_database_names\" title=\"Create OO database users and database names\"></a>Create OO database users and database names</h3>\n<p>In the OO application, the following components require databases:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">OO Central</li><li style=\"margin-left: 28px; position: relative;\">OO Session Manager</li><li style=\"margin-left: 28px; position: relative;\">OO Controller</li><li style=\"margin-left: 28px; position: relative;\">OO Scheduler</li><li style=\"margin-left: 28px; position: relative;\">AutoPass License Service (AutoPass)</li></ul>\n<p>In the production environment, you must use external databases for the OO application. Enter the database users and database names during OO installation using the Helm parameters. </p>\n<p>The databases must be empty so that OO will initialize them during installation. The table below shows example database information prepared for the following components:</p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Service</th>\n<th scope=\"col\">Database User</th>\n<th scope=\"col\">Database Name</th>\n<th scope=\"col\">Schema </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>OO Central</td>\n<td><code>oocentraldbuser</code></td>\n<td><code>oocentraldb</code></td>\n<td><code>oo_cen_core¹</code></td>\n</tr>\n<tr>\n<td>OO Session Manager</td>\n<td><code>oosessionmanagerdbuser</code></td>\n<td><code>oosessionmanagerdb</code></td>\n<td><code>public</code></td>\n</tr>\n<tr>\n<td>OO Controller</td>\n<td><code>oocontrollerdbuser</code></td>\n<td><code>oocontrollerdb</code></td>\n<td><code>public</code></td>\n</tr>\n<tr>\n<td>OO Scheduler</td>\n<td><code>ooschedulerdbuser</code></td>\n<td><code>ooschedulerdb</code></td>\n<td><code>oo_sch_core¹</code></td>\n</tr>\n<tr>\n<td>AutoPass</td>\n<td><code>aplsdbuser</code></td>\n<td><code>aplsdb</code></td>\n<td><code>public</code></td>\n</tr>\n</tbody>\n</table>\n<p>¹ The non-public <code>oo_cen_core</code> and <code>oo_sch_core</code> schemas for OO Central and OO Scheduler are created automatically. In the<strong> values.yaml</strong> file, you can specify the non-public schema to be created, which can't be public.</p>\n<p id=\"PostgreSQL \"><span style='color: rgb(51, 51, 51); font-family: Roboto, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"; font-size: 16px;'>Below are sample SQL commands for creating a user and a database for a service for the PostgreSQL database:</span></p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p>Log in to your database server with the administrator credentials.</p>\n<pre>psql -h &lt;host&gt; -p &lt;port&gt; -U &lt;PostgreSQL admin&gt;\n</pre>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p>Run the following commands to create the databases and the users, by substituting the exemplified database names, database users, and their respective passwords of each component with the desired values.</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">\n<p><strong>OO Central:</strong></p>\n<pre><code>CREATE ROLE oocentraldbuser LOGIN ENCRYPTED PASSWORD 'oocentraldbuserPass' NOSUPERUSER INHERIT CREATEDB CREATEROLE;\nCREATE DATABASE oocentraldb WITH owner=oocentraldbuser;\nGRANT CREATE ON DATABASE oocentraldb TO oocentraldbuser;</code></pre>\n</li><li style=\"margin-left: 40px; position: relative;\">\n<p><strong>OO Session Manager:</strong></p>\n<pre><code>CREATE ROLE oosessionmanagerdbuser LOGIN ENCRYPTED PASSWORD 'oosessionmanagerdbuserPass';\nCREATE DATABASE oosessionmanagerdb WITH owner=oosessionmanagerdbuser;\nGRANT CREATE ON DATABASE oosessionmanagerdb TO oosessionmanagerdbuser;</code></pre>\n</li><li style=\"margin-left: 40px; position: relative;\">\n<p><strong>OO Controller:</strong></p>\n<pre><code>CREATE ROLE oocontrollerdbuser LOGIN ENCRYPTED PASSWORD 'oocontrollerdbuserPass';\nCREATE DATABASE oocontrollerdb WITH owner=oocontrollerdbuser;\nGRANT CREATE ON DATABASE oocontrollerdb TO oocontrollerdbuser;</code></pre>\n</li><li style=\"margin-left: 40px; position: relative;\">\n<p><strong>OO Scheduler:</strong></p>\n<pre><code>CREATE ROLE ooschedulerdbuser LOGIN ENCRYPTED PASSWORD 'ooschedulerPass';\nCREATE DATABASE ooschedulerdb WITH owner=ooschedulerdbuser;\nGRANT CREATE ON DATABASE ooschedulerdb TO ooschedulerdbuser;</code></pre>\n</li><li style=\"margin-left: 40px; position: relative;\">\n<p><strong>AutoPass:</strong></p>\n<pre><code>CREATE ROLE \"aplsdbuser\" LOGIN ENCRYPTED PASSWORD 'aplsdbuserPass' NOSUPERUSER INHERIT;\nGRANT \"aplsdbuser\" TO postgres;\nCREATE DATABASE \"aplsdb\"; \nALTER DATABASE \"aplsdb\" OWNER TO \"aplsdbuser\";\nGRANT ALL ON SCHEMA \"public\" TO \"aplsdbuser\";</code></pre>\n</li><li style=\"margin-left: 40px; position: relative;\">\n<p><strong>Grant CONNECT to all database users to their respective databases:</strong></p>\n<pre><code>GRANT CONNECT ON DATABASE oocentraldb TO oocentraldbuser;\nGRANT CONNECT ON DATABASE oosessionmanagerdb TO oosessionmanagerdbuser;\nGRANT CONNECT ON DATABASE oocontrollerdb TO oocontrollerdbuser;\nGRANT CONNECT ON DATABASE ooschedulerdb TO ooschedulerdbuser;\nGRANT CONNECT ON DATABASE aplsdb TO aplsdbuser;</code></pre>\n</li></ul>\n</li></ol>\n</div>",
  "modifiedon": "2026-02-06 14:30:24"
}