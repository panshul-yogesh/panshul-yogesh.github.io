{
  "title": "Upgrade fails with [OO RAS] Error: Must define value for all six parameters",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>When upgrading OO Containerized, the upgrade fails with the following error:</p>\n<p><code>[OO RAS] ERROR: Must define value for all six parameters initMemory, maxMemory, cpuRequest, cpuLimit, resource request and limit</code></p>\n<h2>Cause</h2>\n<p>This happens if the <strong>values.yaml</strong> file is updated/injected with partial values for OO RAS in OO Containerized in 2022.11.</p>\n<h2>Solution</h2>\n<p>To avoid this error:</p>\n<ol>\n<li>Locate the path to <code>previous_deployment_values.yaml</code> file (<strong>values.yaml</strong> file used before upgrading). Or, run the following command:\n\n\t<pre><code>helm get values &lt;oo_install_name&gt; -n &lt;oo_namespace&gt; &gt; /path/to/previous_deployment_values.yaml</code></pre>\n<p>Where:<br/>\n\t&lt;<code>oo_install_name</code>&gt; is the name of the OO deployment that you specified when installing OO.<br/>\n\t&lt;<code>oo_namespace</code>&gt; is the unique namespace of the OO deployment.</p>\n</li>\n<li>Remove the partial values to the <code>initMemory</code>,<code> maxMemory</code>,<code> cpuRequest</code>,<code> cpuLimit</code>,<code> resources.requests.memory</code>,<code> </code>and <code>resources.limits.memory</code> parameters in the <code>previous_deployment_values.yaml</code> file. Run the following commands:\n\t<pre><code>cpuReq=`yq e '.oocontroller.deployment.ooras.cpuRequest' /path/to/previous_deployment_values.yaml`\ncpuLimit=`yq e '.oocontroller.deployment.ooras.cpuLimit' /path/to/previous_deployment_values.yaml`\ninitMem=`yq e '.oocontroller.deployment.ooras.initMemory' /path/to/previous_deployment_values.yaml`\nmaxMem=`yq e '.oocontroller.deployment.ooras.maxMemory' /path/to/previous_deployment_values.yaml`\nmemLimit=`yq e '.oocontroller.deployment.ooras.resources.limits.memory' /path/to/previous_deployment_values.yaml`\nmemRequest=`yq e '.oocontroller.deployment.ooras.resources.requests.memory ' /path/to/previous_deployment_values.yaml`\n\nif [[ \"$initMem\" == \"null\" ]] || [[ \"$maxMem\" == \"null\" ]] || [[ \"$cpuReq\" == \"null\" ]] || [[ \"$cpuLimit\" == \"null\" ]] || [[ \"$memLimit\" == \"null\" ]] || [[ \"$memRequest\" == \"null\" ]]; then\n    \n    echo \"CPU Request was set to: $cpuReq \"\n    echo \"CPU Limit was set to: $cpuLimit \"\n    echo \"Init Memoery was set to: $initMem \"\n    echo \"Max Memory was set to: $maxMem \"\n    echo \"Memory Request was set to: $memRequest \"\n    echo \"Memory Limit was set to $memLimit \"\n    echo \"Found Partial values provided to RAS in previous version. Removing partial values for RAS.\"\n    \n    yq eval 'del(.oocontroller.deployment.ooras.cpuRequest)' -i  /path/to/previous_deployment_values.yaml\n    yq eval 'del(.oocontroller.deployment.ooras.cpuLimit)' -i  /path/to/previous_deployment_values.yaml\n    yq eval 'del(.oocontroller.deployment.ooras.initMemory)' -i  /path/to/previous_deployment_values.yaml\n    yq eval 'del(.oocontroller.deployment.ooras.maxMemory)' -i  /path/to/previous_deployment_values.yaml\n    yq eval 'del(.oocontroller.deployment.ooras.resources)' -i  /path/to/previous_deployment_values.yaml\nfi</code></pre>\n</li>\n<li>Rerun the Helm upgrade command.</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}