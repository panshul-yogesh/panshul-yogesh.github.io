{
  "title": "Perform post-installation tuning",
  "content": "<div class=\"mw-parser-output\">\n<p>Perform the following tuning tasks after the suite installation.</p>\n<h2 class=\"mw-headline\" id=\"Trust_the_browser_SSL_certificate\">Trust the browser SSL certificate</h2>\n<p>For optimal browser performance, your Certification Authority signed SSL certificate must be trusted in the browser. Once your certificate is trusted, a green lock appears in the browser address bar, and browser cached resources should work as expected. This is the most important thing, especially when web users are working under some network latency. </p>\n<p><a class=\"image\" href=\"/file/images/3/3a/2018.02/attachments/19894772/19894774.png\" title=\"/file/images/3/3a/2018.02/attachments/19894772/19894774.png\"> <img alt=\"19894774.png\" data-file-height=\"70\" data-file-width=\"139\" height=\"70\" src=\"../../../images/19894774_4d057145.png\" width=\"139\"/> </a></p>\n<h2 id=\"Tune_external_IDOL_server_configuration_(Service_Manager_tenants)\"><span class=\"mw-headline\" id=\"Tune_external_IDOL_server_configuration_.28Service_Manager_tenants.29\">Tune external IDOL server configuration (Service Manager tenants)</span></h2>\n<p>If you are connecting SMA Service Portal to external Service Manager, and using external IDOL servers, to gain better performance, you can tune IDOL server configuration by following the steps <a href=\"/doc/424/2022.05/slowglobalsearch\" title=\"here\">here</a>.</p>\n<h2 id=\"Configure_sm-gateway_pod_replicas_(Service_Manager_tenants)\"><span class=\"mw-headline\" id=\"Configure_sm-gateway_pod_replicas_.28Service_Manager_tenants.29\">Configure sm-gateway pod replicas (Service Manager tenants)</span></h2>\n<p>By default, after the SMA installation, the replicas value of the sm-gateway service is set to 0. If you need to deploy one or more Service Manager tenants, you need to configure a proper replicas value for this pod according to your sizing profile. Our recommendation is configuring one sm-gateway pod per 500 concurrent portal users. For example, if you have 2,000 concurrent portal users, you need to configure four sm-gateway pods.</p>\n<h2 class=\"mw-headline\" id=\"Disable_fluentd_daemonset_in_the_core_namespace\">Disable the fluentd daemonset in the core namespace</h2>\n<p>If you don't want to use fluentd for log shipping, we recommend that you delete and disable it because of the overhead that it produces on storage.</p>\n<p>Perform the following steps on a control plane node: </p>\n<ol>\n<li>Run the following command:\n\t<pre><code>cd $CDF_HOME/charts</code></pre>\n</li>\n<li>Locate the apphub-xxxx.tgz file. </li>\n<li>Run the following command:\n\t<pre><code>helm upgrade apphub -n core apphub.xxxx.tgz --reuse-values --set tags.logCollection=false</code></pre>\n</li>\n</ol>\n<h2 id=\"Tune_external_Service_Manager_(Service_Manager_tenants)\"><span class=\"mw-headline\" id=\"Tune_external_Service_Manager_.28Service_Manager_tenants.29\">Tune external Service Manager (Service Manager tenants)</span></h2>\n<p>The following tuning parameters are recommended when you are using a Service Manager tenant (that is, using an external Service Manager system as the backend of Service Portal).</p>\n<p><strong>Note:</strong> The <code>utallocmode</code> parameter is obsoleted from Servive Manager 9.70. If your Service Manager server is in 9.70 or higher versions, remove this parameter. If your Service Manager server is in 9.6x, this parameter is still available.</p>\n<pre>shared_memory:192000000\nutallocmode:1\ndao_sessiontimeout:100\n</pre>\n<div class=\"transcontent stn-begin--relatedTopics\"> </div>\n<h2>Create missing indexes for upper(...) conditions on entity table</h2>\n<p>This step isn't mandatory. It depends on the actual database runtime data on the customer side and needs support from the customer's system administrator or DBA.<br/>\n<br/>\nIn general, by continuously monitoring PostgreSQL logs (which are normally located under /var/lib/pgsql/10/data/pg_log), if you find any slow queries that include upper(...) conditions, consider creating new indexes to improve the query performance.</p>\n<ol>\n<li>Record SQL duration values and related queries in PostgreSQL logs, by enabling certain database configuration parameters such as <code>log_min_duration_statement</code>. For example, you can set \"<code>log_min_duration_statement = 3000</code>\" in the postgresql.conf file, to enable tracing on SQLs whose execution time exceeds 3 seconds.</li>\n<li>Check the PostgreSQL logs for any potential slow SQLs with the following pattern.\n\t<p><a class=\"image\" href=\"/file/images/3/3d/query_upper.png\" title=\"/file/images/3/3d/query_upper.png\"> <img alt=\"/mediawiki/images/3/3d/query_upper.png\" border=\"0\" file=\"/mediawiki/images/3/3d/query_upper.png\" height=\"437\" hspace=\"0\" src=\"../../../images/query_upper_a1ca770c.png\" style=\"width:727px;height:437px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"727\"/> </a></p>\n</li>\n<li>Create a new index, as shown in the following example. You need to provide the target's actual entity type id (in the example figure shown in the previous step, it should be the value of <strong><code>PersonGroup.entity_type_id</code> </strong>which comes from the slow SQL identified above).\n\t<pre><code>create index example_index_upper_schar0 on entities_63xxxxxx(upper(schar0)) where entity_type_id=&lt;target_entity_type_id&gt;</code></pre>\n</li>\n</ol>\n<h2 class=\"mw-headline\">Related topics</h2>\n<ul>\n<li><a href=\"/doc/423/26.1/plandeployment\" title=\"SMAX:25.1/PlanDeployment\">Plan the deployment</a></li>\n</ul>\n<div class=\"transcontent stn-end--relatedTopics\"> </div>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}