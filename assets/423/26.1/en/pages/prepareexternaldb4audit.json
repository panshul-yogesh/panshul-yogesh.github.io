{
  "title": "Prepare an external database for Audit",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>To prepare PostgreSQL, perform the following tasks.</p>\n<h2>Install PostgreSQL</h2>\n<p>You must create a separate PostgreSQL database for Audit service. This database can share the same PostgreSQL instance as Service Management. Make sure you enable SSL on the PostgreSQL because Audit uses SSL to communicate with PostgreSQL. Instructions on how to create a user and a database for a service for PostgreSQL are provided in the <em>PostgreSQL</em> section below.</p>\n<div class=\"Admonition_Note\"><span class=\"autonumber\">Note </span>\n<ul>\n<li>\n<p>It is strongly recommended to host the database server on a <b>physical machine</b>, and it should be an independent server without other applications running on it.</p>\n<p>Also, if the database server machine is a virtual machine, the resource must be dedicated to the database server.</p>\n</li>\n<li>\n<p>Database servers must be set to the same time zone, daylight savings settings, and time as the Audit server.</p>\n</li>\n<li>\n<p>The Audit server should be located in the same LAN as the database servers (without a proxy and firewalls between them). Otherwise, your system's performance may be impacted.</p>\n</li>\n</ul>\n</div>\n<h2>Configure PostgreSQL database server</h2>\n<p>If you are creating a separate PostgreSQL instance for Audit service, then follow these steps:</p>\n<ol>\n<li>\n<p>Enable TLS connections for the database server.</p>\n<p>Both SSL modes (<strong>verify-full</strong> and <strong>verify-ca</strong>) are supported. For details, see the PostgreSQL documentation</p>\n</li>\n<li>\n<p>Configure the <b>postgresql.conf</b> file</p>\n<p>In the <b>postgresql.conf</b> file, configure the following parameters depending on your ITOM Audit deployment size (Small, Medium, or Large).</p>\n<p>Note that the default value of the <code>listen_addresses</code> parameter is \"<code>localhost</code>\", which means only localhost can connect to the PostgreSQL instance. You need to set <code>listen_addresses = '*'</code> to allow remote connections.</p>\n<p>The following table provides example database settings for your reference.</p>\n<div>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Parameter</th>\n<th scope=\"col\">Small</th>\n<th scope=\"col\">Medium</th>\n<th scope=\"col\">Large</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>effective_cache_size</td>\n<td>32 GB</td>\n<td>48 GB</td>\n<td>48 GB</td>\n</tr>\n<tr>\n<td>maintenance_work_mem</td>\n<td>200 MB</td>\n<td>500 MB</td>\n<td>1 GB</td>\n</tr>\n<tr>\n<td>max_connections</td>\n<td>150</td>\n<td>150</td>\n<td>150</td>\n</tr>\n<tr>\n<td>shared_buffers</td>\n<td>16 GB</td>\n<td>32 GB</td>\n<td>50 GB</td>\n</tr>\n<tr>\n<td>work_mem</td>\n<td>100 MB</td>\n<td>200 MB</td>\n<td>300 MB</td>\n</tr>\n<tr>\n<td>listen_addresses</td>\n<td>'*'</td>\n<td>'*'</td>\n<td>'*'</td>\n</tr>\n</tbody>\n</table>\n</div>\n</li>\n<li>\n<p>Configure encoding and locale. Make sure that the PostgreSQL instance uses the following encoding and locale settings:</p>\n<pre>Encoding: UTF8\nLC_COLLATE: en_US.UTF-8\nLC_CTYPE: en_US.UTF-8</pre>\n</li>\n</ol>\n<h3>PostgreSQL </h3>\n<p> Below are sample SQL commands for creating a user and a database for a service for PostgreSQL database:</p>\n<ol>\n<li>\n<p>Log in to your database server with the administrator credentials.</p>\n<pre>psql -h &lt;host&gt; -p &lt;port&gt; -U &lt;PostgreSQL admin&gt;\n</pre>\n</li>\n<li>\n<p>Run the following commands to create the database and the user used by the Audit Server:</p>\n<pre>CREATE USER &lt;USERNAME&gt; PASSWORD '&lt;PASSWORD&gt;';\nCREATE DATABASE &lt;DBNAME &gt; OWNER &lt;USERNAME&gt;;</pre>\n<p><em>&lt;PASSWORD&gt;</em> for the database user should be at least 16 characters long and have alphanumeric characters, at least one lower case letter, at least one upper case letter, and at least one digit.</p>\n<p>For example:</p>\n<pre>CREATE USER audit PASSWORD 'Password@Audit1234';\nCREATE DATABASE audit_db OWNER audit;</pre>\n</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}