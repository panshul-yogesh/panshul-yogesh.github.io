{
  "title": "Prepare external databases",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>You must use external databases for OPTIC Management Toolkit (OMT) and the suite in a production environment. For information about supported external databases, see <a href=\"/doc/423/26.1/supportmatrixonprem\" title=\"Support matrix for on-premises deployment\">Support matrix for on-premises deployment</a>. For instructions on OMT database configuration, see the OMT documentation. </p>\n<p>This topic includes steps to configure the <strong>pg_hba.conf</strong> file for PostgreSQL and AlloyDB Omni databases. For more information about how to configure other parameters such as connection type, database name, user name, client IP address range, and authentication method, refer to the PostgreSQL documentation. For example, the <a href=\"https://www.postgresql.org/docs/14/auth-pg-hba-conf.html\" title=\"PostgreSQL 14 documentation\">PostgreSQL 14 documentation</a>. </p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">In this release, support for AlloyDB Omni is under <strong>controlled availability</strong>. Please contact our product management team before you begin the implementation in your production environment.</div>\n</div>\n<h2>General requirements for external databases</h2>\n<p>To set up the PostgreSQL or AlloyDB Omni database, you must meet the following requirements:</p>\n<ul>\n<li>All configurations described in this topic, including parameters per profile must be applied. See the <strong>Prepare external PostgreSQL for the suite</strong><em> </em>and <strong>PostgreSQL encoding (utf8)</strong> in this document.  For supported database versions, see <a href=\"/doc/423/26.1/supportmatrixonprem\" title=\"PostgreSQL version matrix\">PostgreSQL version matrix</a>. </li>\n<li>You must be able to create a user with the <strong>create db</strong> role. Then, you can create databases with this newly created user.</li>\n<li>The database owner must be able to perform Create, Read, Update, and Delete operations on its own database objects such <strong>table </strong>and <strong>index</strong>.</li>\n<li>As the suite needs long and live connections with databases, the timeout of the PostgreSQL or AlloyDB Omni solutions, such as the timeout in HAProxy frontending PostgreSQL in Patroni HA solution, should be longer than the timeout setting of the heartbeat between the suite and the database. The database heartbeat is determined by the <code>IDLE_CONNECTION_TEST_PERIOD</code> parameter in the <strong>itom-xruntime-infra-config</strong> configmap. Don't configure the <code>statement_timeout</code>, <code>idle_session_timeout</code>, and <code>idle_in_transaction_session_timeout</code> parameters of the database server.</li>\n<li>The database high availability environment must be accessed by a single IP or FQDN.</li>\n<li>Low network latency is required. We recommend a network latency lower than 0.5 ms.</li>\n<li>The <strong>pg_trgm</strong> module (included in the <strong>postgresql-contrib</strong> module) must be available on the database server. This module is required by the <strong>contains</strong> search function when creating indexes to help improve the performance. You can check if it is available by running the following SQL statement:<br/>\n<code>select * from pg_available_extensions where name='pg_trgm'; </code></li>\n<li>For a production environment, make sure the database server uses SSL for connection, and obtain the database CA certificate in PEM (Base64 encoded) format, which can have a file extension of .pem, .cer, or .crt.</li>\n</ul>\n<h2>Install a database server</h2>\n<p>This release supports both PostgreSQL and <a href=\"https://cloud.google.com/alloydb/docs/omni\" title=\"AlloyDB Omni \">AlloyDB Omni </a>(a PostgreSQL-compatible database server). </p>\n<h3>Install PostgreSQL</h3>\n<ol>\n<li>Install a supported version of PostgreSQL. If you want to use a PostgreSQL high availability setup, see <a href=\"/doc/423/26.1/hasqlpatroni\" title=\"High availability PostgreSQL with Patroni\">High availability PostgreSQL with Patroni</a>. </li>\n<li>On the database server, install the <strong>postgresql-contrib</strong> module that has the same version as the PostgreSQL server.</li>\n<li>Prepare a PostgreSQL admin user with \"Superuser\" role. In the steps below, it's referred to as \"&lt;postgres admin&gt;.\"</li>\n</ol>\n<h3>Install AlloyDB Omni</h3>\n<ol>\n<li>Install AlloyDB Omni using Docker. For details, see <a href=\"https://cloud.google.com/alloydb/docs/omni/quickstart\" title=\"Quick start AlloyDB Omni\">Quick start: Install AlloyDB Omni</a>. If you want to use an AlloyDB Omni high availability setup, see <a href=\"/doc/423/26.1/hak8salloydb\" title=\"Install AlloyDB Omni on Kubernetes with high availability\">Install AlloyDB Omni on Kubernetes with high availability</a>.<br/>\n\tMake sure the AlloyDB Omni database can run on your host successfully, and its embedded PostgreSQL is a supported version.</li>\n<li>Run the following commands to clean up the AlloyDB Omni container you created:\n\t<pre>docker stop &lt;alloydb container name&gt;<alloydb container=\"\" name=\"\">\ndocker rm &lt;alloydb container name&gt;<alloydb container=\"\" name=\"\"></alloydb></alloydb></pre>\n</li>\n<li>Create a PGDATA folder on the database server. See the AlloyDB sizing guide for the disk size requirements.\n\t<p>For example:</p>\n<pre>mkdir/pgdata</pre>\n</li>\n<li>Run AlloyDB Omni with the database initialized in the PGDATA folder you created:\n\t<pre>docker run --name  &lt;alloydb container name&gt;<alloydb container=\"\" name=\"\"> -e POSTGRES_INITDB_ARGS=\"--icu-locale=en-US --locale=en_US.utf8\" -e POSTGRES_PASSWORD=&lt;postgres-initial-password&gt;<postgres initial=\"\" password=\"\"> -p &lt;host port&gt;<host port=\"\">:5432 -v &lt;host db data folder&gt;<external data=\"\" directory=\"\">:/var/lib/postgresql/data -d google/alloydbomni</external></host></postgres></alloydb></pre>\n\tFor example:\n\n\t<pre>docker run --name my-omni -e POSTGRES_INITDB_ARGS=\"--icu-locale=en-US --locale=en_US.utf8\" -e POSTGRES_PASSWORD=postgres<postgres initial=\"\" password=\"\"> -p 5432:5432 -v /pgdata:/var/lib/postgresql/data -d google/alloydbomni</postgres></pre>\n</li>\n<li>Run the following command to check that the STATUS of the container is UP.\n\t<pre>docker ps -a</pre>\n</li>\n<li>Connect to the AlloyDB Omni database with the following command:\n\t<pre>docker exec -it my-omni psql -h localhost -U postgres</pre>\n<p>Change the password for DBA \"postgres\" by running the following SQL command. Make sure you can connect to the DB with the new password.</p>\n<pre>alter user postgres with password '&lt;new dba password&gt;<new password=\"\">';  </new></pre>\n</li>\n<li>Go to the PGDATA folder you created (for example /pgdata) and check that the postgresql.conf and the pg_hba.conf files are there. Later, you need to update the related settings in these two files. </li>\n</ol>\n<h2>Check the template0 database</h2>\n<p>During the suite installation, the system will use the <code>template0</code> database in to create databases for the suite. You need to make sure that the <code>template0 </code>database is a template and uses the UTF8 encoding and locale settings. To do this, run the following SQL as the DBA user: </p>\n<pre><code>select pg_encoding_to_char(encoding) as \"Encoding\", datcollate as \"Collation\", datctype as \"Ctype\", datistemplate as \"isTemplate\" from pg_database where datname='template0';</code></pre>\n<p>This SQL command should return the result in the following table.</p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Setting</th>\n<th scope=\"col\">Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Encoding</strong></td>\n<td>UTF8</td>\n</tr>\n<tr>\n<td><strong>Collation</strong></td>\n<td>en_US.utf8</td>\n</tr>\n<tr>\n<td><strong>Ctype</strong></td>\n<td>en_US.utf8</td>\n</tr>\n<tr>\n<td><strong>isTemplate</strong></td>\n<td>t</td>\n</tr>\n</tbody>\n</table>\n<p>Note that if template0 isn't a template, during the suite installation, you will see an error that resembles the following in the lifecycle.log of the <code>lcm</code> pod:<br/>\n<code>connected with db=postgres user: maas_admin   ERROR: permission denied to copy database \"template0\"</code></p>\n<h2 class=\"mw-headline\" id=\"Prepare_external_PostgreSQL_for_SMA\">Prepare external database for the suite</h2>\n<p>The suite supports PostgreSQL and AlloyDB Omni databases, with or without TLS enabled. The following table lists the components that require database configuration during the suite installation. </p>\n<table>\n<tbody>\n<tr>\n<th>Component</th>\n<th>Notes</th>\n</tr>\n<tr>\n<td>\n<ul>\n<li>Suite Administration</li>\n<li>Service Management and Smart Analytics</li>\n<li>IdM</li>\n<li>Autopass</li>\n</ul>\n</td>\n<td>Mandatory</td>\n</tr>\n<tr>\n<td>\n<ul>\n<li>DND</li>\n</ul>\n</td>\n<td>Optional</td>\n</tr>\n<tr>\n<td>\n<ul>\n<li>FinOps</li>\n</ul>\n</td>\n<td>Optional</td>\n</tr>\n<tr>\n<td>\n<ul>\n<li>Software Asset Management (SAM)</li>\n</ul>\n</td>\n<td>Optional</td>\n</tr>\n</tbody>\n</table>\n<p>You can use a separate database instance for each component. The following steps assume that you are using one database instance for all components.</p>\n<h3>Check your database instance for duplicate database names</h3>\n<p>Make sure your PostgreSQL or AlloyDB instance doesn't contain databases that have duplicate names of the suite databases. During the suite installation, you will need to specify a database administrator (DBA) user for each component, and the suite installer will automatically create the required databases and database owner for each component by using the DBA account that you specify. See the following table for the names of the automatically created databases and users. If these databases or users already exist, you need to delete them first; otherwise, your suite database configuration will fail when you run the suite installer.</p>\n<table>\n<tbody>\n<tr>\n<th>Component</th>\n<th>User name</th>\n<th>Databases</th>\n</tr>\n<tr>\n<td>Service Management</td>\n<td>maas_admin</td>\n<td>maas_admin, maas_template, xservices_ems, xservices_mng, xservices_rms, xie, scheduler, and carbon</td>\n</tr>\n<tr>\n<td>Suite Administration</td>\n<td>bo_db_user</td>\n<td>bo_ats, bo_user, bo_config, and bo_license</td>\n</tr>\n<tr>\n<td>Smart Analytics</td>\n<td>smarta</td>\n<td>smartadb</td>\n</tr>\n<tr>\n<td>IdM</td>\n<td>idm</td>\n<td>idm</td>\n</tr>\n<tr>\n<td>Autopass</td>\n<td>autopass</td>\n<td>autopassdb</td>\n</tr>\n<tr>\n<td>Design and Deploy (DND)</td>\n<td>hcm_admin</td>\n<td>dnd</td>\n</tr>\n<tr>\n<td>FinOps</td>\n<td>cgro</td>\n<td>cgro</td>\n</tr>\n<tr>\n<td>Software Asset Management (SAM)</td>\n<td>sam</td>\n<td>sam</td>\n</tr>\n</tbody>\n</table>\n<p>In a later step, you will need to update the <strong>pg_hba.conf</strong> file to allow these automatically created database owners to connect to their corresponding databases.</p>\n<h3>Configure the postgresql.conf file</h3>\n<ol>\n<li>In the <strong>postgresql.conf</strong> file, configure the following parameters depending on your suite deployment size (Small, Medium, or Large). The following table provides example database settings for your reference. If you use the same database server for Operations Orchestration (OO) Containerized, you need to increase the max_connections values according to the <a href=\"/doc/423/26.1/sizingforsmadndcgro\" title=\"sizing guide\">sizing guide</a><span style=\"font-size: 14px;\">.</span>\n<table>\n<tbody>\n<tr>\n<th>Parameter</th>\n<th>Small</th>\n<th>Medium</th>\n<th>Large</th>\n</tr>\n<tr>\n<td>effective_cache_size</td>\n<td>RAM * 0.65</td>\n<td>RAM * 0.70</td>\n<td>RAM * 0.75</td>\n</tr>\n<tr>\n<td>maintenance_work_mem</td>\n<td>1 GB</td>\n<td>2 GB</td>\n<td>4 GB</td>\n</tr>\n<tr>\n<td>max_connections</td>\n<td>2000</td>\n<td>2000</td>\n<td>3000</td>\n</tr>\n<tr>\n<td>shared_buffers</td>\n<td>8 GB</td>\n<td>16 GB</td>\n<td>24 GB</td>\n</tr>\n<tr>\n<td>work_mem</td>\n<td>8 MB</td>\n<td>16 MB</td>\n<td>16 MB</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>Configure the ssl parameters in<strong> postgresql.conf</strong> file. Make sure the file permissions for server key file and the server certificate file are set to 400. Here is an example for the ssl parameter settings:\n\t<pre>ssl=true\nssl_cert_file='server.crt'\nssl_key_file='server.key'</pre>\n</li>\n<li>Make sure that database is configured to use the <strong>scram-sha-256</strong> encryption algorithm (this is the default configuration in PostgreSQL14). To do this, set the parameter in the <strong>postgresql.conf</strong> file:\n\t<pre><code>password_encryption=scram-sha-256</code></pre>\n\tRun the following SQL command to reload the database server configuration so that the change takes effect: \n\n\t<pre><code>select pg_reload_conf();</code></pre>\n\tRun the following SQL command to verify that the password_encryption parameter is set to <strong>scram-sha-256</strong>:\n\n\t<pre><code>show password_encryption;</code></pre>\n\tRun the following SQL command to reset the DBA user password. The password can be either new or the same as before. This changes your current password to use the <strong>scram-sha-256</strong> password encryption.\n\n\t<pre><code>alter user &lt;DBA user&gt; with password 'xxxx';</code></pre>\n</li>\n<li>Set<b> listen_addresses= '*' </b>to allow remote connections. The default value in the <strong>postgresql.conf</strong> file is <strong>listen_addresses</strong>=<strong>localhost</strong>, which means only localhost can connect to the database instance.</li>\n<li>(Recommended) Turn off Just-in-Time Compilation (JIT) for better performance. To do this, check if the line <strong>jit=off</strong> is present in the <strong>postgresql.conf</strong> file. If not, add it to the file. </li>\n<li>(Optional) To enforce TLSv1.3 on the database server side, set the <a href=\"https://postgresqlco.nf/doc/en/param/ssl_min_protocol_version/\" title=\"ssl_min_protocol_version\">ssl_min_protocol_version</a> and <a href=\"https://postgresqlco.nf/doc/en/param/ssl_max_protocol_version/\" title=\"ssl_max_protocol_version\">ssl_max_protocol_version</a> parameters to <strong>TLSv1.3</strong>.  You can set <strong>ssl_min_protocol_version=TLSv1.3</strong> and <strong>ssl_max_protocol_version=TLSv1.3 </strong>in the <code>postgresql.conf</code> file, then run the <code>select pg_reload_conf()</code> SQL statement to apply the change without restarting the database server. Make sure the OpenSSL version is 1.1.1 or greater, which supports TLSv1.3. </li>\n</ol>\n<h3>Update the pg_hba.conf file</h3>\n<ol>\n<li>Add the following lines to the <strong>pg_hba.conf</strong> file:\n\n\t<pre>host bo_ats bo_db_user 172.0.0.0/24 scram-sha-256\nhost bo_user bo_db_user 172.0.0.0/24 scram-sha-256\nhost bo_config bo_db_user 172.0.0.0/24 scram-sha-256\nhost bo_license bo_db_user 172.0.0.0/24 scram-sha-256\nhost smartadb smarta 172.0.0.0/24 scram-sha-256\nhost xservices_ems maas_admin 172.0.0.0/24 scram-sha-256\nhost xservices_mng maas_admin 172.0.0.0/24 scram-sha-256\nhost xservices_rms maas_admin 172.0.0.0/24 scram-sha-256\nhost xie maas_admin 172.0.0.0/24 scram-sha-256\nhost scheduler maas_admin 172.0.0.0/24 scram-sha-256\nhost carbon maas_admin 172.0.0.0/24 scram-sha-256\nhost maas_admin maas_admin 172.0.0.0/24 scram-sha-256\nhost maas_template maas_admin 172.0.0.0/24 scram-sha-256\nhost idm idm 172.0.0.0/24 scram-sha-256\nhost autopassdb autopass 172.0.0.0/24 scram-sha-256\nhost bo_ats &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256\nhost bo_user &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256\nhost bo_config &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256\nhost bo_license &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256\nhost smartadb &lt;dba_user&gt;  172.0.0.0/24 scram-sha-256\nhost xservices_ems &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256\nhost xservices_mng &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256\nhost xservices_rms &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256\nhost xie &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256\nhost scheduler &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256\nhost carbon &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256\nhost maas_admin &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256\nhost maas_template &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256\nhost idm &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256\nhost autopassdb &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256\nhost postgres &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256</pre>\n<p>For example, if you use <b>postgres</b> as the DBA user, add the following lines (replace 172.0.0.0/24 with your own value):</p>\n<pre>host bo_ats bo_db_user 172.0.0.0/24 scram-sha-256\nhost bo_user bo_db_user 172.0.0.0/24 scram-sha-256\nhost bo_config bo_db_user 172.0.0.0/24 scram-sha-256\nhost bo_license bo_db_user 172.0.0.0/24 scram-sha-256\nhost smartadb smarta 172.0.0.0/24 scram-sha-256\nhost xservices_ems maas_admin 172.0.0.0/24 scram-sha-256\nhost xservices_mng maas_admin 172.0.0.0/24 scram-sha-256\nhost xservices_rms maas_admin 172.0.0.0/24 scram-sha-256\nhost xie maas_admin 172.0.0.0/24 scram-sha-256\nhost scheduler maas_admin 172.0.0.0/24 scram-sha-256\nhost carbon maas_admin 172.0.0.0/24 scram-sha-256 \nhost maas_admin maas_admin 172.0.0.0/24 scram-sha-256\nhost maas_template maas_admin 172.0.0.0/24 scram-sha-256\nhost idm idm 172.0.0.0/24 scram-sha-256\nhost autopassdb autopass 172.0.0.0/24 scram-sha-256\nhost bo_ats postgres 172.0.0.0/24 scram-sha-256\nhost bo_user postgres 172.0.0.0/24 scram-sha-256\nhost bo_config postgres 172.0.0.0/24 scram-sha-256\nhost bo_license postgres 172.0.0.0/24 scram-sha-256\nhost smartadb postgres  172.0.0.0/24 scram-sha-256\nhost xservices_ems postgres 172.0.0.0/24 scram-sha-256\nhost xservices_mng postgres 172.0.0.0/24 scram-sha-256\nhost xservices_rms postgres 172.0.0.0/24 scram-sha-256\nhost xie postgres 172.0.0.0/24 scram-sha-256\nhost scheduler postgres 172.0.0.0/24 scram-sha-256\nhost carbon postgres 172.0.0.0/24 scram-sha-256 \nhost maas_admin postgres 172.0.0.0/24 scram-sha-256\nhost maas_template postgres 172.0.0.0/24 scram-sha-256\nhost idm postgres 172.0.0.0/24 scram-sha-256\nhost autopassdb postgres 172.0.0.0/24 scram-sha-256\nhost postgres postgres 172.0.0.0/24 scram-sha-256\n</pre>\n<ul>\n<li>You can use “hostssl” instead of \"host\" if your PostgreSQL database server has SSL enabled, but this is optional for the suite installation. For information about the difference between “host” and “hostssl”, see the <a href=\"https://www.postgresql.org/docs/11/auth-pg-hba-conf.html\" title=\"PostgreSQL documentation\">PostgreSQL documentation</a>. In order for the suite to connect to PostgreSQL through SSL, you only need to enable the TLS option and import your PostgreSQL CA certificate into the suite from the installation portal UI in a later step when configuring database connection settings for the suite.</li>\n<li>&lt;dba_user&gt;: replace it with the DBA user name of the PostgreSQL server. You will specify this user later on the installation portal UI. </li>\n<li>172.0.0.0/24: this is an example value used in this step and some of the next steps. You need to replace this example value with the IPv4 address range of the cluster nodes or a single cluster node's hostname. </li>\n</ul>\n</li>\n<li>Add the following line to the <strong>pg_hba.conf</strong> file to allow the maas_admin user to access the default <b>postgres</b> database:\n\t<pre>host postgres maas_admin 172.0.0.0/24 scram-sha-256 </pre>\n\tThis configuration is needed because before creating the component databases, the suite installer will check if they already exist, and will skip the database creation if they already exist. To check the existence of the databases, the suite installer will use the mass_admin user to connect to the default <b>postgres</b> database.</li>\n<li>If you want to deploy the DND capability, add the following lines to the <strong>pg_hba.conf</strong> file:\n\t<pre>host dnd hcm_admin 172.0.0.0/24 scram-sha-256\nhost postgres hcm_admin 172.0.0.0/24 scram-sha-256\nhost dnd &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256\n</pre>\n</li>\n<li>If you want to deploy the FinOps capability, add the following lines to the <strong>pg_hba.conf</strong> file:\n\t<pre><code>host cgro cgro 172.0.0.0/24 scram-sha-256\nhost cgro &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256</code></pre>\n</li>\n<li>If you want to deploy the SAM capability, add the following lines to the <strong>pg_hba.conf</strong> file:\n\t<pre><code>host sam sam 172.0.0.0/24 scram-sha-256\nhost sam &lt;dba_user&gt; 172.0.0.0/24 scram-sha-256</code></pre>\n</li>\n<li>For AlloyDB Omni, you can skip this step. Run the following commands on the PostgreSQL host to check the <b>DefaultTasksMax</b> value:\n\t<pre>systemctl show --property DefaultTasksMax\nsystemctl status &lt;postgresql.service name&gt; | grep Task\n</pre>\n\tWhere: <code>&lt;postgresql.service name&gt;</code> refers to the PostgreSQL service name in your environment, which may vary from one PostgreSQL installation to another (an example of the service name is <b>postgresql.service</b>). If the <b>DefaultTasksMax</b> value is too small (for example, the <b>DefaultTasksMax</b> property has a default value of 512 on SUSE), your connection to the PostgreSQL database may fail with the following error: <code>could not fork new process for connection: Resource temporarily unavailable</code>. To prevent this issue from occurring, you need to add the following line to the /usr/lib/systemd/system/&lt;postgresql.service name&gt; file:\n\n\t<pre>TasksMax=1000000</pre>\n<b>Note</b>: Normally this step isn't needed if PostgreSQL is running on RHEL, CentOS, or Oracle Linux.</li>\n</ol>\n<h3>Restart the database server</h3>\n<p>After you configure the <strong>postgresql.conf</strong> file and the <strong>pg_hba.conf</strong> file as above, you need to restart the database server to apply these changes.</p>\n<ul>\n<li>For a standard PostgreSQL database, restart the PostgreSQL instance.</li>\n<li>For an AlloyDB Omni database, restart the AlloyDB Omni container with <strong>shm-size</strong> configured. The<strong> shm-size</strong> parameter value must be increased while starting the containerized AlloyDB Omni server. You can set the value to 2 GB. See the following example: \n\t<pre>docker stop my-omni\ndocker rm my-omni\ndocker run --name my-omni <strong>--shm-size=2GB</strong> -p 5432:5432 -v /pgdata:/var/lib/postgresql/data -d google/alloydbomni</pre>\n</li>\n</ul>\n<p>For details on configuring the <strong>shm-size </strong>parameter, refer to the official AlloyDB documentation for sizing information.</p>\n<h3>Install and configure Vertica for FinOps</h3>\n<p>To use FinOps, in addition to the PostgreSQL configuration described above, you still need to install and configure a Vertica database. For details, see <a _ngcontent-c23=\"\" href=\"/doc/423/26.1/installconfigureverticadb\" title=\"Install and configure Vertica database\">Install and configure Vertica database</a>.</p>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}