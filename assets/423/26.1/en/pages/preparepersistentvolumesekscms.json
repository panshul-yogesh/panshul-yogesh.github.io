{
  "title": "Prepare persistent volumes for UD/UCMDB",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>UD/UCMDB installation in Helm mode requires the following Persistent Volumes (PVs). PVs are relevant to EFS volumes. </p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">Component</th>\n<th scope=\"col\">EFS volume name</th>\n<th scope=\"col\">Description</th>\n<th scope=\"col\">Example directory path</th>\n</tr>\n<tr>\n<td>UD/UCMDB</td>\n<td>ucmdb-data-volume</td>\n<td>Stores data that's generated by UD/UCMDB.</td>\n<td>/var/vols/itom/ucmdb/data_volume</td>\n</tr>\n<tr>\n<td>UD/UCMDB</td>\n<td>ucmdb-config-volume</td>\n<td>Stores UD/UCMDB configuration files.</td>\n<td>/var/vols/itom/ucmdb/conf_volume</td>\n</tr>\n<tr>\n<td>UD/UCMDB</td>\n<td>ucmdb-log-volume</td>\n<td>Stores logs generated by UD/UCMDB.</td>\n<td>/var/vols/itom/ucmdb/log_volume</td>\n</tr>\n</thead>\n</table>\n<p>If you already have the PVs available for use, you need to ensure that the storageClassName attribute of the PVs is the same as the storage class name in the <strong>my-values.yaml</strong> file. In the later step, you will need to specify the name of PV to be bound with one of the persistent volume claims (PVCs).</p>\n<p>If you want to create the required PVs from scratch, perform the following tasks:</p>\n<ol>\n<li>\n<p>Log in to the bastion node and navigate to the UD/UCMDB chart package directory. For example:</p>\n<pre>cd UCMDB_Helm_Chart-2x.x/ucmdb-helm-charts/samples/</pre>\n</li>\n<li>\n<p>Open the <b>ucmdb-pv.yaml</b> file with a text editor, configure the following parameters, and then save the file.</p>\n<ul>\n<li><strong>&lt;FQDN_Of_The_NFS_Server&gt;</strong>: EFS DNS name that you can get by navigating to <strong>AWS All services</strong> &gt; <strong>CloudFormation </strong>&gt; <strong>Stacks </strong>&gt; your EFS stack for UD/UCMDB &gt; <strong>output</strong>, and then find <strong>FileServerDNSName</strong>.</li>\n<li><strong>&lt;NFS_directory path&gt;</strong>: EFS directory paths for the three EFS volumes required by UD/UCMDB that you provided in <strong>configureCMSEFS.sh </strong>when creating the EFS volumes for UD/UCMDB, see <a href=\"/doc/423/26.1/configureefscms\">Configure EFS for UD/UCMDB</a>.</li>\n<li><strong>storageClassName</strong>: The storage class name of the PV for UD/UCMDB. For example, gp2. You can use the \"<code>kubectl get sc\"</code> command to see the storage class name.</li>\n</ul>\n<div class=\"Admonition_Note\"><span class=\"autonumber\">Note</span> Make sure that the directory path corresponds to the persistent volume name. For example:\n\n\t<pre>    apiVersion: v1\n\tkind: PersistentVolume\n\tmetadata:\n\t  name: ucmdb-config-volume\n\tspec:\n\t  accessModes:\n\t  - ReadWriteMany\n\t  capacity:\n\t    storage: 5Gi\n\t  nfs:\n\t    path: /var/vols/itom/ucmdb/conf_volume\n\t    server: fs-58c3d35d.efs.us-west-2.amazonaws.com    </pre>\n</div>\n</li>\n<li>\n<p>Run the following command to create persistent volumes:</p>\n<pre>kubectl create -f UCMDB_Helm_Chart-2x.x/ucmdb-helm-charts/samples/ucmdb-pv.yaml</pre>\n</li>\n<li>\n<p>Run the following command to verify the volume creation:</p>\n<pre>kubectl get pv | grep ucmdb</pre>\n</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}