{
  "title": "REST API queries",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><div>You can use the Entity Management Service (EMS) REST API to run a variety of queries to retrieve information from the system. For more information about the EMS REST API, see <a href=\"/doc/423/26.1/emsrestapi\" title=\"EMS REST API\">EMS REST API</a>.</div>\n<p>You can use the REST API in connection with the Query Language. For a reference of Query Language operators and commands, see <a href=\"/doc/423/26.1/collectqueryprotocol\" title=\"SMAX:25.1/CollectQueryProtocol\">REST API collection query protocol</a>.</p>\n<h2 class=\"mw-headline\" id=\"Retrieving_related_record_properties\">Retrieving related record properties</h2>\n<p>The EMS REST API enables you to query for properties defined on related records.</p>\n<p>Example: Consider the following pseudo <code>meta-model</code>:</p>\n<pre>Entity:Incident {\n        Property: Id\n        Property: Name\n        Property: Owner-&gt;IncidentOwner\n}\nEntity:User {\n        Property: Id\n        Property: Name\n        Property: Email\n}\nRelationship:IncidentOwner {\n        From: Incident\n        To: User\n}</pre>\n<p>and the following REST call:</p>\n<p><code>HTTP GET: /rest/&lt;tenant-id&gt;/ems/Incident?layout=Id,Status,OwnedByPerson,OwnedByPerson.Name,OwnedByPerson.Email</code></p>\n<p>where <b>tenant-id</b> represents the tenant ID. To access the tenant ID, right click the <b>Launch</b> button next to the required product on <strong>MyAccount</strong>, select <b>Copy link address</b> and paste it into a browser. The tenant ID is the number following <b>TENANTID=</b>.</p>\n<p>You can see the following result:</p>\n<pre>{\n        \"entities\": [\n                        {\n                \"entity_type\": \"Incident\",\n\"properties\": {\n                                        \"Id\": \"12226789\",\n        \"Status\": \"Open\",\n                                        \"Owner\": \"123651234\"\n                                        \n},\n\"related_properties\" : {\n                                        \"Owner\": {\n                                                \"Name\": \"Jimi\",\n                                                \"Email\": \"jimi@microfocus.com\"\n                                        }\n}\n}\n],\n\"meta\": {\n\"completion_status\": \"OK\",\n        }\n}</pre>\n<h2 class=\"mw-headline\" id=\"Retrieving_related_records\">Retrieving related records</h2>\n<p>This section refers to the EMS query API for querying entities based on relationships and paths to another record type.</p>\n<p>The EMS supports a generic API for retrieving entities based on relationships or paths and a specific record ID. This API supports all relationship types (one to many, many to many, and one to one) in both directions.</p>\n<p>Example 1 (changes caused by incident): Return all the changes caused by the Incident with <code>Id=&lt;id&gt;</code> via the <code>ChangeCausedByIncident</code> relationship. Enter the following request URI:</p>\n<div class=\"example\">\n<p>HTTP GET: <code>rest/&lt;tenant-id&gt;/ems/Incident/&lt;id&gt;/associations/ChangeCausedByIncident/?&lt;query-params&gt;</code></p>\n</div>\n<p>Example 2 (incidents caused by change): Return all the Incidents caused by changes with <code>Id=&lt;id&gt;</code> via the <code>IncidentCausedByChange</code> relationship. Enter the following request URI:</p>\n<div class=\"example\">\n<p>HTTP GET: <code>rest/&lt;tenant-id&gt;/ems/Change/&lt;id&gt;/associations/IncidentCausedByChange/?&lt;query-params&gt;</code></p>\n<p>When using the association API, if the current entity in the many-to-many field is target entity and the field's opposite name is not null, you need to use the opposite name to search associations.</p>\n</div>\n<p>For example, you want to get the association of \"SystemElementAffectedByProblem.\" To do this, first go to check this property of Problem in Studio, Problem is the target record type of this field.</p>\n<p><a class=\"image\" href=\"/file/images/4/46/QueryProperties1.png\" title=\"/file/images/4/46/QueryProperties1.png\"> <img alt=\"/mediawiki/images/4/46/QueryProperties1.png\" border=\"0\" file=\"/mediawiki/images/4/46/QueryProperties1.png\" height=\"190\" hspace=\"0\" src=\"../../../images/QueryProperties1_df6a7b74.png\" style=\"width:628px;height:190px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"628\"/> </a></p>\n<p>Then, go to the System Element record type to check this field. </p>\n<p><a class=\"image\" href=\"/file/images/e/e5/QueryProperties2.png\" title=\"/file/images/e/e5/QueryProperties2.png\"> <img alt=\"/mediawiki/images/e/e5/QueryProperties2.png\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/e/e5/QueryProperties2.png\" height=\"331\" hspace=\"0\" src=\"../../../images/QueryProperties2_9ee080b8.png\" style=\"width:622px;height:331px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"622\"/> </a><br/>\nThe opposite name is not null. So the association API needs to use:<br/>\nems/Problem/11061/associations/ProblemAffectsSystemElement?layout=Id </p>\n<p><a class=\"image\" href=\"/file/images/9/98/QueryProperties3.png\" title=\"/file/images/9/98/QueryProperties3.png\"> <img alt=\"/mediawiki/images/9/98/QueryProperties3.png\" border=\"0\" file=\"/mediawiki/images/9/98/QueryProperties3.png\" height=\"481\" hspace=\"0\" src=\"../../../images/QueryProperties3_21aaae56.png\" style=\"width:744px;height:481px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\" width=\"744\"/> </a></p>\n<h2 class=\"mw-headline\" id=\"Retrieving_grouped_aggregated_record_data\">Retrieving grouped aggregated record data</h2>\n<p>The EMS supports basic, generic grouping and aggregation of record data, based on the <strong>meta-model,</strong> similar to the <strong>row-data</strong> APIs. This API supports basic aggregation functions on filtered record data, using the same filtering semantics specified for the <strong>row-data</strong> APIs.</p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">\n<p>The EMS doesn't support aggregation functions without grouping.</p>\n</div>\n</div>\n<p>Supported functions</p>\n<p>The EMS supports the following aggregation functions:</p>\n<ul>\n<li><strong>count</strong></li>\n<li><strong>sum</strong></li>\n<li><strong>avg</strong></li>\n<li><strong>min</strong></li>\n<li><strong>max</strong></li>\n</ul>\n<p>Supported Query Parameters</p>\n<p>The EMS API supports the grouping of aggregated results, similar to the SQL <b>GROUP BY</b> feature and with the same semantics.</p>\n<table>\n<caption>Supported Query Parameters</caption>\n<tbody>\n<tr>\n<th>Name</th>\n<th>Description</th>\n<th>Example</th>\n</tr>\n<tr>\n<td>layout</td>\n<td>Similar to the standard query protocol with the addition of aggregation functions. <b>Group</b> parameter must list <strong>Listed property</strong> names as well.</td>\n<td>\n<p><strong>layout=Category,Name,Sum(Rank),Count(Name)</strong></p>\n</td>\n</tr>\n<tr>\n<td>group</td>\n<td>Defines ordered aggregation groups with the same semantics as in SQL. <strong>Layout</strong> section must list all grouping properties.</td>\n<td>\n<p><strong>group=Name,Category</strong></p>\n</td>\n</tr>\n<tr>\n<td>filter</td>\n<td>Filters the population of the entities. Uses the same semantics as the records API filters.</td>\n<td>\n<p><strong>filter=Status='In Progress'</strong></p>\n</td>\n</tr>\n<tr>\n<td>order</td>\n<td>Orders the returned data set by the specified expression. The expression can be a property or a function expression specified in the <b>layout</b> section.</td>\n<td>\n<p><strong>order=Sum(Rank) desc,Name</strong></p>\n</td>\n</tr>\n<tr>\n<td>skip</td>\n<td>Uses the same semantics as the generic protocol.</td>\n<td>\n<p><strong>skip=30</strong></p>\n</td>\n</tr>\n<tr>\n<td>size</td>\n<td>Uses the same semantics as the generic protocol.</td>\n<td>\n<p><strong>size=30</strong></p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Example: Return the sum of all incidents grouped by priority category ID and category display label. Enter the following request URI:</p>\n<p><code>rest/&lt;tenant-id&gt;/ems/Incident/aggregations</code></p>\n<p>where <b>tenant-id</b> represents the tenant ID. To access the tenant ID, right click the <b>Launch</b> button next to the required product on <strong>MyAccount</strong>, select <b>Copy link address</b> and paste it into a browser. The tenant ID is the number following <b>TENANTID=</b>.</p>\n<p>The full request is as follows:</p>\n<p><code>HTTP GET:https://&lt;serverAddress&gt;/rest/&lt;tenant-id&gt;/ems/Incident/aggregations?filter=Active+%3D+'true'&amp;group=Priority, Category.Id,Category.DisplayLabel&amp;layout=Priority,Category.Id,Category.DisplayLabel,Count(Id)</code></p>\n<p>The response body appears as follows:</p>\n<pre>{\n\"Results\": [\n{\n\"Properties\": {\n\"Priority\": \"HighPriority\"\n},\n\"RelatedProperties\": {\n\"Category\": {\n\"DisplayLabel\": \"Hardware\",\n\"Id\": \"10667\"\n}\n},\n\"Aggregations\": {\n\"Count\": {\n\"Id\": 2\n}\n}\n},\n{\n\"Properties\": {\n\"Priority\": \"CriticalPriority\"\n},\n\"RelatedProperties\": {\n\"Category\": {\n\"DisplayLabel\": \"Desktop Support\",\n\"Id\": \"10707\"\n}\n},\n\"Aggregations\": {\n\"Count\": {\n\"Id\": 1\n}\n}\n},\n{\n\"Properties\": {\n\"Priority\": \"LowPriority\"\n},\n\"RelatedProperties\": {\n\"Category\": {\n\"DisplayLabel\": null,\n\"Id\": null\n}\n},\n\"Aggregations\": {\n\"Count\": {\n\"Id\": 16\n}\n}\n},\n{\n\"Properties\": {\n\"Priority\": \"LowPriority\"\n},\n\"RelatedProperties\": {\n\"Category\": {\n\"DisplayLabel\": \"Access (Accounts &amp; Passwords)\",\n\"Id\": \"10663\"\n}\n},\n\"Aggregations\": {\n\"Count\": {\n\"Id\": 5\n}\n}\n}\n],\n\"meta\": {\n\"completion_status\": \"OK\",\n\"errorDetails\": null,\n\"total_count\": null,\n\"correlation_id\": null\n}\n}</pre>\n<h2 class=\"mw-headline\" id=\"Filtering_based_on_related_record_properties\">Filtering based on related record properties</h2>\n<p>The EMS supports filtering based on related record properties.</p>\n<ul>\n<li>\n<p>Filtering based on many to one record properties</p>\n<p>Build conditions on related record properties using the <code>DOT</code> notation, similar to the approach specified in the <em>Retrieving related record properties </em>section.</p>\n<p>Example: Return the <b>Id</b> and <b>Summary</b> of all Incidents that the user named <b>Jimi</b> owns. Assuming <b>Owner</b> is a reference property of a user. Enter the following request URI:</p>\n<div class=\"example\">\n<p>HTTP GET: <code>rest/&lt;tenant-id&gt;/ems/Incident?layout=Id,Summary&amp;filter=OwnedByPerson.Name='Jimi'</code></p>\n</div>\n</li>\n<li>\n<p>Filtering based on many to many record properties - vector conditions</p>\n<p>The EMS query language supports filtering based on related record properties, typically using a relationship name, but also using paths, as defined in the metadata. The query language supports all relationships (one to many, many to many, and one to one).</p>\n<p>You can combine filter conditions on related records with conditions on the queried records using logical conditions.</p>\n<p>Query language supports the following syntax:</p>\n<p><code>notexists? IDENTIFIER [condition?]</code></p>\n<p>where:</p>\n<p><b>notexists</b> represents an operator which evaluates to true when the following vector condition is empty.</p>\n<p><b>IDENTIFIER</b> represents a relationship or path name.</p>\n<p><b>condition</b> represents a filter that filters the vector according to a condition based on the properties of the related record.</p>\n<p>Example 1 (inclusive): Return the Ids of all articles reviewed by all users named <b>Jimi</b>. Enter the following request URI:</p>\n<div class=\"example\">\n<p><code>HTTP GET: rest/&lt;tenant-id&gt;/ems/Article?layout=Id&amp;filter=ArticlesToReviewers[Name='Jimi']</code></p>\n</div>\n<p>Example 2 (exclusive): Return the Ids of all articles that not reviewed by any user named <b>Jimi</b>. Enter the following request URI:</p>\n<div class=\"example\">\n<p><code>HTTP GET: rest/&lt;tenant-id&gt;/ems/Article?layout=Id&amp;filter=notexists ArticlesToReviewers[Name='Jimi']</code></p>\n</div>\n</li>\n</ul>\n<h2 class=\"mw-headline\" id=\"Query_Language_extensions\">Query language extensions</h2>\n<p>For a reference of Query Language operators and commands, see <a href=\"/doc/423/26.1/collectqueryprotocol\" title=\"SMAX:25.1/CollectQueryProtocol\">REST API collection query protocol</a>.</p>\n<ul>\n<li>\n<p><strong>Wild-card </strong>string matching conditions</p>\n<p>The EMS REST query protocol supports the <b>starts with</b> condition for properties of type string with the following syntax:</p>\n<p><code>IDENTIFIER startswith(STRING_LITERAL)</code></p>\n<p>or</p>\n<p><code>IDENTIFIER sw(STRING_LITERAL)</code></p>\n<p>where:</p>\n<p><b>STRING_LITERAL</b> represents a string literal wrapped with single quotes. Note that if a single quote character is a part of the string literal itself, add an additional single quote character. Example: Pass the string <b>Jimi's new guitar</b> as <b>Jimi''s new guitar</b>.</p>\n<p>Example: Return the Ids of all people whose first names start with <b>Sh</b>. Enter the following request URI:</p>\n<div class=\"example\" style=\"font-weight: bold\">\n<p>HTTP GET: rest/&lt;tenant-id&gt;/ems/Person?layout=Id&amp;filter=FirstName startswith('Sh')</p>\n</div>\n</li>\n<li>\n<p>Unassigned/Null property conditions</p>\n<p>The EMS REST query protocol supports null expressions in conditions. As in many programming languages, null expressions represent unassigned or empty values.</p>\n<p>Query language supports the following syntax:</p>\n<p>IDENTIFIER = null</p>\n<p>where:</p>\n<p><b>IDENTIFIER</b> represents a record property name.</p>\n<p>Example: Return the Ids of all people whose owner isn't set to a value. Enter the following request URI:</p>\n<div class=\"example\">\n<p><code>HTTP GET: rest/&lt;tenant-id&gt;/ems/Person?layout=Id&amp;filter=Owner = null</code></p>\n</div>\n</li>\n<li>\n<p>Restrictions and limitations</p>\n<p>Beyond the standard query language, the EMS has some limitations and restrictions regarding the usage of its APIs:</p>\n<ul>\n<li>\n<p><b>Low Selectivity Filter Conditions.</b> For performance reasons, the EMS may be unable to process record queries that contain low selectivity filters. Low selectivity filters are filters that contain no inclusive conditions.</p>\n<p>Low selectivity filter conditions include:</p>\n<ul>\n<li><b>notexists</b> type vector conditions</li>\n<li><b>Not equals</b> (<b>!=</b> or <b>ne</b>) conditions</li>\n<li>Null comparison condition (<b>X = null</b>)</li>\n</ul>\n</li>\n<li>\n<p><b>Ordered Query Total Size Limit.</b> The limit for queries that specify order is 4,000 records in total size. If an ordered collection query returns more than 4,000 records, the service returns an error.</p>\n</li>\n<li>\n<p><b>Query size parameter.</b> All collections must include a size restriction. If the <b>size</b> query parameter isn't specified, it's automatically set to 100, meaning that the query won't return more than 100 records.</p>\n</li>\n<li>\n<p><b>Query layout parameter.</b> GET operations requires query <b>layout</b> parameter and doesn't support wildcard characters. You must explicitly request any property that you expect the service to return.</p>\n</li>\n<li>\n<p><b>Properties returned In collections.</b> You can not retrieve properties of type <b>text</b> and <b>complex-type</b> within a collection. To retrieve such properties, you must issue a single record request. This limitation prevents extreme page sizes that can cause performance problems, both for network bandwidth and memory consumption reasons.</p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 class=\"mw-headline\" id=\"Related_topics\">Related topics</h2>\n<ul>\n<li><a href=\"/doc/423/26.1/restapi\" title=\"SMAX:25.1/RESTAPI\">Overview of the REST API</a></li>\n<li><a href=\"/doc/423/26.1/connecttorestapi\" title=\"SMAX:25.1/ConnectToRESTAPI\">How to connect to the REST API</a></li>\n<li><a href=\"/doc/423/26.1/apirestauth\" title=\"SMAX:25.1/ApiRESTAuth\">Authentication endpoint service</a></li>\n<li><a href=\"/doc/423/26.1/singleentityops\" title=\"SMAX:25.1/SingleEntityOps\">Single record API</a></li>\n<li><a href=\"/doc/423/26.1/bulkupdate\" title=\"SMAX:25.1/BulkUpdate\">Record bulk update and collection APIs</a></li>\n<li><a href=\"/doc/423/26.1/collectqueryprotocol\" title=\"SMAX:25.1/CollectQueryProtocol\">REST API collection query protocol</a></li>\n<li><a href=\"/doc/423/26.1/usecasesimport\" title=\"SMAX:25.1/UseCasesImport\">REST API use case scenario import REST API</a></li>\n</ul>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}