{
  "title": "Disable a capability",
  "content": "<div class=\"mw-parser-output\"><span class=\"snippet-start\" data-sname=\"423-25.4-423-25.3-RemoveCapabilities||N\"></span><p id=\"EnablelogCollectioncapability-DisablelogCollection\">When you disable a capability, the underlying components are removed. To disable a capability, run the following command:</p>\n<pre><code>helm upgrade apphub -n $CDF_NAMESPACE &lt;chart&gt;.tgz --set global.services.&lt;capability&gt;=false --reuse-values</code></pre>\n<div class=\"Admonition_Important\"><span class=\"autonumber\">Important:</span> If you don't specify the <code>--reuse-values</code> option, you will reset the values in the OMT composite chart to their defaults.</div>\n<p>Replace the following placeholders with the actual values:</p>\n<ul>\n<li><code>&lt;chart&gt;</code>: The absolute path to the OMT composite chart package. The chart file name resembles <code>apphub-1.xx.x+2x.x.x-xxx.tgz</code>. You can find the chart in the <code>$CDF_HOME/charts</code> directory.  For example, <code>/opt/cdf/charts/apphub-1.xx.x+2x.x.x-xxx.tgz</code>.</li>\n<li><code>&lt;capability&gt;</code>: The capability that you want to remove. The expected values are: <strong>clusterManagement</strong>, <strong>deploymentManagement</strong>, <strong>logCollection</strong>, and <strong>monitoring</strong>.</li>\n</ul>\n<p>For example, to disable the monitoring capability, run the following command:</p>\n<pre><code>helm upgrade apphub -n $CDF_NAMESPACE apphub-1.xx.x+2x.x.x-xxx.tgz --set global.services.monitoring=false --reuse-values</code></pre>\n<div class=\"transcontent lst-ITOM_Container_Deployment_Foundation:24.2/TextSnippets--Placeholder\">\n<div class=\"Admonition_Note\"><strong>Note:</strong> This example contains placeholder values.</div>\n<p><br/>\n</p>\n</div>\n<h2>Disable the monitoring capability</h2>\n<p>If you disable the monitoring capability, you can also remove the monitoring content capability and uninstall the <code>prometheus-crds</code> chart (if it exists) to free up further resources. Run the following command to disable monitoring capability and monitoring content capability:</p>\n<pre><code>helm upgrade apphub -n $CDF_NAMESPACE &lt;chart&gt;.tgz --reuse-values --set global.services.monitoring=false --set global.prometheus.deployPrometheusConfig=false --set global.prometheus.deployGrafanaConfig=false</code></pre>\n<p>Replace the <code>&lt;chart&gt;</code> placeholder with the absolute path to the OMT composite chart package. </p>\n<p>To find out if the <code>prometheus-crds</code> chart exists, run the following command to see all installed charts: </p>\n<pre><code>helm list -n $CDF_NAMESPACE | grep prom-crds</code></pre>\n<p>If the chart exists, run the following command to uninstall it:</p>\n<pre><code>helm uninstall prom-crds -n $CDF_NAMESPACE</code></pre>\n<div class=\"Admonition_Note\"><span class=\"autonumber\">Note:</span><br/>\nThe order is important, ensure that you've disabled the monitoring capability before removing the <code>prometheus-crds</code> chart.</div>\n<h2>Disable the Kubernetes backup capability on embedded Kubernetes</h2>\n<p>For embedded Kubernetes, the Kubernetes backup capability is enabled by default. If you want to disable the Kubernetes backup capability before OMT installation, set the Kubernetes backup capability to <code>false</code> with install CLI parameter:</p>\n<pre><code>./install --capabilities 'K8sBackup=false' ......</code></pre>\n<p>If you want to disable the Kubernetes backup capability after OMT installation, follow the following steps:</p>\n<ol>\n<li>Run the following command to uninstall the <code>itom-velero</code> chart: \n\n\t<pre><code>helm uninstall itom-velero -n $CDF_NAMESPACE</code></pre>\n</li>\n<li>Remove the <code>VELERO_NAMESPACE</code> environment parameter: \n\t<pre><code>sed -i -e '/VELERO_NAMESPACE=/d' /etc/profile.d/itom-cdf.sh</code></pre>\n</li>\n<li>Get the NFS server and path: \n\t<pre><code>pvName=$(kubectl get pvc -n $CDF_NAMESPACE itom-vol-claim -o json | jq -r '.spec.volumeName')\nkubectl get pv $pvName -ojson | jq -r '.spec.nfs.server'\nkubectl get pv $pvName -ojson | jq -r '.spec.nfs.path'</code></pre>\n</li>\n<li>Remove the <code>cloudsever</code> folder under NFS path on NFS server. The <code>cloudsever</code> folder is the subfolder of the NFS path. For example, if the NFS path is <code>/omt/core</code>, then the path of <code>cloudsever</code> folder is <code>/omt/core/cloudsever</code>.<br/>\n\tRun the following command on NFS sever to remove it:\n\t<pre><code>rm -rf /omt/core/cloudsever</code></pre>\n</li>\n</ol><span class=\"snippet-end\" data-sname=\"423-25.4-423-25.3-RemoveCapabilities||N\"></span></div>",
  "modifiedon": "2025-10-24 08:51:12"
}