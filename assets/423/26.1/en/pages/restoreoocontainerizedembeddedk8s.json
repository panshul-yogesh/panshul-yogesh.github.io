{
  "title": "Restore OO Containerized on-premises",
  "content": "<div class=\"mw-parser-output\">\n<div></div>\n<p>This topic describes how to restore OO Containerized on-premises. </p>\n<h2>When OO deployment is functioning but data is missing or corrupted</h2>\n<p>The following steps restore OO Containerized on-premises when a deployment is still functioning, but data is missing or corrupted: </p>\n<ol>\n<li>Stop the OO deployment. On the control plane node, run the following command:\n\t<pre><code>$CDF_HOME/scripts/cdfctl.sh runlevel set -l DOWN -n &lt;namespace-of-oo-deployment&gt;</code></pre>\n<p>Wait for a few minutes until the OO deployment has stopped fully.</p>\n</li>\n<li>Restore OO databases: OO Central, UI, Controller, Scheduler, and Autopass.</li>\n<li>Restore the following data in NFS volumes:<br/>\n<code>oo-config-volume</code> storing OO Containerized configuration files. Example path: <code>/var/vols/itom/oo/oo_config_volume</code>.<br/>\n<code>oo-data-export-volume</code> storing OO tenants exported data. Example path: <code>/var/vols/itom/oo/oo_data_export_volume</code>.<br/>\n<code>oo-data-volume storing</code> storing OO-generated data. Example path: <code>/var/vols/itom/oo/oo_data_volume</code></li>\n<li>Restart the OO deployment. On the control plane node, run the following command:\n\t<pre><code>$CDF_HOME/scripts/cdfctl.sh runlevel set -l UP -n &lt;namespace-of-oo-deployment&gt;</code></pre>\n</li>\n</ol>\n<h2>When OO deployment is failing or corrupted</h2>\n<p>The following steps restore OO Containerized on-premises when a deployment is failing or corrupted:</p>\n<p>Make sure you always perform troubleshooting steps in the Troubleshoot OO section of the documentation.</p>\n<p>If this still can't resolve the issue, follow the instructions below to restore a OO Containerized deployment. </p>\n<ol>\n<li>Uninstall OO Containerized, but don't clean up the databases. For details, see <a href=\"/doc/423/26.1/uninstallooc\" title=\"Uninstall OO\">Uninstall OO</a>. </li>\n<li>Create a new deployment. For information on creating a new OO Containerized deployment, see <a href=\"/doc/423/26.1/ooccreateoodeployment\" title=\"Create a new deployment for OO\">Create a new deployment for OO</a>.</li>\n<li>\n<p>Restore secret. Create a new secret using the backup secret .yaml file:</p>\n<pre>kubectl apply -f oo-secret_backup_yyyy-mm-dd.yaml -n &lt;namespace-of-oo&gt;</pre>\n</li>\n<li>Recreate NFS volumes (in the NFS server). For information on creating NFS volumes, see <a href=\"/doc/423/26.1/oocpreparecreatenfs\" title=\"Configure NFS volumes for OO\">Configure NFS volumes for OO</a>.</li>\n<li>Restore the following data in NFS volumes:<br/>\n<code>oo-config-volume</code> storing OO Containerized configuration files. Example path: <code>/var/vols/itom/oo/oo_config_volume</code>.<br/>\n<code>oo-data-export-volume</code> storing OO tenants exported data. Example path: <code>/var/vols/itom/oo/oo_data_export_volume</code>.<br/>\n<code>oo-data-volume storing</code> storing OO-generated data. Example path: <code>/var/vols/itom/oo/oo_data_volume</code></li>\n<li>Recreate Persistent Volume (PV) and Persistent Volume Claims (PVC) using the same configuration (<b>oo-pv.yam</b><strong>l</strong> and <b>oo-pvc.yaml</b> files). For information on creating PV, see <a href=\"/doc/423/26.1/399-oocpreparecreatepv\" title=\"Create persistent volumes for OO\">Create persistent volumes for OO</a>.</li>\n<li>Reinstall OO Containerized with the same configuration (<b>values.yaml</b> file) and the same Helm chart. For instructions on installing OO Containerized, see <a href=\"/doc/423/26.1/399-installooonpremises\" title=\"Install OO Containerized on-premises\">Install OO Containerized on-premises</a>.</li>\n</ol>\n<h2>Restore Remote Action Server pods</h2>\n<p>Remote Action Server (RAS) pods aren't managed by Helm as you install Remote Action Server (RAS) pods after installing OO Containerized. You can't create RASes with the Helm install command.</p>\n<p>After recovering OO Containerized, and making sure all the OO pods are up and running, run the following command:</p>\n<pre><code>helm upgrade &lt;oo_install_name&gt; -n &lt;oo_namespace&gt; &lt;path_to_oo_chart&gt; --reuse-values --set ootenants-sync.deployment.activeTenants='&lt;comma_separated_tenant_IDs_list&gt;' --set ootenants-sync.deployment.inactiveTenants='&lt;comma_separated_tenant_IDs_list&gt;'</code></pre>\n<p>Where:</p>\n<ul>\n<li>&lt;<code>oo_install_name</code>&gt; is the name of the OO deployment that you specified when installing OO.</li>\n<li>&lt;<code>oo_namespace</code>&gt; is the unique namespace of the OO deployment.</li>\n<li>&lt;<code>OO_chart_file</code>&gt; is the file containing the OO installation charts.</li>\n<li>&lt;<code>ootenants-sync.deployment.activeTenants</code>&gt; is a comma-separated list of active tenants that have OO capability enabled. Make sure to add a \\ before the comma separating the tenant IDs.</li>\n<li>&lt;<code>ootenants-sync.deployment.inactiveTenants</code>&gt; is a comma-separated list of inactive tenants that have OO capability enabled. Make sure to add a \\ before the comma separating the tenant IDs.</li>\n</ul>\n<p>For example: </p>\n<pre><code>helm upgrade oo-prod -n oo-prod /root/oo.tgz --reuse-values --set ootenants-sync.deployment.activeTenants=\"123456789\\,987654321\" --set ootenants-sync.deployment.inactiveTenants=\"111222333\\,999888777\"</code></pre>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}