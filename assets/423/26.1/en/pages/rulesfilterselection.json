{
  "title": "Using rules to filter drop-down selection",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><div>\n<p>The following use case scenario demonstrates how you can customize the form for incidents to display all three support groups in a single drop-down.</p>\n<p>The aim was to help users select an assignment group for an incident, based on the three support groups of the associated service.</p>\n<div><a class=\"image\" href=\"/file/images/c/cc/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/Supports.png\" title=\"/file/images/c/cc/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/Supports.png\"> <img alt=\"Support\" data-file-height=\"631\" data-file-width=\"966\" height=\"631\" src=\"../../../images/Supports_205da941.png\" width=\"966\"/> </a></div>\n<p>The first idea was to create three separate rules, one for each group. However, this presented each group with its own header, and took up too much screen real estate.</p>\n<p>A better approach was to create a single rule that displayed all three fields under a single header. This was achieved by using the <b>union</b> function to combine three different fields from the service record into a single filter.</p>\n<p>The implementation (shown below) saves screen real estate, and puts key information in front of the user in a way that may be more suitable.</p>\n<p>Although the use case is specific, the techniques involved can easily be adapted.</p>\n<p>Create the rule</p>\n<ol>\n<li>\n<p>From the main menu, select <b>Administration &gt; Configuration &gt; Studio &gt; Processes and Rules</b>.</p>\n</li>\n<li>\n<p>Select the <b>Incident</b> record type.</p>\n</li>\n<li>In the tree on the left, select <b>Incident</b> (the top level of the tree).</li>\n<li>\n<p>In <b>Rendering forms</b>, click <b>Add</b>, then select <b>\"If...Then\" rule</b>.</p>\n</li>\n<li>\n<p>In the <b>Field selection rules</b>, select <b>Define suggested values for entity link based on filter</b>.</p>\n</li>\n<li>\n<p>Click <b>OK</b>.</p>\n<div><a class=\"image\" href=\"/file/images/6/64/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/ifthen-a.png\" title=\"/file/images/6/64/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/ifthen-a.png\"> <img alt='\"If...Then\" rule' data-file-height=\"70\" data-file-width=\"694\" height=\"70\" src=\"../../../images/ifthen-a_009af58d.png\" width=\"694\"/> </a></div>\n</li>\n</ol>\n<p>Edit the rule</p>\n<ol>\n<li>\n<p>Click <b>expression</b>, and paste the following:</p>\n<p>${entity.RegisteredForActualService != null}</p>\n</li>\n<li>\n<p>Click <b>OK</b>.</p>\n<p>This ensures the rule doesn't operate when there is no service selected for the incident.</p>\n<div><a class=\"image\" href=\"/file/images/e/ed/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/ifthen-b.png\" title=\"/file/images/e/ed/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/ifthen-b.png\"> <img alt=\"Setting the expression parameter\" data-file-height=\"72\" data-file-width=\"642\" height=\"72\" src=\"../../../images/ifthen-b_23650770.png\" width=\"642\"/> </a></div>\n</li>\n<li>\n<p>Click <b>field</b>, and select <b>Assignment group</b>. Then click <b>OK</b>.</p>\n</li>\n<li>\n<p>Click <b>title</b>, and type <b>SERVICE SUPPORT GROUPS</b>. Then click <b>OK</b>.</p>\n</li>\n<li>\n<p>Click <b>all records</b>, then <b>Add Item</b>.</p>\n<ol>\n<li>\n<p>In the first drop-down, select <b>Id</b>.</p>\n</li>\n<li>\n<p>Leave the second drop-down as <b>IN</b>.</p>\n</li>\n<li>\n<p>In the last box, paste the following expression:</p>\n<pre>${union(entity.RegisteredForActualService.SupportLevel1Group.Id,entity.RegisteredForActualService.SupportLevel2Group.Id,entity.RegisteredForActualService.SupportLevel3Group.Id)}</pre>\n<p>This tells the filter to find any Group where the Id is the union of the three group fields from the service, creating an \"or\" type filter.</p>\n</li>\n</ol>\n</li>\n<li>\n<p>Click <b>Save</b>.</p>\n<div><a class=\"image\" href=\"/file/images/4/4d/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/ifthen-c.png\" title=\"/file/images/4/4d/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/ifthen-c.png\"> <img alt='\"If...Then\" rule' data-file-height=\"109\" data-file-width=\"1224\" height=\"109\" src=\"../../../images/ifthen-c_c3715986.png\" width=\"1224\"/> </a></div>\n</li>\n</ol>\n<p>Implementation</p>\n<p>Using the preceding rule, when an agent adds a service to an incident, and then selects the <b>Assignment group</b> drop-down, the three support groups from the service record are displayed:</p>\n<div><a class=\"image\" href=\"/file/images/1/1c/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/Customize-drop-down.png\" title=\"/file/images/1/1c/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/Customize-drop-down.png\"> <img alt=\"Final drop-down\" data-file-height=\"192\" data-file-width=\"524\" height=\"192\" src=\"../../../images/Customize-drop-down_bad4c77e.png\" width=\"524\"/> </a></div>\n<p>Note</p>\n<p>Using this rule, the drop-down displays these three groups only.</p>\n<p>To see every group in the drop-down, you need to create an <b>additional</b> rule, similar to the above, with the following changes in the <em>Using rules to filter a drop-down selection</em> section:</p>\n<ul>\n<li>In paragraph <b>4</b>, type instead: <b>ALL GROUPS</b></li>\n<li>Omit paragraphs <b>5-8</b> inclusive</li>\n</ul>\n<h2>Variation</h2>\n<p>A related use case scenario involves creating multiple lists of values, and then populating a field using only results that are in both lists. This is achieved using the <b>union</b> and <b>intersect</b> functions.</p>\n<p>In the following example, in creating a request, the suggested value for Service desk group only shows a group if the organizational group of the <b>Requested for</b> person is one of the 1st, 2nd or 3rd level support groups assigned to the service.</p>\n<h3>Create the rule</h3>\n<ol>\n<li>\n<p>From the main menu, select <b>Administration &gt; Configuration &gt; Studio &gt; Processes and Rules</b>.</p>\n</li>\n<li>\n<p>Select the <b>Request</b> record type.</p>\n</li>\n<li>In the tree on the left, select <b>Request</b> (the top level of the tree).</li>\n<li>\n<p>In <b>Rendering forms</b>, click <b>Add</b>, then select <b>Simple rule</b>.</p>\n</li>\n<li>\n<p>In the <b>Field selection rules</b>, select <b>Define suggested values for entity link based on filter</b>.</p>\n</li>\n<li>\n<p>Click <b>OK</b>.</p>\n<div><a class=\"image\" href=\"/file/images/f/f6/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/use-case-rule-screenshot1.png\" title=\"/file/images/f/f6/2018.08_Helpcenter/Resources/Images/UsecaseScenarios/use-case-rule-screenshot1.png\"> <img alt=\"Simple rule\" data-file-height=\"49\" data-file-width=\"490\" height=\"49\" src=\"../../../images/use-case-rule-screenshot1_bc40cdc0.png\" width=\"490\"/> </a></div>\n</li>\n</ol>\n<h3>Edit the rule</h3>\n<ol>\n<li>\n<p>Click <b>field</b>, and select <b>Service desk group</b>. Then click <b>OK</b>.</p>\n</li>\n<li>\n<p>Click <b>title</b>, and type <b>SERVICE DESK GROUP</b>. Then click <b>OK</b>.</p>\n</li>\n<li>\n<p>Click <b>all records</b>, then <b>Add Item</b>.</p>\n</li>\n<li>\n<p>In the first drop-down, select <b>Id</b>.</p>\n</li>\n<li>\n<p>Leave the second drop-down as <b>IN</b>.</p>\n</li>\n<li>\n<p>In the last box, paste the following expression:</p>\n<pre>${intersection(union(entity.RegisteredForActualService.SupportLevel1Group.Id,entity.RegisteredForActualService.SupportLevel2Group.Id,entity.RegisteredForActualService.SupportLevel3Group.Id),union(entity.RequestedByPerson.OrganizationalGroup.Id))}</pre>\n</li>\n<li>\n<p>Click <b>Save</b>.</p>\n</li>\n</ol>\n<h3>Implementation</h3>\n<p>Assume an actual service has the following:</p>\n<ul>\n<li>1st level support - Accounting</li>\n<li>2nd level support - Service Desk Analysts</li>\n<li>3rd level support - Escalation Team</li>\n</ul>\n<p>Further assume a request related to that actual service is for a person who belongs to the <b>Accounting</b> organization. When the agent creates the request, and then selects the <b>Service desk group</b> drop-down, only the one group that's common to the service and the organization is displayed: <b>Accounting</b>.</p>\n</div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}