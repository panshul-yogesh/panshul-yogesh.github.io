{
  "title": "Schedule Downtime",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><h2>Overview</h2>\n<p>It is now possible to integrate with OBM by using the Integration Studio to scheduled downtimes. </p>\n<ol>\n<li>A change request is set up in Service Management with a scheduled downtime. This will trigger the integration scenario for creating downtimes in OBM for each CI attached to the change.</li>\n<li>The integration scenario will forward the downtime details for every CI to OBM.</li>\n<li>The integration scenario will update the change request with details about the status of the downtime creation.</li>\n</ol>\n<div><a class=\"image\" href=\"/file/images/general/SM-OBM-Downtime2.PNG\" title=\"/file/images/general/SM-OBM-Downtime2.PNG\"> <img alt=\"Downtime use case\" height=\"522\" src=\"../../../images/SM-OBM-Downtime2_7dd4fe31.png\" width=\"933\"/> </a></div>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">The integration use cases described in this document serve as examples to inspire and guide your integration efforts. However, they should not be considered as prescriptive or guaranteed solutions for your particular scenario. The examples may or may not be applicable to your license edition.</div>\n</div>\n<h2>Considerations and Prerequisites</h2>\n<p>To ensure the integration runs smoothly, please review the following items.</p>\n<ol>\n<li>OBM accepts only downtime start dates which are at least 1 day in future.</li>\n<li>OBM<strong> minimum version</strong> must be <strong>24.4.</strong></li>\n<li><strong>Maximum downtimes in OBM</strong> - OBM allows only a certain amount of downtimes in the system. If the number is reached, the integration cannot create a new downtime and will therefore fail.</li>\n<li><strong>Maximum CIs per downtime</strong> - OBM controls the maximum allowed direct and impacted CIs per downtime. Please ensure these settings covers your requirements. If the CI number is exceeded the integration cannot create a new downtime and will therefore fail.</li>\n<li>The CIs which are exchanged between Service Management and OBM as part of the downtime are <strong>identified based on its Global ID</strong>. This means the CIs must be in sync between UCMDB and RTSM and the Global ID must be the same in UCMDB and RTSM.<br/>\n<br/>\n\tClick <a href=\"/doc/423/26.1/syncisfromucmdbtortsm\" title=\"here\">here</a> to find details on how to sync CIs between UCMDB and RTSM.</li>\n</ol>\n<h2><span style=\"font-size: clamp(1.59375rem, 18.7895px + 1.39803vw, 2.125rem);\">Set up the integration</span></h2>\n<p>The procedure below will set up the integration with OBM to achieve the documented example use case.</p>\n<h3><span style=\"font-size: clamp(1.3125rem, 15.4737px + 1.15132vw, 1.75rem);\">Prepare an integration user in Service Management</span></h3>\n<p>Perform the following steps to prepare an integration user:</p>\n<ol>\n<li>Create an integration user. For more details, see <a href=\"/doc/423/26.1/createuser\" title=\"How to create a user\">How to create an integration user</a>.</li>\n<li>Log in to the Agent Portal of SMAX as the tenant admin, navigate to <strong>Administration &gt; Master Data &gt; People</strong>, and locate the integration user.</li>\n<li>Create a new role with the minimum permissions to <strong>view</strong>, <strong>update</strong> and <strong>add comments</strong> to change record type.</li>\n<li>Assign the <strong>newly created role</strong> and the <strong>OPB Remote Agent</strong> role and ensure the On-Premise Bridge/Integration Administrator permission is set in the OPB Remote Agent role.  </li>\n</ol>\n<h3><span style=\"font-size: clamp(1.3125rem, 15.4737px + 1.15132vw, 1.75rem);\">Prepare an integration user in OBM</span></h3>\n<p>In OBM, create an user with the permissions to create, update, terminate and delete downtimes. The user must also be able to view all CIs.</p>\n<h3>Create an endpoint in Service Management</h3>\n<p>Create an endpoint using the Rest Executor 2.0 endpoint type:</p>\n<ol>\n<li>Log in to the agent interface as the tenant admin.</li>\n<li>Navigate to <strong>Administration &gt; Utilities &gt; Integration &gt; Endpoints</strong>.</li>\n<li>Click <strong>Add</strong>.</li>\n<li>Select <strong>Rest Executor 2.0</strong> as the endpoint type, enter a name for the endpoint (for example, OBM Downtimes), and then click <strong>Add</strong>. The system creates the endpoint.</li>\n<li>Click <strong>Configure</strong> and complete the required fields.</li>\n</ol>\n<p><strong>Agentless</strong></p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">Field</th>\n<th colspan=\"2\" scope=\"col\">Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td colspan=\"3\"><strong>General configuration</strong></td>\n</tr>\n<tr>\n<td>Agent</td>\n<td colspan=\"2\">Select <strong>Agentless</strong> for a direct connection to the OBM API.</td>\n</tr>\n<tr>\n<td>Authentication type</td>\n<td colspan=\"2\">Select <b>Generic</b></td>\n</tr>\n<tr>\n<td>Protocol</td>\n<td colspan=\"2\">Select <strong>https</strong>.</td>\n</tr>\n<tr>\n<td>Base URL</td>\n<td colspan=\"2\">Enter the base URL of the OBM Server: <code>https://&lt;fqdn&gt;</code></td>\n</tr>\n<tr>\n<td>Authentication URL</td>\n<td colspan=\"2\">Enter the authentication URL of the OBM Server: <code>https://&lt;fqdn&gt;/opr-web/rest</code></td>\n</tr>\n<tr>\n<td>Certificate type</td>\n<td colspan=\"2\">Optional</td>\n</tr>\n<tr>\n<td>Certificate format</td>\n<td colspan=\"2\">Optional</td>\n</tr>\n<tr>\n<td>Server certificate</td>\n<td colspan=\"2\">Optional</td>\n</tr>\n<tr>\n<td colspan=\"3\"><strong>Configure authentication request</strong></td>\n</tr>\n<tr>\n<td>\n<p>Encrypted data</p>\n</td>\n<td colspan=\"2\">\n<p>Parameter: Credentials</p>\n<p>Value: Base64 encoded user name &amp; password</p>\n</td>\n</tr>\n<tr>\n<td>Header</td>\n<td colspan=\"2\">\n<p>Key 1:<br/>\n\t\t\tParameter: Authorization</p>\n<p>Value: Basic ${Credentials}</p>\n<p>Key 2:</p>\n<p>Parameter: accept</p>\n<p>Value: application/json</p>\n</td>\n</tr>\n<tr>\n<td>Method</td>\n<td colspan=\"2\">GET</td>\n</tr>\n<tr>\n<td colspan=\"3\"><strong>Extract data from authentication response</strong></td>\n</tr>\n<tr>\n<td><strong>Key</strong></td>\n<td><strong>Http Element</strong></td>\n<td><strong>Expression</strong></td>\n</tr>\n<tr>\n<td>secureModifyToken</td>\n<td>Cookie</td>\n<td>secureModifyToken</td>\n</tr>\n<tr>\n<td>LWSSO_COOKIE_KEY</td>\n<td>Cookie</td>\n<td>LWSSO_COOKIE_KEY</td>\n</tr>\n<tr>\n<td>JSESSIONID</td>\n<td>Cookie</td>\n<td>JSESSIONID</td>\n</tr>\n<tr>\n<td colspan=\"3\"><strong>Configure headers and cookies for subsequent requests</strong></td>\n</tr>\n<tr>\n<td><strong>Key</strong></td>\n<td><strong>Http Element</strong></td>\n<td><strong>Expression</strong></td>\n</tr>\n<tr>\n<td>LWSSO_COOKIE_KEY</td>\n<td>Cookie</td>\n<td>${LWSSO_COOKIE_KEY}</td>\n</tr>\n<tr>\n<td>JSESSIONID</td>\n<td>Cookie</td>\n<td>${JSESSIONID}</td>\n</tr>\n<tr>\n<td>secureModifyToken</td>\n<td>Cookie</td>\n<td>${secureModifyToken}</td>\n</tr>\n<tr>\n<td>X-Secure-Modify-Token</td>\n<td>Header</td>\n<td>${secureModifyToken}</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Agent based</strong></p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">Field</th>\n<th colspan=\"2\" scope=\"col\">Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td colspan=\"3\"><strong>General configuration</strong></td>\n</tr>\n<tr>\n<td>Agent</td>\n<td colspan=\"2\">Select <b>&lt;your On-Premise-Bridge Agent&gt; </b>for an indirect connection to the OBM API.</td>\n</tr>\n<tr>\n<td>Authentication type</td>\n<td colspan=\"2\">Select <b>Generic</b></td>\n</tr>\n<tr>\n<td>Protocol</td>\n<td colspan=\"2\">Select <strong>https</strong>.</td>\n</tr>\n<tr>\n<td>Base URL</td>\n<td colspan=\"2\">Enter the base URL of the OBM Server: <code>https://&lt;fqdn&gt;</code></td>\n</tr>\n<tr>\n<td>Authentication URL</td>\n<td colspan=\"2\">Enter the authentication URL of the OBM Server: <code>https://&lt;fqdn&gt;/opr-web/rest</code></td>\n</tr>\n<tr>\n<td colspan=\"3\"><strong>Configure authentication request</strong></td>\n</tr>\n<tr>\n<td>\n<p>Encrypted data</p>\n</td>\n<td colspan=\"2\">\n<p>Parameter: Credentials</p>\n<p>Value: Select the credentials that you've created in the On Premise Bridge Endpoint Credentials Manager</p>\n</td>\n</tr>\n<tr>\n<td>Header</td>\n<td colspan=\"2\">\n<p>Key 1:<br/>\n\t\t\tParameter: Authorization</p>\n<p>Value: Basic ${Credentials}</p>\n<p>Key 2:</p>\n<p>Parameter: accept</p>\n<p>Value: application/json</p>\n</td>\n</tr>\n<tr>\n<td>Method</td>\n<td colspan=\"2\">GET</td>\n</tr>\n<tr>\n<td colspan=\"3\"><strong>Extract data from authentication response</strong></td>\n</tr>\n<tr>\n<td><strong>Key</strong></td>\n<td><strong>Http Element</strong></td>\n<td><strong>Expression</strong></td>\n</tr>\n<tr>\n<td>secureModifyToken</td>\n<td>Cookie</td>\n<td>secureModifyToken</td>\n</tr>\n<tr>\n<td>LWSSO_COOKIE_KEY</td>\n<td>Cookie</td>\n<td>LWSSO_COOKIE_KEY</td>\n</tr>\n<tr>\n<td>JSESSIONID</td>\n<td>Cookie</td>\n<td>JSESSIONID</td>\n</tr>\n<tr>\n<td colspan=\"3\"><strong>Configure headers and cookies for subsequent requests</strong></td>\n</tr>\n<tr>\n<td><strong>Key</strong></td>\n<td><strong>Http Element</strong></td>\n<td><strong>Expression</strong></td>\n</tr>\n<tr>\n<td>LWSSO_COOKIE_KEY</td>\n<td>Cookie</td>\n<td>${LWSSO_COOKIE_KEY}</td>\n</tr>\n<tr>\n<td>JSESSIONID</td>\n<td>Cookie</td>\n<td>${JSESSIONID}</td>\n</tr>\n<tr>\n<td>secureModifyToken</td>\n<td>Cookie</td>\n<td>${secureModifyToken}</td>\n</tr>\n<tr>\n<td>X-Secure-Modify-Token</td>\n<td>Header</td>\n<td>${secureModifyToken}</td>\n</tr>\n</tbody>\n</table>\n<h3 style=\"margin-bottom: 11px;\">Create an integration</h3>\n<p>Create an integration and configure one or more scenarios to define the business logic for the downtime exchange between Service Management and OBM.</p>\n<p>In the following steps, you'll create an integration with the predefined template.</p>\n<ol>\n<li>Navigate to <strong>Administration &gt; Utilities &gt; Integration &gt; Integration Studio</strong><i>.</i> </li>\n<li>Click <strong>New</strong> and enter the name of the integration.</li>\n<li>Configure the integration user that you created above for the local Service Management system.</li>\n<li>In the Connector-Endpoint mappings section, click <strong>Add</strong>, select Operations Bridge Manager (OBM) as the connector and select the Operations Brigde endpoint, and then enter an alias for the mapping.</li>\n<li>Activate the integration.</li>\n<li>Click <strong>Save.</strong></li>\n</ol>\n<h3>Add and configure the scenarios</h3>\n<p>Perform the following steps to add the scenarios to the OBM integration:</p>\n<ol>\n<li>Click <strong>Add scenario</strong>. </li>\n<li>Enter a name for the scenario. For example, Planned downtime<i>.</i></li>\n<li>In the <strong>Template</strong> field, select <strong>Planned downtime</strong> from the list. </li>\n<li>Click <strong>Save</strong> to add the scenario.</li>\n</ol>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-tip-icon\"></div>\n<div class=\"admonition-content admonition-tip-content\">Using template will make integration configuration easier than starting from scratch. If you don't select this option, you'll have to manually add your own logic, starting from a blank page. </div>\n</div>\n<div><a class=\"image\" href=\"/file/images/general/OBM_PlannedDowntimw.PNG\" title=\"/file/images/general/OBM_PlannedDowntimw.PNG\"> <img alt=\"Planned downtime scenario\" height=\"293\" src=\"../../../images/OBM_PlannedDowntimw_77b1634f.png\" width=\"418\"/> </a></div>\n<p>The following table describes the parameters that you can modify to control the behavior of the scenarios. These parameters are located in the <strong>Settings</strong> rule at the start of the <strong>Process logic</strong> section. Modify them before you run the scenarios.</p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">Scenario name</th>\n<th scope=\"col\">Options to be considered before using the scenario </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Schedule downtime</td>\n<td>In the <b>Settings</b> rule at the start of the process logic, you can configure settings to influence the behavior of the scenario. The following parameters can be configured:\n\t\t\t<ul>\n<li><b>Timezone </b>– The ISO timezone name in which the downtimes are created in OBM</li>\n<li><strong>TimezoneOffset</strong> - The offset of the timezone to UTC in milliseconds</li>\n<li><strong>Action</strong> - The downtime action to execute in OBM. Following action are supported\n\t\t\t\t<ol>\n<li>NO_ACTION</li>\n<li>SUPPRESS_NOTIFICATIONS</li>\n<li>KPI_CALCUATION</li>\n<li>REPORTS</li>\n<li>STOP_MONITORING<br/>\n<br/>\n\t\t\t\t\tThe result of these actions in OBM are:\n\t\t\t\t\t<table class=\"Table\" style=\"border-collapse:collapse\">\n<tbody>\n<tr>\n<td style=\"border-bottom:1px solid black; width:208px; padding:0cm 7px 0cm 7px; border-top:1px solid black; border-right:1px solid black; border-left:1px solid black\" valign=\"top\">\n<p><strong>Action</strong></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:164px; padding:0cm 7px 0cm 7px; border-top:1px solid black; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><strong><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Send Downtime notifications</span></span></strong></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:210px; padding:0cm 7px 0cm 7px; border-top:1px solid black; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><strong><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Event “received in downtime”</span></span></strong></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:186px; padding:0cm 7px 0cm 7px; border-top:1px solid black; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><strong><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">KPI status “in downtime”</span></span></strong></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:162px; padding:0cm 7px 0cm 7px; border-top:1px solid black; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><strong><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">SiteScope monitors</span></span></strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"border-bottom:1px solid black; width:208px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:1px solid black\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">NO_ACTION</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:164px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">No</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:210px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">No</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:186px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">No</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:162px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Running</span></span></p>\n</td>\n</tr>\n<tr>\n<td style=\"border-bottom:1px solid black; width:208px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:1px solid black\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">SUPPRESS_NOTIFICATIONS</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:164px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Yes</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:210px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Yes</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:186px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">No</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:162px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Running</span></span></p>\n</td>\n</tr>\n<tr>\n<td style=\"border-bottom:1px solid black; width:208px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:1px solid black\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">KPI_CALCULATION</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:164px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Yes</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:210px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Yes</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:186px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Yes</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:162px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Running</span></span></p>\n</td>\n</tr>\n<tr>\n<td style=\"border-bottom:1px solid black; width:208px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:1px solid black\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">REPORTS</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:164px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Yes</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:210px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Yes</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:186px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Yes</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:162px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Running</span></span></p>\n</td>\n</tr>\n<tr>\n<td style=\"border-bottom:1px solid black; width:208px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:1px solid black\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">STOP_MONITORING</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:164px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Yes</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:210px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Yes</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:186px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Yes</span></span></p>\n</td>\n<td style=\"border-bottom:1px solid black; width:162px; padding:0cm 7px 0cm 7px; border-top:none; border-right:1px solid black; border-left:none\" valign=\"top\">\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Aptos,sans-serif\">Stopped</span></span></p>\n</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ol>\n</li>\n<li><strong>CategoryId</strong> - The category id of the downtime.</li>\n<li><strong>CategoryName</strong> - The category name of the downtime.<br/>\n\t\t\t\tFollowing Category Ids, / Categories are supported\n\t\t\t\t<ol>\n<li>\n<p>id: 1 name: OTHER</p>\n</li>\n<li>\n<p>id: 2 name: OS_CONFIGURATION</p>\n</li>\n<li>\n<p>id: 3 name: APP_MAINTENANCE</p>\n</li>\n<li>\n<p>id: 4 name: APP_INSTALLATION </p>\n</li>\n<li>\n<p>id: 5 name: NW_MAINTENANCE </p>\n</li>\n<li>\n<p>id: 6 name: HW_MAINTENANCE </p>\n</li>\n<li>\n<p>id: 7 name: HW_INSTALLATION</p>\n</li>\n</ol>\n</li>\n<li>\n<p><strong>MinDowntimeDurationInSeconds</strong> - The minimum downtime duration in seconds to schedule a downtime in OBM. If the downtime duration is less than the configured value, the downtime is sent to OBM</p>\n</li>\n<li>\n<p><strong>DeleteDowntimeInOBMWhenChangeIsAbandoned</strong> - When set to true, the downtime is deleted in OBM when the change record in Service Management is abandoned.</p>\n</li>\n<li>\n<p><strong>CustomFieldNameDowntimeId</strong> - The name of the custom field, created in SMAX studio to store the OBM downtime Id.</p>\n</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p>In addition perform the following changes:</p>\n<ul>\n<li>Navigate to step 11 - \"<strong>Prepare downtime data</strong>\" and expand the step. </li>\n<li>in line one \"StartDate\" change the expression in the value column to: <code>format(ChangeRecord.properties.ScheduledDowntimeStartTime,\"yyyy-MM-dd'T'HH:mm:ss\");</code></li>\n<li>in line two \"EndDate\" change the expression in value column to: <code>format(ChangeRecord.properties.ScheduledDowntimeEndTime, \"yyyy-MM-dd'T'HH:mm:ss\");</code></li>\n</ul>\n<p><span style=\"color: rgb(22, 22, 22); font-size: clamp(1.59375rem, 18.7895px + 1.39803vw, 2.125rem);\">Use the scenario</span></p>\n<p>This section describes the additional steps required to use the scenario.</p>\n<h3><span style=\"font-size: clamp(1.3125rem, 15.4737px + 1.15132vw, 1.75rem);\">Schedule downtime</span></h3>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">This scenario is designed to work with the SMAX Change record type.</div>\n</div>\n<p>First, create a new custom field in the Change record type in SMAX studio</p>\n<ol>\n<li>Go to <strong>Studio</strong> and select the <strong>Change</strong> record type.</li>\n<li>Open the <strong>Fields</strong> tab and add a new custom field with the following properties.\n\t<ul>\n<li>Field name: OBMDowntimeID_c</li>\n<li>Multilingual label: OBM downtime ID</li>\n<li>Logical Type: SMALL TEXT</li>\n</ul>\n</li>\n</ol>\n<p>To trigger the downtime sync between Service Management and OBM several options are possible. The following proposal indicates one possible option, but this option may not full cover your requirements. Therefore please review and trigger the downtime exchange based on your needs.</p>\n<ol>\n<li>Go to <strong>Studio</strong> and select the <strong>Change</strong> record type.</li>\n<li>Open the <strong>Custom actions</strong> tab and add a new custom action with the name Downtime. Ensure you select the <strong>Enable workflow</strong> checkbox.<br/>\n\tExample:<br/>\n<a class=\"image\" href=\"/file/images/general/OBM_CustomAction.PNG\" title=\"/file/images/general/OBM_CustomAction.PNG\"> <img alt=\"Custom Action\" height=\"434\" src=\"../../../images/OBM_CustomAction_5ea02f6e.png\" width=\"809\"/> </a><br/>\n\t </li>\n<li>Next, open the <strong>Processes and Rules</strong> tab to add the business rule in the <strong>After applying changes</strong> section to trigger the Integration Studio scenario when the custom action is clicked or when the scheduled downtime start or end date was modified or when the change was abandoned<br/>\n<br/>\n\tThe rule should have the following condition<strong>:</strong><br/>\n<code>${(entity.OBMDowntimeID_c!=null &amp;&amp; (current_update.PhaseId.NewValue=='Abandon' || current_update.ScheduledDowntimeStartTime.IsChanged || current_update.ScheduledDowntimeEndTime.IsChanged)) || (current_update.CustomActionCount_c.IsChanged &amp;&amp; entity.CustomActionName_c=='Downtime')}</code><br/>\n<br/>\n\tExample:<br/>\n<a class=\"image\" href=\"/file/images/general/OBM_StudioRule.PNG\" title=\"/file/images/general/OBM_StudioRule.PNG\"> <img alt=\"Studio Rule\" height=\"298\" src=\"../../../images/OBM_StudioRule_85d339a7.png\" width=\"795\"/> </a></li>\n</ol>\n<ol>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}