{
  "title": "Configure Service Portal configuration settings",
  "content": "<div class=\"mw-parser-output\">\nÂ \n\n<p><!--cke_bookmark_160S--></p>\n<p class=\"mw-headline\">You can configure Service Portal by defining your own custom tabs, embedded JavaScript, date/time formats, and portal entity filters.Â </p>\n<h2 class=\"mw-headline\" id=\"Enable_customized_tab\"><a id=\"Customized_tabs\" name=\"Customized_tabs\" title=\"Customized tabs\"></a>Customized tabs</h2>\n<p>You can add at most 10 customized tabs to track the requests according to your specified configurations.</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>The <strong>My company view</strong> tab is an out-of-the-box customized tab available by default. You can use it as-is or create additional tabs based on your needs.</div></div></div>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">To add a customized tab in Service Portal, from theÂ main menu, selectÂ <b>Administration &gt; Configuration &gt; Service Portal Settings &gt; Configuration Settings &gt;Â Customized tabs</b> and click <strong>+ Add Tab</strong>.</li><li style=\"margin-left: 28px; position: relative;\">To edit a customized tab, click theÂ  <a class=\"image\" href=\"\"> <img alt=\"SM0911editcategorylink.png\" border=\"0\" data-file-height=\"56\" data-file-width=\"57\" file=\"/mediawiki/images/thumb/4/41/SM0911editcategorylink.png/30px-SM0911editcategorylink.png\" hspace=\"0\" src=\"../../../images/30px-SM0911editcategorylink_e313a900.png\" style=\"width:25px;height:24px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\"/> </a> Â icon.</li><li style=\"margin-left: 28px; position: relative;\">To delete a customized tab, click theÂ  <a class=\"image\" href=\"\"> <img alt=\"/mediawiki/images/1/19/SMAXConfigSettingDeleteButton.png\" border=\"0\" file=\"/mediawiki/images/1/19/SMAXConfigSettingDeleteButton.png\" hspace=\"0\" src=\"../../../images/SMAXConfigSettingDeleteButton_b6c2fb70.png\" style=\"width:24px;height:23px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\"/> </a> icon.</li></ul>\n<p>The following describes how to set the options for a customized tab.Â Â </p>\n<h3><a id=\"Enable_the_customized_tab\" name=\"Enable_the_customized_tab\" title=\"Enable the customized tab\"></a>Enable the customized tab</h3>\n<p>Set <strong>On</strong> forÂ <strong>Enabled</strong>Â to enable this customized tab.</p>\n<h3><a id=\"Set_the_default_filter_for_viewing_requests\" name=\"Set_the_default_filter_for_viewing_requests\" title=\"Set the default filter for viewing requests\"></a>Set the default filter for viewing requests</h3>\n<p><span style=\"font-size: 14px;\">The </span><strong style=\"font-size: 14px;\">Default filter</strong><span style=\"font-size: 14px;\"> option is available only when Customer Service Management (CSM) is enabled. It controls which requests users can view in the customized tab.</span></p>\n<div>For <strong>Default filter</strong>, select one of the following options:</div>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\"><strong>All requests</strong>: If you select this option, users can view all requests.</li><li style=\"margin-left: 28px; position: relative;\"><strong>Requests of the same company</strong>: If you select this option, users can view requests where the <strong>Requested for company</strong> or <strong>Requested by company</strong> matches the company the user belongs to.</li><li style=\"margin-left: 28px; position: relative;\"><strong>Requests based on entitlements</strong>: If you select this option, users can view requests created for product instances they are entitled to.</li></ul>\n<h3><a id=\"Grant_privilege_to_view_request_details_on_the_customized_tab\" name=\"Grant_privilege_to_view_request_details_on_the_customized_tab\" title=\"Grant privilege to view request details on theÂ customized tab\"></a>Grant privilege to view request details on theÂ customized tab</h3>\n<p>For <strong>Enable users to view the details of</strong>, select one of the options:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\"><strong>all requests in the custom tab</strong>: if you select this option, users will be able to click the Request ID of any requestÂ displayed in the customized tab to view the request details.</li><li style=\"margin-left: 28px; position: relative;\"><strong>the details of the requests that entitled to him/her onl</strong>y:Â if you select this option, users will be able to click theÂ Request ID of the requests to view the request details if they are Requested by, Requested for, followers, or the public audience of the requests..</li></ul>\n<h3><a id=\"Specify_a_name_for_the_customized_tab\" name=\"Specify_a_name_for_the_customized_tab\" title=\"Specify a name for the customized tab\"></a>Specify a name for the customized tab</h3>\n<p>In the <strong>Customized tab nam</strong>e field, enterÂ a name for the customized tab.Â This field supports localization. You can click the ellipsis icon and add a localized name to the corresponding field.</p>\n<h3><a id=\"Specify_the_roles_for_viewing_the_customized_tab\" name=\"Specify_the_roles_for_viewing_the_customized_tab\" title=\"Specify the roles for viewing the customized tab\"></a>Specify the roles for viewing the customized tab</h3>\n<p>Select one or more user roles that are allowed to view the customized tab in <span class=\"SAW_VariablesSelf-Service_Portal\">Service Portal.Â </span>This field is mandatory.</p>\n<h3><a id=\"Specify_the_request_metaphases\" name=\"Specify_the_request_metaphases\" title=\"Specify the request metaphases\"></a>Specify the request metaphases</h3>\n<p>Select the request metaphases. Only the requests in the selected metaphases are displayed on the customized tab. This field is mandatory.</p>\n<h3><a id=\"Select_the_predefined_grid_columns\" name=\"Select_the_predefined_grid_columns\" title=\"Select the predefined grid columns\"></a>Select the predefined grid columnsÂ </h3>\n<p>In the<strong> Grid columns</strong> field, select a predefined list of columns to be displayed on the customized tab. These columns may include the customized fields that are added to the Request table. If you don't define any columns here, the system will use Id, Title, Priority, Requested for, and Assignee as the default grid columns.</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>You can add columns for no more than 50 entity link fields.</div></div></div>\n<h3><a id=\"Define_the_query_expression\" name=\"Define_the_query_expression\" title=\"Define the query expression\"></a>Define the query expression</h3>\n<p>In the <strong>Query expression</strong> field, define a query condition to filter the requestsÂ to be displayed on the customized tab.</p>\n<p>The following are instructions and tips for adding query expressions:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">Object property</li><li style=\"margin-left: 28px; position: relative;\">Function</li></ul>\n<h4><a id=\"Object_property\" name=\"Object_property\" title=\"Object property\"></a><b>Object property</b></h4>\n<p>You can use onlyÂ <code>${entity}</code> and <code>${current_user}.</code>Â </p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">\n<p><code>${entity}</code>Â refers to the Request record type.</p>\n<p>When you form an object property expression, you can refer to the Request record's properties:</p>\n<p>For example:<br/>\n<code>${entity.Id&gt;0}<br/>\n\t${entity.DisplayLabel=â€™my titleâ€™}</code></p>\n<p>You can use an entity_link field to refer to the target property of another record type (<code>entity.entity_link_field.property</code>).<br/>\n\tFor example, use <cod><code>entity.RequestedForPerson.Location</code> to refer to the <code>Location</code> property of <code>Person</code> records that linked to the <code>RequestedForPerson</code> field.<br/>\n\tIn this case, you can't further query the attributes of the property except for <code>Id</code>.</cod></p>\n<p>âœ” <code>${entity.RequestedForPerson.Location == '10012'}</code><br/>\n<span style=\"background-color: transparent;\">âœ” </span><code style=\"background-color: transparent;\">${entity.RequestedForPerson.Location.Id == '10012'}</code><br/>\n<span style=\"background-color: transparent;\">âŒ </span><code style=\"background-color: transparent;\">${entity.RequestedForPerson.Location.LocationType == 'City'}</code><br/>\n<span style=\"background-color: transparent;\">Â  Â  Â  ğŸ‘‰ You can't further query the </span><code style=\"background-color: transparent;\">LocationType</code><span style=\"background-color: transparent;\"> attribute of the </span><code style=\"background-color: transparent;\">Location</code><span style=\"background-color: transparent;\"> property which is linked from the </span><code style=\"background-color: transparent;\">RequestedForPerson</code><span style=\"background-color: transparent;\"> field.</span><br/>\n<span style=\"background-color: transparent;\">âœ” </span><code style=\"background-color: transparent;\">${entity.RequestedForPerson.Id='10015' || entity.RequestedForPerson='10020'}</code><br/>\n<span style=\"background-color: transparent;\">âœ” </span><code style=\"background-color: transparent;\">${entity.RequestedForPerson.Location == current_user.Location || entity.RequestedForPerson.Location.Id == current_user.Location.Id}</code></p>\n<p>One-to-many or many-to-many fields aren't supported for <code>${entity}</code>.</p>\n<p>âŒ<code>${entity.FollowedByUsers[Id = '10016']}</code></p>\n<p>You can use comparison operators to compare an enum-typedÂ property with enum values. But make sure theÂ enum value is included as the list item; otherwise, errors will occur.</p>\n<p>âœ”Â <code>${entity.Status==\"Pending\"}<span lang=\"EN-US\" style=\"font-size:11.0pt\"><span style='font-family:\"Calibri\",sans-serif'>Â </span></span></code><br/>\n\tâŒÂ <code>${entity.Status==\"my status\"}<span lang=\"EN-US\" style=\"font-size:11.0pt\"><span style='font-family:\"Calibri\",sans-serif'>Â </span></span></code></p>\n</li><li style=\"margin-left: 28px; position: relative;\">\n<p><code>${current_user}</code>Â refers to the person who is currently logged in.</p>\n<p>When you form a query expression using the fields of <code>current_user</code>, make sure to add a <code>current_user.&lt;field&gt;!= null</code> condition before using the fields in the query expression.</p>\n<p>For example:</p>\n<p>For entity_link fields:<br/>\n\tâœ”<code>current_user.DefaultEntitlement_c!=null</code><br/>\n\tâœ”<code>current_user.DefaultEntitlement_c.Id!=null</code></p>\n<p>For many-to-many fields:<br/>\n\tâœ”<code>current_user.PersonToEntitlement_c!=null</code><br/>\n\tâŒ<code>current_user.PersonToEntitlement_c.Id!=null</code><br/>\n\tâŒ<code>current_user.PersonToEntitlement_c.Id.count &gt; 0</code></p>\n<p>For boolean fields:<br/>\n\tâœ”<code>current_user.boolean_c ==true</code><br/>\n\tâœ”<code>current_user.boolean_c=false</code><br/>\n\tâœ”<code>current_user.boolean_cÂ !=true</code><br/>\n\tâœ”<code>current_user.boolean_cÂ !=false</code></p>\n<p>Here are the usage examplesÂ of the query expressions usingÂ entity_link fields:<br/>\n\tâœ”Â <code>${current_user.NameÂ != null &amp;&amp; current_user.Name=='suite-admin'}Â </code><br/>\n\tâœ”Â <code>${current_user.DefaultEntitlement_c!=null &amp;&amp; entity.RequestedForPerson.DefaultEntitlement_c==current_user.DefaultEntitlement_c}Â </code><br/>\n\tâœ”Â <code>${current_user.DefaultEntitlement_c!=null &amp;&amp; entity.RequestedForPerson.DefaultEntitlement_c.Id==current_user.DefaultEntitlement_c}Â </code><br/>\n\tâœ”Â <code>${current_user.DefaultEntitlement_c!=null &amp;&amp; entity.RequestedForPerson.DefaultEntitlement_c.Id==current_user.DefaultEntitlement_c.Id}Â </code><br/>\n\tâœ”Â <code>${current_user.DefaultEntitlement_c.Id!=null &amp;&amp; entity.RequestedForPerson.DefaultEntitlement_c.Id==current_user.DefaultEntitlement_c.Id}Â </code></p>\n<p>The following example is a query expression using many-to-many fields:<br/>\n\tâœ”Â <code>${(current_user.DefaultEntitlement_c!=null || current_user.PersonToEntitlement_c!=null || current_user.PersonToOnBehalf!=null) &amp;&amp; (current_user.DefaultEntitlement_c.Id == entity.Entitlement_c.Id || contain(intersection(current_user.PersonToEntitlement_c.Id),entity.Entitlement_c.Id)==true || contain(intersection(current_user.PersonToOnBehalf.Id),entity.RequestedForPerson.Id)==true)}Â </code></p>\n</li></ul>\n<p>The following table lists the supported operators.</p>\n<table>\n<thead>\n<tr>\n<th scope=\"col\">\n<p>Operator</p>\n</th>\n<th scope=\"col\">\n<p>Symbol</p>\n</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\n<p>Boolean OR</p>\n</td>\n<td>\n<p><code>||, or</code></p>\n</td>\n</tr>\n<tr>\n<td>\n<p>Boolean AND</p>\n</td>\n<td>\n<p><code>&amp;&amp;, and</code></p>\n</td>\n</tr>\n<tr>\n<td>\n<p>Equality</p>\n</td>\n<td>\n<p><code>==,Â != ,&lt;&gt;</code></p>\n</td>\n</tr>\n<tr>\n<td>\n<p>Relational</p>\n</td>\n<td>\n<p><code>&gt;, &gt;=, &lt;, &lt;=</code></p>\n</td>\n</tr>\n<tr>\n<td>\n<p>PrimaryExpression</p>\n</td>\n<td>\n<p><code>()</code></p>\n</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Good (</strong>âœ”<strong>) and bad (</strong>âŒ<strong>) examples</strong></p>\n<p>âœ” <code>${entity.Id &gt; 10000}</code></p>\n<p>âœ” <code>${entity.Priority == 'High' || entity.Priority == 'Low'}</code></p>\n<p>âœ” <code>${entity.Priority == 'High' &amp;&amp; (entity.Priority == 'Low' &amp;&amp; entity.RequestedForPerson.Location == current_user.Location)}</code></p>\n<p>âœ” <code>${entity.customLabel_cÂ != null}</code></p>\n<p>âŒ <code>${entity.Active == 'Active'}</code></p>\n<p>Â  Â  Â  ğŸ‘‰ The data type of Active is Boolean.</p>\n<p>âŒ <code>${!entity.Active}</code></p>\n<p>Â  Â  Â  ğŸ‘‰ NOT operator \"<code>!\"</code>Â isn't supported.</p>\n<h4><a id=\"Function\" name=\"Function\" title=\"Function\"></a><strong>Function</strong></h4>\n<p>The following table describes the supported functions.</p>\n<table bordercolor=\"#ccc\" style=\"border-collapse:collapse;\">\n<thead>\n<tr>\n<th scope=\"col\">\n<p>Function</p>\n</th>\n<th scope=\"col\">\n<p>Description</p>\n</th>\n<th scope=\"col\">\n<p>Notes</p>\n</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\n<p>contain(collection arg1, Object arg2)</p>\n</td>\n<td>\n<p>Returns true if arg2 is contained within arg1.</p>\n</td>\n<td>\n<p>The result must be checked with equality operators.</p>\n<p>Arg1 should be the result of an intersection or a union.</p>\n<p>Arg1 shouldn't be an empty collection.</p>\n<p>Arg1 only accepts the number and string types.</p>\n<p>Null shouldn't be contained in Arg1.</p>\n<p>Arg2 should be entity property.</p>\n<p>Make sure the collection type matches the entity propertyâ€™s type.</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>intersection(Object...args)</p>\n</td>\n<td>\n<p>Returns a new collection that contains only the elements contained in all the collections entered.</p>\n</td>\n<td>\n<p>You must use this function together with the contain function.</p>\n<p>The Result shouldn't be empty.</p>\n<p>Args should be number or string.</p>\n<p>Entity properties aren't allowed in args. But the properties in <code>current_user</code> are allowed, such as <code>intersection(current_user.PersonToGroup.Id)</code>.</p>\n<p>Null shouldn't be contained in args.</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>concat(Object...args)</p>\n</td>\n<td>\n<p>Concatenate all arguments into a single string.</p>\n</td>\n<td>\n<p>Example usage: <code>concat('a', 'b', 'c') =&gt; 'abc'</code></p>\n<p>Entity properties aren't allowed in parameters.</p>\n<p>Args should be string.</p>\n<p>This function can't be nested.</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>union(Object...args)</p>\n</td>\n<td>\n<p>Returns a set of the values. The arguments can be of different data types: strings, numeric values, and boolean values.</p>\n</td>\n<td>\n<p>This function should be together used with contain function.</p>\n<p>The result shouldn't be empty.</p>\n<p>Args should be number, string, or boolean.</p>\n<p><span style=\"background-color:#ffffff;\">Entity properties aren't allowed in args. </span>But the properties in <code>current_user</code> are allowed, such as <code>union(current_user.PersonToGroup.Id)</code>.</p>\n<p>Null shouldn't be contained in args.</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>uuid()</p>\n</td>\n<td>\n<p>Generates a random universally unique identifier (UUID).</p>\n</td>\n<td>\n<p>Example usage: <code>uuid() =&gt; xxxxxxxxxxx</code></p>\n</td>\n</tr>\n<tr>\n<td>\n<p>now()</p>\n</td>\n<td>\n<p>Returns the current time in milliseconds since January 1, 1970.</p>\n</td>\n<td>\n<p><span style=\"background-color: transparent;\">When you use theÂ </span><code style=\"background-color: transparent;\">-</code><span style=\"background-color: transparent;\"> operator, be sure to add a space after \"</span><code style=\"background-color: transparent;\">-\"</code><span style=\"background-color: transparent;\">.</span></p>\n\t\t\tExample usage for the + and - operators:\n\n\t\t\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">Query the requests which were created 4 days ago:<br/>\n<code>${entity.CreateTime&lt;now()- 4*24*60*60*1000}Â </code></li><li style=\"margin-left: 28px; position: relative;\">Query the requests which are expected to be completed after 1 month:<br/>\n<code>${entity.ExpectedCompletionTime&gt;=now()+30*24*60*60*1000}Â </code></li></ul>\n</td>\n</tr>\n<tr>\n<td>lookup_entitlements(entitlementType, permission, null, personId, userCompanyId)</td>\n<td>\n<div><strong>Parameter descriptions:</strong></div>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">entitlementType: The type of entitlement to look up. Currently,Â <strong>'Product'</strong>Â is the only entitlement type available.</li><li style=\"margin-left: 28px; position: relative;\">permission: The permission to check<b>. </b>Â It can be one of the following:\n\t\t\t\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\"><strong>'View' -</strong>Â  The user canÂ view the requests associated withÂ entitlement</li><li style=\"margin-left: 40px; position: relative;\"><strong>'Create' - </strong>TheÂ user can create requests for items covered by the entitlement.</li><li style=\"margin-left: 40px; position: relative;\"><strong>'Update' - </strong>TheÂ user can update requests for items covered by the entitlement.</li></ul>\n</li><li style=\"margin-left: 28px; position: relative;\">personId:Â The ID of the userÂ whose entitlements you want to retrieve.</li><li style=\"margin-left: 28px; position: relative;\">userCompanyId:Â The ID of the company to which the user belongs.</li></ul>\n<div><strong>Function description:</strong><br/>\n\t\t\tReturns all entitlements for which the specified user has the given <strong data-end=\"1123\" data-start=\"1109\">permission</strong>.<br/>\n<br/>\n<strong>Example:</strong><br/>\n<code>lookup_entitlements('Product', 'Create', null, current_user, current_user.Company)</code></div>\n</td>\n<td>\n<p data-end=\"2131\" data-start=\"2059\">N/A</p>\n</td>\n</tr>\n<tr>\n<td>\n<div>lookup_entitled_items(entitlementType, permission, null, personId, userCompanyId)</div>\n</td>\n<td>\n<div style=\"position: relative;\"><strong>Parameter descriptions:</strong></div>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">entitlementType:Â The type of entitlement to look up. Currently,Â <strong>'Product'</strong>Â is the only entitlement type available.</li><li style=\"margin-left: 28px; position: relative;\">permission: The permission to check. It can be one of the following:\n\t\t\t\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\"><strong>'View' -</strong>Â The user canÂ view the requests for theÂ item.</li><li style=\"margin-left: 40px; position: relative;\"><strong>'Create' - </strong>TheÂ user can create requests for the item.</li><li style=\"margin-left: 40px; position: relative;\"><strong>'Update' - </strong>TheÂ user can update requests for the item.</li></ul>\n</li><li style=\"margin-left: 28px; position: relative;\">\n<div>personId:Â The ID of the user for whom you want to retrieve the entitled items.</div>\n</li><li style=\"margin-left: 28px; position: relative;\">\n<div>userCompanyId:Â The ID of the company to which the user belongs.</div>\n</li></ul>\n\t\t\tÂ \n\n\t\t\t<div style=\"position: relative;\"><strong>Function description:</strong></div>\n<div style=\"position: relative;\">Returns all items on which the specified user has the given <strong data-end=\"2048\" data-start=\"2034\">permission</strong>.<br/>\n<br/>\n<strong>Example:</strong></div>\n<div style=\"position: relative;\"><code>lookup_entitled_items('Product', 'Create', null, current_user, current_user.Company)</code></div>\n</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td>related_companies(companyId, arrayOfDirectionsWithRelationshipTypes)</td>\n<td><strong>Parameter descriptions:</strong>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">companyId:Â The ID of theÂ company for whichÂ you want to retrieve related companies.</li><li style=\"margin-left: 28px; position: relative;\">arrayOfDirectionsWithRelationshipTypes:Â An array that specifies the relationship types and directionsÂ to consider when retrieving related companies.Â Each entry in the array must use the formatÂ <strong>'Direction:RelationshipType'</strong>, for example,Â <code>'Forward:MSP'</code>.<br/>\n\t\t\t\tÂ </li></ul>\n<div style=\"position: relative;\"><strong>Function description:</strong></div>\n<div>Returns an array of company IDs that are related to the specifiedÂ <strong>companyId</strong>Â based on the specified relationships.</div>\n<div><br/>\n<strong>Example:</strong></div>\n<div><code>related_companies(current_user.Company, union('Forward:MSP','Backward:Partner'))</code>.</div>\n</td>\n<td>\n<p data-end=\"166\" data-start=\"153\"><strong>Forward </strong>retrieves companies that the specified company is linked to.<br/>\n<strong>Backward </strong>retrieves companies that are linked to the specified company.<br/>\n\t\t\tÂ </p>\n<p data-end=\"369\" data-start=\"354\"><strong>Examples</strong>:</p>\n<ul data-end=\"1027\" data-start=\"370\" style=\"padding-left: 0px;\"><li data-end=\"511\" data-start=\"370\" style=\"margin-left: 28px; position: relative;\">\n<p data-end=\"511\" data-start=\"372\">If Company A is a <strong>Partner</strong> of Company B in the forward direction, then the following applies:</p>\n<ul style=\"padding-left: 0px;\"><li data-end=\"511\" data-start=\"370\" style=\"margin-left: 40px; position: relative;\">\n<p><code>related_companies(A, 'Forward:Partner')</code>Â returns B</p>\n</li><li data-end=\"733\" data-start=\"513\" style=\"margin-left: 40px; position: relative;\">\n<p data-end=\"733\" data-start=\"515\"><code>related_companies(B, 'Backward:Partner')</code> returns A</p>\n</li><li data-end=\"733\" data-start=\"513\" style=\"margin-left: 40px; position: relative;\">\n<p><code>related_companies(A, 'Backward:Partner')</code> returns no results.</p>\n</li></ul>\n</li><li data-end=\"879\" data-start=\"735\" style=\"margin-left: 28px; position: relative;\">\n<p data-end=\"879\" data-start=\"737\">If A has an <strong>MSP </strong>relationship to C in the forward direction, then the following applies:</p>\n<ul style=\"padding-left: 0px;\"><li data-end=\"879\" data-start=\"735\" style=\"margin-left: 40px; position: relative;\">\n<p><code>related_companies(A, 'Forward:MSP')</code> returns C.</p>\n</li><li data-end=\"879\" data-start=\"735\" style=\"margin-left: 40px; position: relative;\">\n<p><code>related_companies(C, 'Backward:MSP')</code> returns A.</p>\n</li></ul>\n</li></ul>\n</td>\n</tr>\n<tr>\n<td>lookup_by_association(entityType, associationName, associationEntityIDs)</td>\n<td>Returns the records of type <strong data-end=\"956\" data-start=\"942\">entityType</strong> that are associated with the entities listed in <strong data-end=\"1029\" data-start=\"1005\">associationEntityIDs</strong>, using the relationship defined by <strong data-end=\"1084\" data-start=\"1065\">associationName</strong>.<br data-end=\"1088\" data-start=\"1085\"/>\n<br/>\n\t\t\tFor example, the following returns the environments associated with the product instances the user is entitled to create requests for.<br/>\n<br/>\n<code>lookup_by_association('Environment', 'EnvironmentProductInstance', lookup_entitled_items('Product', 'Create', null, current_user, current_user.Company))</code></td>\n<td>N/A</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Good (</strong>âœ”<strong>) and bad (</strong>âŒ<strong>) examples</strong></p>\n<p>âœ” <code>${contain(intersection(current_user.Id), entity.RequestedForPerson.Id) == true}</code></p>\n<p>âœ” <code>${contain(intersection(123, 123), entity.RequestedForPerson.Id)Â != true}</code></p>\n<p>âœ” <code>${entity.CustomLabel_c == concat('a', 'b', 'c')}</code></p>\n<p>âœ” <code>${contain(union('123', 323), entity.RequestedForPerson.Id)Â != true }</code></p>\n<p>âœ” <code>${entity.CreateTime &lt; now()}</code></p>\n<p>âŒ <code>${contain(intersection(current_user.Id, 323), entity.RequestedForPerson.Id)}</code></p>\n<p>Â  Â  Â  ğŸ‘‰ The result must be checked with equality operators.</p>\n<p>âŒ <code>${intersection(1, 2).size &gt; 0}</code></p>\n<p>Â  Â  Â  ğŸ‘‰ The intersection function should be together used with contain function.</p>\n<p>âŒ <code>${contain(intersection(current_user.Id, 10015), entity.RequestedForPerson.Id) == true}</code></p>\n<p>Â  Â  Â  (If the value ofÂ <code>current_user.Id</code> is 10016 in this example)<br/>\nÂ  Â  Â  ğŸ‘‰ Arg1 shouldn't be empty collection.</p>\n<p>âŒ<code> ${contain(intersection(current_user.Custom_c), entity.RequestedForPerson.Id) == true}</code></p>\n<p>Â  Â  Â  (If the value ofÂ <code>current_user.Custom_c</code> is <code>null</code> in this example)<br/>\nÂ  Â  Â  ğŸ‘‰ Null shouldn't be contained in Arg1.</p>\n<p>âŒ <code>${contain(intersection(\"test\"), entity.RequestedForPerson.Id) == true}</code></p>\n<p>Â  Â  Â  ğŸ‘‰ Make sure the collection type is matched with entity propertyâ€™s type.<br/>\nÂ  Â  Â  (In this example, the type of <code>Id</code> is number, but the type of <code>\"test\"</code>Â is string.)</p>\n<p>âŒ <code>${contain(intersection(current_user.Id, 323), 323) == true}</code></p>\n<p>Â  Â  Â  ğŸ‘‰ The second parameter of contain function should be entity property.</p>\n<p>âŒ <code>${contain(intersection(entity.RequestedForPerson.Id, 323), current_user.Id) == true}</code></p>\n<p>Â  Â  Â  ğŸ‘‰ Entity properties aren't allowed in intersection parameters.</p>\n<p>âŒ<code> ${entity.CustomLabel_c == concat(concat('A', 'B'), 'C')}</code></p>\n<p>Â  Â  Â  ğŸ‘‰The concat function can't be nested.</p>\n<p>âŒ <code>${contain(union(entity.RequestedForPerson.Id, 323), current_user.Id) == true}</code></p>\n<p>Â  Â  Â  ğŸ‘‰ Entity properties aren't allowed in union parameters.</p>\n<p><strong>Additional notes for the supported DSL functions</strong></p>\n<p>All parameters shouldn't contain entity property (except for the second parameter of theÂ <strong>contain</strong> function).</p>\n<p>The <strong>intersection</strong> and <strong>union</strong> functions will accept a special type of value.</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">If you give a value using single quotation marks and comma, the value will be recognized as data of collection type.<br/>\n\tFor example: 'testA', 'testB', 'testC'. Then if you use intersection(current_user.custom_c) and custom_c is 'testA','testB','testC', you will get the result with a collection that contains 3 string-type values: testA testB and testC</li><li style=\"margin-left: 28px; position: relative;\">Each value should be wrapped into single quotation marks. For example, <code>'testA', a</code> isn't allowed. Instead, it should be <code>'testA', 'a'</code>.</li><li style=\"margin-left: 28px; position: relative;\">Number isn't allowed to be recognized as collection.</li></ul>\n<h3><a id=\"Specify_an_Excel_template\" name=\"Specify_an_Excel_template\" title=\"Specify an Excel template\"></a>Specify an Excel template</h3>\n<p>Download or upload an Excel template for end users to export the record list from the customized tab in Service Portal.</p>\n<h4><a id=\"Download\" name=\"Download\" title=\"Download\"></a><b>Download</b></h4>\n<p>Click this button to download the existing template.</p>\n<h4><a id=\"Upload\" name=\"Upload\" title=\"Upload\"></a><b>Upload</b></h4>\n<p>Click this button to upload a customized Excel template. The upload file type must be *.xlsx.</p>\n<p>An IT agent can either create a new template or download the default template and then upload it again after customization. When creating a new template, an IT agent needs to define the Field Name in the first row on Sheet1, and then prepare some pre-configured tables or charts on other sheets of the Excel template.</p>\n<p>The Field Name must be the value of the Name field in the Request meta data definition. To access the Request meta data, click <b>Administration</b> &gt; <b>Configuration</b> &gt; <b>Studio</b>. Select <b>Request</b> in the drop-down list, and then switch to the <b>Fields</b> tab.</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<p>As described in the <b>Grid columns</b> description above, an IT agent can select some columns to be displayed on the customized tab. Meanwhile, the selected columns must be defined in the Excel template as well. If an IT agent selects to display some columns without defining them in the Excel template, the system can't export the related columns.</p>\n</div></div></div>\n<h4><a id=\"Revert_to_default\" name=\"Revert_to_default\" title=\"Revert to default\"></a><b>Revert to default</b></h4>\n<p>Click this button to revert to the default template.Â This button is activated only after you have uploaded a customized Excel template.</p>\n<p>In the default template, all field names are defined based on the out-of-the-box data. The default template also provides some pre-configured tables and charts as examples to help end users summarize their data and number of requests.</p>\n<h2><a id=\"Embedded_JavaScript\" name=\"Embedded_JavaScript\" title=\"Embedded JavaScript\"></a>Embedded JavaScript</h2>\n<p>To add an embedded JavaScript to Service Portal, from theÂ main menu, selectÂ <b>Administration &gt; Configuration &gt; Service Portal Settings &gt; Configuration Settings &gt;Â Embedded JavaScript</b> and select <b>On</b> in the <b>Enable your own embedded JavaScript</b> field.</p>\n<h3><a id=\"Embed_code\" name=\"Embed_code\" title=\"Embed code\"></a>Embed code</h3>\n<p>Fill in your own embedded JavaScript in Service Portal. Pay attention to the following:</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">The scope of this feature is to allow a specific Link in the Sidebar of the Portal that can execute some actions when the user clicks on it. Here is an example code: <code>&lt;script type=\"text/javascript\" src=\"example.js\"&gt;&lt;/script&gt;</code></li><li style=\"margin-left: 28px; position: relative;\">This feature is designed for one .js fileÂ only.Â Don't referenceÂ jQueryÂ or .cssÂ files in the embedded code; Don't include multiple .js files in the embedded code.</li><li style=\"margin-left: 28px; position: relative;\">The behavior of \"embedded\" or \"popup\" depends on the implementation of the JavaScript itself. Service Portal doesn't control the behavior of the embedded JavaScript.</li><li style=\"margin-left: 28px; position: relative;\">\n<p>In your external JavaScript, you may get the user name from Service Portal by using the following JS function:</p>\n<p><code>var username = document.querySelector(\".ess-avatar-widget-user\").innerHTML.trim();</code><br/>\n<a class=\"image\" href=\"\"> <img alt=\"/mediawiki/images/f/f6/externalJSVA.png\" border=\"0\" file=\"/mediawiki/images/f/f6/externalJSVA.png\" hspace=\"0\" src=\"../../../images/externalJSVA_23945102.png\" style=\"width: 670px; height: 46px;\" vspace=\"0\"/> </a></p>\n\tAlso with this example, you can parse content in the webpage and use it in your JavaScript.</li><li style=\"margin-left: 28px; position: relative;\">If your embedded JavaScript is loaded over HTTP, Service Portal is unable to launch the JavaScript. This is because Service Management only allows HTTPS requests. To successfully launch the JavaScript, use HTTPS instead of HTTP. For example,<code>&lt;script type=\"text/javascript\" src=\"<a class=\"external free\" href=\"https://www.xxxxxxxx.com/xxxxx.js\" rel=\"nofollow\" target=\"1\" title=\"https://www.xxxxxxxx.com/xxxxx.js\">https://www.xxxxxxxx.com/xxxxx.js</a>\"&gt;&lt;/script&gt;</code>.</li><li style=\"margin-left: 28px; position: relative;\">If your embedded JavaScript is put on a website that uses a private Certificate Authority to issue the certificate, Service Portal is unable to make a secure connection to the website's server and therefore a connection untrusted error occurs. In this case, Service Portal is unable to launch the JavaScript successfully. When this error occurs, The following error message is displayed:<br/>\n<code>Failed to load external script!</code><br/>\n\tSee aÂ <a href=\"/doc/423/26.1/jscannotrun\" title=\"SMAX:Main/JScannotRun\">troubleshooting document</a> for a solution.</li><li style=\"margin-left: 28px; position: relative;\">Be sure toÂ add the domains used in your JavaScript toÂ <strong>Application settingsÂ  &gt; <a href=\"/doc/423/26.1/appsettings#Authorized_domains_for_navigation\" title=\"Authorized domains for navigation\">Authorized domains for navigation</a></strong>, otherwiseÂ your script will be blocked from execution.</li><li style=\"margin-left: 28px; position: relative;\">Don't use the <code>innerHTML</code> attribute to append HTML element to the HTML body. For example:\n\t<pre><code>document.body.innerHTML += '&lt;div id=\\'map\\'&gt;&lt;/div&gt;';</code></pre>\n<p>This method will affect the existing contents on the web page, which may cause some problems in Service Portal and the JavaScript can't be launched successfully.Â <br/>\n\tTo replace the method above, you can create your HTML element through <code>document.createElement</code>,Â and then append it to the document's body.<br/>\n\tFor example:</p>\n<pre><code>var divtag = document.createElement('div');\ndivtag.setAttribute('id','map');\ndocument.body.appendChild(divtag);</code></pre>\n</li></ul>\n<p><strong>Example usage</strong></p>\n<p>Here is a typical procedure toÂ add an embedded JavaScript:</p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Run a webserver (for example, a NodeJs server).</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Put a JavaScript file, for example, a file namedÂ <strong>launcher.js</strong>Â with your code to a folder on your webserver, which is accessible from outside.\n\t<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 40px; position: relative;\">Inside the <strong>launcher.js</strong>Â file, write the code as required, for example,Â open a Webpage or open another app on your Webserver.</li></ul>\n</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p>In the <strong>Embed code</strong>Â field, fill in the followingÂ JS function to run the script:<br/>\n<code>&lt;script src=\"https://<em>&lt;Webserverhostname:port&gt;/&lt;foldername&gt;/</em>launcher.js\" type=\"text/javascript\" &gt;&lt;/script&gt;</code></p>\n</li></ol>\n<h3><a id=\"Specify_the_display_name\" name=\"Specify_the_display_name\" title=\"Specify the display name\"></a>Specify the display name</h3>\n<p>Fill in the display text in Service Portal that triggers your embedded JavaScript.</p>\n<h3><a id=\"Specify_the_tooltip\" name=\"Specify_the_tooltip\" title=\"Specify the tooltip\"></a>Specify the tooltip</h3>\n<p>Fill in the tooltip message for Service Portal users.</p>\n<h3><a id=\"Specify_the_post_action\" name=\"Specify_the_post_action\" title=\"Specify the post action\"></a>Specify the post action</h3>\n<p>If needed, fill in the action code to be run after your own embedded JavaScript is loaded.</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div><b>:</b> This is an optional field, which depends on your JavaScript implementation. If there is an action defined in your JavaScript and it's required to be run after your JavaScript is loaded, Â you may put the action here. Here is an example code: <code>window.postMessage(\"example\");</code></div></div></div>\n<h3><a id=\"Upload_an_icon\" name=\"Upload_an_icon\" title=\"Upload an icon\"></a>Upload an icon</h3>\n<p>Upload an iconÂ for your embedded JavaScript. The icon will be displayed next to the link you specified in the sidebar.</p>\n<h2><a id=\"Date_and_time_formats\" name=\"Date_and_time_formats\" title=\"Date and time formats\"></a>Date and time formats</h2>\n<p>You can define date and time formats associated with the language in this tab.Â To update the date and time formats, from theÂ main menu, selectÂ <b>Administration &gt; Configuration &gt; Service Portal Settings &gt; Configuration Settings &gt;Â Date and time formats</b>.</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div><strong>: </strong>This setting applies to both Service Portal and Agent interface.</div></div></div>\n<p>The following table lists the characters that you can use when you define date and time formats.</p>\n<table>\n<colgroup>\n<col/>\n<col/>\n</colgroup>\n<thead>\n<tr>\n<th>Format</th>\n<th>Output example</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td headers=\"d15757e43\">YY</td>\n<td headers=\"d15757e46\">21</td>\n<td headers=\"d15757e46\">Two-digit year</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">YYYY</td>\n<td headers=\"d15757e46\">2021</td>\n<td headers=\"d15757e46\">Four-digit year</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">M</td>\n<td headers=\"d15757e46\">6</td>\n<td headers=\"d15757e46\">Month,Â from 1 through 12</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">MM</td>\n<td headers=\"d15757e46\">06</td>\n<td headers=\"d15757e46\">Two-digit month, from 01 through 12</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">MMM</td>\n<td headers=\"d15757e46\">Feb</td>\n<td headers=\"d15757e46\">Three-letter abbreviation of the month</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">MMMM</td>\n<td headers=\"d15757e46\">February</td>\n<td headers=\"d15757e46\">Full name of the month</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">D</td>\n<td headers=\"d15757e46\">1</td>\n<td headers=\"d15757e46\">Day of the month from 1 through 31</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">DD</td>\n<td headers=\"d15757e46\">01</td>\n<td headers=\"d15757e46\">Day of the month from 01 through 31</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">d</td>\n<td headers=\"d15757e46\">1</td>\n<td headers=\"d15757e46\">Day of the week, whereÂ 0Â is forÂ SundayÂ and 6 as Saturday</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">dd</td>\n<td headers=\"d15757e46\">Mo</td>\n<td headers=\"d15757e46\">Two-letter abbreviation for the day of the week, from Su through Sa</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">ddd</td>\n<td headers=\"d15757e46\">Mon</td>\n<td headers=\"d15757e46\">Three-letter abbreviation for the day of the week, from Sun through Sat</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">dddd</td>\n<td headers=\"d15757e46\">Monday</td>\n<td headers=\"d15757e46\">Full name for the day of the week, from Sunday through Saturday</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">H</td>\n<td headers=\"d15757e46\">8</td>\n<td headers=\"d15757e46\">Hour using 24-hour clock from 0 through 24</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">HH</td>\n<td headers=\"d15757e46\">08</td>\n<td headers=\"d15757e46\">Hour using 24-hour clock from 00 through 24</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">h</td>\n<td headers=\"d15757e46\">8</td>\n<td headers=\"d15757e46\">Hour using 12-hour clock from 1 through 12</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">hh</td>\n<td headers=\"d15757e46\">08</td>\n<td headers=\"d15757e46\">Hour using 12-hour clock from 01 through 12</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">m</td>\n<td headers=\"d15757e46\">5</td>\n<td headers=\"d15757e46\">Minute, from 0 through 59</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">mm</td>\n<td headers=\"d15757e46\">05</td>\n<td headers=\"d15757e46\">Two-digit minute, from 00 through 59</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">s</td>\n<td headers=\"d15757e46\">3</td>\n<td headers=\"d15757e46\">Second, from 0 through 59</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">ss</td>\n<td headers=\"d15757e46\">03</td>\n<td headers=\"d15757e46\">Two-digit second, from 00 through 59</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">SSS</td>\n<td headers=\"d15757e46\">666</td>\n<td headers=\"d15757e46\">Three-digit millisecond, from 000 though 999</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">Z</td>\n<td headers=\"d15757e46\">+05:00</td>\n<td headers=\"d15757e46\">Hours and minutes offset from UTC (+/-nn:nn)</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">ZZ</td>\n<td headers=\"d15757e46\">+0500</td>\n<td headers=\"d15757e46\">Hours and minutes offset from UTC, with no colon</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">A</td>\n<td headers=\"d15757e46\">AM</td>\n<td headers=\"d15757e46\">AM or PM marker</td>\n</tr>\n<tr>\n<td headers=\"d15757e43\">a</td>\n<td headers=\"d15757e46\">am</td>\n<td headers=\"d15757e46\">am or pm marker</td>\n</tr>\n</tbody>\n</table>\n<h3><a id=\"Select_a_language\" name=\"Select_a_language\" title=\"Select a language\"></a>Select a language</h3>\n<p>Select a language to set the associated date and time formats.</p>\n<h3><a id=\"Set_the_date_format_displayed_as_a_label\" name=\"Set_the_date_format_displayed_as_a_label\" title=\"Set the date format displayed as a label\"></a>Set the date format displayed as a label</h3>\n<p>Here is an example of a date label, which is displayed as theÂ news date in the sidebar.</p>\n<div><a class=\"image\" href=\"\"> <img alt=\"/mediawiki/images/6/65/datetimelabel.png\" border=\"0\" file=\"/mediawiki/images/6/65/datetimelabel.png\" hspace=\"0\" src=\"../../../images/datetimelabel_f85aeab5.png\" style=\"width:302px;height:203px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\"/> </a></div>\n<h3><a id=\"Set_the_long_and_short_date_and_time_format_displayed_in_the_date_picker_and_time_picker\" name=\"Set_the_long_and_short_date_and_time_format_displayed_in_the_date_picker_and_time_picker\" title=\"Set the long and short date and time formatÂ displayed in the date-picker and time-picker\"></a>Set the long and short date and time formatÂ displayed in the date-picker and time-picker</h3>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\"><strong>Long date format displayed in the date-picker (date, month, year)</strong>\n<p>The date-picker displays this long date format, <code>MM/dd/yyyy</code>.</p>\n</li><li style=\"margin-left: 28px; position: relative;\"><strong>Short date format displayed in the date-picker (month, year)</strong>\n<p>The date-picker displays this short date format, <code>MM/yyyy</code>.</p>\n</li><li style=\"margin-left: 28px; position: relative;\"><strong>Long time format displayed in the time-picker (hour, minute, second)</strong>\n<p>The time-picker displays this long time format, <code>h:mm:ss a</code>.</p>\n</li><li style=\"margin-left: 28px; position: relative;\"><strong>Short time format displayed in the time-picker (hour, minute)</strong>\n<p>The time-picker displays this short time format, <code>h:mm a</code>.</p>\n</li></ul>\n<p>Here is an example of the date and time formats displayed in the date-picker and time-picker.</p>\n<div><a class=\"image\" href=\"\"> <img alt=\"/mediawiki/images/b/b3/datepicker.png\" border=\"0\" file=\"/mediawiki/images/b/b3/datepicker.png\" hspace=\"0\" src=\"../../../images/datepicker_ceede2e5.png\" style=\"width: 800px; height: 79px; margin: 0px; border: 0px solid black;\" vspace=\"0\"/> </a></div>\n<h3><a id=\"Set_the_date_format_displayed_in_the_grid\" name=\"Set_the_date_format_displayed_in_the_grid\" title=\"Set the date format displayed in the grid\"></a>Set the date format displayed in the grid</h3>\n<p>You can find this date format in the grid, <code>M/D/YY</code>.Â Here is an example of the date format displayed in the grid.</p>\n<div><a class=\"image\" href=\"\"> <img alt=\"/mediawiki/images/b/bc/datetimegrid.png\" border=\"0\" file=\"/mediawiki/images/b/bc/datetimegrid.png\" hspace=\"0\" src=\"../../../images/datetimegrid_3637251d.png\" style=\"width: 800px; height: 71px;\" vspace=\"0\"/> </a></div>\n<h2><a id=\"Custom_actions\" name=\"Custom_actions\" title=\"Custom actions\"></a>Custom actions</h2>\n<p>TheÂ <b>Custom actions</b>Â tab enables you to addÂ action buttons in Service Portal.</p>\n<p>To add a custom action in Service Portal, from theÂ main menu, selectÂ <b>Administration &gt; Configuration &gt; Service Portal Settings &gt; Configuration Settings &gt; Custome actions</b>Â and click <strong>+Â Add Action</strong>.</p>\n<p>To edit a custom action, click theÂ  <a class=\"image\" href=\"\"> <img alt=\"SM0911editcategorylink.png\" border=\"0\" data-file-height=\"56\" data-file-width=\"57\" file=\"/mediawiki/images/thumb/4/41/SM0911editcategorylink.png/30px-SM0911editcategorylink.png\" hspace=\"0\" src=\"../../../images/30px-SM0911editcategorylink_e313a900.png\" style=\"width:25px;height:24px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\"/> </a> Â icon.</p>\n<p>To delete a custom action, click theÂ  <a class=\"image\" href=\"\"> <img alt=\"/mediawiki/images/1/19/SMAXConfigSettingDeleteButton.png\" border=\"0\" file=\"/mediawiki/images/1/19/SMAXConfigSettingDeleteButton.png\" hspace=\"0\" src=\"../../../images/SMAXConfigSettingDeleteButton_b6c2fb70.png\" style=\"width:24px;height:23px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px;border:0px solid black;\" vspace=\"0\"/> </a> icon.</p>\n<h3><a id=\"Select_the_record_type\" name=\"Select_the_record_type\" title=\"Select the record type\"></a>Select the record type</h3>\n<p>Select the record type for the custom action. Currently, only the Request record type is available.</p>\n<h3><a id=\"Select_the_workflow\" name=\"Select_the_workflow\" title=\"Select the workflow\"></a>Select the workflow</h3>\n<p>Select the workflow of the record type from the following list.</p>\n<ul style=\"padding-left: 0px;\"><li style=\"margin-left: 28px; position: relative;\">Support</li><li style=\"margin-left: 28px; position: relative;\">HR Support</li><li style=\"margin-left: 28px; position: relative;\">Service</li></ul>\n<h3><a id=\"Select_the_manual_transition\" name=\"Select_the_manual_transition\" title=\"Select theÂ manual transition\"></a>Select theÂ manual transition</h3>\n<p>Select the manual transition in the workflow. If the next available transition in the workflow requiresÂ manualÂ intervention, theÂ custom action button appears on the form.</p>\n<h3>Specify the display name</h3>\n<p>Specify the display name of the action, which is displayed in Service Portal. You can find the action button on the <strong>Request details</strong> page and <strong>To-do</strong> card. You can click the action button to advance to the next phase.</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>If the condition defined in the manual transition isn't satisfied, an error message will be displayed in Service Portal when you perform the action.</div></div></div>\n<div>\n<h3><a id=\"Configure_popup_message_box\" name=\"Configure_popup_message_box\" title=\"Configure popup message box\"></a>Configure popup message box</h3>\n<div>\n<p xml:lang=\"EN-US\">If you want to display a popup window after a user clicks the action button, set <strong>Popup message box</strong>Â toÂ <strong>On</strong>Â and type the message text displayed as the title of the popup window. After enabling the popup window, you can further set theÂ <strong>Mandatory comments</strong>Â toÂ <strong>On</strong> to prompt users to add comments when they perform the action.</p>\n<p xml:lang=\"EN-US\">For example, you may use â€œEnter the reason you are accepting the solution:â€ as the message text in the popup window, and then enable the <strong>Mandatory comments</strong> option. In this case, after clicking the action button, the user has to add some comments in the popup window.Â </p>\n</div>\n<div>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>The <strong>Mandatory comments</strong> setting isn't applicable to the mobile app. In the mobile app, a comment is always mandatory.</div></div></div>\n</div>\n</div>\n<h2 class=\"displaytitle\"><a id=\"Portal_entity_filters\" name=\"Portal_entity_filters\" title=\"Portal entity filters\"></a>Portal entity filters</h2>\n<p>A portal entity filter is an expression that defines which records a self-service portal user can view for a specific entity type (record type) in the portal UI.</p>\n<p>Previously, to make an entity typeâ€™s data visible in the UI, administrators had to create a custom role, grant that role <em>viewÂ Â </em>permissions for the entity type, and then assign the role to the appropriate self-service portal users. However, granting view permissions also exposed that entity type toÂ EMS API calls.</p>\n<p>With portal entity filters, this is no longer required. You only need to define the appropriate filter expression for each entity type to make the required data accessible in the UI. This allows you to display data in the self-service portal without exposing that entity type through EMS API calls.</p>\n<p>In the portal UI, data visibility is already controlled by filters defined in rendering rules. Portal entity filters do not replace these rules, instead, they work alongside them. As a result, users only see the records that satisfy both the rendering-rule filters and the portal entity filter in the portal.</p>\n<h3 data-end=\"1330\" data-start=\"1290\"><a id=\"When_to_use_portal_entity_filters\" name=\"When_to_use_portal_entity_filters\" title=\"When to use portal entity filters\"></a>When to use portal entity filters</h3>\n<p>Use portal entity filters in the following situations:</p>\n<ul data-end=\"1643\" data-start=\"1387\" style=\"padding-left: 0px;\"><li data-end=\"1474\" data-start=\"1387\" style=\"margin-left: 28px; position: relative;\">\n<p data-end=\"1474\" data-start=\"1389\">When you want data to be visible in the UI but not accessible through EMS API calls</p>\n</li><li data-end=\"1546\" data-start=\"1475\" style=\"margin-left: 28px; position: relative;\">\n<p data-end=\"1546\" data-start=\"1477\">When you need to restrict visibility to specific subsets of records</p>\n</li><li data-end=\"1643\" data-start=\"1547\" style=\"margin-left: 28px; position: relative;\">\n<p data-end=\"1643\" data-start=\"1549\">When you want to avoid creating custom roles just to grant view permissions for an entity type</p>\n</li></ul>\n<h3 data-end=\"1681\" data-start=\"1650\"><a id=\"Important_considerations\" name=\"Important_considerations\" title=\"Important considerations\"></a>Important considerations</h3>\n<ul data-end=\"2362\" data-start=\"1683\" style=\"padding-left: 0px;\"><li data-end=\"1866\" data-start=\"1683\" style=\"margin-left: 28px; position: relative;\">\n<p data-end=\"1866\" data-start=\"1685\"><strong>Restrictive filters may block access:</strong> If you define an expression such as <code>entity.Id == 0</code>, users will not be able to view any records for that entity type in the portal UI.</p>\n</li><li data-end=\"2126\" data-start=\"1868\" style=\"margin-left: 28px; position: relative;\">\n<p data-end=\"2126\" data-start=\"1870\"><strong>Custom tab filters work together with portal entity filters:Â </strong>Custom tabs can define their own filter through theÂ <strong>Query expression</strong> field. When an entity type has both a custom tab Query expression and a portal entity filter, the system applies both filters. Only the records that satisfy both expressions are displayed in that custom tab.</p>\n</li><li data-end=\"2362\" data-start=\"2128\" style=\"margin-left: 28px; position: relative;\">\n<p data-end=\"2362\" data-start=\"2130\"><strong>UI visibility vs API access:</strong> If UI visibility is the only requirement, defining a portal entity filter is sufficient. If the entity type must also be available through API calls, grant view permissions in the usualÂ way.</p>\n</li></ul>\n<h3 data-end=\"2441\" data-start=\"2369\"><a id=\"Use_case_Using_portal_entity_filters_instead_of_view_permissions\" name=\"Use_case_Using_portal_entity_filters_instead_of_view_permissions\" title=\"Use case: Using portal entity filters instead of view permissions\"></a>Use case: Using portal entity filters instead of view permissions</h3>\n<p data-end=\"2582\" data-start=\"2443\">Previously, if you wanted to add a field of type <strong>Entity Link</strong>, for example, <strong>Incident</strong>, to a form such as <strong>Service Request</strong>, you had to:</p>\n<ol data-end=\"2742\" data-start=\"2584\" style=\"padding-left: 0px;\"><li data-end=\"2625\" data-start=\"2584\" style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p data-end=\"2625\" data-start=\"2587\">Add the Incident field to the Service Request<strong>Â </strong>form</p>\n</li><li data-end=\"2687\" data-start=\"2626\" style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p data-end=\"2687\" data-start=\"2629\">Create a custom role with view permission for Incident</p>\n</li><li data-end=\"2742\" data-start=\"2688\" style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p data-end=\"2742\" data-start=\"2691\">Assign that role to all self-service portal users</p>\n</li></ol>\n<p data-end=\"2917\" data-start=\"2860\">With portal entity filters, this process becomes simpler:</p>\n<ol data-end=\"3026\" data-start=\"2919\" style=\"padding-left: 0px;\"><li data-end=\"2960\" data-start=\"2919\" style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p data-end=\"2960\" data-start=\"2922\">Add the Incident field to the Service RequestÂ form</p>\n</li><li data-end=\"3026\" data-start=\"2961\" style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">\n<p data-end=\"3026\" data-start=\"2964\">Define a portal entity filter for the Incident entity type</p>\n</li></ol>\n<p data-end=\"3131\" data-start=\"3028\">For example, the following filter makes all records visible in the <strong>Incident </strong>dropdownÂ to all self-service portal users:</p>\n<p data-end=\"3182\" data-start=\"3133\"><strong>Entity type:</strong> Incident<br data-end=\"3161\" data-start=\"3158\"/>\n<strong>Query expression:</strong></p>\n<pre><code>entity.Id != null</code></pre>\n<h3><a id=\"Access_Portal_entity_filters\" name=\"Access_Portal_entity_filters\" title=\"Access Portal entity filters\"></a>Access Portal entity filters</h3>\n<p>Â From the main menu, selectÂ <strong>Administration </strong>&gt; <strong>Configuration </strong>&gt; <strong>Service Portal Settings</strong> &gt; <strong>Configuration Settings</strong> &gt; <strong>Portal entity filters</strong>. The <strong>Portal entity filters</strong> tab lets you view existing filters, add new filters, edit filters, and delete filters.</p>\n<h3><a id=\"Role\" name=\"Role\" title=\"Role\"></a>Role</h3>\n<div>Only tenant admins can add, edit, or delete portal entity filters.</div>\n<h3><a id=\"Add_a_portal_entity_filter\" name=\"Add_a_portal_entity_filter\" title=\"Add a portal entity filter\"></a>Add a portal entity filter</h3>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <strong>Add filter expression</strong>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Select the entity type you want to filter from the <strong>Entity type</strong> list.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the <strong>Query expression</strong> field, enter a valid expression. For example,Â the following expression for the <strong>Person </strong>entity type returns only users who belong to the same company as the user making the request.\n\t<pre><code>${current_user.Id == entity.Id || (current_user.Company != null &amp;&amp; current_user.Company == entity.Company)}\n</code></pre>\n\tFor guidance on writing expressions, see theÂ <a href=\"/doc/423/26.1/setconfig#Define_the_query_expression\" target=\"_blank\" title=\"Define the query expression\">Define the query expression</a>Â section earlier on this page, as the same syntax rules and functions applyÂ to portal entity filters.Â </li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <strong>Save</strong>.</li></ol>\n<h3><a id=\"Edit_a_portal_entity_filter\" name=\"Edit_a_portal_entity_filter\" title=\"Edit a portal entity filter\"></a>Edit a portal entity filter</h3>\n<div>Click the edit icon next to the filter you want to update, modify the expression, and save your changes.</div>\n<h3><a id=\"Delete_a_portal_entity_filter\" name=\"Delete_a_portal_entity_filter\" title=\"Delete a portal entity filter\"></a>Delete a portal entity filter</h3>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click the delete icon next to the filter you want to remove.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <strong>OK </strong>in the <strong>Delete item</strong> dialog box</li></ol>\n<h3><a id=\"Filter_expressions_examples\" name=\"Filter_expressions_examples\" title=\"Filter expressions examples\"></a>Filter expressions examples</h3>\n<div>You can use these examples as a reference to write your own expressions.</div>\n<h4><a id=\"Return_people_from_the_same_location_as_the_user\" name=\"Return_people_from_the_same_location_as_the_user\" title=\"Return people from the same location as the user\"></a>Return people from the same location as the user</h4>\n<p>Entity type<strong>:</strong> <strong>Person</strong><br/>\nQuery expression:</p>\n<pre><code>${current_user.Id == entity.Id || (current_user.Location != null &amp;&amp; current_user.Location == entity.Location)}</code></pre>\n<h4><a id=\"Return_the_user_s_company_and_its_related_companies\" name=\"Return_the_user_s_company_and_its_related_companies\" title=\"Return the userâ€™s company and its related companies\"></a>Return the userâ€™s company and its related companies</h4>\n<div>This example is relevant for Customer Service Management (CSM).</div>\n<p>Entity type:<strong> </strong><strong>Company</strong><br/>\nQuery expression:<br/>\nÂ </p>\n<pre><code>contain(union(current_user.Company, related_companies(current_user.Company, union('Forward:MSP','Backward:Partner'))), entity.Id) == true</code></pre>\n<h3><a id=\"Out_of_the_box_filters\" name=\"Out_of_the_box_filters\" title=\"Out-of-the-box filters\"></a>Out-of-the-box filters</h3>\n<div>Three portal entity filters are available out of the box. You can edit or delete them to match your use case.</div>\n<div>\n<table cellpadding=\"1\" cellspacing=\"1\">\n<thead>\n<tr>\n<th scope=\"col\">Entity type</th>\n<th scope=\"col\">Expression</th>\n<th scope=\"col\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Entitlement</td>\n<td><code>${contain(union(lookup_entitlements('Product', 'Create', null, current_user, current_user.Company)), entity.Id) == true}</code></td>\n<td>Returns the user's entitlements.</td>\n</tr>\n<tr>\n<td>Environment</td>\n<td><code>${contain(union(lookup_by_association('Environment', 'EnvironmentProductInstance', lookup_entitled_items('Product', 'Create', null, current_user, current_user.Company))), entity.Id) == true}</code></td>\n<td>Returns environments that host the product instances the user is entitled to create requests for.</td>\n</tr>\n<tr>\n<td>Product Instance</td>\n<td><code>${contain(union(lookup_entitled_items('Product', 'Create', null, current_user, current_user.Company)), entity.Id) == true}</code></td>\n<td>Returns the product instances the user is entitled to create requests for.</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>",
  "modifiedon": "2025-12-02 05:26:26"
}