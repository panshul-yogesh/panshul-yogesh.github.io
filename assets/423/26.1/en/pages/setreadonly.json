{
  "title": "Setting a closed record to read-only",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><div>\n<p class=\"mw-empty-elt\"></p>\n</div>\n<p>After a record has been closed, the user should not be able to update it. You can define a business rule to prevent further updates to the record.</p>\n<p>The following are several options for defining the rule:</p>\n<h2 class=\"mw-headline\" id=\"Option_1\">Option 1</h2>\n<ol>\n<li>From the <span class=\"SAW_VariablesMain_menu\">main menu</span>, select <b>Administration &gt; Configuration &gt; Studio &gt; Processes and Rules</b>.</li>\n<li>Select the <b>Request</b> record type.</li>\n<li>Select the <b>Done</b> metaphase.</li>\n<li>In <b>After change</b>, click <b>Add</b>, then select <b>Simple rule</b>.</li>\n<li>In <b>Validation rules</b>, select <b>Validate expression</b>.</li>\n<li>Click <b>OK</b>.</li>\n<li>Click <b>expression</b>, and enter <b>${current_update.PhaseId.IsChanged}</b>.</li>\n<li>Click <b>error message</b>, and enter <b>The record is closed and cannot be edited</b>.</li>\n<li>Click <b>Save</b>.</li>\n</ol>\n<p>In this case, the request cannot be updated after reaching the <b>Done</b> metaphase under any circumstances.</p>\n<h2 class=\"mw-headline\" id=\"Option_2\">Option 2</h2>\n<ol>\n<li>From the <span class=\"SAW_VariablesMain_menu\">main menu</span>, select <b>Administration &gt; Configuration &gt; Studio &gt; Processes and Rules</b>.</li>\n<li>Select the <b>Request</b> record type.</li>\n<li>Select the <b>Done</b> metaphase.</li>\n<li>In <b>After change</b>, click <b>Add</b>, then select <b>Simple rule</b>.</li>\n<li>In <b>Validation rules</b>, select <b>Validate expression</b>.</li>\n<li>Click <b>OK</b>.</li>\n<li>Click <b>expression</b>, and enter <b>${current_update.PhaseId.IsChanged || current_user.IsPermitted('EMS-Admin-Template(entityType=Request)')}</b>.</li>\n<li>Click <b>error message</b>, and enter <b>The record is closed and cannot be edited</b>.</li>\n<li>Click <b>Save</b>.</li>\n</ol>\n<p>In this case, the request cannot be updated after reaching the <b>Done</b> metaphase unless the current user has Admin permission.</p>\n<h2 class=\"mw-headline\" id=\"Option_3\">Option 3</h2>\n<ol>\n<li>From the <span class=\"SAW_VariablesMain_menu\">main menu</span>, select <b>Administration &gt; Configuration &gt; Studio &gt; Processes and Rules</b>.</li>\n<li>Select the <b>Request</b> record type.</li>\n<li>Select the <b>Done</b> metaphase.</li>\n<li>In <b>After change</b>, click <b>Add</b>, then select <b>Simple rule</b>.</li>\n<li>In <b>Validation rules</b>, select <b>Validate expression</b>.</li>\n<li>Click <b>OK</b>.</li>\n<li>Click <b>expression</b>, and enter <b>${current_update.PhaseId.IsChanged || current_user.IsPermitted('EMS-Admin-Template(entityType=Request)') || (now() - entity.CloseTime)&lt;3600000)}</b>.</li>\n<li>Click <b>error message</b>, and enter <b>The record is closed and cannot be edited</b>.</li>\n<li>Click <b>Save</b>.</li>\n</ol>\n<p>In this case, the request cannot be updated after reaching the <b>Done</b> metaphase unless the current user has Admin permission or the request was closed within the last hour.</p>\n<p class=\"mw-empty-elt\"></p>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}