{
  "title": "SMA Doctor doesn't work on OpenShift",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>The check_resource.py script in SMA Doctor doesn't work when SMA is deployed on OpenShift. </p>\n<h2>Cause</h2>\n<p>The check_resource.py script isn't compatible with oc (OpenShift commands).</p>\n<h2>Solution</h2>\n<p>Perform the following steps:</p>\n<ol>\n<li>Copy oc (OpenShift commands) from the VM on which OpenShift is installed to the NFS share folder &lt;data-volume&gt;/toolkit. An example of the folder is: /vols/itom/data-volume&gt;/toolkit/.</li>\n<li>Change the ownership of this folder:\n\t<pre><code>chown -R &lt;SYSTEM_USER_ID&gt;:&lt;SYSTEM_GROUP_ID&gt; *\n</code></pre>\n<p>Replace &lt;SYSTEM_USER_ID&gt; and &lt;SYSTEM_GROUP_ID&gt; with the values that you specify when configuring NFS volumes. The two values must be either 1999 (default) or a value between 100000 and 2000000000.</p>\n</li>\n<li>Refer to <a href=\"/doc/423/26.1/tookitcontainer#Prepare_scripts_on_the_runtime_platform\" title=\"Prepare scripts on the runtime platform\">Prepare scripts on the runtime platform</a> to upload SMA Doctor to the SMA Support Assistant.</li>\n<li>Enter the container with the following command and find the check_resource.py script under the /toolkit/xdoctor/diagnostic-tool/check_resources folder:\n\t<pre><code>​\nkubectl exec -it $( kubectl get pods -n $( kubectl get ns |grep itsma | cut -f1 -d \" \") |grep itom-toolkit | awk '{print $1}' | head -1) bash -n $( kubectl get ns |grep itsma | cut -f1 -d \" \") -c itom-toolkit\n\n</code></pre>\n</li>\n<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">M</span></span>odify the check_resource.py script as follows:<span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"> </span></span>\n<p>From:</p>\n<pre><code>'top_nodes':        {'cache': 1,    'type':'list', 'cmd': 'kubectl top nodes'},\n'top_pods':         {'cache': 1,    'type':'list', 'cmd': 'kubectl top pods --all-namespaces'},\n</code></pre>\n<p>To:</p>\n<pre><code> 'top_nodes':        {'cache': 1,    'type':'list', 'cmd': '/logs/oc top nodes'},\n 'top_pods':         {'cache': 1,    'type':'list', 'cmd':  '/logs/oc adm top pods --all-namespaces' '},\n</code></pre>\n</li>\n<li>Save the changes. </li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}