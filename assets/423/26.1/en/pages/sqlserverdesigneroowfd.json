{
  "title": "Deploy a Microsoft SQL server database for OO Workflow Designer",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>To deploy OO Workflow Designer using Microsoft SQL Server, you must have an existing SQL Server database service. If you need to create a new database service, see the relevant documentation provided by Microsoft because this information isn't included in this section. However, this section contains recommendations for the SQL Server configuration. It's also recommended to use the SQL Server Agent service to comfortably schedule index maintenance jobs.</p>\n<h2 id=\"Workflow_for_Microsoft_SQL_server_deployment\">Workflow for Microsoft SQL Server deployment</h2>\n<p>To deploy OO Workflow Designer using Microsoft SQL Server, perform the following steps:</p>\n<ol>\n<li>Review sizing guidelines.</li>\n<li>Review System requirements for Microsoft SQL server database.</li>\n<li>Configure Microsoft SQL Server.</li>\n<li>Manually create an OO Workflow Designer database on Microsoft SQL Server.</li>\n<li>(Optional) Set up Windows authentication. This step is only relevant if you are using Windows authentication instead of SQL Server authentication.</li>\n</ol>\n<h2 id=\"Review_sizing_guidelines\">Review sizing guidelines</h2>\n<p>For information to review sizing guidelines, see <a href=\"/doc/423/26.1/setupdatabaseoowfd\" title=\"Operations_Orchestration:2022.05/SetupDatabaseOO\">Set up database environment for OO Workflow Designer</a> topic.</p>\n<h2 id=\"System_requirement_for_Microsoft_SQL_server\">Review system requirements for Microsoft SQL server database</h2>\n<p>For information to review system requirements for Microsoft SQL Server database, see <a href=\"/doc/423/26.1/supportmatrixoowfd\">System requirements</a> topic. Also, see the official Microsoft documentation for supported platforms.</p>\n<h3 id=\"Examples_of_tested_deployments\">Language support</h3>\n<p>In Microsoft SQL Server, unlike other databases, the OO Workflow Designer database doesn't use Unicode collation. Use one of the following collations depending on your OO Workflow Designer installation</p>\n<table>\n<tbody>\n<tr>\n<th>Language</th>\n<th>Database Collation</th>\n</tr>\n<tr>\n<td>English</td>\n<td>SQL_Latin1_General_CP1_CS_AS</td>\n</tr>\n<tr>\n<td>Japanese</td>\n<td>Japanese_Unicode_CS_AS</td>\n</tr>\n<tr>\n<td>Simplified Chinese</td>\n<td>Chinese_Simplified_Stroke_Order_100_CS_AS</td>\n</tr>\n</tbody>\n</table>\n<p>When you create an MS SQL database with a case-sensitive collation, object names such as tables and keys become case-sensitive as well. For example, for the <code>MY_TABLE_STEP_LOG_BINDINGS</code> table, a command such as <code>SELECT * FROM my_table_step_log_bindings</code> is seen as using an invalid object name.</p>\n<h2 id=\"Configure_Microsoft_SQL_server\">Configure Microsoft SQL server</h2>\n<p>This topic contains information on Microsoft SQL Server and database configuration settings. You can install an OO Workflow Designer database in any SQL Server environment including clustered environments. Legend:</p>\n<ul>\n<li><b>Mandatory</b> configuration options/values appear in <b>bold</b> text.</li>\n<li><i>Recommended</i> configuration options/values appear in <strong><i>bold italic </i></strong>font.</li>\n<li>Supported configuration options/values appear in general font, and may show as a comma separated list.</li>\n</ul>\n<table>\n<tbody>\n<tr>\n<th colspan=\"2\">Microsoft SQL Server databases</th>\n</tr>\n<tr>\n<th colspan=\"2\">Server Options/Features</th>\n</tr>\n<tr>\n<th>Configuration Item</th>\n<th>Supported Configuration Options</th>\n</tr>\n<tr>\n<td>Server Configuration Options</td>\n<td>Defaults, unless instructed otherwise</td>\n</tr>\n<tr>\n<td>Instances</td>\n<td>Default, Single</td>\n</tr>\n<tr>\n<td>Authentication Mode</td>\n<td>Mixed, Windows¹</td>\n</tr>\n<tr>\n<td>Full Text Search</td>\n<td>(Not required for OO Workflow Designer)</td>\n</tr>\n</tbody>\n</table>\n<p>¹ At the moment, the OO Workflow Designer installer supports only SQL authentication. Windows authentication can be configured afterward.</p>\n<table>\n<tbody>\n<tr>\n<th colspan=\"4\">Microsoft SQL Server databases</th>\n</tr>\n<tr>\n<th colspan=\"4\">Instance/Server Options</th>\n</tr>\n<tr>\n<th></th>\n<th>Mandatory</th>\n<th>Recommended</th>\n<th>Supported</th>\n</tr>\n<tr>\n<td>Server Collation</td>\n<td></td>\n<td><b>SQL_Latin1_General_CP1_CS_AS</b></td>\n<td>Any Collation</td>\n</tr>\n<tr>\n<td>Network Libraries</td>\n<td>Server: <b>TCP/IP</b> Client: <b>TCP/IP</b></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>Concurrent Connections</td>\n<td><b>&gt;= 800</b></td>\n<td><b>0</b> <i>(unlimited)</i></td>\n<td></td>\n</tr>\n<tr>\n<td>Max Server Memory</td>\n<td><b>&gt; 4GB</b></td>\n<td><b>2,147,483,647</b> <i>(default, unlimited) Assign 4-12 GB depending on system scale</i></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<table>\n<tbody>\n<tr>\n<th colspan=\"4\">Microsoft SQL Server databases</th>\n</tr>\n<tr>\n<th colspan=\"4\">Database Options</th>\n</tr>\n<tr>\n<th></th>\n<th>Mandatory</th>\n<th>Recommended</th>\n<th>Supported</th>\n</tr>\n<tr>\n<td>Collation</td>\n<td><b>Any collation listed in the “<i>Language support</i>” in <i>System requirements for Microsoft SQL server</i> topic.</b></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>Recovery Model</td>\n<td></td>\n<td><b>Full</b></td>\n<td>Simple, Full</td>\n</tr>\n<tr>\n<td>Allow Snapshot Isolation</td>\n<td>True</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>Is Read Committed Snapshot On</td>\n<td>True</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>Auto Shrink</td>\n<td>False</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>Auto Create Statistics</td>\n<td>True</td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p>SQL Server doesn't use <strong>READ-COMMITTED</strong> transaction isolation by default. It's mandatory to set the <b>Allow Snapshot Isolation</b> and <b>Is Read Committed Snapshot On</b> flags. OO Workflow Designer fails to operate using any other type of transaction isolation.</p>\n<h2 id=\"Manually_create_an_OO_database_on_Microsoft_SQL_server\">Manually create an OO Workflow Designer database on a Microsoft SQL server</h2>\n<p>The OO Workflow Designer installation wizard gives the following options during installation:</p>\n<ul>\n<li>Create a new OO Workflow Designer database, user, and password on your chosen database server or instance.</li>\n<li>Connect to an existing OO Workflow Designer database on your chosen database server or instance.</li>\n</ul>\n<h3>Create an OO Workflow Designer database using the OO Workflow Designer installation wizard</h3>\n<table>\n<tbody>\n<tr>\n<th>Role</th>\n<th>Location</th>\n<th>Privileges required</th>\n</tr>\n<tr>\n<td>System administrator, Database administrator, or any user</td>\n<td>Database server using the installation wizard</td>\n<td>Data Definition Language (DDL) and Data Manipulation Language (DML)</td>\n</tr>\n</tbody>\n</table>\n<p>To create the OO Workflow Designer database:</p>\n<ol>\n<li>In the <strong>Database configuration</strong> screen of the installation wizard, select <strong>Create the database/schema </strong>option.</li>\n<li>Besides the database connection details, you need to enter the desired <strong>username</strong>, <strong>password,</strong> and <strong>schema name</strong> for the Workflow Designer database.</li>\n<li>For the database username and password, enter the user credentials that have the Create Database privileges. For example, <b>sysadmin </b>or<b> sa</b>.</li>\n</ol>\n<p>At this point, only the database, login, and user are created. Objects such as tables and indexes get created when OO Workflow Designer starts for the first time after installation.</p>\n<p>To connect to an existing OO Workflow Designer database:</p>\n<ol>\n<li>Make sure the database name and user are already created on the desired database server or instance.</li>\n<li>In the <strong>Database configuration</strong> screen of the installation wizard, select <strong>Connect to an existing database/schema </strong>option.</li>\n<li>Enter the existing database name and user credentials to establish a connection. For example, <b>oodesignerdb </b>and<b> oodesignerdbuser</b>.</li>\n</ol>\n<h3>Create OO Workflow Designer database using the Microsoft SQL database server</h3>\n<table>\n<tbody>\n<tr>\n<th>Role</th>\n<th>Location</th>\n<th>Privileges required</th>\n</tr>\n<tr>\n<td>Database administrator or any user</td>\n<td>Database server using the installation wizard</td>\n<td>DDL and DML</td>\n</tr>\n</tbody>\n</table>\n<p>If you're an authorized user with elevated privileges to create a new OO Workflow Designer database but don't wish to create an OO database using the installation wizard. Then you may request your organization's database administrator to create an OO Workflow Designer database and the user name of your choice. After the database administrator creates the OO Workflow Designer database and user for you with the required permission, you can then connect to an existing database using basic privileges.</p>\n<p>Review the following general notes for a database administrator:</p>\n<ul>\n<li>Members of the <strong>sysadmin</strong> server roles automatically have to <b>CREATE DATABASE</b> permission and are also mapped to <strong>dbo</strong> in all databases.</li>\n<li>Perform the create database procedures <em>only</em> if you are an experienced Microsoft SQL Server database administrator.</li>\n<li>If you prefer to use the database creation wizard/GUI, make sure you select all options that correspond with the T-SQL code presented below. For example, make sure you set <b>Allow Snapshot Isolation</b> to <strong>TRUE</strong> under the <b>Options</b> page/<b>Other Options</b> pane/<b>Miscellaneous</b> tab in the <strong>New Database</strong> dialog box.<br/>\n\tSelecting a specific collation also means that an OO Workflow Designer system that uses SQL Server is limited to the set of languages supported by that specific collation. For example, if you use the <b>SQL_Latin1_General_CP1_CS_AS</b> collation, English, German, and Spanish characters may be used, but Japanese characters may not. If you use <b>Japanese_Unicode_CS_AS</b>, French accent characters won't display correctly. For the complete specification of each collation, see the Microsoft SQL Server documentation.</li>\n<li>Not all database creation options are specified—only those that differ from the default value. When in doubt, use default values.</li>\n</ul>\n<p>To create a database on the Microsoft SQL server:</p>\n<ol>\n<li>You can use the create database scripts from:\n\t<ol start=\"1\">\n<li>The downloaded and extracted installation zip at: <code>&lt;oo_version&gt;\\config\\sql\\Designer\\MS-SQL</code></li>\n<li>The downloaded and extracted database scripts from <a href=\"https://marketplace.microfocus.com/itom/content/oo-database-creation\">ITOM Marketplace</a> at <code>OO_Database_Creation\\Designer\\MS-SQL</code></li>\n</ol>\n</li>\n<li>Log in to Microsoft SQL Server using <code><strong>sa</strong></code> or any other login with a <b>sysadmin</b> role or the <b>CREATE DATABASE</b> permission. </li>\n<li>Navigate to the create database script from the extracted zip packages at: <code>&lt;oo_version&gt;\\config\\sql\\Designer\\MS-SQL</code>, or <code>OO_Database_Creation\\Designer\\MS-SQL</code></li>\n<li>Edit and run the create database script <code>mssql_create_wd_db.sql </code>and then verify that the database, login, and user were created successfully. You may have to adapt the script parameters to match your environment. </li>\n<li>(Optional) To verify that the database objects can be created by the new login and user:\n\t<ol start=\"1\">\n<li>Connect to the Microsoft SQL database server.</li>\n<li>Log in using the OO Workflow Designer’s newly created login role credentials.</li>\n<li>Navigate to the database test script from the extracted zip packages at: <code>&lt;oo_version&gt;\\config\\sql\\Designer\\MS-SQL</code>, or <code>OO_Database_Creation\\Designer\\MS-SQL</code></li>\n<li>Run the database test script <code>mssql_create_test_table.sql </code>and then verify that the script ran correctly without any errors or warnings.</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"Additional_guidelines_for_Microsoft_SQL_server\">Additional guidelines for Microsoft SQL server</h2>\n<p>This topic contains additional guidelines relevant to OO Workflow Designer deployment on Microsoft SQL Server.</p>\n<h3 id=\"Use_Windows_authentication_to_access_Microsoft_SQL_server_databases\">Configure OO Workflow Designer to work with Windows authentication</h3>\n<p>Unless configured otherwise, OO Workflow Designer uses Microsoft SQL Server authentication to access Microsoft SQL Server databases. Note that the OO Workflow Designer installer currently doesn't support Windows authentication usage during the installation. However, you can configure Windows authentication once OO Workflow Designer is installed.</p>\n<p>To enable OO Workflow Designer to use Windows authentication to access a Microsoft SQL database, you must perform the required setup steps on:</p>\n<ul>\n<li>The service</li>\n<li>The database</li>\n</ul>\n<p>If you have a deployment where you used the option \"<strong>Create IDM</strong>\" for authentication, you can also configure the IDM service to connect to the IDM database using Windows Authentication. If you use Workflow Designer connecting to another installed IDM service ( “<strong>IDM connect</strong>” mode), then you can skip the steps that are documented for IDM configuration.</p>\n<p>You must ensure the following database configurations are completed:</p>\n<ul>\n<li>The Windows user is added and able to login to the SQL Server</li>\n<li>This user is made as an owner of the databases that you wish to configure with Windows Authentication (OO Workflow Designer and IDM)</li>\n<li>Set <code>dbo</code> as the default schema on Workflow Designer and IDM databases for that Windows user</li>\n</ul>\n<p>You must follow these configuration steps for OO Workflow Designer and IDM (if created):</p>\n<ol>\n<li>Copy the <code>sqljdbc_auth.dll</code> to the installation path of the OO Workflow Designer in the designer/bin. You can download the <code>sqljdbc_auth.dll</code> from the Microsoft site through the JDBC package driver version 7.4.1. For more details, see the Microsoft JDBC documentation.</li>\n<li>Configure the Workflow Designer service to run under the same Windows account that you set up to own the database.</li>\n<li>Back up your current database.properties file located under <code>&lt;OO Workflow Designer installation&gt;/designer/conf</code> and edit the file by changing only the relevant parameters to match the following example:\n\t<p>For the <code>db.username</code>, the backslashes must be escaped <code>(\\\\</code>)</p>\n<p>For the <code>db.password</code>, leave it as is, since the credentials will be used from the service.</p>\n<p>When copying scripts, note that you may need to remove redundant line breaks from the copied version.</p>\n<pre>db.username=[DOMAIN_NAME]\\\\[USERNAME]\njdbc.url=jdbc\\:sqlserver\\://[DB_HOSTNAME]\\:[PORT];databaseName\\=[DB_NAME];sendStringParametersAsUnicode\\=true;<strong>integratedSecurity\\=true</strong>\n</pre>\n</li>\n<li>\n<p>Additionally, for the IDM service (created with Workflow Designer), perform the following steps:</p>\n<ol start=\"1\">\n<li>Backup and edit the idm configuration file named applicationContext.properties, located under <code>&lt;Designer installation&gt;/designer/tomcat/webapps/idm-service/WEB-INF/spring,</code> and change only the relevant parameters to match:\n\n\t\t<pre>idm.persistence.connection.username=[DOMAIN_NAME]\\\\[USERNAME]\nidm.persistence.connection.url - add to the existing url the parameter <strong>;integratedSecurity\\=true</strong></pre>\n</li>\n<li>\n<p>Backup to another folder and then delete the 2 JDBC drivers from the <code>idm-service</code>: <code>mssql-jdbc-7.0.0.jre8.jar</code> and <code>mssql-jdbc-7.4.1.jre8.jar,</code> which are located under the folder <code>&lt;</code>Designer Installation<code>&gt;/</code>designer<code>/tomcat/webapps/idm-service/WEB-INF/lib</code>.</p>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"Set_up_Windows_authentication\">Set up a database connection using Windows authentication</h2>\n<p>This topic contains details on how to configure OO Workflow Designer to use Windows authentication to access Microsoft SQL Server databases.</p>\n<p>Note that the OO Workflow Designer installer currently doesn't support using Windows authentication during the OO installation, however, Windows authentication can be set up once OO is installed.</p>\n<h3 id=\"Use_Windows_authentication_to_access_Microsoft_SQL_server_databases\">Configure OO Workflow Designer to work with Windows authentication</h3>\n<p>You can enable OO Workflow Designer to use Windows authentication instead of Microsoft SQL Server authentication.</p>\n<p>If you have a deployment where you used the option \"<strong>Create IDM</strong>\" for authentication, you can also configure the IDM service to connect to the IDM database. Similarly, you can do this for Insights service, if enabled.<br/>\nMake sure the following configuration is complete on the database:</p>\n<ul>\n<li>make sure the Windows user is added and can log in to the SQL Server</li>\n<li>make this user the owner of the databases you wish to configure with Windows Authentication (OO, IDM, and Insights)</li>\n<li>set <code>dbo</code> as the default schema on OO Workflow Designer databases for the Windows user</li>\n</ul>\n<p>The following configuration steps must be followed for OO Workflow Designer services:</p>\n<ol>\n<li>Copy the <code>sqljdbc_auth.dll</code> to the installation path of the OO Workflow Designer to the following locations: <code>central/bin and insights/bin</code> (if Insights service is enabled)<br/>\n\tThe <code>sqljdbc_auth.dll</code> can be downloaded from the Microsoft site through the JDBC package driver version 7.4.1. For more details, see the Microsoft JDBC documentation.</li>\n<li>Configure the OO Workflow Designer service to run under the same Windows account that you set up to own the database.</li>\n<li>Back up your current database.properties file located under <code>&lt;OO installation&gt;/designer/conf</code> and edit the file by changing only the relevant parameters to match the following example:\n\t<pre>db.username=[DOMAIN_NAME]\\\\[USERNAME]\njdbc.url=jdbc\\:sqlserver\\://[DB_HOSTNAME]\\:[PORT];databaseName\\=[DB_NAME];sendStringParametersAsUnicode\\=true;integratedSecurity\\=true</pre>\n<p>For the <code>db.username</code>, the backslashes must be escaped <code>(\\\\</code>)<br/>\n\tFor the <code>db.password</code>, leave it as is, since the credentials will be used from the service.</p>\n<p>When copying scripts, note that you may need to remove redundant line breaks from the copied version.</p>\n</li>\n<li> Additionally, for the IDM service (created with OO Workflow Designer), perform the following steps:\n\t<ol start=\"1\">\n<li>Backup and edit the IdM configuration file named <code>applicationContext.properties</code>, located under <code>&lt;OO </code>Workflow Designer Installation<code>&gt;/designer/tomcat/webapps/idm-service/WEB-INF/spring</code> and change only the relevant parameters to match:\n\t\t<pre>idm.persistence.connection.username=[DOMAIN_NAME]\\\\[USERNAME]\n\nidm.persistence.connection.url - add to the existing url the parameter <strong>;integratedSecurity\\=true</strong></pre>\n</li>\n<li>Backup to another folder and then delete the 2 JDBC drivers from the <code>idm-service</code>: <code>mssql-jdbc-7.0.0.jre8.jar</code> and <code>mssql-jdbc-7.4.1.jre8.jar,</code> which are located under the folder<br/>\n<code>&lt;OO </code>Workflow Designer Installation<code>&gt;/designer/tomcat/webapps/idm-service/WEB-INF/lib</code>.</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"Configure_OO_Workflow_Designer_to_work_with_Always_On\">Configure OO Workflow Designer to work with Always On</h3>\n<p>OO Workflow Designer connects to SQL Server databases using the Microsoft JDBC 7.4.1 connector.</p>\n<p>The following is an example of how to format JDBC URL to connect to an <strong>Always On</strong> cluster:</p>\n<pre>jdbc.url=jdbc\\:sqlserver\\://[AG-NET-NAME]\\:[port];instanceName\\=[NAMED-INST-NAME];\ndatabaseName\\=[DB-NAME];multiSubnetFailover\\=true;applicationIntent\\=ReadWrite;\nsendStringParametersAsUnicode\\=true</pre>\n<p>The <b>multiSubnetFailover</b> and <b>applicationIntent</b> properties are added to allow more complex behaviors. </p>\n<p>As OO Workflow Designer requires a single point of contact, an Availability Group Listener (AG listener) must exist in the High Availability setup.</p>\n<p>The Workflow Designer’s database connection is defined by a single URL - containing a single hostname and interfaces with the AG listener to connect to the availability group primary replica (a <code>READ-WRITE</code> capable instance).</p>\n<p>In the case of a database failover scenario, while database connectivity is lost, OO Workflow Designer will repeatedly attempt to connect to the database until a new <code>READ-WRITE</code> capable instance accepts the connection.</p>\n<p>The redirection of the configured database hostname to a different IP address should be done by the AG Listener and the cluster environment.</p>\n<p>The <strong>Multi-Subnet Failover</strong> scenarios in conjunction with <strong>SQL Server Always On</strong> cluster weren't certified with OO Workflow Designer.</p>\n<p>For additional information and connection options, refer to the Microsoft JDBC documentation.</p>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}