{
  "title": "Change database user password",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>To change the passwords of the PostgreSQL database users that you have created for the UD/UCMDB deployment, follow these steps:</p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\"><b>Note:</b> You can only change and synchronize database passwords if you use an external PostgreSQL database. If you use the internal database or an external Oracle database,  changing passwords for the UD/UCMDB deployment users is not supported.</div>\n</div>\n<ol>\n<li>\n<p>Stop the UD/UCMDB deployment.</p>\n<pre>$CDF_HOME/scripts/cdfctl.sh runlevel set -l DOWN -n &lt;namespace&gt;</pre>\n</li>\n<li>\n<p>Change the passwords as needed in your PostgreSQL database. For example, you can run the following commands:</p>\n<ul>\n<li>\n<p>For standalone UD/UCMDB:</p>\n<pre>alter user ucmdb password '&lt;new UCMDB password&gt;';\nalter user ucmdb_autopass password '&lt;new Autopass password&gt;';\nalter user ucmdb_idm password '&lt;new IdM password&gt;';\nalter user ucmdb_probe password '&lt;new probe password&gt;';\n</pre>\n</li>\n<li>\n<p>For UD/UCMDB as the next deployment of SMAX:</p>\n<pre>alter user ucmdb password '&lt;new UCMDB password&gt;';\nalter user ucmdb_autopass password '&lt;new Autopass password&gt;';\nalter user ucmdb_probe password '&lt;new probe password&gt;';\n</pre>\n</li>\n</ul>\n</li>\n<li>\n<p>Run the following command to update <strong>cms-secret</strong>.</p>\n<ul>\n<li>\n<p>For standalone UD/UCMDB:</p>\n<pre>kubectl patch secret cms-secret -p '{\"data\":{\"ucmdb_server_db_password\":\"'$(echo -n '&lt;new UCMDB password&gt;'|base64 -w0)'\",\"autopass_db_password\":\"'$(echo -n '&lt;new Autopass password&gt;'|base64 -w0)'\",\"idm_db_password\":\"'$(echo -n '&lt;new IdM password&gt;'|base64 -w0)'\",\"ucmdb_probe_pg_probe_password\":\"'$(echo -n '&lt;new probe password&gt;'|base64 -w0)'\"}}' -n &lt;namespace&gt;\n</pre>\n</li>\n<li>\n<p>For UD/UCMDB as the next deployment of SMAX:</p>\n<pre>kubectl patch secret cms-secret -p '{\"data\":{\"ucmdb_server_db_password\":\"'$(echo -n '&lt;new UCMDB password&gt;'|base64 -w0)'\",\"autopass_db_password\":\"'$(echo -n '&lt;new Autopass password&gt;'|base64 -w0)'\",\"ucmdb_probe_pg_probe_password\":\"'$(echo -n '&lt;new probe password&gt;'|base64 -w0)'\"}}' -n &lt;namespace&gt;\n</pre>\n</li>\n</ul>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\"><b>Note:</b> As the shell command contains sensitive information, we recommend that you clean the shell history after finishing the password synchronization.</div>\n</div>\n</li>\n<li>\n<p>Start the UD/UCMDB deployment.</p>\n<pre>$CDF_HOME/scripts/cdfctl.sh runlevel set -l UP -n &lt;namespace&gt;</pre>\n</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}