{
  "title": "How to tailor custom synchronization through OPB",
  "content": "<div class=\"mw-parser-output\">\n<div></div>\n<p>Custom synchronization allows you to tailor your customization.</p>\n<h2 class=\"mw-headline\" id=\"Customize_an_existing_mapping_file\"><a id=\"Customize_an_existing_mapping_file\" name=\"Customize_an_existing_mapping_file\" title=\"Customize an existing mapping file\"></a>Customize an existing mapping file</h2>\n<p>This topic shows you how to add a new attribute to the integration, including the TQL query, and Push Adapter Mapping. It enables the integration to push the attribute to Service Management.</p>\n<h3><a id=\"Step_1_Add_the_new_attribute_to_an_existing_Service_Management_TQL_query_layout\" name=\"Step_1_Add_the_new_attribute_to_an_existing_Service_Management_TQL_query_layout\" title=\"Step 1: Add the new attribute to an existing Service Management TQL query layout\"></a>Step 1: Add the new attribute to an existing Service Management TQL query layout</h3>\n<p>In this step, you add the attribute of a specific CI to the integration TQL query, so that you can use the attribute and value in the mapping.</p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the UCMDB instance, navigate to <b>Modeling</b> &gt; <b>Modeling Studio</b>&gt; <b>Resources</b> &gt; <b>Root</b> &gt; <b>Integration</b> &gt; <b>Service Management Automation</b> &gt; <b>SACM</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Select the TQL query containing the CI to which you want to add a new attribute, and double-click.<br/>\n\tThe query is displayed in the main pane.\n\t<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<p><br/>\n\tTQLs with the <b>MANUAL_&lt;<i>tenant ID</i>&gt;</b> prefix are TQLs for custom synchronization. Do not change any TQLs without this prefix.</p>\n</div></div></div>\n<p>For example, if you are adding a new attribute <b>data_note</b> to the Actual Service CI, double-click the <b>MANUAL_</b><em><strong>&lt;tenant ID&gt;_</strong></em><b>SACM Service Push</b> query.</p>\n<ol start=\"1\" style=\"padding-left: 0px;\"><li style=\"--number-width: 21px; --number-spacing: 25px; margin-left: 49px; position: relative;\">Select the specific CI for which you want to add an attribute, right-click and select Query Node Properties. The Query Node Properties window is displayed.</li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">Go to the <b>Element Layout</b> tab.</li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">Move the new attribute to the <b>Specific Attributes</b> box and click <b>OK</b>.</li><li style=\"--number-width: 25px; --number-spacing: 29px; margin-left: 53px; position: relative;\">Save the query.</li></ol>\n</li></ol>\n<h3><a id=\"Step_2_Add_the_new_attribute_to_the_corresponding_push_adapter_mapping\" name=\"Step_2_Add_the_new_attribute_to_the_corresponding_push_adapter_mapping\" title=\"Step 2: Add the new attribute to the corresponding push adapter mapping\"></a>Step 2: Add the new attribute to the corresponding push adapter mapping</h3>\n<p>In this step, you take the value from the TQL result, and remodel it to the Service Management data model.</p>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Go to <b>Data Flow Management</b> &gt; <b>Adapter Management</b> &gt; <b>Packages</b> &gt; <b>manualPushAdapter_&lt;<i>tenant ID</i>&gt;_</b><b>Configuration Files</b>, and select the XML file corresponding to the CI to which you have added a new attribute.<br/>\n\tFor example, if you are adding a new attribute <b>data_note</b> to the Actual Service CI, select the <b>pushMappingMaasService.xml</b>file.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Go to the <b>source_ci_type</b> XML tag for the element that matches the name of the element in the TQL you edited.<br/>\n\tContinuing the previous example, you go to:<br/>\n\t&lt;source_ci_type query-element-name=\"ActualService\"&gt;</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Add the target mapping to hold the value of the new attribute.<br/>\n\tContinuing the previous example:<br/>\n\t&lt;target_mapping datatype=\"STRING\" name=\"data_note\" value=\"Root['data_note']\"/&gt;</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Save</b>.</li></ol>\n<h3><a id=\"Step_3_Create_a_job_with_the_updated_TQL_query\" name=\"Step_3_Create_a_job_with_the_updated_TQL_query\" title=\"Step 3: Create a job with the updated TQL query\"></a>Step 3: Create a job with the updated TQL query</h3>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Go to <b>Data Flow Management &gt; Integration Studio</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Create an Integration Point with Service Management.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the Integration Jobs tab, click <b>New Integration Job</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Insert a job name in the <b>Name</b> field.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Add Query</b>, and choose the updated query.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>OK</b>.\n\t<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<p><br/>\n\tEven if a job has been created for the TQL query, you need to remove the existing job and re-create it after the TQL query is updated. This is to ensure that the changes are reflected in the job.</p>\n</div></div></div>\n</li></ol>\n<h3><a id=\"Step_4_Run_the_job\" name=\"Step_4_Run_the_job\" title=\"Step 4: Run the job\"></a>Step 4: Run the job</h3>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click on the job created.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Full Synchronization</b> or <b>Request full sync</b> in Service Management.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Wait for the job to complete; click <b>Refresh</b> multiple times as needed until the job is completed.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Make sure that the status is <b>Succeeded</b> and click <b>Sync now</b> on Service Management.</li></ol>\n<h3><a id=\"Step_5_View_the_results\" name=\"Step_5_View_the_results\" title=\"Step 5: View the results\"></a>Step 5: View the results</h3>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Go to Service Management.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Validate that the new attribute, pushed in the previous steps, is displayed.</li></ol>\n<h2 class=\"mw-headline\"><a id=\"Synchronize_data_domains\" name=\"Synchronize_data_domains\" title=\"Synchronize data domains\"></a>Synchronize data domains</h2>\n<p class=\"mw-headline\">By default, there is no existing data domain attribute in UCMDB. However, you can create a new attribute in UCMDB and have it synchronized to the Service Management data domain field by customizing the mapping file as described above. </p>\n<div class=\"mw-headline\">For example, to allow for data domain synchronization between Service Management <strong>Device </strong>records and UCMDB <strong>Node </strong>CIs, create a <strong>List of string</strong> attribute for the <strong>Node </strong>CI type, and then follow the five steps above. Be aware that in step 2 &gt; step c, the syntax needs to be slightly different, which looks like below:<br/>\n<br/>\n<code>&lt;target_mapping datatype=\"STRING\" name=\"DataDomains\" value=\"MaasPushFunctions.getDataDomains(Root[<em>CmsAttributeYouCreated</em>'])\"/&gt;</code></div>\n<p class=\"mw-headline\">Make sure to replace the placeholder <code><em>CmsAttributeYouCreated </em></code>with the actual UCMDB attribute name. <br/>\n<br/>\nSimilarly, you can enable data domain synchronization for other SACM records (System Elements, System Components, and Actual Service).</p>\n<h2 class=\"mw-headline\" id=\"Customize_a_new_mapping_file\"><a id=\"Customize_a_new_mapping_file\" name=\"Customize_a_new_mapping_file\" title=\"Customize a new mapping file\"></a>Customize a new mapping file</h2>\n<p>This topic shows how to add a new TQL query and push-mapping to the integration for a CIT called <i>Example</i>. It consists of the following steps:</p>\n<h3><a id=\"Step_1_Create_a_TQL_query\" name=\"Step_1_Create_a_TQL_query\" title=\"Step 1: Create a TQL query\"></a>Step 1: Create a TQL query</h3>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Go to <b>Modeling &gt; Modeling Studio &gt; New &gt; Query</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">From the <b>CI Types</b> tab, add <b>Example CIT</b> to the query.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Right-click the <b>Example Query Node</b> and select <b>Query Node Properties</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Go to the <b>Element Layout</b> tab.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Select <b>Select attributes</b> for layout.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the <b>Attributes condition</b> drop down, select <b>Specific Attributes</b>, and add the new attributes that you want to map and push to Service Management.</li><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>OK</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Save the query to <b>Modeling</b> &gt; <b>Modeling Studio</b>&gt; <b>Resources</b> &gt; <b>Root</b> &gt; <b>Integration</b> &gt; <b>Service Management Automation</b> &gt; <b>SACM</b>.</li></ol>\n<h3><a id=\"Step_2_Create_a_push_mapping\" name=\"Step_2_Create_a_push_mapping\" title=\"Step 2: Create a push-mapping\"></a>Step 2: Create a push-mapping</h3>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Go to <b>Data Flow Management &gt; Adapter Management &gt;manualPushAdapter_</b><strong>&lt;<i>tenant ID&gt;</i></strong>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Create new resource</b> and select <b>New Configuration File</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Type a name for the file.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Select the <b>manualPushAdapter_</b><strong>&lt;<i>tenant ID&gt;</i></strong> package.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click OK.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Copy the following into the newly created XML file, replacing <i>ExampleCI</i> with the name of the relevant CI and Click <b>OK</b>.</li></ol>\n<pre>&lt;integration xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \nxsi:noNamespaceSchemaLocation=\"../generic-push-adapter.xsd\"&gt;\n&lt;info&gt;\n&lt;source name=\"UCMDB\" vendor=\"OpenText\" versions=\"10.0\"/&gt;&lt;target name=\"SACM\" vendor=\"OpenText\" versions=\"1.0\"/&gt;\n&lt;/info&gt;\n&lt;import&gt;\n&lt;scriptFile path=\"mappings.scripts.MaasPushFunctions\"/&gt;\n&lt;/import&gt;\n&lt;targetcis&gt;  \n&lt;source_instance_type query-name=\"\"ExampleCI*\" root-element-name=\"Root\"&gt;\n&lt;target_ci_type name=\"ExampleCI*\"&gt;  \n&lt;variable name=\"externalId\" datatype=\"STRING\" value=\"ExampleCI['external_id_obj']\"/&gt;\n&lt;variable name=\"serviceName\" datatype=\"STRING\"value=\"'CMDB_UDM_1_6'\"/&gt;\n&lt;variable name=\"attributesHierarchy\" datatype=\"STRING value=\"'model.instance'\"/&gt;\n&lt;variable name=\"keysHierarchy\" datatype=\"STRING\" value=\"'model'\"/&gt;\n&lt;variable name=\"keyTag\" datatype=\"STRING\" value=\"'ID'\"/&gt;\n&lt;variable name=\"keyVal\" datatype=\"STRING\" value=\"ExampleCI['cmdb_id']\"/&gt;\n&lt;variable name=\"retrieveRequestName\" datatype=\"STRING\" value=\"'RetrieveExampleCI'\"/&gt; \n&lt;variable name=\"createRequestName\" datatype=\"STRING\" value=\"'CreateExampleCI'\"/&gt;\n&lt;variable name=\"deleteRequestName\" datatype=\"STRING\" value=\"'DeleteExampleCI'\"/&gt;\n&lt;variable name=\"updateRequestName\" datatype=\"STRING\" value=\"'UpdateExampleCI'\"/&gt;\n&lt;target_mapping name=\"Name\" datatype=\"STRING\" value=\"ExampleCI.attributeExists('name') ?\n((ExampleCI['name']==null) ?ExampleCI['display_label']:ExampleCI['name']) :'MISSING'\"/&gt;  \n&lt;target_mapping name=\"Description\" datatype=\"STRING\" \nvalue=\"ExampleCI.attributeExists('description')? ExampleCI['description'] : 'MISSING'\"/&gt;\n&lt;target_mapping name=\"DisplayLabel\" datatype=\"STRING\" value=\"ExampleCI.attributeExists('display_label')\n? ExampleCI['display_label'] : 'MISSING'\"/&gt;   \n&lt;target_mapping name=\"GlobalId\" datatype=\"STRING\" value=\"ExampleCI.attributeExists('global_id')\n? ExampleCI['global_id'] : 'MISSING'\"/&gt;&lt;/target_ci_type&gt;\n&lt;/source_instance_type&gt; \n&lt;/targetcis&gt;\n&lt;/integration&gt; \n</pre>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<p><br/>\nTo advance push-mapping configurations, update the MaasPushFunctions.groovy file. For information on the groovy function, see the <i>Universal CMDB Developer Reference Guide</i>.</p>\n</div></div></div>\n<h3><a id=\"Step_3_Create_a_job_with_the_new_TQL_query\" name=\"Step_3_Create_a_job_with_the_new_TQL_query\" title=\"Step 3: Create a job with the new TQL query\"></a>Step 3: Create a job with the new TQL query</h3>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Go to <b>Data Flow Management &gt; Integration Studio</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Create an Integration Point with Service Management.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">In the Integration Jobs tab, click <b>New Integration Job</b>.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Insert a job name in the <b>Name</b> field.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Add Query</b>, and choose the newly created query.</li><li style=\"--number-width: 12px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>OK</b>.</li></ol>\n<h3>Step 4: Run the job</h3>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click on the job created.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Click <b>Full Synchronization</b> or <b>Request full sync</b> in Service Management.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Wait for the job to complete; click <b>Refresh</b> multiple times as needed until the job is completed.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Make sure that the status is <b>Succeeded</b> and click <b>Sync now</b> on Service Management.</li></ol>\n<h3>Step 5: View the results</h3>\n<ol style=\"padding-left: 0px;\"><li style=\"--number-width: 10px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Go to Service Management.</li><li style=\"--number-width: 13px; --number-spacing: 24px; margin-left: 36px; position: relative;\">Validate that the new CI, pushed in the previous steps, is displayed.</li></ol>\n<p>For more information on customization push adapters, see <a href=\"/doc/401/25.4/drdevpushadpt\" title=\"Develop generic push adapters - Universal Discovery and CMDB\">Develop generic push adapters - Universal Discovery and CMDB</a> in the <i>Universal CMDB Developer Reference Guide</i>. </p>\n<p>This allows you to synchronize new attributes, choose the CI to be synchronized, and create new TQL queries.</p>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div><br/>\nThe Service Management push adapter assumes that relationships comply with the Universal Data Model specification. The adapter pushes CIs that comply with the specification, and ignores those that don't comply.</div></div></div>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}