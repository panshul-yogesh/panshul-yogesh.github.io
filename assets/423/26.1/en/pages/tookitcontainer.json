{
  "title": "SMA Support Assistant",
  "content": "<div class=\"mw-parser-output\"><p>The SMA Support Assistant provides a more stable runtime platform for running SMA scripts in both managed Kubernetes and on-premises environments. The runtime platform provided by the Support Assistant is a container named <strong>itom-toolkit</strong>.</p>\n<p>The Support Assistant supports SMA maintenance tools available for download from the ITOM Marketplace, including the <a class=\"external text\" href=\"https://marketplace.opentext.com/itom/content/service-management-automation-doctor\" rel=\"nofollow\" target=\"1\" title=\"SMA Doctor\">SMA Doctor</a> and the <a href=\"https://marketplace.opentext.com/itom/content/service-management-automation-operation-toolkit\" title=\"SMA Operation Toolkit\">SMA Operation Toolkit</a>, as well as scripts in customer-signed packages. Additionally, considering some scripts (for example, the <code>fqdn-replace.sh</code> script in the SMA Operation Toolkit package) may require certificate files, the Support Assistant also allows you to upload certificate files. Before using the Support Assistant, be aware of the following:</p>\n<ul>\n<li>Scripts must be included in packages in tar, tgz, gz, or zip format, and a valid signature file must accompany each package. For example, SMA-nnnnn-nnnnnn.tar.gz and SMA-nnnnn-nnnnn.tar.gz.sig.</li>\n<li>For customer-signed packages, you must provide their signing key (.pub or .asc).</li>\n<li>Certificate files must have an extension of .cer, .crt, .pem, or .key.</li>\n<li>Any other unsupported files will be automatically deleted by this tool.</li>\n</ul>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-caution-icon\"></div><div class=\"admonition-content admonition-caution-content\"><div>If SMA is deployed on OpenShift to run SMA Doctor on the runtime platform, following the instructions in SMA Doctor doesn't work on OpenShift.</div></div></div>\n<h2>Install the runtime platform</h2>\n<p>Use the following procedure to install the runtime platform.</p>\n<ol>\n<li>Download the <code>itom-toolkit-framework-&lt;version&gt;.tar.gz</code> package from the <a href=\"https://marketplace.opentext.com/itom/content/service-management-automation-support-assistant\" title=\"ITOM Marketplace\">ITOM Marketplace</a> for the current release to a control plane node (in an embedded Kubernetes environment) or the bastion node (in a managed Kubernetes environment).</li>\n<li>Navigate to the package folder and uncompress the package:\n\t<pre>tar xvzf itom-toolkit-framework-&lt;version&gt;.tar.gz\n</pre>\n<ul>\n</ul>\n</li>\n<li>Navigate to the <code>toolkit_framework</code> folder, and run the following commands (<strong>-AD</strong> is required only when the suite is using Azure Disk):\n\t<pre>./install.sh -h\nUsage: ./install.sh -esmNs|--esmNamespace &lt;esmNamespace&gt; -cmsNs|--cmsNamespace &lt;cmsNamespace&gt; -ooNs|--ooNamespace &lt;ooNamespace&gt; -M|--mount -AD|--azure-disk\n       -esmNs|--esmNamespace   esm namespace\n       -cmsNs|--cmsNamespace   cms namespace\n       -ooNs|--ooNamespace     oo namespace\n       -M|--mount              Specify whether to mount the NFS share folder inside the container（Y/N). The default value is Y.\n       -AD|--azure-disk        You must specify this parameter only if the suite is using Azure Disk.\n       -h|--help               Show help.\n</pre>\n<pre>      ./install.sh -AD  #Use AD only for Azure if you use azure disk\n</pre>\n</li>\n<li>The installation starts. When prompted, enter the registry repository's username and password:\n\t<ul>\n<li>In an on-premises environment, enter registry-admin and its password (which is, by default, the same as the OMT admin user's password). If you don't know the password, use $CDF_HOME/scripts/updateLocalRegistryInfo.sh to reset a password for <strong>registry-admin</strong>.</li>\n<li>In a managed Kubernetes environment, enter the name and password of the admin user of your registry.</li>\n</ul>\n</li>\n<li>Run the following command to make sure that the sma-toolkit-nnnnnnnn-nnnnn pod is in 2/2 status:\n\t<pre>kubectl get pods -n $(kubectl get ns |grep itsma | cut -f1 -d \" \") |grep toolkit\n</pre>\n</li>\n</ol>\n<h2 id=\"RunScriptOnPlatform\">How to run scripts on the runtime platform</h2>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-tip-icon\"></div><div class=\"admonition-content admonition-tip-content\"><div>This section provides general guidelines only. For more detailed steps to run specific scripts included in the SMA Operation Toolkit, see the <em>Related topics</em> section.</div></div></div>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-important-icon\"></div><div class=\"admonition-content admonition-important-content\"><div>For Classic deployment, replace <code>&lt;data-volume&gt;</code> with <code>&lt;global-volume&gt;</code> when using this section.</div></div></div>\n<h3>Prepare scripts on the runtime platform</h3>\n<p>To prepare a script for running on the runtime platform:</p>\n<ol>\n<li>If the script is included in a package from the ITOM Marketplace:\n\t<ol start=\"1\">\n<li>Download the package that contains the script and the package's signature file from the ITOM Marketplace.<br/>\n\t\tFor example, the <a class=\"external text\" href=\"https://marketplace.opentext.com/itom/content/service-management-automation-doctor\" rel=\"nofollow\" target=\"1\" title=\"SMA Doctor\">SMA Doctor</a> package (SMA-doctor-nnnn.nn.tar.gz and SMA-doctor-nnnn.nn.tar.gz.sig ) or <a href=\"https://marketplace.opentext.com/itom/content/service-management-automation-operation-toolkit\" title=\"SMA Operation Toolkit\">SMA Operation Toolkit</a> package (SMA-operation-toolkit-nnnn.nn.tar.gz and SMA-operation-toolkit-nnnn.nn.tar.gz.sig).</li>\n<li>Copy the package and its signature file directly to the <code>&lt;data-volume&gt;/toolkit/resource</code> NFS folder. An example path is: <code>/var/vols/itom/itsma/data-volume/toolkit/resource</code>.<br/>\n<strong>Notes</strong>:\n\t\t<ul>\n<li>Every five minutes, the runtime platform automatically loads supported packages that are accompanied by a valid signature file from here to the <code>/toolkit</code> folder in the container.</li>\n<li>All files in the <code>&lt;data-volume&gt;</code><global-volume> folder are mounted to the same path in the container.</global-volume></li>\n</ul>\n</li>\n</ol>\n</li>\n<li>If the script is included in a customer-signed package, copy the package to the &lt;<code>data-volume&gt;/toolkit/resource</code> NFS folder, and copy its signing key (in .pub or .asc format) to the &lt;<code>data-volume&gt;/toolkit/config</code> NFS folder.</li>\n<li>If the script (for example, the <code>fqdn-replace.sh </code>script) requires certificate files, copy your certificate files with an extension of .cer, .crt, .pem, or .key to the &lt;<code>data-volume&gt;/toolkit/resource</code> NFS folder.</li>\n<li>Run the following command in the <code>resource</code> folder to change the ownership of the files in this folder:\n\t<pre><code>chown -R &lt;SYSTEM_USER_ID&gt;:&lt;SYSTEM_GROUP_ID&gt; *</code></pre>\n\tWhere: in an on-premises environment, &lt;SYSTEM_USER_ID&gt; and &lt;SYSTEM_GROUP_ID&gt; <uid><gid>are the SYSTEM_USER_ID and SYSTEM_GROUP_ID parameter values defined in the OMT install.properties file (both have a default value of 1999); in a managed Kubernetes environment, they are the UID and GID specified when creating NFS or EFS volumes during the suite installation. The two values must be either 1999 (default) or a value between 100000 and 2000000000.</gid></uid></li>\n</ol>\n<h3>Run scripts on the runtime platform</h3>\n<p>Follow the instructions below to run a script in the container.</p>\n<ol>\n<li>Run any of the following commands on the control plane node or the bastion node to enter the <code>itom-toolkit</code> container:\n\n\t<pre><code>kubectl exec -it $( kubectl get pods -n $( kubectl get ns |grep itsma | cut -f1 -d \" \") |grep itom-toolkit | awk '{print $1}' | head -1)  -n $( kubectl get ns |grep itsma | cut -f1 -d \" \") -c itom-toolkit -- bash\n \nor\n\nkubectl exec -it -n &lt;SMA Namespace&gt;  &lt; tool kit pod name&gt;  -c itom-toolkit -- bash</code></pre>\n<ul>\n<li>Replace the &lt;SMA Namespace&gt;  with the actual SMA namespace.</li>\n<li>Replace &lt; tool kit pod name &gt; with the actual tool kit pod name in the command.</li>\n</ul>\n</li>\n<br/>\n<li>Go to the <code>/toolkit</code> folder, and then run the script in this folder.</li>\n<li>Find the output file in the <code>/var/log</code> folder. </li>\n</ol>\n<div class=\"admonition\"><div class=\"admonition-icon admonition-note-icon\"></div><div class=\"admonition-content admonition-note-content\"><div>\n<ul>\n<li>Outside the container, the output file generated by each script is located in the <data-volume>/toolkit/output folder on the NFS server, and the runtime platform log is located in the <data-volume>logs/toolkit folder on the NFS server. </data-volume></data-volume></li>\n<li><data-volume><data-volume>If you don't need to use the runtime platform for an extended period, you can stop the container to save system resources and restart it later when needed. </data-volume></data-volume></li>\n</ul>\n</div></div></div>\n<p>To stop the container, run the following commands on the control plane node or bastion node:</p>\n<pre>kubectl scale deployment itom-toolkit -n $(kubectl get namespace |grep itsma | cut -f1 -d \" \")  --replicas=0\nkubectl delete -f toolkit_framework/serviceaccount.yaml</pre>\n<p>To start the container, run the following command:</p>\n<pre>kubectl create -f toolkit_framework/serviceaccount.yaml\nkubectl scale deployment itom-toolkit -n $(kubectl get namespace |grep itsma | cut -f1 -d \" \")  --replicas=1 </pre>\n<h2>Related topics</h2>\n<p>For more details about running a script included in the SMA Operation Toolkit, see the following topics.</p>\n<ul>\n<li>podReScheduler.sh: see <a href=\"/doc/423/26.1/upgradecdf\" title=\"Upgrade OMT (embedded Kubernetes)\">Upgrade OMT (embedded Kubernetes)</a></li>\n<li>apply_custom_settings.sh: see <a href=\"/doc/423/26.1/upgradeembeddedk8s\" title=\"Upgrade the suite (embedded Kubernetes)\">Upgrade the suite (embedded Kubernetes)</a> and <a href=\"/doc/423/26.1/upgrademanagedk8s\" title=\"Upgrade the suite (managed Kubernetes)\">Upgrade the suite (managed Kubernetes)</a></li>\n<li>action_reindex.py: see <a href=\"/doc/423/26.1/fullreindex\" title=\"Perform a full reindex for Smart Analytics\">Perform a full reindex for Smart Analytics</a></li>\n<li>fqdn-replace.sh: see <a href=\"/doc/423/26.1/smaxchangefqdn\" title=\"Change FQDN\">Change FQDN</a></li>\n<li>changeIntegrationUserPwd.sh: see <a href=\"/doc/423/26.1/changeintegrationuserpswd\" title=\"Change integration users password\">Change integration users password</a></li>\n<li>updateSMAExternalDBInfo.sh: see <a href=\"/doc/423/26.1/changecertforpostgresql\" title=\"Enable SSL connections to external PostgreSQL after suite installation\">Enable SSL connections to external PostgreSQL after suite installation</a></li>\n</ul>\n<p>For troubleshooting information, see the following topic:</p>\n<ul>\n<li><a href=\"/doc/423/26.1/smadoctornotworkingonopenshift\" title=\"SMA Doctor doesn't work on OpenShift\">SMA Doctor doesn't work on OpenShift</a></li>\n</ul>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}