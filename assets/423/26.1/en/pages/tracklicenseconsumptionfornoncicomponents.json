{
  "title": "Design and Deploy license consumption APIs",
  "content": "<div class=\"mw-parser-output\"><p>In earlier versions of Cloud Management, only CI-based component types in your service designs consumed licenses from AutoPass. If your service design used non-CI component types, their license usage wasn’t tracked. Starting with version 25.2, you can track license usage for non-CI components by mapping them to existing AutoPass features.</p>\n<p>You must use the API to map non-CI components to AutoPass features. The following section provides details about the relevant API calls.</p>\n<h2>API details </h2>\n<h3>Get projected license consumption before mapping</h3>\n<div>Before creating a mapping, use this API call to review projected license usage for your non-CI components.</div>\n \n\n<ul>\n<li>\n<div><strong>HTTP method</strong>: POST</div>\n</li>\n<li>\n<div><strong>URL</strong>: /license/mapping/estimate</div>\n</li>\n<li>\n<div><strong>Request</strong> <strong>example</strong>:\n\t<pre><code>{\n    [{\n        \"componentType\": \"server\",\n        \"featureName\": \"OPERATING_SYSTEM_INSTANCE\",\n        \"ciType\": false\n    },\n    {\n        \"componentType\": \"database\",\n        \"featureName\": \"DATABASE_OR_MIDDLEWARE_SERVICE\",\n        \"ciType\": true\n    }]\n}</code></pre>\n</div>\n</li>\n<li>\n<div><strong>Response example:</strong>\n<pre><code>{\n [\n  {    \n    \"units\": 0.5,\n    \"componentType\": \"server\",\n    \"featureName\": \"OPERATING_SYSTEM_INSTANCE\",\n    \"isCiType\": false,\n    \"deployedComponents\": 468,\n    \"estimatedConsumptionUnits\": 234\n  },\n  {    \n    \"units\": 0.2,\n    \"componentType\": \"database\",\n    \"featureName\": \"DATABASE_OR_MIDDLEWARE_SERVICE\",\n    \"isCiType\": true,\n    \"deployedComponents\": 750,\n    \"estimatedConsumptionUnits\": 150\n  }\n ]\n}</code></pre>\n</div>\n</li>\n<li>\n<div><strong>Status codes</strong>: Success code: 200, Authentication error: 401, Bad request: 400, Server error: 500</div>\n</li>\n</ul>\n<h3>List features available for mapping</h3>\n<ul>\n<li>\n<div><strong>HTTP</strong> <strong>method</strong>: GET</div>\n</li>\n<li>\n<div><strong>URL</strong>: /license/mapping/feature</div>\n</li>\n<li>\n<div><strong>Response</strong> <strong>example</strong>:\n\t<pre><code>{\n [\n  {\n    \"uuid\": \"123aei34o9\",\n    \"unitsPerInstance\": 0.5,    \n    \"featureName\": \"OPERATING_SYSTEM_INSTANCE\",\n    \"description\": \"Servers\"\n  },\n  {\n    \"uuid\": \"123aei34o6\",\n    \"unitsPerInstance\": 0.2,    \n    \"featureName\": \"DATABASE_OR_MIDDLEWARE_SERVICE\",\n    \"description\": \"middleware services\"\n  }\n ]\n}</code></pre>\n</div>\n</li>\n<li>\n<div><strong>Status</strong> <strong>codes</strong>: Success code: 200, Authentication error: 401, Server error: 500</div>\n</li>\n</ul>\n<h3>Create license mapping</h3>\n<div>\n<div>\n<div>\n<div>\n<div>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">For active subscriptions that use non-CI components, license units are consumed 24 hours after the license mapping is created.</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<ul>\n<li>\n<div><strong>HTTP</strong> <strong>method</strong>: POST</div>\n</li>\n<li>\n<div><strong>URL</strong>: /license/mapping</div>\n</li>\n<li>\n<div><strong>Request</strong> <strong>example</strong>:\n\t<pre><code>{\n    [{\n        \"componentType\": \"server\",\n        \"featureName\": \"OPERATING_SYSTEM_INSTANCE\",\n        \"ciType\": false\n    },\n    {\n        \"componentType\": \"database\",\n        \"featureName\": \"DATABASE_OR_MIDDLEWARE_SERVICE\",\n        \"ciType\": false\n    }]\n}</code></pre>\n</div>\n</li>\n<li>\n<div><strong>Response</strong> <strong>example</strong>:\n\t<pre><code>{\n [\n  {\n    \"uuid\": \"123aei34o9\",\n    \"unitsPerInstance\": 0.5,\n    \"componentType\": \"server\",\n    \"featureName\": \"OPERATING_SYSTEM_INSTANCE\",\n    \"isCiType\": false\n  },\n  {\n    \"uuid\": \"123aei34o6\",\n    \"unitsPerInstance\": 0.2,\n    \"componentType\": \"database\",\n    \"featureName\": \"DATABASE_OR_MIDDLEWARE_SERVICE\",\n    \"isCiType\": true\n  }\n ]\n}</code></pre>\n</div>\n</li>\n<li>\n<div><strong>Status</strong> <strong>codes</strong>: Success code: 201, Authentication error: 401, Already exists: 409, Bad request: 400, Server error: 500</div>\n</li>\n</ul>\n<h3>List license mappings</h3>\n<ul>\n<li>\n<div><strong>HTTP</strong> <strong>method</strong>: GET</div>\n</li>\n<li>\n<div><strong>URL</strong>: /license/mapping/feature</div>\n</li>\n<li>\n<div><strong>Response</strong> <strong>example</strong>:\n\t<pre><code>{\n [\n  {\n    \"uuid\": \"123aei34o9\",\n    \"unitsPerInstance\": 0.5,\n    \"componentType\": \"server\",\n    \"featureName\": \"OPERATING_SYSTEM_INSTANCE\",\n    \"isCiType\": false\n  },\n  {\n    \"uuid\": \"123aei34o6\",\n    \"unitsPerInstance\": 0.2,\n    \"componentType\": \"database\",\n    \"featureName\": \"DATABASE_OR_MIDDLEWARE_SERVICE\",\n    \"isCiType\": true\n  }\n ]\n}</code></pre>\n</div>\n</li>\n<li>\n<div><strong>Status</strong> <strong>codes</strong>: Success code: 200, Authentication error: 401, Server error: 500</div>\n</li>\n</ul>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}