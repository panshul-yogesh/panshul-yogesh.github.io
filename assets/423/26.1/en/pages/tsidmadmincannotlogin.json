{
  "title": "Can't log in to IdM Admin Portal",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p><br/>\nThe suite admin cannot log in to IdM Admin Portal after entering the username and password.</p>\n<h2 id=\"Cause\">Cause</h2>\n<p>The system failed to assign the privilege to the suite admin to access IdM Admin Portal when installing or upgrading the suite.</p>\n<h2 id=\"Solution\">Solution</h2>\n<ol>\n<li>\n<p>Log in to your database and modify the data in the IdM schema by updating the type of sysbo to \"provider\". You can use the query “select type from organizations where name='sysbo'; ” to get the sysbo organization type. If the returned value isn't “PROVIDER” (probably is “CONSUMER”), run the query “update organizations set type='PROVIDER' where name='sysbo';”</p>\n</li>\n<li>\n<p>Log in to a control plane node or a bastion node as root or a sudo user, run the following command to get the IdM pod name:<br/>\n<code>kubectl get pod -n &lt;namespace&gt; |grep idm</code></p>\n</li>\n<li>Run the following command to access the IdM pod:<br/>\n<code>kubectl exec -it &lt;pod-name&gt; -n &lt;namespace&gt; -c idm -- /bin/sh</code></li>\n<li>Run the following command to get a password:<br/>\n<code>get_secret idm_transport_user_password_secret_key</code><br/>\n\tNote the password.</li>\n<li>\n<p><a href=\"/doc/423/26.1/connecttorestapi\" title=\"Connect to the REST API\">Connect to the REST API</a>, send a POST request to get the token:</p>\n<pre>POST https://&lt;hostname&gt;/idm-service/v3.0/tokens\n BODY:\n {\n   \"passwordCredentials\" : {\n     \"username\" : \"admin\",\n     \"password\" : \"&lt;password you get in step 4&gt;\"\n   },\n   \"tenantName\" : \"provider\"\n }\n </pre>\n</li>\n<li>\n<p>Send a GET request to check whether the \"authorities\" field of the returned value contains \"SUPER_IDM_ADMIN\".</p>\n<pre>GET https://&lt;hostname&gt;/idm-service/api/scim/organizations/sysbo/users/suite-admin/roles\n</pre>\n</li>\n<li>If there is no \"SUPER_IDM_ADMIN\", send a GET request to check the group's role. Note the group name if the IdM role is superAdmin.\n\t<pre>GET https://&lt;hostname&gt;/idm-service/api/scim/organizations/sysbo/groups</pre>\n\tIn the following response example, \"administrators\" is the group name, \"Super_IDM_ADMIN\" is the IdM permission, and \"superAdmin\" is the IdM role.\n\n\t<pre> \"id\": \"2c90829c7912cc87017912cc9e9301a8\",\n            \"name\": \"administrators\",\n            \"displayName\": \"Administrators\",\n            \"groupInfo\": \"Administrators group\",\n            \"createdDate\": \"2021-04-27T18:07:50.416Z\",\n            \"modifiedDate\": \"2021-04-30T10:28:44.843Z\",\n            \"metadata\": {},\n            \"modifiable\": true,\n            \"public\": true,\n            \"deletable\": true,\n            \"roles\": [\n                {\n                    \"modifiable\": true,\n                    \"public\": true,\n                    \"deletable\": true,\n                    \"id\": \"2c90829c7912cc87017912cc9f2501b9\",\n                    \"description\": \"Super IDM Admin role\",\n                    \"groups\": [],\n                    \"permissions\": [\n                        {\n                            \"modifiable\": true,\n                            \"public\": true,\n                            \"deletable\": true,\n                            \"id\": \"45C8AB31231456799F9AAB78A4FD567D\",\n                            \"locked\": true,\n                            \"type\": \"PROVIDER\",\n                            \"description\": \"Performs IdM administration for all organizations\",\n                            \"application\": \"IdM\",\n                            \"name\": \"SUPER_IDM_ADMIN\",\n                            \"displayName\": \"Global IdM Administrator\"\n                        }\n                    ],\n                    \"users\": null,\n                    \"name\": \"superAdmin\",\n                    \"displayName\": \"Super IDM Admin\"\n                }</pre>\n</li>\n<li>(Optional) If there is no group with superAdmin role, send a PUT request to add superAdmin role to an existing group.\n\t<pre>PUT https://&lt;hostname&gt;/idm-service/api/scim/organizations/sysbo/roles/superAdmin/groups/&lt;an existing group ID or name&gt;</pre>\n</li>\n<li>\n<p>Send a POST request to add suite-admin to the group with superAdmin role:</p>\n<pre>POST https://&lt;hostname&gt;/idm-service/api/scim/organizations/sysbo/users/suite-admin/groups\n BODY:\n {\n   \"groupReference\" : \"&lt;group ID or name&gt;\"\n }\n </pre>\n</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}