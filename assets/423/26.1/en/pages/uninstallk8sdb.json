{
  "title": "How to uninstall suite Kubernetes configurations and databases",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>The following instructions apply to a helm-based suite deployment on either the embedded Kubernetes or a managed Kubernetes.</p>\n<h2><span>Uninstall </span>Kubernetes configurations</h2>\n<p>Uninstall the Kubernetes configurations for the suite as follows. </p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">We recommend that you uninstall the suite through CLI. If you want to uninstall it through the AppHub application, you must follow step 3 to step 6 below to clean up all PVCs.</div>\n</div>\n<ol>\n<li>Log on to a control plane node or the bastion node. </li>\n<li>Run the following command to uninstall the ESM chart.\n\t<pre>ns=&lt;NAMESPACE&gt;\nhelm uninstall $(helm list -n $ns |grep -v NAME|awk '{print $1}'|tail -1) -n $ns</pre>\n<p>Where &lt;NAMESPACE&gt; is the unique namespace of the suite deployment.</p>\n</li>\n<li>\n<div>Run the following command to change the status of your persistent volumes (PVs) from <code>Release</code> to <code>Available</code>. Skip this step if you are using dynamic PVs.</div>\n<pre>kubectl patch pv $(kubectl get pv | grep -v NAME |  grep $ns | cut -f1 -d \" \") -p '{\"spec\":{\"claimRef\":{\"resourceVersion\":null, \"uid\":null}}}'</pre>\n</li>\n<li>Run the following command to confirm that all PVs are in <code>Available</code> status. If not, rerun step 3.\n\t<pre>kubectl get pv |grep $ns</pre>\n</li>\n<li>Run the following command to clean up secrets.\n\t<pre>kubectl delete secret  $(kubectl get secret -n $ns|grep -v NAME|grep -v registrypullsecret|grep -v azure-secret|cut -f1 -d \" \") -n $ns\n</pre>\n</li>\n<li>Run the following command to clean up PVCs.\n\t<pre>kubectl delete pvc  $(kubectl get pvc -n $ns|grep -v NAME|cut -f1 -d \" \") -n $ns\n</pre>\n</li>\n</ol>\n<h2 id=\"Clean_up_the_suite_databases\">Clean up the suite databases</h2>\n<p>If you're going to reinstall the suite by using the same PostgreSQL server, you need to clean up the suite databases. </p>\n<ol>\n<li>Log on to the database server. </li>\n<li>Delete the following databases and users, which were automatically created during the old installation; otherwise, your new installation will fail if using the same PostgreSQL server.\n\t<table>\n<tbody>\n<tr>\n<th>Component</th>\n<th>User name</th>\n<th>Databases created automatically</th>\n<th>Notes</th>\n</tr>\n<tr>\n<td>IdM</td>\n<td>idm</td>\n<td>idm</td>\n<td></td>\n</tr>\n<tr>\n<td>Service Management</td>\n<td>maas_admin</td>\n<td>maas_admin, maas_template, xservices_ems, xservices_mng, xservices_rms, xie, scheduler, and carbon</td>\n<td></td>\n</tr>\n<tr>\n<td>Smart Analytics</td>\n<td>smarta</td>\n<td>smartadb</td>\n<td></td>\n</tr>\n<tr>\n<td>Suite Administration</td>\n<td>bo_db_user</td>\n<td>bo_ats, bo_user, bo_config, and bo_license</td>\n<td></td>\n</tr>\n<tr>\n<td>Autopass</td>\n<td>autopass</td>\n<td>autopassdb</td>\n<td></td>\n</tr>\n<tr>\n<td>Design and Deploy (DND)</td>\n<td>hcm_admin</td>\n<td>dnd</td>\n<td>Applicable only if you installed the DND capability</td>\n</tr>\n<tr>\n<td>Software Asset Management (SAM)</td>\n<td>sam</td>\n<td>sam</td>\n<td>Applicable only if you installed the SAM capability</td>\n</tr>\n<tr>\n<td>Cloud Management Platform (CMP) FinOPs</td>\n<td>cgro</td>\n<td>cgro</td>\n<td>Applicable only if you installed the CMP FinOps capability</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}