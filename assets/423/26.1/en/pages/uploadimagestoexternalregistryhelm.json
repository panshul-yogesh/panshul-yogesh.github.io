{
  "title": "Upload images to a registry (Helm)",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>Before you install the suite, you need to download the images from the official Docker Hub to a registry. </p>\n<h2 class=\"mw-headline\" id=\"Generate_the_download_bundle\">Generate the download bundle</h2>\n<p>Use the steps below to generate the download bundle.</p>\n<ol>\n<li>Log on to the first control plane node, and then navigate to the <code>$CDF_HOME/tools/generate-download</code> directory.</li>\n<li>Run the <code>generate_download_bundle.sh</code> command together with the options required by your deployment. For a full list of command options, run the command with the -h option.\n\t<pre>generate_download_bundle.sh -f &lt;image set file&gt; [ -d &lt;output directory&gt;]</pre>\n<p>Where:</p>\n<ul>\n<li><code>&lt;<em>image set_file</em>&gt;</code>: The absolute path to the image set file. To locate this file, unzip the <em>esm-1.0.0+2x.x-xxx.zip</em>  and check the scripts folder. </li>\n<li><code>&lt;<em>output_directory</em>&gt;</code>: The directory where the script saves the offline-download.zip file. If you don't specify a value, the script saves the file to the default directory, which is the current working directory.</li>\n</ul>\n<p>Example command:</p>\n<pre>generate_download_bundle.sh -f  &lt;ESM_Helm_Chart-2x.x.x&gt;/scripts/image_sets/_image-set.json -d /tmp</pre>\n<p>You will see a similar message indicating that you have successfully generated the <code>offline-download.zip</code> file:</p>\n<pre>INFO offline-download.zip is generated under /tmp\nINFO For more details, please refer: /opt/cdf/log/generate_download_bundle/generate_download_bundle.20240129084204.log\n</pre>\n\tThe generated file contains the image download bundle. This bundle downloads the images required for installation.</li>\n</ol>\n<h2>Download the suite images</h2>\n<ol>\n<li>Log on to the first control plane node. If the first control plane node can't access Docker Hub, transfer the  <code>offline-download.zip</code>  file to a Linux server that can access Docker Hub.</li>\n<li>Extract the .zip package to a directory. If you can't access Docker Hub directly, set up the HTTP/HTTPS proxy. For example, run the following commands to set the HTTP/HTTPS proxy. Replace the placeholders with your actual server and port.\n\t<pre>export http_proxy=\"&lt;http://PROXY_SERVER:PORT&gt;\"\nexport https_proxy=\"&lt;https://PROXY_SERVER:PORT&gt;\"</pre>\n</li>\n<li>Go to the directory you extracted the <code>offline-download.zip</code> package into.</li>\n<li>Run the following command:\n\t<pre>./downloadimages.sh [-u &lt;username&gt;]  [-d &lt;image download directory&gt;] [-c on|off] [-o &lt;org name&gt;]</pre>\n\tWhere:\n\n\t<ul>\n<li>Replace &lt;<i>username</i>&gt; with the Docker Hub username.</li>\n<li>If you don't specify the credentials here, you will be prompted to specify them when you run the command.</li>\n<li>&lt;<em>image download directory</em>&gt;: The directory where the container images will be downloaded. The default value is <code>/var/opt/cdf/offline</code>.</li>\n<li>The <code>-c</code> option is used to verify the digital signature of the images during the download. The default setting is off, which doesn't verify the signature.</li>\n<li><code>&lt;<em>org name</em>&gt;</code>: The organization in the image registry that contains the images for installation. By default, this is <code>hpeswitom.</code> This option is mandatory if you aren't using the default organization name.</li>\n</ul>\n<p>To see the full list of options for the downloadimages.sh command, run the following command:</p>\n<pre>./downloadimages.sh –h</pre>\n\tThe command also has a <code>-p</code> option to provide your password. The <code>-p</code>  option doesn't support single quotes (that is, don't include single quotes in the password).\n\n\t<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">\n<p>By selecting the -p option, you are disabling or bypassing security features, thereby exposing the system to increased security risks. By using this option, you understand and agree to assume all associated risks and hold OpenText harmless for the same.</p>\n\tOpenText encourages you to use some other password options, which aren't provided by OpenText. By implementing the -p option, you may expose the system to increased security risks. You understand and agree to assume all associated risks and hold OpenText harmless for the same. It remains at all times your sole responsibility to assess its own regulatory and business requirements. OpenText doesn't represent or warrant that its products comply with any specific legal or regulatory standards applicable to you in conducting your business.</div>\n</div>\n</li>\n</ol>\n<h2>(Optional) Transfer the images to the control plane node</h2>\n<p>If you downloaded the images to a server other than the first control plane node, transfer the images to a directory on the first control plane node. By default, the images should be placed under the  <code>/var/opt/cdf/offline</code> directory.</p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">\n<p>The images will be uploaded by the <code>uploadimages.sh</code> script later. The image upload requires up to 2 times of the image size space in the target image directory. For example, if you choose to use the default <code>/var/opt/cdf/offline</code> directory, ensure that the <code>/var/opt/cdf/offline</code> directory of the control plane node has a space that is 2 times the suite image size. </p>\n</div>\n</div>\n<h2>Upload the images</h2>\n<p>Follow these steps to upload the installation images to the image registry:</p>\n<ol>\n<li>Log on to one of the control plane nodes.</li>\n<li>On the control plane node, go to the <code>$CDF_HOME/scripts/</code> directory. Run the following command:\n\t<pre><code>cd $CDF_HOME/scripts</code></pre>\n</li>\n<li>Run the following command to upload the suite images to the registry:\n\t<pre><code>./uploadimages.sh [-r &lt;image_repository_URL&gt;] [-u &lt;username&gt;]  [-d &lt;image_download_directory&gt;] [-o &lt;org_name&gt;] </code></pre>\n<p>To see the full list of options for the <code>uploadimages.sh</code> command, run the following command:</p>\n<pre>./uploadimages.sh -h </pre>\n\tWhere:\n\n\t<ul>\n<li><code>&lt;<em>image_repository_URL</em>&gt;:</code> The URL of the external registry where the images will be uploaded. You can format the URL with the HTTP or HTTPS protocol, or not specify a protocol (in this case, the protocol defaults to HTTPS). For example: <code>image-registry.com:443</code>, <code>http://image-registry.com</code>, or <code>https://image-registry.com</code>. </li>\n<li><code>&lt;<em>username</em>&gt;:</code>The registry username.  \n\t\t<p>To upload the images to a local registry, you don't need to specify any values for the <code>&lt;image_repository_URL&gt;</code> and <code>&lt;username&gt;</code> parameters.</p>\n</li>\n<li><code>&lt;<em>image_download_directory</em>&gt;</code>: The directory where the container images will be downloaded. The default value is /var/opt/cdf/offline. The <code>-d</code> option is the image directory where you placed the images you have downloaded. Specify the <code>-d </code> option if the images aren't available in the <code>/var/opt/cdf/offline/</code> directory. You can use the <code>-d</code> option multiple times when the images are in different directories. However, if you have specified the <code>-l</code> option to \"false\", then you can only specify one image directory. The images can be either the images download by the <code>downloadimages.sh</code> or the images generated by <code>docker save</code>. However, if there are both, the <code>uploadimages.sh</code> script won't upload the images generated by <code>docker save</code>. Only the .tar, .tgz, and .tar.gz images are supported. Make sure the image file type matches the file extension. </li>\n<li><code>&lt;<em>org_name</em>&gt;</code>: The organization in the image registry that contains the images for installation. By default, this is <code>hpeswitom.</code> This option is mandatory if you aren't using the default organization name.</li>\n</ul>\n</li>\n<li>Wait until the images are successfully uploaded. Your terminal resembles the following:\n\t<pre>Upload-process successfully completed.\n</pre>\n</li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}