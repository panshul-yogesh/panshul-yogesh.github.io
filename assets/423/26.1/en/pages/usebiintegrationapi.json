{
  "title": "Use the BI integration API (deprecated)",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\"></p><div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>The Business Intelligence (BI) integration module enables you to define the fields and relationships that are synced for a record type when integrating with an external business intelligence system. This can help you export your data to a third-party system with different reporting tools. Alternatively, it's useful for aggregating your data with data from other parts of your organization.</p>\n<p>You can define multiple sync configurations, the configurations are used for all selected record types and fields. You perform the integration using the BI integration API. For more information on the API, see <a href=\"/doc/423/26.1/biintegrationapi\" title=\"SMAX:25.1/BIIntegrationAPI\">Business Intelligence integration API</a>. </p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-important-icon\"></div>\n<div class=\"admonition-content admonition-important-content\">Service Management only supports direct access to the database for the PostgreSQL views. Unless directed by the Support as part of a case investigation or resolution, any other database access is not supported.</div>\n</div>\n<h2 class=\"mw-headline\" id=\"Define_a_synchronization_configuration\">Use case</h2>\n<p>This use case will generate an excel report of users and their groups. </p>\n<p>Your organization wants a report in Excel format that lists all the users and all of the groups they belong to.</p>\n<p>The data you need to include in the BI sync, to report on groups and group memberships, is:</p>\n<ul>\n<li><b>Person</b> - ID, Name, Group members</li>\n<li><b>Group</b> - ID, Name</li>\n</ul>\n<h2 class=\"mw-headline\">Set up the integration</h2>\n<p>Perform the following steps to set up the integration. </p>\n<h3 class=\"mw-headline\">Define a synchronization configuration</h3>\n<p>To add a new synchronization configuration</p>\n<ol>\n<li>\n<p>From the <span class=\"SAW_VariablesMain_menu_Starter\">Main menu</span>, select <b>Administration &gt; Utilities &gt; Integration &gt; BI Integration</b>.</p>\n</li>\n<li>\n<p>In the configuration drop-down, select  <a class=\"image\" href=\"/file/images/6/64/2018.08_Helpcenter/Resources/Images/Icons/PlusIcon.png\" title=\"/file/images/6/64/2018.08_Helpcenter/Resources/Images/Icons/PlusIcon.png\"> <img alt=\"PlusIcon.png\" data-file-height=\"22\" data-file-width=\"24\" height=\"22\" src=\"../../../images/PlusIcon_8ed60e27.png\" width=\"24\"/> </a>  <b>New configuration</b> to open the dialog box.</p>\n</li>\n<li>\n<p>Complete the following fields.</p>\n<table>\n<tbody>\n<tr>\n<th>Field</th>\n<th>Description</th>\n</tr>\n<tr>\n<td>Name</td>\n<td>\n<p>Enter a name for the configuration. The name can't be modified after the configuration is created.</p>\n</td>\n</tr>\n<tr>\n<td>Ongoing query policy</td>\n<td>\n<p>Select an ongoing query policy:</p>\n<ul>\n<li>\n<p><b>Ongoing full operations stack query.</b> Export all updates occurred on the specified record types and fields during the specified time frame. No data is exported if no updates were made.</p>\n</li>\n<li>\n<p><b>Ongoing last snapshot query.</b> Export the latest updates occurred on the specified record types and fields during the specified time frame.</p>\n</li>\n</ul>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">\n<p>For the Service Level Target-related record types and expense line, the latest updates occurred during the specified time frame are exported for both ongoing query policies.</p>\n</div>\n</div>\n</td>\n</tr>\n<tr>\n<td>File preserving time</td>\n<td>\n<p>Specify how long the output files are saved in the system:</p>\n<ul>\n<li>3 days</li>\n<li>1 week</li>\n<li>2 weeks</li>\n<li>1 month</li>\n<li>2 months</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>Click <b>Save</b>.</p>\n</li>\n</ol>\n<h3 class=\"mw-headline\" id=\"Configure_a_synchronization\">Configure a synchronization</h3>\n<p>To define record type data to synchronize:</p>\n<ol>\n<li>From the <span class=\"SAW_VariablesMain_menu_Starter\">Main menu</span>, select <b>Administration &gt; Utilities &gt; Integration &gt; BI Integration</b>.</li>\n<li>On the left, under <b>Record types</b>, select a record type from the drop-down list. For example, select <b>Incident</b>.</li>\n<li>\n<p>Open the fields tab (<b>Incident fields</b>) and select the fields to be synchronized for incident records. You can search for a field in the search window.</p>\n<p>After you select fields, the <b>Selected</b> tab appears, which displays only the selected fields.</p>\n</li>\n<li>\n<p>Open the many to many relationships tab (<b>Incident many to many relationships</b>) and select the relationships to be synchronized for incident records. You can search for a relationship in the search window.</p>\n<p>After you select relationships, the <b>Selected</b> tab appears, which displays only the selected relationships.</p>\n</li>\n<li>\n<p>Click  <a class=\"image\" href=\"/file/images/6/66/2018.08_Helpcenter/Resources/Images/Icons/SaveIcon.png\" title=\"/file/images/6/66/2018.08_Helpcenter/Resources/Images/Icons/SaveIcon.png\"> <img alt=\"Save\" data-file-height=\"21\" data-file-width=\"20\" height=\"21\" src=\"../../../images/SaveIcon_5eb13ed6.png\" width=\"20\"/> </a>  <b>Save</b> on the toolbar.</p>\n</li>\n<li>\n<p>You are now prepared to run the BI integration API. Before performing an actual integration, it's recommended to run a mock integration of a full sync using sample data to help understand the integration more thoroughly. The mock integration runs more quickly than an actual integration and involves a smaller impact on your system.</p>\n<p>Follow these steps:</p>\n<ol>\n<li>Click <b>Download test data</b> to run the sync.</li>\n<li>An output file is generated for each selected record type and relationship type. The record data in the files is based on actual data from the tenant. The relationships are based on sample data (not on actual data).</li>\n<li>The format of the sample data output files follows the format of regular BI sync output files. For more information, see <a href=\"/doc/423/26.1/biintegrationapi#BI_Output_format\" title=\"SMAX:25.1/BIIntegrationAPI\">Output format</a>. The record type output files contain a maximum of 100 records. The relationship type output files contain a maximum of 50 relationships.</li>\n</ol>\n</li>\n</ol>\n<p>To remove a record type synchronization configuration</p>\n<ol>\n<li>Select the required record type configuration in the list on the left.</li>\n<li>Click <b>Remove</b> on the toolbar and click <b>Confirm</b> to confirm the deletion.</li>\n</ol>\n<h3 class=\"mw-headline\" id=\"Best_practices\">Best practices</h3>\n<p>The following best practices provide an outline of the main phases of the integration for customer administrators:</p>\n<ol>\n<li>Define the synchronization configuration based on your need.</li>\n<li>Configure the integration.\n\t<ol start=\"1\">\n<li>Configure the sync process by specifying a list of record types with properties and relationships to be exported. It's usually only necessary to export a subset of data (record types, fields, and relationships). It's recommended to select the <b>Id</b> and <b>LastUpdateTime</b> fields for every selected record type to facilitate the proper identification and ordering of the generated records.</li>\n<li>Create an integration user in Suite Administration to be used specifically for the integration (SaaS customers need to contact SaaS Operations to create an integration user). The user should be assigned only the <strong>Business Intelligence Integration</strong> role, and should be used for the BI integration exclusively.</li>\n</ol>\n</li>\n<li>Perform the initial sync.\n\t<ol start=\"1\">\n<li>Run an initial sync using the BI integration Initial data sync API. This generates an initial data snapshot as a set of ZIP/CSV files.</li>\n<li>Check the status of the initial sync using the BI integration Get Status API until the job is complete.</li>\n<li>Access the results of the initial sync using the BI integration Get Status API as a list of links to BI ZIP/CSV files.</li>\n<li>Retrieve the ZIP/CSV files for the initial sync using the BI file-list API.</li>\n</ol>\n</li>\n<li>Perform the ongoing sync.\n\t<ol start=\"1\">\n<li>Run an ongoing sync using the BI integration Ongoing data sync API. This generates a list of all updates or the last updates for the specified record types and fields that occurred since the previous sync based on your sync configuration.</li>\n<li>Check the status of the ongoing sync using the BI integration Get Status API until the job is complete.</li>\n<li>Access the results of the ongoing sync using the BI integration Get Status API as a list of links to BI ZIP/CSV files.</li>\n<li>Retrieve the ZIP/CSV files for the ongoing sync using the BI file-list API.</li>\n<li>Repeat this phase periodically as required.</li>\n</ol>\n</li>\n</ol>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">\n<p>If the integration configuration was changed by adding or removing a record type, field, or relationship, you must run the initial sync again before running the ongoing sync.</p>\n</div>\n</div>\n<h3 class=\"mw-headline\" id=\"End-to-end_example\">Use the integration</h3>\n<p>The following example demonstrates how to run the BI integration:</p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">\n<p>It's recommended to create an integration user to run the API. The user must be assigned the Business Intelligence Integration role.</p>\n</div>\n</div>\n<ol>\n<li>\n<p>To perform the integration, define two users as follows:</p>\n<ul>\n<li>Tenant admin user</li>\n<li>An integration user with only the <strong>Business Intelligence Integration</strong> role</li>\n</ul>\n</li>\n<li>\n<p>Log in to Service Management application as a tenant admin user. Navigate to the BI Integration page. For more information on the BI Integration user interface, see the<em> Define a synchronization configuration</em> and  <em>Configure a synchronization </em>sections.</p>\n</li>\n<li>\n<p>Define multiple synchronization configurations as needed and select the following record types and fields for synchronization:</p>\n<ul>\n<li>For Request, select Active, Description, Phase Id, Title, Category, Created time, SLT, Status, Assignment Group, Assignee, Service, and Priority.</li>\n<li>For Incident, select Active, Description, Phase Id, Title, Category, Created time, SLT, Status, Assignment Group, Assignee, Service, and Priority. Also select one relationship: Incident caused by request.</li>\n<li>For Person, select Email, First name, Id, Last name, Name, Group members (from the <b>Person many to many relationships</b> section)</li>\n<li>Office phone number, and User principal name.</li>\n<li>For Group, select Company, Group type, Id, Name, Owner, and User principal name.</li>\n<li>For Service Level Target, select Id, Name, Parent, Parent type, Priority, Record type, Service, Status, Target date, and Target type.</li>\n<li>For Actual service, select 1st level support, Description, Display label, Id, Name, Owner, and Subtype.</li>\n</ul>\n</li>\n<li>\n<p>Launch a REST client (such as Postman), and get an authentication token with this integration user's user name and password:<br/>\n\tMethod: <strong>POST</strong><br/>\n\tURI: <strong>https://<code>&lt;host&gt;</code>/auth/authentication-endpoint/authenticate/token?tenantId={{TENANTID}}</strong><br/>\n\tBody: </p>\n<pre><code>{\n\n    \"login\": {{LOGIN_USER}},\n\n    \"password\": {{LOGIN_PASSWORD}}\n\n}</code></pre>\n<p>See the figure below for an example. <br/>\n<br/>\n<a class=\"image\" href=\"/file/images/7/79/SMAX202305_BI_integ.png\" title=\"/file/images/7/79/SMAX202305_BI_integ.png\"> <img alt=\"SMAX202305_BI_integ\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/7/79/SMAX202305_BI_integ.png\" height=\"300\" hspace=\"0\" src=\"../../../images/SMAX202305_BI_integ_e392cf93.png\" style=\"width: 700px; height: 300px;\" vspace=\"0\" width=\"700\"/> </a></p>\n</li>\n<li>\n<p>In the REST client, call the BI Initial data sync API using the token returned in the previous step (configure <code>SMAX_AUTH_TOKEN </code>with this token):</p>\n<ul>\n<li>\n<p><b>URI: </b><code>POST &lt;host&gt;:&lt;port&gt;/rest/&lt;tenantId&gt;/bi/initial/new</code></p>\n</li>\n<li>\n<p>Headers</p>\n<ul>\n<li><code>Accept:application/json</code></li>\n<li><code>Cookie: SMAX_AUTH_TOKEN=&lt;token&gt;</code></li>\n<li><code>Content-Type:application/json</code></li>\n</ul>\n</li>\n<li>\n<p>Body</p>\n<pre><code>{\n    \"BiSyncConfigurationName\": \"&lt;configuration name&gt;\"\n}</code></pre>\n</li>\n</ul>\n<div><a class=\"image\" href=\"/file/images/d/d6/SMAX202305_BI_integ_sync_id.png\" title=\"/file/images/d/d6/SMAX202305_BI_integ_sync_id.png\"> <img alt=\"SMAX202305_BI_integ_sync_id\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/d/d6/SMAX202305_BI_integ_sync_id.png\" height=\"517\" hspace=\"0\" src=\"../../../images/SMAX202305_BI_integ_sync_id_2193c092.png\" style=\"width: 800px; height: 517px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></div>\n<p>For an example of the response JSON, see <a href=\"/doc/423/26.1/biintegrationapi#Initial\" title=\"SMAX:25.1/BIIntegrationAPI\">Initial data sync</a>.</p>\n</li>\n<li>\n<p>Using the <code>syncId</code> from the response body, run the Get Status API:</p>\n<p><code>GET: &lt;host&gt;:&lt;port&gt;/rest/&lt;tenantId&gt;/bi/status/&lt;syncId&gt;</code></p>\n<p>For an example of the response JSON, see <a href=\"/doc/423/26.1/biintegrationapi#Get\" title=\"SMAX:25.1/BIIntegrationAPI\">Get status</a>.</p>\n<p>Save the output in an external tool for later reference. The status response includes a status for each output file. If they are all COMPLETE, you can proceed. If not, call the  Get status API again. Save the <b>FileId</b> value from each section of the response JSON in an external tool.</p>\n<div><a class=\"image\" href=\"/file/images/8/8c/SMAX202305_BI_integ_file_id.png\" title=\"/file/images/8/8c/SMAX202305_BI_integ_file_id.png\"> <img alt=\"SMAX202305_BI_integ_file_id\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/8/8c/SMAX202305_BI_integ_file_id.png\" height=\"388\" hspace=\"0\" src=\"../../../images/SMAX202305_BI_integ_file_id_bacc8458.png\" style=\"width: 800px; height: 388px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"800\"/> </a></div>\n</li>\n<li>\n<p>There will be several files. Record the names of all the files.</p>\n</li>\n<li>\n<p>For each <strong>FileId</strong>, run the BI file-list REST call and download the file to your downloads directory. A file download starts. The file name format is <b>&lt;record_type&gt;.zip</b>. For information on the format of the output files, see <a href=\"/doc/423/26.1/biintegrationapi#BI_Output_format\" title=\"SMAX:25.1/BIIntegrationAPI\">Output format</a>.<br/>\n<a class=\"image\" href=\"/file/images/8/8d/SMAX202305_BI_integ_file_download.png\" title=\"/file/images/8/8d/SMAX202305_BI_integ_file_download.png\"> <img alt=\"SMAX202305_BI_integ_file_download\" border=\"0\" file=\"https://staging.docs.microfocus.com/mediawiki/images/8/8d/SMAX202305_BI_integ_file_download.png\" height=\"309\" hspace=\"0\" src=\"../../../images/SMAX202305_BI_integ_file_download_76a4a05a.png\" style=\"width: 700px; height: 309px; margin: 0px; border: 0px solid black;\" vspace=\"0\" width=\"700\"/> </a></p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">\n<ul>\n<li>If the system contains a large amount of data, the output files may be split into multiple files. Thus, it's possible to have more than one file per record type.</li>\n<li>The BI files are deleted from the system after the defined preserving time exceeds. Make sure to download the files before they are deleted.</li>\n</ul>\n</div>\n</div>\n</li>\n<li>\n<p>Update some requests and incidents, making sure to change some of the properties defined in the BI configuration. In addition, create some new requests and incidents.</p>\n</li>\n<li>\n<p>In an external REST tool, create a JSON file with the same parameters as above.</p>\n<p>Run the BI Ongoing data sync REST call: <code>POST: &lt;host&gt;:&lt;port&gt;/rest/&lt;tenantId&gt;/bi/ongoing/new</code>. The body should be: <code>{\"BiSyncConfigurationName\":\"&lt;configuration name&gt;\",\"LastUpdateTime\":\"&lt;timestamp&gt;\",\"SyncEndTime\":\"&lt;timestamp&gt;\"}</code>. For the time of the previous sync, enter the LastUpdateTime value from the output of the Status REST call in step 7.</p>\n<p>For an example of the response JSON, see <a href=\"/doc/423/26.1/biintegrationapi#Ongoing\" title=\"SMAX:25.1/BIIntegrationAPI\">Ongoing data sync</a>.</p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">\n<p>Some of the files may not contain any data, depending on the time between the initial sync and the ongoing sync and the number of updates performed.</p>\n</div>\n</div>\n</li>\n<li>\n<p>Using the <code>syncId</code> from the response body, call the Get Status API:</p>\n<p><code>GET: &lt;host&gt;:&lt;port&gt;/rest/&lt;tenantId&gt;/bi/status/&lt;syncId&gt;</code></p>\n<p>Save the output in an external tool for later reference. The status response includes a status for each output file. If they are all COMPLETE, you can proceed. If not, run the status command again. Save the <b>FileId</b> value from each section of the response JSON in an external tool.</p>\n</li>\n<li>\n<p>For each <strong>FileId</strong>, run the BI file-list REST call and download the file to your downloads directory. For information on the format of the output files, see <a href=\"/doc/423/26.1/biintegrationapi#BI_Output_format\" title=\"SMAX:25.1/BIIntegrationAPI\">Output format</a>.</p>\n<div class=\"admonition\">\n<div class=\"admonition-icon admonition-note-icon\"></div>\n<div class=\"admonition-content admonition-note-content\">\n<ul>\n<li>If the system contains a large amount of data, the output files may be split into multiple files. Thus, it's possible to have more than one file per record type.</li>\n<li>The BI files are deleted from the system after the defined preserving time exceeds. Make sure to download the files before they are deleted.</li>\n</ul>\n</div>\n</div>\n</li>\n</ol>\n<h3 id=\"Load_the_data_into_Excel\">Load the data into Excel</h3>\n<p>Navigate to where the downloaded files are, and unzip them. On completion of the preceding steps, there are the following files:</p>\n<div><a class=\"image\" href=\"/file/images/3/3d/2018.08_Helpcenter/Resources/Images/Platform/bi-sync-4.png\" title=\"/file/images/3/3d/2018.08_Helpcenter/Resources/Images/Platform/bi-sync-4.png\"> <img alt=\"Downloaded files\" src=\"../../../images/bi-sync-4_828a09a1.png\"/> </a></div>\n<ol>\n<li>\n<p>Open each of the files and save them as Excel files.</p>\n</li>\n<li>\n<p>Open the file PersonToGroup. This file stores the relationships between people and groups.</p>\n</li>\n<li>\n<p>After the <b>SecondEntity_PersonGroup</b> column, add these new columns:</p>\n<ul>\n<li>\n<p>Group Name</p>\n</li>\n<li>\n<p>Person Name</p>\n</li>\n</ul>\n</li>\n<li>\n<p>In the <b>Group Name</b> field paste the following formula:</p>\n<pre> =VLOOKUP(D2,PersonGroup_0!C$2:D$800,2,FALSE) </pre>\n<p>When you save the formula a file selector opens. Select the <b>Person_group_0.xlsx</b> file created above.</p>\n</li>\n<li>\n<p>In the <b>Person Name</b> field paste the following formula:</p>\n<pre> =VLOOKUP(C2, Person_0!C$2:D$800,2,FALSE)</pre>\n<p>When the file selector window opens, select the <b>Person_0.xlsx</b> file created above.</p>\n<p>Note You should replace the <b>800</b> in the formulas above with the total number of rows in the referenced spreadsheet.</p>\n<p>In excel it should look like the following:</p>\n<br/>\n<a class=\"image\" href=\"/file/images/1/1b/2018.08_Helpcenter/Resources/Images/Platform/bi-sync-5.png\" title=\"/file/images/1/1b/2018.08_Helpcenter/Resources/Images/Platform/bi-sync-5.png\"> <img alt=\"Downloaded data\" src=\"../../../images/bi-sync-5_516953d2.png\"/> </a></li>\n<li>\n<p>Copy the formula for columns E and F for all entries, and add a filter to the top row.</p>\n<p>It's now possible to filter on group or person and see all of the associated values.</p>\n</li>\n</ol>\n<h2 class=\"mw-headline\">Native SACM limitation</h2>\n<p>When Native SACM is enabled, Business Intelligence (BI) Synchronization APIs only pull data from the Service Management database and do not extract data federated from UCMDB. For example, you will not be able to see the current CI Relationship data (many-to-many relationship).</p>\n<h2 class=\"mw-headline\" id=\"Related_topics\">Related topics</h2>\n<ul>\n<li><a href=\"/doc/423/26.1/opbuseendpoints\" title=\"SMAX:25.1/OpbUseEndpoints\">How to use endpoints</a></li>\n<li><a href=\"/doc/423/26.1/opbsecurity\" title=\"SMAX:25.1/OpbSecurity\">On-Premises Bridge security additional information</a></li>\n</ul>\n<p class=\"mw-empty-elt\"></p></div>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}