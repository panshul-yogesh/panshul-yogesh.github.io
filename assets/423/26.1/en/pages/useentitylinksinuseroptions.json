{
  "title": "Use entity links in user options",
  "content": "<div class=\"mw-parser-output\">\n<p><br/>\nA tenant admin can create user options that act as entity links in the following record types: Offering, Fulfillment Plan, Incident Model, Change Model, and Release Model. This feature enables portal users and agent users to access data from Service Management tables when submitting requests and handling incident, change, and release records. You can use this feature to do the following:</p>\n<ul>\n<li><i>Define Entity Link user options:</i> In offerings, fulfillment plans, incident models, change models, and release models, a new field type Entity Link is available on their User options tab. The tenant admin or an agent user with Create and Update permissions in Offering, Change Model, Incident Model, and Release Model can create entity link user options. </li>\n<li><i>Define suggested values for entity links:</i> The tenant admin or an agent user with Create and Update permissions in Offering, Change Model, Incident Model, and Release Model can use the \"Define suggested values for entity link based on filter\" rule template to control what user option values are available for selection by portal users and agent users.</li>\n<li><i>Have role-based access to user option values:</i> Portal users and agent users will receive a message indicating that they aren't authorized to view the record type if their user roles don't have the permission. If you want to allow ESS users or agent users to access specific record types, you can create a custom role with the View permission to the record types and add this role to the Person workflow, as described in this topic.</li>\n<li><i>Filter and group records in grid views and reports by entity link user option value (for agent users)</i><br/>\n<b>Note</b>: This feature doesn't support filtering or grouping records in grid views and reports by entity link user option related field's value.</li>\n</ul>\n<p>As an example, the following describes how entity links can be used in user options of an offering. For the rest of the record types listed above, entity links can be used in a similar way.</p>\n<h2 class=\"mw-headline\" id=\"Configure_application_settings\">Configure application settings</h2>\n<div class=\"transcontent stn-begin--enable_custom_entity_link\"> </div>\n<p>Perform this task as the tenant admin.</p>\n<ol>\n<li>Log in to Service Management.</li>\n<li>Navigate to <b>Administration</b> &gt; <b>Configuration</b> &gt; <b>Application Settings</b>.</li>\n<li>Set the <b>Enable a custom entity link between two out-of-the-box record types</b> option to <b>On</b>, and then click <b>Save</b>.</li>\n</ol>\n<p>This setting controls what record types are available for selection in user options: If it's enabled, a custom entity link can be linked to any record types including out-of-the-box entities; if disabled (default), a custom entity link can only be linked to Person, Group or a custom record type.</p>\n<div class=\"transcontent stn-end--enable_custom_entity_link\"> </div>\n<h2 class=\"mw-headline\" id=\"Create_an_entity_link_user_option\">Create an entity link user option</h2>\n<p><b>Note</b>: The tenant admin or an agent user with Create and Update permissions in Offering, Change Model, Incident Model, and Release Model can create entity link user options. In this example, perform this task as the tenant admin or an agent user with Create and Update permissions in Offering.</p>\n<ol>\n<li>Navigate to <b>Service Catalog</b> &gt; <b>Offerings</b>, and then create a new offering or open an existing offering.</li>\n<li>On the <b>User options</b> tab, add a new field of the Entity Link type. The following is an example:\n\t<ul>\n<li>Display name: enter <b>Computer</b></li>\n<li>Field type: select <b>Entity Link</b></li>\n<li>Visibility: select <b>User</b></li>\n<li>Entity type: select <b>Device</b></li>\n</ul>\n<a class=\"image\" href=\"/file/images/b/b3/SMA_2019.05_add_entity_link.png\" title=\"/file/images/b/b3/SMA_2019.05_add_entity_link.png\"> <img alt=\"SMA 2019.05 add entity link.png\" data-file-height=\"351\" data-file-width=\"529\" height=\"351\" src=\"../../../images/SMA_2019.05_add_entity_link_b7ba80ab.png\" width=\"529\"/> </a></li>\n<li>Save the offering.</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Define_suggested_values_for_the_entity_link_user_option\">Define suggested values for the entity link user option</h2>\n<p><b>Note</b>: The tenant admin or an agent user with Create and Update permissions in Offering, Change Model, Incident Model, and Release Model can define suggested values for entity link user options. In this example, perform this task as the tenant admin or an agent user with Create and Update permissions in Offering.</p>\n<p>Use a field selection rule template to further control what entity link user option values are available for selection by portal users or agent users. In this example, we will define a rule that allows only devices that have a cost type of \"Hardware maintenance\" (ID: 10177) to be available for selection when users are requesting the offering.</p>\n<ol>\n<li>In the offering record, click <b>Rules</b>&gt; <b>Rendering forms </b>&gt; <b>Add a rule to run before request record rules</b> &gt; <b>Simple rule</b>, and then select the <b>Define suggested values for entity link based on filter</b> template. Click <b>OK</b>.</li>\n<li>Set the parameters to define a filter for the user option:\n\t<ul>\n<li>field: select the entity link user option that you created.</li>\n<li>title: Enter a title.</li>\n<li>all records: Define a filter. For example: <b>CostTypeIN${'10177'}</b></li>\n</ul>\n\tThe following figure shows an example.<br/>\n<a class=\"image\" href=\"/file/images/thumb/5/5d/SMA_2019.05_entity_link_suggested_values.png/800px-SMA_2019.05_entity_link_suggested_values.png\" title=\"/file/images/thumb/5/5d/SMA_2019.05_entity_link_suggested_values.png/800px-SMA_2019.05_entity_link_suggested_values.png\"> <img alt=\"SMA 2019.05 entity link suggested values.png\" data-file-height=\"248\" data-file-width=\"1164\" height=\"170\" src=\"../../../images/800px-SMA_2019.05_entity_link_suggested_values_1f92871e.png\" width=\"800\"/> </a></li>\n<li>Save the offering.</li>\n<li>Go to <b>Service Asset &amp; Configuration</b>, and then edit three device records to set their cost type to \"Hardware maintenance\" so that in the next step you can test the example \"suggested values\" rule that you have configured.<br/>\n<a class=\"image\" href=\"/file/images/thumb/c/cc/SMA_2019.05_device_cost_type.png/800px-SMA_2019.05_device_cost_type.png\" title=\"/file/images/thumb/c/cc/SMA_2019.05_device_cost_type.png/800px-SMA_2019.05_device_cost_type.png\"> <img alt=\"SMA 2019.05 device cost type.png\" data-file-height=\"308\" data-file-width=\"831\" height=\"297\" src=\"../../../images/800px-SMA_2019.05_device_cost_type_fb36c157.png\" width=\"800\"/> </a></li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Submit_requests_in_Service_Portal\">Submit requests in Service Portal</h2>\n<p>Submit requests for the offering as a portal user. </p>\n<ol>\n<li>Enable the portal user to access the specified record type:\n\t<ol start=\"1\">\n<li>Log in to Service Management as the tenant admin.</li>\n<li>Go to <b>Administration</b> &gt; <b>People</b>, open the user record, and in the <b>System use definitions</b> section add the <b>Asset &amp; Configuration Manager</b> role. This is because role-based access to user option record types is implemented for both portal users and agent users and the <b>Asset &amp; Configuration Manager</b> role has access to the Device record type used in this example.</li>\n</ol>\n</li>\n<li>Log in to Service Portal as the portal user, and then submit multiple requests for the offering. Check that only values that meet the \"suggested values\" rule condition are displayed in the user option field, as shown in the following example figure.</li>\n</ol>\n<p><a class=\"image\" href=\"/file/images/thumb/b/b4/SMA_2019.05_suggested_values_in_requests.png/800px-SMA_2019.05_suggested_values_in_requests.png\" title=\"/file/images/thumb/b/b4/SMA_2019.05_suggested_values_in_requests.png/800px-SMA_2019.05_suggested_values_in_requests.png\"> <img alt=\"SMA 2019.05 suggested values in requests.png\" data-file-height=\"509\" data-file-width=\"1033\" height=\"394\" src=\"../../../images/800px-SMA_2019.05_suggested_values_in_requests_7aaff0cf.png\" width=\"800\"/> </a><br/>\n<b>Note</b>: if the user has no access to the record type, when the user clicks the user option field in Service Portal, a message is displayed indicating the user isn't authorized to view the record type.</p>\n<h2 class=\"mw-headline\" id=\"View_entity_link_values_in_request_records\">View entity link values in request records</h2>\n<p>Perform this task as an agent user. </p>\n<ol>\n<li>Log in to Service Management as an agent user.</li>\n<li>Click <b>Service Request</b>.</li>\n<li>On the upper left corner, click <b>Add filter</b>, select <b>Offering</b> and then select the offering record for which you configured the entity link user option. The requests submitted are displayed.<br/>\n<a class=\"image\" href=\"/file/images/thumb/c/c0/SMA_2019.05_filter_requests_entity_link.png/800px-SMA_2019.05_filter_requests_entity_link.png\" title=\"/file/images/thumb/c/c0/SMA_2019.05_filter_requests_entity_link.png/800px-SMA_2019.05_filter_requests_entity_link.png\"> <img alt=\"SMA 2019.05 filter requests entity link.png\" data-file-height=\"335\" data-file-width=\"1221\" height=\"219\" src=\"../../../images/800px-SMA_2019.05_filter_requests_entity_link_0867b21a.png\" width=\"800\"/> </a></li>\n<li>Click <strong>Columns</strong>, and add the user option field as a column to the view.<br/>\n<a class=\"image\" href=\"/file/images/1/19/SMA_2019.05_add_entity_link_column.png\" title=\"/file/images/1/19/SMA_2019.05_add_entity_link_column.png\"> <img alt=\"SMA 2019.05 add entity link column.png\" data-file-height=\"403\" data-file-width=\"671\" height=\"403\" src=\"../../../images/SMA_2019.05_add_entity_link_column_9161c10e.png\" width=\"671\"/> </a><br/>\n\tThe new column is added.<br/>\n<a class=\"image\" href=\"/file/images/thumb/5/5c/SMA_2019.05_entity_link_column.png/800px-SMA_2019.05_entity_link_column.png\" title=\"/file/images/thumb/5/5c/SMA_2019.05_entity_link_column.png/800px-SMA_2019.05_entity_link_column.png\"> <img alt=\"SMA 2019.05 entity link column.png\" data-file-height=\"332\" data-file-width=\"1364\" height=\"195\" src=\"../../../images/800px-SMA_2019.05_entity_link_column_b761b547.png\" width=\"800\"/> </a></li>\n<li>Expand the \"Group by\" pane, and select the user option field as a group-by field.<br/>\n<a class=\"image\" href=\"/file/images/c/cc/SMA_2019.05_group_by_entity_link1.png\" title=\"/file/images/c/cc/SMA_2019.05_group_by_entity_link1.png\"> <img alt=\"SMA 2019.05 group by entity link1.png\" data-file-height=\"461\" data-file-width=\"252\" height=\"461\" src=\"../../../images/SMA_2019.05_group_by_entity_link1_cf5b5cd9.png\" width=\"252\"/> </a> <a class=\"image\" href=\"/file/images/b/b3/SMA_2019.05_group_by_entity_link2.png\" title=\"/file/images/b/b3/SMA_2019.05_group_by_entity_link2.png\"> <img alt=\"SMA 2019.05 group by entity link2.png\" data-file-height=\"370\" data-file-width=\"244\" height=\"370\" src=\"../../../images/SMA_2019.05_group_by_entity_link2_6dfa80b8.png\" width=\"244\"/> </a></li>\n<li>Click the <b>Add filter</b> box next to the offering filter box, select the user option field, and then enter a user option value to further filter the records.<br/>\n<b>Note:</b> Numerous entity link filters will potentially increase the query complexity, thus impacting the filtering performance at a certain level. For optimal performance, we recommend that you add no more than two entity link filters.<br/>\n<a class=\"image\" href=\"/file/images/thumb/5/5c/SMA_2019.05_entity_link_value_filter.png/800px-SMA_2019.05_entity_link_value_filter.png\" title=\"/file/images/thumb/5/5c/SMA_2019.05_entity_link_value_filter.png/800px-SMA_2019.05_entity_link_value_filter.png\"> <img alt=\"SMA 2019.05 entity link value filter.png\" data-file-height=\"345\" data-file-width=\"1399\" height=\"197\" src=\"../../../images/800px-SMA_2019.05_entity_link_value_filter_b38c0387.png\" width=\"800\"/> </a></li>\n<li>Open the record to check that the user option value is displayed in the \"Catalog offering\" section.<br/>\n<a class=\"image\" href=\"/file/images/d/d0/SMA_2019.05_entity_link_in_request.png\" title=\"/file/images/d/d0/SMA_2019.05_entity_link_in_request.png\"> <img alt=\"SMA 2019.05 entity link in request.png\" data-file-height=\"206\" data-file-width=\"861\" height=\"206\" src=\"../../../images/SMA_2019.05_entity_link_in_request_acf763c4.png\" width=\"861\"/> </a></li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Work_with_entity_link_values_in_reports\">Work with entity link values in reports</h2>\n<p>When working with request, incident, change, and release records created based on an offering or a model that's configured with a user option of the Entity Link field type, agent users can:</p>\n<ul>\n<li>Display user option entity links in an ORD report column</li>\n<li>Group records by entity link user option value in Analytic and Operational reports</li>\n<li>Filter records by entity link user option value in all reports except survey analytic reports</li>\n</ul>\n<p>Perform the following steps as an agent user to work with entity link user option values in Request reports.</p>\n<ol>\n<li>Log in to Service Management as an agent user. </li>\n<li>Create a report with a record type of Request. For example, create an operational report. </li>\n<li>Filter data first by the offering, and then group data by the entity link user option field.<br/>\n<a class=\"image\" href=\"/file/images/thumb/f/f1/SMA_2019.05_filter_group_by_entity_link.png/800px-SMA_2019.05_filter_group_by_entity_link.png\" title=\"/file/images/thumb/f/f1/SMA_2019.05_filter_group_by_entity_link.png/800px-SMA_2019.05_filter_group_by_entity_link.png\"> <img alt=\"SMA 2019.05 filter group by entity link.png\" data-file-height=\"678\" data-file-width=\"1344\" height=\"404\" src=\"../../../images/800px-SMA_2019.05_filter_group_by_entity_link_1b545fde.png\" width=\"800\"/> </a></li>\n<li>You can further filter the data by entity link user option value.<br/>\n<a class=\"image\" href=\"/file/images/5/52/SMA_2019.05_filter_report_by_entity_link.png\" title=\"/file/images/5/52/SMA_2019.05_filter_report_by_entity_link.png\"> <img alt=\"SMA 2019.05 filter report by entity link.png\" data-file-height=\"624\" data-file-width=\"597\" height=\"624\" src=\"../../../images/SMA_2019.05_filter_report_by_entity_link_8d8f0f53.png\" width=\"597\"/> </a></li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Add_a_custom_ESS_role_in_the_Person_workflow\">Add a custom ESS role in the Person workflow</h2>\n<p>To ensure that ESS users can access the record types defined in the user option entity links, we recommend you to create a custom role with required privileges and assign the role to ESS users through the Person workflow. </p>\n<p>To do this, perform these steps as the tenant admin:</p>\n<ol>\n<li>Navigate to <b>Administration</b> &gt; <b>Master data</b>, click <b>People</b> &gt; <b>ROLES</b>, and then click <b>Add</b> to create a custom role (for example, “ESS New Role”) with required privileges on the record types. For example, you can create a custom role with the View permission to the Device table.</li>\n<li>As a tenant admin, go to <b>Administration</b> &gt; <b>Configuration</b> &gt; <b>Studio</b>.</li>\n<li>Select <b>Person</b> from the entity list.</li>\n<li>Go to the “Processes and Rules” tab, and make sure that the <b>Person</b> heading (not any of its subheadings) on the lower left pane is selected.<br/>\n<a class=\"image\" href=\"/file/images/d/d5/SMA_2019.05_entity_link_person_add_role.png\" title=\"/file/images/d/d5/SMA_2019.05_entity_link_person_add_role.png\"> <img alt=\"SMA 2019.05 entity link person add role.png\" data-file-height=\"661\" data-file-width=\"961\" height=\"661\" src=\"../../../images/SMA_2019.05_entity_link_person_add_role_c76d11b9.png\" width=\"961\"/> </a></li>\n<li>Navigate to <b>Rules</b> &gt; <b>After applying changes</b>, and then click <b>+ Add</b> to add an “If…Then” rule.</li>\n<li>Select the <b>Add roles</b> rule template.</li>\n<li>Click the “expression” field of the rule, and then enter the following string:\n\t<pre>${entity.IsPermitted(null,'ESS New Role') == false}</pre>\n</li>\n<li>Click the “roles” field of the rule, and then select the new role (“ESS New Role”) from the list.</li>\n<li>Click <b>Save</b>. </li>\n</ol>\n<p><b>Notes</b>:</p>\n<ul>\n<li>The custom role will be added to users on user creation or user update.</li>\n<li>If you have added custom fields of the ENTITY_LINK type to the Request entity, you may follow the same steps above to allow agent users to access the record types.</li>\n</ul>\n<h2 class=\"mw-headline\" id=\"Related_topics\">Related topics</h2>\n<ul>\n<li><a href=\"/doc/423/26.1/useentitylinksuseroptionsindsl\" title=\"SMAX:25.1/UseEntityLinksUserOptionsInDSL\">Use entity link user options in DSL expressions</a></li>\n</ul>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}