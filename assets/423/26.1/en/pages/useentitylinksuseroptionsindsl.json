{
  "title": "Use entity link user options in DSL expressions",
  "content": "<div class=\"mw-parser-output\">\n<p><br/>\nYou can use entity link user options in DSL expressions so that related entity attributes can be easily used in DSL to improve the effectiveness of Service Management.<br/>\n<b>Notes</b>:</p>\n<ul>\n<li>This feature supports user options of both out-of-the-box (OOB) and custom entities.</li>\n<li>You can use DSL expressions with entity link user options in the following areas:\n\t<ul>\n<li>task plans in offerings and in change / incident / release models.</li>\n<li>business rules in offerings and in change / incident / release models.</li>\n<li>business rules in workflows.</li>\n</ul>\n</li>\n</ul>\n<p>You can use this feature as follows:</p>\n<ul>\n<li>Use entity link user options directly in DSL. For example: <code>entity.UserOptions.MyOption</code> (return ID).</li>\n<li>Use entity related OOB fields in DSL. For example: <code>entity.UserOptions.MyOption.OOBField</code>.</li>\n<li>Use entity related custom fields in DSL. For example: <code>entity.UserOptions.MyOption.CustomField</code>.</li>\n</ul>\n<p>The following sections describe some example use cases.</p>\n<h2 class=\"mw-headline\" id=\"Use_case_1:_Use_an_entity_link_user_option_in_the_task_plan_of_an_offering\">Use case 1: Use an entity link user option in the task plan of an offering</h2>\n<p>A user submits a support request for a reboot of oneÂ VM. The relevant offering has an automated task defined. The automated task, once completed, triggers an action that captures and displays the physical information of the specified device (VM) in the request. This process involves the following steps.</p>\n<h3 class=\"mw-headline\" id=\"Step_1:_Enable_custom_entity_link_to_support_OOTB_entities\">Step 1: Enable a custom entity link between two out-of-the-box record types</h3>\n<div class=\"transcontent lst-SMAX:25.1/UseEntityLinksInUserOptions--enable_custom_entity_link_\"></div>\n<h3 class=\"mw-headline\" id=\"Step_2:_Create_an_entity_link_user_option_in_an_offering\">Step 2: Create an entity link user option in an offering</h3>\n<ol>\n<li>Create an offering or open an existing offering record. In this example, a sample offering named \"PC and laptop support\" is used.</li>\n<li>On the <b>User options</b> tab, add an entity link user option and then click <b>Save</b>:\n\t<ul>\n<li>Display name: <b>Target Host</b></li>\n<li>Field type: <b>Entity Link</b></li>\n<li>Visibility: <b>User</b></li>\n<li>Entity type: <b>device</b></li>\n</ul>\n\tSee the following figure.<br/>\n<a class=\"image\" href=\"/file/images/thumb/0/0a/SMA_201908_entity_link_user_option_in_offering.png/1200px-SMA_201908_entity_link_user_option_in_offering.png\" title=\"/file/images/thumb/0/0a/SMA_201908_entity_link_user_option_in_offering.png/1200px-SMA_201908_entity_link_user_option_in_offering.png\"> <img alt=\"SMA 201908 entity link user option in offering.png\" data-file-height=\"506\" data-file-width=\"1611\" height=\"377\" src=\"../../../images/1200px-SMA_201908_entity_link_user_option_in_offering_7abeeedc.png\" width=\"1200\"/> </a></li>\n</ol>\n<h3 class=\"mw-headline\" id=\"Step_3:_Create_a_task_plan_for_the_offering\">Step 3: Create a task plan for the offering</h3>\n<p>In this step, you will create an automated task for the offering mentioned in the previous step.</p>\n<ol>\n<li>On the <b>Task Plan</b> tab, click the edit icon of the <b>Start</b> button to add an automated task.</li>\n<li>In the Title field, enter <b>Capture VM physical info</b>.</li>\n<li>Expand <b>Business rule</b> and then click <b>Set rule</b>.</li>\n<li>Select the<b> Set Field</b> action, and then click <b>OK</b>.</li>\n<li>Click the <b>field</b> link, select <b>Description</b> from the field list, and then click <b>OK</b>.</li>\n<li>Click the<b> value</b> link, click the <i><b>fx</b></i> icon, and then enter the following expression:\n\t<pre>${concat(entity.Description, '&lt;br&gt;The following is info of the target host', '&lt;br&gt;Hostname: ', entity.UserOptions.TargetHost_c.HostName, '&lt;br&gt;FQDN: ', entity.UserOptions.TargetHost_c.FQDN_c, '&lt;br&gt;MemorySize: ', entity.UserOptions.TargetHost_c.MemorySize, '&lt;br&gt;OsName: ',  entity.UserOptions.TargetHost_c.OsName, '&lt;br&gt;PrimaryIPAddress: ', entity.UserOptions.TargetHost_c.PrimaryIPAddress_c)}</pre>\n</li>\n<li>Click <b>OK</b>.<br/>\n\tThe task plan is added. The business rule in the task plan will capture and display the physical information such as the FQDN and OS for a specific user option value (device) in the request's Description field.<br/>\n<a class=\"image\" href=\"/file/images/1/1f/SMA_201908_task_plan_in_offering.png\" title=\"/file/images/1/1f/SMA_201908_task_plan_in_offering.png\"> <img alt=\"SMA 201908 task plan in offering.png\" data-file-height=\"586\" data-file-width=\"1089\" height=\"586\" src=\"../../../images/SMA_201908_task_plan_in_offering_3e47ad89.png\" width=\"1089\"/> </a></li>\n</ol>\n<h3 class=\"mw-headline\" id=\"Step_4:_Submit_a_request_in_Service_Portal\">Step 4: Submit a request in Service Portal</h3>\n<p>Log in to Service Portal, and then submit a request for the offering by entering a device name in the Target Host field.<br/>\n<a class=\"image\" href=\"/file/images/2/2a/SMA_201908_reboot_VM.png\" title=\"/file/images/2/2a/SMA_201908_reboot_VM.png\"> <img alt=\"SMA 201908 reboot VM.png\" data-file-height=\"669\" data-file-width=\"874\" height=\"669\" src=\"../../../images/SMA_201908_reboot_VM_970cef95.png\" width=\"874\"/> </a><br/>\nA request is created with a request ID.</p>\n<h3 class=\"mw-headline\" id=\"Step_5:_Assign_the_request_to_an_agent\">Step 5: Assign the request to an agent</h3>\n<p>Return to the agent interface, and open the request created, and then go to the Assignment section to assign the request to an agent.</p>\n<ul>\n<li>Current assignment: Service Desk</li>\n<li>Service desk group: Backup support</li>\n<li>Owner: select an agent</li>\n</ul>\n<p><a class=\"image\" href=\"/file/images/9/9c/SMA_201908_assign_request.png\" title=\"/file/images/9/9c/SMA_201908_assign_request.png\"> <img alt=\"SMA 201908 assign request.png\" data-file-height=\"202\" data-file-width=\"1625\" height=\"202\" src=\"../../../images/SMA_201908_assign_request_f5962c35.png\" width=\"1625\"/> </a><br/>\nOnce the request has been assigned, the Description field is updated with the VM's physical information, as shown in the following figure.<br/>\n<a class=\"image\" href=\"/file/images/c/ca/SMA_201908_capture_VM_info.png\" title=\"/file/images/c/ca/SMA_201908_capture_VM_info.png\"> <img alt=\"SMA 201908 capture VM info.png\" data-file-height=\"536\" data-file-width=\"1011\" height=\"536\" src=\"../../../images/SMA_201908_capture_VM_info_625db6c3.png\" width=\"1011\"/> </a></p>\n<h2 class=\"mw-headline\" id=\"Use_case_2:_Use_an_entity_link_user_option_in_a_workflow\">Use case 2: Use an entity link user option in a workflow</h2>\n<p>In this use case, you create a rule for the first line support phase of the Request workflow. This rule will trigger an action that captures and displays the physical information of a device that's specified in a support request for a specific offering. In this example, you will use the same offering used in Use Case 1. Before you proceed, delete the task that you created in use case 1 from the Task Plan tab of offering.</p>\n<h3 class=\"mw-headline\" id=\"Step_1:_Create_a_rule_in_the_Request_workflow\">Step 1: Create a rule in the Request workflow</h3>\n<ol>\n<li>In the agent interface, go to <b>Administration</b> &gt;<b> Studio</b>.</li>\n<li>Open the <b>Request</b> entity record, click the <b>Processes and Rules</b> tab.</li>\n<li>On the left-side pane, click<b> Support</b> &gt; <b>Fulfillment</b> &gt; <b>First line support</b>. On the right-side pane, click the<b> Rules </b>tab, and then click <b>Add</b> under the <b>After change</b> section to add a \"If...Then\" rule:\n\t<ol>\n<li>In the Actions list, select<b> Set field</b>, and then click <b>OK</b>.</li>\n<li>Click the <b>expression</b> link, and enter the following condition and then click <b>OK</b>.\n\t\t<pre>${entity.RequestsOffering.DisplayLabel=='PC and laptop support'}</pre>\n</li>\n<li>Click the<b> field</b> link, select the <b>Description </b>field from the list and then click <b>OK</b>.</li>\n<li>Click the <b>value</b> link, click the <i><b>fx </b></i>icon, and then enter the following expression and click <b>Save</b>:\n\t\t<pre>${concat(entity.Description, '&lt;br&gt;The following is info of the target host', '&lt;br&gt;Hostname: ', entity.UserOptions.TargetHost_c.HostName, '&lt;br&gt;FQDN: ', entity.UserOptions.TargetHost_c.FQDN_c, '&lt;br&gt;MemorySize: ', entity.UserOptions.TargetHost_c.MemorySize, '&lt;br&gt;OsName: ',  entity.UserOptions.TargetHost_c.OsName, '&lt;br&gt;PrimaryIPAddress: ', entity.UserOptions.TargetHost_c.PrimaryIPAddress_c)}</pre>\n</li>\n<li>The following figure shows the rule has been added.<br/>\n<a class=\"image\" href=\"/file/images/thumb/3/3f/SMA_201908_add_rule_in_workflow.png/1200px-SMA_201908_add_rule_in_workflow.png\" title=\"/file/images/thumb/3/3f/SMA_201908_add_rule_in_workflow.png/1200px-SMA_201908_add_rule_in_workflow.png\"> <img alt=\"SMA 201908 add rule in workflow.png\" data-file-height=\"793\" data-file-width=\"1871\" height=\"509\" src=\"../../../images/1200px-SMA_201908_add_rule_in_workflow_8ec79672.png\" width=\"1200\"/> </a></li>\n</ol>\n</li>\n</ol>\n<h3 class=\"mw-headline\" id=\"Step_2:_Submit_a_request_for_the_offering\">Step 2: Submit a request for the offering</h3>\n<p>In Service Portal, submit a request for the offering defined in the rule in the previous step. A request is created with a request ID.</p>\n<h3 class=\"mw-headline\" id=\"Step_3:_Assign_the_request_in_the_agent_interface\">Step 3: Assign the request in the agent interface</h3>\n<ol>\n<li>In the agent interface, open the request record created. At this point, the rule action isn't triggered yet, and hence the Description field contains no device information.</li>\n<li>Go to the Assignment section, assign the request to an agent and then save the request:\n\t<ul>\n<li>Current assignment: <b>Service Desk</b></li>\n<li>Service desk group: <b>Backup support</b></li>\n<li>Owner: select an agent</li>\n</ul>\n\tOnce the request has been assigned, the action defined in the rule is triggered. That is, the physical information of the device is automatically added to the Description field.</li>\n<li>Verify that the Description field now contains desired device information.</li>\n</ol>\n<h2 class=\"mw-headline\" id=\"Related_topics\">Related topics</h2>\n<ul>\n<li><a href=\"/doc/423/26.1/useentitylinksinuseroptions\" title=\"SMAX:25.1/UseEntityLinksInUserOptions\">Use entity links in user options</a></li>\n</ul>\n</div>",
  "modifiedon": "2025-10-24 08:51:12"
}