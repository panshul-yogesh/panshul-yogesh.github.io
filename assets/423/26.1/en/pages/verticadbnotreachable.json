{
  "title": "Vertica database not reachable",
  "content": "<div class=\"mw-parser-output\"><p class=\"mw-empty-elt\">\n</p><p>Liquibase stops responding waiting to acquire database change lock when creating the schema.</p>\n<p>The following failure message is displayed:</p>\n<pre>SQLNonTransientConnectionException: [Vertica][VJDBC](100176) Failed to connect to host....</pre>\n<p><br/>\nWhen the problem occurs, the Budget Quota policies page will be slow to refresh and return on cost data for organizations. The CSA Collector will stop processing new subscription data.</p>\n<p><br/>\n<b>The Cost Policy container would contain the following error messages in log file:</b></p>\n<pre> ... c.m.h.j.rest.RestTemplateFactory         : POST 500 <a href=\"https://hcm-csa-collector-svc.hcm2.svc.cluster.local:9992/csa-collector/v1/organizationspend/?currency=USD&amp;startTime=2017-12-01T00:28:42Z\" rel=\"nofollow\" target=\"1\">https://smax-csa-collector-svc.smax2.svc.cluster.local:9992/csa-collector/v1/organizationspend/?currency=USD&amp;startTime=2017-12-01T00:28:42Z</a>\n\n ... c.m.h.u.CostPolicyBudgetEvaluatorService : Failed to retrieve spend for organizations: '[\"...\"]', cost policy: '***'. Error: org.springframework.web.client.HttpServerErrorException: 500\n\n ... c.m.h.u.CostPolicyBudgetEvaluatorService : Organization's spend data: null \n</pre>\n<p><b>The CSA Collector container would contain the following error messages in log file:</b></p>\n<pre>... c.microfocus.smax.collector.TaskExecutor  : No valid connection, stopping further data collection.\n\n ...\n\n ... c.m.h.e.vertica.VerticaClientConnection  : Failed to create the Vertica connection: [Vertica][VJDBC](100176) Failed to connect to host **** on port 5433. Reason: Failed to establish a connection to the primary server or any backup address.\n\n ... c.m.h.e.vertica.VerticaClientConnection  : 0: failed to connect to Vertica.  Trying again in 5 seconds\n\n ... c.m.h.e.vertica.VerticaClientConnection  : Failed to create the Vertica connection: [Vertica][VJDBC](100176) Failed to connect to host **** on port 5433. Reason: Failed to establish a connection to the primary server or any backup address.\n\n ... c.m.h.e.vertica.VerticaClientConnection  : 1: failed to connect to Vertica.  Trying again in 5 seconds\n\n ... c.m.h.e.vertica.VerticaClientConnection  : Failed to create the Vertica connection: [Vertica][VJDBC](100176) Failed to connect to host **** on port 5433. Reason: Failed to establish a connection to the primary server or any backup address.\n\n ... c.m.h.e.vertica.VerticaClientConnection  : 2: failed to connect to Vertica.  Trying again in 5 seconds\n\n ... c.m.h.e.vertica.VerticaClientConnection  : Failed to create the Vertica connection: [Vertica][VJDBC](100176) Failed to connect to host **** on port 5433. Reason: Failed to establish a connection to the primary server or any backup address.\n\n ... c.m.h.e.vertica.VerticaClientConnection  : 3: failed to connect to Vertica.  Trying again in 5 seconds\n\n ... c.m.h.e.vertica.VerticaClientConnection  : Failed to create the Vertica connection: [Vertica][VJDBC](100176) Failed to connect to host **** on port 5433. Reason: Failed to establish a connection to the primary server or any backup address.\n\n ... c.m.h.e.vertica.VerticaClientConnection  : 4: failed to connect to Vertica.  Trying again in 5 seconds\n\n ... c.m.h.e.vertica.VerticaClientConnection  : Failed to establish a connection to Vertica in 5 attempts.\n\n ... .h.e.o.OrganizationSpendExtractorService : Failed to retrieve spend for filtered organizations: [Vertica][VJDBC](100176) Failed to connect to host **** on port 5433. Reason: Failed to establish a connection to the primary server or any backup address.\n</pre>\n<h2 id=\"Cause\">Cause</h2>\n<p>Vertica DB isn't reachable, either the database is down or there is some network problem.</p>\n<h2 id=\"Solution\">Solution</h2>\n<ol>\n<li>Fix the network connection problems, if any.</li>\n<li>Make sure the vertica DB is up. Start the DB if down. Example: As a vertica user:<br/>\n<br/>\n<code>/opt/vertica/bin/admintools -t start_db -d &lt;db_name&gt; -p &lt;db_password&gt; -F</code></li>\n</ol>\n<p class=\"mw-empty-elt\"></p></div>",
  "modifiedon": "2025-10-24 08:51:12"
}