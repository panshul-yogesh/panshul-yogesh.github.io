var eb=Object.defineProperty,tb=Object.defineProperties;var nb=Object.getOwnPropertyDescriptors;var hh=Object.getOwnPropertySymbols;var ib=Object.prototype.hasOwnProperty,rb=Object.prototype.propertyIsEnumerable;var gh=(n,e,t)=>e in n?eb(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,P=(n,e)=>{for(var t in e||={})ib.call(e,t)&&gh(n,t,e[t]);if(hh)for(var t of hh(e))rb.call(e,t)&&gh(n,t,e[t]);return n},W=(n,e)=>tb(n,nb(e));var ct=null,sa=!1,eu=1,ob=null,yt=Symbol("SIGNAL");function q(n){let e=ct;return ct=n,e}function la(){return ct}var _r={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function bo(n){if(sa)throw new Error("");if(ct===null)return;ct.consumerOnSignalRead(n);let e=ct.producersTail;if(e!==void 0&&e.producer===n)return;let t,i=ct.recomputing;if(i&&(t=e!==void 0?e.nextProducer:ct.producers,t!==void 0&&t.producer===n)){ct.producersTail=t,t.lastReadVersion=n.version;return}let r=n.consumersTail;if(r!==void 0&&r.consumer===ct&&(!i||ab(r,ct)))return;let o=br(ct),s={producer:n,consumer:ct,nextProducer:t,prevConsumer:r,lastReadVersion:n.version,nextConsumer:void 0};ct.producersTail=s,e!==void 0?e.nextProducer=s:ct.producers=s,o&&Ch(n,s)}function vh(){eu++}function tu(n){if(!(br(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===eu)){if(!n.producerMustRecompute(n)&&!xo(n)){Jd(n);return}n.producerRecomputeValue(n),Jd(n)}}function nu(n){if(n.consumers===void 0)return;let e=sa;sa=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let i=t.consumer;i.dirty||sb(i)}}finally{sa=e}}function iu(){return ct?.consumerAllowSignalWrites!==!1}function sb(n){n.dirty=!0,nu(n),n.consumerMarkedDirty?.(n)}function Jd(n){n.dirty=!1,n.lastCleanEpoch=eu}function Cr(n){return n&&yh(n),q(n)}function yh(n){n.producersTail=void 0,n.recomputing=!0}function Eo(n,e){q(e),n&&_h(n)}function _h(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(br(n))do t=ru(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function xo(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,i=e.lastReadVersion;if(i!==t.version||(tu(t),i!==t.version))return!0}return!1}function Fi(n){if(br(n)){let e=n.producers;for(;e!==void 0;)e=ru(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Ch(n,e){let t=n.consumersTail,i=br(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!i)for(let r=n.producers;r!==void 0;r=r.nextProducer)Ch(r.producer,r)}function ru(n){let e=n.producer,t=n.nextProducer,i=n.nextConsumer,r=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:e.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(e.consumers=i,!br(e)){let o=e.producers;for(;o!==void 0;)o=ru(o)}return t}function br(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function ou(n){ob?.(n)}function ab(n,e){let t=e.producersTail;if(t!==void 0){let i=e.producers;do{if(i===n)return!0;if(i===t)break;i=i.nextProducer}while(i!==void 0)}return!1}function su(n,e){return Object.is(n,e)}function ca(n,e){let t=Object.create(lb);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(tu(t),bo(t),t.value===aa)throw t.error;return t.value};return i[yt]=t,ou(t),i}var Kd=Symbol("UNSET"),Xd=Symbol("COMPUTING"),aa=Symbol("ERRORED"),lb=W(P({},_r),{value:Kd,dirty:!0,error:null,equal:su,kind:"computed",producerMustRecompute(n){return n.value===Kd||n.value===Xd},producerRecomputeValue(n){if(n.value===Xd)throw new Error("");let e=n.value;n.value=Xd;let t=Cr(n),i,r=!1;try{i=n.computation(),q(null),r=e!==Kd&&e!==aa&&i!==aa&&n.equal(e,i)}catch(o){i=aa,n.error=o}finally{Eo(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function cb(){throw new Error}var bh=cb;function Eh(n){bh(n)}function au(n){bh=n}var db=null;function lu(n,e){let t=Object.create(da);t.value=n,e!==void 0&&(t.equal=e);let i=()=>xh(t);return i[yt]=t,ou(t),[i,s=>Do(t,s),s=>Dh(t,s)]}function xh(n){return bo(n),n.value}function Do(n,e){iu()||Eh(n),n.equal(n.value,e)||(n.value=e,ub(n))}function Dh(n,e){iu()||Eh(n),Do(n,e(n.value))}var da=W(P({},_r),{equal:su,value:void 0,kind:"signal"});function ub(n){n.version++,vh(),nu(n),db?.(n)}function cu(n){let e=q(null);try{return n()}finally{q(e)}}var du=W(P({},_r),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function uu(n){if(n.dirty=!1,n.version>0&&!xo(n))return;n.version++;let e=Cr(n);try{n.cleanup(),n.fn()}finally{Eo(n,e)}}function oe(n){return typeof n=="function"}function si(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ua=si(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Li(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var qe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(oe(i))try{i()}catch(o){e=o instanceof ua?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{wh(o)}catch(s){e=e??[],s instanceof ua?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ua(e)}}add(e){var t;if(e&&e!==this)if(this.closed)wh(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Li(t,e)}remove(e){let{_finalizers:t}=this;t&&Li(t,e),e instanceof n&&e._removeParent(this)}};qe.EMPTY=(()=>{let n=new qe;return n.closed=!0,n})();var pu=qe.EMPTY;function pa(n){return n instanceof qe||n&&"closed"in n&&oe(n.remove)&&oe(n.add)&&oe(n.unsubscribe)}function wh(n){oe(n)?n():n.unsubscribe()}var en={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Er={setTimeout(n,e,...t){let{delegate:i}=Er;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Er;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function fa(n){Er.setTimeout(()=>{let{onUnhandledError:e}=en;if(e)e(n);else throw n})}function wo(){}var Mh=fu("C",void 0,void 0);function Sh(n){return fu("E",void 0,n)}function Ih(n){return fu("N",n,void 0)}function fu(n,e,t){return{kind:n,value:e,error:t}}var Vi=null;function xr(n){if(en.useDeprecatedSynchronousErrorHandling){let e=!Vi;if(e&&(Vi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=Vi;if(Vi=null,t)throw i}}else n()}function Ph(n){en.useDeprecatedSynchronousErrorHandling&&Vi&&(Vi.errorThrown=!0,Vi.error=n)}var ji=class extends qe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,pa(e)&&e.add(this)):this.destination=mb}static create(e,t,i){return new ai(e,t,i)}next(e){this.isStopped?hu(Ih(e),this):this._next(e)}error(e){this.isStopped?hu(Sh(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hu(Mh,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},pb=Function.prototype.bind;function mu(n,e){return pb.call(n,e)}var gu=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){ma(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){ma(i)}else ma(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ma(t)}}},ai=class extends ji{constructor(e,t,i){super();let r;if(oe(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&en.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&mu(e.next,o),error:e.error&&mu(e.error,o),complete:e.complete&&mu(e.complete,o)}):r=e}this.destination=new gu(r)}};function ma(n){en.useDeprecatedSynchronousErrorHandling?Ph(n):fa(n)}function fb(n){throw n}function hu(n,e){let{onStoppedNotification:t}=en;t&&Er.setTimeout(()=>t(n,e))}var mb={closed:!0,next:wo,error:fb,complete:wo};var Dr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function tn(n){return n}function vu(...n){return yu(n)}function yu(n){return n.length===0?tn:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=gb(t)?t:new ai(t,i,r);return xr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=Th(i),new i((r,o)=>{let s=new ai({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Dr](){return this}pipe(...t){return yu(t)(this)}toPromise(t){return t=Th(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function Th(n){var e;return(e=n??en.Promise)!==null&&e!==void 0?e:Promise}function hb(n){return n&&oe(n.next)&&oe(n.error)&&oe(n.complete)}function gb(n){return n&&n instanceof ji||hb(n)&&pa(n)}function vb(n){return oe(n?.lift)}function fe(n){return e=>{if(vb(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function me(n,e,t,i,r){return new _u(n,e,t,i,r)}var _u=class extends ji{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Oh=si(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class n extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new ha(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Oh}next(t){xr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){xr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){xr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?pu:(this.currentObservers=null,o.push(t),new qe(()=>{this.currentObservers=null,Li(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new le;return t.source=this,t}}return n.create=(e,t)=>new ha(e,t),n})(),ha=class extends ze{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:pu}};var nt=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Cu={now(){return(Cu.delegate||Date).now()},delegate:void 0};var ga=class extends qe{constructor(e,t){super()}schedule(e,t=0){return this}};var Mo={setInterval(n,e,...t){let{delegate:i}=Mo;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Mo;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var va=class extends ga{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return Mo.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Mo.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Li(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var wr=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};wr.now=Cu.now;var ya=class extends wr{constructor(e,t=wr.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var kh=new ya(va);var it=new le(n=>n.complete());function Nh(n){return n&&oe(n.schedule)}function Ah(n){return n[n.length-1]}function _a(n){return oe(Ah(n))?n.pop():void 0}function li(n){return Nh(Ah(n))?n.pop():void 0}function Fh(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{f(i.next(h))}catch(y){s(y)}}function c(h){try{f(i.throw(h))}catch(y){s(y)}}function f(h){h.done?o(h.value):r(h.value).then(a,c)}f((i=i.apply(n,e||[])).next())})}function Rh(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bi(n){return this instanceof Bi?(this.v=n,this):new Bi(n)}function Lh(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(w){return function(A){return Promise.resolve(A).then(w,y)}}function a(w,A){i[w]&&(r[w]=function(L){return new Promise(function(O,R){o.push([w,L,O,R])>1||c(w,L)})},A&&(r[w]=A(r[w])))}function c(w,A){try{f(i[w](A))}catch(L){M(o[0][3],L)}}function f(w){w.value instanceof Bi?Promise.resolve(w.value.v).then(h,y):M(o[0][2],w)}function h(w){c("next",w)}function y(w){c("throw",w)}function M(w,A){w(A),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Vh(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Rh=="function"?Rh(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),r(a,c,s.done,s.value)})}}function r(o,s,a,c){Promise.resolve(c).then(function(f){o({value:f,done:a})},s)}}var Ca=n=>n&&typeof n.length=="number"&&typeof n!="function";function ba(n){return oe(n?.then)}function Ea(n){return oe(n[Dr])}function xa(n){return Symbol.asyncIterator&&oe(n?.[Symbol.asyncIterator])}function Da(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function yb(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var wa=yb();function Ma(n){return oe(n?.[wa])}function Sa(n){return Lh(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Bi(t.read());if(r)return yield Bi(void 0);yield yield Bi(i)}}finally{t.releaseLock()}})}function Ia(n){return oe(n?.getReader)}function ke(n){if(n instanceof le)return n;if(n!=null){if(Ea(n))return _b(n);if(Ca(n))return Cb(n);if(ba(n))return bb(n);if(xa(n))return jh(n);if(Ma(n))return Eb(n);if(Ia(n))return xb(n)}throw Da(n)}function _b(n){return new le(e=>{let t=n[Dr]();if(oe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Cb(n){return new le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function bb(n){return new le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,fa)})}function Eb(n){return new le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function jh(n){return new le(e=>{Db(n,e).catch(t=>e.error(t))})}function xb(n){return jh(Sa(n))}function Db(n,e){var t,i,r,o;return Fh(this,void 0,void 0,function*(){try{for(t=Vh(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function dt(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function Pa(n,e=0){return fe((t,i)=>{t.subscribe(me(i,r=>dt(i,n,()=>i.next(r),e),()=>dt(i,n,()=>i.complete(),e),r=>dt(i,n,()=>i.error(r),e)))})}function Ta(n,e=0){return fe((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function Bh(n,e){return ke(n).pipe(Ta(e),Pa(e))}function Uh(n,e){return ke(n).pipe(Ta(e),Pa(e))}function $h(n,e){return new le(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function Hh(n,e){return new le(t=>{let i;return dt(t,e,()=>{i=n[wa](),dt(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>oe(i?.return)&&i.return()})}function Oa(n,e){if(!n)throw new Error("Iterable cannot be null");return new le(t=>{dt(t,e,()=>{let i=n[Symbol.asyncIterator]();dt(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function zh(n,e){return Oa(Sa(n),e)}function Gh(n,e){if(n!=null){if(Ea(n))return Bh(n,e);if(Ca(n))return $h(n,e);if(ba(n))return Uh(n,e);if(xa(n))return Oa(n,e);if(Ma(n))return Hh(n,e);if(Ia(n))return zh(n,e)}throw Da(n)}function Ve(n,e){return e?Gh(n,e):ke(n)}function se(...n){let e=li(n);return Ve(n,e)}function Vn(n,e){let t=oe(n)?n:()=>n,i=r=>r.error(t());return new le(e?r=>e.schedule(i,0,r):i)}function ka(n){return!!n&&(n instanceof le||oe(n.lift)&&oe(n.subscribe))}var jn=si(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function bu(n,e){let t=typeof e=="object";return new Promise((i,r)=>{let o=new ai({next:s=>{i(s),o.unsubscribe()},error:r,complete:()=>{t?i(e.defaultValue):r(new jn)}});n.subscribe(o)})}function Wh(n){return n instanceof Date&&!isNaN(n)}var wb=si(n=>function(t=null){n(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t});function Ui(n,e){let{first:t,each:i,with:r=Mb,scheduler:o=e??kh,meta:s=null}=Wh(n)?{first:n}:typeof n=="number"?{each:n}:n;if(t==null&&i==null)throw new TypeError("No timeout provided.");return fe((a,c)=>{let f,h,y=null,M=0,w=A=>{h=dt(c,o,()=>{try{f.unsubscribe(),ke(r({meta:s,lastValue:y,seen:M})).subscribe(c)}catch(L){c.error(L)}},A)};f=a.subscribe(me(c,A=>{h?.unsubscribe(),M++,c.next(y=A),i>0&&w(i)},void 0,void 0,()=>{h?.closed||h?.unsubscribe(),y=null})),!M&&w(t!=null?typeof t=="number"?t:+t-o.now():i)})}function Mb(n){throw new wb(n)}function ce(n,e){return fe((t,i)=>{let r=0;t.subscribe(me(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:Sb}=Array;function Ib(n,e){return Sb(e)?n(...e):n(e)}function Na(n){return ce(e=>Ib(n,e))}var{isArray:Pb}=Array,{getPrototypeOf:Tb,prototype:Ob,keys:kb}=Object;function Aa(n){if(n.length===1){let e=n[0];if(Pb(e))return{args:e,keys:null};if(Nb(e)){let t=kb(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function Nb(n){return n&&typeof n=="object"&&Tb(n)===Ob}function Ra(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Eu(...n){let e=li(n),t=_a(n),{args:i,keys:r}=Aa(n);if(i.length===0)return Ve([],e);let o=new le(Ab(i,e,r?s=>Ra(r,s):tn));return t?o.pipe(Na(t)):o}function Ab(n,e,t=tn){return i=>{qh(e,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let c=0;c<r;c++)qh(e,()=>{let f=Ve(n[c],e),h=!1;f.subscribe(me(i,y=>{o[c]=y,h||(h=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function qh(n,e,t){n?dt(t,n,e):e()}function Yh(n,e,t,i,r,o,s,a){let c=[],f=0,h=0,y=!1,M=()=>{y&&!c.length&&!f&&e.complete()},w=L=>f<i?A(L):c.push(L),A=L=>{o&&e.next(L),f++;let O=!1;ke(t(L,h++)).subscribe(me(e,R=>{r?.(R),o?w(R):e.next(R)},()=>{O=!0},void 0,()=>{if(O)try{for(f--;c.length&&f<i;){let R=c.shift();s?dt(e,s,()=>A(R)):A(R)}M()}catch(R){e.error(R)}}))};return n.subscribe(me(e,w,()=>{y=!0,M()})),()=>{a?.()}}function ut(n,e,t=1/0){return oe(e)?ut((i,r)=>ce((o,s)=>e(i,o,r,s))(ke(n(i,r))),t):(typeof e=="number"&&(t=e),fe((i,r)=>Yh(i,r,n,t)))}function Mr(n=1/0){return ut(tn,n)}function Qh(){return Mr(1)}function Sr(...n){return Qh()(Ve(n,li(n)))}function So(n){return new le(e=>{ke(n()).subscribe(e)})}function xu(...n){let e=_a(n),{args:t,keys:i}=Aa(n),r=new le(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,f=s;for(let h=0;h<s;h++){let y=!1;ke(t[h]).subscribe(me(o,M=>{y||(y=!0,f--),a[h]=M},()=>c--,void 0,()=>{(!c||!y)&&(f||o.next(i?Ra(i,a):a),o.complete())}))}});return e?r.pipe(Na(e)):r}function Vt(n,e){return fe((t,i)=>{let r=0;t.subscribe(me(i,o=>n.call(e,o,r++)&&i.next(o)))})}function Qe(n){return fe((e,t)=>{let i=null,r=!1,o;i=e.subscribe(me(t,void 0,void 0,s=>{o=ke(n(s,Qe(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function $i(n,e){return oe(e)?ut(n,e,1):ut(n,1)}function Zh(n){return fe((e,t)=>{let i=!1;e.subscribe(me(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Bn(n){return n<=0?()=>it:fe((e,t)=>{let i=0;e.subscribe(me(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Kh(n=Rb){return fe((e,t)=>{let i=!1;e.subscribe(me(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function Rb(){return new jn}function Io(n){return fe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Un(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Vt((r,o)=>n(r,o,i)):tn,Bn(1),t?Zh(e):Kh(()=>new jn))}function Fa(n){return n<=0?()=>it:fe((e,t)=>{let i=[];e.subscribe(me(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Du(...n){let e=li(n);return fe((t,i)=>{(e?Sr(n,t,e):Sr(n,t)).subscribe(i)})}function nn(n,e){return fe((t,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();t.subscribe(me(i,c=>{r?.unsubscribe();let f=0,h=o++;ke(n(c,h)).subscribe(r=me(i,y=>i.next(e?e(c,y,h,f++):y),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Po(n){return fe((e,t)=>{ke(n).subscribe(me(t,()=>t.complete(),wo)),!t.closed&&e.subscribe(t)})}function Ge(n,e,t){let i=oe(n)||e||t?{next:n,error:e,complete:t}:n;return i?fe((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(me(o,c=>{var f;(f=i.next)===null||f===void 0||f.call(i,c),o.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},c=>{var f;a=!1,(f=i.error)===null||f===void 0||f.call(i,c),o.error(c)},()=>{var c,f;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):tn}var wu;function La(){return wu}function Cn(n){let e=wu;return wu=n,e}var Xh=Symbol("NotFound");function Ir(n){return n===Xh||n?.name==="\u0275NotFound"}var za="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",V=class extends Error{code;constructor(e,t){super(Gn(e,t)),this.code=e}};function Fb(n){return`NG0${Math.abs(n)}`}function Gn(n,e){return`${Fb(n)}${e?": "+e:""}`}var rn=globalThis;function ve(n){for(let e in n)if(n[e]===ve)return e;throw Error("")}function ig(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Hn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Hn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function Ga(n,e){return n?e?`${n} ${e}`:n:e||""}var Lb=ve({__forward_ref__:ve});function bt(n){return n.__forward_ref__=bt,n.toString=function(){return Hn(this())},n}function rt(n){return Vu(n)?n():n}function Vu(n){return typeof n=="function"&&n.hasOwnProperty(Lb)&&n.__forward_ref__===bt}function F(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function jt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fo(n){return Vb(n,Wa)}function ju(n){return Fo(n)!==null}function Vb(n,e){return n.hasOwnProperty(e)&&n[e]||null}function jb(n){let e=n?.[Wa]??null;return e||null}function Su(n){return n&&n.hasOwnProperty(ja)?n[ja]:null}var Wa=ve({\u0275prov:ve}),ja=ve({\u0275inj:ve}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=F({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Bu(n){return n&&!!n.\u0275providers}var Uu=ve({\u0275cmp:ve}),$u=ve({\u0275dir:ve}),Hu=ve({\u0275pipe:ve}),zu=ve({\u0275mod:ve}),Oo=ve({\u0275fac:ve}),qi=ve({__NG_ELEMENT_ID__:ve}),Jh=ve({__NG_ENV_ID__:ve});function Gu(n){return qa(n,"@NgModule"),n[zu]||null}function pi(n){return qa(n,"@Component"),n[Uu]||null}function Wu(n){return qa(n,"@Directive"),n[$u]||null}function rg(n){return qa(n,"@Pipe"),n[Hu]||null}function qa(n,e){if(n==null)throw new V(-919,!1)}function on(n){return typeof n=="string"?n:n==null?"":String(n)}function og(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():on(n)}var sg=ve({ngErrorCode:ve}),Bb=ve({ngErrorMessage:ve}),Ub=ve({ngTokenPath:ve});function qu(n,e){return ag("",-200,e)}function Ya(n,e){throw new V(-201,!1)}function ag(n,e,t){let i=new V(e,n);return i[sg]=e,i[Bb]=n,t&&(i[Ub]=t),i}function $b(n){return n[sg]}var Iu;function lg(){return Iu}function _t(n){let e=Iu;return Iu=n,e}function Yu(n,e,t){let i=Fo(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&8)return null;if(e!==void 0)return e;Ya(n,"")}var Hb={},Hi=Hb,zb="__NG_DI_FLAG__",Pu=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=zi(t)||0;try{return this.injector.get(e,i&8?null:Hi,i)}catch(r){if(Ir(r))return r;throw r}}};function Gb(n,e=0){let t=La();if(t===void 0)throw new V(-203,!1);if(t===null)return Yu(n,void 0,e);{let i=Wb(e),r=t.retrieve(n,i);if(Ir(r)){if(i.optional)return null;throw r}return r}}function Q(n,e=0){return(lg()||Gb)(rt(n),e)}function _(n,e){return Q(n,zi(e))}function zi(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Wb(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Tu(n){let e=[];for(let t=0;t<n.length;t++){let i=rt(n[t]);if(Array.isArray(i)){if(i.length===0)throw new V(900,!1);let r,o=0;for(let s=0;s<i.length;s++){let a=i[s],c=qb(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}e.push(Q(r,o))}else e.push(Q(i))}return e}function qb(n){return n[zb]}function ci(n,e){let t=n.hasOwnProperty(Oo);return t?n[Oo]:null}function cg(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function dg(n){return n.flat(Number.POSITIVE_INFINITY)}function Qa(n,e){n.forEach(t=>Array.isArray(t)?Qa(t,e):e(t))}function Qu(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Lo(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ug(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function Za(n,e,t){let i=Tr(n,e);return i>=0?n[i|1]=t:(i=~i,ug(n,i,e,t)),i}function Ka(n,e){let t=Tr(n,e);if(t>=0)return n[t|1]}function Tr(n,e){return Yb(n,e,1)}function Yb(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var fi={},Ct=[],Yi=new U(""),Zu=new U("",-1),Ku=new U(""),ko=class{get(e,t=Hi){if(t===Hi){let r=ag("",-201);throw r.name="\u0275NotFound",r}return t}};function mi(n){return{\u0275providers:n}}function pg(n){return mi([{provide:Yi,multi:!0,useValue:n}])}function fg(...n){return{\u0275providers:Xu(!0,n),\u0275fromNgModule:!0}}function Xu(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return Qa(e,s=>{let a=s;Ba(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&mg(r,o),t}function mg(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];Ju(r,o=>{e(o,i)})}}function Ba(n,e,t,i){if(n=rt(n),!n)return!1;let r=null,o=Su(n),s=!o&&pi(n);if(!o&&!s){let c=n.ngModule;if(o=Su(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let f of c)Ba(f,e,t,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let f;Qa(o.imports,h=>{Ba(h,e,t,i)&&(f||=[],f.push(h))}),f!==void 0&&mg(f,e)}if(!a){let f=ci(r)||(()=>new r);e({provide:r,useFactory:f,deps:Ct},r),e({provide:Ku,useValue:r,multi:!0},r),e({provide:Yi,useValue:()=>Q(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let f=n;Ju(c,h=>{e(h,f)})}}else return!1;return r!==n&&n.providers!==void 0}function Ju(n,e){for(let t of n)Bu(t)&&(t=t.\u0275providers),Array.isArray(t)?Ju(t,e):e(t)}var Qb=ve({provide:String,useValue:ve});function hg(n){return n!==null&&typeof n=="object"&&Qb in n}function Zb(n){return!!(n&&n.useExisting)}function Kb(n){return!!(n&&n.useFactory)}function Gi(n){return typeof n=="function"}function gg(n){return!!n.useClass}var Vo=new U(""),Va={},eg={},Mu;function jo(){return Mu===void 0&&(Mu=new ko),Mu}var Oe=class{},Wi=class extends Oe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,ku(e,s=>this.processProvider(s)),this.records.set(Zu,Pr(void 0,this)),r.has("environment")&&this.records.set(Oe,Pr(void 0,this));let o=this.records.get(Vo);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ku,Ct,{self:!0}))}retrieve(e,t){let i=zi(t)||0;try{return this.get(e,Hi,i)}catch(r){if(Ir(r))return r;throw r}}destroy(){To(this),this._destroyed=!0;let e=q(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),q(e)}}onDestroy(e){return To(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){To(this);let t=Cn(this),i=_t(void 0),r;try{return e()}finally{Cn(t),_t(i)}}get(e,t=Hi,i){if(To(this),e.hasOwnProperty(Jh))return e[Jh](this);let r=zi(i),o,s=Cn(this),a=_t(void 0);try{if(!(r&4)){let f=this.records.get(e);if(f===void 0){let h=nE(e)&&Fo(e);h&&this.injectableDefInScope(h)?f=Pr(Ou(e),Va):f=null,this.records.set(e,f)}if(f!=null)return this.hydrate(e,f,r)}let c=r&2?jo():this.parent;return t=r&8&&t===Hi?null:t,c.get(e,t)}catch(c){let f=$b(c);throw f===-200||f===-201?new V(f,null):c}finally{_t(a),Cn(s)}}resolveInjectorInitializers(){let e=q(null),t=Cn(this),i=_t(void 0),r;try{let o=this.get(Yi,Ct,{self:!0});for(let s of o)s()}finally{Cn(t),_t(i),q(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Hn(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=rt(e);let t=Gi(e)?e:rt(e&&e.provide),i=Jb(e);if(!Gi(e)&&e.multi===!0){let r=this.records.get(t);r||(r=Pr(void 0,Va,!0),r.factory=()=>Tu(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=q(null);try{if(t.value===eg)throw qu(Hn(e));return t.value===Va&&(t.value=eg,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&tE(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{q(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=rt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ou(n){let e=Fo(n),t=e!==null?e.factory:ci(n);if(t!==null)return t;if(n instanceof U)throw new V(204,!1);if(n instanceof Function)return Xb(n);throw new V(204,!1)}function Xb(n){if(n.length>0)throw new V(204,!1);let t=jb(n);return t!==null?()=>t.factory(n):()=>new n}function Jb(n){if(hg(n))return Pr(void 0,n.useValue);{let e=ep(n);return Pr(e,Va)}}function ep(n,e,t){let i;if(Gi(n)){let r=rt(n);return ci(r)||Ou(r)}else if(hg(n))i=()=>rt(n.useValue);else if(Kb(n))i=()=>n.useFactory(...Tu(n.deps||[]));else if(Zb(n))i=(r,o)=>Q(rt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let r=rt(n&&(n.useClass||n.provide));if(eE(n))i=()=>new r(...Tu(n.deps));else return ci(r)||Ou(r)}return i}function To(n){if(n.destroyed)throw new V(205,!1)}function Pr(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function eE(n){return!!n.deps}function tE(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function nE(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function ku(n,e){for(let t of n)Array.isArray(t)?ku(t,e):t&&Bu(t)?ku(t.\u0275providers,e):e(t)}function Ze(n,e){let t;n instanceof Wi?(To(n),t=n):t=new Pu(n);let i,r=Cn(t),o=_t(void 0);try{return e()}finally{Cn(r),_t(o)}}function vg(){return lg()!==void 0||La()!=null}var sn=0,Z=1,ie=2,Ye=3,Bt=4,Ut=5,Or=6,kr=7,Ne=8,Wn=9,bn=10,De=11,Nr=12,tp=13,Qi=14,wt=15,hi=16,Zi=17,En=18,qn=19,np=20,$n=21,Xa=22,di=23,Tt=24,Ki=25,Xi=26,je=27,yg=1,ip=6,gi=7,Bo=8,Ji=9,Ae=10;function xn(n){return Array.isArray(n)&&typeof n[yg]=="object"}function an(n){return Array.isArray(n)&&n[yg]===!0}function rp(n){return(n.flags&4)!==0}function vi(n){return n.componentOffset>-1}function Ja(n){return(n.flags&1)===1}function Dn(n){return!!n.template}function Ar(n){return(n[ie]&512)!==0}function er(n){return(n[ie]&256)===256}var op="svg",_g="math";function $t(n){for(;Array.isArray(n);)n=n[sn];return n}function sp(n,e){return $t(e[n])}function ln(n,e){return $t(e[n.index])}function Uo(n,e){return n.data[e]}function el(n,e){return n[e]}function ap(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function Ht(n,e){let t=e[n];return xn(t)?t:t[sn]}function Cg(n){return(n[ie]&4)===4}function tl(n){return(n[ie]&128)===128}function bg(n){return an(n[Ye])}function wn(n,e){return e==null?null:n[e]}function lp(n){n[Zi]=0}function cp(n){n[ie]&1024||(n[ie]|=1024,tl(n)&&tr(n))}function Eg(n,e){for(;n>0;)e=e[Qi],n--;return e}function $o(n){return!!(n[ie]&9216||n[Tt]?.dirty)}function nl(n){n[bn].changeDetectionScheduler?.notify(8),n[ie]&64&&(n[ie]|=1024),$o(n)&&tr(n)}function tr(n){n[bn].changeDetectionScheduler?.notify(0);let e=ui(n);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!tl(e)));)e=ui(e)}function dp(n,e){if(er(n))throw new V(911,!1);n[$n]===null&&(n[$n]=[]),n[$n].push(e)}function xg(n,e){if(n[$n]===null)return;let t=n[$n].indexOf(e);t!==-1&&n[$n].splice(t,1)}function ui(n){let e=n[Ye];return an(e)?e[Ye]:e}function up(n){return n[kr]??=[]}function pp(n){return n.cleanup??=[]}function Dg(n,e,t,i){let r=up(e);r.push(t),n.firstCreatePass&&pp(n).push(i,r.length-1)}var ae={lFrame:Vg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Nu=!1;function wg(){return ae.lFrame.elementDepthCount}function Mg(){ae.lFrame.elementDepthCount++}function fp(){ae.lFrame.elementDepthCount--}function Sg(){return ae.bindingsEnabled}function Ig(){return ae.skipHydrationRootTNode!==null}function mp(n){return ae.skipHydrationRootTNode===n}function hp(){ae.skipHydrationRootTNode=null}function ne(){return ae.lFrame.lView}function Be(){return ae.lFrame.tView}function x(n){return ae.lFrame.contextLView=n,n[Ne]}function D(n){return ae.lFrame.contextLView=null,n}function Ke(){let n=gp();for(;n!==null&&n.type===64;)n=n.parent;return n}function gp(){return ae.lFrame.currentTNode}function Pg(){let n=ae.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Rr(n,e){let t=ae.lFrame;t.currentTNode=n,t.isParent=e}function vp(){return ae.lFrame.isParent}function Tg(){ae.lFrame.isParent=!1}function Og(){return ae.lFrame.contextLView}function yp(){return Nu}function No(n){let e=Nu;return Nu=n,e}function Ho(){let n=ae.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function _p(){return ae.lFrame.bindingIndex}function kg(n){return ae.lFrame.bindingIndex=n}function yi(){return ae.lFrame.bindingIndex++}function zo(n){let e=ae.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Ng(){return ae.lFrame.inI18n}function Ag(n,e){let t=ae.lFrame;t.bindingIndex=t.bindingRootIndex=n,il(e)}function Rg(){return ae.lFrame.currentDirectiveIndex}function il(n){ae.lFrame.currentDirectiveIndex=n}function Fg(n){let e=ae.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Cp(){return ae.lFrame.currentQueryIndex}function rl(n){ae.lFrame.currentQueryIndex=n}function iE(n){let e=n[Z];return e.type===2?e.declTNode:e.type===1?n[Ut]:null}function bp(n,e,t){if(t&4){let r=e,o=n;for(;r=r.parent,r===null&&!(t&1);)if(r=iE(o),r===null||(o=o[Qi],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=ae.lFrame=Lg();return i.currentTNode=e,i.lView=n,!0}function ol(n){let e=Lg(),t=n[Z];ae.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Lg(){let n=ae.lFrame,e=n===null?null:n.child;return e===null?Vg(n):e}function Vg(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function jg(){let n=ae.lFrame;return ae.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Ep=jg;function sl(){let n=jg();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Bg(n){return(ae.lFrame.contextLView=Eg(n,ae.lFrame.contextLView))[Ne]}function cn(){return ae.lFrame.selectedIndex}function _i(n){ae.lFrame.selectedIndex=n}function Go(){let n=ae.lFrame;return Uo(n.tView,n.selectedIndex)}function Mn(){ae.lFrame.currentNamespace=op}function al(){rE()}function rE(){ae.lFrame.currentNamespace=null}function Ug(){return ae.lFrame.currentNamespace}var $g=!0;function ll(){return $g}function cl(n){$g=n}function Au(n,e=null,t=null,i){let r=xp(n,e,t,i);return r.resolveInjectorInitializers(),r}function xp(n,e=null,t=null,i,r=new Set){let o=[t||Ct,fg(n)];return i=i||(typeof n=="object"?void 0:Hn(n)),new Wi(o,e||jo(),i||null,r)}var pt=class n{static THROW_IF_NOT_FOUND=Hi;static NULL=new ko;static create(e,t){if(Array.isArray(e))return Au({name:""},t,e,"");{let i=e.name??"";return Au({name:i},e.parent,e.providers,i)}}static \u0275prov=F({token:n,providedIn:"any",factory:()=>Q(Zu)});static __NG_ELEMENT_ID__=-1},Ue=new U(""),mt=(()=>{class n{static __NG_ELEMENT_ID__=oE;static __NG_ENV_ID__=t=>t}return n})(),Ua=class extends mt{_lView;constructor(e){super(),this._lView=e}get destroyed(){return er(this._lView)}onDestroy(e){let t=this._lView;return dp(t,e),()=>xg(t,e)}};function oE(){return new Ua(ne())}var Hg=!1,zg=new U(""),Yn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new nt(!1);debugTaskTracker=_(zg,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new le(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),this.debugTaskTracker?.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.debugTaskTracker?.remove(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ru=class extends ze{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,vg()&&(this.destroyRef=_(mt,{optional:!0})??void 0,this.pendingTasks=_(Yn,{optional:!0})??void 0)}emit(e){let t=q(null);try{super.next(e)}finally{q(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof qe&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Te=Ru;function $a(...n){}function Dp(n){let e,t;function i(){n=$a;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function Gg(n){return queueMicrotask(()=>n()),()=>{n=$a}}var wp="isAngularZone",Ao=wp+"_ID",sE=0,ft=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Te(!1);onMicrotaskEmpty=new Te(!1);onStable=new Te(!1);onError=new Te(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=Hg}=e;if(typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,cE(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(wp)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new V(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,aE,$a,$a);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},aE={};function Mp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function lE(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Dp(()=>{n.callbackScheduled=!1,Fu(n),n.isCheckStableRunning=!0,Mp(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Fu(n)}function cE(n){let e=()=>{lE(n)},t=sE++;n._inner=n._inner.fork({name:"angular",properties:{[wp]:!0,[Ao]:t,[Ao+t]:!0},onInvokeTask:(i,r,o,s,a,c)=>{if(dE(c))return i.invokeTask(o,s,a,c);try{return tg(n),i.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),ng(n)}},onInvoke:(i,r,o,s,a,c,f)=>{try{return tg(n),i.invoke(o,s,a,c,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!uE(c)&&e(),ng(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Fu(n),Mp(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Fu(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function tg(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ng(n){n._nesting--,Mp(n)}var Ro=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Te;onMicrotaskEmpty=new Te;onStable=new Te;onError=new Te;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function dE(n){return Wg(n,"__ignore_ng_zone__")}function uE(n){return Wg(n,"__scheduler_tick__")}function Wg(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Dt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ot=new U("",{factory:()=>{let n=_(ft),e=_(Oe),t;return i=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw i}):(t??=e.get(Dt),t.handleError(i))})}}}),qg={provide:Yi,useValue:()=>{let n=_(Dt,{optional:!0})},multi:!0},pE=new U("",{factory:()=>{let n=_(Ue).defaultView;if(!n)return;let e=_(Ot),t=o=>{e(o.reason),o.preventDefault()},i=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},r=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",i)};typeof Zone<"u"?Zone.root.run(r):r(),_(mt).onDestroy(()=>{n.removeEventListener("error",i),n.removeEventListener("unhandledrejection",t)})}});function Sp(){return mi([pg(()=>{_(pE)})])}function E(n,e){let[t,i,r]=lu(n,e?.equal),o=t,s=o[yt];return o.set=i,o.update=r,o.asReadonly=Ip.bind(o),o}function Ip(){let n=this[yt];if(n.readonlyFn===void 0){let e=()=>this();e[yt]=n,n.readonlyFn=e}return n.readonlyFn}var Wo=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=fE}return n})();function fE(){return new Wo(ne(),Ke())}var zn=class{},qo=new U("",{factory:()=>!0});var Pp=new U(""),Yo=(()=>{class n{internalPendingTasks=_(Yn);scheduler=_(zn);errorHandler=_(Ot);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let i=this.add();t().catch(this.errorHandler).finally(i)}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})(),dl=(()=>{class n{static \u0275prov=F({token:n,providedIn:"root",factory:()=>new Lu})}return n})(),Lu=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,i]of this.queues)t===null?e||=this.flushQueue(i):e||=t.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,t=!0,i.run());return t}},Ha=class{[yt];constructor(e){this[yt]=e}destroy(){this[yt].destroy()}};function ot(n,e){let t=e?.injector??_(pt),i=e?.manualCleanup!==!0?t.get(mt):null,r,o=t.get(Wo,null,{optional:!0}),s=t.get(zn);return o!==null?(r=gE(o.view,s,n),i instanceof Ua&&i._lView===o.view&&(i=null)):r=vE(n,t.get(dl),s),r.injector=t,i!==null&&(r.onDestroyFns=[i.onDestroy(()=>r.destroy())]),new Ha(r)}var Yg=W(P({},du),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=No(!1);try{uu(this)}finally{No(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=q(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],q(n)}}}),mE=W(P({},Yg),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(Fi(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),hE=W(P({},Yg),{consumerMarkedDirty(){this.view[ie]|=8192,tr(this.view),this.notifier.notify(13)},destroy(){if(Fi(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[di]?.delete(this)}});function gE(n,e,t){let i=Object.create(hE);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=Qg(i,t),n[di]??=new Set,n[di].add(i),i.consumerMarkedDirty(i),i}function vE(n,e,t){let i=Object.create(mE);return i.fn=Qg(i,n),i.scheduler=e,i.notifier=t,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}function Qg(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function Re(n){return cu(n)}function rs(n){return{toString:n}.toString()}function xE(n){return typeof n=="function"}function Pv(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var Cl=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}},zt=(()=>{let n=()=>Tv;return n.ngInherit=!0,n})();function Tv(n){return n.type.prototype.ngOnChanges&&(n.setInput=wE),DE}function DE(){let n=kv(this),e=n?.current;if(e){let t=n.previous;if(t===fi)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function wE(n,e,t,i,r){let o=this.declaredInputs[i],s=kv(n)||ME(n,{previous:fi,current:null}),a=s.current||(s.current={}),c=s.previous,f=c[o];a[o]=new Cl(f&&f.currentValue,t,c===fi),Pv(n,e,r,t)}var Ov="__ngSimpleChanges__";function kv(n){return n[Ov]||null}function ME(n,e){return n[Ov]=e}var Zg=[];var ye=function(n,e=null,t){for(let i=0;i<Zg.length;i++){let r=Zg[i];r(n,e,t)}},pe=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(pe||{});function SE(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=Tv(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function IE(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:f,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),f&&((n.viewHooks??=[]).push(t,f),(n.viewCheckHooks??=[]).push(t,f)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function hl(n,e,t){Nv(n,e,3,t)}function gl(n,e,t,i){(n[ie]&3)===t&&Nv(n,e,t,i)}function Tp(n,e){let t=n[ie];(t&3)===e&&(t&=16383,t+=1,n[ie]=t)}function Nv(n,e,t,i){let r=i!==void 0?n[Zi]&65535:0,o=i??-1,s=e.length-1,a=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(n[Zi]+=65536),(a<o||o==-1)&&(PE(n,t,e,c),n[Zi]=(n[Zi]&4294901760)+c+2),c++}function Kg(n,e){ye(pe.LifecycleHookStart,n,e);let t=q(null);try{e.call(n)}finally{q(t),ye(pe.LifecycleHookEnd,n,e)}}function PE(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],a=n[s];r?n[ie]>>14<n[Zi]>>16&&(n[ie]&3)===e&&(n[ie]+=16384,Kg(a,o)):Kg(a,o)}var Lr=-1,ir=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=t,this.injectImpl=i}};function TE(n){return(n.flags&8)!==0}function OE(n){return(n.flags&16)!==0}function kE(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{let o=r,s=t[++i];NE(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function Av(n){return n===3||n===4||n===6}function NE(n){return n.charCodeAt(0)===64}function Vr(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?Xg(n,t,r,null,e[++i]):Xg(n,t,r,null,null))}}return n}function Xg(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function Rv(n){return n!==Lr}function bl(n){return n&32767}function AE(n){return n>>16}function El(n,e){let t=AE(n),i=e;for(;t>0;)i=i[Qi],t--;return i}var Up=!0;function xl(n){let e=Up;return Up=n,e}var RE=256,Fv=RE-1,Lv=5,FE=0,Sn={};function LE(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(qi)&&(i=t[qi]),i==null&&(i=t[qi]=FE++);let r=i&Fv,o=1<<r;e.data[n+(r>>Lv)]|=o}function Dl(n,e){let t=Vv(n,e);if(t!==-1)return t;let i=e[Z];i.firstCreatePass&&(n.injectorIndex=e.length,Op(i.data,n),Op(e,null),Op(i.blueprint,null));let r=Cf(n,e),o=n.injectorIndex;if(Rv(r)){let s=bl(r),a=El(r,e),c=a[Z].data;for(let f=0;f<8;f++)e[o+f]=a[s+f]|c[s+f]}return e[o+8]=r,o}function Op(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Vv(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Cf(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=Hv(r),i===null)return Lr;if(t++,r=r[Qi],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Lr}function $p(n,e,t){LE(n,e,t)}function VE(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(Av(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function jv(n,e,t){if(t&8||n!==void 0)return n;Ya(e,"NodeInjector")}function Bv(n,e,t,i){if(t&8&&i===void 0&&(i=null),(t&3)===0){let r=n[Wn],o=_t(void 0);try{return r?r.get(e,i,t&8):Yu(e,i,t&8)}finally{_t(o)}}return jv(i,e,t)}function Uv(n,e,t,i=0,r){if(n!==null){if(e[ie]&2048&&!(i&2)){let s=$E(n,e,t,i,Sn);if(s!==Sn)return s}let o=$v(n,e,t,i,Sn);if(o!==Sn)return o}return Bv(e,t,i,r)}function $v(n,e,t,i,r){let o=BE(t);if(typeof o=="function"){if(!bp(e,n,i))return i&1?jv(r,t,i):Bv(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&8))Ya(t);else return s}finally{Ep()}}else if(typeof o=="number"){let s=null,a=Vv(n,e),c=Lr,f=i&1?e[wt][Ut]:null;for((a===-1||i&4)&&(c=a===-1?Cf(n,e):e[a+8],c===Lr||!ev(i,!1)?a=-1:(s=e[Z],a=bl(c),e=El(c,e)));a!==-1;){let h=e[Z];if(Jg(o,a,h.data)){let y=jE(a,e,t,s,i,f);if(y!==Sn)return y}c=e[a+8],c!==Lr&&ev(i,e[Z].data[a+8]===f)&&Jg(o,a,e)?(s=h,a=bl(c),e=El(c,e)):a=-1}}return r}function jE(n,e,t,i,r,o){let s=e[Z],a=s.data[n+8],c=i==null?vi(a)&&Up:i!=s&&(a.type&3)!==0,f=r&1&&o===a,h=vl(a,s,t,c,f);return h!==null?Xo(e,s,h,a,r):Sn}function vl(n,e,t,i,r){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,f=n.directiveEnd,h=o>>20,y=i?a:a+h,M=r?a+h:f;for(let w=y;w<M;w++){let A=s[w];if(w<c&&t===A||w>=c&&A.type===t)return w}if(r){let w=s[c];if(w&&Dn(w)&&w.type===t)return c}return null}function Xo(n,e,t,i,r){let o=n[t],s=e.data;if(o instanceof ir){let a=o;if(a.resolving){let w=og(s[t]);throw qu(w)}let c=xl(a.canSeeViewProviders);a.resolving=!0;let f=s[t].type||s[t],h,y=a.injectImpl?_t(a.injectImpl):null,M=bp(n,i,0);try{o=n[t]=a.factory(void 0,r,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&SE(t,s[t],e)}finally{y!==null&&_t(y),xl(c),a.resolving=!1,Ep()}}return o}function BE(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(qi)?n[qi]:void 0;return typeof e=="number"?e>=0?e&Fv:UE:e}function Jg(n,e,t){let i=1<<n;return!!(t[e+(n>>Lv)]&i)}function ev(n,e){return!(n&2)&&!(n&1&&e)}var nr=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Uv(this._tNode,this._lView,e,zi(i),t)}};function UE(){return new nr(Ke(),ne())}function Gt(n){return rs(()=>{let e=n.prototype.constructor,t=e[Oo]||Hp(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[Oo]||Hp(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Hp(n){return Vu(n)?()=>{let e=Hp(rt(n));return e&&e()}:ci(n)}function $E(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[ie]&2048&&!Ar(s);){let a=$v(o,s,t,i|2,Sn);if(a!==Sn)return a;let c=o.parent;if(!c){let f=s[np];if(f){let h=f.get(t,Sn,i);if(h!==Sn)return h}c=Hv(s),s=s[Qi]}o=c}return r}function Hv(n){let e=n[Z],t=e.type;return t===2?e.declTNode:t===1?n[Ut]:null}function os(n){return VE(Ke(),n)}function HE(){return Hr(Ke(),ne())}function Hr(n,e){return new Mt(ln(n,e))}var Mt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=HE}return n})();function zE(n){return n instanceof Mt?n.nativeElement:n}function GE(){return this._results[Symbol.iterator]()}var wl=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ze}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=dg(e);(this._changesDetected=!cg(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=GE};function zv(n){return(n.flags&128)===128}var bf=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(bf||{}),Gv=new Map,WE=0;function qE(){return WE++}function YE(n){Gv.set(n[qn],n)}function zp(n){Gv.delete(n[qn])}var tv="__ngContext__";function jr(n,e){xn(e)?(n[tv]=e[qn],YE(e)):n[tv]=e}function Wv(n){return Yv(n[Nr])}function qv(n){return Yv(n[Bt])}function Yv(n){for(;n!==null&&!an(n);)n=n[Bt];return n}var Gp;function Ef(n){Gp=n}function Qv(){if(Gp!==void 0)return Gp;if(typeof document<"u")return document;throw new V(210,!1)}var jl=new U("",{factory:()=>QE}),QE="ng";var Bl=new U(""),ss=new U("",{providedIn:"platform",factory:()=>"unknown"});var Ul=new U("",{factory:()=>_(Ue).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Zv="r";var Kv="di";var Xv=!1,Jv=new U("",{factory:()=>Xv});var ZE=(n,e,t,i)=>{};function KE(n,e,t,i){ZE(n,e,t,i)}function xf(n){return(n.flags&32)===32}var XE=()=>null;function e0(n,e,t=!1){return XE(n,e,t)}function t0(n,e){let t=n.contentQueries;if(t!==null){let i=q(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let a=n.data[s];rl(o),a.contentQueries(2,e[s],s)}}}finally{q(i)}}}function Wp(n,e,t){rl(0);let i=q(null);try{e(n,t)}finally{q(i)}}function n0(n,e,t){if(rp(e)){let i=q(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{q(i)}}}var pn=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(pn||{});var ul;function JE(){if(ul===void 0&&(ul=null,rn.trustedTypes))try{ul=rn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ul}function $l(n){return JE()?.createHTML(n)||n}var pl;function i0(){if(pl===void 0&&(pl=null,rn.trustedTypes))try{pl=rn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return pl}function nv(n){return i0()?.createHTML(n)||n}function iv(n){return i0()?.createScriptURL(n)||n}var Ml=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${za})`}};function zr(n){return n instanceof Ml?n.changingThisBreaksApplicationSecurity:n}function Hl(n,e){let t=r0(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${za})`)}return t===e}function r0(n){return n instanceof Ml&&n.getTypeName()||null}function ex(n){let e=new Yp(n);return tx()?new qp(e):e}var qp=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString($l(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},Yp=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=$l(e),t}};function tx(){try{return!!new window.DOMParser().parseFromString($l(""),"text/html")}catch{return!1}}var nx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Df(n){return n=String(n),n.match(nx)?n:"unsafe:"+n}function Qn(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function as(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var o0=Qn("area,br,col,hr,img,wbr"),s0=Qn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),a0=Qn("rp,rt"),ix=as(a0,s0),rx=as(s0,Qn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ox=as(a0,Qn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rv=as(o0,rx,ox,ix),l0=Qn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sx=Qn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ax=Qn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),lx=as(l0,sx,ax),cx=Qn("script,style,template"),Qp=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=px(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=ux(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=ov(e).toLowerCase();if(!rv.hasOwnProperty(t))return this.sanitizedSomething=!0,!cx.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!lx.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;l0[a]&&(c=Df(c)),this.buf.push(" ",s,'="',sv(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=ov(e).toLowerCase();rv.hasOwnProperty(t)&&!o0.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(sv(e))}};function dx(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function ux(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw c0(e);return e}function px(n){let e=n.firstChild;if(e&&dx(n,e))throw c0(e);return e}function ov(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function c0(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var fx=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mx=/([^\#-~ |!])/g;function sv(n){return n.replace(/&/g,"&amp;").replace(fx,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(mx,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var fl;function d0(n,e){let t=null;try{fl=fl||ex(n);let i=e?String(e):"";t=fl.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=fl.getInertBodyElement(i)}while(i!==o);let a=new Qp().sanitizeChildren(av(t)||t);return $l(a)}finally{if(t){let i=av(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function av(n){return"content"in n&&hx(n)?n.content:null}function hx(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}function gx(n,e){return n.createText(e)}function vx(n,e,t){n.setValue(e,t)}function u0(n,e,t){return n.createElement(e,t)}function Sl(n,e,t,i,r){n.insertBefore(e,t,i,r)}function p0(n,e,t){n.appendChild(e,t)}function lv(n,e,t,i,r){i!==null?Sl(n,e,t,i,r):p0(n,e,t)}function f0(n,e,t,i){n.removeChild(null,e,t,i)}function yx(n,e,t){n.setAttribute(e,"style",t)}function _x(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function m0(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&kE(n,e,i),r!==null&&_x(n,e,r),o!==null&&yx(n,e,o)}var ls=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(ls||{});function cs(n){let e=Mf();return e?nv(e.sanitize(ls.HTML,n)||""):Hl(n,"HTML")?nv(zr(n)):d0(Qv(),on(n))}function $e(n){let e=Mf();return e?e.sanitize(ls.URL,n)||"":Hl(n,"URL")?zr(n):Df(on(n))}function h0(n){let e=Mf();if(e)return iv(e.sanitize(ls.RESOURCE_URL,n)||"");if(Hl(n,"ResourceURL"))return iv(zr(n));throw new V(904,!1)}var Cx=new Set(["embed","frame","iframe","media","script"]),bx=new Set(["base","link","script"]);function Ex(n,e){return e==="src"&&Cx.has(n)||e==="href"&&bx.has(n)||e==="xlink:href"&&n==="script"?h0:$e}function wf(n,e,t){return Ex(e,t)(n)}function Mf(){let n=ne();return n&&n[bn].sanitizer}function Sf(n){return n.ownerDocument}function g0(n){return n instanceof Function?n():n}function xx(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var v0="ng-template";function Dx(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&xx(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(If(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function If(n){return n.type===4&&n.value!==v0}function wx(n,e,t){let i=n.type===4&&!t?v0:n.value;return e===i}function Mx(n,e,t){let i=4,r=n.attrs,o=r!==null?Px(r):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!dn(i)&&!dn(c))return!1;if(s&&dn(c))continue;s=!1,i=c|i&1;continue}if(!s)if(i&4){if(i=2|i&1,c!==""&&!wx(n,c,t)||c===""&&e.length===1){if(dn(i))return!1;s=!0}}else if(i&8){if(r===null||!Dx(n,r,c,t)){if(dn(i))return!1;s=!0}}else{let f=e[++a],h=Sx(c,r,If(n),t);if(h===-1){if(dn(i))return!1;s=!0;continue}if(f!==""){let y;if(h>o?y="":y=r[h+1].toLowerCase(),i&2&&f!==y){if(dn(i))return!1;s=!0}}}}return dn(i)||s}function dn(n){return(n&1)===0}function Sx(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return Tx(e,n)}function Ix(n,e,t=!1){for(let i=0;i<e.length;i++)if(Mx(n,e[i],t))return!0;return!1}function Px(n){for(let e=0;e<n.length;e++){let t=n[e];if(Av(t))return e}return n.length}function Tx(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function cv(n,e){return n?":not("+e.trim()+")":e}function Ox(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!dn(s)&&(e+=cv(o,r),r=""),i=s,o=o||!dn(i);t++}return r!==""&&(e+=cv(o,r)),e}function kx(n){return n.map(Ox).join(",")}function Nx(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!dn(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var st={};function Pf(n,e,t,i,r,o,s,a,c,f,h){let y=je+i,M=y+r,w=Ax(y,M),A=typeof f=="function"?f():f;return w[Z]={type:n,blueprint:w,template:t,queries:null,viewQuery:a,declTNode:e,data:w.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:M,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:A,incompleteFirstPass:!1,ssrId:h}}function Ax(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:st);return t}function Rx(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Pf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Tf(n,e,t,i,r,o,s,a,c,f,h){let y=e.blueprint.slice();return y[sn]=r,y[ie]=i|4|128|8|64|1024,(f!==null||n&&n[ie]&2048)&&(y[ie]|=2048),lp(y),y[Ye]=y[Qi]=n,y[Ne]=t,y[bn]=s||n&&n[bn],y[De]=a||n&&n[De],y[Wn]=c||n&&n[Wn]||null,y[Ut]=o,y[qn]=qE(),y[Or]=h,y[np]=f,y[wt]=e.type==2?n[wt]:y,y}function Fx(n,e,t){let i=ln(e,n),r=Rx(t),o=n[bn].rendererFactory,s=Of(n,Tf(n,r,null,y0(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=s}function y0(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function _0(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Of(n,e){return n[Nr]?n[tp][Bt]=e:n[Nr]=e,n[tp]=e,e}function p(n=1){C0(Be(),ne(),cn()+n,!1)}function C0(n,e,t,i){if(!i)if((e[ie]&3)===3){let o=n.preOrderCheckHooks;o!==null&&hl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&gl(e,o,0,t)}_i(t)}var zl=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(zl||{});function Zp(n,e,t,i){let r=q(null);try{let[o,s,a]=n.inputs[t],c=null;(s&zl.SignalBased)!==0&&(c=e[o][yt]),c!==null&&c.transformFn!==void 0?i=c.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,c,i,t,o):Pv(e,c,o,i)}finally{q(r)}}var In=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(In||{}),Lx;function kf(n,e){return Lx(n,e)}var rr=new Set,Gl=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Gl||{}),Zn=new U(""),dv=new Set;function bi(n){dv.has(n)||(dv.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Nf=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})(),b0=[0,1,2,3],E0=(()=>{class n{ngZone=_(ft);scheduler=_(zn);errorHandler=_(Dt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){_(Zn,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ye(pe.AfterRenderHooksStart),this.executing=!0;for(let i of b0)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ye(pe.AfterRenderHooksEnd)}register(t){let{view:i}=t;i!==void 0?((i[Ki]??=[]).push(t),tr(i),i[ie]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(Gl.AFTER_NEXT_RENDER,t):t()}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})(),Il=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,o,s=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ki];e&&(this.view[Ki]=e.filter(t=>t!==this))}};function ds(n,e){let t=e?.injector??_(pt);return bi("NgAfterNextRender"),jx(n,t,e,!0)}function Vx(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function jx(n,e,t,i){let r=e.get(Nf);r.impl??=e.get(E0);let o=e.get(Zn,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(mt):null,a=e.get(Wo,null,{optional:!0}),c=new Il(r.impl,Vx(n),a?.view,i,s,o?.snapshot(null));return r.impl.register(c),c}var x0=new U("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:_(Oe)})});function D0(n,e,t){let i=n.get(x0);if(Array.isArray(e))for(let r of e)i.queue.add(r),t?.detachedLeaveAnimationFns?.push(r);else i.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);i.scheduler&&i.scheduler(n)}function Bx(n,e){let t=n.get(x0);if(e.detachedLeaveAnimationFns){for(let i of e.detachedLeaveAnimationFns)t.queue.delete(i);e.detachedLeaveAnimationFns=void 0}}function Ux(n,e){for(let[t,i]of e)D0(n,i.animateFns)}function uv(n,e,t,i){let r=n?.[Xi]?.enter;e!==null&&r&&r.has(t.index)&&Ux(i,r)}function Fr(n,e,t,i,r,o,s,a){if(r!=null){let c,f=!1;an(r)?c=r:xn(r)&&(f=!0,r=r[sn]);let h=$t(r);n===0&&i!==null?(uv(a,i,o,t),s==null?p0(e,i,h):Sl(e,i,h,s||null,!0)):n===1&&i!==null?(uv(a,i,o,t),Sl(e,i,h,s||null,!0)):n===2?pv(a,o,t,y=>{f0(e,h,f,y)}):n===3&&pv(a,o,t,()=>{e.destroyNode(h)}),c!=null&&e1(e,n,t,c,o,i,s)}}function $x(n,e){w0(n,e),e[sn]=null,e[Ut]=null}function Hx(n,e,t,i,r,o){i[sn]=r,i[Ut]=e,ql(n,i,t,1,r,o)}function w0(n,e){e[bn].changeDetectionScheduler?.notify(9),ql(n,e,e[De],2,null,null)}function zx(n){let e=n[Nr];if(!e)return kp(n[Z],n);for(;e;){let t=null;if(xn(e))t=e[Nr];else{let i=e[Ae];i&&(t=i)}if(!t){for(;e&&!e[Bt]&&e!==n;)xn(e)&&kp(e[Z],e),e=e[Ye];e===null&&(e=n),xn(e)&&kp(e[Z],e),t=e&&e[Bt]}e=t}}function Af(n,e){let t=n[Ji],i=t.indexOf(e);t.splice(i,1)}function Wl(n,e){if(er(e))return;let t=e[De];t.destroyNode&&ql(n,e,t,3,null,null),zx(e)}function kp(n,e){if(er(e))return;let t=q(null);try{e[ie]&=-129,e[ie]|=256,e[Tt]&&Fi(e[Tt]),qx(n,e),Wx(n,e),e[Z].type===1&&e[De].destroy();let i=e[hi];if(i!==null&&an(e[Ye])){i!==e[Ye]&&Af(i,e);let r=e[En];r!==null&&r.detachView(n)}zp(e)}finally{q(t)}}function pv(n,e,t,i){let r=n?.[Xi];if(r==null||r.leave==null||!r.leave.has(e.index))return i(!1);n&&rr.add(n[qn]),D0(t,()=>{if(r.leave&&r.leave.has(e.index)){let s=r.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let f=s.animateFns[c],{promise:h}=f();a.push(h)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(a),Gx(n,i)}else n&&rr.delete(n[qn]),i(!1)},r)}function Gx(n,e){let t=n[Xi]?.running;if(t){t.then(()=>{n[Xi].running=void 0,rr.delete(n[qn]),e(!0)});return}e(!1)}function Wx(n,e){let t=n.cleanup,i=e[kr];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[t[s+1]];t[s].call(a)}i!==null&&(e[kr]=null);let r=e[$n];if(r!==null){e[$n]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=e[di];if(o!==null){e[di]=null;for(let s of o)s.destroy()}}function qx(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof ir)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];ye(pe.LifecycleHookStart,a,c);try{c.call(a)}finally{ye(pe.LifecycleHookEnd,a,c)}}else{ye(pe.LifecycleHookStart,r,o);try{o.call(r)}finally{ye(pe.LifecycleHookEnd,r,o)}}}}}function Yx(n,e,t){return Qx(n,e.parent,t)}function Qx(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[sn];if(vi(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===pn.None||r===pn.Emulated)return null}return ln(i,t)}function Zx(n,e,t){return Xx(n,e,t)}function Kx(n,e,t){return n.type&40?ln(n,t):null}var Xx=Kx,fv;function Rf(n,e,t,i){let r=Yx(n,i,e),o=e[De],s=i.parent||e[Ut],a=Zx(s,i,e);if(r!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)lv(o,r,t[c],a,!1);else lv(o,r,t,a,!1);fv!==void 0&&fv(o,i,e,t,r)}function Zo(n,e){if(e!==null){let t=e.type;if(t&3)return ln(e,n);if(t&4)return Kp(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return Zo(n,i);{let r=n[e.index];return an(r)?Kp(-1,r):$t(r)}}else{if(t&128)return Zo(n,e.next);if(t&32)return kf(e,n)()||$t(n[e.index]);{let i=M0(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=ui(n[wt]);return Zo(r,i)}else return Zo(n,e.next)}}}return null}function M0(n,e){if(e!==null){let i=n[wt][Ut],r=e.projection;return i.projection[r]}return null}function Kp(n,e){let t=Ae+n+1;if(t<e.length){let i=e[t],r=i[Z].firstChild;if(r!==null)return Zo(i,r)}return e[gi]}function Ff(n,e,t,i,r,o,s){for(;t!=null;){let a=i[Wn];if(t.type===128){t=t.next;continue}let c=i[t.index],f=t.type;if(s&&e===0&&(c&&jr($t(c),i),t.flags|=2),!xf(t))if(f&8)Ff(n,e,t.child,i,r,o,!1),Fr(e,n,a,r,c,t,o,i);else if(f&32){let h=kf(t,i),y;for(;y=h();)Fr(e,n,a,r,y,t,o,i);Fr(e,n,a,r,c,t,o,i)}else f&16?Jx(n,e,i,t,r,o):Fr(e,n,a,r,c,t,o,i);t=s?t.projectionNext:t.next}}function ql(n,e,t,i,r,o){Ff(t,i,n.firstChild,e,r,o,!1)}function Jx(n,e,t,i,r,o){let s=t[wt],c=s[Ut].projection[i.projection];if(Array.isArray(c))for(let f=0;f<c.length;f++){let h=c[f];Fr(e,n,t[Wn],r,h,i,o,t)}else{let f=c,h=s[Ye];zv(i)&&(f.flags|=128),Ff(n,e,f,h,r,o,!0)}}function e1(n,e,t,i,r,o,s){let a=i[gi],c=$t(i);a!==c&&Fr(e,n,t,o,a,r,s);for(let f=Ae;f<i.length;f++){let h=i[f];ql(h[Z],h,n,e,o,a)}}function t1(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:In.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=In.Important),n.setStyle(t,i,r,o))}}function S0(n,e,t,i,r){let o=cn(),s=i&2;try{_i(-1),s&&e.length>je&&C0(n,e,je,!1);let a=s?pe.TemplateUpdateStart:pe.TemplateCreateStart;ye(a,r,t),t(i,r)}finally{_i(o);let a=s?pe.TemplateUpdateEnd:pe.TemplateCreateEnd;ye(a,r,t)}}function I0(n,e,t){a1(n,e,t),(t.flags&64)===64&&l1(n,e,t)}function Lf(n,e,t=ln){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?t(e,n):n[s];n[r++]=a}}}function n1(n,e,t,i){let o=i.get(Jv,Xv)||t===pn.ShadowDom||t===pn.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return i1(s),s}function i1(n){r1(n)}var r1=()=>null;function o1(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function P0(n,e,t,i,r,o){let s=e[Z];if(Vf(n,s,e,t,i)){vi(n)&&s1(e,n.index);return}n.type&3&&(t=o1(t)),T0(n,e,t,i,r,o)}function T0(n,e,t,i,r,o){if(n.type&3){let s=ln(n,e);i=o!=null?o(i,n.value||"",t):i,r.setProperty(s,t,i)}else n.type&12}function s1(n,e){let t=Ht(e,n);t[ie]&16||(t[ie]|=64)}function a1(n,e,t){let i=t.directiveStart,r=t.directiveEnd;vi(t)&&Fx(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Dl(t,e);let o=t.initialInputs;for(let s=i;s<r;s++){let a=n.data[s],c=Xo(e,n,s,t);if(jr(c,e),o!==null&&f1(e,s-i,c,a,t,o),Dn(a)){let f=Ht(t.index,e);f[Ne]=Xo(e,n,s,t)}}}function l1(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=Rg();try{_i(o);for(let a=i;a<r;a++){let c=n.data[a],f=e[a];il(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&c1(c,f)}}finally{_i(-1),il(s)}}function c1(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function d1(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];Ix(e,o.selectors,!1)&&(i??=[],Dn(o)?i.unshift(o):i.push(o))}return i}function u1(n,e,t,i,r,o){let s=ln(n,e);p1(e[De],s,o,n.value,t,i,r)}function p1(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let a=s==null?on(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}function f1(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],f=s[a+1];Zp(i,t,c,f)}}function O0(n,e,t,i,r){let o=je+t,s=e[Z],a=r(s,e,n,i,t);e[o]=a,Rr(n,!0);let c=n.type===2;return c?(m0(e[De],a,n),(wg()===0||Ja(n))&&jr(a,e),Mg()):jr(a,e),ll()&&(!c||!xf(n))&&Rf(s,e,a,n),n}function k0(n){let e=n;return vp()?Tg():(e=e.parent,Rr(e,!1)),e}function m1(n,e){let t=n[Wn];if(!t)return;let i;try{i=t.get(Ot,null)}catch{i=null}i?.(e)}function Vf(n,e,t,i,r){let o=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],a=!1;if(s)for(let c=0;c<s.length;c+=2){let f=s[c],h=s[c+1],y=e.data[f];Zp(y,t[f],h,r),a=!0}if(o)for(let c of o){let f=t[c],h=e.data[c];Zp(h,f,i,r),a=!0}return a}function h1(n,e){let t=Ht(e,n),i=t[Z];g1(i,t);let r=t[sn];r!==null&&t[Or]===null&&(t[Or]=e0(r,t[Wn])),ye(pe.ComponentStart);try{jf(i,t,t[Ne])}finally{ye(pe.ComponentEnd,t[Ne])}}function g1(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function jf(n,e,t){ol(e);try{let i=n.viewQuery;i!==null&&Wp(1,i,t);let r=n.template;r!==null&&S0(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[En]?.finishViewCreation(n),n.staticContentQueries&&t0(n,e),n.staticViewQueries&&Wp(2,n.viewQuery,t);let o=n.components;o!==null&&v1(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[ie]&=-5,sl()}}function v1(n,e){for(let t=0;t<e.length;t++)h1(n,e[t])}function Yl(n,e,t,i){let r=q(null);try{let o=e.tView,a=n[ie]&4096?4096:16,c=Tf(n,o,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=n[e.index];c[hi]=f;let h=n[En];return h!==null&&(c[En]=h.createEmbeddedView(o)),jf(o,c,t),c}finally{q(r)}}function Jo(n,e){return!e||e.firstChild===null||zv(n)}function es(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push($t(o)),an(o)&&N0(o,i);let s=t.type;if(s&8)es(n,e,t.child,i);else if(s&32){let a=kf(t,e),c;for(;c=a();)i.push(c)}else if(s&16){let a=M0(e,t);if(Array.isArray(a))i.push(...a);else{let c=ui(e[wt]);es(c[Z],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function N0(n,e){for(let t=Ae;t<n.length;t++){let i=n[t],r=i[Z].firstChild;r!==null&&es(i[Z],i,r,e)}n[gi]!==n[sn]&&e.push(n[gi])}function A0(n){if(n[Ki]!==null){for(let e of n[Ki])e.impl.addSequence(e);n[Ki].length=0}}var R0=[];function y1(n){return n[Tt]??_1(n)}function _1(n){let e=R0.pop()??Object.create(b1);return e.lView=n,e}function C1(n){n.lView[Tt]!==n&&(n.lView=null,R0.push(n))}var b1=W(P({},_r),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{tr(n.lView)},consumerOnSignalRead(){this.lView[Tt]=this}});function E1(n){let e=n[Tt]??Object.create(x1);return e.lView=n,e}var x1=W(P({},_r),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ui(n.lView);for(;e&&!F0(e[Z]);)e=ui(e);e&&cp(e)},consumerOnSignalRead(){this.lView[Tt]=this}});function F0(n){return n.type!==2}function L0(n){if(n[di]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[di])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[ie]&8192)}}var D1=100;function V0(n,e=0){let i=n[bn].rendererFactory,r=!1;r||i.begin?.();try{w1(n,e)}finally{r||i.end?.()}}function w1(n,e){let t=yp();try{No(!0),Xp(n,e);let i=0;for(;$o(n);){if(i===D1)throw new V(103,!1);i++,Xp(n,1)}}finally{No(t)}}function M1(n,e,t,i){if(er(e))return;let r=e[ie],o=!1,s=!1;ol(e);let a=!0,c=null,f=null;o||(F0(n)?(f=y1(e),c=Cr(f)):la()===null?(a=!1,f=E1(e),c=Cr(f)):e[Tt]&&(Fi(e[Tt]),e[Tt]=null));try{lp(e),kg(n.bindingStartIndex),t!==null&&S0(n,e,t,2,i);let h=(r&3)===3;if(!o)if(h){let w=n.preOrderCheckHooks;w!==null&&hl(e,w,null)}else{let w=n.preOrderHooks;w!==null&&gl(e,w,0,null),Tp(e,0)}if(s||S1(e),L0(e),j0(e,0),n.contentQueries!==null&&t0(n,e),!o)if(h){let w=n.contentCheckHooks;w!==null&&hl(e,w)}else{let w=n.contentHooks;w!==null&&gl(e,w,1),Tp(e,1)}P1(n,e);let y=n.components;y!==null&&U0(e,y,0);let M=n.viewQuery;if(M!==null&&Wp(2,M,i),!o)if(h){let w=n.viewCheckHooks;w!==null&&hl(e,w)}else{let w=n.viewHooks;w!==null&&gl(e,w,2),Tp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Xa]){for(let w of e[Xa])w();e[Xa]=null}o||(A0(e),e[ie]&=-73)}catch(h){throw o||tr(e),h}finally{f!==null&&(Eo(f,c),a&&C1(f)),sl()}}function j0(n,e){for(let t=Wv(n);t!==null;t=qv(t))for(let i=Ae;i<t.length;i++){let r=t[i];B0(r,e)}}function S1(n){for(let e=Wv(n);e!==null;e=qv(e)){if(!(e[ie]&2))continue;let t=e[Ji];for(let i=0;i<t.length;i++){let r=t[i];cp(r)}}}function I1(n,e,t){ye(pe.ComponentStart);let i=Ht(e,n);try{B0(i,t)}finally{ye(pe.ComponentEnd,i[Ne])}}function B0(n,e){tl(n)&&Xp(n,e)}function Xp(n,e){let i=n[Z],r=n[ie],o=n[Tt],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&xo(o)),s||=!1,o&&(o.dirty=!1),n[ie]&=-9217,s)M1(i,n,i.template,n[Ne]);else if(r&8192){let a=q(null);try{L0(n),j0(n,1);let c=i.components;c!==null&&U0(n,c,1),A0(n)}finally{q(a)}}}function U0(n,e,t){for(let i=0;i<e.length;i++)I1(n,e[i],t)}function P1(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)_i(~r);else{let o=r,s=t[++i],a=t[++i];Ag(s,o);let c=e[o];ye(pe.HostBindingsUpdateStart,c);try{a(2,c)}finally{ye(pe.HostBindingsUpdateEnd,c)}}}}finally{_i(-1)}}function Bf(n,e){let t=yp()?64:1088;for(n[bn].changeDetectionScheduler?.notify(e);n;){n[ie]|=t;let i=ui(n);if(Ar(n)&&!i)return n;n=i}return null}function $0(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function H0(n,e){let t=Ae+e;if(t<n.length)return n[t]}function Ql(n,e,t,i=!0){let r=e[Z];if(T1(r,e,n,t),i){let s=Kp(t,n),a=e[De],c=a.parentNode(n[gi]);c!==null&&Hx(r,n[Ut],a,e,c,s)}let o=e[Or];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function z0(n,e){let t=ts(n,e);return t!==void 0&&Wl(t[Z],t),t}function ts(n,e){if(n.length<=Ae)return;let t=Ae+e,i=n[t];if(i){let r=i[hi];r!==null&&r!==n&&Af(r,i),e>0&&(n[t-1][Bt]=i[Bt]);let o=Lo(n,Ae+e);$x(i[Z],i);let s=o[En];s!==null&&s.detachView(o[Z]),i[Ye]=null,i[Bt]=null,i[ie]&=-129}return i}function T1(n,e,t,i){let r=Ae+i,o=t.length;i>0&&(t[r-1][Bt]=e),i<o-Ae?(e[Bt]=t[r],Qu(t,Ae+i,e)):(t.push(e),e[Bt]=null),e[Ye]=t;let s=e[hi];s!==null&&t!==s&&G0(s,e);let a=e[En];a!==null&&a.insertView(n),nl(e),e[ie]|=128}function G0(n,e){let t=n[Ji],i=e[Ye];if(xn(i))n[ie]|=2;else{let r=i[Ye][wt];e[wt]!==r&&(n[ie]|=2)}t===null?n[Ji]=[e]:t.push(e)}var Ci=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Z];return es(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ne]}set context(e){this._lView[Ne]=e}get destroyed(){return er(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ye];if(an(e)){let t=e[Bo],i=t?t.indexOf(this):-1;i>-1&&(ts(e,i),Lo(t,i))}this._attachedToViewContainer=!1}Wl(this._lView[Z],this._lView)}onDestroy(e){dp(this._lView,e)}markForCheck(){Bf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){nl(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,V0(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ar(this._lView),t=this._lView[hi];t!==null&&!e&&Af(t,this._lView),w0(this._lView[Z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=e;let t=Ar(this._lView),i=this._lView[hi];i!==null&&!t&&G0(i,this._lView),nl(this._lView)}};var Br=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=O1;constructor(t,i,r){this._declarationLView=t,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,r){let o=Yl(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:r});return new Ci(o)}}return n})();function O1(){return Uf(Ke(),ne())}function Uf(n,e){return n.type&4?new Br(e,n,Hr(n,e)):null}function Zl(n,e,t,i,r){let o=n.data[e];if(o===null)o=k1(n,e,t,i,r),Ng()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=Pg();o.injectorIndex=s===null?-1:s.injectorIndex}return Rr(o,!0),o}function k1(n,e,t,i,r){let o=gp(),s=vp(),a=s?o:o&&o.parent,c=n.data[e]=A1(n,a,t,e,i,r);return N1(n,c,o,s),c}function N1(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function A1(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return Ig()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function R1(n){let e=n[ip]??[],i=n[Ye][De],r=[];for(let o of e)o.data[Kv]!==void 0?r.push(o):F1(o,i);n[ip]=r}function F1(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[Zv];for(;t<r;){let o=i.nextSibling;f0(e,i,!1),i=o,t++}}}var L1=()=>null,V1=()=>null;function Jp(n,e){return L1(n,e)}function W0(n,e,t){return V1(n,e,t)}var q0=class{},Kl=class{},ef=class{resolveComponentFactory(e){throw new V(917,!1)}},us=class{static NULL=new ef},or=class{},Pn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>j1()}return n})();function j1(){let n=ne(),e=Ke(),t=Ht(e.index,n);return(xn(t)?t:n)[De]}var Y0=(()=>{class n{static \u0275prov=F({token:n,providedIn:"root",factory:()=>null})}return n})();var yl={},tf=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){let r=this.injector.get(e,yl,i);return r!==yl||t===yl?r:this.parentInjector.get(e,t,i)}};function Pl(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=Ga(r,a);else if(o==2){let c=a,f=e[++s];i=Ga(i,c+": "+f+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function J(n,e=0){let t=ne();if(t===null)return Q(n,e);let i=Ke();return Uv(i,t,rt(n),e)}function B1(n,e,t,i,r){let o=i===null?null:{"":-1},s=r(n,t);if(s!==null){let a=s,c=null,f=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,c,f]=h.resolveHostDirectives(s);break}H1(n,e,t,a,o,c,f)}o!==null&&i!==null&&U1(t,i,o)}function U1(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new V(-301,!1);i.push(e[r],o)}}function $1(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function H1(n,e,t,i,r,o,s){let a=i.length,c=null;for(let M=0;M<a;M++){let w=i[M];c===null&&Dn(w)&&(c=w,$1(n,t,M)),$p(Dl(t,e),n,w.type)}Q1(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let M=0;M<a;M++){let w=i[M];w.providersResolver&&w.providersResolver(w)}let f=!1,h=!1,y=_0(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let M=0;M<a;M++){let w=i[M];if(t.mergedAttrs=Vr(t.mergedAttrs,w.hostAttrs),G1(n,t,e,y,w),Y1(y,w,r),s!==null&&s.has(w)){let[L,O]=s.get(w);t.directiveToIndex.set(w.type,[y,L+t.directiveStart,O+t.directiveStart])}else(o===null||!o.has(w))&&t.directiveToIndex.set(w.type,y);w.contentQueries!==null&&(t.flags|=4),(w.hostBindings!==null||w.hostAttrs!==null||w.hostVars!==0)&&(t.flags|=64);let A=w.type.prototype;!f&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),f=!0),!h&&(A.ngOnChanges||A.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),y++}z1(n,t,o)}function z1(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))mv(0,e,r,i),mv(1,e,r,i),gv(e,i,!1);else{let o=t.get(r);hv(0,e,o,i),hv(1,e,o,i),gv(e,i,!0)}}}function mv(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(i),Q0(e,o)}}function hv(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),Q0(e,s)}}function Q0(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function gv(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||If(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let c=i[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&r.hasOwnProperty(c)){let f=r[c];for(let h of f)if(h===e){s??=[],s.push(c,i[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let f=o[c];for(let h=0;h<f.length;h+=2)if(f[h]===e){s??=[],s.push(f[h+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function G1(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=ci(r.type,!0)),s=new ir(o,Dn(r),J,null);n.blueprint[i]=s,t[i]=s,W1(n,e,i,_0(n,t,r.hostVars,st),r)}function W1(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;q1(s)!=a&&s.push(a),s.push(t,i,o)}}function q1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Y1(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Dn(e)&&(t[""]=n)}}function Q1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Z0(n,e,t,i,r,o,s,a){let c=e[Z],f=c.consts,h=wn(f,s),y=Zl(c,n,t,i,h);return o&&B1(c,e,y,wn(f,a),r),y.mergedAttrs=Vr(y.mergedAttrs,y.attrs),y.attrs!==null&&Pl(y,y.attrs,!1),y.mergedAttrs!==null&&Pl(y,y.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,y),y}function K0(n,e){IE(n,e),rp(e)&&n.queries.elementEnd(e)}function Z1(n,e,t,i,r,o){let s=e.consts,a=wn(s,r),c=Zl(e,n,t,i,a);if(c.mergedAttrs=Vr(c.mergedAttrs,c.attrs),o!=null){let f=wn(s,o);c.localNames=[];for(let h=0;h<f.length;h+=2)c.localNames.push(f[h],-1)}return c.attrs!==null&&Pl(c,c.attrs,!1),c.mergedAttrs!==null&&Pl(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function $f(n,e,t){return n[e]=t}function K1(n,e){return n[e]}function kt(n,e,t){if(t===st)return!1;let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function Hf(n,e,t,i){let r=kt(n,e,t);return kt(n,e+1,i)||r}function X1(n,e,t,i,r){let o=Hf(n,e,t,i);return kt(n,e+2,r)||o}function _l(n,e,t){return function i(r){let o=vi(n)?Ht(n.index,e):e;Bf(o,5);let s=e[Ne],a=vv(e,s,t,r),c=i.__ngNextListenerFn__;for(;c;)a=vv(e,s,c,r)&&a,c=c.__ngNextListenerFn__;return a}}function vv(n,e,t,i){let r=q(null);try{return ye(pe.OutputStart,e,t),t(i)!==!1}catch(o){return m1(n,o),!1}finally{ye(pe.OutputEnd,e,t),q(r)}}function X0(n,e,t,i,r,o,s,a){let c=Ja(n),f=!1,h=null;if(!i&&c&&(h=eD(e,t,o,n.index)),h!==null){let y=h.__ngLastListenerFn__||h;y.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,f=!0}else{let y=ln(n,t),M=i?i(y):y;KE(t,M,o,a);let w=r.listen(M,o,a);if(!J1(o)){let A=i?L=>i($t(L[n.index])):n.index;J0(A,e,t,o,a,w,!1)}}return f}function J1(n){return n.startsWith("animation")||n.startsWith("transition")}function eD(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let a=e[kr],c=r[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function J0(n,e,t,i,r,o,s){let a=e.firstCreatePass?pp(e):null,c=up(t),f=c.length;c.push(r,o),a&&a.push(i,n,f,(f+1)*(s?-1:1))}function yv(n,e,t,i,r,o){let s=e[t],a=e[Z],f=a.data[t].outputs[i],y=s[f].subscribe(o);J0(n.index,a,e,r,o,y,!0)}var nf=Symbol("BINDING");var Tl=class extends us{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=pi(e);return new Ur(t,this.ngModule)}};function tD(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&zl.SignalBased)!==0};return r&&(o.transform=r),o})}function nD(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function iD(n,e,t){let i=e instanceof Oe?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new tf(t,i):t}function rD(n){let e=n.get(or,null);if(e===null)throw new V(407,!1);let t=n.get(Y0,null),i=n.get(zn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i,ngReflect:!1}}function oD(n,e){let t=ey(n);return u0(e,t,t==="svg"?op:t==="math"?_g:null)}function ey(n){return(n.selectors[0][0]||"div").toLowerCase()}var Ur=class extends Kl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=tD(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=nD(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=kx(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r,o,s){ye(pe.DynamicComponentStart);let a=q(null);try{let c=this.componentDef,f=sD(i,c,s,o),h=iD(c,r||this.ngModule,e),y=rD(h),M=y.rendererFactory.createRenderer(null,c),w=i?n1(M,i,c.encapsulation,h):oD(c,M),A=s?.some(_v)||o?.some(R=>typeof R!="function"&&R.bindings.some(_v)),L=Tf(null,f,null,512|y0(c),null,null,y,M,h,null,e0(w,h,!0));L[je]=w,ol(L);let O=null;try{let R=Z0(je,L,2,"#host",()=>f.directiveRegistry,!0,0);m0(M,w,R),jr(w,L),I0(f,L,R),n0(f,R,L),K0(f,R),t!==void 0&&lD(R,this.ngContentSelectors,t),O=Ht(R.index,L),L[Ne]=O[Ne],jf(f,L,null)}catch(R){throw O!==null&&zp(O),zp(L),R}finally{ye(pe.DynamicComponentEnd),sl()}return new Ol(this.componentType,L,!!A)}finally{q(a)}}};function sD(n,e,t,i){let r=n?["ng-version","21.1.1"]:Nx(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[nf].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(i)for(let h=0;h<i.length;h++){let y=i[h];if(typeof y!="function")for(let M of y.bindings){a+=M[nf].requiredVars;let w=h+1;M.create&&(M.targetIdx=w,(o??=[]).push(M)),M.update&&(M.targetIdx=w,(s??=[]).push(M))}}let c=[e];if(i)for(let h of i){let y=typeof h=="function"?h:h.type,M=Wu(y);c.push(M)}return Pf(0,null,aD(o,s),1,a,c,null,null,null,[r],null)}function aD(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let i of n)i.create();if(t&2&&e)for(let i of e)i.update()}}function _v(n){let e=n[nf].kind;return e==="input"||e==="twoWay"}var Ol=class extends q0{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,i){super(),this._rootLView=t,this._hasInputBindings=i,this._tNode=Uo(t[Z],je),this.location=Hr(this._tNode,t),this.instance=Ht(this._tNode.index,t)[Ne],this.hostView=this.changeDetectorRef=new Ci(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=Vf(i,r[Z],r,e,t);this.previousInputValues.set(e,t);let s=Ht(i.index,r);Bf(s,1)}get injector(){return new nr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function lD(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var lr=(()=>{class n{static __NG_ELEMENT_ID__=cD}return n})();function cD(){let n=Ke();return ny(n,ne())}var dD=lr,ty=class extends dD{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Hr(this._hostTNode,this._hostLView)}get injector(){return new nr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Cf(this._hostTNode,this._hostLView);if(Rv(e)){let t=El(e,this._hostLView),i=bl(e),r=t[Z].data[i+8];return new nr(r,t)}else return new nr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Cv(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ae}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=Jp(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,Jo(this._hostTNode,s)),a}createComponent(e,t,i,r,o,s,a){let c=e&&!xE(e),f;if(c)f=t;else{let O=t||{};f=O.index,i=O.injector,r=O.projectableNodes,o=O.environmentInjector||O.ngModuleRef,s=O.directives,a=O.bindings}let h=c?e:new Ur(pi(e)),y=i||this.parentInjector;if(!o&&h.ngModule==null){let R=(c?y:this.parentInjector).get(Oe,null);R&&(o=R)}let M=pi(h.componentType??{}),w=Jp(this._lContainer,M?.id??null),A=w?.firstChild??null,L=h.create(y,r,A,o,s,a);return this.insertImpl(L.hostView,f,Jo(this._hostTNode,w)),L}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(bg(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[Ye],f=new ty(c,c[Ut],c[Ye]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Ql(s,r,o,i),e.attachToViewContainerRef(),Qu(Np(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Cv(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=ts(this._lContainer,t);i&&(Lo(Np(this._lContainer),t),Wl(i[Z],i))}detach(e){let t=this._adjustIndex(e,-1),i=ts(this._lContainer,t);return i&&Lo(Np(this._lContainer),t)!=null?new Ci(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function Cv(n){return n[Bo]}function Np(n){return n[Bo]||(n[Bo]=[])}function ny(n,e){let t,i=e[n.index];return an(i)?t=i:(t=$0(i,e,null,n),e[n.index]=t,Of(e,t)),pD(t,e,n,i),new ty(t,n,e)}function uD(n,e){let t=n[De],i=t.createComment(""),r=ln(e,n),o=t.parentNode(r);return Sl(t,o,i,t.nextSibling(r),!1),i}var pD=hD,fD=()=>!1;function mD(n,e,t){return fD(n,e,t)}function hD(n,e,t,i){if(n[gi])return;let r;t.type&8?r=$t(i):r=uD(e,t),n[gi]=r}var rf=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},of=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)zf(e,t).matches!==null&&this.queries[t].setDirty()}},sf=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=xD(e):this.predicate=e}},af=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},lf=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,gD(t,o)),this.matchTNodeWithReadOption(e,t,vl(t,e,o,!1,!1))}else i===Br?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,vl(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Mt||r===lr||r===Br&&t.type&4)this.addMatch(t.index,-2);else{let o=vl(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function gD(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function vD(n,e){return n.type&11?Hr(n,e):n.type&4?Uf(n,e):null}function yD(n,e,t,i){return t===-1?vD(e,n):t===-2?_D(n,e,i):Xo(n,n[Z],t,e)}function _D(n,e,t){if(t===Mt)return Hr(e,n);if(t===Br)return Uf(e,n);if(t===lr)return ny(e,n)}function iy(n,e,t,i){let r=e[En].queries[i];if(r.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let f=s[c];if(f<0)a.push(null);else{let h=o[f];a.push(yD(e,h,s[c+1],t.metadata.read))}}r.matches=a}return r.matches}function cf(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=iy(n,e,r,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)i.push(s[a/2]);else{let f=o[a+1],h=e[-c];for(let y=Ae;y<h.length;y++){let M=h[y];M[hi]===M[Ye]&&cf(M[Z],M,f,i)}if(h[Ji]!==null){let y=h[Ji];for(let M=0;M<y.length;M++){let w=y[M];cf(w[Z],w,f,i)}}}}}return i}function CD(n,e){return n[En].queries[e].queryList}function bD(n,e,t){let i=new wl((t&4)===4);return Dg(n,e,i,i.destroy),(e[En]??=new of).queries.push(new rf(i))-1}function ED(n,e,t,i){let r=Be();if(r.firstCreatePass){let o=Ke();DD(r,new sf(e,t,i),o.index),wD(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return bD(r,ne(),t)}function xD(n){return n.split(",").map(e=>e.trim())}function DD(n,e,t){n.queries===null&&(n.queries=new af),n.queries.track(new lf(e,t))}function wD(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function zf(n,e){return n.queries.getByIndex(e)}function MD(n,e){let t=n[Z],i=zf(t,e);return i.crossesNgTemplate?cf(t,n,e,[]):iy(t,n,i,e)}var sr=class{},Xl=class{};var kl=class extends sr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Tl(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=Gu(e);this._bootstrapComponents=g0(o.bootstrap),this._r3Injector=xp(e,t,[{provide:sr,useValue:this},{provide:us,useValue:this.componentFactoryResolver},...i],Hn(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Nl=class extends Xl{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new kl(this.moduleType,e,[])}};var ns=class extends sr{injector;componentFactoryResolver=new Tl(this);instance=null;constructor(e){super();let t=new Wi([...e.providers,{provide:sr,useValue:this},{provide:us,useValue:this.componentFactoryResolver}],e.parent||jo(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ps(n,e,t=null){return new ns({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var SD=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=Xu(!1,t.type),r=i.length>0?ps([i],this._injector,""):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=F({token:n,providedIn:"environment",factory:()=>new n(Q(Oe))})}return n})();function $(n){return rs(()=>{let e=ry(n),t=W(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===bf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(SD).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||pn.Emulated,styles:n.styles||Ct,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&bi("NgStandalone"),oy(t);let i=n.dependencies;return t.directiveDefs=bv(i,ID),t.pipeDefs=bv(i,rg),t.id=OD(t),t})}function ID(n){return pi(n)||Wu(n)}function fn(n){return rs(()=>({type:n.type,bootstrap:n.bootstrap||Ct,declarations:n.declarations||Ct,imports:n.imports||Ct,exports:n.exports||Ct,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function PD(n,e){if(n==null)return fi;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a,c;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,c=r[3]||null):(o=r,s=r,a=zl.None,c=null),t[o]=[i,a,c],e[o]=s}return t}function TD(n){if(n==null)return fi;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function xe(n){return rs(()=>{let e=ry(n);return oy(e),e})}function Jl(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function ry(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||fi,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ct,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:PD(n.inputs,e),outputs:TD(n.outputs),debugInfo:null}}function oy(n){n.features?.forEach(e=>e(n))}function bv(n,e){return n?()=>{let t=typeof n=="function"?n():n,i=[];for(let r of t){let o=e(r);o!==null&&i.push(o)}return i}:null}function OD(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function kD(n){return Object.getPrototypeOf(n.prototype).constructor}function at(n){let e=kD(n.type),t=!0,i=[n];for(;e;){let r;if(Dn(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new V(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=Ap(n.inputs),s.declaredInputs=Ap(n.declaredInputs),s.outputs=Ap(n.outputs);let a=r.hostBindings;a&&LD(n,a);let c=r.viewQuery,f=r.contentQueries;if(c&&RD(n,c),f&&FD(n,f),ND(n,r),ig(n.outputs,r.outputs),Dn(r)&&r.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===at&&(t=!1)}}e=Object.getPrototypeOf(e)}AD(i)}function ND(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function AD(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Vr(r.hostAttrs,t=Vr(t,r.hostAttrs))}}function Ap(n){return n===fi?{}:n===Ct?[]:n}function RD(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function FD(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function LD(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function VD(n,e,t,i,r,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Vr(n.mergedAttrs,n.attrs);let h=n.tView=Pf(2,n,r,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Rr(n,!1);let c=jD(t,e,n,i);ll()&&Rf(t,e,c,n),jr(c,e);let f=$0(c,e,c,n);e[i+je]=f,Of(e,f),mD(f,n,e)}function Al(n,e,t,i,r,o,s,a,c,f,h){let y=t+je,M;if(e.firstCreatePass){if(M=Zl(e,y,4,s||null,a||null),f!=null){let w=wn(e.consts,f);M.localNames=[];for(let A=0;A<w.length;A+=2)M.localNames.push(w[A],-1)}}else M=e.data[y];return VD(M,n,e,t,i,r,o,c),f!=null&&Lf(n,M,h),M}var jD=BD;function BD(n,e,t,i){return cl(!0),e[De].createComment("")}var Gf=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function sy(n){return typeof n=="function"&&n[yt]!==void 0}function Wf(n){return sy(n)&&typeof n.set=="function"}var qf=new U("");function Ei(n){return!!n&&typeof n.then=="function"}function Yf(n){return!!n&&typeof n.subscribe=="function"}var ay=new U("");var Qf=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=_(ay,{optional:!0})??[];injector=_(pt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=Ze(this.injector,r);if(Ei(o))t.push(o);else if(Yf(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ec=new U("");function ly(){au(()=>{let n="";throw new V(600,n)})}function cy(n){return n.isBoundToModule}var UD=10;var xi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=_(Ot);afterRenderManager=_(Nf);zonelessEnabled=_(qo);rootEffectScheduler=_(dl);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ze;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=_(Yn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ce(t=>!t))}constructor(){_(Zn,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=_(Oe);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=pt.NULL){return this._injector.get(ft).run(()=>{ye(pe.BootstrapComponentStart);let s=t instanceof Kl;if(!this._injector.get(Qf).done){let A="";throw new V(405,A)}let c;s?c=t:c=this._injector.get(us).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let f=cy(c)?void 0:this._injector.get(sr),h=i||c.selector,y=c.create(r,[],h,f),M=y.location.nativeElement,w=y.injector.get(qf,null);return w?.registerApplication(M),y.onDestroy(()=>{this.detachView(y.hostView),Ko(this.components,y),w?.unregisterApplication(M)}),this._loadComponent(y),ye(pe.BootstrapComponentEnd,y),y})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ye(pe.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Gl.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ye(pe.ChangeDetectionEnd),new V(101,!1);let t=q(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,q(t),this.afterTick.next(),ye(pe.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(or,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<UD;){ye(pe.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ye(pe.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!$o(r))continue;let o=i&&!this.zonelessEnabled?0:1;V0(r,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>$o(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;Ko(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(t),this._injector.get(ec,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ko(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new V(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ko(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function te(n,e,t,i){let r=ne(),o=yi();if(kt(r,o,e)){let s=Be(),a=Go();u1(a,r,n,e,t,i)}return te}var Fj=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function tc(){return ne()[wt][Ne]}var df=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),r=Math.max(e,t),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(e,t){this.attach(t,this.detach(e))}};function Rp(n,e,t,i,r){return n===t&&Object.is(e,i)?1:Object.is(r(n,e),r(t,i))?-1:0}function $D(n,e,t,i){let r,o,s=0,a=n.length-1,c=void 0;if(Array.isArray(e)){q(i);let f=e.length-1;for(q(null);s<=a&&s<=f;){let h=n.at(s),y=e[s],M=Rp(s,h,s,y,t);if(M!==0){M<0&&n.updateValue(s,y),s++;continue}let w=n.at(a),A=e[f],L=Rp(a,w,f,A,t);if(L!==0){L<0&&n.updateValue(a,A),a--,f--;continue}let O=t(s,h),R=t(a,w),ee=t(s,y);if(Object.is(ee,R)){let tt=t(f,A);Object.is(tt,O)?(n.swap(s,a),n.updateValue(a,A),f--,a--):n.move(a,s),n.updateValue(s,y),s++;continue}if(r??=new Rl,o??=xv(n,s,a,t),uf(n,r,s,ee))n.updateValue(s,y),s++,a++;else if(o.has(ee))r.set(O,n.detach(s)),a--;else{let tt=n.create(s,e[s]);n.attach(s,tt),s++,a++}}for(;s<=f;)Ev(n,r,t,s,e[s]),s++}else if(e!=null){q(i);let f=e[Symbol.iterator]();q(null);let h=f.next();for(;!h.done&&s<=a;){let y=n.at(s),M=h.value,w=Rp(s,y,s,M,t);if(w!==0)w<0&&n.updateValue(s,M),s++,h=f.next();else{r??=new Rl,o??=xv(n,s,a,t);let A=t(s,M);if(uf(n,r,s,A))n.updateValue(s,M),s++,a++,h=f.next();else if(!o.has(A))n.attach(s,n.create(s,M)),s++,a++,h=f.next();else{let L=t(s,y);r.set(L,n.detach(s)),a--}}}for(;!h.done;)Ev(n,r,t,n.length,h.value),h=f.next()}for(;s<=a;)n.destroy(n.detach(a--));r?.forEach(f=>{n.destroy(f)})}function uf(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function Ev(n,e,t,i,r){if(uf(n,e,i,t(i,r)))n.updateValue(i,r);else{let o=n.create(i,r);n.attach(i,o)}}function xv(n,e,t,i){let r=new Set;for(let o=e;o<=t;o++)r.add(i(o,n.at(o)));return r}var Rl=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,t)}}};function C(n,e,t,i,r,o,s,a){bi("NgControlFlow");let c=ne(),f=Be(),h=wn(f.consts,o);return Al(c,f,n,e,t,i,r,h,256,s,a),Zf}function Zf(n,e,t,i,r,o,s,a){bi("NgControlFlow");let c=ne(),f=Be(),h=wn(f.consts,o);return Al(c,f,n,e,t,i,r,h,512,s,a),Zf}function b(n,e){bi("NgControlFlow");let t=ne(),i=yi(),r=t[i]!==st?t[i]:-1,o=r!==-1?Fl(t,je+r):void 0,s=0;if(kt(t,i,n)){let a=q(null);try{if(o!==void 0&&z0(o,s),n!==-1){let c=je+n,f=Fl(t,c),h=hf(t[Z],c),y=W0(f,h,t),M=Yl(t,h,e,{dehydratedView:y});Ql(f,M,s,Jo(h,y))}}finally{q(a)}}else if(o!==void 0){let a=H0(o,s);a!==void 0&&(a[Ne]=e)}}var pf=class{lContainer;$implicit;$index;constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-Ae}};function Ie(n,e){return e}var ff=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function K(n,e,t,i,r,o,s,a,c,f,h,y,M){bi("NgControlFlow");let w=ne(),A=Be(),L=c!==void 0,O=ne(),R=a?s.bind(O[wt][Ne]):s,ee=new ff(L,R);O[je+n]=ee,Al(w,A,n+1,e,t,i,r,wn(A.consts,o),256),L&&Al(w,A,n+2,c,f,h,y,wn(A.consts,M),512)}var mf=class extends df{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i}get length(){return this.lContainer.length-Ae}at(e){return this.getLView(e)[Ne].$implicit}attach(e,t){let i=t[Or];this.needsIndexUpdate||=e!==this.length,Ql(this.lContainer,t,e,Jo(this.templateTNode,i)),HD(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,zD(this.lContainer,e),GD(this.lContainer,e)}create(e,t){let i=Jp(this.lContainer,this.templateTNode.tView.ssrId);return Yl(this.hostLView,this.templateTNode,new pf(this.lContainer,t,e),{dehydratedView:i})}destroy(e){Wl(e[Z],e)}updateValue(e,t){this.getLView(e)[Ne].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ne].$index=e}getLView(e){return WD(this.lContainer,e)}};function X(n){let e=q(null),t=cn();try{let i=ne(),r=i[Z],o=i[t],s=t+1,a=Fl(i,s);if(o.liveCollection===void 0){let f=hf(r,s);o.liveCollection=new mf(a,i,f)}else o.liveCollection.reset();let c=o.liveCollection;if($D(c,n,o.trackByFn,e),c.updateIndexes(),o.hasEmptyBlock){let f=yi(),h=c.length===0;if(kt(i,f,h)){let y=t+2,M=Fl(i,y);if(h){let w=hf(r,y),A=W0(M,w,i),L=Yl(i,w,void 0,{dehydratedView:A});Ql(M,L,0,Jo(w,A))}else r.firstUpdatePass&&R1(M),z0(M,0)}}}finally{q(e)}}function Fl(n,e){return n[e]}function HD(n,e){if(n.length<=Ae)return;let t=Ae+e,i=n[t],r=i?i[Xi]:void 0;if(i&&r&&r.detachedLeaveAnimationFns&&r.detachedLeaveAnimationFns.length>0){let o=i[Wn];Bx(o,r),rr.delete(i[qn]),r.detachedLeaveAnimationFns=void 0}}function zD(n,e){if(n.length<=Ae)return;let t=Ae+e,i=n[t],r=i?i[Xi]:void 0;r&&r.leave&&r.leave.size>0&&(r.detachedLeaveAnimationFns=[])}function GD(n,e){return ts(n,e)}function WD(n,e){return H0(n,e)}function hf(n,e){return Uo(n,e)}function H(n,e,t){let i=ne(),r=yi();if(kt(i,r,e)){let o=Be(),s=Go();P0(s,i,n,e,i[De],t)}return H}function gf(n,e,t,i,r){Vf(e,n,t,r?"class":"style",i)}function u(n,e,t,i){let r=ne(),o=r[Z],s=n+je,a=o.firstCreatePass?Z0(s,r,2,e,d1,Sg(),t,i):o.data[s];if(O0(a,r,n,e,dy),Ja(a)){let c=r[Z];I0(c,r,a),n0(c,a,r)}return i!=null&&Lf(r,a),u}function d(){let n=Be(),e=Ke(),t=k0(e);return n.firstCreatePass&&K0(n,t),mp(t)&&hp(),fp(),t.classesWithoutHost!=null&&TE(t)&&gf(n,t,ne(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&OE(t)&&gf(n,t,ne(),t.stylesWithoutHost,!1),d}function de(n,e,t,i){return u(n,e,t,i),d(),de}function v(n,e,t,i){let r=ne(),o=r[Z],s=n+je,a=o.firstCreatePass?Z1(s,o,2,e,t,i):o.data[s];return O0(a,r,n,e,dy),i!=null&&Lf(r,a),v}function g(){let n=Ke(),e=k0(n);return mp(e)&&hp(),fp(),g}function ue(n,e,t,i){return v(n,e,t,i),g(),ue}var dy=(n,e,t,i,r)=>(cl(!0),u0(e[De],i,Ug()));function N(){return ne()}function _e(n,e,t){let i=ne(),r=yi();if(kt(i,r,e)){let o=Be(),s=Go();T0(s,i,n,e,i[De],t)}return _e}var Qo=void 0;function qD(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var YD=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Qo,Qo,Qo],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",qD],Fp={};function Nt(n){let e=QD(n),t=Dv(e);if(t)return t;let i=e.split("-")[0];if(t=Dv(i),t)return t;if(i==="en")return YD;throw new V(701,!1)}function Dv(n){return n in Fp||(Fp[n]=rn.ng&&rn.ng.common&&rn.ng.common.locales&&rn.ng.common.locales[n]),Fp[n]}var He=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(He||{});function QD(n){return n.toLowerCase().replace(/_/g,"-")}var fs="en-US";var ZD=fs;function uy(n){typeof n=="string"&&(ZD=n.toLowerCase().replace(/_/g,"-"))}function I(n,e,t){let i=ne(),r=Be(),o=Ke();return py(r,i,i[De],o,n,e,t),I}function B(n,e,t){let i=ne(),r=Be(),o=Ke();return(o.type&3||t)&&X0(o,r,i,t,i[De],n,e,_l(o,i,e)),B}function py(n,e,t,i,r,o,s){let a=!0,c=null;if((i.type&3||s)&&(c??=_l(i,e,o),X0(i,n,e,s,t,r,o,c)&&(a=!1)),a){let f=i.outputs?.[r],h=i.hostDirectiveOutputs?.[r];if(h&&h.length)for(let y=0;y<h.length;y+=2){let M=h[y],w=h[y+1];c??=_l(i,e,o),yv(i,e,M,w,r,c)}if(f&&f.length)for(let y of f)c??=_l(i,e,o),yv(i,e,y,r,r,c)}}function m(n=1){return Bg(n)}function nc(n,e,t,i){return ED(n,e,t,i),nc}function Kf(n){let e=ne(),t=Be(),i=Cp();rl(i+1);let r=zf(t,i);if(n.dirty&&Cg(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=MD(e,i);n.reset(o,zE),n.notifyOnChanges()}return!0}return!1}function Xf(){return CD(ne(),Cp())}function Jf(n){let e=Og();return el(e,je+n)}function ml(n,e){return n<<17|e<<2}function ar(n){return n>>17&32767}function KD(n){return(n&2)==2}function XD(n,e){return n&131071|e<<17}function vf(n){return n|2}function $r(n){return(n&131068)>>2}function Lp(n,e){return n&-131069|e<<2}function JD(n){return(n&1)===1}function yf(n){return n|1}function ew(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=ar(s),c=$r(s);n[i]=t;let f=!1,h;if(Array.isArray(t)){let y=t;h=y[1],(h===null||Tr(y,h)>0)&&(f=!0)}else h=t;if(r)if(c!==0){let M=ar(n[a+1]);n[i+1]=ml(M,a),M!==0&&(n[M+1]=Lp(n[M+1],i)),n[a+1]=XD(n[a+1],i)}else n[i+1]=ml(a,0),a!==0&&(n[a+1]=Lp(n[a+1],i)),a=i;else n[i+1]=ml(c,0),a===0?a=i:n[c+1]=Lp(n[c+1],i),c=i;f&&(n[i+1]=vf(n[i+1])),wv(n,h,i,!0),wv(n,h,i,!1),tw(e,h,n,i,o),s=ml(a,c),o?e.classBindings=s:e.styleBindings=s}function tw(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Tr(o,e)>=0&&(t[i+1]=yf(t[i+1]))}function wv(n,e,t,i){let r=n[t+1],o=e===null,s=i?ar(r):$r(r),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],f=n[s+1];nw(c,e)&&(a=!0,n[s+1]=i?yf(f):vf(f)),s=i?ar(f):$r(f)}a&&(n[t+1]=i?vf(r):yf(r))}function nw(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Tr(n,e)>=0:!1}var un={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function iw(n){return n.substring(un.key,un.keyEnd)}function rw(n){return ow(n),fy(n,my(n,0,un.textEnd))}function fy(n,e){let t=un.textEnd;return t===e?-1:(e=un.keyEnd=sw(n,un.key=e,t),my(n,e,t))}function ow(n){un.key=0,un.keyEnd=0,un.value=0,un.valueEnd=0,un.textEnd=n.length}function my(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function sw(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Xe(n,e,t){return hy(n,e,t,!1),Xe}function z(n,e){return hy(n,e,null,!0),z}function Di(n){lw(mw,aw,n,!0)}function aw(n,e){for(let t=rw(e);t>=0;t=fy(e,t))Za(n,iw(e),!0)}function hy(n,e,t,i){let r=ne(),o=Be(),s=zo(2);if(o.firstUpdatePass&&vy(o,n,s,i),e!==st&&kt(r,s,e)){let a=o.data[cn()];yy(o,a,r,r[De],n,r[s+1]=gw(e,t),i,s)}}function lw(n,e,t,i){let r=Be(),o=zo(2);r.firstUpdatePass&&vy(r,null,o,i);let s=ne();if(t!==st&&kt(s,o,t)){let a=r.data[cn()];if(_y(a,i)&&!gy(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=Ga(c,t||"")),gf(r,a,s,t,i)}else hw(r,a,s,s[De],s[o+1],s[o+1]=fw(n,e,t),i,o)}}function gy(n,e){return e>=n.expandoStartIndex}function vy(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[cn()],s=gy(n,t);_y(o,i)&&e===null&&!s&&(e=!1),e=cw(r,o,e,i),ew(r,o,e,t,s,i)}}function cw(n,e,t,i){let r=Fg(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=Vp(null,n,e,t,i),t=is(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=Vp(r,n,e,t,i),o===null){let c=dw(n,e,i);c!==void 0&&Array.isArray(c)&&(c=Vp(null,n,e,c[1],i),c=is(c,e.attrs,i),uw(n,e,i,c))}else o=pw(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function dw(n,e,t){let i=t?e.classBindings:e.styleBindings;if($r(i)!==0)return n[ar(i)]}function uw(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[ar(r)]=i}function pw(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=is(i,s,t)}return is(i,e.attrs,t)}function Vp(n,e,t,i,r){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],i=is(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function is(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Za(n,s,t?!0:e[++o]))}return n===void 0?null:n}function fw(n,e,t){if(t==null||t==="")return Ct;let i=[],r=zr(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(r instanceof Set)for(let o of r)n(i,o,!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function mw(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&Za(n,i,t)}function hw(n,e,t,i,r,o,s,a){r===st&&(r=Ct);let c=0,f=0,h=0<r.length?r[0]:null,y=0<o.length?o[0]:null;for(;h!==null||y!==null;){let M=c<r.length?r[c+1]:void 0,w=f<o.length?o[f+1]:void 0,A=null,L;h===y?(c+=2,f+=2,M!==w&&(A=y,L=w)):y===null||h!==null&&h<y?(c+=2,A=h):(f+=2,A=y,L=w),A!==null&&yy(n,e,t,i,A,L,s,a),h=c<r.length?r[c]:null,y=f<o.length?o[f]:null}}function yy(n,e,t,i,r,o,s,a){if(!(e.type&3))return;let c=n.data,f=c[a+1],h=JD(f)?Mv(c,e,t,r,$r(f),s):void 0;if(!Ll(h)){Ll(o)||KD(f)&&(o=Mv(c,null,t,r,a,s));let y=sp(cn(),t);t1(i,s,y,r,o)}}function Mv(n,e,t,i,r,o){let s=e===null,a;for(;r>0;){let c=n[r],f=Array.isArray(c),h=f?c[1]:c,y=h===null,M=t[r+1];M===st&&(M=y?Ct:void 0);let w=y?Ka(M,i):h===i?M:void 0;if(f&&!Ll(w)&&(w=Ka(c,i)),Ll(w)&&(a=w,s))return a;let A=n[r+1];r=s?ar(A):$r(A)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Ka(c,i))}return a}function Ll(n){return n!==void 0}function gw(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Hn(zr(n)))),n}function _y(n,e){return(n.flags&(e?8:16))!==0}function l(n,e=""){let t=ne(),i=Be(),r=n+je,o=i.firstCreatePass?Zl(i,r,1,e,null):i.data[r],s=vw(i,t,o,e,n);t[r]=s,ll()&&Rf(i,t,s,o),Rr(o,!1)}var vw=(n,e,t,i,r)=>(cl(!0),gx(e[De],i));function yw(n,e,t,i=""){return kt(n,yi(),t)?e+on(t)+i:st}function _w(n,e,t,i,r,o=""){let s=_p(),a=Hf(n,s,t,r);return zo(2),a?e+on(t)+i+on(r)+o:st}function Cw(n,e,t,i,r,o,s,a=""){let c=_p(),f=X1(n,c,t,r,s);return zo(3),f?e+on(t)+i+on(r)+o+on(s)+a:st}function k(n){return T("",n),k}function T(n,e,t){let i=ne(),r=yw(i,n,e,t);return r!==st&&em(i,cn(),r),T}function Fe(n,e,t,i,r){let o=ne(),s=_w(o,n,e,t,i,r);return s!==st&&em(o,cn(),s),Fe}function ic(n,e,t,i,r,o,s){let a=ne(),c=Cw(a,n,e,t,i,r,o,s);return c!==st&&em(a,cn(),c),ic}function em(n,e,t){let i=sp(e,n);vx(n[De],i,t)}function Wt(n,e,t){Wf(e)&&(e=e());let i=ne(),r=yi();if(kt(i,r,e)){let o=Be(),s=Go();P0(s,i,n,e,i[De],t)}return Wt}function mn(n,e){let t=Wf(n);return t&&n.set(e),t}function qt(n,e){let t=ne(),i=Be(),r=Ke();return py(i,t,t[De],r,n,e),qt}function Sv(n,e,t){let i=Be();i.firstCreatePass&&Cy(e,i.data,i.blueprint,Dn(n),t)}function Cy(n,e,t,i,r){if(n=rt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Cy(n[o],e,t,i,r);else{let o=Be(),s=ne(),a=Ke(),c=Gi(n)?n:rt(n.provide),f=ep(n),h=a.providerIndexes&1048575,y=a.directiveStart,M=a.providerIndexes>>20;if(Gi(n)||!n.multi){let w=new ir(f,r,J,null),A=Bp(c,e,r?h:h+M,y);A===-1?($p(Dl(a,s),o,c),jp(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(w),s.push(w)):(t[A]=w,s[A]=w)}else{let w=Bp(c,e,h+M,y),A=Bp(c,e,h,h+M),L=w>=0&&t[w],O=A>=0&&t[A];if(r&&!O||!r&&!L){$p(Dl(a,s),o,c);let R=xw(r?Ew:bw,t.length,r,i,f,n);!r&&O&&(t[A].providerFactory=R),jp(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(R),s.push(R)}else{let R=by(t[r?A:w],f,!r&&i);jp(o,n,w>-1?w:A,R)}!r&&i&&O&&t[A].componentProviders++}}}function jp(n,e,t,i){let r=Gi(e),o=gg(e);if(r||o){let c=(o?rt(e.useClass):e).prototype.ngOnDestroy;if(c){let f=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let h=f.indexOf(t);h===-1?f.push(t,[i,c]):f[h+1].push(i,c)}else f.push(t,c)}}}function by(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Bp(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function bw(n,e,t,i,r){return _f(this.multi,[])}function Ew(n,e,t,i,r){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Xo(i,i[Z],this.providerFactory.index,r);s=c.slice(0,a),_f(o,s);for(let f=a;f<c.length;f++)s.push(c[f])}else s=[],_f(o,s);return s}function _f(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function xw(n,e,t,i,r,o){let s=new ir(n,t,J,null);return s.multi=[],s.index=e,s.componentProviders=0,by(s,r,i&&!t),s}function Yt(n,e){return t=>{t.providersResolver=(i,r)=>Sv(i,r?r(n):n,!1),e&&(t.viewProvidersResolver=(i,r)=>Sv(i,r?r(e):e,!0))}}function wi(n,e){let t=Ho()+n,i=ne();return i[t]===st?$f(i,t,e()):K1(i,t)}function Tn(n,e,t){return xy(ne(),Ho(),n,e,t)}function Ey(n,e){let t=n[e];return t===st?void 0:t}function xy(n,e,t,i,r,o){let s=e+t;return kt(n,s,r)?$f(n,s+1,o?i.call(o,r):i(r)):Ey(n,s+1)}function Dw(n,e,t,i,r,o,s){let a=e+t;return Hf(n,a,r,o)?$f(n,a+2,s?i.call(s,r,o):i(r,o)):Ey(n,a+2)}function Et(n,e){let t=Be(),i,r=n+je;t.firstCreatePass?(i=ww(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=ci(i.type,!0)),s,a=_t(J);try{let c=xl(!1),f=o();return xl(c),ap(t,ne(),r,f),f}finally{_t(a)}}function ww(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function Kn(n,e,t){let i=n+je,r=ne(),o=el(r,i);return Dy(r,i)?xy(r,Ho(),e,o.transform,t,o):o.transform(t)}function Mi(n,e,t,i){let r=n+je,o=ne(),s=el(o,r);return Dy(o,r)?Dw(o,Ho(),e,s.transform,t,i,s):s.transform(t,i)}function Dy(n,e){return n[Z].data[e].pure}var Vl=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},tm=(()=>{class n{compileModuleSync(t){return new Nl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=Gu(t),o=g0(r.declarations).reduce((s,a)=>{let c=pi(a);return c&&s.push(new Ur(c)),s},[]);return new Vl(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var wy=(()=>{class n{applicationErrorHandler=_(Ot);appRef=_(xi);taskService=_(Yn);ngZone=_(ft);zonelessEnabled=_(qo);tracing=_(Zn,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new qe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ao):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(_(Pp,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let t=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(t);return}this.switchToMicrotaskScheduler(),this.taskService.remove(t)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let t=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})})}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?Gg:Dp;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ao+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.applicationErrorHandler(i)}finally{this.taskService.remove(t),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function My(){return[{provide:zn,useExisting:wy},{provide:ft,useClass:Ro},{provide:qo,useValue:!0}]}function Mw(){return typeof $localize<"u"&&$localize.locale||fs}var ms=new U("",{factory:()=>_(ms,{optional:!0,skipSelf:!0})||Mw()});var rc=class{destroyed=!1;listeners=null;errorHandler=_(Dt,{optional:!0});destroyRef=_(mt);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new V(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(Gn(953,!1));return}if(this.listeners===null)return;let t=q(null);try{for(let i of this.listeners)try{i(e)}catch(r){this.errorHandler?.handleError(r)}}finally{q(t)}}};function S(n,e){return ca(n,e?.equal)}var Iy=Symbol("InputSignalNode#UNSET"),$w=W(P({},da),{transformFn:void 0,applyValueToInputSignal(n,e){Do(n,e)}});function Py(n,e){let t=Object.create($w);t.value=n,t.transformFn=e?.transform;function i(){if(bo(t),t.value===Iy){let r=null;throw new V(-950,r)}return t.value}return i[yt]=t,i}var sc=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>os(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function G(n){return new rc}function Sy(n,e){return Py(n,e)}function Hw(n){return Py(Iy,n)}var j=(Sy.required=Hw,Sy);var nm=new U(""),zw=new U("");function hs(n){return!n.moduleRef}function Gw(n){let e=hs(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ft);return t.run(()=>{hs(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Ot),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:i})}),hs(n)){let o=()=>e.destroy(),s=n.platformInjector.get(nm);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(nm);s.add(o),n.moduleRef.onDestroy(()=>{Ko(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return qw(i,t,()=>{let o=e.get(Yn),s=o.add(),a=e.get(Qf);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(ms,fs);if(uy(c||fs),!e.get(zw,!0))return hs(n)?e.get(xi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(hs(n)){let h=e.get(xi);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return Ww?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>{o.remove(s)})})})}var Ww;function qw(n,e,t){try{let i=t();return Ei(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n(i)),i}}var oc=null;function Yw(n=[],e){return pt.create({name:e,providers:[{provide:Vo,useValue:"platform"},{provide:nm,useValue:new Set([()=>oc=null])},...n]})}function Qw(n=[]){if(oc)return oc;let e=Yw(n);return oc=e,ly(),Zw(e),e}function Zw(n){let e=n.get(Bl,null);Ze(n,()=>{e?.forEach(t=>t())})}var Kw=1e4;var B8=Kw-1e3;var Si=(()=>{class n{static __NG_ELEMENT_ID__=Xw}return n})();function Xw(n){return Jw(Ke(),ne(),(n&16)===16)}function Jw(n,e,t){if(vi(n)&&!t){let i=Ht(n.index,e);return new Ci(i,i)}else if(n.type&175){let i=e[wt];return new Ci(i,e)}return null}function Ty(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:r}=n;ye(pe.BootstrapApplicationStart);try{let o=r?.injector??Qw(i),s=[My(),qg,...t||[]],a=new ns({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return Gw({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ye(pe.BootstrapApplicationEnd)}}function cr(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var Oy=null;function Qt(){return Oy}function im(n){Oy??=n}var gs=class{},Gr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:()=>_(ky),providedIn:"platform"})}return n})();var ky=(()=>{class n extends Gr{_location;_history;_doc=_(Ue);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Qt().getBaseHref(this._doc)}onPopState(t){let i=Qt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=Qt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Ry(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function Ny(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Ii(n){return n&&n[0]!=="?"?`?${n}`:n}var Wr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:()=>_(tM),providedIn:"root"})}return n})(),eM=new U(""),tM=(()=>{class n extends Wr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??_(Ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ry(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+Ii(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+Ii(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+Ii(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(Q(Gr),Q(eM,8))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qr=(()=>{class n{_subject=new ze;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=rM(Ny(Ay(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ii(i))}normalize(t){return n.stripTrailingSlash(iM(this._basePath,Ay(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ii(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ii(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Ii;static joinWithSlash=Ry;static stripTrailingSlash=Ny;static \u0275fac=function(i){return new(i||n)(Q(Wr))};static \u0275prov=F({token:n,factory:()=>nM(),providedIn:"root"})}return n})();function nM(){return new qr(Q(Wr))}function iM(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Ay(n){return n.replace(/\/index.html$/,"")}function rM(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var ht=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(ht||{}),Ee=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Ee||{}),St=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(St||{}),Jn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ly(n){return Nt(n)[He.LocaleId]}function Vy(n,e,t){let i=Nt(n),r=[i[He.DayPeriodsFormat],i[He.DayPeriodsStandalone]],o=Zt(r,e);return Zt(o,t)}function jy(n,e,t){let i=Nt(n),r=[i[He.DaysFormat],i[He.DaysStandalone]],o=Zt(r,e);return Zt(o,t)}function By(n,e,t){let i=Nt(n),r=[i[He.MonthsFormat],i[He.MonthsStandalone]],o=Zt(r,e);return Zt(o,t)}function Uy(n,e){let i=Nt(n)[He.Eras];return Zt(i,e)}function vs(n,e){let t=Nt(n);return Zt(t[He.DateFormat],e)}function ys(n,e){let t=Nt(n);return Zt(t[He.TimeFormat],e)}function _s(n,e){let i=Nt(n)[He.DateTimeFormat];return Zt(i,e)}function Cs(n,e){let t=Nt(n),i=t[He.NumberSymbols][e];if(typeof i>"u"){if(e===Jn.CurrencyDecimal)return t[He.NumberSymbols][Jn.Decimal];if(e===Jn.CurrencyGroup)return t[He.NumberSymbols][Jn.Group]}return i}function $y(n){if(!n[He.ExtraData])throw new V(2303,!1)}function Hy(n){let e=Nt(n);return $y(e),(e[He.ExtraData][2]||[]).map(i=>typeof i=="string"?rm(i):[rm(i[0]),rm(i[1])])}function zy(n,e,t){let i=Nt(n);$y(i);let r=[i[He.ExtraData][0],i[He.ExtraData][1]],o=Zt(r,e)||[];return Zt(o,t)||[]}function Zt(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new V(2304,!1)}function rm(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var oM=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ac={},sM=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Gy(n,e,t,i){let r=hM(n);e=Xn(t,e)||e;let s=[],a;for(;e;)if(a=sM.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let c=r.getTimezoneOffset();i&&(c=qy(i,c),r=mM(r,i));let f="";return s.forEach(h=>{let y=pM(h);f+=y?y(r,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function pc(n,e,t){let i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Xn(n,e){let t=Ly(n);if(ac[t]??={},ac[t][e])return ac[t][e];let i="";switch(e){case"shortDate":i=vs(n,St.Short);break;case"mediumDate":i=vs(n,St.Medium);break;case"longDate":i=vs(n,St.Long);break;case"fullDate":i=vs(n,St.Full);break;case"shortTime":i=ys(n,St.Short);break;case"mediumTime":i=ys(n,St.Medium);break;case"longTime":i=ys(n,St.Long);break;case"fullTime":i=ys(n,St.Full);break;case"short":let r=Xn(n,"shortTime"),o=Xn(n,"shortDate");i=lc(_s(n,St.Short),[r,o]);break;case"medium":let s=Xn(n,"mediumTime"),a=Xn(n,"mediumDate");i=lc(_s(n,St.Medium),[s,a]);break;case"long":let c=Xn(n,"longTime"),f=Xn(n,"longDate");i=lc(_s(n,St.Long),[c,f]);break;case"full":let h=Xn(n,"fullTime"),y=Xn(n,"fullDate");i=lc(_s(n,St.Full),[h,y]);break}return i&&(ac[t][e]=i),i}function lc(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return e!=null&&i in e?e[i]:t})),n}function hn(n,e,t="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return i&&(s=s.slice(s.length-e)),o+s}function aM(n,e){return hn(n,3).substring(0,e)}function We(n,e,t=0,i=!1,r=!1){return function(o,s){let a=lM(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return aM(a,e);let c=Cs(s,Jn.MinusSign);return hn(a,e,c,i,r)}}function lM(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new V(2301,!1)}}function we(n,e,t=ht.Format,i=!1){return function(r,o){return cM(r,o,n,e,t,i)}}function cM(n,e,t,i,r,o){switch(t){case 2:return By(e,r,i)[n.getMonth()];case 1:return jy(e,r,i)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let f=Hy(e),h=zy(e,r,i),y=f.findIndex(M=>{if(Array.isArray(M)){let[w,A]=M,L=s>=w.hours&&a>=w.minutes,O=s<A.hours||s===A.hours&&a<A.minutes;if(w.hours<A.hours){if(L&&O)return!0}else if(L||O)return!0}else if(M.hours===s&&M.minutes===a)return!0;return!1});if(y!==-1)return h[y]}return Vy(e,r,i)[s<12?0:1];case 3:return Uy(e,i)[n.getFullYear()<=0?0:1];default:let c=t;throw new V(2302,!1)}}function cc(n){return function(e,t,i){let r=-1*i,o=Cs(t,Jn.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+hn(s,2,o)+hn(Math.abs(r%60),2,o);case 1:return"GMT"+(r>=0?"+":"")+hn(s,1,o);case 2:return"GMT"+(r>=0?"+":"")+hn(s,2,o)+":"+hn(Math.abs(r%60),2,o);case 3:return i===0?"Z":(r>=0?"+":"")+hn(s,2,o)+":"+hn(Math.abs(r%60),2,o);default:throw new V(2310,!1)}}}var dM=0,uc=4;function uM(n){let e=pc(n,dM,1).getDay();return pc(n,0,1+(e<=uc?uc:uc+7)-e)}function Wy(n){let e=n.getDay(),t=e===0?-3:uc-e;return pc(n.getFullYear(),n.getMonth(),n.getDate()+t)}function om(n,e=!1){return function(t,i){let r;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();r=1+Math.floor((s+o)/7)}else{let o=Wy(t),s=uM(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return hn(r,n,Cs(i,Jn.MinusSign))}}function dc(n,e=!1){return function(t,i){let o=Wy(t).getFullYear();return hn(o,n,Cs(i,Jn.MinusSign),e)}}var sm={};function pM(n){if(sm[n])return sm[n];let e;switch(n){case"G":case"GG":case"GGG":e=we(3,Ee.Abbreviated);break;case"GGGG":e=we(3,Ee.Wide);break;case"GGGGG":e=we(3,Ee.Narrow);break;case"y":e=We(0,1,0,!1,!0);break;case"yy":e=We(0,2,0,!0,!0);break;case"yyy":e=We(0,3,0,!1,!0);break;case"yyyy":e=We(0,4,0,!1,!0);break;case"Y":e=dc(1);break;case"YY":e=dc(2,!0);break;case"YYY":e=dc(3);break;case"YYYY":e=dc(4);break;case"M":case"L":e=We(1,1,1);break;case"MM":case"LL":e=We(1,2,1);break;case"MMM":e=we(2,Ee.Abbreviated);break;case"MMMM":e=we(2,Ee.Wide);break;case"MMMMM":e=we(2,Ee.Narrow);break;case"LLL":e=we(2,Ee.Abbreviated,ht.Standalone);break;case"LLLL":e=we(2,Ee.Wide,ht.Standalone);break;case"LLLLL":e=we(2,Ee.Narrow,ht.Standalone);break;case"w":e=om(1);break;case"ww":e=om(2);break;case"W":e=om(1,!0);break;case"d":e=We(2,1);break;case"dd":e=We(2,2);break;case"c":case"cc":e=We(7,1);break;case"ccc":e=we(1,Ee.Abbreviated,ht.Standalone);break;case"cccc":e=we(1,Ee.Wide,ht.Standalone);break;case"ccccc":e=we(1,Ee.Narrow,ht.Standalone);break;case"cccccc":e=we(1,Ee.Short,ht.Standalone);break;case"E":case"EE":case"EEE":e=we(1,Ee.Abbreviated);break;case"EEEE":e=we(1,Ee.Wide);break;case"EEEEE":e=we(1,Ee.Narrow);break;case"EEEEEE":e=we(1,Ee.Short);break;case"a":case"aa":case"aaa":e=we(0,Ee.Abbreviated);break;case"aaaa":e=we(0,Ee.Wide);break;case"aaaaa":e=we(0,Ee.Narrow);break;case"b":case"bb":case"bbb":e=we(0,Ee.Abbreviated,ht.Standalone,!0);break;case"bbbb":e=we(0,Ee.Wide,ht.Standalone,!0);break;case"bbbbb":e=we(0,Ee.Narrow,ht.Standalone,!0);break;case"B":case"BB":case"BBB":e=we(0,Ee.Abbreviated,ht.Format,!0);break;case"BBBB":e=we(0,Ee.Wide,ht.Format,!0);break;case"BBBBB":e=we(0,Ee.Narrow,ht.Format,!0);break;case"h":e=We(3,1,-12);break;case"hh":e=We(3,2,-12);break;case"H":e=We(3,1);break;case"HH":e=We(3,2);break;case"m":e=We(4,1);break;case"mm":e=We(4,2);break;case"s":e=We(5,1);break;case"ss":e=We(5,2);break;case"S":e=We(6,1);break;case"SS":e=We(6,2);break;case"SSS":e=We(6,3);break;case"Z":case"ZZ":case"ZZZ":e=cc(0);break;case"ZZZZZ":e=cc(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=cc(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=cc(2);break;default:return null}return sm[n]=e,e}function qy(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function fM(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function mM(n,e,t){let r=n.getTimezoneOffset(),o=qy(e,r);return fM(n,-1*(o-r))}function hM(n){if(Fy(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,s=1]=n.split("-").map(a=>+a);return pc(r,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(oM))return gM(i)}let e=new Date(n);if(!Fy(e))throw new V(2311,!1);return e}function gM(n){let e=new Date(0),t=0,i=0,r=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-i,c=Number(n[6]||0),f=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,f),e}function Fy(n){return n instanceof Date&&!isNaN(n.valueOf())}function Yy(n,e){return new V(2100,!1)}var vM=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,bs=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw Yy(n,t);return t.replace(vM,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=Jl({name:"titlecase",type:n,pure:!0})}return n})();var yM="mediumDate",Qy=new U(""),Zy=new U(""),Es=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,o){if(t==null||t===""||t!==t)return null;try{let s=i??this.defaultOptions?.dateFormat??yM,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Gy(t,s,o||this.locale,a)}catch(s){throw Yy(n,s.message)}}static \u0275fac=function(i){return new(i||n)(J(ms,16),J(Qy,24),J(Zy,24))};static \u0275pipe=Jl({name:"date",type:n,pure:!0})}return n})();var fc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=fn({type:n});static \u0275inj=jt({})}return n})();function xs(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var dr=class{};var Ky="browser";var Ds=class{_doc;constructor(e){this._doc=e}manager},mc=(()=>{class n extends Ds{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(Q(Ue))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),vc=new U(""),dm=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(s=>{s.manager=this});let r=t.filter(s=>!(s instanceof mc));this._plugins=r.slice().reverse();let o=t.find(s=>s instanceof mc);o&&this._plugins.push(o)}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new V(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(Q(vc),Q(ft))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),am="ng-app-id";function Xy(n){for(let e of n)e.remove()}function Jy(n,e){let t=e.createElement("style");return t.textContent=n,t}function bM(n,e,t,i){let r=n.head?.querySelectorAll(`style[${am}="${e}"],link[${am}="${e}"]`);if(r)for(let o of r)o.removeAttribute(am),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function cm(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var um=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,bM(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,Jy);i?.forEach(r=>this.addUsage(r,this.external,cm))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(Xy(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Xy(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,Jy(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,cm(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(Q(Ue),Q(jl),Q(Ul,8),Q(ss))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),lm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},pm=/%COMP%/g;var t_="%COMP%",EM=`_nghost-${t_}`,xM=`_ngcontent-${t_}`,DM=!0,wM=new U("",{factory:()=>DM});function MM(n){return xM.replace(pm,n)}function SM(n){return EM.replace(pm,n)}function n_(n,e){return e.map(t=>t.replace(pm,n))}var fm=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,i,r,o,s,a,c=null,f=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=f,this.defaultRenderer=new ws(t,s,a,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(t,i);return r instanceof gc?r.applyToHost(t):r instanceof Ms&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,f=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,y=this.tracingService;switch(i.encapsulation){case pn.Emulated:o=new gc(c,f,i,this.appId,h,s,a,y);break;case pn.ShadowDom:return new hc(c,t,i,s,a,this.nonce,y,f);case pn.ExperimentalIsolatedShadowDom:return new hc(c,t,i,s,a,this.nonce,y);default:o=new Ms(c,f,i,h,s,a,y);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(Q(dm),Q(um),Q(jl),Q(wM),Q(Ue),Q(ft),Q(Ul),Q(Zn,8))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),ws=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.tracingService=r}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(lm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(e_(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(e_(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new V(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=lm[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=lm[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(In.DashCase|In.Important)?e.style.setProperty(t,i,r&In.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&In.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=Qt().getGlobalEventTarget(this.doc,e),!e))throw new V(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function e_(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hc=class extends ws{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,i,r,o,s,a,c){super(e,r,o,a),this.hostEl=t,this.sharedStylesHost=c,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=n_(i.id,f);for(let y of f){let M=document.createElement("style");s&&M.setAttribute("nonce",s),M.textContent=y,this.shadowRoot.appendChild(M)}let h=i.getExternalStyles?.();if(h)for(let y of h){let M=cm(y,r);s&&M.setAttribute("nonce",s),this.shadowRoot.appendChild(M)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Ms=class extends ws{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let f=i.styles;this.styles=c?n_(c,f):f,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&rr.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},gc=class extends Ms{contentAttr;hostAttr;constructor(e,t,i,r,o,s,a,c){let f=r+"-"+i.id;super(e,t,i,o,s,a,c,f),this.contentAttr=MM(f),this.hostAttr=SM(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var yc=class n extends gs{supportsDOMEvents=!0;static makeCurrent(){im(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=IM();return t==null?null:PM(t)}resetBaseElement(){Ss=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return xs(document.cookie,e)}},Ss=null;function IM(){return Ss=Ss||document.head.querySelector("base"),Ss?Ss.getAttribute("href"):null}function PM(n){return new URL(n,document.baseURI).pathname}var TM=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),i_=["alt","control","meta","shift"],OM={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kM={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},r_=(()=>{class n extends Ds{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qt().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),i_.forEach(f=>{let h=i.indexOf(f);h>-1&&(i.splice(h,1),s+=f+".")}),s+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(t,i){let r=OM[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),i_.forEach(s=>{if(s!==r){let a=kM[s];a(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(Q(Ue))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})();async function mm(n,e,t){let i=P({rootComponent:n},NM(e,t));return Ty(i)}function NM(n,e){return{platformRef:e?.platformRef,appProviders:[...VM,...n?.providers??[]],platformProviders:LM}}function AM(){yc.makeCurrent()}function RM(){return new Dt}function FM(){return Ef(document),document}var LM=[{provide:ss,useValue:Ky},{provide:Bl,useValue:AM,multi:!0},{provide:Ue,useFactory:FM}];var VM=[{provide:Vo,useValue:"root"},{provide:Dt,useFactory:RM},{provide:vc,useClass:mc,multi:!0},{provide:vc,useClass:r_,multi:!0},fm,um,dm,{provide:or,useExisting:fm},{provide:dr,useClass:TM},[]];var kn=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=t.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var bc=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}},Ec=class{encodeKey(e){return o_(e)}encodeValue(e){return o_(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function jM(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var BM=/%(\d[a-f0-9])/gi,UM={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function o_(n){return encodeURIComponent(n).replace(BM,(e,t)=>UM[t]??e)}function _c(n){return`${n}`}var ei=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Ec,e.fromString){if(e.fromObject)throw new V(2805,!1);this.map=jM(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(_c):[_c(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(_c(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(_c(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};function $M(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function s_(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function a_(n){return typeof Blob<"u"&&n instanceof Blob}function l_(n){return typeof FormData<"u"&&n instanceof FormData}function HM(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Is="Content-Type",xc="Accept",c_="text/plain",d_="application/json",u_=`${d_}, ${c_}, */*`,Yr=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let o;if($M(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new V(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),o.referrerPolicy&&(this.referrerPolicy=o.referrerPolicy),this.transferCache=o.transferCache}if(this.headers??=new kn,this.context??=new bc,!this.params)this.params=new ei,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||s_(this.body)||a_(this.body)||l_(this.body)||HM(this.body)?this.body:this.body instanceof ei?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||l_(this.body)?null:a_(this.body)?this.body.type||null:s_(this.body)?null:typeof this.body=="string"?c_:this.body instanceof ei?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?d_:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,f=e.redirect||this.redirect,h=e.credentials||this.credentials,y=e.referrer||this.referrer,M=e.integrity||this.integrity,w=e.referrerPolicy||this.referrerPolicy,A=e.transferCache??this.transferCache,L=e.timeout??this.timeout,O=e.body!==void 0?e.body:this.body,R=e.withCredentials??this.withCredentials,ee=e.reportProgress??this.reportProgress,tt=e.headers||this.headers,Pe=e.params||this.params,_n=e.context??this.context;return e.setHeaders!==void 0&&(tt=Object.keys(e.setHeaders).reduce((Pt,Jt)=>Pt.set(Jt,e.setHeaders[Jt]),tt)),e.setParams&&(Pe=Object.keys(e.setParams).reduce((Pt,Jt)=>Pt.set(Jt,e.setParams[Jt]),Pe)),new n(t,i,O,{params:Pe,headers:tt,context:_n,reportProgress:ee,responseType:r,withCredentials:R,transferCache:A,keepalive:o,cache:a,priority:s,timeout:L,mode:c,redirect:f,credentials:h,referrer:y,integrity:M,referrerPolicy:w})}},ti=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(ti||{}),Qr=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,t=200,i="OK"){this.headers=e.headers||new kn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}},Ps=class n extends Qr{constructor(e={}){super(e)}type=ti.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Zr=class n extends Qr{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=ti.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}},On=class extends Qr{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},p_=200,zM=204;var GM=/^\)\]\}',?\n/,f_=new U(""),Cc=(()=>{class n{fetchImpl=_(gm,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t));ngZone=_(ft);destroyRef=_(mt);handle(t){return new le(i=>{let r=new AbortController;this.doRequest(t,r.signal,i).then(vm,s=>i.error(new On({error:s})));let o;return t.timeout&&(o=this.ngZone.runOutsideAngular(()=>setTimeout(()=>{r.signal.aborted||r.abort(new DOMException("signal timed out","TimeoutError"))},t.timeout))),()=>{o!==void 0&&clearTimeout(o),r.abort()}})}async doRequest(t,i,r){let o=this.createRequestInit(t),s;try{let L=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,P({signal:i},o)));WM(L),r.next({type:ti.Sent}),s=await L}catch(L){r.error(new On({error:L,status:L.status??0,statusText:L.statusText,url:t.urlWithParams,headers:L.headers}));return}let a=new kn(s.headers),c=s.statusText,f=s.url||t.urlWithParams,h=s.status,y=null;if(t.reportProgress&&r.next(new Ps({headers:a,status:h,statusText:c,url:f})),s.body){let L=s.headers.get("content-length"),O=[],R=s.body.getReader(),ee=0,tt,Pe,_n=typeof Zone<"u"&&Zone.current,Pt=!1;if(await this.ngZone.runOutsideAngular(async()=>{for(;;){if(this.destroyRef.destroyed){await R.cancel(),Pt=!0;break}let{done:Ri,value:Zd}=await R.read();if(Ri)break;if(O.push(Zd),ee+=Zd.length,t.reportProgress){Pe=t.responseType==="text"?(Pe??"")+(tt??=new TextDecoder).decode(Zd,{stream:!0}):void 0;let mh=()=>r.next({type:ti.DownloadProgress,total:L?+L:void 0,loaded:ee,partialText:Pe});_n?_n.run(mh):mh()}}}),Pt){r.complete();return}let Jt=this.concatChunks(O,ee);try{let Ri=s.headers.get(Is)??"";y=this.parseBody(t,Jt,Ri,h)}catch(Ri){r.error(new On({error:Ri,headers:new kn(s.headers),status:s.status,statusText:s.statusText,url:s.url||t.urlWithParams}));return}}h===0&&(h=y?p_:0);let M=h>=200&&h<300,w=s.redirected,A=s.type;M?(r.next(new Zr({body:y,headers:a,status:h,statusText:c,url:f,redirected:w,responseType:A})),r.complete()):r.error(new On({error:y,headers:a,status:h,statusText:c,url:f,redirected:w,responseType:A}))}parseBody(t,i,r,o){switch(t.responseType){case"json":let s=new TextDecoder().decode(i).replace(GM,"");if(s==="")return null;try{return JSON.parse(s)}catch(a){if(o<200||o>=300)return s;throw a}case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(t){let i={},r;if(r=t.credentials,t.withCredentials&&(r="include"),t.headers.forEach((o,s)=>i[o]=s.join(",")),t.headers.has(xc)||(i[xc]=u_),!t.headers.has(Is)){let o=t.detectContentTypeHeader();o!==null&&(i[Is]=o)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:r,keepalive:t.keepalive,cache:t.cache,priority:t.priority,mode:t.mode,redirect:t.redirect,referrer:t.referrer,integrity:t.integrity,referrerPolicy:t.referrerPolicy}}concatChunks(t,i){let r=new Uint8Array(i),o=0;for(let s of t)r.set(s,o),o+=s.length;return r}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),gm=class{};function vm(){}function WM(n){n.then(vm,vm)}var qM=/^\)\]\}',?\n/;var ym=(()=>{class n{xhrFactory;tracingService=_(Zn,{optional:!0});constructor(t){this.xhrFactory=t}maybePropagateTrace(t){return this.tracingService?.propagate?this.tracingService.propagate(t):t}handle(t){if(t.method==="JSONP")throw new V(-2800,!1);let i=this.xhrFactory;return se(null).pipe(nn(()=>new le(o=>{let s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((O,R)=>s.setRequestHeader(O,R.join(","))),t.headers.has(xc)||s.setRequestHeader(xc,u_),!t.headers.has(Is)){let O=t.detectContentTypeHeader();O!==null&&s.setRequestHeader(Is,O)}if(t.timeout&&(s.timeout=t.timeout),t.responseType){let O=t.responseType.toLowerCase();s.responseType=O!=="json"?O:"text"}let a=t.serializeBody(),c=null,f=()=>{if(c!==null)return c;let O=s.statusText||"OK",R=new kn(s.getAllResponseHeaders()),ee=s.responseURL||t.url;return c=new Ps({headers:R,status:s.status,statusText:O,url:ee}),c},h=this.maybePropagateTrace(()=>{let{headers:O,status:R,statusText:ee,url:tt}=f(),Pe=null;R!==zM&&(Pe=typeof s.response>"u"?s.responseText:s.response),R===0&&(R=Pe?p_:0);let _n=R>=200&&R<300;if(t.responseType==="json"&&typeof Pe=="string"){let Pt=Pe;Pe=Pe.replace(qM,"");try{Pe=Pe!==""?JSON.parse(Pe):null}catch(Jt){Pe=Pt,_n&&(_n=!1,Pe={error:Jt,text:Pe})}}_n?(o.next(new Zr({body:Pe,headers:O,status:R,statusText:ee,url:tt||void 0})),o.complete()):o.error(new On({error:Pe,headers:O,status:R,statusText:ee,url:tt||void 0}))}),y=this.maybePropagateTrace(O=>{let{url:R}=f(),ee=new On({error:O,status:s.status||0,statusText:s.statusText||"Unknown Error",url:R||void 0});o.error(ee)}),M=y;t.timeout&&(M=this.maybePropagateTrace(O=>{let{url:R}=f(),ee=new On({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:R||void 0});o.error(ee)}));let w=!1,A=this.maybePropagateTrace(O=>{w||(o.next(f()),w=!0);let R={type:ti.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(R.total=O.total),t.responseType==="text"&&s.responseText&&(R.partialText=s.responseText),o.next(R)}),L=this.maybePropagateTrace(O=>{let R={type:ti.UploadProgress,loaded:O.loaded};O.lengthComputable&&(R.total=O.total),o.next(R)});return s.addEventListener("load",h),s.addEventListener("error",y),s.addEventListener("timeout",M),s.addEventListener("abort",y),t.reportProgress&&(s.addEventListener("progress",A),a!==null&&s.upload&&s.upload.addEventListener("progress",L)),s.send(a),o.next({type:ti.Sent}),()=>{s.removeEventListener("error",y),s.removeEventListener("abort",y),s.removeEventListener("load",h),s.removeEventListener("timeout",M),t.reportProgress&&(s.removeEventListener("progress",A),a!==null&&s.upload&&s.upload.removeEventListener("progress",L)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||n)(Q(dr))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YM(n,e){return e(n)}function QM(n,e,t){return(i,r)=>Ze(t,()=>e(i,o=>n(o,r)))}var m_=new U("",{factory:()=>[]}),h_=new U(""),g_=new U("",{factory:()=>!0});var wc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=Q(ym),r},providedIn:"root"})}return n})();var Dc=(()=>{class n{backend;injector;chain=null;pendingTasks=_(Yo);contributeToStability=_(g_);constructor(t,i){this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(m_),...this.injector.get(h_,[])]));this.chain=i.reduceRight((r,o)=>QM(r,o,this.injector),YM)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(Io(i))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(Q(wc),Q(Oe))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_m=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=Q(Dc),r},providedIn:"root"})}return n})();function hm(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer,referrerPolicy:n.referrerPolicy}}var Mc=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof Yr)o=t;else{let c;r.headers instanceof kn?c=r.headers:c=new kn(r.headers);let f;r.params&&(r.params instanceof ei?f=r.params:f=new ei({fromObject:r.params})),o=new Yr(t,i,r.body!==void 0?r.body:null,{headers:c,context:r.context,params:f,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials,referrer:r.referrer,referrerPolicy:r.referrerPolicy,integrity:r.integrity,timeout:r.timeout})}let s=se(o).pipe($i(c=>this.handler.handle(c)));if(t instanceof Yr||r.observe==="events")return s;let a=s.pipe(Vt(c=>c instanceof Zr));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ce(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new V(2806,!1);return c.body}));case"blob":return a.pipe(ce(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new V(2807,!1);return c.body}));case"text":return a.pipe(ce(c=>{if(c.body!==null&&typeof c.body!="string")throw new V(2808,!1);return c.body}));default:return a.pipe(ce(c=>c.body))}case"response":return a;default:throw new V(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new ei().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,hm(r,i))}post(t,i,r={}){return this.request("POST",t,hm(r,i))}put(t,i,r={}){return this.request("PUT",t,hm(r,i))}static \u0275fac=function(i){return new(i||n)(Q(_m))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ZM=new U("",{factory:()=>!0}),KM="XSRF-TOKEN",XM=new U("",{factory:()=>KM}),JM="X-XSRF-TOKEN",eS=new U("",{factory:()=>JM}),tS=(()=>{class n{cookieName=_(XM);doc=_(Ue);lastCookieString="";lastToken=null;parseCount=0;getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=xs(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),v_=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=Q(tS),r},providedIn:"root"})}return n})();function nS(n,e){if(!_(ZM)||n.method==="GET"||n.method==="HEAD")return e(n);try{let r=_(Gr).href,{origin:o}=new URL(r),{origin:s}=new URL(n.url,o);if(o!==s)return e(n)}catch{return e(n)}let t=_(v_).getToken(),i=_(eS);return t!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,t)})),e(n)}var Cm=(function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n})(Cm||{});function iS(n,e){return{\u0275kind:n,\u0275providers:e}}function bm(...n){let e=[Mc,Dc,{provide:_m,useExisting:Dc},{provide:wc,useFactory:()=>_(f_,{optional:!0})??_(ym)},{provide:m_,useValue:nS,multi:!0}];for(let t of n)e.push(...t.\u0275providers);return mi(e)}function Em(){return iS(Cm.Fetch,[Cc,{provide:f_,useExisting:Cc},{provide:wc,useExisting:Cc}])}var y_=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(Q(Ue))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var re="primary",Us=Symbol("RouteTitle"),Sm=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function fr(n){return new Sm(n)}function xm(n,e,t){for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(r[0]===":")t[r.substring(1)]=o;else if(r!==o.path)return!1}return!0}function S_(n,e,t){let i=t.path.split("/"),r=i.indexOf("**");if(r===-1){if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let c={},f=n.slice(0,i.length);return xm(i,f,c)?{consumed:f,posParams:c}:null}if(r!==i.lastIndexOf("**"))return null;let o=i.slice(0,r),s=i.slice(r+1);if(o.length+s.length>n.length||t.pathMatch==="full"&&e.hasChildren()&&t.path!=="**")return null;let a={};return!xm(o,n.slice(0,o.length),a)||!xm(s,n.slice(n.length-s.length),a)?null:{consumed:n,posParams:a}}function kc(n){return new Promise((e,t)=>{n.pipe(Un()).subscribe({next:i=>e(i),error:i=>t(i)})})}function oS(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Nn(n[t],e[t]))return!1;return!0}function Nn(n,e){let t=n?Im(n):void 0,i=e?Im(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!I_(n[r],e[r]))return!1;return!0}function Im(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function I_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function sS(n){return n.length>0?n[n.length-1]:null}function gr(n){return ka(n)?n:Ei(n)?Ve(Promise.resolve(n)):se(n)}function P_(n){return ka(n)?kc(n):Promise.resolve(n)}var aS={exact:O_,subset:k_},T_={exact:lS,subset:cS,ignored:()=>!0};function $m(n,e,t){let i=n instanceof Rt?n:e.parseUrl(n);return S(()=>Pm(e.lastSuccessfulNavigation()?.finalUrl??new Rt,i,t))}function Pm(n,e,t){return aS[t.paths](n.root,e.root,t.matrixParams)&&T_[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function lS(n,e){return Nn(n,e)}function O_(n,e,t){if(!ur(n.segments,e.segments)||!Pc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!O_(n.children[i],e.children[i],t))return!1;return!0}function cS(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>I_(n[t],e[t]))}function k_(n,e,t){return N_(n,e,e.segments,t)}function N_(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!ur(r,t)||e.hasChildren()||!Pc(r,t,i))}else if(n.segments.length===t.length){if(!ur(n.segments,t)||!Pc(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!k_(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ur(n.segments,r)||!Pc(n.segments,r,i)||!n.children[re]?!1:N_(n.children[re],e,o,i)}}function Pc(n,e,t){return e.every((i,r)=>T_[t](n[r].parameters,i.parameters))}var Rt=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ge([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=fr(this.queryParams),this._queryParamMap}toString(){return pS.serialize(this)}},ge=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tc(this)}},Pi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=fr(this.parameters),this._parameterMap}toString(){return R_(this)}};function dS(n,e){return ur(n,e)&&n.every((t,i)=>Nn(t.parameters,e[i].parameters))}function ur(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function uS(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===re&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==re&&(t=t.concat(e(r,i)))}),t}var $s=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:()=>new Ti,providedIn:"root"})}return n})(),Ti=class{parse(e){let t=new Om(e);return new Rt(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ts(e.root,!0)}`,i=hS(e.queryParams),r=typeof e.fragment=="string"?`#${fS(e.fragment)}`:"";return`${t}${i}${r}`}},pS=new Ti;function Tc(n){return n.segments.map(e=>R_(e)).join("/")}function Ts(n,e){if(!n.hasChildren())return Tc(n);if(e){let t=n.children[re]?Ts(n.children[re],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==re&&i.push(`${r}:${Ts(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=uS(n,(i,r)=>r===re?[Ts(n.children[re],!1)]:[`${r}:${Ts(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${Tc(n)}/${t[0]}`:`${Tc(n)}/(${t.join("//")})`}}function A_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sc(n){return A_(n).replace(/%3B/gi,";")}function fS(n){return encodeURI(n)}function Tm(n){return A_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Oc(n){return decodeURIComponent(n)}function __(n){return Oc(n.replace(/\+/g,"%20"))}function R_(n){return`${Tm(n.path)}${mS(n.parameters)}`}function mS(n){return Object.entries(n).map(([e,t])=>`;${Tm(e)}=${Tm(t)}`).join("")}function hS(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Sc(t)}=${Sc(r)}`).join("&"):`${Sc(t)}=${Sc(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var gS=/^[^\/()?;#]+/;function Dm(n){let e=n.match(gS);return e?e[0]:""}var vS=/^[^\/()?;=#]+/;function yS(n){let e=n.match(vS);return e?e[0]:""}var _S=/^[^=?&#]+/;function CS(n){let e=n.match(_S);return e?e[0]:""}var bS=/^[^&#]+/;function ES(n){let e=n.match(bS);return e?e[0]:""}var Om=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[re]=new ge(e,t)),i}parseSegment(){let e=Dm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(e),new Pi(Oc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=yS(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Dm(this.remaining);r&&(i=r,this.capture(i))}e[Oc(t)]=Oc(i)}parseQueryParam(e){let t=CS(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=ES(this.remaining);s&&(i=s,this.capture(i))}let r=__(t),o=__(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Dm(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new V(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();t[o??re]=Object.keys(s).length===1&&s[re]?s[re]:new ge([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new V(4011,!1)}};function F_(n){return n.segments.length>0?new ge([],{[re]:n}):n}function L_(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=L_(r);if(i===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new ge(n.segments,e);return xS(t)}function xS(n){if(n.numberOfChildren===1&&n.children[re]){let e=n.children[re];return new ge(n.segments.concat(e.segments),e.children)}return n}function Oi(n){return n instanceof Rt}function V_(n,e,t=null,i=null,r=new Ti){let o=j_(n);return B_(o,e,t,i,r)}function j_(n){let e;function t(o){let s={};for(let c of o.children){let f=t(c);s[c.outlet]=f}let a=new ge(o.url,s);return o===n&&(e=a),a}let i=t(n.root),r=F_(i);return e??r}function B_(n,e,t,i,r){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return wm(o,o,o,t,i,r);let s=DS(e);if(s.toRoot())return wm(o,o,new ge([],{}),t,i,r);let a=wS(s,o,n),c=a.processChildren?ks(a.segmentGroup,a.index,s.commands):$_(a.segmentGroup,a.index,s.commands);return wm(o,a.segmentGroup,c,t,i,r)}function Nc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Rs(n){return typeof n=="object"&&n!=null&&n.outlets}function C_(n,e,t){n||="\u0275";let i=new Rt;return i.queryParams={[n]:e},t.parse(t.serialize(i)).queryParams[n]}function wm(n,e,t,i,r,o){let s={};for(let[f,h]of Object.entries(i??{}))s[f]=Array.isArray(h)?h.map(y=>C_(f,y,o)):C_(f,h,o);let a;n===e?a=t:a=U_(n,e,t);let c=F_(L_(a));return new Rt(c,s,r)}function U_(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=U_(o,e,t)}),new ge(n.segments,i)}var Ac=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Nc(i[0]))throw new V(4003,!1);let r=i.find(Rs);if(r&&r!==sS(i))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function DS(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ac(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,f])=>{a[c]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Ac(t,e,i)}var Xr=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function wS(n,e,t){if(n.isAbsolute)return new Xr(e,!0,0);if(!t)return new Xr(e,!1,NaN);if(t.parent===null)return new Xr(t,!0,0);let i=Nc(n.commands[0])?0:1,r=t.segments.length-1+i;return MS(t,r,n.numberOfDoubleDots)}function MS(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new V(4005,!1);r=i.segments.length}return new Xr(i,!1,r-o)}function SS(n){return Rs(n[0])?n[0].outlets:{[re]:n}}function $_(n,e,t){if(n??=new ge([],{}),n.segments.length===0&&n.hasChildren())return ks(n,e,t);let i=IS(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new ge(n.segments.slice(0,i.pathIndex),{});return o.children[re]=new ge(n.segments.slice(i.pathIndex),n.children),ks(o,0,r)}else return i.match&&r.length===0?new ge(n.segments,{}):i.match&&!n.hasChildren()?km(n,e,t):i.match?ks(n,0,r):km(n,e,t)}function ks(n,e,t){if(t.length===0)return new ge(n.segments,{});{let i=SS(t),r={};if(Object.keys(i).some(o=>o!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let o=ks(n.children[re],e,t);return new ge(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=$_(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new ge(n.segments,r)}}function IS(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],a=t[i];if(Rs(a))break;let c=`${a}`,f=i<t.length-1?t[i+1]:null;if(r>0&&c===void 0)break;if(c&&f&&typeof f=="object"&&f.outlets===void 0){if(!E_(c,f,s))return o;i+=2}else{if(!E_(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function km(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(Rs(o)){let c=PS(o.outlets);return new ge(i,c)}if(r===0&&Nc(t[0])){let c=n.segments[e];i.push(new Pi(c.path,b_(t[0]))),r++;continue}let s=Rs(o)?o.outlets[re]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&Nc(a)?(i.push(new Pi(s,b_(a))),r+=2):(i.push(new Pi(s,{})),r++)}return new ge(i,{})}function PS(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=km(new ge([],{}),0,i))}),e}function b_(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function E_(n,e,t){return n==t.path&&Nn(e,t.parameters)}var Ns="imperative",Je=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Je||{}),Ft=class{id;url;constructor(e,t){this.id=e,this.url=t}},mr=class extends Ft{type=Je.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},vn=class extends Ft{urlAfterRedirects;type=Je.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},gt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(gt||{}),Fs=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Fs||{}),Kt=class extends Ft{reason;code;type=Je.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function H_(n){return n instanceof Kt&&(n.code===gt.Redirect||n.code===gt.SupersededByNewNavigation)}var ii=class extends Ft{reason;code;type=Je.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},hr=class extends Ft{error;target;type=Je.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},eo=class extends Ft{urlAfterRedirects;state;type=Je.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rc=class extends Ft{urlAfterRedirects;state;type=Je.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fc=class extends Ft{urlAfterRedirects;state;shouldActivate;type=Je.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Lc=class extends Ft{urlAfterRedirects;state;type=Je.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vc=class extends Ft{urlAfterRedirects;state;type=Je.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jc=class{route;type=Je.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Bc=class{route;type=Je.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Uc=class{snapshot;type=Je.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$c=class{snapshot;type=Je.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hc=class{snapshot;type=Je.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zc=class{snapshot;type=Je.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var to=class{},no=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function TS(n){return!(n instanceof to)&&!(n instanceof no)}var Gc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new oo(this.rootInjector)}},oo=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Gc(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(Q(Oe))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wc=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Nm(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Nm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Am(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Am(e,this._root).map(t=>t.value)}};function Nm(n,e){if(n===e.value)return e;for(let t of e.children){let i=Nm(n,t);if(i)return i}return null}function Am(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Am(n,t);if(i.length)return i.unshift(e),i}return[]}var At=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Kr(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ls=class extends Wc{snapshot;constructor(e,t){super(e),this.snapshot=t,Hm(this,e)}toString(){return this.snapshot.toString()}};function z_(n,e){let t=OS(n,e),i=new nt([new Pi("",{})]),r=new nt({}),o=new nt({}),s=new nt({}),a=new nt(""),c=new lt(i,r,s,a,o,re,n,t.root);return c.snapshot=t.root,new Ls(new At(c,[]),t)}function OS(n,e){let t={},i={},r={},s=new pr([],t,r,"",i,re,n,null,{},e);return new Vs("",new At(s,[]))}var lt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ce(f=>f[Us]))??se(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ce(e=>fr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ce(e=>fr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function qc(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:P(P({},e.params),n.params),data:P(P({},e.data),n.data),resolve:P(P(P(P({},n.data),e.data),r?.data),n._resolvedData)}:i={params:P({},n.params),data:P({},n.data),resolve:P(P({},n.data),n._resolvedData??{})},r&&W_(r)&&(i.resolve[Us]=r.title),i}var pr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[Us]}constructor(e,t,i,r,o,s,a,c,f,h){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=f,this._environmentInjector=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=fr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=fr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Vs=class extends Wc{url;constructor(e,t){super(t),this.url=e,Hm(this,t)}toString(){return G_(this._root)}};function Hm(n,e){e.value._routerState=n,e.children.forEach(t=>Hm(n,t))}function G_(n){let e=n.children.length>0?` { ${n.children.map(G_).join(", ")} } `:"";return`${n.value}${e}`}function Mm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Nn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Nn(e.params,t.params)||n.paramsSubject.next(t.params),oS(e.url,t.url)||n.urlSubject.next(t.url),Nn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Rm(n,e){let t=Nn(n.params,e.params)&&dS(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||Rm(n.parent,e.parent))}function W_(n){return typeof n.title=="string"||n.title===null}var q_=new U(""),Hs=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=re;activateEvents=new Te;deactivateEvents=new Te;attachEvents=new Te;detachEvents=new Te;routerOutletData=j();parentContexts=_(oo);location=_(lr);changeDetector=_(Si);inputBinder=_(Kc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new V(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Fm(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=xe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[zt]})}return n})(),Fm=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===lt?this.route:e===oo?this.childContexts:e===q_?this.outletData:this.parent.get(e,t)}},Kc=new U("");var zm=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=$({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&de(0,"router-outlet")},dependencies:[Hs],encapsulation:2})}return n})();function Gm(n){let e=n.children&&n.children.map(Gm),t=e?W(P({},n),{children:e}):P({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==re&&(t.component=zm),t}function kS(n,e,t){let i=js(n,e._root,t?t._root:void 0);return new Ls(i,e)}function js(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=NS(n,e,t);return new At(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>js(n,a)),s}}let i=AS(e.value),r=e.children.map(o=>js(n,o));return new At(i,r)}}function NS(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return js(n,i,r);return js(n,i)})}function AS(n){return new lt(new nt(n.url),new nt(n.params),new nt(n.queryParams),new nt(n.fragment),new nt(n.data),n.outlet,n.component,n)}var io=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Y_="ngNavigationCancelingError";function Yc(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Oi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Q_(!1,gt.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function Q_(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Y_]=!0,t.cancellationCode=e,t}function RS(n){return Z_(n)&&Oi(n.url)}function Z_(n){return!!n&&n[Y_]}var Lm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Mm(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Kr(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Kr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Kr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Kr(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new zc(o.value.snapshot))}),e.children.length&&this.forwardEvent(new $c(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(Mm(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Mm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},Qc=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Jr=class{component;route;constructor(e,t){this.component=e,this.route=t}};function FS(n,e,t){let i=n._root,r=e?e._root:null;return Os(i,r,t,[i.value])}function LS(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function so(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!ju(n)?n:e.get(n):i}function Os(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Kr(e);return n.children.forEach(s=>{VS(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>As(a,t.getContext(s),r)),r}function VS(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=jS(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Qc(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Os(n,e,a?a.children:null,i,r):Os(n,e,t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Jr(a.outlet.component,s))}else s&&As(e,a,r),r.canActivateChecks.push(new Qc(i)),o.component?Os(n,null,a?a.children:null,i,r):Os(n,null,t,i,r);return r}function jS(n,e,t){if(typeof t=="function")return Ze(e._environmentInjector,()=>t(n,e));switch(t){case"pathParamsChange":return!ur(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ur(n.url,e.url)||!Nn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rm(n,e)||!Nn(n.queryParams,e.queryParams);default:return!Rm(n,e)}}function As(n,e,t){let i=Kr(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?As(s,e.children.getContext(o),t):As(s,null,t):As(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Jr(e.outlet.component,r)):t.canDeactivateChecks.push(new Jr(null,r)):t.canDeactivateChecks.push(new Jr(null,r))}function zs(n){return typeof n=="function"}function BS(n){return typeof n=="boolean"}function US(n){return n&&zs(n.canLoad)}function $S(n){return n&&zs(n.canActivate)}function HS(n){return n&&zs(n.canActivateChild)}function zS(n){return n&&zs(n.canDeactivate)}function GS(n){return n&&zs(n.canMatch)}function K_(n){return n instanceof jn||n?.name==="EmptyError"}var Ic=Symbol("INITIAL_VALUE");function ro(){return nn(n=>Eu(n.map(e=>e.pipe(Bn(1),Du(Ic)))).pipe(ce(e=>{for(let t of e)if(t!==!0){if(t===Ic)return Ic;if(t===!1||WS(t))return t}return!0}),Vt(e=>e!==Ic),Bn(1)))}function WS(n){return Oi(n)||n instanceof io}function X_(n){return n.aborted?se(void 0).pipe(Bn(1)):new le(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function J_(n){return Po(X_(n))}function qS(n){return ut(e=>{let{targetSnapshot:t,currentSnapshot:i,guards:{canActivateChecks:r,canDeactivateChecks:o}}=e;return o.length===0&&r.length===0?se(W(P({},e),{guardsResult:!0})):YS(o,t,i).pipe(ut(s=>s&&BS(s)?QS(t,r,n):se(s)),ce(s=>W(P({},e),{guardsResult:s})))})}function YS(n,e,t){return Ve(n).pipe(ut(i=>eI(i.component,i.route,t,e)),Un(i=>i!==!0,!0))}function QS(n,e,t){return Ve(e).pipe($i(i=>Sr(KS(i.route.parent,t),ZS(i.route,t),JS(n,i.path),XS(n,i.route))),Un(i=>i!==!0,!0))}function ZS(n,e){return n!==null&&e&&e(new Hc(n)),se(!0)}function KS(n,e){return n!==null&&e&&e(new Uc(n)),se(!0)}function XS(n,e){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return se(!0);let i=t.map(r=>So(()=>{let o=e._environmentInjector,s=so(r,o),a=$S(s)?s.canActivate(e,n):Ze(o,()=>s(e,n));return gr(a).pipe(Un())}));return se(i).pipe(ro())}function JS(n,e){let t=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(o=>LS(o)).filter(o=>o!==null).map(o=>So(()=>{let s=o.guards.map(a=>{let c=o.node._environmentInjector,f=so(a,c),h=HS(f)?f.canActivateChild(t,n):Ze(c,()=>f(t,n));return gr(h).pipe(Un())});return se(s).pipe(ro())}));return se(r).pipe(ro())}function eI(n,e,t,i){let r=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!r||r.length===0)return se(!0);let o=r.map(s=>{let a=e._environmentInjector,c=so(s,a),f=zS(c)?c.canDeactivate(n,e,t,i):Ze(a,()=>c(n,e,t,i));return gr(f).pipe(Un())});return se(o).pipe(ro())}function tI(n,e,t,i,r){let o=e.canLoad;if(o===void 0||o.length===0)return se(!0);let s=o.map(a=>{let c=so(a,n),f=US(c)?c.canLoad(e,t):Ze(n,()=>c(e,t)),h=gr(f);return r?h.pipe(J_(r)):h});return se(s).pipe(ro(),eC(i))}function eC(n){return vu(Ge(e=>{if(typeof e!="boolean")throw Yc(n,e)}),ce(e=>e===!0))}function nI(n,e,t,i,r){let o=e.canMatch;if(!o||o.length===0)return se(!0);let s=o.map(a=>{let c=so(a,n),f=GS(c)?c.canMatch(e,t):Ze(n,()=>c(e,t));return gr(f).pipe(J_(r))});return se(s).pipe(ro(),eC(i))}var ni=class n extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,n.prototype)}},Bs=class n extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,n.prototype)}};function iI(n){throw new V(4e3,!1)}function rI(n){throw Q_(!1,gt.GuardRejected)}var Vm=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return i;if(r.numberOfChildren>1||!r.children[re])throw iI(`${e.redirectTo}`);r=r.children[re]}}async applyRedirectCommands(e,t,i,r,o){let s=await oI(t,r,o);if(s instanceof Rt)throw new Bs(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,i);if(s[0]==="/")throw new Bs(a);return a}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new Rt(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,i,r)}),new ge(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new V(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}};function oI(n,e,t){if(typeof n=="string")return Promise.resolve(n);let i=n,{queryParams:r,fragment:o,routeConfig:s,url:a,outlet:c,params:f,data:h,title:y,paramMap:M,queryParamMap:w}=e;return kc(gr(Ze(t,()=>i({params:f,data:h,queryParams:r,fragment:o,routeConfig:s,url:a,outlet:c,title:y,paramMap:M,queryParamMap:w}))))}function sI(n,e){return n.providers&&!n._injector&&(n._injector=ps(n.providers,e,`Route: ${n.path}`)),n._injector??e}function gn(n){return n.outlet||re}function aI(n,e){let t=n.filter(i=>gn(i)===e);return t.push(...n.filter(i=>gn(i)!==e)),t}var jm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lI(n,e,t,i,r,o){let s=tC(n,e,t);return s.matched?(i=sI(e,i),nI(i,e,t,r,o).pipe(ce(a=>a===!0?s:P({},jm)))):se(s)}function tC(n,e,t){if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?P({},jm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||S_)(t,n,e);if(!r)return P({},jm);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?P(P({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function x_(n,e,t,i){return t.length>0&&uI(n,t,i)?{segmentGroup:new ge(e,dI(i,new ge(t,n.children))),slicedSegments:[]}:t.length===0&&pI(n,t,i)?{segmentGroup:new ge(n.segments,cI(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new ge(n.segments,n.children),slicedSegments:t}}function cI(n,e,t,i){let r={};for(let o of t)if(Xc(n,e,o)&&!i[gn(o)]){let s=new ge([],{});r[gn(o)]=s}return P(P({},i),r)}function dI(n,e){let t={};t[re]=e;for(let i of n)if(i.path===""&&gn(i)!==re){let r=new ge([],{});t[gn(i)]=r}return t}function uI(n,e,t){return t.some(i=>Xc(n,e,i)&&gn(i)!==re)}function pI(n,e,t){return t.some(i=>Xc(n,e,i))}function Xc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function fI(n,e,t){return e.length===0&&!n.children[t]}var Bm=class{};async function mI(n,e,t,i,r,o,s="emptyOnly",a){return new Um(n,e,t,i,r,s,o,a).recognize()}var hI=31,Um=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,s,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new Vm(this.urlSerializer,this.urlTree)}noMatchError(e){return new V(4002,`'${e.segmentGroup}'`)}async recognize(){let e=x_(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:i}=await this.match(e),r=new At(i,t),o=new Vs("",r),s=V_(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let t=new pr([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,e,re,t),rootSnapshot:t}}catch(i){if(i instanceof Bs)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof ni?this.noMatchError(i):i}}async processSegmentGroup(e,t,i,r,o){if(i.segments.length===0&&i.hasChildren())return this.processChildren(e,t,i,o);let s=await this.processSegment(e,t,i,i.segments,r,!0,o);return s instanceof At?[s]:[]}async processChildren(e,t,i,r){let o=[];for(let c of Object.keys(i.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let f=i.children[c],h=aI(t,c),y=await this.processSegmentGroup(e,h,f,c,r);s.push(...y)}let a=nC(s);return gI(a),a}async processSegment(e,t,i,r,o,s,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,o,s,a)}catch(f){if(f instanceof ni||K_(f))continue;throw f}if(fI(i,r,o))return new Bm;throw new ni(i)}async processSegmentAgainstRoute(e,t,i,r,o,s,a,c){if(gn(i)!==s&&(s===re||!Xc(r,o,i)))throw new ni(r);if(i.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,r,i,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,c);throw new ni(r)}async expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,a){let{matched:c,parameters:f,consumedSegments:h,positionalParamSegments:y,remainingSegments:M}=tC(t,r,o);if(!c)throw new ni(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hI&&(this.allowRedirects=!1));let w=new pr(o,f,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,D_(r),gn(r),r.component??r._loadedComponent??null,r,w_(r),e),A=qc(w,a,this.paramsInheritanceStrategy);if(w.params=Object.freeze(A.params),w.data=Object.freeze(A.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let L=await this.applyRedirects.applyRedirectCommands(h,r.redirectTo,y,w,e),O=await this.applyRedirects.lineralizeSegments(r,L);return this.processSegment(e,i,t,O.concat(M),s,!1,a)}async matchSegmentAgainstRoute(e,t,i,r,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await kc(lI(t,i,r,e,this.urlSerializer,this.abortSignal));if(i.path==="**"&&(t.children={}),!a?.matched)throw new ni(t);e=i._injector??e;let{routes:c}=await this.getChildConfig(e,i,r),f=i._loadedInjector??e,{parameters:h,consumedSegments:y,remainingSegments:M}=a,w=new pr(y,h,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,D_(i),gn(i),i.component??i._loadedComponent??null,i,w_(i),e),A=qc(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(A.params),w.data=Object.freeze(A.data);let{segmentGroup:L,slicedSegments:O}=x_(t,y,M,c);if(O.length===0&&L.hasChildren()){let tt=await this.processChildren(f,c,L,w);return new At(w,tt)}if(c.length===0&&O.length===0)return new At(w,[]);let R=gn(i)===o,ee=await this.processSegment(f,c,L,O,R?re:o,!0,w);return new At(w,ee instanceof At?[ee]:[])}async getChildConfig(e,t,i){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0){let o=t._loadedNgModuleFactory;return o&&!t._loadedInjector&&(t._loadedInjector=o.create(e).injector),{routes:t._loadedRoutes,injector:t._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await kc(tI(e,t,i,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=o.routes,t._loadedInjector=o.injector,t._loadedNgModuleFactory=o.factory,o}throw rI(t)}return{routes:[],injector:e}}};function gI(n){n.sort((e,t)=>e.value.outlet===re?-1:t.value.outlet===re?1:e.value.outlet.localeCompare(t.value.outlet))}function vI(n){let e=n.value.routeConfig;return e&&e.path===""}function nC(n){let e=[],t=new Set;for(let i of n){if(!vI(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=nC(i.children);e.push(new At(i.value,r))}return e.filter(i=>!t.has(i))}function D_(n){return n.data||{}}function w_(n){return n.resolve||{}}function yI(n,e,t,i,r,o,s){return ut(async a=>{let{state:c,tree:f}=await mI(n,e,t,i,a.extractedUrl,r,o,s);return W(P({},a),{targetSnapshot:c,urlAfterRedirects:f})})}function _I(n){return ut(e=>{let{targetSnapshot:t,guards:{canActivateChecks:i}}=e;if(!i.length)return se(e);let r=new Set(i.map(a=>a.route)),o=new Set;for(let a of r)if(!o.has(a))for(let c of iC(a))o.add(c);let s=0;return Ve(o).pipe($i(a=>r.has(a)?CI(a,t,n):(a.data=qc(a,a.parent,n).resolve,se(void 0))),Ge(()=>s++),Fa(1),ut(a=>s===o.size?se(e):it))})}function iC(n){let e=n.children.map(t=>iC(t)).flat();return[n,...e]}function CI(n,e,t){let i=n.routeConfig,r=n._resolve;return i?.title!==void 0&&!W_(i)&&(r[Us]=i.title),So(()=>(n.data=qc(n,n.parent,t).resolve,bI(r,n,e).pipe(ce(o=>(n._resolvedData=o,n.data=P(P({},n.data),o),null)))))}function bI(n,e,t){let i=Im(n);if(i.length===0)return se({});let r={};return Ve(i).pipe(ut(o=>EI(n[o],e,t).pipe(Un(),Ge(s=>{if(s instanceof io)throw Yc(new Ti,s);r[o]=s}))),Fa(1),ce(()=>r),Qe(o=>K_(o)?it:Vn(o)))}function EI(n,e,t){let i=e._environmentInjector,r=so(n,i),o=r.resolve?r.resolve(e,t):Ze(i,()=>r(e,t));return gr(o)}function M_(n){return nn(e=>{let t=n(e);return t?Ve(t).pipe(ce(()=>e)):se(e)})}var Wm=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===re);return i}getResolvedTitleForRoute(t){return t.data[Us]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:()=>_(rC),providedIn:"root"})}return n})(),rC=(()=>{class n extends Wm{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(Q(y_))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ao=new U("",{factory:()=>({})}),Gs=new U(""),oC=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=_(tm);async loadComponent(t,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Promise.resolve(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=(async()=>{try{let o=await P_(Ze(t,()=>i.loadComponent())),s=await lC(aC(o));return this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s,s}finally{this.componentLoaders.delete(i)}})();return this.componentLoaders.set(i,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Promise.resolve({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let r=(async()=>{try{let o=await sC(i,this.compiler,t,this.onLoadEndListener);return i._loadedRoutes=o.routes,i._loadedInjector=o.injector,i._loadedNgModuleFactory=o.factory,o}finally{this.childrenLoaders.delete(i)}})();return this.childrenLoaders.set(i,r),r}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function sC(n,e,t,i){let r=await P_(Ze(t,()=>n.loadChildren())),o=await lC(aC(r)),s;o instanceof Xl||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),i&&i(n);let a,c,f=!1,h;return Array.isArray(s)?(c=s,f=!0):(a=s.create(t).injector,h=s,c=a.get(Gs,[],{optional:!0,self:!0}).flat()),{routes:c.map(Gm),injector:a,factory:h}}function xI(n){return n&&typeof n=="object"&&"default"in n}function aC(n){return xI(n)?n.default:n}async function lC(n){return n}var Jc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:()=>_(DI),providedIn:"root"})}return n})(),DI=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cC=new U("");var wI=()=>{},dC=new U(""),uC=(()=>{class n{currentNavigation=E(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=E(null);events=new ze;transitionAbortWithErrorSubject=new ze;configLoader=_(oC);environmentInjector=_(Oe);destroyRef=_(mt);urlSerializer=_($s);rootContexts=_(oo);location=_(qr);inputBindingEnabled=_(Kc,{optional:!0})!==null;titleStrategy=_(Wm);options=_(ao,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=_(Jc);createViewTransition=_(cC,{optional:!0});navigationErrorHandler=_(dC,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>se(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new jc(r)),i=r=>this.events.next(new Bc(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;Re(()=>{this.transitions?.next(W(P({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))})}setupNavigations(t){return this.transitions=new nt(null),this.transitions.pipe(Vt(i=>i!==null),nn(i=>{let r=!1,o=new AbortController,s=()=>!r&&this.currentTransition?.id===i.id;return se(i).pipe(nn(a=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",gt.SupersededByNewNavigation),it;this.currentTransition=i;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:c?W(P({},c),{previousNavigation:null}):null,abort:()=>o.abort()});let f=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=a.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!f&&h!=="reload")return this.events.next(new ii(a.id,this.urlSerializer.serialize(a.rawUrl),"",Fs.IgnoredSameUrlNavigation)),a.resolve(!1),it;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return se(a).pipe(nn(y=>(this.events.next(new mr(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),y.id!==this.navigationId?it:Promise.resolve(y))),yI(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Ge(y=>{i.targetSnapshot=y.targetSnapshot,i.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation.update(w=>(w.finalUrl=y.urlAfterRedirects,w));let M=new eo(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(M)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:y,extractedUrl:M,source:w,restoredState:A,extras:L}=a,O=new mr(y,this.urlSerializer.serialize(M),w,A);this.events.next(O);let R=z_(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=i=W(P({},a),{targetSnapshot:R,urlAfterRedirects:M,extras:W(P({},L),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(ee=>(ee.finalUrl=M,ee)),se(i)}else return this.events.next(new ii(a.id,this.urlSerializer.serialize(a.extractedUrl),"",Fs.IgnoredByUrlHandlingStrategy)),a.resolve(!1),it}),ce(a=>{let c=new Rc(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(c),this.currentTransition=i=W(P({},a),{guards:FS(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),i}),qS(a=>this.events.next(a)),nn(a=>{if(i.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw Yc(this.urlSerializer,a.guardsResult);let c=new Fc(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(c),!s())return it;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",gt.GuardRejected),it;if(a.guards.canActivateChecks.length===0)return se(a);let f=new Lc(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(f),!s())return it;let h=!1;return se(a).pipe(_I(this.paramsInheritanceStrategy),Ge({next:()=>{h=!0;let y=new Vc(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(y)},complete:()=>{h||this.cancelNavigationTransition(a,"",gt.NoDataFromResolver)}}))}),M_(a=>{let c=h=>{let y=[];if(h.routeConfig?._loadedComponent)h.component=h.routeConfig?._loadedComponent;else if(h.routeConfig?.loadComponent){let M=h._environmentInjector;y.push(this.configLoader.loadComponent(M,h.routeConfig).then(w=>{h.component=w}))}for(let M of h.children)y.push(...c(M));return y},f=c(a.targetSnapshot.root);return f.length===0?se(a):Ve(Promise.all(f).then(()=>a))}),M_(()=>this.afterPreactivation()),nn(()=>{let{currentSnapshot:a,targetSnapshot:c}=i,f=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return f?Ve(f).pipe(ce(()=>i)):se(i)}),Bn(1),ce(a=>{let c=kS(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=i=a=W(P({},a),{targetRouterState:c}),this.currentNavigation.update(f=>(f.targetRouterState=c,f)),this.events.next(new to),s()&&(new Lm(t.routeReuseStrategy,i.targetRouterState,i.currentRouterState,f=>this.events.next(f),this.inputBindingEnabled).activate(this.rootContexts),s()&&(r=!0,this.currentNavigation.update(f=>(f.abort=wI,f)),this.lastSuccessfulNavigation.set(Re(this.currentNavigation)),this.events.next(new vn(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),Po(X_(o.signal).pipe(Vt(()=>!r&&!i.targetRouterState),Ge(()=>{this.cancelNavigationTransition(i,o.signal.reason+"",gt.Aborted)}))),Ge({complete:()=>{r=!0}}),Po(this.transitionAbortWithErrorSubject.pipe(Ge(a=>{throw a}))),Io(()=>{o.abort(),r||this.cancelNavigationTransition(i,"",gt.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Qe(a=>{if(r=!0,this.destroyed)return i.resolve(!1),it;if(Z_(a))this.events.next(new Kt(i.id,this.urlSerializer.serialize(i.extractedUrl),a.message,a.cancellationCode)),RS(a)?this.events.next(new no(a.url,a.navigationBehaviorOptions)):i.resolve(!1);else{let c=new hr(i.id,this.urlSerializer.serialize(i.extractedUrl),a,i.targetSnapshot??void 0);try{let f=Ze(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(f instanceof io){let{message:h,cancellationCode:y}=Yc(this.urlSerializer,f);this.events.next(new Kt(i.id,this.urlSerializer.serialize(i.extractedUrl),h,y)),this.events.next(new no(f.redirectTo,f.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(f){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(f)}}return it}))}))}cancelNavigationTransition(t,i,r){let o=new Kt(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=Re(this.currentNavigation),r=i?.targetBrowserUrl??i?.extractedUrl;return t.toString()!==r?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function MI(n){return n!==Ns}var pC=new U("");var fC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:()=>_(SI),providedIn:"root"})}return n})(),Zc=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}shouldDestroyInjector(e){return!0}},SI=(()=>{class n extends Zc{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Gt(n)))(r||n)}})();static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qm=(()=>{class n{urlSerializer=_($s);options=_(ao,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=_(qr);urlHandlingStrategy=_(Jc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Rt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,s=r??o;return s instanceof Rt?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=z_(null,_(Oe));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:()=>_(II),providedIn:"root"})}return n})(),II=(()=>{class n extends qm{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof mr?this.updateStateMemento():t instanceof ii?this.commitTransition(i):t instanceof eo?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof to?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Kt&&!H_(t)?this.restoreHistory(i):t instanceof hr?this.restoreHistory(i,!0):t instanceof vn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=P(P({},s),this.generateNgRouterState(r,a));this.location.replaceState(t,"",c)}else{let a=P(P({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Gt(n)))(r||n)}})();static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ym(n,e){n.events.pipe(Vt(t=>t instanceof vn||t instanceof Kt||t instanceof hr||t instanceof ii),ce(t=>t instanceof vn||t instanceof ii?0:(t instanceof Kt?t.code===gt.Redirect||t.code===gt.SupersededByNewNavigation:!1)?2:1),Vt(t=>t!==2),Bn(1)).subscribe(()=>{e()})}var Qm={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Zm={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Me=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=_(Gf);stateManager=_(qm);options=_(ao,{optional:!0})||{};pendingTasks=_(Yn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=_(uC);urlSerializer=_($s);location=_(qr);urlHandlingStrategy=_(Jc);injector=_(Oe);_events=new ze;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=_(fC);injectorCleanup=_(pC,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=_(Gs,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!_(Kc,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new qe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=Re(this.navigationTransitions.currentNavigation);if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Kt&&i.code!==gt.Redirect&&i.code!==gt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof vn)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(i instanceof no){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=P({scroll:r.extras.scroll,browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||MI(r.source)},s);this.scheduleNavigation(a,Ns,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}TS(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ns,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let c=P({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o).catch(c=>{this.disposed||this.injector.get(Ot)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Re(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Gm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=i,f=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=P(P({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let y;try{let M=r?r.snapshot:this.routerState.snapshot.root;y=j_(M)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),y=this.currentUrlTree.root}return B_(y,t,h,f??null,this.urlSerializer)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Oi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Ns,null,i)}navigate(t,i={skipLocationChange:!1}){return PI(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Gn(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=P({},Qm):i===!1?r=P({},Zm):r=i,Oi(t))return Pm(this.currentUrlTree,t,r);let o=this.parseUrl(t);return Pm(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,f;s?(a=s.resolve,c=s.reject,f=s.promise):f=new Promise((y,M)=>{a=y,c=M});let h=this.pendingTasks.add();return Ym(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(y=>Promise.reject(y))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function PI(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new V(4008,!1)}var Ce=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=E(null);get href(){return Re(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ze;applicationErrorHandler=_(Ot);options=_(ao,{optional:!0});constructor(t,i,r,o,s,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(_(new sc("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){this.subscription===void 0&&(this.subscription=this.router.events.subscribe(t=>{t instanceof vn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Oi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(f=>{this.applicationErrorHandler(f)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Oi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(J(Me),J(lt),os("tabindex"),J(Pn),J(Mt),J(Wr))};static \u0275dir=xe({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&I("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&te("href",r.reactiveHref(),wf)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",cr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",cr],replaceUrl:[2,"replaceUrl","replaceUrl",cr],routerLink:"routerLink"},features:[zt]})}return n})(),Km=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Te;link=_(Ce,{optional:!0});constructor(t,i,r,o){this.router=t,this.element=i,this.renderer=r,this.cdr=o,this.routerEventsSubscription=t.events.subscribe(s=>{s instanceof vn&&this.update()})}ngAfterContentInit(){se(this.links.changes,se(null)).pipe(Mr()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Ve(t).pipe(Mr()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){let i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let i=OI(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact??!1?P({},Qm):P({},Zm);return r=>{let o=r.urlTree;return o?Re($m(o,t,i)):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(i){return new(i||n)(J(Me),J(Mt),J(Pn),J(Si))};static \u0275dir=xe({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,o){if(i&1&&nc(o,Ce,5),i&2){let s;Kf(s=Xf())&&(r.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[zt]})}return n})();function OI(n){return!!n.paths}var kI=new U("");function Xm(n,...e){return mi([{provide:Gs,multi:!0,useValue:n},[],{provide:lt,useFactory:NI},{provide:ec,multi:!0,useFactory:AI},e.map(t=>t.\u0275providers)])}function NI(){return _(Me).routerState.root}function AI(){let n=_(pt);return e=>{let t=n.get(xi);if(e!==t.components[0])return;let i=n.get(Me),r=n.get(RI);n.get(FI)===1&&i.initialNavigation(),n.get(LI,null,{optional:!0})?.setUpPreloading(),n.get(kI,null,{optional:!0})?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var RI=new U("",{factory:()=>new ze}),FI=new U("",{factory:()=>1});var LI=new U("");var xt={production:!0,apiUrl:"https://stcindia.org/panshul/server/api.php",apiTimeout:3e4,features:{enableAuth:!0,enableAnalytics:!0,enableDebugLogs:!1},version:"1.0.0"};var vr={API_URL:xt.apiUrl,TIMEOUT:xt.apiTimeout,RETRY:{maxAttempts:3,delayMs:1e3},UPLOAD:{maxFileSize:50*1024*1024,allowedTypes:["image/*","video/*","audio/*","application/pdf"]},FEATURES:xt.features};var ed=class n{currentLevel=xt.production?2:0;enabled=!xt.production||xt.features.enableDebugLogs;setLogLevel(e){this.currentLevel=e}setEnabled(e){this.enabled=e}debug(e,t){if(this.shouldLog(0)){let i="\u{1F50D} [DEBUG]";t?console.log(i,e,t):console.log(i,e)}}info(e,t){if(this.shouldLog(1)){let i="\u2139\uFE0F [INFO]";t?console.log(i,e,t):console.log(i,e)}}warn(e,t){if(this.shouldLog(2)){let i="\u26A0\uFE0F [WARN]";t?console.warn(i,e,t):console.warn(i,e)}}error(e,t){if(this.shouldLog(3)){let i="\u274C [ERROR]";t instanceof Error?console.error(i,e,{message:t.message,stack:t.stack}):t?console.error(i,e,t):console.error(i,e)}}group(e){this.enabled&&!xt.production&&console.group(e)}groupEnd(){this.enabled&&!xt.production&&console.groupEnd()}time(e){this.enabled&&!xt.production&&console.time(e)}timeEnd(e){this.enabled&&!xt.production&&console.timeEnd(e)}clear(){xt.production||console.clear()}shouldLog(e){return this.enabled&&e>=this.currentLevel}assert(e,t){e||this.error(`Assertion failed: ${t}`)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var vt=class n{http=_(Mc);logger=_(ed);apiUrl=vr.API_URL;authToken=null;csrfToken=null;csrfTokenPromise=null;setAuthToken(e){this.authToken=e}clearAuthToken(){this.authToken=null}async fetchCsrfToken(){return this.csrfToken?this.csrfToken:this.csrfTokenPromise?this.csrfTokenPromise:(this.csrfTokenPromise=new Promise((e,t)=>{this.http.get(`${this.apiUrl}/csrf-token`,{headers:{"Content-Type":"application/json"},withCredentials:!0}).subscribe({next:i=>{this.csrfToken=i.data.token,this.csrfTokenPromise=null,e(this.csrfToken)},error:i=>{this.csrfTokenPromise=null,this.logger.warn("Failed to fetch CSRF token",i),e("")}})}),this.csrfTokenPromise)}clearCsrfToken(){this.csrfToken=null,this.csrfTokenPromise=null}getHeaders(){let e={"Content-Type":"application/json"};return this.authToken&&(e.Authorization=`Bearer ${this.authToken}`),e}async getHeadersWithCsrf(){let e=this.getHeaders();if(!this.authToken){let t=await this.fetchCsrfToken();t&&(e["X-CSRF-Token"]=t)}return e}get(e){let t=`${this.apiUrl}/${e}`;return this.logger.debug(`[API GET] ${t}`),this.http.get(t,{headers:this.getHeaders(),withCredentials:!0}).pipe(Ui(vr.TIMEOUT),Qe(i=>(this.logger.error(`[API ERROR] ${e}`,i),Vn(()=>new yn(i)))))}post(e,t){let i=`${this.apiUrl}/${e}`;return this.logger.debug(`[API POST] ${i}`,t),new le(r=>{this.getHeadersWithCsrf().then(o=>{this.http.post(i,t,{headers:o,withCredentials:!0}).pipe(Ui(vr.TIMEOUT),Qe(s=>(s.status===403&&s.error?.error?.includes("CSRF")&&this.clearCsrfToken(),this.logger.error(`[API ERROR] ${e}`,s),Vn(()=>new yn(s))))).subscribe(r)}).catch(o=>{r.error(new yn(o))})})}put(e,t){let i=`${this.apiUrl}/${e}`;return this.logger.debug(`[API PUT] ${i}`,t),new le(r=>{this.getHeadersWithCsrf().then(o=>{this.http.put(i,t,{headers:o,withCredentials:!0}).pipe(Ui(vr.TIMEOUT),Qe(s=>(s.status===403&&s.error?.error?.includes("CSRF")&&this.clearCsrfToken(),this.logger.error(`[API ERROR] ${e}`,s),Vn(()=>new yn(s))))).subscribe(r)}).catch(o=>{r.error(new yn(o))})})}delete(e){let t=`${this.apiUrl}/${e}`;return this.logger.debug(`[API DELETE] ${t}`),new le(i=>{this.getHeadersWithCsrf().then(r=>{this.http.delete(t,{headers:r,withCredentials:!0}).pipe(Ui(vr.TIMEOUT),Qe(o=>(o.status===403&&o.error?.error?.includes("CSRF")&&this.clearCsrfToken(),this.logger.error(`[API ERROR] ${e}`,o),Vn(()=>new yn(o))))).subscribe(i)}).catch(r=>{i.error(new yn(r))})})}uploadFile(e,t){let i=`${this.apiUrl}/${e}`;return this.logger.debug(`[API UPLOAD] ${i}`),new le(r=>{this.getHeadersWithCsrf().then(o=>{delete o["Content-Type"],this.http.post(i,t,{headers:o,withCredentials:!0}).pipe(Ui(vr.TIMEOUT),Qe(s=>(this.logger.error(`[API ERROR] ${e}`,s),Vn(()=>new yn(s))))).subscribe(r)}).catch(o=>{r.error(new yn(o))})})}getApiUrl(e){return e?`${this.apiUrl}/${e}`:this.apiUrl}healthCheck(){return this.get("status")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})},yn=class extends Error{constructor(t){super(t?.error?.error||"API request failed");this.originalError=t;this.name="ApiError"}};var et=class n{toastsSignal=E([]);toasts=this.toastsSignal.asReadonly();success(e,t=3e3){console.log("\u{1F7E2} Toast.success() called with:",e),this.show(e,"success",t)}error(e,t=5e3){this.show(e,"error",t)}info(e,t=3e3){this.show(e,"info",t)}warning(e,t=4e3){this.show(e,"warning",t)}show(e,t,i){let r={id:Date.now().toString()+Math.random().toString(36),message:e,type:t,duration:i};console.log("\u{1F4E8} Adding toast to signal:",r),this.toastsSignal.update(o=>[...o,r]),console.log("\u{1F4CA} Current toasts:",this.toastsSignal()),setTimeout(()=>{this.dismiss(r.id)},i)}dismiss(e){this.toastsSignal.update(t=>t.filter(i=>i.id!==e))}dismissAll(){this.toastsSignal.set([])}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var An=class n{sanitizePerson(e){return{firstName:this.capitalizeName(e.firstName),lastName:this.capitalizeName(e.lastName),middleName:e.middleName?this.capitalizeName(e.middleName):void 0,maidenName:e.maidenName?this.capitalizeName(e.maidenName):void 0,nickname:e.nickname?this.trimText(e.nickname):void 0,prefix:e.prefix?this.trimText(e.prefix):void 0,suffix:e.suffix?this.trimText(e.suffix):void 0,gender:e.gender?this.trimText(e.gender).toLowerCase():void 0,birthDate:e.birthDate?this.formatDate(e.birthDate):void 0,birthDateIsApproximate:e.birthDateIsApproximate===!0,birthPlace:e.birthPlace?this.capitalizePlaceName(e.birthPlace):void 0,deathDate:e.deathDate?this.formatDate(e.deathDate):void 0,deathPlace:e.deathPlace?this.capitalizePlaceName(e.deathPlace):void 0,isDeceased:e.isDeceased===!0,email:e.email?this.sanitizeEmail(e.email):void 0,phone:e.phone?this.sanitizePhone(e.phone):void 0,address:e.address?this.sanitizeAddress(e.address):void 0,biography:e.biography?this.sanitizeText(e.biography):void 0,occupation:e.occupation?this.capitalizeName(e.occupation):void 0,education:e.education?this.trimText(e.education):void 0,isPrivate:e.isPrivate===!0,isVerified:e.isVerified===!0,notes:e.notes?this.sanitizeText(e.notes):void 0,sources:Array.isArray(e.sources)?e.sources.map(t=>this.trimText(t)):void 0}}sanitizeStory(e){return{title:this.trimText(e.title,200),content:e.content?this.sanitizeText(e.content):void 0,summary:e.summary?this.trimText(e.summary,500):void 0,category:e.category?this.trimText(e.category).toLowerCase():"other",tags:Array.isArray(e.tags)?e.tags.map(t=>this.trimText(t)).filter(t=>t.length>0).map(t=>t.toLowerCase()):[],primaryPersonId:e.primaryPersonId||"",involvedPersonIds:Array.isArray(e.involvedPersonIds)?e.involvedPersonIds.filter(t=>t&&t.length>0):[],eventDate:e.eventDate?this.formatDate(e.eventDate):void 0,location:e.location?this.capitalizePlaceName(e.location):void 0,isPublished:e.isPublished===!0,isFeatured:e.isFeatured===!0,isVerified:e.isVerified===!0,viewCount:Math.max(0,parseInt(e.viewCount)||0),likeCount:Math.max(0,parseInt(e.likeCount)||0),authorId:e.authorId||"",narratorId:e.narratorId||void 0,featuredMediaId:e.featuredMediaId||void 0,mediaIds:Array.isArray(e.mediaIds)?e.mediaIds.filter(t=>t&&t.length>0):[],commentIds:Array.isArray(e.commentIds)?e.commentIds.filter(t=>t&&t.length>0):[],sources:Array.isArray(e.sources)?e.sources.map(t=>this.trimText(t)):void 0}}sanitizeRelationship(e){return{fromPersonId:e.fromPersonId?this.trimText(e.fromPersonId):"",toPersonId:e.toPersonId?this.trimText(e.toPersonId):"",type:e.type?this.trimText(e.type).toLowerCase():"",isBiological:e.isBiological??!1,isLegal:e.isLegal??!1,closeness:e.closeness?this.trimText(e.closeness):"unknown",startDate:e.startDate?this.formatDate(e.startDate):"",endDate:e.endDate?this.formatDate(e.endDate):"",isCurrent:e.isCurrent??!1,marriageId:e.marriageId?this.trimText(e.marriageId):"",isVerified:e.isVerified??!1,notes:e.notes?this.sanitizeText(e.notes):"",sources:Array.isArray(e.sources)?e.sources.map(t=>this.trimText(t)):[]}}sanitizeMediaCaption(e,t=500){return this.trimText(e,t)}sanitizePersonIds(e){return Array.isArray(e)?e.filter(t=>t&&t.length>0).map(t=>this.trimText(t)):[]}trimText(e,t){if(!e||typeof e!="string")return"";let i=e.trim().replace(/\s+/g," ").replace(/[\n\r\t]+/g," ");return t&&i.length>t&&(i=i.substring(0,t).trim()),i}capitalizeName(e){return!e||typeof e!="string"?"":this.trimText(e).split(/[\s\-]+/).map(t=>t.length===0?"":t.includes("'")?t.split("'").map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join("'"):t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).filter(t=>t.length>0).join(" ")}capitalizePlaceName(e){return!e||typeof e!="string"?"":this.trimText(e).split(",").map(t=>t.trim().split(/[\s\-]+/).map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join(" ")).join(", ")}sanitizeEmail(e){if(!e||typeof e!="string")return"";let t=this.trimText(e).toLowerCase();return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?t:(console.warn("Invalid email format:",e),"")}sanitizePhone(e){if(!e||typeof e!="string")return"";let t=e.replace(/[^\d+\-()]/g,"").trim();return t.length<7?(console.warn("Phone number too short:",e),""):t}sanitizeAddress(e){return!e||typeof e!="string"?"":this.trimText(e,200).split(",").map(t=>t.trim()).filter(t=>t.length>0).join(", ")}sanitizeText(e,t){if(!e||typeof e!="string")return"";let i=this.trimText(e,t);return i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),i}formatDate(e){if(!e)return"";try{let t=typeof e=="string"?new Date(e):e;return!(t instanceof Date)||isNaN(t.getTime())?(console.warn("Invalid date:",e),""):t.toISOString().split("T")[0]}catch(t){return console.warn("Date formatting error:",t),""}}removeEmpty(e){let t={};return Object.keys(e).forEach(i=>{let r=e[i];r!=null&&r!==""&&r!==null&&r!==void 0&&(t[i]=r)}),t}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var Se=class n{httpApi=_(vt);toast=_(et);sanitizer=_(An);peopleSignal=E([]);loadingSignal=E(!1);errorSignal=E(null);people=S(()=>this.peopleSignal());livingPeople=S(()=>this.peopleSignal().filter(e=>!e.isDeceased));deceasedPeople=S(()=>this.peopleSignal().filter(e=>e.isDeceased));loading=S(()=>this.loadingSignal());error=S(()=>this.errorSignal());constructor(){this.initializeData()}initializeData(){this.loadPeople()}loadPeople(){this.loadingSignal.set(!0),this.errorSignal.set(null),this.httpApi.get("people").subscribe({next:e=>{console.log("\u2713 Loaded people from API",e.data),this.peopleSignal.set(e.data||[]),this.loadingSignal.set(!1)},error:e=>{console.error("\u2717 Failed to load people:",e),this.errorSignal.set(e.message||"Failed to load people"),this.loadingSignal.set(!1)}})}getPersonById(e){return this.peopleSignal().find(t=>t.id===e)}addPerson(e){let t=this.sanitizer.sanitizePerson(e);return this.httpApi.post("person",t).pipe(Ge(i=>{console.log("\u2713 Person created:",i.data);let r=i.data?.firstName||"Unknown",o=i.data?.lastName||"Person",s=`${r} ${o} added successfully!`;console.log("\u{1F4E2} Toast Message:",s),this.peopleSignal.update(a=>[...a,i.data]),this.errorSignal.set(null),this.toast.success(s)}),ce(i=>i.data))}updatePerson(e,t){let i=this.getPersonById(e);if(!i){this.errorSignal.set("Person not found");return}let r=P(P({},i),t),o=this.peopleSignal().findIndex(a=>a.id===e);o!==-1&&this.peopleSignal.update(a=>[...a.slice(0,o),r,...a.slice(o+1)]);let s=this.sanitizer.sanitizePerson(t);this.httpApi.put(`person/${e}`,s).subscribe({next:a=>{console.log("\u2713 Person updated:",a.data),this.peopleSignal.update(c=>c.map(f=>f.id===e?a.data:f)),this.errorSignal.set(null),this.toast.success("Person updated successfully!")},error:a=>{console.error("\u2717 Failed to update person:",a),this.loadPeople(),this.errorSignal.set(a.message||"Failed to update person")}})}deletePerson(e){let t=this.peopleSignal().findIndex(i=>i.id===e);t!==-1&&this.peopleSignal.update(i=>i.filter((r,o)=>o!==t)),this.httpApi.delete(`person/${e}`).subscribe({next:()=>{console.log("\u2713 Person deleted"),this.errorSignal.set(null),this.toast.success("Person deleted successfully!")},error:i=>{console.error("\u2717 Failed to delete person:",i),this.loadPeople(),this.errorSignal.set(i.message||"Failed to delete person"),this.toast.error("Failed to delete person. Please try again.")}})}setProfilePhoto(e,t){let i=this.getPersonById(e);if(!i){this.errorSignal.set("Person not found");return}let r=W(P({},i),{profilePhotoId:t}),o=this.peopleSignal().findIndex(s=>s.id===e);o!==-1&&this.peopleSignal.update(s=>[...s.slice(0,o),r,...s.slice(o+1)]),this.httpApi.put(`person/${e}`,{profilePhotoId:t}).subscribe({next:s=>{console.log("\u2713 Profile photo linked:",s.data),this.peopleSignal.update(a=>a.map(c=>c.id===e?s.data:c)),this.errorSignal.set(null)},error:s=>{console.error("\u2717 Failed to link profile photo:",s),this.loadPeople(),this.errorSignal.set(s.message||"Failed to link profile photo")}})}searchPeople(e){let t=e.toLowerCase();return this.peopleSignal().filter(i=>{let r=`${i.firstName} ${i.lastName}`.toLowerCase(),o=i.maidenName?.toLowerCase()||"";return r.includes(t)||o.includes(t)})}clearAll(){this.peopleSignal.set([])}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var Rn=class n{httpApi=_(vt);toast=_(et);sanitizer=_(An);relationshipsSignal=E([]);loadingSignal=E(!1);errorSignal=E(null);relationships=S(()=>this.relationshipsSignal());loading=S(()=>this.loadingSignal());error=S(()=>this.errorSignal());constructor(){this.initializeData()}initializeData(){this.loadRelationships()}loadRelationships(){this.loadingSignal.set(!0),this.errorSignal.set(null),this.httpApi.get("relationships").subscribe({next:e=>{console.log("\u2713 Loaded relationships from API",e.data),this.relationshipsSignal.set(e.data||[]),this.loadingSignal.set(!1)},error:e=>{console.error("\u2717 Failed to load relationships:",e),this.errorSignal.set(e.message||"Failed to load relationships"),this.loadingSignal.set(!1)}})}getRelationshipById(e){return this.relationshipsSignal().find(t=>t.id===e)}getRelationshipsForPerson(e){return this.relationshipsSignal().filter(t=>t.fromPersonId===e||t.toPersonId===e)}createRelationship(e,t,i){let r={fromPersonId:e,toPersonId:t,type:i};console.log("\u{1F517} Creating relationship:",r);let o=this.sanitizer.sanitizeRelationship(r);this.httpApi.post("relationship",o).subscribe({next:s=>{console.log("\u2713 Relationship created:",s.data),console.log("\u{1F4CA} Response type:",typeof s.data,"Is Array:",Array.isArray(s.data)),console.log("\u2713 Adding 1 relationship to signal"),this.relationshipsSignal.update(a=>[...a,s.data]),console.log("\u{1F4C8} Total relationships now:",this.relationshipsSignal().length),console.log("\u{1F3AF} All relationships:",this.relationshipsSignal()),this.errorSignal.set(null),this.toast.success("Relationship created successfully!")},error:s=>{console.error("\u2717 Failed to create relationship:",s),this.errorSignal.set(s.message||"Failed to create relationship"),this.toast.error("Failed to create relationship. Please try again.")}})}deleteRelationship(e){this.relationshipsSignal.update(t=>t.filter(i=>i.id!==e)),this.httpApi.delete(`relationship/${e}`).subscribe({next:()=>{console.log("\u2713 Relationship deleted"),this.errorSignal.set(null),this.toast.success("Relationship deleted successfully!")},error:t=>{console.error("\u2717 Failed to delete relationship:",t),this.loadRelationships(),this.errorSignal.set(t.message||"Failed to delete relationship"),this.toast.error("Failed to delete relationship. Please try again.")}})}getParents(e){return this.relationshipsSignal().filter(t=>(t.type==="biological-parent"||t.type==="adopted-parent"||t.type==="step-parent"||t.type==="foster-parent")&&t.toPersonId===e||(t.type==="biological-child"||t.type==="adopted-child"||t.type==="step-child"||t.type==="foster-child")&&t.toPersonId===e)}getChildren(e){return this.relationshipsSignal().filter(t=>(t.type==="biological-parent"||t.type==="adopted-parent"||t.type==="step-parent"||t.type==="foster-parent")&&t.fromPersonId===e||(t.type==="biological-child"||t.type==="adopted-child"||t.type==="step-child"||t.type==="foster-child")&&t.fromPersonId===e)}clearAll(){this.relationshipsSignal.set([])}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var be=class n{httpApi=_(vt);toast=_(et);sanitizer=_(An);personService=_(Se);mediaItems=E([]);albums=E([]);uploadQueue=E(new Map);loadingSignal=E(!1);errorSignal=E(null);media=this.mediaItems.asReadonly();allAlbums=this.albums.asReadonly();uploads=S(()=>Array.from(this.uploadQueue().values()));loading=S(()=>this.loadingSignal());error=S(()=>this.errorSignal());MAX_FILE_SIZE=50*1024*1024;getMediaUrl(e){if(!e)return null;let t=this.getMedia(e);if(!t?.url)return null;if(t.url.startsWith("http://")||t.url.startsWith("https://"))return t.url;let r=this.httpApi.getApiUrl().replace(/\/api\.php$/,"");return t.url.startsWith("/server/")?r+t.url.replace("/server",""):r+"/"+t.url.replace(/^\//,"")}getProfilePhotoUrl(e){return this.getMediaUrl(e)}constructor(){this.initializeData()}initializeData(){this.loadMedia()}loadMedia(){this.loadingSignal.set(!0),this.errorSignal.set(null),this.httpApi.get("media").subscribe({next:e=>{console.log("\u2713 Loaded media from API",e.data),this.mediaItems.set(e.data||[]),this.loadingSignal.set(!1)},error:e=>{console.error("\u2717 Failed to load media:",e),this.errorSignal.set(e.message||"Failed to load media"),this.loadingSignal.set(!1)}})}uploadMedia(e,t=[],i,r){if(e.size>this.MAX_FILE_SIZE){this.errorSignal.set(`File too large. Max size: ${this.MAX_FILE_SIZE/1024/1024}MB`);return}let o=crypto.randomUUID();this.addToUploadQueue(o,e.name,0);let s=new FormData;s.append("file",e),s.append("type",this.getMediaType(e.type)),s.append("caption",this.sanitizer.sanitizeMediaCaption(r||"")),s.append("altText",""),t.length>0&&this.sanitizer.sanitizePersonIds(t).forEach(c=>s.append("personIds[]",c)),i&&s.append("albumId",i),s.append("uploadedBy","current-user"),s.append("isPublic","true"),this.httpApi.uploadFile("media",s).subscribe({next:a=>{if(console.log("\u2713 Media uploaded:",a.data),this.mediaItems.update(c=>[...c,a.data]),this.updateUploadProgress(o,100),this.errorSignal.set(null),this.toast.success(`${e.name} uploaded successfully!`),t.length>0){let c=t[0];console.log(`\u{1F517} Linking media ${a.data.id} to person ${c} as profile photo`),this.personService.setProfilePhoto(c,a.data.id)}},error:a=>{console.error("\u2717 Failed to upload media:",a),this.errorSignal.set(a.message||"Failed to upload media"),this.removeFromUploadQueue(o),this.toast.error(`Failed to upload ${e.name}. Please try again.`)}})}uploadMultiple(e,t=[],i){let r=e.map(o=>this.uploadMediaAsync(o,t,i));return Promise.all(r)}uploadMediaAsync(e,t=[],i){return new Promise((r,o)=>{let s=new FormData;s.append("file",e),s.append("type",this.getMediaType(e.type)),this.sanitizer.sanitizePersonIds(t).forEach(c=>s.append("personIds[]",c)),i&&s.append("albumId",i),s.append("uploadedBy","user"),s.append("isPublic","true"),this.httpApi.uploadFile("media",s).subscribe({next:c=>{console.log("\u2713 Media uploaded:",c.data),this.mediaItems.update(f=>[...f,c.data]),this.addToUploadQueue(c.data.id,c.data.filename),r(c.data)},error:c=>{console.error("\u2717 Failed to upload file:",c),o(c)}})})}getMedia(e){return this.mediaItems().find(t=>t.id===e)}getMediaForPerson(e){return this.mediaItems().filter(t=>t.personIds.includes(e))}getMediaInAlbum(e){return this.mediaItems().filter(t=>t.albumId===e)}updateCaption(e,t){this.getMedia(e)&&(this.mediaItems.update(r=>r.map(o=>o.id===e?W(P({},o),{caption:t}):o)),this.httpApi.put(`media/${e}`,{caption:t}).subscribe({error:r=>{console.error("Failed to update caption:",r),this.loadMedia()}}))}tagPerson(e,t){let i=this.getMedia(e);if(!i||i.personIds.includes(t))return;let r=[...i.personIds,t];this.mediaItems.update(o=>o.map(s=>s.id===e?W(P({},s),{personIds:r}):s)),this.httpApi.put(`media/${e}`,{personIds:r}).subscribe({error:o=>{console.error("Failed to tag person:",o),this.loadMedia()}})}untagPerson(e,t){let i=this.getMedia(e);if(!i)return;let r=i.personIds.filter(o=>o!==t);this.mediaItems.update(o=>o.map(s=>s.id===e?W(P({},s),{personIds:r}):s)),this.httpApi.put(`media/${e}`,{personIds:r}).subscribe({error:o=>{console.error("Failed to untag person:",o),this.loadMedia()}})}deleteMedia(e){this.mediaItems.update(t=>t.filter(i=>i.id!==e)),this.httpApi.delete(`media/${e}`).subscribe({next:()=>{console.log("\u2713 Media deleted"),this.errorSignal.set(null),this.toast.success("Media deleted successfully!")},error:t=>{console.error("\u2717 Failed to delete media:",t),this.loadMedia(),this.errorSignal.set(t.message||"Failed to delete media"),this.toast.error("Failed to delete media. Please try again.")}})}createAlbum(e,t,i=[]){let r={title:e,description:t,personIds:i,mediaIds:[],isPublic:!0},o=W(P({id:crypto.randomUUID()},r),{createdBy:"current-user",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isCollaborative:!1,viewCount:0});this.albums.update(s=>[...s,o])}getAlbum(e){return this.albums().find(t=>t.id===e)}getAlbumsForPerson(e){return this.albums().filter(t=>t.personIds.includes(e))}addMediaToAlbum(e,t){this.albums.update(i=>i.map(r=>r.id===e&&!r.mediaIds.includes(t)?W(P({},r),{mediaIds:[...r.mediaIds,t],updatedAt:new Date().toISOString()}):r)),this.mediaItems.update(i=>i.map(r=>r.id===t?W(P({},r),{albumId:e}):r))}removeMediaFromAlbum(e,t){this.albums.update(i=>i.map(r=>r.id===e?W(P({},r),{mediaIds:r.mediaIds.filter(o=>o!==t)}):r)),this.mediaItems.update(i=>i.map(r=>r.id===t&&r.albumId===e?W(P({},r),{albumId:void 0}):r))}setAlbumCover(e,t){this.albums.update(i=>i.map(r=>r.id===e?W(P({},r),{coverMediaId:t}):r))}deleteAlbum(e){let t=this.getAlbum(e);t&&t.mediaIds.forEach(i=>{this.mediaItems.update(r=>r.map(o=>o.id===i?W(P({},o),{albumId:void 0}):o))}),this.albums.update(i=>i.filter(r=>r.id!==e))}getMediaType(e){return e.startsWith("image/")?"photo":e.startsWith("video/")?"video":e.startsWith("audio/")?"audio":"document"}addToUploadQueue(e,t,i=0){let r=new Map(this.uploadQueue());r.set(e,{fileId:e,filename:t,progress:i,status:"uploading"}),this.uploadQueue.set(r)}updateUploadProgress(e,t){let i=new Map(this.uploadQueue()),r=i.get(e);r&&(r.progress=t,r.status=t===100?"complete":"uploading",i.set(e,r),this.uploadQueue.set(i),t===100&&setTimeout(()=>{let o=new Map(this.uploadQueue());o.delete(e),this.uploadQueue.set(o)},2e3))}removeFromUploadQueue(e){let t=new Map(this.uploadQueue());t.delete(e),this.uploadQueue.set(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var ri={birth:{type:"birth",label:"Birth",icon:"cake",color:"#10b981",description:"Birth of a family member"},death:{type:"death",label:"Death",icon:"favorite",color:"#64748b",description:"Passing of a family member"},marriage:{type:"marriage",label:"Marriage",icon:"favorite",color:"#ec4899",description:"Wedding ceremony"},divorce:{type:"divorce",label:"Divorce",icon:"heart_broken",color:"#f97316",description:"End of marriage"},story:{type:"story",label:"Story",icon:"auto_stories",color:"#8b5cf6",description:"Family story or memory"},photo:{type:"photo",label:"Photo",icon:"photo_camera",color:"#06b6d4",description:"Photo captured"},migration:{type:"migration",label:"Migration",icon:"flight_takeoff",color:"#3b82f6",description:"Move to new location"},career:{type:"career",label:"Career",icon:"work",color:"#eab308",description:"Career milestone"},education:{type:"education",label:"Education",icon:"school",color:"#0ea5e9",description:"Educational achievement"},achievement:{type:"achievement",label:"Achievement",icon:"emoji_events",color:"#f59e0b",description:"Notable achievement"},custom:{type:"custom",label:"Event",icon:"event",color:"#6366f1",description:"Custom event"}};var Fn=class n{httpApi=_(vt);personService=_(Se);events=E([]);generatedEvents=E([]);filter=E({eventTypes:[],personIds:[]});sortOrder=E("desc");loadingSignal=E(!1);errorSignal=E(null);allEvents=S(()=>{let e=this.events(),t=this.generatedEvents(),i=new Map;return[...e,...t].forEach(r=>i.set(r.id,r)),Array.from(i.values())});currentFilter=this.filter.asReadonly();loading=S(()=>this.loadingSignal());error=S(()=>this.errorSignal());filteredEvents=S(()=>{let e=[...this.allEvents()],t=this.filter();return t.eventTypes.length>0&&(e=e.filter(i=>t.eventTypes.includes(i.type))),t.personIds.length>0&&(e=e.filter(i=>i.personIds.some(r=>t.personIds.includes(r)))),t.startYear&&(e=e.filter(i=>i.year>=t.startYear)),t.endYear&&(e=e.filter(i=>i.year<=t.endYear)),t.importance&&t.importance.length>0&&(e=e.filter(i=>t.importance.includes(i.importance))),t.hasStories!==void 0&&(e=e.filter(i=>t.hasStories?!!i.storyId:!i.storyId)),t.hasMedia!==void 0&&(e=e.filter(i=>t.hasMedia?i.mediaIds&&i.mediaIds.length>0:!i.mediaIds||i.mediaIds.length===0)),e.sort((i,r)=>{let o=new Date(i.date).getTime(),s=new Date(r.date).getTime();return this.sortOrder()==="asc"?o-s:s-o}),e});periods=S(()=>{let e=this.filteredEvents(),t=new Map;return e.forEach(r=>{let o=new Date(r.date).getFullYear();t.has(o)||t.set(o,[]),t.get(o).push(r)}),Array.from(t.entries()).sort((r,o)=>o[0]-r[0]).map(([r,o])=>({label:r.toString(),startYear:r,endYear:r,eventCount:o.length,events:o.sort((s,a)=>new Date(a.date).getTime()-new Date(s.date).getTime())}))});stats=S(()=>{let e=this.filteredEvents();if(e.length===0)return{totalEvents:0,dateRange:{earliest:new Date,latest:new Date},eventTypeCounts:{},peopleInvolved:0,storiesLinked:0,mediaAttached:0};let t={},i=new Set,r=0,o=0;e.forEach(f=>{t[f.type]=(t[f.type]||0)+1,f.personIds.forEach(h=>i.add(h)),f.storyId&&r++,f.mediaIds&&f.mediaIds.length>0&&o++});let s=e.map(f=>new Date(f.date).getTime()),a=new Date(Math.min(...s)),c=new Date(Math.max(...s));return{totalEvents:e.length,dateRange:{earliest:a,latest:c},eventTypeCounts:t,peopleInvolved:i.size,storiesLinked:r,mediaAttached:o}});constructor(){this.initializeData(),ot(()=>{let e=this.personService.people();e.length>0&&this.generateEventsFromPeople(e)})}generateEventsFromPeople(e){let t=[];e.forEach(i=>{let r=this.generateFromPerson({id:i.id,name:`${i.firstName} ${i.lastName}`,birthDate:i.birthDate,birthPlace:i.birthPlace,deathDate:i.deathDate,deathPlace:i.deathPlace});t.push(...r)}),this.generatedEvents.set(t),console.log("\u2713 Generated",t.length,"timeline events from",e.length,"people")}initializeData(){this.loadTimeline()}loadTimeline(){this.loadingSignal.set(!0),this.errorSignal.set(null),this.httpApi.get("timeline").subscribe({next:e=>{console.log("\u2713 Loaded timeline from API",e.data),this.events.set(e.data||[]),this.loadingSignal.set(!1)},error:e=>{console.error("\u2717 Failed to load timeline:",e),this.errorSignal.set(e.message||"Failed to load timeline"),this.loadingSignal.set(!1)}})}addEvent(e){this.events.update(t=>[...t,e])}addEvents(e){this.events.update(t=>[...t,...e])}updateEvent(e,t){this.events.update(i=>i.map(r=>r.id===e?P(P({},r),t):r))}deleteEvent(e){this.events.update(t=>t.filter(i=>i.id!==e))}createEvent(e){return this.httpApi.post("timeline",e).pipe(ce(t=>{let i=t.data||t;return this.events.update(r=>[...r,i]),i}))}getEvent(e){return this.events().find(t=>t.id===e)}setFilter(e){this.filter.update(t=>P(P({},t),e))}clearFilter(){this.filter.set({eventTypes:[],personIds:[]})}toggleEventType(e){this.filter.update(t=>{let i=[...t.eventTypes],r=i.indexOf(e);return r>-1?i.splice(r,1):i.push(e),W(P({},t),{eventTypes:i})})}setSortOrder(e){this.sortOrder.set(e)}toggleSortOrder(){this.sortOrder.update(e=>e==="asc"?"desc":"asc")}generateFromPerson(e){let t=[];return e.birthDate&&t.push({id:`birth-${e.id}`,type:"birth",date:e.birthDate,dateDisplay:this.formatDate(e.birthDate),year:new Date(e.birthDate).getFullYear(),title:`Birth of ${e.name}`,description:e.birthPlace?`Born in ${e.birthPlace}`:void 0,location:e.birthPlace,personIds:[e.id],icon:ri.birth.icon,color:ri.birth.color,isEstimated:!1,importance:"high"}),e.deathDate&&t.push({id:`death-${e.id}`,type:"death",date:e.deathDate,dateDisplay:this.formatDate(e.deathDate),year:new Date(e.deathDate).getFullYear(),title:`Passing of ${e.name}`,description:e.deathPlace?`Died in ${e.deathPlace}`:void 0,location:e.deathPlace,personIds:[e.id],icon:ri.death.icon,color:ri.death.color,isEstimated:!1,importance:"high"}),t}generateFromStory(e){if(!e.eventDate)return null;let t=ri[e.category]||ri.story;return{id:`story-${e.id}`,type:"story",date:e.eventDate,dateDisplay:this.formatDate(e.eventDate),year:new Date(e.eventDate).getFullYear(),title:e.title,description:e.summary||e.content.substring(0,150)+"...",location:e.location,personIds:[e.primaryPersonId,...e.involvedPersonIds],storyId:e.id,mediaIds:e.mediaIds,icon:t.icon,color:t.color,isEstimated:!1,importance:e.isFeatured?"high":"medium"}}formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xt=class n{httpApi=_(vt);toast=_(et);sanitizer=_(An);stories=E([]);loadingSignal=E(!1);errorSignal=E(null);allStories=S(()=>this.stories());publishedStories=S(()=>this.stories().filter(e=>e.isPublished));draftStories=S(()=>this.stories().filter(e=>!e.isPublished));featuredStories=S(()=>this.stories().filter(e=>e.isFeatured&&e.isPublished));loading=S(()=>this.loadingSignal());error=S(()=>this.errorSignal());constructor(){this.initializeData()}initializeData(){this.loadStories()}loadStories(){this.loadingSignal.set(!0),this.errorSignal.set(null),this.httpApi.get("stories").subscribe({next:e=>{console.log("\u2713 Loaded stories from API",e.data),this.stories.set(e.data||[]),this.loadingSignal.set(!1)},error:e=>{console.error("\u2717 Failed to load stories:",e),this.errorSignal.set(e.message||"Failed to load stories"),this.loadingSignal.set(!1)}})}getStoryById(e){return this.stories().find(t=>t.id===e)}createStory(e,t){let i=W(P({},e),{authorId:t,isPublished:e.isPublished||!1,isFeatured:e.isFeatured||!1,isVerified:e.isVerified||!1}),r=this.sanitizer.sanitizeStory(i);return this.httpApi.post("story",r).pipe(Ge(o=>{console.log("\u2713 Story created:",o.data),this.stories.update(s=>[...s,o.data]),this.errorSignal.set(null),this.toast.success(`Story "${o.data.title}" created successfully!`)}),ce(o=>o.data))}updateStory(e,t){let i=this.getStoryById(e);if(!i){this.errorSignal.set("Story not found");return}let r=P(P({},i),t);this.stories.update(s=>s.map(a=>a.id===e?r:a));let o=this.sanitizer.sanitizeStory(t);this.httpApi.put(`story/${e}`,o).subscribe({next:s=>{console.log("\u2713 Story updated:",s.data),this.stories.update(a=>a.map(c=>c.id===e?s.data:c)),this.errorSignal.set(null),this.toast.success("Story updated successfully!")},error:s=>{console.error("\u2717 Failed to update story:",s),this.loadStories(),this.errorSignal.set(s.message||"Failed to update story")}})}deleteStory(e){this.stories.update(t=>t.filter(i=>i.id!==e)),this.httpApi.delete(`story/${e}`).subscribe({next:()=>{console.log("\u2713 Story deleted"),this.errorSignal.set(null)},error:t=>{console.error("\u2717 Failed to delete story:",t),this.loadStories(),this.errorSignal.set(t.message||"Failed to delete story")}})}incrementViewCount(e){this.httpApi.put(`story/${e}`,{viewCount:(this.getStoryById(e)?.viewCount||0)+1}).subscribe({next:t=>{this.stories.update(i=>i.map(r=>r.id===e?t.data:r))},error:t=>console.error("Failed to increment view count:",t)})}toggleLike(e,t){let i=this.getStoryById(e);i&&(this.stories.update(r=>r.map(o=>o.id===e?W(P({},o),{likeCount:o.likeCount+1}):o)),this.httpApi.put(`story/${e}`,{likeCount:i.likeCount+1}).subscribe({error:r=>{console.error("Failed to toggle like:",r),this.loadStories()}}))}getPersonStories(e){return this.stories().filter(t=>t.primaryPersonId===e||t.involvedPersonIds.includes(e))}getStoriesByCategory(e){return this.stories().filter(t=>t.category===e)}getStoriesByTag(e){return this.stories().filter(t=>t.tags.some(i=>i.toLowerCase()===e.toLowerCase()))}searchStories(e){let t=e.toLowerCase().trim();return t?this.stories().filter(i=>i.title.toLowerCase().includes(t)||i.content.toLowerCase().includes(t)||i.tags.some(r=>r.toLowerCase().includes(t))||i.location&&i.location.toLowerCase().includes(t)):this.stories()}getGenerationStories(e,t){return this.stories().filter(i=>t.includes(i.primaryPersonId))}sortByEventDate(e){return[...e].sort((t,i)=>{let r=t.eventDate?new Date(t.eventDate).getTime():0;return(i.eventDate?new Date(i.eventDate).getTime():0)-r})}sortByCreatedDate(e){return[...e].sort((t,i)=>new Date(i.createdAt).getTime()-new Date(t.createdAt).getTime())}sortByUpdatedDate(e){return[...e].sort((t,i)=>new Date(i.updatedAt).getTime()-new Date(t.updatedAt).getTime())}sortByPopularity(e){return[...e].sort((t,i)=>{let r=t.viewCount+t.likeCount*2;return i.viewCount+i.likeCount*2-r})}importStories(e){let t={stories:e};this.httpApi.post("import",t).subscribe({next:i=>{console.log("\u2713 Stories imported:",i.data),this.loadStories(),this.errorSignal.set(null)},error:i=>{console.error("\u2717 Failed to import stories:",i),this.errorSignal.set(i.message||"Failed to import stories")}})}exportStories(){return[...this.stories()]}clearAllStories(){this.stories.set([])}syncWithServer(){this.loadStories()}generateExcerpt(e,t=150){let i=e.replace(/<[^>]*>/g,"").replace(/[*_#`\[\]]/g,"").trim();return i.length<=t?i:i.substring(0,t).trim()+"..."}validateStory(e){let t=[];return(!e.title||e.title.trim().length===0)&&t.push("Title is required"),e.title&&e.title.length>150&&t.push("Title must be 150 characters or less"),(!e.content||e.content.trim().length===0)&&t.push("Content is required"),e.primaryPersonId||t.push("Primary person is required"),e.category||t.push("Category is required"),{valid:t.length===0,errors:t}}getStatistics(){let e=this.stories();return{total:e.length,published:e.filter(t=>t.isPublished).length,drafts:e.filter(t=>!t.isPublished).length,featured:e.filter(t=>t.isFeatured).length,verified:e.filter(t=>t.isVerified).length,totalViews:e.reduce((t,i)=>t+i.viewCount,0),totalLikes:e.reduce((t,i)=>t+i.likeCount,0),categoryCounts:this.getCategoryCounts(),averageLength:Math.round(e.reduce((t,i)=>t+i.content.length,0)/e.length)}}getCategoryCounts(){let e={};return this.stories().forEach(t=>{e[t.category]=(e[t.category]||0)+1}),e}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var Le=class n{httpApi=_(vt);router=_(Me);toast=_(et);userSignal=E(null);tokenSignal=E(null);loadingSignal=E(!1);initializedSignal=E(!1);TOKEN_KEY="tms_auth_token";USER_KEY="tms_auth_user";ADMIN_TOKEN_KEY="tms_admin_token";ADMIN_EXPIRY_KEY="tms_admin_expiry";user=S(()=>this.userSignal());token=S(()=>this.tokenSignal());isAuthenticated=S(()=>!!this.tokenSignal()&&!!this.userSignal());isAdmin=S(()=>this.userSignal()?.role==="admin"||this.isAdminLoggedIn());loading=S(()=>this.loadingSignal());initialized=S(()=>this.initializedSignal());adminSessionSignal=E(!1);isAdminLoggedIn=S(()=>this.adminSessionSignal());constructor(){this.initializeAuth()}initializeAuth(){try{let e=localStorage.getItem(this.ADMIN_TOKEN_KEY);if(e){let r=localStorage.getItem(this.ADMIN_EXPIRY_KEY);if(r){let o=parseInt(r,10);Date.now()>o?this.clearAdminSession():(this.adminSessionSignal.set(!0),this.verifyAdminTokenWithServer(e))}else this.clearAdminSession()}let t=localStorage.getItem(this.TOKEN_KEY),i=localStorage.getItem(this.USER_KEY);t&&i&&(this.isTokenValid(t)?(this.tokenSignal.set(t),this.userSignal.set(JSON.parse(i)),this.httpApi.setAuthToken(t)):this.clearStoredAuth())}catch{this.clearStoredAuth()}finally{this.initializedSignal.set(!0)}}clearAdminSession(){localStorage.removeItem(this.ADMIN_TOKEN_KEY),localStorage.removeItem(this.ADMIN_EXPIRY_KEY),this.adminSessionSignal.set(!1)}async verifyAdminTokenWithServer(e){try{await bu(this.httpApi.post("verify-admin-token",{token:e}))}catch{this.clearAdminSession()}}isTokenValid(e){try{let t=e.split(".");return t.length!==3?!1:JSON.parse(atob(t[1])).exp*1e3>Date.now()+300*1e3}catch{return!1}}storeAuth(e,t){localStorage.setItem(this.TOKEN_KEY,e),localStorage.setItem(this.USER_KEY,JSON.stringify(t))}clearStoredAuth(){localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.USER_KEY)}login(e){return this.loadingSignal.set(!0),this.httpApi.post("login",e).pipe(Ge(t=>{let{user:i,token:r}=t.data;this.userSignal.set(i),this.tokenSignal.set(r),this.storeAuth(r,i),this.httpApi.setAuthToken(r),console.log("\u2713 Login successful:",i.email),this.toast.success(`Welcome back, ${i.displayName}!`),this.loadingSignal.set(!1)}),ce(t=>t.data.user),Qe(t=>{throw console.error("\u2717 Login failed:",t),this.loadingSignal.set(!1),this.toast.error(t.message||"Login failed. Please check your credentials."),t}))}register(e){return this.loadingSignal.set(!0),this.httpApi.post("register",e).pipe(Ge(t=>{let{user:i,token:r}=t.data;this.userSignal.set(i),this.tokenSignal.set(r),this.storeAuth(r,i),this.httpApi.setAuthToken(r),console.log("\u2713 Registration successful:",i.email),this.toast.success(`Welcome, ${i.displayName}! Your account has been created.`),this.loadingSignal.set(!1)}),ce(t=>t.data.user),Qe(t=>{throw console.error("\u2717 Registration failed:",t),this.loadingSignal.set(!1),this.toast.error(t.message||"Registration failed. Please try again."),t}))}logout(){this.userSignal.set(null),this.tokenSignal.set(null),this.clearStoredAuth(),this.httpApi.clearAuthToken(),console.log("\u2713 Logged out"),this.toast.info("You have been logged out."),this.router.navigate(["/login"])}getToken(){return this.tokenSignal()}hasRole(e){let t=this.userSignal();if(!t)return!1;let i={admin:4,editor:3,contributor:2,viewer:1,user:1};return(i[t.role]||0)>=(i[e]||0)}updateProfile(e){let t=this.userSignal();if(!t)return;let i=P(P({},t),e);this.userSignal.set(i),localStorage.setItem(this.USER_KEY,JSON.stringify(i))}refreshUser(){return this.tokenSignal()?this.httpApi.get("me").pipe(Ge(e=>{this.userSignal.set(e.data),localStorage.setItem(this.USER_KEY,JSON.stringify(e.data))}),ce(e=>e.data),Qe(e=>(console.error("Failed to refresh user:",e),e.status===401&&this.logout(),se(null)))):se(null)}loginAsAdmin(e,t){return this.loadingSignal.set(!0),this.httpApi.post("admin-login",{username:e,password:t}).pipe(Ge(i=>{let{token:r,expiresIn:o}=i.data,s=Date.now()+o*1e3;localStorage.setItem(this.ADMIN_TOKEN_KEY,r),localStorage.setItem(this.ADMIN_EXPIRY_KEY,s.toString()),this.adminSessionSignal.set(!0),this.loadingSignal.set(!1),this.toast.success("Welcome, Admin! Session active.")}),ce(()=>!0),Qe(i=>(this.loadingSignal.set(!1),this.toast.error(i.message||"Invalid admin credentials."),se(!1))))}logoutAdmin(){this.clearAdminSession(),this.toast.info("Admin session ended. Site is now in view-only mode.")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};function VI(n,e){n&1&&(v(0,"span",14),l(1,"hourglass_empty"),g())}function jI(n,e){n&1&&(v(0,"span",14),l(1,"download"),g())}function BI(n,e){n&1&&(v(0,"span",14),l(1,"hourglass_empty"),g())}function UI(n,e){n&1&&(v(0,"span",14),l(1,"upload"),g())}function $I(n,e){if(n&1){let t=N();v(0,"div",17)(1,"div",20)(2,"span",21),l(3),g(),v(4,"button",22),B("click",function(){x(t);let r=m(2);return D(r.clearFile())}),v(5,"span",14),l(6,"close"),g()()(),v(7,"button",23),B("click",function(){x(t);let r=m(2);return D(r.importData())}),v(8,"span",14),l(9,"check"),g(),l(10," Confirm Import "),g()()}if(n&2){let t,i=m(2);p(3),k((t=i.selectedFile())==null?null:t.name),p(4),_e("disabled",i.importing())}}function HI(n,e){if(n&1){let t=N();v(0,"div",1)(1,"div",3)(2,"h3",4)(3,"span",5),l(4,"sync_alt"),g(),l(5," Data Import & Export "),g(),v(6,"p",6),l(7," Backup your family data or restore from a previous export "),g()(),v(8,"div",7)(9,"div",8)(10,"div",9)(11,"span",10),l(12,"file_download"),g(),v(13,"div",11)(14,"h4"),l(15,"Export Data"),g(),v(16,"p",12),l(17," Download all your family data as a JSON file "),g(),v(18,"button",13),B("click",function(){x(t);let r=m();return D(r.exportData())}),C(19,VI,2,0,"span",14)(20,jI,2,0,"span",14),l(21),g()()()(),v(22,"div",8)(23,"div",9)(24,"span",10),l(25,"file_upload"),g(),v(26,"div",11)(27,"h4"),l(28,"Import Data"),g(),v(29,"p",12),l(30," Restore data from a previously exported JSON file "),g(),v(31,"input",15,0),B("change",function(r){x(t);let o=m();return D(o.onFileSelected(r))}),g(),v(33,"button",16),B("click",function(){x(t);let r=Jf(32);return D(r.click())}),C(34,BI,2,0,"span",14)(35,UI,2,0,"span",14),l(36),g(),C(37,$I,11,2,"div",17),g()()()(),v(38,"div",18)(39,"div",9)(40,"span",19),l(41,"warning"),g(),v(42,"div")(43,"strong"),l(44,"Important:"),g(),l(45," Importing data will replace all existing data. Make sure to export your current data before importing. "),g()()()()}if(n&2){let t=m();p(18),_e("disabled",t.exporting()),p(),b(t.exporting()?19:20),p(2),T(" ",t.exporting()?"Exporting...":"Export Data"," "),p(12),_e("disabled",t.importing()),p(),b(t.importing()?34:35),p(2),T(" ",t.importing()?"Importing...":"Select File"," "),p(),b(t.selectedFile()?37:-1)}}function zI(n,e){n&1&&(v(0,"div",2)(1,"p",24),l(2,"Admin access required to import/export data."),g()())}var td=class n{httpApi=_(vt);toast=_(et);authService=_(Le);isAdmin=j(!1);exporting=E(!1);importing=E(!1);selectedFile=E(null);exportData(){this.exporting.set(!0),this.httpApi.get("export").subscribe({next:e=>{let t=e.data??e,i=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=window.URL.createObjectURL(i),o=document.createElement("a");o.href=r,o.download=`thalemarina-backup-${new Date().toISOString().split("T")[0]}.json`,o.click(),window.URL.revokeObjectURL(r),this.toast.success("Data exported successfully"),this.exporting.set(!1)},error:e=>{this.toast.error(e.message||"Failed to export data"),this.exporting.set(!1)}})}onFileSelected(e){let i=e.target.files?.[0];if(!i)return;if(!i.type.includes("json")){this.toast.error("Please select a valid JSON file");return}let r=10*1024*1024;if(i.size>r){this.toast.error("File size exceeds 10MB limit");return}this.selectedFile.set(i)}importData(){let e=this.selectedFile();if(!e)return;this.importing.set(!0);let t=new FileReader;t.onload=i=>{try{let r=JSON.parse(i.target?.result);this.httpApi.post("import",r).subscribe({next:()=>{this.toast.success("Data imported successfully. Reloading..."),this.importing.set(!1),this.clearFile(),setTimeout(()=>{window.location.reload()},1500)},error:o=>{this.toast.error(o.message||"Failed to import data"),this.importing.set(!1)}})}catch{this.toast.error("Invalid JSON file format"),this.importing.set(!1)}},t.onerror=()=>{this.toast.error("Failed to read file"),this.importing.set(!1)},t.readAsText(e)}clearFile(){this.selectedFile.set(null)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-data-import-export"]],inputs:{isAdmin:[1,"isAdmin"]},decls:2,vars:1,consts:[["fileInput",""],[1,"data-manager","card"],[1,"card"],[1,"card-header"],[1,"flex","items-center","gap-2"],[1,"material-icons"],[1,"text-muted","text-sm"],[1,"data-actions","grid","grid-2","gap-4"],[1,"action-card","card"],[1,"flex","items-start","gap-3"],[1,"material-icons","icon-lg",2,"color","var(--accent)"],[1,"flex-1"],[1,"text-muted","text-sm","mb-4"],[1,"btn","btn-primary",3,"click","disabled"],[1,"material-icons","icon-sm"],["type","file","accept",".json,application/json",2,"display","none",3,"change"],[1,"btn","btn-outline",3,"click","disabled"],[1,"selected-file","mt-3","p-3",2,"background","var(--bg-muted)","border-radius","var(--r-md)"],[1,"warning-notice","mt-4","p-4",2,"background","var(--accent-soft)","border-left","3px solid var(--accent)","border-radius","var(--r-md)"],[1,"material-icons",2,"color","var(--accent)"],[1,"flex","items-center","justify-between"],[1,"text-sm"],["aria-label","Clear file",1,"btn-icon",3,"click"],[1,"btn","btn-primary","mt-2",3,"click","disabled"],[1,"text-muted","text-center","p-6"]],template:function(t,i){t&1&&C(0,HI,46,7,"div",1)(1,zI,3,0,"div",2),t&2&&b(i.isAdmin()?0:1)},dependencies:[fc],styles:[".data-manager[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 var(--s-2) 0;font-size:1.5rem}.card-header[_ngcontent-%COMP%]{margin-bottom:var(--s-6)}.action-card[_ngcontent-%COMP%]{padding:var(--s-5);border:1px solid var(--border-color);transition:all .2s}.action-card[_ngcontent-%COMP%]:hover{border-color:var(--accent);box-shadow:var(--shadow-md)}.action-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 var(--s-2) 0;font-size:1.1rem;color:var(--text-primary)}.btn-icon[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:var(--s-1);display:flex;align-items:center;justify-content:center;border-radius:var(--r-sm);color:var(--text-muted);transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:var(--bg-card);color:var(--text-primary)}@media(max-width:768px){.data-actions[_ngcontent-%COMP%]{grid-template-columns:1fr}}"],changeDetection:0})};var GI=n=>["/people",n],WI=(n,e)=>e.id;function qI(n,e){n&1&&(u(0,"a",21)(1,"span",15),l(2,"person_add"),d(),u(3,"span",16),l(4,"Add Family Member"),d(),u(5,"span",17),l(6,"Add someone to your tree"),d()(),u(7,"a",22)(8,"span",15),l(9,"edit_note"),d(),u(10,"span",16),l(11,"Write a Story"),d(),u(12,"span",17),l(13,"Share a family memory"),d()(),u(14,"a",23)(15,"span",15),l(16,"add_photo_alternate"),d(),u(17,"span",16),l(18,"Add Photos"),d(),u(19,"span",17),l(20,"Upload family photos"),d()())}function YI(n,e){n&1&&(u(0,"span",34),l(1,"Deceased"),d())}function QI(n,e){if(n&1&&l(0),n&2){let t=m().$implicit,i=m(2);T(" Born ",i.formatYear(t.birthDate)," ")}}function ZI(n,e){n&1&&l(0," Family member ")}function KI(n,e){if(n&1&&(u(0,"a",28)(1,"div",29)(2,"span",30),l(3),d()(),u(4,"div",31)(5,"span",32),l(6),d(),u(7,"span",33),C(8,YI,2,0,"span",34)(9,QI,1,1)(10,ZI,1,0),d()(),u(11,"span",35),l(12,"chevron_right"),d()()),n&2){let t=e.$implicit,i=m(2);H("routerLink",Tn(5,GI,t.id)),p(3),k(i.getInitials(t)),p(3),Fe("",t.firstName," ",t.lastName),p(2),b(t.isDeceased?8:t.birthDate?9:10)}}function XI(n,e){if(n&1&&(u(0,"div",11)(1,"div",24)(2,"h2",25),l(3,"Recent Family Members"),d(),u(4,"a",26),l(5,"View All"),d()(),u(6,"div",27),K(7,KI,13,7,"a",28,WI),d()()),n&2){let t=m();p(7),X(t.recentPeople())}}function JI(n,e){n&1&&(u(0,"a",38)(1,"span",6),l(2,"person_add"),d(),l(3," Add Your First Family Member "),d())}function eP(n,e){n&1&&(u(0,"p",37),l(1,"Sign in as admin to add family members."),d())}function tP(n,e){if(n&1&&(u(0,"div",18)(1,"span",36),l(2,"family_restroom"),d(),u(3,"h2"),l(4,"Start Building Your Family Tree"),d(),u(5,"p",37),l(6,"Begin by adding your first family member to create your family tree."),d(),C(7,JI,4,0,"a",38)(8,eP,2,0,"p",37),d()),n&2){let t=m();p(7),b(t.isAdmin()?7:8)}}var nd=class n{personService=_(Se);relationshipService=_(Rn);mediaService=_(be);timelineService=_(Fn);storiesService=_(Xt);authService=_(Le);isAdmin=this.authService.isAdmin;totalPeople=S(()=>this.personService.people().length);livingPeople=S(()=>this.personService.livingPeople().length);deceasedPeople=S(()=>this.personService.deceasedPeople().length);totalRelationships=S(()=>this.relationshipService.relationships().length);totalMedia=S(()=>this.mediaService.media().length);totalEvents=S(()=>this.timelineService.allEvents().length);totalStories=S(()=>this.storiesService.allStories().length);recentPeople=S(()=>this.personService.people().slice(-5).reverse());getInitials(e){return`${e.firstName.charAt(0)}${e.lastName.charAt(0)}`.toUpperCase()}formatYear(e){return e?(typeof e=="string"?new Date(e):e).getFullYear().toString():""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-dashboard"]],decls:67,vars:10,consts:[[1,"container"],[1,"dashboard-hero","mb-8"],[1,"text-muted","text-lg"],[1,"stats-grid","mb-8"],[1,"stat-card"],[1,"stat-icon"],[1,"material-icons"],[1,"stat-content"],[1,"stat-number"],[1,"stat-label"],[1,"stat-detail"],[1,"section","mb-8"],[1,"section-title"],[1,"quick-actions-grid"],["routerLink","/family-tree",1,"action-card"],[1,"material-icons","action-icon"],[1,"action-title"],[1,"action-desc"],[1,"getting-started-card"],[1,"section","mt-8"],[3,"isAdmin"],["routerLink","/people/add",1,"action-card","action-primary"],["routerLink","/stories/new",1,"action-card"],["routerLink","/media",1,"action-card"],[1,"flex","items-center","justify-between","mb-4"],[1,"section-title","m-0"],["routerLink","/people",1,"btn","btn-outline","btn-sm"],[1,"recent-people-grid"],[1,"person-card-mini",3,"routerLink"],[1,"person-avatar"],[1,"person-initials"],[1,"person-info"],[1,"person-name"],[1,"person-meta"],[1,"deceased-badge"],[1,"material-icons","person-arrow"],[1,"material-icons","getting-started-icon"],[1,"text-muted"],["routerLink","/people/add",1,"btn","btn-primary","btn-lg"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"h1"),l(3,"Welcome to ThaleMarina Siri"),d(),u(4,"p",2),l(5,"Your family tree and stories, all in one place"),d()(),u(6,"div",3)(7,"div",4)(8,"div",5)(9,"span",6),l(10,"people"),d()(),u(11,"div",7)(12,"span",8),l(13),d(),u(14,"span",9),l(15,"Family Members"),d(),u(16,"span",10),l(17),d()()(),u(18,"div",4)(19,"div",5)(20,"span",6),l(21,"family_restroom"),d()(),u(22,"div",7)(23,"span",8),l(24),d(),u(25,"span",9),l(26,"Relationships"),d(),u(27,"span",10),l(28,"Connecting your family"),d()()(),u(29,"div",4)(30,"div",5)(31,"span",6),l(32,"photo_library"),d()(),u(33,"div",7)(34,"span",8),l(35),d(),u(36,"span",9),l(37,"Photos & Media"),d(),u(38,"span",10),l(39,"Preserving memories"),d()()(),u(40,"div",4)(41,"div",5)(42,"span",6),l(43,"menu_book"),d()(),u(44,"div",7)(45,"span",8),l(46),d(),u(47,"span",9),l(48,"Stories"),d(),u(49,"span",10),l(50,"Family narratives"),d()()()(),u(51,"div",11)(52,"h2",12),l(53,"Quick Actions"),d(),u(54,"div",13)(55,"a",14)(56,"span",15),l(57,"account_tree"),d(),u(58,"span",16),l(59,"View Family Tree"),d(),u(60,"span",17),l(61,"Explore your family connections"),d()(),C(62,qI,21,0),d()(),C(63,XI,9,0,"div",11),C(64,tP,9,1,"div",18),u(65,"div",19),de(66,"app-data-import-export",20),d()()),t&2&&(p(13),k(i.totalPeople()),p(4),Fe("",i.livingPeople()," living \u2022 ",i.deceasedPeople()," deceased"),p(7),k(i.totalRelationships()),p(11),k(i.totalMedia()),p(11),k(i.totalStories()),p(16),b(i.isAdmin()?62:-1),p(),b(i.recentPeople().length>0?63:-1),p(),b(i.totalPeople()===0?64:-1),p(2),H("isAdmin",i.isAdmin()))},dependencies:[Ce,td],styles:[".dashboard-hero[_ngcontent-%COMP%]{text-align:center;padding:var(--s-8) 0}.dashboard-hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:clamp(1.75rem,4vw,2.5rem);margin-bottom:var(--s-2);color:var(--primary)}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--s-4)}@media(min-width:768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}.stat-card[_ngcontent-%COMP%]{background:var(--bg-card);border-radius:var(--r-lg);padding:var(--s-4);box-shadow:var(--shadow-sm);transition:transform .2s ease,box-shadow .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:var(--r-lg);background:var(--primary-lighter);display:flex;align-items:center;justify-content:center;margin-bottom:var(--s-3)}.stat-icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:24px;color:var(--primary)}.stat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-number[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--text-primary);line-height:1.2}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary);font-weight:500}.stat-detail[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted);margin-top:var(--s-1)}.section[_ngcontent-%COMP%]{margin-bottom:var(--s-8)}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:var(--s-4);color:var(--text-primary)}.quick-actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--s-4)}@media(min-width:768px){.quick-actions-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}.action-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;padding:var(--s-6);background:var(--bg-card);border-radius:var(--r-lg);border:1px solid var(--border-color);text-decoration:none;color:inherit;transition:all .2s ease}.action-card[_ngcontent-%COMP%]:hover{border-color:var(--primary);transform:translateY(-2px);box-shadow:var(--shadow-md)}.action-card.action-primary[_ngcontent-%COMP%]{background:var(--primary);border-color:var(--primary);color:#fff}.action-card.action-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.action-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:var(--s-3);color:var(--primary)}.action-primary[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{color:#fff}.action-title[_ngcontent-%COMP%]{font-weight:600;margin-bottom:var(--s-1)}.action-desc[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted)}.action-primary[_ngcontent-%COMP%]   .action-desc[_ngcontent-%COMP%]{color:#fffc}.recent-people-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-2)}.person-card-mini[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-3);padding:var(--s-3) var(--s-4);background:var(--bg-card);border-radius:var(--r-md);border:1px solid var(--border-color);text-decoration:none;color:inherit;transition:all .2s ease}.person-card-mini[_ngcontent-%COMP%]:hover{border-color:var(--primary);background:var(--bg-muted)}.person-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:var(--r-full);background:var(--primary-lighter);display:flex;align-items:center;justify-content:center;flex-shrink:0}.person-initials[_ngcontent-%COMP%]{font-weight:600;color:var(--primary);font-size:.875rem}.person-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.person-name[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary)}.person-meta[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted)}.deceased-badge[_ngcontent-%COMP%]{color:var(--text-muted);font-style:italic}.person-arrow[_ngcontent-%COMP%]{color:var(--text-muted)}.getting-started-card[_ngcontent-%COMP%]{text-align:center;padding:var(--s-12) var(--s-6);background:var(--bg-card);border-radius:var(--r-xl);border:2px dashed var(--border-color)}.getting-started-icon[_ngcontent-%COMP%]{font-size:4rem;color:var(--primary-lighter);margin-bottom:var(--s-4)}.getting-started-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:var(--s-2)}.getting-started-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:400px;margin:0 auto var(--s-6)}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--s-2);padding:var(--s-3) var(--s-5);border-radius:var(--r-md);font-weight:500;text-decoration:none;cursor:pointer;border:none;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.btn-outline[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border-color);color:var(--text-secondary)}.btn-outline[_ngcontent-%COMP%]:hover{border-color:var(--primary);color:var(--primary)}.btn-sm[_ngcontent-%COMP%]{padding:var(--s-2) var(--s-3);font-size:.875rem}.btn-lg[_ngcontent-%COMP%]{padding:var(--s-4) var(--s-6);font-size:1rem}.mb-8[_ngcontent-%COMP%]{margin-bottom:var(--s-8)}.mb-4[_ngcontent-%COMP%]{margin-bottom:var(--s-4)}.m-0[_ngcontent-%COMP%]{margin:0}"],changeDetection:0})};function Lt(n,e="full"){let{firstName:t,middleName:i,lastName:r,maidenName:o,prefix:s,suffix:a}=n;switch(e){case"formal":return[s,t,i,r,a].filter(Boolean).join(" ");case"short":return`${t} ${r}`;default:let c=[t,i,r].filter(Boolean).join(" ");return o?`${c} (n\xE9e ${o})`:c}}function mC(n,e){if(!n)return null;let t=typeof n=="string"?new Date(n):n,i=e?typeof e=="string"?new Date(e):e:new Date,r=i.getFullYear()-t.getFullYear(),o=i.getMonth()-t.getMonth();return o<0||o===0&&i.getDate()<t.getDate()?r-1:r}function id(n){let e=n,t=e.birthDate?new Date(e.birthDate).getFullYear():null,i=e.deathDate?new Date(e.deathDate).getFullYear():null;if(t&&i){let r=e.birthDateIsApproximate?"c.":"",o=e.deathDateIsApproximate?"c.":"";return`${r}${t}\u2013${o}${i}`}return t?`b. ${e.birthDateIsApproximate?"c.":""}${t}`:i?`d. ${e.deathDateIsApproximate?"c.":""}${i}`:""}function nP(n,e){n&1&&(v(0,"div",1)(1,"span",3),l(2,"sync"),g(),v(3,"p"),l(4,"Loading family tree..."),g()())}function iP(n,e){n&1&&(v(0,"div",2)(1,"span",4),l(2,"family_restroom"),g(),v(3,"h3"),l(4,"No Family Members"),g(),v(5,"p",5),l(6,"Add people and relationships to build your family tree."),g()())}function rP(n,e){if(n&1&&(Mn(),ue(0,"path",16)),n&2){let t=e.$implicit,i=m(2);z("parent-child",t.type==="parent-child")("spouse",t.type==="spouse")("highlighted",i.isConnectionHighlighted(t)),te("d",i.getConnectionPath(t))}}function oP(n,e){if(n&1&&(Mn(),v(0,"clipPath"),ue(1,"circle",25),g(),ue(2,"image",26)(3,"circle",27)),n&2){let t=m().$implicit;te("id","clip-"+t.person.id),p(2),te("href",e)("clip-path","url(#clip-"+t.person.id+")")}}function sP(n,e){if(n&1&&(Mn(),ue(0,"circle",28),v(1,"text",29),l(2),g()),n&2){let t=m().$implicit,i=m(2);p(2),k(i.getInitials(t.person))}}function aP(n,e){if(n&1&&l(0),n&2){let t=m().$implicit;T(" ",t.person.gender," ")}}function lP(n,e){n&1&&l(0," \xB7 ")}function cP(n,e){if(n&1&&(C(0,lP,1,0),l(1)),n&2){let t=m().$implicit;b(t.person.gender?0:-1),p(),T(" ",e,"y ")}}function dP(n,e){if(n&1&&(Mn(),v(0,"text",23)(1,"title"),l(2),g(),l(3),g()),n&2){let t=m().$implicit;p(2),k(t.person.occupation),p(),T(" ",t.person.occupation," ")}}function uP(n,e){n&1&&(Mn(),ue(0,"circle",24))}function pP(n,e){if(n&1){let t=N();Mn(),v(0,"g",17),B("click",function(){let r=x(t).$implicit,o=m(2);return D(o.onNodeClick(r.person.id))})("mouseenter",function(){let r=x(t).$implicit,o=m(2);return D(o.onNodeHover(r.person.id))})("mouseleave",function(){x(t);let r=m(2);return D(r.onNodeHover(null))}),ue(1,"rect",18),C(2,oP,4,3)(3,sP,3,1),v(4,"defs")(5,"clipPath"),ue(6,"rect",19),g()(),v(7,"g")(8,"text",20)(9,"title"),l(10),g(),l(11),g(),v(12,"text",21),C(13,aP,1,1),C(14,cP,2,2),g(),v(15,"text",22),l(16),g(),C(17,dP,4,2,":svg:text",23),g(),C(18,uP,1,0,":svg:circle",24),g()}if(n&2){let t,i,r=e.$implicit,o=m(2);z("selected",o.isSelected(r.person.id))("focused",o.isFocused(r.person.id))("hovered",o.isHovered(r.person.id))("deceased",r.person.isDeceased),te("transform","translate("+(r.x-90)+","+(r.y-55)+")")("aria-label",o.getDisplayName(r.person)),p(2),b((t=o.getPhotoUrl(r.person))?2:3,t),p(3),te("id","text-clip-"+r.person.id),p(2),te("clip-path","url(#text-clip-"+r.person.id+")"),p(3),k(o.getDisplayName(r.person)),p(),T(" ",o.getDisplayName(r.person)," "),p(2),b(r.person.gender?13:-1),p(),b((i=o.getAge(r.person))?14:-1,i),p(2),k(o.getLifespan(r.person)),p(),b(r.person.occupation?17:-1),p(),b(r.person.isDeceased?18:-1)}}function fP(n,e){if(n&1&&(Mn(),v(0,"svg",6)(1,"g",7),K(2,rP,1,7,":svg:path",8,tc().trackByConnection,!0),g(),v(4,"g",9),K(5,pP,19,20,":svg:g",10,tc().trackByNode,!0),g()(),al(),v(7,"div",11)(8,"div",12),ue(9,"span",13),v(10,"span"),l(11,"Parent-Child"),g()(),v(12,"div",12),ue(13,"span",14),v(14,"span"),l(15,"Spouse"),g()(),v(16,"div",12),ue(17,"span",15),v(18,"span"),l(19,"Deceased"),g()()()),n&2){let t=m();te("viewBox",t.viewBox()),p(2),X(t.connections()),p(3),X(t.treeNodes())}}var rd=class n{router=_(Me);mediaService=_(be);people=j.required();relationships=j([]);focusPersonId=j(null);selectedPersonId=j(null);isLoading=j(!1);personSelected=G();viewProfile=G();NODE_WIDTH=180;NODE_HEIGHT=110;HORIZONTAL_GAP=80;VERTICAL_GAP=140;hoveredPersonId=E(null);relationshipMap=new Map;treeNodes=S(()=>{let e=this.people(),t=this.relationships();if(e.length===0)return[];let i=new Map,r=new Map,o=new Map,s=(O,R,ee)=>{O.has(R)||O.set(R,[]),O.get(R).includes(ee)||O.get(R).push(ee)};t.forEach(O=>{this.relationshipMap.set(`${O.fromPersonId}-${O.toPersonId}`,O.type),this.isParentType(O.type)||this.isChildType(O.type)?(s(r,O.fromPersonId,O.toPersonId),s(i,O.toPersonId,O.fromPersonId)):this.isSpouseType(O.type)&&(s(o,O.fromPersonId,O.toPersonId),s(o,O.toPersonId,O.fromPersonId))});let a=new Map,c=this.focusPersonId(),f=e.find(O=>O.id===c);f||(f=e.reduce((O,R)=>{let ee=O.birthDate?new Date(O.birthDate).getFullYear():1/0;return(R.birthDate?new Date(R.birthDate).getFullYear():1/0)<ee?R:O}));let h=new Set,y=[{id:f.id,level:0}];for(h.add(f.id),a.set(f.id,0);y.length>0;){let{id:O,level:R}=y.shift();(i.get(O)||[]).forEach(ee=>{h.has(ee)||(h.add(ee),a.set(ee,R-1),y.push({id:ee,level:R-1}))}),(r.get(O)||[]).forEach(ee=>{h.has(ee)||(h.add(ee),a.set(ee,R+1),y.push({id:ee,level:R+1}))}),(o.get(O)||[]).forEach(ee=>{h.has(ee)||(h.add(ee),a.set(ee,R),y.push({id:ee,level:R}))})}e.forEach(O=>{a.has(O.id)||a.set(O.id,0)});let M=new Map;e.forEach(O=>{let R=a.get(O.id)||0;M.has(R)||M.set(R,[]),M.get(R).push(O)});let w=Array.from(M.keys()).sort((O,R)=>O-R),A=w[0]||0,L=[];return w.forEach(O=>{let R=M.get(O),ee=O-A,tt=ee*(this.NODE_HEIGHT+this.VERTICAL_GAP)+60,_n=-(R.length*this.NODE_WIDTH+(R.length-1)*this.HORIZONTAL_GAP)/2;R.forEach((Pt,Jt)=>{let Ri=_n+Jt*(this.NODE_WIDTH+this.HORIZONTAL_GAP)+this.NODE_WIDTH/2;L.push({person:Pt,x:Ri,y:tt,level:ee,parentIds:i.get(Pt.id)||[],childIds:r.get(Pt.id)||[],spouseIds:o.get(Pt.id)||[]})})}),L});connections=S(()=>{let e=this.treeNodes(),t=[],i=new Map(e.map(o=>[o.person.id,o])),r=new Set;return e.forEach(o=>{o.childIds.forEach(s=>{let a=i.get(s);if(a){let c=this.relationshipMap.get(`${o.person.id}-${s}`)||"child",f=this.formatRelationType(c),h=(o.y+this.NODE_HEIGHT/2+a.y-this.NODE_HEIGHT/2)/2;t.push({fromId:o.person.id,toId:s,fromX:o.x,fromY:o.y+this.NODE_HEIGHT/2,toX:a.x,toY:a.y-this.NODE_HEIGHT/2,type:"parent-child",label:f,labelX:o.x+(a.x-o.x)*.5,labelY:h})}}),o.spouseIds.forEach(s=>{let a=[o.person.id,s].sort().join("-");if(!r.has(a)){r.add(a);let c=i.get(s);if(c){let f=this.relationshipMap.get(`${o.person.id}-${s}`)||this.relationshipMap.get(`${s}-${o.person.id}`)||"spouse",h=this.formatRelationType(f),y=(o.x+this.NODE_WIDTH/2+c.x-this.NODE_WIDTH/2)/2;t.push({fromId:o.person.id,toId:s,fromX:o.x+this.NODE_WIDTH/2,fromY:o.y,toX:c.x-this.NODE_WIDTH/2,toY:c.y,type:"spouse",label:h,labelX:y,labelY:o.y-10})}}})}),t});viewBox=S(()=>{let e=this.treeNodes();if(e.length===0)return"0 0 800 400";let t=100,i=Math.min(...e.map(a=>a.x))-this.NODE_WIDTH/2-t,r=Math.max(...e.map(a=>a.x))+this.NODE_WIDTH/2+t,o=Math.min(...e.map(a=>a.y))-this.NODE_HEIGHT/2-t,s=Math.max(...e.map(a=>a.y))+this.NODE_HEIGHT/2+t;return`${i} ${o} ${r-i} ${s-o}`});isParentType(e){return["biological-parent","adopted-parent","step-parent","foster-parent"].includes(e)}isChildType(e){return["biological-child","adopted-child","step-child","foster-child"].includes(e)}isSpouseType(e){return["spouse","partner","ex-spouse"].includes(e)}getDisplayName(e){return Lt(e,"short")}getLifespan(e){if(!e.birthDate)return"";let t=new Date(e.birthDate).getFullYear();if(e.isDeceased&&e.deathDate){let i=new Date(e.deathDate).getFullYear();return`${t} - ${i}`}return`b. ${t}`}getInitials(e){return`${e.firstName.charAt(0)}${e.lastName.charAt(0)}`.toUpperCase()}getPhotoUrl(e){return this.mediaService.getProfilePhotoUrl(e.profilePhotoId)}getAge(e){if(!e.birthDate)return null;let t=e.isDeceased&&e.deathDate?new Date(e.deathDate):new Date,i=new Date(e.birthDate),r=t.getFullYear()-i.getFullYear(),o=t.getMonth()-i.getMonth();return(o<0||o===0&&t.getDate()<i.getDate())&&r--,r}getGenderIcon(e){return e.gender==="male"?"male":e.gender==="female"?"female":"person"}formatRelationType(e){return{"biological-parent":"Parent","biological-child":"Child","adopted-parent":"Adopted","adopted-child":"Adopted","step-parent":"Step","step-child":"Step","foster-parent":"Foster","foster-child":"Foster",spouse:"Married",partner:"Partner","ex-spouse":"Ex-Spouse",sibling:"Sibling",twin:"Twin"}[e]||e.replace(/-/g," ")}getConnectionPath(e){if(e.type==="spouse")return`M ${e.fromX} ${e.fromY} L ${e.toX} ${e.toY}`;let t=(e.fromY+e.toY)/2;return`M ${e.fromX} ${e.fromY} 
                C ${e.fromX} ${t}, ${e.toX} ${t}, ${e.toX} ${e.toY}`}onNodeClick(e){this.personSelected.emit(e),this.router.navigate(["/people",e])}onNodeHover(e){this.hoveredPersonId.set(e)}isSelected(e){return this.selectedPersonId()===e}isFocused(e){return this.focusPersonId()===e}isHovered(e){return this.hoveredPersonId()===e}isConnectionHighlighted(e){let t=this.hoveredPersonId();return t!==null&&(e.fromId===t||e.toId===t)}trackByNode(e,t){return t.person.id}trackByConnection(e,t){return`${t.fromId}-${t.toId}`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-family-tree"]],inputs:{people:[1,"people"],relationships:[1,"relationships"],focusPersonId:[1,"focusPersonId"],selectedPersonId:[1,"selectedPersonId"],isLoading:[1,"isLoading"]},outputs:{personSelected:"personSelected",viewProfile:"viewProfile"},decls:4,vars:1,consts:[[1,"tree-container"],[1,"tree-loading"],[1,"tree-empty"],[1,"material-icons","icon-lg","spinning"],[1,"material-icons","icon-xl"],[1,"text-muted"],["preserveAspectRatio","xMidYMid meet","aria-label","Family tree diagram",1,"tree-svg"],[1,"connections"],["fill","none",3,"parent-child","spouse","highlighted"],[1,"nodes"],["tabindex","0","role","button",1,"tree-node",3,"selected","focused","hovered","deceased"],[1,"tree-legend"],[1,"legend-item"],[1,"legend-line","parent-child"],[1,"legend-line","spouse"],[1,"legend-dot","deceased"],["fill","none"],["tabindex","0","role","button",1,"tree-node",3,"click","mouseenter","mouseleave"],["width","180","height","110","rx","8","ry","8",1,"node-bg"],["x","72","y","20","width","100","height","75"],["x","75","y","35","dominant-baseline","middle",1,"person-name"],["x","75","y","52","dominant-baseline","middle",1,"person-detail"],["x","75","y","68","dominant-baseline","middle",1,"person-lifespan"],["x","75","y","84","dominant-baseline","middle",1,"person-occupation"],["cx","170","cy","100","r","6",1,"deceased-indicator"],["cx","35","cy","55","r","28"],["x","7","y","27","width","56","height","56","preserveAspectRatio","xMidYMid slice"],["cx","35","cy","55","r","28","fill","none",1,"avatar-border"],["cx","35","cy","55","r","28",1,"avatar-circle"],["x","35","y","61","text-anchor","middle",1,"initials"]],template:function(t,i){t&1&&(v(0,"div",0),C(1,nP,5,0,"div",1)(2,iP,7,0,"div",2)(3,fP,20,1),g()),t&2&&(p(),b(i.isLoading()?1:i.treeNodes().length===0?2:3))},styles:[".tree-container[_ngcontent-%COMP%]{min-height:400px;background:var(--bg-card);border-radius:var(--r-lg);border:1px solid var(--border-color);overflow:hidden;position:relative}.tree-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--s-16);color:var(--text-muted)}.tree-loading[_ngcontent-%COMP%]   .spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.tree-empty[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--s-16);text-align:center;color:var(--text-muted)}.tree-empty[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--accent);margin-bottom:var(--s-4)}.tree-empty[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 var(--s-2);color:var(--text-primary)}.tree-svg[_ngcontent-%COMP%]{width:100%;height:100%;min-height:450px;display:block}.connections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke-width:2;transition:stroke .2s ease,stroke-width .2s ease}.connections[_ngcontent-%COMP%]   path.parent-child[_ngcontent-%COMP%]{stroke:var(--accent);stroke-opacity:.6}.connections[_ngcontent-%COMP%]   path.spouse[_ngcontent-%COMP%]{stroke:var(--text-muted);stroke-opacity:.5;stroke-dasharray:6 4}.connections[_ngcontent-%COMP%]   path.highlighted[_ngcontent-%COMP%]{stroke-width:3;stroke-opacity:1}.tree-node[_ngcontent-%COMP%]{cursor:pointer;transition:transform .15s ease}.tree-node[_ngcontent-%COMP%]:focus{outline:none}.tree-node[_ngcontent-%COMP%]:focus   .node-bg[_ngcontent-%COMP%]{stroke:var(--accent);stroke-width:3}.node-bg[_ngcontent-%COMP%]{fill:var(--bg-card);stroke:var(--border-color);stroke-width:1.5;transition:all .2s ease;filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}.tree-node[_ngcontent-%COMP%]:hover   .node-bg[_ngcontent-%COMP%], .tree-node.hovered[_ngcontent-%COMP%]   .node-bg[_ngcontent-%COMP%]{fill:var(--bg-muted);stroke:var(--accent);stroke-width:2;filter:drop-shadow(0 4px 8px rgba(0,0,0,.15));transform:scale(1.02)}.tree-node.selected[_ngcontent-%COMP%]   .node-bg[_ngcontent-%COMP%]{stroke:var(--accent);stroke-width:2.5;fill:var(--accent-soft);filter:drop-shadow(0 4px 12px rgba(0,0,0,.2))}.tree-node.focused[_ngcontent-%COMP%]   .node-bg[_ngcontent-%COMP%]{stroke:var(--accent);stroke-width:3;filter:drop-shadow(0 6px 16px rgba(0,0,0,.25))}.tree-node.deceased[_ngcontent-%COMP%]   .node-bg[_ngcontent-%COMP%]{fill:var(--bg-muted);opacity:.85}.avatar-circle[_ngcontent-%COMP%]{fill:var(--accent-soft);stroke:var(--accent);stroke-width:2}.avatar-border[_ngcontent-%COMP%]{stroke:var(--accent);stroke-width:2}.initials[_ngcontent-%COMP%]{fill:var(--accent);font-size:14px;font-weight:600;font-family:inherit}.person-name[_ngcontent-%COMP%]{fill:var(--text-primary);font-size:13px;font-weight:600;font-family:inherit}.person-detail[_ngcontent-%COMP%]{fill:var(--text-secondary);font-size:10px;font-family:inherit;text-transform:capitalize}.person-lifespan[_ngcontent-%COMP%]{fill:var(--text-muted);font-size:10px;font-family:inherit}.person-occupation[_ngcontent-%COMP%]{fill:var(--text-muted);font-size:9px;font-family:inherit;font-style:italic}.deceased-indicator[_ngcontent-%COMP%]{fill:var(--text-muted)}.tree-legend[_ngcontent-%COMP%]{display:flex;gap:var(--s-6);justify-content:center;padding:var(--s-4);background:var(--bg-muted);border-top:1px solid var(--border-color)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);font-size:.85rem;color:var(--text-muted)}.legend-line[_ngcontent-%COMP%]{width:24px;height:3px;border-radius:2px}.legend-line.parent-child[_ngcontent-%COMP%]{background:var(--accent);opacity:.6}.legend-line.spouse[_ngcontent-%COMP%]{background:repeating-linear-gradient(90deg,var(--text-muted) 0,var(--text-muted) 6px,transparent 6px,transparent 10px);opacity:.5}.legend-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.legend-dot.deceased[_ngcontent-%COMP%]{background:var(--text-muted)}@media(max-width:767px){.tree-svg[_ngcontent-%COMP%]{min-height:350px}.tree-legend[_ngcontent-%COMP%]{flex-wrap:wrap;gap:var(--s-4)}}"],changeDetection:0})};function mP(n,e){n&1&&(u(0,"a",6)(1,"span",5),l(2,"person_add"),d(),l(3," Add Person "),d())}function hP(n,e){n&1&&(u(0,"div",7)(1,"span",10),l(2,"sync"),d(),u(3,"p"),l(4,"Loading family tree..."),d()())}function gP(n,e){n&1&&(u(0,"div",12)(1,"a",14)(2,"span",5),l(3,"person_add"),d(),l(4," Add First Person "),d()())}function vP(n,e){n&1&&(u(0,"p",13),l(1,"Sign in as admin to add family members."),d())}function yP(n,e){if(n&1&&(u(0,"div",8)(1,"span",11),l(2,"account_tree"),d(),u(3,"h2"),l(4,"Start Your Family Tree"),d(),u(5,"p",2),l(6,"Add your first family members to begin building your tree."),d(),C(7,gP,5,0,"div",12)(8,vP,2,0,"p",13),d()),n&2){let t=m();p(7),b(t.isAdmin()?7:8)}}function _P(n,e){if(n&1){let t=N();u(0,"div",15)(1,"span",5),l(2,"info"),d(),u(3,"div",16)(4,"strong"),l(5,"No Relationships Yet"),d(),u(6,"p",17),l(7),u(8,"a",18),l(9,"Create relationships"),d(),l(10," to see your family tree structure."),d()()(),u(11,"app-family-tree",19),I("personSelected",function(r){x(t);let o=m();return D(o.onPersonSelected(r))})("viewProfile",function(r){x(t);let o=m();return D(o.onViewProfile(r))}),d()}if(n&2){let t=m();p(7),T("You have ",t.people().length," people but no relationships defined. "),p(4),H("people",t.people())("relationships",t.relationships())}}function CP(n,e){if(n&1){let t=N();u(0,"app-family-tree",20),I("personSelected",function(r){x(t);let o=m();return D(o.onPersonSelected(r))})("viewProfile",function(r){x(t);let o=m();return D(o.onViewProfile(r))}),d()}if(n&2){let t=m();H("people",t.people())("relationships",t.relationships())("focusPersonId",t.focusPersonId())("selectedPersonId",t.selectedPersonId())}}var od=class n{personService=_(Se);relationshipService=_(Rn);authService=_(Le);router=_(Me);isAdmin=this.authService.isAdmin;focusPersonId=E(null);selectedPersonId=E(null);isLoading=S(()=>this.personService.loading());people=S(()=>this.personService.people());relationships=S(()=>this.relationshipService.relationships());treeStats=S(()=>{let e=this.people().length,t=this.relationships().length;return e===0?"No family members yet":`${e} people \u2022 ${t} relationships`});onPersonSelected(e){this.selectedPersonId.set(e),this.focusPersonId.set(e)}onViewProfile(e){this.router.navigate(["/people",e])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-family-tree-page"]],decls:17,vars:3,consts:[[1,"container"],[1,"page-header","flex","flex-col","md-flex-row","items-start","md-items-center","justify-between","gap-4"],[1,"text-muted"],[1,"flex","items-center","gap-2"],["routerLink","/relationships",1,"btn","btn-outline","flex","items-center","gap-2"],[1,"material-icons"],["routerLink","/people/add",1,"btn","btn-primary","flex","items-center","gap-2"],[1,"loading-state"],[1,"empty-state","card"],[3,"people","relationships","focusPersonId","selectedPersonId"],[1,"material-icons","spin"],[1,"material-icons","icon-xl"],[1,"flex","items-center","justify-center","gap-4","mt-6"],[1,"text-muted","mt-6"],["routerLink","/people/add",1,"btn","btn-primary","btn-lg"],[1,"info-banner","mb-6"],[1,"info-content"],[1,"m-0"],["routerLink","/relationships"],[3,"personSelected","viewProfile","people","relationships"],[3,"personSelected","viewProfile","people","relationships","focusPersonId","selectedPersonId"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Family Tree"),d(),u(5,"p",2),l(6),d()(),u(7,"div",3)(8,"a",4)(9,"span",5),l(10,"link"),d(),l(11," Manage Links "),d(),C(12,mP,4,0,"a",6),d()(),C(13,hP,5,0,"div",7)(14,yP,9,1,"div",8)(15,_P,12,3)(16,CP,1,4,"app-family-tree",9),d()),t&2&&(p(6),k(i.treeStats()),p(6),b(i.isAdmin()?12:-1),p(),b(i.isLoading()?13:i.people().length===0?14:i.relationships().length===0?15:16))},dependencies:[rd,Ce],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:.5rem}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:var(--s-12)}.loading-state[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-muted);margin-bottom:var(--s-4)}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--s-12)}.empty-state[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:4rem;color:var(--primary-lighter);margin-bottom:var(--s-4);display:block}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:var(--s-2)}.info-banner[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:var(--s-3);padding:var(--s-4);background:var(--accent-soft);border:1px solid var(--accent);border-radius:var(--r-md)}.info-banner[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--accent);flex-shrink:0}.info-content[_ngcontent-%COMP%]{flex:1}.info-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:var(--s-1);font-size:.875rem;color:var(--text-secondary)}.btn[_ngcontent-%COMP%]{text-decoration:none;display:inline-flex;align-items:center;gap:var(--s-2);padding:var(--s-3) var(--s-4);cursor:pointer;border:none}.btn-lg[_ngcontent-%COMP%]{padding:var(--s-4) var(--s-6)}.mt-6[_ngcontent-%COMP%]{margin-top:var(--s-6)}.mb-6[_ngcontent-%COMP%]{margin-bottom:var(--s-6)}.m-0[_ngcontent-%COMP%]{margin:0}"],changeDetection:0})};var DC=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(J(Pn),J(Mt))};static \u0275dir=xe({type:n})}return n})(),gd=(()=>{class n extends DC{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Gt(n)))(r||n)}})();static \u0275dir=xe({type:n,features:[at]})}return n})(),fo=new U(""),bP={provide:fo,useExisting:bt(()=>nh),multi:!0},nh=(()=>{class n extends gd{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Gt(n)))(r||n)}})();static \u0275dir=xe({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&I("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Yt([bP]),at]})}return n})(),EP={provide:fo,useExisting:bt(()=>Ln),multi:!0};function xP(){let n=Qt()?Qt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var DP=new U(""),Ln=(()=>{class n extends DC{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!xP())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(J(Pn),J(Mt),J(DP,8))};static \u0275dir=xe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&I("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[Yt([EP]),at]})}return n})();function ih(n){return n==null||rh(n)===0}function rh(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var mo=new U(""),vd=new U(""),wP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,It=class{static min(e){return MP(e)}static max(e){return SP(e)}static required(e){return wC(e)}static requiredTrue(e){return IP(e)}static email(e){return PP(e)}static minLength(e){return TP(e)}static maxLength(e){return MC(e)}static pattern(e){return OP(e)}static nullValidator(e){return ad()}static compose(e){return kC(e)}static composeAsync(e){return NC(e)}};function MP(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function SP(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function wC(n){return ih(n.value)?{required:!0}:null}function IP(n){return n.value===!0?null:{required:!0}}function PP(n){return ih(n.value)||wP.test(n.value)?null:{email:!0}}function TP(n){return e=>{let t=e.value?.length??rh(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function MC(n){return e=>{let t=e.value?.length??rh(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function OP(n){if(!n)return ad;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(ih(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function ad(n){return null}function SC(n){return n!=null}function IC(n){return Ei(n)?Ve(n):n}function PC(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function TC(n,e){return e.map(t=>t(n))}function kP(n){return!n.validate}function OC(n){return n.map(e=>kP(e)?e:t=>e.validate(t))}function kC(n){if(!n)return null;let e=n.filter(SC);return e.length==0?null:function(t){return PC(TC(t,e))}}function oh(n){return n!=null?kC(OC(n)):null}function NC(n){if(!n)return null;let e=n.filter(SC);return e.length==0?null:function(t){let i=TC(t,e).map(IC);return xu(i).pipe(ce(PC))}}function sh(n){return n!=null?NC(OC(n)):null}function hC(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function AC(n){return n._rawValidators}function RC(n){return n._rawAsyncValidators}function Jm(n){return n?Array.isArray(n)?n:[n]:[]}function ld(n,e){return Array.isArray(n)?n.includes(e):n===e}function gC(n,e){let t=Jm(e);return Jm(n).forEach(r=>{ld(t,r)||t.push(r)}),t}function vC(n,e){return Jm(e).filter(t=>!ld(n,t))}var cd=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=oh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},oi=class extends cd{name;get formDirective(){return null}get path(){return null}},yr=class extends cd{_parent=null;name=null;valueAccessor=null},dd=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Ni=(()=>{class n extends dd{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(J(yr,2))};static \u0275dir=xe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&z("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[at]})}return n})(),ho=(()=>{class n extends dd{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(J(oi,10))};static \u0275dir=xe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&z("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[at]})}return n})();var Ws="VALID",sd="INVALID",lo="PENDING",qs="DISABLED",ki=class{},ud=class extends ki{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Qs=class extends ki{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Zs=class extends ki{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},co=class extends ki{status;source;constructor(e,t){super(),this.status=e,this.source=t}},pd=class extends ki{source;constructor(e){super(),this.source=e}},Xs=class extends ki{source;constructor(e){super(),this.source=e}};function ah(n){return(yd(n)?n.validators:n)||null}function NP(n){return Array.isArray(n)?oh(n):n||null}function lh(n,e){return(yd(e)?e.asyncValidators:n)||null}function AP(n){return Array.isArray(n)?sh(n):n||null}function yd(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function FC(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new V(1e3,"");if(!i[t])throw new V(1001,"")}function LC(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new V(1002,"")})}var uo=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Re(this.statusReactive)}set status(e){Re(()=>this.statusReactive.set(e))}_status=S(()=>this.statusReactive());statusReactive=E(void 0);get valid(){return this.status===Ws}get invalid(){return this.status===sd}get pending(){return this.status==lo}get disabled(){return this.status===qs}get enabled(){return this.status!==qs}errors;get pristine(){return Re(this.pristineReactive)}set pristine(e){Re(()=>this.pristineReactive.set(e))}_pristine=S(()=>this.pristineReactive());pristineReactive=E(!0);get dirty(){return!this.pristine}get touched(){return Re(this.touchedReactive)}set touched(e){Re(()=>this.touchedReactive.set(e))}_touched=S(()=>this.touchedReactive());touchedReactive=E(!1);get untouched(){return!this.touched}_events=new ze;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(gC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vC(e,this._rawAsyncValidators))}hasValidator(e){return ld(this._rawValidators,e)}hasAsyncValidator(e){return ld(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(W(P({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Zs(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Zs(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(W(P({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Qs(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Qs(!0,i))}markAsPending(e={}){this.status=lo;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new co(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(W(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=qs,this.errors=null,this._forEachChild(r=>{r.disable(W(P({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ud(this.value,i)),this._events.next(new co(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(W(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ws,this._forEachChild(i=>{i.enable(W(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(W(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ws||this.status===lo)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ud(this.value,t)),this._events.next(new co(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(W(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qs:Ws}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=lo,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=IC(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new co(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Te,this.statusChanges=new Te}_calculateStatus(){return this._allControlsDisabled()?qs:this.errors?sd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lo)?lo:this._anyControlsHaveStatus(sd)?sd:Ws}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Qs(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Zs(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){yd(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=NP(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=AP(this._rawAsyncValidators)}},po=class extends uo{constructor(e,t,i){super(ah(t),lh(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){LC(this,!0,e),Object.keys(e).forEach(i=>{FC(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,W(P({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Xs(this))}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var eh=class extends po{};var Js=new U("",{factory:()=>_d}),_d="always";function VC(n,e){return[...e.path,n]}function fd(n,e,t=_d){ch(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),FP(n,e),VP(n,e),LP(n,e),RP(n,e)}function yC(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),hd(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function md(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function RP(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function ch(n,e){let t=AC(n);e.validator!==null?n.setValidators(hC(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=RC(n);e.asyncValidator!==null?n.setAsyncValidators(hC(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();md(e._rawValidators,r),md(e._rawAsyncValidators,r)}function hd(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=AC(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let r=RC(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}let i=()=>{};return md(e._rawValidators,i),md(e._rawAsyncValidators,i),t}function FP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&jC(n,e)})}function LP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&jC(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function jC(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function VP(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function BC(n,e){n==null,ch(n,e)}function jP(n,e){return hd(n,e)}function UC(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function BP(n){return Object.getPrototypeOf(n.constructor)===gd}function $C(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function HC(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===Ln?t=o:BP(o)?i=o:r=o}),r||i||t||null}function UP(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var $P={provide:oi,useExisting:bt(()=>dh)},Ys=Promise.resolve(),dh=(()=>{class n extends oi{callSetDisabledState;get submitted(){return Re(this.submittedReactive)}_submitted=S(()=>this.submittedReactive());submittedReactive=E(!1);_directives=new Set;form;ngSubmit=new Te;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new po({},oh(t),sh(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ys.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),fd(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ys.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ys.then(()=>{let i=this._findContainer(t.path),r=new po({});BC(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ys.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Ys.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),$C(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new pd(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(J(mo,10),J(vd,10),J(Js,8))};static \u0275dir=xe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&I("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Yt([$P]),at]})}return n})();function _C(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function CC(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Ks=class extends uo{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(ah(t),lh(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yd(t)&&(t.nonNullable||t.initialValueIsDefault)&&(CC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Xs(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_C(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_C(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){CC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var HP=n=>n instanceof Ks;var zP={provide:yr,useExisting:bt(()=>ea)},bC=Promise.resolve(),ea=(()=>{class n extends yr{_changeDetectorRef;callSetDisabledState;control=new Ks;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Te;constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=HC(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),UC(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){fd(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){bC.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&cr(i);bC.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?VC(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(J(oi,9),J(mo,10),J(vd,10),J(fo,10),J(Si,8),J(Js,8))};static \u0275dir=xe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Yt([zP]),at,zt]})}return n})();var go=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=xe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var th=class extends uo{constructor(e,t,i){super(ah(t),lh(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(i=>{this.controls.push(i),this._registerControl(i)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){LC(this,!1,e),e.forEach((i,r)=>{FC(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],W(P({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Xs(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var GP=(()=>{class n extends oi{callSetDisabledState;get submitted(){return Re(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=S(()=>this._submittedReactive());_submittedReactive=E(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(hd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let i=this.form.get(t.path);return fd(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){yC(t.control||null,t,!1),UP(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,i){this.form.get(t.path).setValue(i)}onReset(){this.resetForm()}resetForm(t=void 0,i={}){this.form.reset(t,i),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,$C(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new pd(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(yC(i||null,t),HP(r)&&(fd(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);BC(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&jP(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ch(this.form,this),this._oldForm&&hd(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(i){return new(i||n)(J(mo,10),J(vd,10),J(Js,8))};static \u0275dir=xe({type:n,features:[at,zt]})}return n})();var zC=new U("");var WP={provide:yr,useExisting:bt(()=>ta)},ta=(()=>{class n extends yr{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Te;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=HC(this,o)}ngOnChanges(t){this._added||this._setUpControl(),UC(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return VC(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(J(oi,13),J(mo,10),J(vd,10),J(fo,10),J(zC,8))};static \u0275dir=xe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Yt([WP]),at,zt]})}return n})();var qP={provide:oi,useExisting:bt(()=>na)},na=(()=>{class n extends GP{form=null;ngSubmit=new Te;get control(){return this.form}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Gt(n)))(r||n)}})();static \u0275dir=xe({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&I("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Yt([qP]),at]})}return n})(),YP={provide:fo,useExisting:bt(()=>vo),multi:!0};function GC(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function QP(n){return n.split(":")[0]}var vo=(()=>{class n extends gd{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=_(xi).injector;destroyRef=_(mt);cdr=_(Si);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,ds({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let i=this._getOptionId(t),r=GC(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=QP(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Gt(n)))(r||n)}})();static \u0275dir=xe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&I("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Yt([YP]),at]})}return n})(),Cd=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(GC(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(J(Mt),J(Pn),J(vo,9))};static \u0275dir=xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),ZP={provide:fo,useExisting:bt(()=>WC),multi:!0};function EC(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function KP(n){return n.split(":")[0]}var WC=(()=>{class n extends gd{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],f=this._getOptionValue(c.value);r.push(f)}}else{let s=i.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let f=this._getOptionValue(c.value);r.push(f)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=KP(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Gt(n)))(r||n)}})();static \u0275dir=xe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&I("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Yt([ZP]),at]})}return n})(),bd=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(EC(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(EC(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(J(Mt),J(Pn),J(WC,9))};static \u0275dir=xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function XP(n){return typeof n=="number"?n:parseInt(n,10)}var qC=(()=>{class n{_validator=ad;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):ad,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=xe({type:n,features:[zt]})}return n})();var JP={provide:mo,useExisting:bt(()=>ia),multi:!0};var ia=(()=>{class n extends qC{required;inputName="required";normalizeInput=cr;createValidator=t=>wC;enabled(t){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Gt(n)))(r||n)}})();static \u0275dir=xe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&te("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Yt([JP]),at]})}return n})();var eT={provide:mo,useExisting:bt(()=>uh),multi:!0},uh=(()=>{class n extends qC{maxlength;inputName="maxlength";normalizeInput=t=>XP(t);createValidator=t=>MC(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=Gt(n)))(r||n)}})();static \u0275dir=xe({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&te("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[Yt([eT]),at]})}return n})();var YC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=fn({type:n});static \u0275inj=jt({})}return n})();function xC(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Ed=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,i=null){let r=this._reduceControls(t),o={};return xC(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new po(r,o)}record(t,i=null){let r=this._reduceControls(t);return new eh(r,i)}control(t,i,r){let o={};return this.useNonNullable?(xC(i)?o=i:(o.validators=i,o.asyncValidators=r),new Ks(t,W(P({},o),{nonNullable:!0}))):new Ks(t,i,r)}array(t,i,r){let o=t.map(s=>this._createControl(s));return new th(o,i,r)}_reduceControls(t){let i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){if(t instanceof Ks)return t;if(t instanceof uo)return t;if(Array.isArray(t)){let i=t[0],r=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(i,r,o)}else return this.control(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ai=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Js,useValue:t.callSetDisabledState??_d}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=fn({type:n});static \u0275inj=jt({imports:[YC]})}return n})(),xd=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:zC,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Js,useValue:t.callSetDisabledState??_d}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=fn({type:n});static \u0275inj=jt({imports:[YC]})}return n})();function tT(n,e){n&1&&(v(0,"div",0),ue(1,"div",2),v(2,"div",3),ue(3,"div",4)(4,"div",5),g()())}function nT(n,e){if(n&1&&ue(0,"img",8),n&2){let t=m(2);_e("src",t.photoUrl(),$e)("alt",t.displayName())}}function iT(n,e){if(n&1&&(v(0,"div",9)(1,"span",16),l(2),g()()),n&2){let t=m(2);p(2),k(t.initials())}}function rT(n,e){n&1&&(v(0,"div",10)(1,"span",17),l(2,"star"),g()())}function oT(n,e){n&1&&(v(0,"div",11)(1,"span",18),l(2,"check_circle"),g()())}function sT(n,e){if(n&1&&(v(0,"p",14),l(1),g()),n&2){let t=m(2);p(),k(t.lifespan())}}function aT(n,e){n&1&&(v(0,"span",15)(1,"span",17),l(2,"monument"),g()())}function lT(n,e){if(n&1){let t=N();v(0,"div",6),B("click",function(){x(t);let r=m();return D(r.onCardClick())})("keydown.enter",function(){x(t);let r=m();return D(r.onCardClick())})("keydown.space",function(){x(t);let r=m();return D(r.onCardClick())})("mouseenter",function(){x(t);let r=m();return D(r.onMouseEnter())})("mouseleave",function(){x(t);let r=m();return D(r.onMouseLeave())}),v(1,"div",7),C(2,nT,1,2,"img",8)(3,iT,3,1,"div",9),C(4,rT,3,0,"div",10),C(5,oT,3,0,"div",11),g(),v(6,"div",12)(7,"h4",13),l(8),g(),C(9,sT,2,1,"p",14),C(10,aT,3,0,"span",15),g()()}if(n&2){let t=m();z("card-selected",t.isSelected())("card-focus",t.isFocusPerson())("just-selected",t.justSelected()),te("aria-label","View "+t.displayName()+" details"),p(2),b(t.photoUrl()?2:3),p(2),b(t.isFocusPerson()?4:-1),p(),b(t.isSelected()?5:-1),p(3),k(t.displayName()),p(),b(t.lifespan()?9:-1),p(),b(t.person().isDeceased?10:-1)}}var wd=class n{mediaService=_(be);person=j.required();isSelected=j(!1);isFocusPerson=j(!1);isLoading=j(!1);isHovered=E(!1);justSelected=E(!1);personClicked=G();displayName=S(()=>Lt(this.person(),"short"));lifespan=S(()=>id(this.person()));initials=S(()=>{let e=this.person();return`${e.firstName.charAt(0)}${e.lastName.charAt(0)}`.toUpperCase()});photoUrl=S(()=>{let e=this.person();return this.mediaService.getProfilePhotoUrl(e.profilePhotoId)});onCardClick(){this.justSelected.set(!0),setTimeout(()=>this.justSelected.set(!1),400),this.personClicked.emit(this.person().id)}onMouseEnter(){this.isHovered.set(!0)}onMouseLeave(){this.isHovered.set(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-person-card"]],hostAttrs:[1,"person-card-wrapper"],hostVars:5,hostBindings:function(t,i){t&2&&(te("data-person-id",i.person().id),z("is-selected",i.isSelected())("is-hovered",i.isHovered()))},inputs:{person:[1,"person"],isSelected:[1,"isSelected"],isFocusPerson:[1,"isFocusPerson"],isLoading:[1,"isLoading"]},outputs:{personClicked:"personClicked"},decls:2,vars:1,consts:[[1,"card-skeleton"],["tabindex","0","role","button",1,"person-card",3,"card-selected","card-focus","just-selected"],[1,"skeleton-avatar","shimmer"],[1,"skeleton-info"],[1,"skeleton-name","shimmer"],[1,"skeleton-lifespan","shimmer"],["tabindex","0","role","button",1,"person-card",3,"click","keydown.enter","keydown.space","mouseenter","mouseleave"],[1,"card-photo-container"],[1,"card-photo",3,"src","alt"],[1,"card-avatar"],["title","Focus person",1,"focus-badge"],[1,"selection-indicator"],[1,"card-info"],[1,"card-name"],[1,"card-lifespan"],[1,"card-badge","deceased-badge"],[1,"card-initials"],[1,"material-icons","icon-sm"],[1,"material-icons"]],template:function(t,i){t&1&&C(0,tT,5,0,"div",0)(1,lT,11,13,"div",1),t&2&&b(i.isLoading()?0:1)},styles:['.person-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:var(--s-3);background:var(--bg-card);border:2px solid var(--border-color);border-radius:var(--r-md);cursor:pointer;transition:all .3s ease;position:relative;width:160px;height:220px;min-height:220px}@media(hover:hover)and (pointer:fine){.person-card-wrapper.is-hovered[_ngcontent-%COMP%]   .person-card[_ngcontent-%COMP%]{transform:translateY(-3px);box-shadow:var(--shadow-md);border-color:var(--primary-lighter)}}@media(hover:none){.person-card[_ngcontent-%COMP%]:active{transform:scale(.97);transition:transform .1s}}.person-card[_ngcontent-%COMP%]:focus{outline:2px solid var(--primary);outline-offset:2px}.person-card.card-selected[_ngcontent-%COMP%]{border-color:var(--primary);background:var(--primary-lighter);box-shadow:var(--shadow-md)}.person-card.just-selected[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_selectionPulse .4s cubic-bezier(.34,1.56,.64,1)}@keyframes _ngcontent-%COMP%_selectionPulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.person-card.card-focus[_ngcontent-%COMP%]{border-color:var(--primary);border-width:3px;animation:_ngcontent-%COMP%_focusPulse 2s ease-in-out}@keyframes _ngcontent-%COMP%_focusPulse{0%,to{box-shadow:0 0 0 0 var(--primary)}50%{box-shadow:0 0 0 4px var(--primary-lighter)}}.card-photo-container[_ngcontent-%COMP%]{position:relative;margin-bottom:var(--s-2)}.card-photo[_ngcontent-%COMP%], .card-avatar[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:var(--r-full)}.card-photo[_ngcontent-%COMP%]{object-fit:cover;border:2px solid var(--bg-muted)}.card-avatar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:var(--accent-soft);color:var(--accent)}.card-initials[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600}.selection-indicator[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px;width:28px;height:28px;border-radius:var(--r-full);background:var(--accent);color:#fff;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-md);animation:_ngcontent-%COMP%_checkmarkPop .4s cubic-bezier(.34,1.56,.64,1)}@keyframes _ngcontent-%COMP%_checkmarkPop{0%{transform:scale(0);opacity:0}50%{transform:scale(1.15)}to{transform:scale(1);opacity:1}}.selection-indicator[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px}.skeleton-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:var(--s-3);background:var(--bg-card);border:2px solid var(--border-color);border-radius:var(--r-md);width:160px;height:220px;min-height:220px}.skeleton-avatar[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:var(--r-full);background:var(--bg-muted);margin-bottom:var(--s-2);position:relative;overflow:hidden}.skeleton-avatar[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.1),transparent);animation:_ngcontent-%COMP%_shimmer 1.5s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-100%}to{left:100%}}.skeleton-info[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:var(--s-2);align-items:center}.skeleton-name[_ngcontent-%COMP%]{width:80%;height:16px;background:var(--bg-muted);border-radius:var(--r-sm);position:relative;overflow:hidden}.skeleton-name[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.1),transparent);animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.skeleton-lifespan[_ngcontent-%COMP%]{width:60%;height:12px;background:var(--bg-muted);border-radius:var(--r-sm);position:relative;overflow:hidden}.skeleton-lifespan[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.1),transparent);animation:_ngcontent-%COMP%_shimmer 1.5s infinite .2s}.focus-badge[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px;width:24px;height:24px;border-radius:var(--r-full);background:var(--accent);color:#fff;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-sm);animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.9}}.card-info[_ngcontent-%COMP%]{text-align:center;width:100%}.card-name[_ngcontent-%COMP%]{margin:0 0 var(--s-1) 0;font-size:.9rem;font-weight:600;color:var(--text-primary);line-height:1.3;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.card-lifespan[_ngcontent-%COMP%]{margin:0;font-size:.75rem;color:var(--text-muted)}.card-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--s-1);padding:var(--s-1) var(--s-2);border-radius:var(--r-sm);font-size:.7rem;margin-top:var(--s-1)}.deceased-badge[_ngcontent-%COMP%]{background:var(--bg-muted);color:var(--text-muted)}@media(max-width:767px){.person-card[_ngcontent-%COMP%]{width:140px;height:210px;min-height:210px;padding:var(--s-2)}.card-photo[_ngcontent-%COMP%], .card-avatar[_ngcontent-%COMP%]{width:56px;height:56px}.card-initials[_ngcontent-%COMP%]{font-size:1.25rem}.card-name[_ngcontent-%COMP%]{font-size:.85rem}}@media(prefers-reduced-motion:reduce){.person-card[_ngcontent-%COMP%], .focus-badge[_ngcontent-%COMP%]{animation:none;transition:none}}'],changeDetection:0})};var cT=n=>["/people",n],dT=(n,e)=>e.id;function uT(n,e){n&1&&(u(0,"a",3)(1,"span",14),l(2,"add"),d(),l(3," Add Member "),d())}function pT(n,e){if(n&1){let t=N();u(0,"button",15),I("click",function(){x(t);let r=m();return D(r.clearSearch())}),u(1,"span",14),l(2,"close"),d()()}}function fT(n,e){n&1&&(u(0,"div",11)(1,"span",16),l(2,"sync"),d(),u(3,"p"),l(4,"Loading family members..."),d()())}function mT(n,e){if(n&1&&(u(0,"a",17),de(1,"app-person-card",18),d()),n&2){let t=e.$implicit;H("routerLink",Tn(2,cT,t.id)),p(),H("person",t)}}function hT(n,e){if(n&1&&(u(0,"div",12),K(1,mT,2,4,"a",17,dT),d()),n&2){let t=m();p(),X(t.filteredPeople())}}function gT(n,e){if(n&1){let t=N();u(0,"div",13)(1,"span",19),l(2,"search_off"),d(),u(3,"h3"),l(4,"No Results Found"),d(),u(5,"p",2),l(6,"Try adjusting your search or filter criteria."),d(),u(7,"button",20),I("click",function(){x(t);let r=m();return D(r.clearFilters())}),l(8,"Clear Filters"),d()()}}function vT(n,e){n&1&&(u(0,"a",21)(1,"span",14),l(2,"person_add"),d(),l(3," Add First Member "),d())}function yT(n,e){n&1&&(u(0,"p",2),l(1,"Sign in as admin to add family members."),d())}function _T(n,e){if(n&1&&(u(0,"div",13)(1,"span",19),l(2,"family_restroom"),d(),u(3,"h3"),l(4,"No Family Members Yet"),d(),u(5,"p",2),l(6,"Start building your family tree by adding your first family member."),d(),C(7,vT,4,0,"a",21)(8,yT,2,0,"p",2),d()),n&2){let t=m();p(7),b(t.isAdmin()?7:8)}}var Md=class n{personService=_(Se);authService=_(Le);searchQuery=E("");filterMode=E("all");isLoading=S(()=>this.personService.loading());totalCount=S(()=>this.personService.people().length);isAdmin=this.authService.isAdmin;filteredPeople=S(()=>{let e=this.personService.people(),t=this.filterMode();t==="living"?e=e.filter(r=>!r.isDeceased):t==="deceased"&&(e=e.filter(r=>r.isDeceased));let i=this.searchQuery().toLowerCase().trim();return i&&(e=e.filter(r=>{let o=`${r.firstName} ${r.lastName}`.toLowerCase(),s=r.maidenName?.toLowerCase()||"";return o.includes(i)||s.includes(i)})),e.sort((r,o)=>{let s=r.lastName.localeCompare(o.lastName);return s!==0?s:r.firstName.localeCompare(o.firstName)})});onSearchChange(e){let t=e.target;this.searchQuery.set(t.value)}clearSearch(){this.searchQuery.set("")}setFilter(e){this.filterMode.set(e)}clearFilters(){this.searchQuery.set(""),this.filterMode.set("all")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-people-list-page"]],decls:25,vars:11,consts:[[1,"container"],[1,"page-header","flex","flex-col","md-flex-row","items-start","md-items-center","justify-between","gap-4"],[1,"text-muted"],["routerLink","/people/add",1,"btn","btn-primary","flex","items-center","gap-2"],[1,"search-filter-bar","mb-6"],[1,"search-box"],[1,"material-icons","search-icon"],["type","text","placeholder","Search by name...",1,"search-input",3,"input","value"],[1,"clear-search"],[1,"filter-chips"],[1,"filter-chip",3,"click"],[1,"loading-state"],[1,"people-grid"],[1,"empty-state","card"],[1,"material-icons"],[1,"clear-search",3,"click"],[1,"material-icons","spin"],[1,"card-link",3,"routerLink"],[3,"person"],[1,"material-icons","icon-xl"],[1,"btn","btn-outline",3,"click"],["routerLink","/people/add",1,"btn","btn-primary"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Family Members"),d(),u(5,"p",2),l(6),d()(),C(7,uT,4,0,"a",3),d(),u(8,"div",4)(9,"div",5)(10,"span",6),l(11,"search"),d(),u(12,"input",7),I("input",function(o){return i.onSearchChange(o)}),d(),C(13,pT,3,0,"button",8),d(),u(14,"div",9)(15,"button",10),I("click",function(){return i.setFilter("all")}),l(16," All "),d(),u(17,"button",10),I("click",function(){return i.setFilter("living")}),l(18," Living "),d(),u(19,"button",10),I("click",function(){return i.setFilter("deceased")}),l(20," Deceased "),d()()(),C(21,fT,5,0,"div",11)(22,hT,3,0,"div",12)(23,gT,9,0,"div",13)(24,_T,9,1,"div",13),d()),t&2&&(p(6),T("",i.totalCount()," people in your family tree"),p(),b(i.isAdmin()?7:-1),p(5),H("value",i.searchQuery()),p(),b(i.searchQuery()?13:-1),p(2),z("active",i.filterMode()==="all"),p(2),z("active",i.filterMode()==="living"),p(2),z("active",i.filterMode()==="deceased"),p(2),b(i.isLoading()?21:i.filteredPeople().length>0?22:i.searchQuery()||i.filterMode()!=="all"?23:24))},dependencies:[wd,Ce,Ai],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:.5rem}.search-filter-bar[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-4)}@media(min-width:768px){.search-filter-bar[_ngcontent-%COMP%]{flex-direction:row;align-items:center;justify-content:space-between}}.search-box[_ngcontent-%COMP%]{position:relative;flex:1;max-width:400px}.search-icon[_ngcontent-%COMP%]{position:absolute;left:var(--s-3);top:50%;transform:translateY(-50%);color:var(--text-muted)}.search-input[_ngcontent-%COMP%]{width:100%;padding:var(--s-3) var(--s-4) var(--s-3) calc(var(--s-3) + 24px + var(--s-2));border:1px solid var(--border-color);border-radius:var(--r-md);font-size:1rem;transition:border-color .2s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary)}.clear-search[_ngcontent-%COMP%]{position:absolute;right:var(--s-2);top:50%;transform:translateY(-50%);background:none;border:none;padding:var(--s-1);cursor:pointer;color:var(--text-muted);border-radius:var(--r-sm)}.clear-search[_ngcontent-%COMP%]:hover{background:var(--bg-muted);color:var(--text-primary)}.filter-chips[_ngcontent-%COMP%]{display:flex;gap:var(--s-2)}.filter-chip[_ngcontent-%COMP%]{padding:var(--s-2) var(--s-4);border:1px solid var(--border-color);border-radius:var(--r-full);background:var(--bg-card);font-size:.875rem;cursor:pointer;transition:all .2s ease}.filter-chip[_ngcontent-%COMP%]:hover{border-color:var(--primary)}.filter-chip.active[_ngcontent-%COMP%]{background:var(--primary);border-color:var(--primary);color:#fff}.people-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,1fr);gap:var(--s-4)}@media(min-width:640px){.people-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(min-width:1024px){.people-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.card-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit;display:block}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--s-12)}.loading-state[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-muted);margin-bottom:var(--s-4)}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.icon-xl[_ngcontent-%COMP%]{display:block}.btn[_ngcontent-%COMP%]{text-decoration:none;display:inline-flex;align-items:center;gap:var(--s-2);padding:var(--s-3) var(--s-4)}.mb-6[_ngcontent-%COMP%]{margin-bottom:var(--s-6)}"],changeDetection:0})};function CT(n,e){n&1&&(v(0,"div",4)(1,"span",18),l(2,"person"),g()())}function bT(n,e){if(n&1){let t=N();v(0,"div",19),B("mouseenter",function(){x(t);let r=m();return D(r.onPhotoHover(!0))})("mouseleave",function(){x(t);let r=m();return D(r.onPhotoHover(!1))}),v(1,"img",20),B("click",function(){x(t);let r=m();return D(r.onPhotoClick())})("keydown.enter",function(){x(t);let r=m();return D(r.onPhotoClick())})("keydown.space",function(){x(t);let r=m();return D(r.onPhotoClick())}),g()()}if(n&2){let t=m();z("hovered",t.photoHovered()),p(),_e("src",t.photoUrl(),$e)("alt",t.displayName()),te("aria-label","View full photo of "+t.displayName())}}function ET(n,e){if(n&1&&(v(0,"div",6)(1,"span",21),l(2),g()()),n&2){let t=m();te("aria-label",t.displayName()+" profile placeholder"),p(2),k(t.getInitials())}}function xT(n,e){n&1&&ue(0,"div",9)}function DT(n,e){if(n&1){let t=N();v(0,"button",24),B("click",function(){x(t);let r=m(2);return D(r.onEditClick())}),v(1,"span",25),l(2,"edit"),g()()}}function wT(n,e){if(n&1&&(v(0,"h1",22),l(1),g(),C(2,DT,3,0,"button",23)),n&2){let t=m();p(),k(t.displayName()),p(),b(t.showEditButton()?2:-1)}}function MT(n,e){if(n&1&&(v(0,"p",10),l(1),g()),n&2){let t=m();p(),T(" n\xE9e ",t.person().maidenName," ")}}function ST(n,e){if(n&1&&(v(0,"span"),l(1),g()),n&2){let t=m(2);p(),T(" (",t.age()," years old)")}}function IT(n,e){if(n&1&&(v(0,"p",11)(1,"span",25),l(2,"event"),g(),l(3),C(4,ST,2,1,"span"),g()),n&2){let t=m();p(3),T(" ",t.lifespan()," "),p(),b(t.age()!==null&&!t.person().isDeceased?4:-1)}}function PT(n,e){if(n&1&&(v(0,"p",13)(1,"span",25),l(2,"place"),g(),v(3,"span"),l(4),g()()),n&2){let t=m();p(4),T("Born in ",t.person().birthPlace)}}function TT(n,e){if(n&1&&(v(0,"p",13)(1,"span",25),l(2,"place"),g(),v(3,"span"),l(4),g()()),n&2){let t=m();p(4),T("Died in ",t.person().deathPlace)}}function OT(n,e){if(n&1&&(v(0,"div",26)(1,"h4",27)(2,"span",25),l(3,"work"),g(),l(4," Occupation "),g(),v(5,"p",22),l(6),g()()),n&2){let t=m(2);p(6),k(t.person().occupation)}}function kT(n,e){if(n&1&&(v(0,"div",26)(1,"h4",27)(2,"span",25),l(3,"school"),g(),l(4," Education "),g(),v(5,"p",22),l(6),g()()),n&2){let t=m(2);p(6),k(t.person().education)}}function NT(n,e){if(n&1&&(v(0,"div",14),C(1,OT,7,1,"div",26),C(2,kT,7,1,"div",26),g()),n&2){let t=m();p(),b(t.person().occupation?1:-1),p(),b(t.person().education?2:-1)}}function AT(n,e){if(n&1){let t=N();v(0,"button",32),B("click",function(){x(t);let r=m(2);return D(r.toggleBio())}),l(1),g()}if(n&2){let t=m(2);p(),T(" ",t.showFullBio()?"Read Less":"Read More"," ")}}function RT(n,e){if(n&1&&(v(0,"div",15)(1,"h3",28)(2,"span",29),l(3,"menu_book"),g(),l(4," Biography "),g(),v(5,"p",30),l(6),g(),C(7,AT,2,1,"button",31),g()),n&2){let t=m();p(5),z("expanded",t.showFullBio()),p(),k(t.person().biography),p(),b(t.shouldShowReadMore()?7:-1)}}function FT(n,e){if(n&1&&(v(0,"p",13)(1,"span",25),l(2,"email"),g(),v(3,"a",34),l(4),g()()),n&2){let t=m(3);p(3),_e("href","mailto:"+t.person().email,$e),p(),k(t.person().email)}}function LT(n,e){if(n&1&&(v(0,"p",13)(1,"span",25),l(2,"phone"),g(),v(3,"a",34),l(4),g()()),n&2){let t=m(3);p(3),_e("href","tel:"+t.person().phone,$e),p(),k(t.person().phone)}}function VT(n,e){if(n&1&&(v(0,"p",13)(1,"span",25),l(2,"home"),g(),v(3,"span"),l(4),g()()),n&2){let t=m(3);p(4),k(t.person().address)}}function jT(n,e){if(n&1&&(v(0,"div",33)(1,"h4",28)(2,"span",25),l(3,"contact_mail"),g(),l(4," Contact Information "),g(),v(5,"div",12),C(6,FT,5,2,"p",13),C(7,LT,5,2,"p",13),C(8,VT,5,1,"p",13),g()()),n&2){let t=m(2);p(6),b(t.person().email?6:-1),p(),b(t.person().phone?7:-1),p(),b(t.person().address?8:-1)}}function BT(n,e){if(n&1&&C(0,jT,9,3,"div",33),n&2){let t=m();b(t.person().email||t.person().phone||t.person().address?0:-1)}}function UT(n,e){if(n&1&&(v(0,"div",16)(1,"h4",28)(2,"span",25),l(3,"note"),g(),l(4," Notes "),g(),v(5,"p",35),l(6),g()()),n&2){let t=m();p(6),k(t.person().notes)}}function $T(n,e){n&1&&(v(0,"div",17)(1,"span",25),l(2,"verified"),g(),v(3,"span",35),l(4,"Information verified"),g()())}var Sd=class n{mediaService=_(be);person=j.required();isLoading=j(!1);showEditButton=j(!0);showFullBio=E(!1);photoHovered=E(!1);photoClicked=G();editClicked=G();displayName=S(()=>Lt(this.person(),"formal"));lifespan=S(()=>id(this.person()));age=S(()=>{let e=this.person();return e.birthDate?mC(e.birthDate,e.deathDate):null});photoUrl=S(()=>{let e=this.person();return this.mediaService.getProfilePhotoUrl(e.profilePhotoId)});hasAdditionalInfo=S(()=>{let e=this.person();return!!(e.occupation||e.education||e.biography)});getInitials=S(()=>{let e=this.person();return`${e.firstName.charAt(0)}${e.lastName.charAt(0)}`.toUpperCase()});shouldShowReadMore=S(()=>{let e=this.person().biography;return e&&e.length>300});onPhotoClick(){this.photoUrl()&&this.photoClicked.emit(this.photoUrl())}onEditClick(){this.editClicked.emit(this.person().id)}toggleBio(){this.showFullBio.update(e=>!e)}onPhotoHover(e){this.photoHovered.set(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-person-profile"]],hostAttrs:["role","article",1,"person-profile-container"],hostVars:1,hostBindings:function(t,i){t&2&&te("aria-label","Profile of "+i.displayName())},inputs:{person:[1,"person"],isLoading:[1,"isLoading"],showEditButton:[1,"showEditButton"]},outputs:{photoClicked:"photoClicked",editClicked:"editClicked"},decls:21,vars:11,consts:[[1,"container"],[1,"card"],[1,"flex","flex-col","md-flex-row","gap-6","mb-8","section-fade-in"],[1,"profile-photo-container"],["role","status","aria-label","Loading profile photo",1,"profile-photo-placeholder","skeleton-pulse"],[1,"photo-zoom-container",3,"hovered"],["role","img",1,"profile-photo-placeholder"],[1,"flex","flex-col","justify-center",2,"flex","1"],[1,"flex","items-center","justify-between","gap-4","mb-4"],[1,"skeleton-pulse",2,"width","60%","height","2.5rem","border-radius","var(--r-md)"],[1,"text-muted","text-sm","m-0"],[1,"text-muted","m-0","mb-4"],[1,"flex","flex-col","gap-2"],[1,"text-sm","m-0","flex","items-center","gap-2"],[1,"grid","grid-2","gap-6","mb-8","section-fade-in",2,"animation-delay","0.1s"],[1,"biography-section","section-fade-in",2,"animation-delay","0.2s"],[1,"notes-section","mt-8"],[1,"flex","items-center","gap-2","mt-8"],[1,"material-icons","icon-lg"],[1,"photo-zoom-container",3,"mouseenter","mouseleave"],["tabindex","0","role","button",1,"profile-photo",3,"click","keydown.enter","keydown.space","src","alt"],[1,"initials"],[1,"m-0"],["aria-label","Edit profile",1,"btn","btn-outline","edit-btn"],["aria-label","Edit profile",1,"btn","btn-outline","edit-btn",3,"click"],[1,"material-icons","icon-sm"],[1,"detail-section"],[1,"flex","items-center","gap-2","m-0","mb-4"],[1,"flex","items-center","gap-2"],[1,"material-icons"],[1,"biography-text"],[1,"btn","btn-outline","read-more-btn"],[1,"btn","btn-outline","read-more-btn",3,"click"],[1,"contact-section","mt-8","p-4"],[3,"href"],[1,"text-sm","text-muted"]],template:function(t,i){t&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),C(4,CT,3,0,"div",4)(5,bT,2,5,"div",5)(6,ET,3,2,"div",6),g(),v(7,"div",7)(8,"div",8),C(9,xT,1,0,"div",9)(10,wT,3,2),g(),C(11,MT,2,1,"p",10),C(12,IT,5,2,"p",11),v(13,"div",12),C(14,PT,5,1,"p",13),C(15,TT,5,1,"p",13),g()()(),C(16,NT,3,2,"div",14),C(17,RT,8,4,"div",15),C(18,BT,1,1),C(19,UT,7,1,"div",16),C(20,$T,5,0,"div",17),g()()),t&2&&(p(4),b(i.isLoading()?4:i.photoUrl()?5:6),p(5),b(i.isLoading()?9:10),p(2),b(i.person().maidenName?11:-1),p(),b(i.lifespan()?12:-1),p(2),b(i.person().birthPlace?14:-1),p(),b(i.person().deathPlace&&i.person().isDeceased?15:-1),p(),b(i.hasAdditionalInfo()?16:-1),p(),b(i.person().biography?17:-1),p(),b(!i.person().isDeceased&&!i.person().isPrivate?18:-1),p(),b(i.person().notes?19:-1),p(),b(i.person().isVerified?20:-1))},styles:[".card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.section-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_sectionFadeIn .5s ease-out both}@keyframes _ngcontent-%COMP%_sectionFadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.photo-zoom-container[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;border-radius:var(--r-full);border:3px solid var(--bg-muted);transition:border-color .3s ease,box-shadow .3s ease}.photo-zoom-container.hovered[_ngcontent-%COMP%]{border-color:var(--primary);box-shadow:var(--shadow-lg);cursor:zoom-in}.profile-photo-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-shrink:0}.profile-photo[_ngcontent-%COMP%]{width:160px;height:160px;border-radius:var(--r-full);object-fit:cover;transition:transform .3s ease;cursor:pointer;display:block}.photo-zoom-container.hovered[_ngcontent-%COMP%]   .profile-photo[_ngcontent-%COMP%]{transform:scale(1.1)}.profile-photo[_ngcontent-%COMP%]:focus{outline:2px solid var(--primary);outline-offset:4px}.profile-photo-placeholder[_ngcontent-%COMP%]{width:160px;height:160px;border-radius:var(--r-full);background:var(--primary-lighter);display:flex;align-items:center;justify-content:center;border:3px solid var(--primary);transition:transform .3s ease,background .3s ease}.profile-photo-placeholder[_ngcontent-%COMP%]:hover{transform:scale(1.03);background:var(--primary-light)}.initials[_ngcontent-%COMP%]{font-size:3rem;font-weight:var(--fw-bold);color:var(--primary-dark);-webkit-user-select:none;user-select:none}.edit-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.detail-section[_ngcontent-%COMP%]{padding:var(--s-4);background:var(--bg-muted);border-radius:var(--r-md);transition:background .2s ease,transform .2s ease,box-shadow .2s ease;cursor:default}.detail-section[_ngcontent-%COMP%]:hover{background:var(--bg-card);transform:translateY(-2px);box-shadow:var(--shadow-sm)}.biography-section[_ngcontent-%COMP%]{padding:var(--s-6);background:var(--bg-muted);border-radius:var(--r-md);transition:background .2s ease}.biography-section[_ngcontent-%COMP%]:hover{background:var(--bg-card)}.biography-text[_ngcontent-%COMP%]{line-height:1.8;white-space:pre-wrap;max-height:150px;overflow:hidden;position:relative;transition:max-height .4s ease}.biography-text.expanded[_ngcontent-%COMP%]{max-height:none}.read-more-btn[_ngcontent-%COMP%]{margin-top:var(--s-4)}.biography-text[_ngcontent-%COMP%]{word-break:break-word;max-height:300px;overflow-y:auto;scrollbar-width:thin;scrollbar-color:var(--accent-soft) transparent}.biography-text[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.biography-text[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.biography-text[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--accent-soft);border-radius:var(--r-full)}.biography-text[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--accent)}.contact-section[_ngcontent-%COMP%]{background:var(--accent-soft);border-left:4px solid var(--accent);border-radius:var(--r-md);transition:box-shadow .2s ease}.contact-section[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-md)}.contact-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--accent);text-decoration:none;transition:color .2s ease,text-decoration .2s ease;font-weight:500;padding:var(--s-1);margin:calc(var(--s-1) * -1);border-radius:var(--r-sm)}.contact-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline;color:var(--accent-hover)}.contact-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{outline:2px solid var(--accent);outline-offset:2px}.notes-section[_ngcontent-%COMP%]{padding:var(--s-4);background:var(--bg-muted);border-radius:var(--r-md);border-left:4px solid var(--text-muted);transition:border-color .2s ease}.notes-section[_ngcontent-%COMP%]:hover{border-left-color:var(--accent)}@media(max-width:767px){.profile-photo[_ngcontent-%COMP%], .profile-photo-placeholder[_ngcontent-%COMP%]{width:120px;height:120px}.initials[_ngcontent-%COMP%]{font-size:2rem}.profile-photo-container[_ngcontent-%COMP%]{margin-inline:auto}.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.contact-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:var(--s-2);min-height:44px;display:inline-flex;align-items:center}.biography-text[_ngcontent-%COMP%]{max-height:200px}}@media(min-width:768px)and (max-width:1023px){.profile-photo[_ngcontent-%COMP%], .profile-photo-placeholder[_ngcontent-%COMP%]{width:140px;height:140px}.initials[_ngcontent-%COMP%]{font-size:2.5rem}}@media(min-width:1280px){.profile-photo[_ngcontent-%COMP%], .profile-photo-placeholder[_ngcontent-%COMP%]{width:180px;height:180px}.initials[_ngcontent-%COMP%]{font-size:3.5rem}.biography-text[_ngcontent-%COMP%]{max-height:400px}}.material-icons[_ngcontent-%COMP%]{vertical-align:middle;transition:transform .2s ease}h3[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%]{transform:scale(1.1)}@media print{.profile-photo[_ngcontent-%COMP%]:hover, .detail-section[_ngcontent-%COMP%]:hover, .biography-section[_ngcontent-%COMP%]:hover{transform:none;box-shadow:none}.card[_ngcontent-%COMP%]{animation:none}}"],changeDetection:0})};function HT(n,e){n&1&&(v(0,"div",13)(1,"span",20),l(2,"sync"),g()())}function zT(n,e){if(n&1&&ue(0,"img",21),n&2){let t=m(2);z("zoomed",t.isZoomed())("transitioning",t.showTransition()),_e("src",t.loadedUrl(),$e)("alt",t.currentMedia().altText||t.currentMedia().caption||"Photo")}}function GT(n,e){if(n&1&&(v(0,"div",17)(1,"p",22),l(2),g()()),n&2){let t=m(2);p(2),k(t.currentMedia().caption)}}function WT(n,e){if(n&1&&(v(0,"div",23)(1,"span",24),l(2,"Size:"),g(),v(3,"span",25),l(4),g()()),n&2){let t=m(3);p(4),Fe("",t.currentMedia().metadata.width," \xD7 ",t.currentMedia().metadata.height)}}function qT(n,e){if(n&1&&(v(0,"div",18)(1,"h4"),l(2,"Photo Details"),g(),v(3,"div",23)(4,"span",24),l(5,"Filename:"),g(),v(6,"span",25),l(7),g()(),C(8,WT,5,2,"div",23),v(9,"div",23)(10,"span",24),l(11,"File size:"),g(),v(12,"span",25),l(13),g()()()),n&2){let t=m(2);p(7),k(t.currentMedia().filename),p(),b(t.currentMedia().metadata.width?8:-1),p(5),T("",(t.currentMedia().metadata.size/1024/1024).toFixed(2)," MB")}}function YT(n,e){if(n&1){let t=N();v(0,"div",19)(1,"button",26),B("click",function(){x(t);let r=m(2);return D(r.onShare("copy"))}),v(2,"span",8),l(3,"link"),g(),l(4," Copy Link "),g(),v(5,"button",26),B("click",function(){x(t);let r=m(2);return D(r.onShare("email"))}),v(6,"span",8),l(7,"email"),g(),l(8," Email "),g()()}}function QT(n,e){if(n&1){let t=N();v(0,"div",1),B("click",function(){x(t);let r=m();return D(r.onClose())}),v(1,"div",2),B("click",function(r){return x(t),D(r.stopPropagation())}),v(2,"div",3)(3,"div",4)(4,"span",5),l(5),g()(),v(6,"div",6)(7,"button",7),B("click",function(){x(t);let r=m();return D(r.onDownload())}),v(8,"span",8),l(9,"download"),g()(),v(10,"button",9),B("click",function(){x(t);let r=m();return D(r.toggleShareMenu())}),v(11,"span",8),l(12,"share"),g()(),v(13,"button",10),B("click",function(){x(t);let r=m();return D(r.toggleInfo())}),v(14,"span",8),l(15),g()(),v(16,"button",10),B("click",function(){x(t);let r=m();return D(r.toggleZoom())}),v(17,"span",8),l(18),g()(),v(19,"button",11),B("click",function(){x(t);let r=m();return D(r.onClose())}),v(20,"span",8),l(21,"close"),g()()()(),v(22,"div",12),B("touchstart",function(r){x(t);let o=m();return D(o.onTouchStart(r))})("touchend",function(r){x(t);let o=m();return D(o.onTouchEnd(r))}),C(23,HT,3,0,"div",13),C(24,zT,1,6,"img",14),v(25,"button",15),B("click",function(){x(t);let r=m();return D(r.onPrev())}),v(26,"span",8),l(27,"chevron_left"),g()(),v(28,"button",16),B("click",function(){x(t);let r=m();return D(r.onNext())}),v(29,"span",8),l(30,"chevron_right"),g()()(),C(31,GT,3,1,"div",17),C(32,qT,14,3,"div",18),C(33,YT,9,0,"div",19),g()()}if(n&2){let t,i=m();p(5),k(i.counter()),p(8),te("aria-label",i.showInfo()?"Hide info":"Show info"),p(2),k(i.showInfo()?"info":"info_outline"),p(),te("aria-label",i.isZoomed()?"Zoom out":"Zoom in"),p(2),T(" ",i.isZoomed()?"zoom_out":"zoom_in"," "),p(5),b(i.isImageLoading()?23:-1),p(),b(i.currentMedia()?24:-1),p(),_e("disabled",!i.hasPrev()),p(3),_e("disabled",!i.hasNext()),p(3),b((t=i.currentMedia())!=null&&t.caption?31:-1),p(),b(i.showInfo()&&i.currentMedia()?32:-1),p(),b(i.showShareMenu()?33:-1)}}var yo=class n{mediaService=_(be);mediaIds=j.required();currentIndex=j(0);isOpen=j(!1);close=G();indexChanged=G();currentIdx=E(0);loadedUrl=E("");isZoomed=E(!1);touchStartX=E(0);isImageLoading=E(!1);showTransition=E(!1);showInfo=E(!1);showShareMenu=E(!1);currentMedia=S(()=>{let e=this.currentIdx(),t=this.mediaIds()[e];return t?this.mediaService.getMedia(t):void 0});hasNext=S(()=>this.currentIdx()<this.mediaIds().length-1);hasPrev=S(()=>this.currentIdx()>0);counter=S(()=>`${this.currentIdx()+1} / ${this.mediaIds().length}`);constructor(){ot(()=>{this.currentIdx.set(this.currentIndex())}),ot(()=>{let e=this.currentMedia();e&&this.loadImage(e)})}async loadImage(e){this.isImageLoading.set(!0);let t=e.url||e.mediumUrl||e.thumbnailUrl;if(!t){this.loadedUrl.set(""),this.isImageLoading.set(!1);return}let i=this.mediaService.getMediaUrl(e.id)||t;this.loadedUrl.set(i),this.isImageLoading.set(!1)}onClose(){this.close.emit()}onNext(){this.hasNext()&&(this.showTransition.set(!0),setTimeout(()=>{let e=this.currentIdx()+1;this.currentIdx.set(e),this.indexChanged.emit(e),this.isZoomed.set(!1),this.showTransition.set(!1)},150))}onPrev(){this.hasPrev()&&(this.showTransition.set(!0),setTimeout(()=>{let e=this.currentIdx()-1;this.currentIdx.set(e),this.indexChanged.emit(e),this.isZoomed.set(!1),this.showTransition.set(!1)},150))}toggleZoom(){this.isZoomed.update(e=>!e)}onKeyDown(e){if(this.isOpen())switch(e.key){case"Escape":this.onClose();break;case"ArrowRight":this.onNext();break;case"ArrowLeft":this.onPrev();break}}onTouchStart(e){this.touchStartX.set(e.touches[0].clientX)}onTouchEnd(e){let t=e.changedTouches[0].clientX,i=this.touchStartX()-t;Math.abs(i)>50&&(i>0?this.onNext():this.onPrev())}toggleInfo(){this.showInfo.update(e=>!e)}async onDownload(){let e=this.currentMedia();if(e)try{let t=document.createElement("a");t.href=this.loadedUrl(),t.download=e.filename,t.click()}catch(t){console.error("Download failed:",t)}}toggleShareMenu(){this.showShareMenu.update(e=>!e)}onShare(e){console.log("Share to:",e),this.showShareMenu.set(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-photo-viewer"]],hostBindings:function(t,i){t&1&&I("keydown",function(o){return i.onKeyDown(o)},Sf)},inputs:{mediaIds:[1,"mediaIds"],currentIndex:[1,"currentIndex"],isOpen:[1,"isOpen"]},outputs:{close:"close",indexChanged:"indexChanged"},decls:1,vars:1,consts:[[1,"photo-viewer-overlay"],[1,"photo-viewer-overlay",3,"click"],[1,"photo-viewer",3,"click"],[1,"viewer-header"],[1,"header-left"],[1,"counter"],[1,"header-right"],["type","button","aria-label","Download photo",1,"icon-btn",3,"click"],[1,"material-icons"],["type","button","aria-label","Share photo",1,"icon-btn",3,"click"],["type","button",1,"icon-btn",3,"click"],["type","button","aria-label","Close viewer",1,"icon-btn",3,"click"],[1,"image-container",3,"touchstart","touchend"],[1,"loading-spinner"],[3,"src","alt","zoomed","transitioning"],["type","button","aria-label","Previous photo",1,"nav-btn","prev",3,"click","disabled"],["type","button","aria-label","Next photo",1,"nav-btn","next",3,"click","disabled"],[1,"viewer-footer"],[1,"info-panel"],[1,"share-menu"],[1,"material-icons","icon-xl","spinning"],[3,"src","alt"],[1,"caption"],[1,"info-row"],[1,"info-label"],[1,"info-value"],["type","button",1,"share-option",3,"click"]],template:function(t,i){t&1&&C(0,QT,34,12,"div",0),t&2&&b(i.isOpen()?0:-1)},styles:[".photo-viewer-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000f2;z-index:9999;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.photo-viewer[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}.viewer-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--s-4);color:#fff}.header-left[_ngcontent-%COMP%], .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2)}.counter[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.icon-btn[_ngcontent-%COMP%]{width:44px;height:44px;border:none;background:#ffffff1a;color:#fff;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.icon-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.1)}.icon-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:24px}.image-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;padding:var(--s-4)}.loading-spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff}.loading-spinner[_ngcontent-%COMP%]   .icon-xl[_ngcontent-%COMP%]{font-size:64px;opacity:.8}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;transition:transform .3s ease,opacity .15s ease;-webkit-user-select:none;user-select:none}.image-container[_ngcontent-%COMP%]   img.transitioning[_ngcontent-%COMP%]{opacity:0}.image-container[_ngcontent-%COMP%]   img.zoomed[_ngcontent-%COMP%]{transform:scale(2);cursor:zoom-out}.nav-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);width:56px;height:56px;border:none;background:#ffffff26;color:#fff;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.nav-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff40;transform:translateY(-50%) scale(1.1)}.nav-btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.nav-btn.prev[_ngcontent-%COMP%]{left:var(--s-4)}.nav-btn.next[_ngcontent-%COMP%]{right:var(--s-4)}.nav-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:32px}.viewer-footer[_ngcontent-%COMP%]{padding:var(--s-4);color:#fff;text-align:center;background:linear-gradient(to top,rgba(0,0,0,.5),transparent)}.caption[_ngcontent-%COMP%]{margin:0;font-size:1rem;line-height:1.6}.info-panel[_ngcontent-%COMP%]{position:absolute;right:var(--s-4);top:80px;background:#000000e6;color:#fff;padding:var(--s-4);border-radius:var(--r-md);min-width:300px;max-width:400px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);animation:_ngcontent-%COMP%_slideInRight .3s ease}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(20px)}to{opacity:1;transform:translate(0)}}.info-panel[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 var(--s-3) 0;font-size:1.1rem}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:var(--s-2) 0;border-bottom:1px solid rgba(255,255,255,.1)}.info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-label[_ngcontent-%COMP%]{font-size:.9rem;opacity:.7}.info-value[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600}.share-menu[_ngcontent-%COMP%]{position:absolute;right:var(--s-4);top:80px;background:#000000e6;border-radius:var(--r-md);overflow:hidden;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);animation:_ngcontent-%COMP%_slideInRight .3s ease}.share-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-3);padding:var(--s-3) var(--s-4);background:transparent;color:#fff;border:none;cursor:pointer;width:100%;min-width:200px;transition:background .2s}.share-option[_ngcontent-%COMP%]:hover{background:#ffffff1a}.share-option[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}@media(max-width:768px){.info-panel[_ngcontent-%COMP%], .share-menu[_ngcontent-%COMP%]{right:var(--s-2);left:var(--s-2);top:70px;min-width:auto;max-width:none}.viewer-header[_ngcontent-%COMP%]{padding:var(--s-2)}.icon-btn[_ngcontent-%COMP%]{width:40px;height:40px}.icon-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.nav-btn[_ngcontent-%COMP%]{width:48px;height:48px}.nav-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:28px}.nav-btn.prev[_ngcontent-%COMP%]{left:var(--s-2)}.nav-btn.next[_ngcontent-%COMP%]{right:var(--s-2)}.counter[_ngcontent-%COMP%]{font-size:.9rem}.caption[_ngcontent-%COMP%]{font-size:.95rem}}"],changeDetection:0})};var ZT=n=>["/people",n,"edit"],KT=n=>[n];function XT(n,e){n&1&&(u(0,"div",1)(1,"div",2)(2,"span",3),l(3,"sync"),d(),u(4,"span",4),l(5,"Loading..."),d()()())}function JT(n,e){if(n&1&&(u(0,"a",8)(1,"span",7),l(2,"edit"),d(),l(3," Edit "),d()),n&2){let t=m();H("routerLink",Tn(1,ZT,t.id))}}function eO(n,e){if(n&1){let t=N();u(0,"app-photo-viewer",11),I("close",function(){x(t);let r=m(2);return D(r.viewerOpen.set(!1))}),d()}if(n&2){let t=m(),i=m();H("mediaIds",Tn(3,KT,t.profilePhotoId))("currentIndex",0)("isOpen",i.viewerOpen())}}function tO(n,e){if(n&1){let t=N();u(0,"div",5)(1,"a",6)(2,"span",7),l(3,"arrow_back"),d(),l(4," Back to People "),d(),C(5,JT,4,3,"a",8),d(),u(6,"app-person-profile",9),I("photoClicked",function(r){x(t);let o=m();return D(o.handlePhotoClick(r))})("editClicked",function(r){x(t);let o=m();return D(o.handleEdit(r))}),d(),C(7,eO,1,5,"app-photo-viewer",10)}if(n&2){let t=e,i=m();p(5),b(i.isAdmin()?5:-1),p(),H("person",t)("showEditButton",i.isAdmin()),p(),b(t.profilePhotoId?7:-1)}}function nO(n,e){n&1&&(u(0,"div",1)(1,"div",12)(2,"span",13),l(3,"person_off"),d(),u(4,"h3"),l(5,"Person Not Found"),d(),u(6,"p",4),l(7,"The requested family member could not be found."),d(),u(8,"a",14),l(9,"View All People"),d()()())}var Id=class n{personService=_(Se);mediaService=_(be);authService=_(Le);route=_(lt);router=_(Me);subscription=null;person=E(void 0);isLoading=E(!0);viewerOpen=E(!1);currentPersonId=E(null);isAdmin=this.authService.isAdmin;ngOnInit(){this.subscription=this.route.paramMap.subscribe(e=>{let t=e.get("id");this.currentPersonId.set(t),this.isLoading.set(!0)}),ot(()=>{let e=this.currentPersonId(),t=this.personService.people(),i=this.personService.loading();if(!e){this.person.set(void 0),this.isLoading.set(!1);return}let r=t.find(o=>o.id===e);r?(this.person.set(r),this.isLoading.set(!1)):i||(this.person.set(void 0),this.isLoading.set(!1))})}ngOnDestroy(){this.subscription?.unsubscribe()}handlePhotoClick(e){this.viewerOpen.set(!0)}handleEdit(e){this.router.navigate(["/people",e,"edit"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-person-detail-page"]],decls:4,vars:1,consts:[[1,"container"],[1,"card"],[1,"flex","items-center","justify-center","gap-4","py-8"],[1,"material-icons","spin"],[1,"text-muted"],[1,"page-header","flex","items-center","justify-between","mb-4"],["routerLink","/people",1,"btn","btn-outline","flex","items-center","gap-2"],[1,"material-icons"],[1,"btn","btn-primary","flex","items-center","gap-2",3,"routerLink"],[3,"photoClicked","editClicked","person","showEditButton"],[3,"mediaIds","currentIndex","isOpen"],[3,"close","mediaIds","currentIndex","isOpen"],[1,"text-center","py-8"],[1,"material-icons","icon-xl","text-muted","mb-4"],["routerLink","/people",1,"btn","btn-primary","mt-4"]],template:function(t,i){if(t&1&&(u(0,"div",0),C(1,XT,6,0,"div",1)(2,tO,8,4)(3,nO,10,0,"div",1),d()),t&2){let r;p(),b(i.isLoading()?1:(r=i.person())?2:3,r)}},dependencies:[Sd,yo,Ce],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.py-8[_ngcontent-%COMP%]{padding-block:2rem}.mt-4[_ngcontent-%COMP%]{margin-top:1rem}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.btn[_ngcontent-%COMP%]{text-decoration:none;display:inline-flex;padding:var(--s-3) var(--s-4)}.icon-xl[_ngcontent-%COMP%]{font-size:3rem;display:block}"],changeDetection:0})};function iO(n,e){n&1&&(u(0,"div",3)(1,"span",29),l(2,"warning"),d(),u(3,"span",67),l(4,"You have unsaved changes"),d()())}function rO(n,e){n&1&&(u(0,"div",4)(1,"span",29),l(2,"check_circle"),d(),u(3,"span",67),l(4,"Successfully saved!"),d()())}function oO(n,e){n&1&&(u(0,"span",11),l(1,"check_circle"),d())}function sO(n,e){if(n&1&&(u(0,"span",13)(1,"span",29),l(2,"error"),d(),l(3),d()),n&2){let t=m();p(3),T(" ",t.getErrorMessage("firstName")," ")}}function aO(n,e){n&1&&(u(0,"span",11),l(1,"check_circle"),d())}function lO(n,e){if(n&1&&(u(0,"span",13)(1,"span",29),l(2,"error"),d(),l(3),d()),n&2){let t=m();p(3),T(" ",t.getErrorMessage("lastName")," ")}}function cO(n,e){if(n&1&&(u(0,"option",21),l(1),Et(2,"titlecase"),d()),n&2){let t=e.$implicit;H("value",t),p(),k(Kn(2,2,t))}}function dO(n,e){if(n&1&&de(0,"img",25),n&2){let t,i=m();H("src",i.getPhotoPreview(),$e)("alt",(t=i.personForm.get("firstName"))==null?null:t.value)}}function uO(n,e){if(n&1&&(u(0,"div",26)(1,"span",68),l(2),d()()),n&2){let t=m();p(2),k(t.getInitials())}}function pO(n,e){if(n&1){let t=N();u(0,"button",69),I("click",function(){x(t);let r=m();return D(r.onRemovePhoto())}),u(1,"span",29),l(2,"delete"),d(),l(3," Remove "),d()}}function fO(n,e){if(n&1){let t=N();u(0,"div",36)(1,"div",70)(2,"span",71),l(3,"Common Dates"),d(),u(4,"button",72),I("click",function(){x(t);let r=m();return D(r.setQuickDate("birthDate",0))}),l(5," Today "),d(),u(6,"button",72),I("click",function(){x(t);let r=m();return D(r.setQuickDate("birthDate",365))}),l(7," 1 year ago "),d(),u(8,"button",72),I("click",function(){x(t);let r=m();return D(r.setQuickDate("birthDate",540))}),l(9," 18 years ago "),d()(),u(10,"div",70)(11,"span",71),l(12,"By Year"),d(),u(13,"button",72),I("click",function(){x(t);let r=m();return D(r.setQuickDateByYear("birthDate",r.yearShortcuts().current))}),l(14),d(),u(15,"button",72),I("click",function(){x(t);let r=m();return D(r.setQuickDateByYear("birthDate",r.yearShortcuts().minus30))}),l(16),d(),u(17,"button",72),I("click",function(){x(t);let r=m();return D(r.setQuickDateByYear("birthDate",r.yearShortcuts().minus50))}),l(18),d()()()}if(n&2){let t=m();p(14),T(" ",t.yearShortcuts().current," "),p(2),T(" ",t.yearShortcuts().minus30," "),p(2),T(" ",t.yearShortcuts().minus50," ")}}function mO(n,e){if(n&1&&(u(0,"div",37),l(1),d()),n&2){let t=m();p(),k(t.lifespan())}}function hO(n,e){if(n&1){let t=N();u(0,"div",36)(1,"div",70)(2,"span",71),l(3,"Common Dates"),d(),u(4,"button",72),I("click",function(){x(t);let r=m(2);return D(r.setQuickDate("deathDate",0))}),l(5," Today "),d(),u(6,"button",72),I("click",function(){x(t);let r=m(2);return D(r.setQuickDate("deathDate",365))}),l(7," 1 year ago "),d(),u(8,"button",72),I("click",function(){x(t);let r=m(2);return D(r.setQuickDate("deathDate",150))}),l(9," 5 years ago "),d()(),u(10,"div",70)(11,"span",71),l(12,"By Year"),d(),u(13,"button",72),I("click",function(){x(t);let r=m(2);return D(r.setQuickDateByYear("deathDate",r.yearShortcuts().current))}),l(14),d(),u(15,"button",72),I("click",function(){x(t);let r=m(2);return D(r.setQuickDateByYear("deathDate",r.yearShortcuts().minus10))}),l(16),d(),u(17,"button",72),I("click",function(){x(t);let r=m(2);return D(r.setQuickDateByYear("deathDate",r.yearShortcuts().minus30))}),l(18),d()()()}if(n&2){let t=m(2);p(14),T(" ",t.yearShortcuts().current," "),p(2),T(" ",t.yearShortcuts().minus10," "),p(2),T(" ",t.yearShortcuts().minus30," ")}}function gO(n,e){n&1&&(u(0,"span",13)(1,"span",29),l(2,"error"),d(),l(3," Death date must be after birth date "),d())}function vO(n,e){if(n&1){let t=N();u(0,"div",7)(1,"div",8)(2,"label",73),l(3,"Death Date"),d(),u(4,"div",33)(5,"input",74),I("blur",function(){x(t);let r=m();return D(r.hideQuickSelect())}),d(),u(6,"button",35),I("click",function(){x(t);let r=m();return D(r.toggleQuickSelect("deathDate"))}),u(7,"span",29),l(8,"event"),d()(),C(9,hO,19,3,"div",36),d(),C(10,gO,4,0,"span",13),d(),u(11,"div",8)(12,"label",75),l(13,"Death Place"),d(),de(14,"input",76),d()()}if(n&2){let t=m();p(9),b(t.showDeathDateQuickSelect()?9:-1),p(),b(t.personForm.hasError("invalidDateRange")?10:-1)}}function yO(n,e){if(n&1&&(u(0,"span",13)(1,"span",29),l(2,"error"),d(),l(3),d()),n&2){let t=m();p(3),T(" ",t.getErrorMessage("biography")," ")}}function _O(n,e){n&1&&(u(0,"span",18),l(1,"Maximum 2000 characters"),d())}function CO(n,e){if(n&1&&(u(0,"span",13)(1,"span",29),l(2,"error"),d(),l(3),d()),n&2){let t=m();p(3),T(" ",t.getErrorMessage("email")," ")}}function bO(n,e){if(n&1){let t=N();u(0,"button",65),I("click",function(){x(t);let r=m();return D(r.onReset())}),u(1,"span",29),l(2,"refresh"),d(),l(3," Reset "),d()}}var _o=class n{fb=_(Ed);person=j(null);mode=j("add");isLoading=j(!1);formSubmitted=G();formCancelled=G();photoSelected=G();personForm;genderOptions=["male","female","other","unknown"];isSubmitting=E(!1);hasUnsavedChanges=E(!1);focusedField=E(null);submissionSuccess=E(!1);profilePhotoPreview=E(null);selectedPhotoFile=E(null);showBirthDateQuickSelect=E(!1);showDeathDateQuickSelect=E(!1);formTitle=S(()=>this.mode()==="add"?"Add Family Member":"Edit Family Member");submitButtonText=S(()=>this.isSubmitting()?"Saving...":this.mode()==="add"?"Add Person":"Save Changes");lifespan=S(()=>{let e=this.personForm?.get("birthDate")?.value,t=this.personForm?.get("deathDate")?.value,i=this.personForm?.get("isDeceased")?.value;if(!e)return"";let r=new Date(e),o=r.getFullYear(),s=t?new Date(t).getFullYear():null;if(i&&s)return`${o} - ${s}`;let c=Math.floor((new Date().getTime()-r.getTime())/(365.25*24*60*60*1e3));return`${o} (age ${c})`});currentYear=S(()=>new Date().getFullYear());yearShortcuts=S(()=>({current:this.currentYear(),minus10:this.currentYear()-10,minus30:this.currentYear()-30,minus50:this.currentYear()-50}));ngOnInit(){this.initializeForm(),this.trackUnsavedChanges(),this.setupBeforeUnloadWarning()}trackUnsavedChanges(){this.personForm.valueChanges.subscribe(()=>{!this.hasUnsavedChanges()&&this.personForm.dirty&&this.hasUnsavedChanges.set(!0)})}setupBeforeUnloadWarning(){typeof window<"u"&&window.addEventListener("beforeunload",e=>{this.hasUnsavedChanges()&&!this.submissionSuccess()&&(e.preventDefault(),e.returnValue="")})}initializeForm(){let e=this.person();this.personForm=this.fb.group({firstName:[e?.firstName||"",[It.required,It.minLength(2)]],lastName:[e?.lastName||"",[It.required,It.minLength(2)]],maidenName:[e?.maidenName||""],gender:[e?.gender||"unknown",It.required],birthDate:[e?.birthDate||""],birthPlace:[e?.birthPlace||""],birthDateIsApproximate:[e?.birthDateIsApproximate||!1],deathDate:[e?.deathDate||""],deathPlace:[e?.deathPlace||""],isDeceased:[e?.isDeceased||!1],occupation:[e?.occupation||""],education:[e?.education||""],biography:[e?.biography||"",It.maxLength(2e3)],email:[e?.email||"",It.email],phone:[e?.phone||""],address:[e?.address||""],isPrivate:[e?.isPrivate||!1],notes:[e?.notes||""]},{validators:this.dateValidator}),this.personForm.get("isDeceased")?.valueChanges.subscribe(t=>{let i=this.personForm.get("deathDate"),r=this.personForm.get("deathPlace");t?(i?.enable(),r?.enable()):(i?.setValue(""),i?.disable(),r?.setValue(""),r?.disable())})}dateValidator(e){let t=e.get("birthDate")?.value,i=e.get("deathDate")?.value;if(t&&i){let r=new Date(t);if(new Date(i)<=r)return{invalidDateRange:!0}}return null}setQuickDate(e,t){let i=new Date;i.setDate(i.getDate()-t);let r=i.toISOString().split("T")[0];this.personForm.get(e)?.setValue(r),this.personForm.get(e)?.markAsTouched(),this.hasUnsavedChanges.set(!0),this.hideQuickSelect()}setQuickDateByMonth(e,t){let i=new Date;i.setMonth(i.getMonth()-t),i.setDate(1);let r=i.toISOString().split("T")[0];this.personForm.get(e)?.setValue(r),this.personForm.get(e)?.markAsTouched(),this.hasUnsavedChanges.set(!0),this.hideQuickSelect()}setQuickDateByYear(e,t){let r=new Date(t,0,1).toISOString().split("T")[0];this.personForm.get(e)?.setValue(r),this.personForm.get(e)?.markAsTouched(),this.hasUnsavedChanges.set(!0),this.hideQuickSelect()}toggleQuickSelect(e){e==="birthDate"?(this.showBirthDateQuickSelect.set(!this.showBirthDateQuickSelect()),this.showDeathDateQuickSelect.set(!1)):(this.showDeathDateQuickSelect.set(!this.showDeathDateQuickSelect()),this.showBirthDateQuickSelect.set(!1))}hideQuickSelect(){this.showBirthDateQuickSelect.set(!1),this.showDeathDateQuickSelect.set(!1)}getFormattedDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"No date"}hasError(e,t){let i=this.personForm.get(e);return i?t?i.hasError(t)&&i.touched:i.invalid&&i.touched:!1}getErrorMessage(e){let t=this.personForm.get(e);if(!t||!t.errors||!t.touched)return"";if(t.hasError("required"))return`${this.getFieldLabel(e)} is required`;if(t.hasError("minlength")){let i=t.errors.minlength.requiredLength;return`${this.getFieldLabel(e)} must be at least ${i} characters`}if(t.hasError("maxlength")){let i=t.errors.maxlength.requiredLength;return`${this.getFieldLabel(e)} cannot exceed ${i} characters`}return t.hasError("email")?"Please enter a valid email address":"Invalid value"}getFieldLabel(e){return{firstName:"First name",lastName:"Last name",maidenName:"Maiden name",gender:"Gender",birthDate:"Birth date",birthPlace:"Birth place",deathDate:"Death date",deathPlace:"Death place",occupation:"Occupation",education:"Education",biography:"Biography",email:"Email",phone:"Phone",address:"Address",notes:"Notes"}[e]||e}onFieldFocus(e){this.focusedField.set(e)}onFieldBlur(){this.focusedField.set(null)}isFieldComplete(e){let t=this.personForm.get(e);return!!t&&t.valid&&t.value&&t.value!==""&&t.value!=="unknown"}async onSubmit(){if(this.personForm.invalid){Object.keys(this.personForm.controls).forEach(e=>{this.personForm.get(e)?.markAsTouched()}),this.scrollToFirstError();return}this.isSubmitting.set(!0);try{let e=this.personForm.getRawValue();this.formSubmitted.emit(e),await new Promise(t=>setTimeout(t,500)),this.submissionSuccess.set(!0),this.hasUnsavedChanges.set(!1),setTimeout(()=>this.submissionSuccess.set(!1),2e3)}finally{this.isSubmitting.set(!1)}}scrollToFirstError(){let e=document.querySelector(".form-error");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}onPhotoSelected(e){let i=e.target.files?.[0];if(!i)return;if(!i.type.startsWith("image/")){alert("Please select a valid image file");return}let r=10*1024*1024;if(i.size>r){alert("Image must be less than 10MB");return}this.selectedPhotoFile.set(i),this.hasUnsavedChanges.set(!0);let o=new FileReader;o.onload=s=>{this.profilePhotoPreview.set(s.target?.result)},o.readAsDataURL(i),this.photoSelected.emit(i)}onRemovePhoto(){this.selectedPhotoFile.set(null),this.profilePhotoPreview.set(null),this.hasUnsavedChanges.set(!0);let e=document.getElementById("profilePhoto");e&&(e.value="")}getPhotoPreview(){return this.profilePhotoPreview()?this.profilePhotoPreview():null}getInitials(){let e=this.personForm.get("firstName")?.value||"U",t=this.personForm.get("lastName")?.value||"U";return`${e.charAt(0)}${t.charAt(0)}`.toUpperCase()}onCancel(){this.hasUnsavedChanges()&&!confirm("You have unsaved changes. Are you sure you want to cancel?")||this.formCancelled.emit()}onReset(){this.hasUnsavedChanges()&&!confirm("Are you sure you want to reset the form? All changes will be lost.")||(this.personForm.reset(),this.hasUnsavedChanges.set(!1),this.initializeForm())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-person-form"]],hostAttrs:[1,"person-form-container"],hostVars:2,hostBindings:function(t,i){t&2&&z("is-submitting",i.isSubmitting())},inputs:{person:[1,"person"],mode:[1,"mode"],isLoading:[1,"isLoading"]},outputs:{formSubmitted:"formSubmitted",formCancelled:"formCancelled",photoSelected:"photoSelected"},decls:150,vars:38,consts:[[1,"container"],[1,"card"],[1,"form-header"],[1,"unsaved-warning"],[1,"success-message"],[3,"ngSubmit","formGroup"],[1,"form-section"],[1,"grid","grid-2","gap-4"],[1,"form-group"],[1,"label-with-indicator"],["for","firstName",1,"required"],[1,"field-complete-icon","material-icons","icon-sm"],["type","text","id","firstName","formControlName","firstName","placeholder","Enter first name",3,"focus","blur"],[1,"form-error"],["for","lastName",1,"required"],["type","text","id","lastName","formControlName","lastName","placeholder","Enter last name",3,"focus","blur"],["for","maidenName"],["type","text","id","maidenName","formControlName","maidenName","placeholder","Enter maiden name (if applicable)"],[1,"form-hint"],["for","gender",1,"required"],["id","gender","formControlName","gender"],[3,"value"],[1,"text-sm","text-muted"],[1,"profile-photo-container"],[1,"photo-preview-area"],[1,"photo-preview",3,"src","alt"],[1,"avatar-placeholder"],[1,"photo-controls"],["for","profilePhoto",1,"btn","btn-outline"],[1,"material-icons","icon-sm"],["type","file","id","profilePhoto","accept","image/*","hidden","",3,"change"],["type","button",1,"btn","btn-outline","btn-danger"],["for","birthDate"],[1,"date-input-wrapper"],["type","date","id","birthDate","formControlName","birthDate",1,"date-input",3,"blur"],["type","button","title","Quick date select",1,"date-quick-btn",3,"click"],[1,"date-quick-select"],[1,"date-display"],[1,"checkbox-group","mt-4"],["type","checkbox","id","birthDateIsApproximate","formControlName","birthDateIsApproximate"],["for","birthDateIsApproximate",2,"margin-bottom","0"],["for","birthPlace"],["type","text","id","birthPlace","formControlName","birthPlace","placeholder","City, State, Country"],[1,"checkbox-group","mb-4"],["type","checkbox","id","isDeceased","formControlName","isDeceased"],["for","isDeceased",2,"margin-bottom","0"],["for","occupation"],["type","text","id","occupation","formControlName","occupation","placeholder","e.g., Teacher, Engineer"],["for","education"],["type","text","id","education","formControlName","education","placeholder","e.g., Bachelor's in Computer Science"],["for","biography"],["id","biography","formControlName","biography","placeholder","Share their life story, achievements, memories...","rows","6"],[1,"flex","items-center","justify-between"],["for","email"],["type","email","id","email","formControlName","email","placeholder","email@example.com"],["for","phone"],["type","tel","id","phone","formControlName","phone","placeholder","+1 (555) 123-4567"],["for","address"],["type","text","id","address","formControlName","address","placeholder","123 Main St, City, State, ZIP"],["type","checkbox","id","isPrivate","formControlName","isPrivate"],["for","isPrivate",2,"margin-bottom","0"],["for","notes"],["id","notes","formControlName","notes","placeholder","Private notes for your reference...","rows","3"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-outline"],[1,"text-sm"],[1,"avatar-initials"],["type","button",1,"btn","btn-outline","btn-danger",3,"click"],[1,"quick-select-group"],[1,"group-label"],["type","button",1,"quick-btn",3,"click"],["for","deathDate"],["type","date","id","deathDate","formControlName","deathDate",1,"date-input",3,"blur"],["for","deathPlace"],["type","text","id","deathPlace","formControlName","deathPlace","placeholder","City, State, Country"]],template:function(t,i){if(t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),C(3,iO,5,0,"div",3),C(4,rO,5,0,"div",4),d(),u(5,"form",5),I("ngSubmit",function(){return i.onSubmit()}),u(6,"div",6)(7,"h3"),l(8,"Basic Information"),d(),u(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10),l(13,"First Name"),d(),C(14,oO,2,0,"span",11),d(),u(15,"input",12),I("focus",function(){return i.onFieldFocus("firstName")})("blur",function(){return i.onFieldBlur()}),d(),C(16,sO,4,1,"span",13),d(),u(17,"div",8)(18,"div",9)(19,"label",14),l(20,"Last Name"),d(),C(21,aO,2,0,"span",11),d(),u(22,"input",15),I("focus",function(){return i.onFieldFocus("lastName")})("blur",function(){return i.onFieldBlur()}),d(),C(23,lO,4,1,"span",13),d()(),u(24,"div",7)(25,"div",8)(26,"label",16),l(27,"Maiden Name"),d(),de(28,"input",17),u(29,"span",18),l(30,"Birth name before marriage"),d()(),u(31,"div",8)(32,"label",19),l(33,"Gender"),d(),u(34,"select",20),K(35,cO,3,4,"option",21,Ie),d()()()(),u(37,"div",6)(38,"h3"),l(39,"Profile Photo"),d(),u(40,"p",22),l(41,"Optional: Upload a photo or display name initials"),d(),u(42,"div",23)(43,"div",24),C(44,dO,1,2,"img",25)(45,uO,3,1,"div",26),d(),u(46,"div",27)(47,"label",28)(48,"span",29),l(49,"upload_file"),d(),l(50," Choose Photo "),d(),u(51,"input",30),I("change",function(o){return i.onPhotoSelected(o)}),d(),C(52,pO,4,0,"button",31),u(53,"span",18),l(54,"JPG, PNG \u2022 Max 10MB"),d()()()(),u(55,"div",6)(56,"h3"),l(57,"Birth Information"),d(),u(58,"div",7)(59,"div",8)(60,"label",32),l(61,"Birth Date"),d(),u(62,"div",33)(63,"input",34),I("blur",function(){return i.hideQuickSelect()}),d(),u(64,"button",35),I("click",function(){return i.toggleQuickSelect("birthDate")}),u(65,"span",29),l(66,"event"),d()(),C(67,fO,19,3,"div",36),d(),C(68,mO,2,1,"div",37),u(69,"div",38),de(70,"input",39),u(71,"label",40),l(72,"Date is approximate"),d()()(),u(73,"div",8)(74,"label",41),l(75,"Birth Place"),d(),de(76,"input",42),d()()(),u(77,"div",6)(78,"h3"),l(79,"Death Information"),d(),u(80,"div",43),de(81,"input",44),u(82,"label",45),l(83,"Person is deceased"),d()(),C(84,vO,15,2,"div",7),d(),u(85,"div",6)(86,"h3"),l(87,"Additional Information"),d(),u(88,"div",7)(89,"div",8)(90,"label",46),l(91,"Occupation"),d(),de(92,"input",47),d(),u(93,"div",8)(94,"label",48),l(95,"Education"),d(),de(96,"input",49),d()(),u(97,"div",8)(98,"label",50),l(99,"Biography"),d(),de(100,"textarea",51),u(101,"div",52),C(102,yO,4,1,"span",13)(103,_O,2,0,"span",18),u(104,"span",18),l(105),d()()()(),u(106,"div",6)(107,"h3"),l(108,"Contact Information"),d(),u(109,"p",22),l(110,"Only for living family members"),d(),u(111,"div",7)(112,"div",8)(113,"label",53),l(114,"Email"),d(),de(115,"input",54),C(116,CO,4,1,"span",13),d(),u(117,"div",8)(118,"label",55),l(119,"Phone"),d(),de(120,"input",56),d()(),u(121,"div",8)(122,"label",57),l(123,"Address"),d(),de(124,"input",58),d()(),u(125,"div",6)(126,"h3"),l(127,"Privacy & Notes"),d(),u(128,"div",43),de(129,"input",59),u(130,"label",60),l(131,"Make profile private"),d()(),u(132,"p",18),l(133,"Private profiles are only visible to family tree owners"),d(),u(134,"div",8)(135,"label",61),l(136,"Internal Notes"),d(),de(137,"textarea",62),u(138,"span",18),l(139,"These notes are not visible to other family members"),d()()(),u(140,"div",63)(141,"button",64)(142,"span",29),l(143,"save"),d(),l(144),d(),u(145,"button",65),I("click",function(){return i.onCancel()}),u(146,"span",29),l(147,"close"),d(),l(148," Cancel "),d(),C(149,bO,4,0,"button",66),d()()()()),t&2){let r,o,s,a,c,f,h;p(3),b(i.hasUnsavedChanges()&&!i.isSubmitting()?3:-1),p(),b(i.submissionSuccess()?4:-1),p(),H("formGroup",i.personForm),p(5),z("is-focused",i.focusedField()==="firstName"),p(4),b(i.isFieldComplete("firstName")?14:-1),p(),z("ng-invalid",i.hasError("firstName"))("ng-touched",(r=i.personForm.get("firstName"))==null?null:r.touched),p(),b(i.hasError("firstName")?16:-1),p(),z("is-focused",i.focusedField()==="lastName"),p(4),b(i.isFieldComplete("lastName")?21:-1),p(),z("ng-invalid",i.hasError("lastName"))("ng-touched",(o=i.personForm.get("lastName"))==null?null:o.touched),p(),b(i.hasError("lastName")?23:-1),p(12),X(i.genderOptions),p(9),b(i.getPhotoPreview()?44:45),p(8),b(i.selectedPhotoFile()||(s=i.person())!=null&&s.profilePhotoId?52:-1),p(15),b(i.showBirthDateQuickSelect()?67:-1),p(),b(i.lifespan()?68:-1),p(16),b((a=i.personForm.get("isDeceased"))!=null&&a.value?84:-1),p(16),z("ng-invalid",i.hasError("biography"))("ng-touched",(c=i.personForm.get("biography"))==null?null:c.touched),p(2),b(i.hasError("biography")?102:103),p(3),T("",((f=i.personForm.get("biography"))==null||f.value==null?null:f.value.length)||0," / 2000"),p(10),z("ng-invalid",i.hasError("email"))("ng-touched",(h=i.personForm.get("email"))==null?null:h.touched),p(),b(i.hasError("email")?116:-1),p(25),H("disabled",i.personForm.invalid),p(3),T(" ",i.submitButtonText()," "),p(5),b(i.mode()==="edit"?149:-1)}},dependencies:[xd,go,Cd,bd,Ln,nh,vo,Ni,ho,na,ta,bs],styles:['.form-header[_ngcontent-%COMP%]{margin-bottom:var(--s-8);padding-bottom:var(--s-6);border-bottom:2px solid var(--border-color)}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:var(--s-4)}.unsaved-warning[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);padding:var(--s-3) var(--s-4);background:#ffa5001a;border:1px solid rgba(255,165,0,.3);border-radius:var(--r-md);margin-top:var(--s-4);animation:_ngcontent-%COMP%_slideDown .3s ease-out}.unsaved-warning[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#ff8c00}.success-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);padding:var(--s-3) var(--s-4);background:var(--success-light);border:1px solid var(--success);border-radius:var(--r-md);margin-top:var(--s-4);animation:_ngcontent-%COMP%_slideDown .3s ease-out,_ngcontent-%COMP%_fadeOut .3s ease-in 1.7s}.success-message[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--success)}@keyframes _ngcontent-%COMP%_fadeOut{to{opacity:0;transform:translateY(-10px)}}.form-group.is-focused[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group.is-focused[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group.is-focused[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:var(--primary);box-shadow:0 0 0 3px var(--primary-lighter);transition:border-color .2s ease,box-shadow .2s ease}.form-group.is-focused[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-4px;border:2px solid var(--primary-lighter);border-radius:var(--r-md);pointer-events:none;animation:_ngcontent-%COMP%_focusGlow .3s ease-out}@keyframes _ngcontent-%COMP%_focusGlow{0%{opacity:0;transform:scale(.98)}to{opacity:1;transform:scale(1)}}.label-with-indicator[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--s-2)}.field-complete-icon[_ngcontent-%COMP%]{color:var(--accent);animation:_ngcontent-%COMP%_checkmarkPop .3s ease-out}@keyframes _ngcontent-%COMP%_checkmarkPop{0%{transform:scale(0);opacity:0}50%{transform:scale(1.2)}to{transform:scale(1);opacity:1}}.form-section[_ngcontent-%COMP%]{margin-bottom:var(--s-8);padding-bottom:var(--s-6);border-bottom:1px solid var(--border-color)}.form-section[_ngcontent-%COMP%]:last-of-type{border-bottom:none;padding-bottom:0}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:var(--s-4);display:flex;align-items:center;gap:var(--s-2)}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{content:"";width:4px;height:1.25rem;background:var(--accent);border-radius:var(--r-full)}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;pointer-events:none}.btn[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-1px);box-shadow:var(--shadow-sm)}.btn[_ngcontent-%COMP%]:not(:disabled):active{transform:translateY(0)}.btn.is-loading[_ngcontent-%COMP%]{position:relative;pointer-events:none}.btn.is-loading[_ngcontent-%COMP%]   .material-icons.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.person-form-container.is-submitting[_ngcontent-%COMP%]{pointer-events:none;opacity:.8}@media(max-width:767px){.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}input[_ngcontent-%COMP%]:focus-visible, textarea[_ngcontent-%COMP%]:focus-visible, select[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--accent);outline-offset:2px}.form-group[_ngcontent-%COMP%]   .flex.items-center.justify-between[_ngcontent-%COMP%]{margin-top:var(--s-2)}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{transition:all .2s ease}input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;accent-color:var(--accent);margin:0}input[type=checkbox][_ngcontent-%COMP%]:hover{transform:scale(1.1)}input[type=date][_ngcontent-%COMP%]{cursor:pointer}input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus-visible, textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus-visible{outline-color:var(--danger)}.form-error[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_errorSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_errorSlideIn{0%{opacity:0;transform:translate(-10px)}to{opacity:1;transform:translate(0)}}.form-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@media(max-width:767px){input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{min-height:44px;font-size:16px}.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-height:44px;display:flex;align-items:center}}.profile-photo-container[_ngcontent-%COMP%]{display:flex;gap:var(--s-6);align-items:flex-start;padding:var(--s-4);background:var(--bg-muted);border-radius:var(--r-md);margin-bottom:var(--s-4)}.photo-preview-area[_ngcontent-%COMP%]{flex-shrink:0;display:flex;justify-content:center;align-items:center;width:120px;height:120px;border-radius:var(--r-lg);background:var(--bg-card);border:2px dashed var(--border-color);overflow:hidden}.photo-preview[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.avatar-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;background:linear-gradient(135deg,var(--accent) 0%,var(--accent-soft) 100%);color:#fff;font-weight:600}.avatar-initials[_ngcontent-%COMP%]{font-size:36px;font-weight:700;letter-spacing:1px}.photo-controls[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--s-3)}.photo-controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{justify-content:center}.photo-controls[_ngcontent-%COMP%]   .form-hint[_ngcontent-%COMP%]{color:var(--text-muted);font-size:12px}@media(max-width:768px){.profile-photo-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.photo-controls[_ngcontent-%COMP%]{width:100%}}.date-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:var(--s-2)}.date-input[_ngcontent-%COMP%]{flex:1;padding:var(--s-2) var(--s-3);border:1px solid var(--border-color);border-radius:var(--r-sm);font-size:1rem;cursor:pointer;transition:all .2s ease}.date-input[_ngcontent-%COMP%]:hover{border-color:var(--accent);background:var(--bg-muted)}.date-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px #8b6f471a}.date-quick-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;padding:0;background:var(--bg-muted);border:1px solid var(--border-color);border-radius:var(--r-sm);color:var(--text-muted);cursor:pointer;transition:all .2s ease;flex-shrink:0}.date-quick-btn[_ngcontent-%COMP%]:hover{background:var(--accent-soft);border-color:var(--accent);color:var(--accent)}.date-quick-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.date-quick-select[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;margin-top:var(--s-2);background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--r-md);padding:var(--s-3);box-shadow:var(--shadow-lg);z-index:10;min-width:220px;animation:_ngcontent-%COMP%_slideDown .2s cubic-bezier(.34,1.56,.64,1)}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.quick-select-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-2);margin-bottom:var(--s-3)}.quick-select-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.group-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px}.quick-btn[_ngcontent-%COMP%]{padding:var(--s-2) var(--s-3);background:var(--bg-muted);border:1px solid var(--border-color);border-radius:var(--r-sm);color:var(--text-primary);font-size:.9rem;cursor:pointer;transition:all .2s ease;text-align:center}.quick-btn[_ngcontent-%COMP%]:hover{background:var(--accent-soft);border-color:var(--accent);color:var(--accent);transform:translateY(-2px)}.quick-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.date-display[_ngcontent-%COMP%]{display:inline-block;margin-top:var(--s-2);padding:var(--s-1) var(--s-2);background:var(--accent-soft);border-left:3px solid var(--accent);border-radius:var(--r-sm);font-size:.9rem;color:var(--accent);font-weight:500}'],changeDetection:0})};var Pd=class n{personService=_(Se);mediaService=_(be);router=_(Me);pendingPhotoFile=null;async handleSave(e){this.personService.addPerson(e).subscribe({next:t=>{console.log("\u2713 Person created:",t),this.pendingPhotoFile&&(console.log("\u23F3 Uploading profile photo..."),this.mediaService.uploadMedia(this.pendingPhotoFile,[t.id]),this.pendingPhotoFile=null),console.log("\u2713 Navigating to profile"),this.router.navigate(["/people",t.id])},error:t=>{console.error("\u2717 Failed to create person:",t)}})}handleCancel(){this.router.navigate(["/people"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-person-add-page"]],decls:10,vars:0,consts:[[1,"container"],[1,"page-header","flex","items-center","gap-2","mb-4"],["routerLink","/people",1,"btn","btn-outline","flex","items-center","gap-2"],[1,"material-icons"],[1,"card"],[3,"formSubmitted","formCancelled","photoSelected"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"a",2)(3,"span",3),l(4,"arrow_back"),d(),l(5," Back "),d(),u(6,"h1"),l(7,"Add Family Member"),d()(),u(8,"div",4)(9,"app-person-form",5),I("formSubmitted",function(o){return i.handleSave(o)})("formCancelled",function(){return i.handleCancel()})("photoSelected",function(o){return i.pendingPhotoFile=o}),d()()())},dependencies:[_o,Ce],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.btn[_ngcontent-%COMP%]{text-decoration:none;display:inline-flex;padding:var(--s-3) var(--s-4)}"],changeDetection:0})};var EO=n=>["/people",n];function xO(n,e){n&1&&(u(0,"a",2)(1,"span",5),l(2,"arrow_back"),d(),l(3," Back "),d()),n&2&&H("routerLink",Tn(1,EO,e.id))}function DO(n,e){n&1&&(u(0,"a",3)(1,"span",5),l(2,"arrow_back"),d(),l(3," Back "),d())}function wO(n,e){n&1&&(u(0,"div",4)(1,"div",6)(2,"span",7),l(3,"sync"),d(),u(4,"span",8),l(5,"Loading..."),d()()())}function MO(n,e){if(n&1){let t=N();u(0,"div",4)(1,"app-person-form",9),I("formSubmitted",function(r){x(t);let o=m();return D(o.handleSave(r))})("formCancelled",function(){x(t);let r=m();return D(r.handleCancel())})("photoSelected",function(r){x(t);let o=m();return D(o.pendingPhotoFile=r)}),d()()}n&2&&(p(),H("person",e))}function SO(n,e){n&1&&(u(0,"div",4)(1,"div",10)(2,"span",11),l(3,"person_off"),d(),u(4,"h3"),l(5,"Person Not Found"),d(),u(6,"p",8),l(7,"The requested family member could not be found."),d(),u(8,"a",12),l(9,"View All People"),d()()())}var Td=class n{personService=_(Se);mediaService=_(be);route=_(lt);router=_(Me);subscription=null;currentPersonId=null;pendingPhotoFile=null;person=E(void 0);isLoading=E(!0);ngOnInit(){this.subscription=this.route.paramMap.subscribe(e=>{let t=e.get("id");this.currentPersonId=t,this.isLoading.set(!0),t?setTimeout(()=>{this.person.set(this.personService.getPersonById(t)),this.isLoading.set(!1)},100):(this.person.set(void 0),this.isLoading.set(!1))})}ngOnDestroy(){this.subscription?.unsubscribe()}handleSave(e){let t=this.currentPersonId;t&&(this.personService.updatePerson(t,e),this.pendingPhotoFile&&(console.log("\u23F3 Uploading profile photo..."),this.mediaService.uploadMedia(this.pendingPhotoFile,[t]),this.pendingPhotoFile=null),setTimeout(()=>{this.router.navigate(["/people",t])},300))}handleCancel(){this.currentPersonId?this.router.navigate(["/people",this.currentPersonId]):this.router.navigate(["/people"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-person-edit-page"]],decls:9,vars:2,consts:[[1,"container"],[1,"page-header","flex","items-center","gap-2","mb-4"],[1,"btn","btn-outline","flex","items-center","gap-2",3,"routerLink"],["routerLink","/people",1,"btn","btn-outline","flex","items-center","gap-2"],[1,"card"],[1,"material-icons"],[1,"flex","items-center","justify-center","gap-4","py-8"],[1,"material-icons","spin"],[1,"text-muted"],["mode","edit",3,"formSubmitted","formCancelled","photoSelected","person"],[1,"text-center","py-8"],[1,"material-icons","icon-xl","text-muted","mb-4"],["routerLink","/people",1,"btn","btn-primary","mt-4"]],template:function(t,i){if(t&1&&(u(0,"div",0)(1,"div",1),C(2,xO,4,3,"a",2)(3,DO,4,0,"a",3),u(4,"h1"),l(5,"Edit Family Member"),d()(),C(6,wO,6,0,"div",4)(7,MO,2,1,"div",4)(8,SO,10,0,"div",4),d()),t&2){let r,o;p(2),b((r=i.person())?2:3,r),p(4),b(i.isLoading()?6:(o=i.person())?7:8,o)}},dependencies:[_o,Ce],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.py-8[_ngcontent-%COMP%]{padding-block:2rem}.mt-4[_ngcontent-%COMP%]{margin-top:1rem}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.btn[_ngcontent-%COMP%]{text-decoration:none;display:inline-flex;padding:var(--s-3) var(--s-4)}.icon-xl[_ngcontent-%COMP%]{font-size:3rem;display:block}"],changeDetection:0})};function IO(n,e){n&1&&(v(0,"div",1),ue(1,"div",18),g())}function PO(n,e){n&1&&(v(0,"div",20)(1,"span",6),l(2,"star"),g(),l(3," Featured "),g())}function TO(n,e){if(n&1&&(v(0,"div",2),ue(1,"img",19),C(2,PO,4,0,"div",20),g()),n&2){let t=m();p(),_e("src",t.featuredMediaUrl(),$e),p(),b(t.story().isFeatured?2:-1)}}function OO(n,e){if(n&1&&(v(0,"span",21),l(1),g()),n&2){let t=e.$implicit;p(),k(t)}}function kO(n,e){if(n&1&&(v(0,"span",21),l(1),g()),n&2){let t=m(2);p(),T("+",t.story().tags.length-3)}}function NO(n,e){if(n&1&&(v(0,"div",10),K(1,OO,2,1,"span",21,Ie),C(3,kO,2,1,"span",21),g()),n&2){let t=m();p(),X(t.story().tags.slice(0,3)),p(2),b(t.story().tags.length>3?3:-1)}}function AO(n,e){if(n&1&&(v(0,"span",13)(1,"span",6),l(2,"people"),g(),l(3),g()),n&2){let t=m();p(3),Fe(" ",t.story().involvedPersonIds.length," ",t.story().involvedPersonIds.length===1?"person":"people"," ")}}function RO(n,e){if(n&1){let t=N();v(0,"button",25),B("click",function(r){x(t);let o=m(2);return D(o.onDeleteClick(r))}),v(1,"span",6),l(2,"delete"),g()()}}function FO(n,e){if(n&1){let t=N();v(0,"div",26),B("click",function(r){return x(t),D(r.stopPropagation())}),v(1,"button",27),B("click",function(r){x(t);let o=m(2);return D(o.onDeleteClick(r))}),v(2,"span",6),l(3,"check"),g()(),v(4,"button",28),B("click",function(r){x(t);let o=m(2);return D(o.cancelDelete(r))}),v(5,"span",6),l(6,"close"),g()()()}}function LO(n,e){if(n&1){let t=N();v(0,"div",14)(1,"button",22),B("click",function(r){x(t);let o=m();return D(o.onEditClick(r))}),v(2,"span",6),l(3,"edit"),g()(),C(4,RO,3,0,"button",23)(5,FO,7,0,"div",24),g()}if(n&2){let t=m();p(4),b(t.showDeleteConfirm()?5:4)}}function VO(n,e){n&1&&(v(0,"span",16)(1,"span",6),l(2,"draft"),g(),l(3," Draft "),g())}function jO(n,e){n&1&&(v(0,"span",17)(1,"span",6),l(2,"verified"),g(),l(3," Verified "),g())}var Od=class n{mediaService=_(be);story=j.required();featuredMediaUrl=S(()=>{let e=this.story().featuredMediaId;return this.mediaService.getMediaUrl(e)});showActions=j(!0);compact=j(!1);isLoading=j(!1);storyClicked=G();editClicked=G();deleteClicked=G();personClicked=G();isHovered=E(!1);showDeleteConfirm=E(!1);categoryIcons={memory:"psychology",achievement:"emoji_events",tradition:"auto_awesome",recipe:"restaurant",migration:"flight_takeoff",career:"work",education:"school",romance:"favorite",hardship:"trending_up",humor:"sentiment_satisfied",historical:"history_edu",other:"article"};onStoryClick(){this.storyClicked.emit(this.story().id)}onEditClick(e){e.stopPropagation(),this.editClicked.emit(this.story().id)}onDeleteClick(e){if(e.stopPropagation(),!this.showDeleteConfirm()){this.showDeleteConfirm.set(!0),setTimeout(()=>this.showDeleteConfirm.set(!1),3e3);return}this.deleteClicked.emit(this.story().id),this.showDeleteConfirm.set(!1)}cancelDelete(e){e.stopPropagation(),this.showDeleteConfirm.set(!1)}onMouseEnter(){this.isHovered.set(!0)}onMouseLeave(){this.isHovered.set(!1),this.showDeleteConfirm.set(!1)}onPersonClick(e,t){e.stopPropagation(),this.personClicked.emit(t)}getCategoryIcon(e){return this.categoryIcons[e]||"article"}formatDate(e){if(!e)return"Date unknown";let t=typeof e=="string"?new Date(e):e,r=new Date().getTime()-t.getTime(),o=Math.floor(r/(1e3*60*60*24));return o<1?"Today":o<2?"Yesterday":o<7?`${o} days ago`:o<30?`${Math.floor(o/7)} weeks ago`:o<365?`${Math.floor(o/30)} months ago`:t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}getExcerpt(e,t=150){let i=e.replace(/<[^>]*>/g,"").replace(/[*_#`]/g,"");return i.length<=t?i:i.substring(0,t).trim()+"..."}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-story-card"]],inputs:{story:[1,"story"],showActions:[1,"showActions"],compact:[1,"compact"],isLoading:[1,"isLoading"]},outputs:{storyClicked:"storyClicked",editClicked:"editClicked",deleteClicked:"deleteClicked",personClicked:"personClicked"},decls:23,vars:21,consts:[["tabindex","0","role","button",1,"story-card",3,"click","keydown.enter","keydown.space","mouseenter","mouseleave"],[1,"skeleton-overlay"],[1,"story-media"],[1,"story-content"],[1,"story-header"],[1,"category-badge"],[1,"material-icons","icon-sm"],[1,"story-date"],[1,"story-title"],[1,"story-summary"],[1,"story-tags"],[1,"story-footer"],[1,"story-people"],[1,"people-label"],[1,"story-actions"],[1,"story-status"],[1,"status-badge","draft"],[1,"status-badge","verified"],[1,"skeleton-shimmer"],["alt","","loading","lazy",3,"src"],[1,"featured-badge"],[1,"tag"],["aria-label","Edit story","title","Edit story",1,"action-btn","edit-btn",3,"click"],["aria-label","Delete story","title","Delete story",1,"action-btn","delete-btn"],[1,"delete-confirm"],["aria-label","Delete story","title","Delete story",1,"action-btn","delete-btn",3,"click"],[1,"delete-confirm",3,"click"],["aria-label","Confirm delete","title","Confirm delete",1,"action-btn","confirm-btn",3,"click"],["aria-label","Cancel delete","title","Cancel",1,"action-btn","cancel-btn",3,"click"]],template:function(t,i){t&1&&(v(0,"article",0),B("click",function(){return i.onStoryClick()})("keydown.enter",function(){return i.onStoryClick()})("keydown.space",function(o){return i.onStoryClick(),o.preventDefault()})("mouseenter",function(){return i.onMouseEnter()})("mouseleave",function(){return i.onMouseLeave()}),C(1,IO,2,0,"div",1),C(2,TO,3,2,"div",2),v(3,"div",3)(4,"div",4)(5,"span",5)(6,"span",6),l(7),g(),l(8),g(),v(9,"time",7),l(10),g()(),v(11,"h3",8),l(12),g(),v(13,"p",9),l(14),g(),C(15,NO,4,1,"div",10),v(16,"div",11)(17,"div",12),C(18,AO,4,2,"span",13),g(),C(19,LO,6,1,"div",14),g(),v(20,"div",15),C(21,VO,4,0,"span",16),C(22,jO,4,0,"span",17),g()()()),t&2&&(z("compact",i.compact())("is-loading",i.isLoading())("is-hovered",i.isHovered()),te("aria-label","Story: "+i.story().title),p(),b(i.isLoading()?1:-1),p(),b(i.featuredMediaUrl()?2:-1),p(3),te("data-category",i.story().category),p(2),k(i.getCategoryIcon(i.story().category)),p(),T(" ",i.story().category," "),p(),te("datetime",i.story().eventDate),p(),T(" ",i.formatDate(i.story().eventDate)," "),p(2),k(i.story().title),p(2),T(" ",i.story().summary||i.getExcerpt(i.story().content)," "),p(),b(!i.compact()&&i.story().tags.length>0?15:-1),p(3),b(i.story().involvedPersonIds.length>0?18:-1),p(),b(i.showActions()?19:-1),p(2),b(i.story().isPublished?-1:21),p(),b(i.story().isVerified?22:-1))},styles:[".story-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:var(--bg-card);border-radius:var(--r-lg);box-shadow:var(--shadow-sm);overflow:hidden;transition:box-shadow .3s ease,transform .3s ease;cursor:pointer;position:relative}.story-card.is-hovered[_ngcontent-%COMP%], .story-card[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-md);transform:translateY(-2px) scale(1.01)}.story-card[_ngcontent-%COMP%]:focus{outline:2px solid var(--primary);outline-offset:2px}.story-card.is-loading[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}.skeleton-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:var(--bg-card);z-index:10;overflow:hidden}.skeleton-shimmer[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(90deg,var(--bg-muted) 0%,var(--bg-card) 50%,var(--bg-muted) 100%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}.story-card.compact[_ngcontent-%COMP%]{flex-direction:row}.story-card.compact[_ngcontent-%COMP%]   .story-media[_ngcontent-%COMP%]{width:120px;height:120px;flex-shrink:0}.story-card.compact[_ngcontent-%COMP%]   .story-content[_ngcontent-%COMP%]{padding:var(--s-4)}.story-media[_ngcontent-%COMP%]{position:relative;width:100%;height:200px;background:var(--bg-muted);overflow:hidden}.story-media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.featured-badge[_ngcontent-%COMP%]{position:absolute;top:var(--s-3);right:var(--s-3);display:flex;align-items:center;gap:var(--s-2);padding:var(--s-2) var(--s-3);background:#ffc107f2;color:#000;font-size:.85rem;font-weight:600;border-radius:var(--r-full);box-shadow:var(--shadow-sm)}.story-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-3);padding:var(--s-6);flex:1}.story-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--s-3);flex-wrap:wrap}.category-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);padding:var(--s-2) var(--s-3);background:var(--accent-soft);color:var(--accent);font-size:.85rem;font-weight:600;border-radius:var(--r-full);text-transform:capitalize;transition:all .2s ease}.story-card.is-hovered[_ngcontent-%COMP%]   .category-badge[_ngcontent-%COMP%]{transform:scale(1.05)}.category-badge[data-category=achievement][_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.category-badge[data-category=romance][_ngcontent-%COMP%]{background:#fce7f3;color:#9f1239}.category-badge[data-category=hardship][_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.category-badge[data-category=humor][_ngcontent-%COMP%]{background:#fef9c3;color:#854d0e}.story-date[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem}.story-title[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;line-height:1.3;color:var(--text-primary);font-weight:600;transition:color .2s ease}.story-card.is-hovered[_ngcontent-%COMP%]   .story-title[_ngcontent-%COMP%]{color:var(--accent)}.story-summary[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);font-size:1rem;line-height:1.6;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;line-clamp:3;overflow:hidden}.story-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--s-2)}.tag[_ngcontent-%COMP%]{padding:var(--s-2) var(--s-3);background:var(--bg-muted);color:var(--text-secondary);font-size:.85rem;border-radius:var(--r-sm)}.story-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--s-3);padding-top:var(--s-3);border-top:1px solid var(--border-color);margin-top:auto}.story-people[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2)}.people-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);color:var(--text-muted);font-size:.9rem}.story-actions[_ngcontent-%COMP%]{display:flex;gap:var(--s-2);align-items:center}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-width:44px;min-height:44px;padding:var(--s-2);background:transparent;border:1px solid var(--border-color);border-radius:var(--r-md);color:var(--text-secondary);cursor:pointer;transition:all .2s ease}.action-btn[_ngcontent-%COMP%]:hover{background:var(--accent-soft);border-color:var(--accent);color:var(--accent);transform:scale(1.1) rotate(5deg)}.action-btn[_ngcontent-%COMP%]:focus{outline:2px solid var(--accent);outline-offset:2px}.edit-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.delete-btn[_ngcontent-%COMP%]:hover{background:#fee2e2;border-color:#ef4444;color:#ef4444;transform:scale(1.1)}.delete-confirm[_ngcontent-%COMP%]{display:flex;gap:var(--s-2);animation:_ngcontent-%COMP%_slideIn .2s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(-10px)}to{opacity:1;transform:translate(0)}}.confirm-btn[_ngcontent-%COMP%]{background:#22c55e;border-color:#22c55e;color:#fff}.confirm-btn[_ngcontent-%COMP%]:hover{background:#16a34a;border-color:#16a34a;transform:scale(1.1)}.cancel-btn[_ngcontent-%COMP%]{background:#ef4444;border-color:#ef4444;color:#fff}.cancel-btn[_ngcontent-%COMP%]:hover{background:#dc2626;border-color:#dc2626;transform:scale(1.1)}.story-status[_ngcontent-%COMP%]{display:flex;gap:var(--s-2);flex-wrap:wrap}.status-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);padding:var(--s-2) var(--s-3);font-size:.85rem;border-radius:var(--r-full);font-weight:500}.status-badge.draft[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.status-badge.verified[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}@media(max-width:767px){.story-media[_ngcontent-%COMP%]{height:160px}.story-content[_ngcontent-%COMP%]{padding:var(--s-4)}.story-title[_ngcontent-%COMP%]{font-size:1.2rem}.story-summary[_ngcontent-%COMP%]{font-size:.95rem;-webkit-line-clamp:2;line-clamp:2}.story-footer[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.story-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}}@media(prefers-reduced-motion:reduce){.story-card[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{transition:none;transform:none!important}.story-card[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover{transform:none}}"],changeDetection:0})};var BO=(n,e)=>e.value,UO=(n,e)=>e.id;function $O(n,e){if(n&1){let t=N();u(0,"div",1)(1,"span",10),l(2,"check_circle"),d(),u(3,"span"),l(4),d(),u(5,"button",18),I("click",function(){x(t);let r=m();return D(r.dismissFeedback())}),u(6,"span",10),l(7,"close"),d()()()}if(n&2){let t=m();p(4),k(t.feedbackMessage())}}function HO(n,e){if(n&1){let t=N();u(0,"button",19),I("click",function(){x(t);let r=m();return D(r.clearSearch())}),u(1,"span",10),l(2,"close"),d()()}}function zO(n,e){if(n&1){let t=N();u(0,"button",21),I("click",function(){let r=x(t).$implicit,o=m(2);return D(o.setCategory(r.value))}),u(1,"span",10),l(2),d(),l(3),d()}if(n&2){let t=e.$implicit,i=m(2);z("active",i.filterCategory()===t.value),p(2),k(t.icon),p(),T(" ",t.label," ")}}function GO(n,e){if(n&1&&(u(0,"div",15),K(1,zO,4,4,"button",20,BO),d()),n&2){let t=m();p(),X(t.categories)}}function WO(n,e){n&1&&l(0," Try adjusting your filters or search terms ")}function qO(n,e){n&1&&l(0," Start capturing family memories by creating your first story ")}function YO(n,e){n&1&&(u(0,"a",25)(1,"span",10),l(2,"add"),d(),l(3," Create Story "),d())}function QO(n,e){if(n&1&&(u(0,"div",16)(1,"span",22),l(2,"auto_stories"),d(),u(3,"h2",23),l(4,"No stories found"),d(),u(5,"p",24),C(6,WO,1,0)(7,qO,1,0),d(),C(8,YO,4,0,"a",25),d()),n&2){let t=m();p(6),b(t.searchQuery()||t.filterCategory()!=="all"?6:7),p(2),b(t.showActions()?8:-1)}}function ZO(n,e){if(n&1){let t=N();u(0,"div",28)(1,"app-story-card",29),I("storyClicked",function(r){x(t);let o=m(2);return D(o.onStoryClick(r))})("editClicked",function(r){x(t);let o=m(2);return D(o.onEditClick(r))})("deleteClicked",function(r){x(t);let o=m(2);return D(o.onDeleteClick(r))})("personClicked",function(r){x(t);let o=m(2);return D(o.onPersonClick(r))}),d()()}if(n&2){let t=e.$implicit,i=e.$index,r=m(2);Xe("animation-delay",r.getCardDelay(i)),p(),H("story",t)("compact",r.viewMode()==="list")("isLoading",r.isLoading())("showActions",r.showActions())}}function KO(n,e){if(n&1&&(u(0,"div",26),K(1,ZO,2,6,"div",27,UO),d()),n&2){let t=m();z("list-view",t.viewMode()==="list"),p(),X(t.filteredStories())}}var kd=class n{stories=j.required();personId=j();generationNumber=j();showActions=j(!0);storySelected=G();createStory=G();editStory=G();deleteStory=G();personClicked=G();viewMode=E("grid");sortBy=E("event");filterCategory=E("all");searchQuery=E("");showFilters=E(!1);isLoading=E(!1);feedbackMessage=E("");showFeedback=E(!1);animateCards=E(!0);filteredStories=S(()=>{let e=[...this.stories()];if(this.personId()){let r=this.personId();e=e.filter(o=>o.primaryPersonId===r||o.involvedPersonIds.includes(r))}this.filterCategory()!=="all"&&(e=e.filter(r=>r.category===this.filterCategory()));let t=this.searchQuery().toLowerCase().trim();t&&(e=e.filter(r=>r.title.toLowerCase().includes(t)||r.content.toLowerCase().includes(t)||r.tags.some(o=>o.toLowerCase().includes(t))));let i=this.sortBy();return e.sort((r,o)=>{if(i==="event"){let s=r.eventDate?new Date(r.eventDate).getTime():0;return(o.eventDate?new Date(o.eventDate).getTime():0)-s}else return i==="updated"?new Date(o.updatedAt).getTime()-new Date(r.updatedAt).getTime():new Date(o.createdAt).getTime()-new Date(r.createdAt).getTime()}),e});storyCount=S(()=>this.filteredStories().length);categories=[{value:"all",label:"All Stories",icon:"auto_stories"},{value:"memory",label:"Memories",icon:"psychology"},{value:"achievement",label:"Achievements",icon:"emoji_events"},{value:"tradition",label:"Traditions",icon:"auto_awesome"},{value:"recipe",label:"Recipes",icon:"restaurant"},{value:"romance",label:"Romance",icon:"favorite"},{value:"humor",label:"Humor",icon:"sentiment_satisfied"}];toggleViewMode(){this.viewMode.update(e=>e==="grid"?"list":"grid")}setSortBy(e){this.sortBy.set(e)}setCategory(e){this.filterCategory.set(e)}toggleFilters(){this.showFilters.update(e=>!e)}onSearchChange(e){let t=e.target;this.searchQuery.set(t.value)}clearSearch(){this.searchQuery.set("")}onStoryClick(e){this.storySelected.emit(e),this.showSuccessFeedback("Opening story...")}onCreateClick(){this.createStory.emit()}onEditClick(e){this.editStory.emit(e),this.showSuccessFeedback("Opening editor...")}onDeleteClick(e){this.deleteStory.emit(e),this.showSuccessFeedback("Story deleted")}onPersonClick(e){this.personClicked.emit(e)}showSuccessFeedback(e){this.feedbackMessage.set(e),this.showFeedback.set(!0),setTimeout(()=>this.showFeedback.set(!1),2e3)}dismissFeedback(){this.showFeedback.set(!1)}getCardDelay(e){return this.animateCards()?`${e*.05}s`:"0s"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-stories-list"]],inputs:{stories:[1,"stories"],personId:[1,"personId"],generationNumber:[1,"generationNumber"],showActions:[1,"showActions"]},outputs:{storySelected:"storySelected",createStory:"createStory",editStory:"editStory",deleteStory:"deleteStory",personClicked:"personClicked"},decls:37,vars:17,consts:[[1,"container"],["role","status","aria-live","polite",1,"feedback-toast"],[1,"stories-toolbar"],[1,"search-box"],[1,"material-icons","icon-sm","search-icon"],["type","search","placeholder","Search stories, people, tags...","aria-label","Search stories",1,"search-input",3,"input","value"],["aria-label","Clear search",1,"clear-search-btn"],[1,"toolbar-actions"],[1,"sort-dropdown"],[1,"btn","btn-outline"],[1,"material-icons","icon-sm"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["aria-label","Toggle filters",1,"btn","btn-outline",3,"click"],[1,"btn","btn-outline","view-toggle",3,"click"],[1,"category-filters"],[1,"empty-state"],["role","feed","aria-label","Stories feed",1,"stories-grid",3,"list-view"],["aria-label","Dismiss",1,"dismiss-btn",3,"click"],["aria-label","Clear search",1,"clear-search-btn",3,"click"],[1,"filter-chip",3,"active"],[1,"filter-chip",3,"click"],[1,"material-icons","icon-xl"],[1,"empty-title"],[1,"empty-message","text-muted"],["routerLink","/stories/new",1,"btn","btn-primary"],["role","feed","aria-label","Stories feed",1,"stories-grid"],[1,"story-card-wrapper",3,"animation-delay"],[1,"story-card-wrapper"],[3,"storyClicked","editClicked","deleteClicked","personClicked","story","compact","isLoading","showActions"]],template:function(t,i){t&1&&(u(0,"div",0),C(1,$O,8,1,"div",1),u(2,"div",2)(3,"div",3)(4,"span",4),l(5,"search"),d(),u(6,"input",5),I("input",function(o){return i.onSearchChange(o)}),d(),C(7,HO,3,0,"button",6),d(),u(8,"div",7)(9,"div",8)(10,"button",9)(11,"span",10),l(12,"sort"),d(),l(13," Sort by "),d(),u(14,"div",11)(15,"button",12),I("click",function(){return i.setSortBy("event")}),u(16,"span",10),l(17,"event"),d(),l(18," Event Date "),d(),u(19,"button",12),I("click",function(){return i.setSortBy("created")}),u(20,"span",10),l(21,"schedule"),d(),l(22," Created Date "),d(),u(23,"button",12),I("click",function(){return i.setSortBy("updated")}),u(24,"span",10),l(25,"update"),d(),l(26," Last Updated "),d()()(),u(27,"button",13),I("click",function(){return i.toggleFilters()}),u(28,"span",10),l(29,"filter_list"),d(),l(30," Filters "),d(),u(31,"button",14),I("click",function(){return i.toggleViewMode()}),u(32,"span",10),l(33),d()()()(),C(34,GO,3,0,"div",15),C(35,QO,9,2,"div",16),C(36,KO,3,2,"div",17),d()),t&2&&(p(),b(i.showFeedback()?1:-1),p(5),H("value",i.searchQuery()),p(),b(i.searchQuery()?7:-1),p(8),z("active",i.sortBy()==="event"),p(4),z("active",i.sortBy()==="created"),p(4),z("active",i.sortBy()==="updated"),p(4),z("active",i.showFilters()),te("aria-expanded",i.showFilters()),p(4),te("aria-label","Switch to "+(i.viewMode()==="grid"?"list":"grid")+" view"),p(2),T(" ",i.viewMode()==="grid"?"view_list":"grid_view"," "),p(),b(i.showFilters()?34:-1),p(),b(i.storyCount()===0?35:-1),p(),b(i.storyCount()>0?36:-1))},dependencies:[Od,Ce],styles:[".feedback-toast[_ngcontent-%COMP%]{position:fixed;top:var(--s-4);right:var(--s-4);display:flex;align-items:center;gap:var(--s-3);padding:var(--s-4) var(--s-6);background:linear-gradient(135deg,#10b981,#059669);color:#fff;border-radius:var(--r-lg);box-shadow:var(--shadow-lg);z-index:1000;animation:_ngcontent-%COMP%_slideInDown .3s ease-out;min-width:280px}@keyframes _ngcontent-%COMP%_slideInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.dismiss-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-width:32px;min-height:32px;padding:0;background:#fff3;border:none;border-radius:var(--r-full);color:#fff;cursor:pointer;transition:all .2s ease;margin-left:auto}.dismiss-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.stories-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:var(--s-4);margin-bottom:var(--s-8);flex-wrap:wrap}.header-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-2)}.stories-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-3);margin:0;font-size:2rem;font-weight:var(--fw-bold);color:var(--text-primary)}.stories-subtitle[_ngcontent-%COMP%]{margin:0;font-size:1rem}.stories-toolbar[_ngcontent-%COMP%]{display:flex;gap:var(--s-4);margin-bottom:var(--s-6);flex-wrap:wrap;align-items:center}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-3);flex:1;min-width:280px;padding:0 var(--s-4);background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--r-lg);transition:all .3s ease}.search-box[_ngcontent-%COMP%]:focus-within{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-soft);transform:scale(1.01)}.search-icon[_ngcontent-%COMP%]{color:var(--text-muted)}.search-input[_ngcontent-%COMP%]{flex:1;min-height:52px;padding:0;border:none;background:transparent;font-size:1rem;color:var(--text-primary)}.search-input[_ngcontent-%COMP%]:focus{outline:none}.clear-search-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-width:36px;min-height:36px;padding:0;background:transparent;border:none;border-radius:var(--r-full);color:var(--text-muted);cursor:pointer;transition:all .2s ease}.clear-search-btn[_ngcontent-%COMP%]:hover{background:var(--bg-muted);color:var(--text-primary);transform:scale(1.1)}.toolbar-actions[_ngcontent-%COMP%]{display:flex;gap:var(--s-3);align-items:center}.view-toggle[_ngcontent-%COMP%]{min-width:52px}.sort-dropdown[_ngcontent-%COMP%]{position:relative}.sort-dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%], .sort-dropdown[_ngcontent-%COMP%]:focus-within   .dropdown-menu[_ngcontent-%COMP%]{display:block}.dropdown-menu[_ngcontent-%COMP%]{display:none;position:absolute;top:calc(100% + var(--s-2));right:0;min-width:200px;background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--r-md);box-shadow:var(--shadow-lg);z-index:100;overflow:hidden}.dropdown-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-3);width:100%;min-height:44px;padding:var(--s-3) var(--s-4);background:transparent;border:none;text-align:left;font-size:.95rem;color:var(--text-primary);cursor:pointer;transition:background .2s ease}.dropdown-item[_ngcontent-%COMP%]:hover{background:var(--accent-soft)}.dropdown-item.active[_ngcontent-%COMP%]{background:var(--accent-soft);color:var(--accent);font-weight:600}.category-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--s-3);padding:var(--s-4);background:var(--bg-card);border-radius:var(--r-lg);margin-bottom:var(--s-6);animation:_ngcontent-%COMP%_slideDown .2s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.filter-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);min-height:44px;padding:var(--s-3) var(--s-4);background:var(--bg-main);border:2px solid transparent;border-radius:var(--r-full);font-size:.95rem;color:var(--text-secondary);cursor:pointer;transition:all .2s ease}.filter-chip[_ngcontent-%COMP%]:hover{background:var(--accent-soft);border-color:var(--accent);color:var(--accent);transform:scale(1.02)}.filter-chip.active[_ngcontent-%COMP%]{background:var(--accent);color:#fff;font-weight:600;transform:scale(1.02)}.filter-chip[_ngcontent-%COMP%]:focus{outline:2px solid var(--accent);outline-offset:2px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--s-4);padding:var(--s-16) var(--s-8);text-align:center}.empty-state[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--text-muted)}.empty-title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--text-primary);font-weight:600}.empty-message[_ngcontent-%COMP%]{margin:0;max-width:400px;font-size:1rem;line-height:1.6}.stories-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:var(--s-6)}.story-card-wrapper[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease-out backwards}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.stories-grid.list-view[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--s-4)}@media(max-width:1023px){.stories-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}}@media(max-width:767px){.stories-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.stories-title[_ngcontent-%COMP%]{font-size:1.6rem}.stories-toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]{min-width:100%}.toolbar-actions[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.stories-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.category-filters[_ngcontent-%COMP%]{gap:var(--s-2)}.filter-chip[_ngcontent-%COMP%]{font-size:.85rem;padding:var(--s-2) var(--s-3)}}@media(prefers-reduced-motion:reduce){.category-filters[_ngcontent-%COMP%]{animation:none}.clear-search-btn[_ngcontent-%COMP%]:hover, .filter-chip[_ngcontent-%COMP%]:hover, .filter-chip.active[_ngcontent-%COMP%]{transform:none}}"],changeDetection:0})};function XO(n,e){n&1&&(u(0,"a",3)(1,"span",7),l(2,"edit_note"),d(),l(3," Write Story "),d())}function JO(n,e){n&1&&(u(0,"div",4)(1,"span",8),l(2,"sync"),d(),u(3,"p"),l(4,"Loading stories..."),d()())}function ek(n,e){n&1&&(u(0,"a",10)(1,"span",7),l(2,"edit_note"),d(),l(3," Write Your First Story "),d())}function tk(n,e){n&1&&(u(0,"p",11),l(1,"Sign in as admin to write stories."),d())}function nk(n,e){if(n&1&&(u(0,"div",5)(1,"span",9),l(2,"auto_stories"),d(),u(3,"h2"),l(4,"No Stories Yet"),d(),u(5,"p",2),l(6,"Preserve your family's memories and traditions by writing stories."),d(),C(7,ek,4,0,"a",10)(8,tk,2,0,"p",11),d()),n&2){let t=m();p(7),b(t.isAdmin()?7:8)}}function ik(n,e){if(n&1){let t=N();u(0,"app-stories-list",12),I("storySelected",function(r){x(t);let o=m();return D(o.handleStoryClick(r))})("editStory",function(r){x(t);let o=m();return D(o.handleEditClick(r))})("deleteStory",function(r){x(t);let o=m();return D(o.handleDeleteClick(r))})("personClicked",function(r){x(t);let o=m();return D(o.handlePersonClick(r))}),d()}if(n&2){let t=m();H("stories",t.stories())("showActions",t.isAdmin())}}var Nd=class n{storiesService=_(Xt);authService=_(Le);router=_(Me);isLoading=S(()=>this.storiesService.loading());stories=S(()=>this.storiesService.allStories());isAdmin=this.authService.isAdmin;storyStats=S(()=>{let e=this.stories().length,t=this.storiesService.publishedStories().length;return e===0?"No stories yet":`${e} stories \u2022 ${t} published`});handleStoryClick(e){this.router.navigate(["/stories",e])}handleEditClick(e){this.router.navigate(["/stories",e,"edit"])}handleDeleteClick(e){this.storiesService.deleteStory(e)}handlePersonClick(e){this.router.navigate(["/people",e])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-stories-page"]],decls:11,vars:3,consts:[[1,"container"],[1,"page-header","flex","flex-col","md-flex-row","items-start","md-items-center","justify-between","gap-4"],[1,"text-muted"],["routerLink","/stories/new",1,"btn","btn-primary","flex","items-center","gap-2"],[1,"loading-state"],[1,"empty-state","card"],[3,"stories","showActions"],[1,"material-icons"],[1,"material-icons","spin"],[1,"material-icons","icon-xl"],["routerLink","/stories/new",1,"btn","btn-primary","btn-lg","mt-4"],[1,"text-muted","mt-4"],[3,"storySelected","editStory","deleteStory","personClicked","stories","showActions"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Family Stories"),d(),u(5,"p",2),l(6),d()(),C(7,XO,4,0,"a",3),d(),C(8,JO,5,0,"div",4)(9,nk,9,1,"div",5)(10,ik,1,2,"app-stories-list",6),d()),t&2&&(p(6),k(i.storyStats()),p(),b(i.isAdmin()?7:-1),p(),b(i.isLoading()?8:i.stories().length===0?9:10))},dependencies:[kd,Ce],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:.5rem}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--s-12)}.loading-state[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-muted);margin-bottom:var(--s-4);display:block}.empty-state[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:4rem;color:var(--primary-lighter)}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.btn[_ngcontent-%COMP%]{text-decoration:none;display:inline-flex;align-items:center;gap:var(--s-2);padding:var(--s-3) var(--s-4)}.btn-lg[_ngcontent-%COMP%]{padding:var(--s-4) var(--s-6)}.mt-4[_ngcontent-%COMP%]{margin-top:var(--s-4)}"],changeDetection:0})};function rk(n,e){if(n&1){let t=N();v(0,"button",31),B("click",function(){x(t);let r=m();return D(r.onEdit())}),v(1,"span",5),l(2,"edit"),g(),l(3," Edit "),g(),v(4,"button",32),B("click",function(){x(t);let r=m();return D(r.onDelete())}),v(5,"span",5),l(6,"delete"),g()()}}function ok(n,e){n&1&&(v(0,"span",12)(1,"span",5),l(2,"star"),g(),l(3," Featured "),g())}function sk(n,e){n&1&&(v(0,"span",13)(1,"span",5),l(2,"verified"),g(),l(3," Verified "),g())}function ak(n,e){if(n&1&&(v(0,"div",16)(1,"span",5),l(2,"event"),g(),v(3,"time"),l(4),g()()),n&2){let t=m();p(3),te("datetime",t.story().eventDate),p(),T(" ",t.formatDate(t.story().eventDate)," ")}}function lk(n,e){if(n&1&&(v(0,"div",16)(1,"span",5),l(2,"location_on"),g(),l(3),g()),n&2){let t=m();p(3),T(" ",t.story().location," ")}}function ck(n,e){if(n&1&&(v(0,"div",16)(1,"span",5),l(2,"people"),g(),l(3),g()),n&2){let t=m();p(3),Fe(" ",t.story().involvedPersonIds.length+1," ",t.story().involvedPersonIds.length===0?"person":"people"," ")}}function dk(n,e){if(n&1&&(v(0,"span",33),l(1),g()),n&2){let t=e.$implicit;p(),k(t)}}function uk(n,e){if(n&1&&(v(0,"div",17),K(1,dk,2,1,"span",33,Ie),g()),n&2){let t=m();p(),X(t.story().tags)}}function pk(n,e){if(n&1&&(v(0,"div",22)(1,"span",5),l(2,"comment"),g(),l(3),g()),n&2){let t=m();p(3),Fe(" ",t.story().commentIds.length," ",t.story().commentIds.length===1?"comment":"comments"," ")}}function fk(n,e){if(n&1&&(v(0,"div",34)(1,"strong"),l(2,"Narrator:"),g(),v(3,"span"),l(4),g()()),n&2){let t=m(2);p(4),k(t.story().narratorId)}}function mk(n,e){if(n&1&&(v(0,"div",34)(1,"strong"),l(2,"Published:"),g(),v(3,"span"),l(4),g()()),n&2){let t=m(2);p(4),k(t.formatDate(t.story().publishedAt))}}function hk(n,e){if(n&1&&(v(0,"li"),l(1),g()),n&2){let t=e.$implicit;p(),k(t)}}function gk(n,e){if(n&1&&(v(0,"div",34)(1,"strong"),l(2,"Sources:"),g(),v(3,"ul",35),K(4,hk,2,1,"li",null,Ie),g()()),n&2){let t=m(2);p(4),X(t.story().sources)}}function vk(n,e){if(n&1&&(v(0,"div",23)(1,"div",34)(2,"strong"),l(3,"Author:"),g(),v(4,"span"),l(5),g()(),C(6,fk,5,1,"div",34),v(7,"div",34)(8,"strong"),l(9,"Created:"),g(),v(10,"span"),l(11),g()(),v(12,"div",34)(13,"strong"),l(14,"Last Updated:"),g(),v(15,"span"),l(16),g()(),C(17,mk,5,1,"div",34),C(18,gk,6,0,"div",34),g()),n&2){let t=m();p(5),k(t.story().authorId),p(),b(t.story().narratorId?6:-1),p(5),k(t.formatDate(t.story().createdAt)),p(5),k(t.formatDate(t.story().updatedAt)),p(),b(t.story().publishedAt?17:-1),p(),b(t.story().sources&&t.story().sources.length>0?18:-1)}}function yk(n,e){if(n&1){let t=N();v(0,"button",29),B("click",function(){let r=x(t).$implicit,o=m();return D(o.onPersonClick(r))}),v(1,"span",5),l(2,"person_outline"),g(),l(3),g()}if(n&2){let t=e.$implicit;p(3),T(" ",t," ")}}var Ad=class n{story=j.required();canEdit=j(!1);back=G();edit=G();delete=G();personClicked=G();likeStory=G();showFullMeta=E(!1);readingProgress=E(0);isLiked=E(!1);showLikeAnimation=E(!1);formattedContent=S(()=>this.renderMarkdown(this.story().content));categoryIcon=S(()=>({memory:"psychology",achievement:"emoji_events",tradition:"auto_awesome",recipe:"restaurant",migration:"flight_takeoff",career:"work",education:"school",romance:"favorite",hardship:"trending_up",humor:"sentiment_satisfied",historical:"history_edu",other:"article"})[this.story().category]||"article");onBack(){this.back.emit()}onEdit(){this.edit.emit(this.story().id)}onDelete(){confirm("Are you sure you want to delete this story? This action cannot be undone.")&&this.delete.emit(this.story().id)}onPersonClick(e){this.personClicked.emit(e)}onLike(){this.isLiked.update(e=>!e),this.showLikeAnimation.set(!0),setTimeout(()=>this.showLikeAnimation.set(!1),600),this.likeStory.emit(this.story().id)}toggleMeta(){this.showFullMeta.update(e=>!e)}onPrint(){window.print()}onScroll(e){let t=e.target,i=t.scrollTop,r=t.scrollHeight-t.clientHeight,o=i/r*100;this.readingProgress.set(Math.min(100,Math.max(0,o)))}formatDate(e){return e?(typeof e=="string"?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Date unknown"}renderMarkdown(e){let t=e;t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/^## (.+)$/gm,"<h2>$1</h2>"),t=t.replace(/^### (.+)$/gm,"<h3>$1</h3>"),t=t.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),t=t.replace(/\*(.+?)\*/g,"<em>$1</em>"),t=t.replace(/\[(.+?)\]\((.+?)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>');let i=t.split(`
`),r=!1,o=[];for(let a=0;a<i.length;a++){let c=i[a];c.trim().startsWith("- ")?(r||(o.push("<ul>"),r=!0),o.push(`<li>${c.trim().substring(2)}</li>`)):(r&&(o.push("</ul>"),r=!1),o.push(c))}return r&&o.push("</ul>"),t=o.join(`
`),t=t.split(`

`).map(a=>a.trim().startsWith("<h")||a.trim().startsWith("<ul")||a.trim().startsWith("<li")||a.trim()===""?a:`<p>${a.trim()}</p>`).join(`
`),t}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-story-detail"]],inputs:{story:[1,"story"],canEdit:[1,"canEdit"]},outputs:{back:"back",edit:"edit",delete:"delete",personClicked:"personClicked",likeStory:"likeStory"},decls:63,vars:28,consts:[[1,"container",3,"scroll"],[1,"reading-progress-bar"],[1,"progress-fill"],[1,"story-nav"],["aria-label","Back to stories",1,"btn","btn-outline","nav-back",3,"click"],[1,"material-icons","icon-sm"],[1,"nav-actions"],["aria-label","Print story",1,"btn","btn-outline",3,"click"],[1,"story-article"],[1,"story-header"],[1,"story-meta-top"],[1,"category-badge"],[1,"featured-badge"],[1,"verified-badge"],[1,"story-title"],[1,"story-metadata"],[1,"meta-item"],[1,"story-tags"],[1,"story-content",3,"innerHTML"],[1,"story-footer"],[1,"story-stats"],["aria-label","Like story",1,"stat-button","like-button",3,"click"],[1,"stat-item"],[1,"full-metadata"],[1,"btn","btn-outline","toggle-meta",3,"click"],[1,"story-sidebar"],[1,"sidebar-section"],[1,"sidebar-title"],[1,"people-list"],[1,"person-link",3,"click"],[1,"person-link"],["aria-label","Edit story",1,"btn","btn-outline",3,"click"],["aria-label","Delete story",1,"btn","btn-outline","btn-danger",3,"click"],[1,"tag"],[1,"meta-row"],[1,"sources-list"]],template:function(t,i){t&1&&(v(0,"div",0),B("scroll",function(o){return i.onScroll(o)}),v(1,"div",1),ue(2,"div",2),g(),v(3,"nav",3)(4,"button",4),B("click",function(){return i.onBack()}),v(5,"span",5),l(6,"arrow_back"),g(),l(7," Back to Stories "),g(),v(8,"div",6)(9,"button",7),B("click",function(){return i.onPrint()}),v(10,"span",5),l(11,"print"),g()(),C(12,rk,7,0),g()(),v(13,"article",8)(14,"header",9)(15,"div",10)(16,"span",11)(17,"span",5),l(18),g(),l(19),g(),C(20,ok,4,0,"span",12),C(21,sk,4,0,"span",13),g(),v(22,"h1",14),l(23),g(),v(24,"div",15),C(25,ak,5,2,"div",16),C(26,lk,4,1,"div",16),C(27,ck,4,2,"div",16),v(28,"div",16)(29,"span",5),l(30,"schedule"),g(),l(31),g()(),C(32,uk,3,0,"div",17),g(),ue(33,"div",18),v(34,"footer",19)(35,"div",20)(36,"button",21),B("click",function(){return i.onLike()}),v(37,"span",5),l(38),g(),l(39),g(),v(40,"div",22)(41,"span",5),l(42,"visibility"),g(),l(43),g(),C(44,pk,4,2,"div",22),g(),C(45,vk,19,6,"div",23),v(46,"button",24),B("click",function(){return i.toggleMeta()}),l(47),v(48,"span",5),l(49),g()()()(),v(50,"aside",25)(51,"div",26)(52,"h3",27)(53,"span",5),l(54,"people"),g(),l(55," People in This Story "),g(),v(56,"div",28)(57,"button",29),B("click",function(){return i.onPersonClick(i.story().primaryPersonId)}),v(58,"span",5),l(59,"person"),g(),l(60),g(),K(61,yk,4,1,"button",30,Ie),g()()()()),t&2&&(p(2),Xe("width",i.readingProgress(),"%"),p(10),b(i.canEdit()?12:-1),p(4),te("data-category",i.story().category),p(2),k(i.categoryIcon()),p(),T(" ",i.story().category," "),p(),b(i.story().isFeatured?20:-1),p(),b(i.story().isVerified?21:-1),p(2),k(i.story().title),p(2),b(i.story().eventDate?25:-1),p(),b(i.story().location?26:-1),p(),b(i.story().involvedPersonIds.length>0?27:-1),p(4),T(" ",i.formatDate(i.story().createdAt)," "),p(),b(i.story().tags.length>0?32:-1),p(),_e("innerHTML",i.formattedContent(),cs),p(3),z("is-liked",i.isLiked())("show-animation",i.showLikeAnimation()),p(2),T(" ",i.isLiked()?"favorite":"favorite_border"," "),p(),Fe(" ",i.story().likeCount+(i.isLiked()?1:0)," ",i.story().likeCount+(i.isLiked()?1:0)===1?"like":"likes"," "),p(4),T(" ",i.story().viewCount," views "),p(),b(i.story().commentIds.length>0?44:-1),p(),b(i.showFullMeta()?45:-1),p(2),T(" ",i.showFullMeta()?"Hide":"Show"," Details "),p(2),T(" ",i.showFullMeta()?"expand_less":"expand_more"," "),p(11),T(" Primary: ",i.story().primaryPersonId," "),p(),X(i.story().involvedPersonIds))},styles:[".reading-progress-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;height:4px;background:var(--bg-muted);z-index:1000}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--primary) 0%,var(--secondary) 100%);transition:width .1s ease-out;box-shadow:0 0 8px var(--primary)}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:1fr 320px;gap:var(--s-8)}.story-nav[_ngcontent-%COMP%]{grid-column:1 / -1;display:flex;justify-content:space-between;align-items:center;gap:var(--s-4);margin-bottom:var(--s-6);flex-wrap:wrap}.nav-back[_ngcontent-%COMP%]{min-width:160px}.nav-actions[_ngcontent-%COMP%]{display:flex;gap:var(--s-3)}.story-article[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-8)}.story-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-4);padding-bottom:var(--s-6);border-bottom:1px solid var(--border-color)}.story-meta-top[_ngcontent-%COMP%]{display:flex;gap:var(--s-3);flex-wrap:wrap}.category-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--s-2);padding:var(--s-2) var(--s-4);background:var(--accent-soft);color:var(--accent);font-size:.9rem;font-weight:var(--fw-semibold);border-radius:var(--r-full);text-transform:capitalize}.category-badge[data-category=achievement][_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.category-badge[data-category=romance][_ngcontent-%COMP%]{background:#fce7f3;color:#9f1239}.category-badge[data-category=hardship][_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.featured-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--s-2);padding:var(--s-2) var(--s-4);background:#fef3c7;color:#92400e;font-size:.85rem;font-weight:600;border-radius:var(--r-full)}.verified-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--s-2);padding:var(--s-2) var(--s-4);background:#dcfce7;color:#166534;font-size:.85rem;font-weight:600;border-radius:var(--r-full)}.story-title[_ngcontent-%COMP%]{margin:0;font-size:2.5rem;line-height:1.2;color:var(--text-primary);font-weight:700}.story-metadata[_ngcontent-%COMP%]{display:flex;gap:var(--s-4);flex-wrap:wrap;color:var(--text-muted);font-size:.95rem}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2)}.story-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--s-2)}.tag[_ngcontent-%COMP%]{padding:var(--s-2) var(--s-4);background:var(--bg-muted);color:var(--text-secondary);font-size:.85rem;border-radius:var(--r-full)}.story-content[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.8;color:var(--text-primary);max-width:70ch}.story-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:var(--s-8) 0 var(--s-4) 0;font-size:1.8rem;font-weight:600;color:var(--text-primary)}.story-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:var(--s-6) 0 var(--s-3) 0;font-size:1.4rem;font-weight:600;color:var(--text-primary)}.story-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 var(--s-6) 0}.story-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700;color:var(--text-primary)}.story-content[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-style:italic}.story-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--accent);text-decoration:underline;transition:color .2s ease}.story-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--accent-hover)}.story-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:var(--s-4) 0;padding-left:var(--s-8)}.story-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:var(--s-3)}.story-footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-4);padding-top:var(--s-6);border-top:1px solid var(--border-color)}.story-stats[_ngcontent-%COMP%]{display:flex;gap:var(--s-6);flex-wrap:wrap;align-items:center}.stat-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);min-height:44px;padding:var(--s-3) var(--s-4);background:transparent;border:1px solid var(--border-color);border-radius:var(--r-full);color:var(--text-secondary);font-size:.95rem;cursor:pointer;transition:all .2s ease}.stat-button[_ngcontent-%COMP%]:hover{background:var(--accent-soft);border-color:var(--accent);color:var(--accent);transform:scale(1.05)}.like-button.is-liked[_ngcontent-%COMP%]{background:#fee2e2;border-color:#ef4444;color:#ef4444}.like-button.is-liked[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#ef4444}.like-button.show-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_heartBeat .6s ease-in-out}@keyframes _ngcontent-%COMP%_heartBeat{0%,to{transform:scale(1)}20%{transform:scale(1.3) rotate(-5deg)}40%{transform:scale(1.1) rotate(5deg)}60%{transform:scale(1.2) rotate(-3deg)}80%{transform:scale(1.05) rotate(2deg)}}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);color:var(--text-muted);font-size:.95rem}.full-metadata[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-3);padding:var(--s-4);background:var(--bg-muted);border-radius:var(--r-md);font-size:.9rem}.meta-row[_ngcontent-%COMP%]{display:flex;gap:var(--s-3)}.meta-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{min-width:120px;color:var(--text-secondary)}.sources-list[_ngcontent-%COMP%]{margin:0;padding-left:var(--s-4)}.toggle-meta[_ngcontent-%COMP%]{align-self:flex-start}.story-sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-6)}.sidebar-section[_ngcontent-%COMP%]{padding:var(--s-6);background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--r-lg)}.sidebar-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);margin:0 0 var(--s-4) 0;font-size:1.1rem;font-weight:600;color:var(--text-primary)}.people-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-2)}.person-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-3);min-height:44px;padding:var(--s-3) var(--s-4);background:var(--bg-main);border:1px solid var(--border-color);border-radius:var(--r-md);color:var(--text-primary);text-align:left;font-size:.95rem;cursor:pointer;transition:all .2s ease}.person-link[_ngcontent-%COMP%]:hover{background:var(--accent-soft);border-color:var(--accent);color:var(--accent);transform:scale(1.01)}@media print{.story-nav[_ngcontent-%COMP%], .nav-actions[_ngcontent-%COMP%], .story-sidebar[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]{grid-template-columns:1fr}.story-article[_ngcontent-%COMP%]{max-width:100%}.story-content[_ngcontent-%COMP%]{max-width:100%;font-size:12pt;line-height:1.6;color:#000}.story-title[_ngcontent-%COMP%]{font-size:24pt}}@media(max-width:1023px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr}.story-sidebar[_ngcontent-%COMP%]{order:2}}@media(max-width:767px){.story-title[_ngcontent-%COMP%]{font-size:1.8rem}.story-content[_ngcontent-%COMP%]{font-size:1rem;line-height:1.7}.story-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.story-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem}.story-nav[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.nav-back[_ngcontent-%COMP%]{width:100%}.nav-actions[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.story-stats[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--s-3)}}@media(prefers-reduced-motion:reduce){.stat-button[_ngcontent-%COMP%]:hover, .person-link[_ngcontent-%COMP%]:hover{transform:none}}"],changeDetection:0})};function _k(n,e){n&1&&(u(0,"div",1)(1,"span",3),l(2,"sync"),d(),u(3,"p"),l(4,"Loading story..."),d()())}function Ck(n,e){if(n&1){let t=N();u(0,"div",4)(1,"a",5)(2,"span",6),l(3,"arrow_back"),d(),l(4," Back to Stories "),d()(),u(5,"app-story-detail",7),I("back",function(){x(t);let r=m();return D(r.handleBack())})("edit",function(r){x(t);let o=m();return D(o.handleEdit(r))})("delete",function(r){x(t);let o=m();return D(o.handleDelete(r))})("personClicked",function(r){x(t);let o=m();return D(o.handlePersonClick(r))})("likeStory",function(r){x(t);let o=m();return D(o.handleLike(r))}),d()}if(n&2){let t=m();p(5),H("story",e)("canEdit",t.isAdmin())}}function bk(n,e){n&1&&(u(0,"div",2)(1,"span",8),l(2,"article"),d(),u(3,"h3"),l(4,"Story Not Found"),d(),u(5,"p",9),l(6,"The requested story could not be found."),d(),u(7,"a",10),l(8,"View All Stories"),d()())}var Rd=class n{storiesService=_(Xt);authService=_(Le);route=_(lt);router=_(Me);subscription=null;lastViewedStoryId=null;isAdmin=this.authService.isAdmin;story=E(void 0);isLoading=E(!0);currentStoryId=E(null);ngOnInit(){this.subscription=this.route.paramMap.subscribe(e=>{let t=e.get("id");this.currentStoryId.set(t),this.isLoading.set(!0)}),ot(()=>{let e=this.currentStoryId(),t=this.storiesService.allStories(),i=this.storiesService.loading();if(!e){this.story.set(void 0),this.isLoading.set(!1);return}let r=t.find(o=>o.id===e);r?(this.story.set(r),this.isLoading.set(!1),this.lastViewedStoryId!==e&&(this.lastViewedStoryId=e,this.storiesService.incrementViewCount(e))):i||(this.story.set(void 0),this.isLoading.set(!1))})}ngOnDestroy(){this.subscription?.unsubscribe()}handleBack(){this.router.navigate(["/stories"])}handleEdit(e){this.router.navigate(["/stories",e,"edit"])}handleDelete(e){this.storiesService.deleteStory(e),this.router.navigate(["/stories"])}handlePersonClick(e){this.router.navigate(["/people",e])}handleLike(e){this.storiesService.toggleLike(e,"current-user")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-story-detail-page"]],decls:4,vars:1,consts:[[1,"container"],[1,"loading-state"],[1,"card","empty-state"],[1,"material-icons","spin"],[1,"page-header","flex","items-center","justify-between","mb-4"],["routerLink","/stories",1,"btn","btn-outline","flex","items-center","gap-2"],[1,"material-icons"],[3,"back","edit","delete","personClicked","likeStory","story","canEdit"],[1,"material-icons","icon-xl"],[1,"text-muted"],["routerLink","/stories",1,"btn","btn-primary","mt-4"]],template:function(t,i){if(t&1&&(u(0,"div",0),C(1,_k,5,0,"div",1)(2,Ck,6,2)(3,bk,9,0,"div",2),d()),t&2){let r;p(),b(i.isLoading()?1:(r=i.story())?2:3,r)}},dependencies:[Ad,Ce],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.mt-4[_ngcontent-%COMP%]{margin-top:1rem}.btn[_ngcontent-%COMP%]{text-decoration:none;display:inline-flex;padding:var(--s-3) var(--s-4)}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--s-12)}.loading-state[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-muted);margin-bottom:var(--s-4);display:block}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"],changeDetection:0})};var Ek=(n,e)=>e.id;function xk(n,e){if(n&1){let t=N();v(0,"button",17),B("click",function(){x(t);let r=m(2);return D(r.clearSearch())}),v(1,"span",6),l(2,"close"),g()()}}function Dk(n,e){if(n&1){let t=N();v(0,"div",12)(1,"span",18),l(2),g(),v(3,"button",19),B("click",function(){x(t);let r=m(2);return D(r.clearSelection())}),l(4," Clear all "),g()()}if(n&2){let t=m(2);p(2),T("",t.selectionCount()," selected")}}function wk(n,e){n&1&&(v(0,"div",14)(1,"span",20),l(2,"sync"),g(),v(3,"span"),l(4,"Loading people..."),g()())}function Mk(n,e){if(n&1&&(v(0,"p"),l(1),g()),n&2){let t=m(3);p(),T('No people found for "',t.searchQuery(),'"')}}function Sk(n,e){n&1&&(v(0,"p"),l(1,"No people available"),g())}function Ik(n,e){if(n&1&&(v(0,"div",15)(1,"span",6),l(2,"person_search"),g(),C(3,Mk,2,1,"p")(4,Sk,2,0,"p"),g()),n&2){let t=m(2);p(3),b(t.searchQuery()?3:4)}}function Pk(n,e){if(n&1&&(v(0,"span",24),l(1),g()),n&2){let t=m().$implicit,i=m(3);p(),k(i.getPersonInitials(t))}}function Tk(n,e){if(n&1&&(v(0,"span",27),l(1),g()),n&2){let t=m().$implicit;p(),T('"',t.nickname,'"')}}function Ok(n,e){n&1&&(v(0,"span",32),l(1,"Deceased"),g())}function kk(n,e){if(n&1&&(v(0,"span",28),l(1),C(2,Ok,2,0,"span",32),g()),n&2){let t=m().$implicit,i=m(3);p(),T(" ",i.getPersonAge(t)," "),p(),b(t.isDeceased?2:-1)}}function Nk(n,e){n&1&&(v(0,"span",30),l(1,"check_circle"),g())}function Ak(n,e){n&1&&(v(0,"span",31),l(1,"radio_button_unchecked"),g())}function Rk(n,e){if(n&1){let t=N();v(0,"button",22),B("click",function(){let r=x(t).$implicit,o=m(3);return D(o.togglePerson(r))}),v(1,"div",23),C(2,Pk,2,1,"span",24),g(),v(3,"div",25)(4,"span",26),l(5),C(6,Tk,2,1,"span",27),g(),C(7,kk,3,2,"span",28),g(),v(8,"div",29),C(9,Nk,2,0,"span",30)(10,Ak,2,0,"span",31),g()()}if(n&2){let t=e.$implicit,i=m(3);z("selected",i.isSelected(t.id))("deceased",t.isDeceased),p(2),b(t.profilePhotoId?2:-1),p(3),Fe(" ",t.firstName," ",t.lastName," "),p(),b(t.nickname?6:-1),p(),b(i.getPersonAge(t)?7:-1),p(2),b(i.isSelected(t.id)?9:10)}}function Fk(n,e){if(n&1&&K(0,Rk,11,10,"button",21,Ek),n&2){let t=m(2);X(t.filteredPeople())}}function Lk(n,e){if(n&1){let t=N();v(0,"div",16)(1,"button",33),B("click",function(){x(t);let r=m(2);return D(r.onCancel())}),l(2," Cancel "),g(),v(3,"button",34),B("click",function(){x(t);let r=m(2);return D(r.onConfirm())}),v(4,"span",35),l(5,"check"),g(),l(6),g()()}if(n&2){let t=m(2);p(3),_e("disabled",!t.hasSelection()),p(3),T(" Confirm (",t.selectionCount(),") ")}}function Vk(n,e){if(n&1){let t=N();v(0,"div",1),B("click",function(r){x(t);let o=m();return D(o.onBackdropClick(r))})("keydown",function(r){x(t);let o=m();return D(o.onKeydown(r))}),v(1,"div",2)(2,"div",3)(3,"h2",4),l(4),g(),v(5,"button",5),B("click",function(){x(t);let r=m();return D(r.onCancel())}),v(6,"span",6),l(7,"close"),g()()(),v(8,"div",7)(9,"div",8)(10,"span",9),l(11,"search"),g(),v(12,"input",10),B("input",function(r){x(t);let o=m();return D(o.onSearch(r))}),g(),C(13,xk,3,0,"button",11),g()(),C(14,Dk,5,1,"div",12),v(15,"div",13),C(16,wk,5,0,"div",14)(17,Ik,5,1,"div",15)(18,Fk,2,0),g(),C(19,Lk,7,2,"div",16),g()()}if(n&2){let t=m();te("aria-label",t.title()),p(4),k(t.title()),p(8),_e("value",t.searchQuery()),p(),b(t.searchQuery()?13:-1),p(),b(t.multiSelect()&&t.hasSelection()?14:-1),p(2),b(t.isLoading()?16:t.filteredPeople().length===0?17:18),p(3),b(t.multiSelect()?19:-1)}}var Fd=class n{personService=_(Se);isOpen=j(!1);multiSelect=j(!0);title=j("Select People");selectedIds=j([]);excludeIds=j([]);close=G();selectionChange=G();personSelected=G();searchQuery=E("");selectedPersonIds=E([]);constructor(){let e=this.selectedIds();e.length>0&&this.selectedPersonIds.set([...e])}allPeople=S(()=>this.personService.people());filteredPeople=S(()=>{let e=this.searchQuery().toLowerCase().trim(),t=this.excludeIds(),i=this.allPeople().filter(r=>!t.includes(r.id));return e&&(i=i.filter(r=>{let o=`${r.firstName} ${r.lastName}`.toLowerCase(),s=r.nickname?.toLowerCase()||"";return o.includes(e)||s.includes(e)})),i});isLoading=S(()=>this.personService.loading());hasSelection=S(()=>this.selectedPersonIds().length>0);selectionCount=S(()=>this.selectedPersonIds().length);isSelected(e){return this.selectedPersonIds().includes(e)}togglePerson(e){this.multiSelect()?this.selectedPersonIds.update(t=>t.includes(e.id)?t.filter(i=>i!==e.id):[...t,e.id]):(this.selectedPersonIds.set([e.id]),this.personSelected.emit(e),this.onConfirm())}onSearch(e){let t=e.target;this.searchQuery.set(t.value)}clearSearch(){this.searchQuery.set("")}onConfirm(){this.selectionChange.emit(this.selectedPersonIds()),this.close.emit()}onCancel(){this.close.emit()}onBackdropClick(e){e.target===e.currentTarget&&this.onCancel()}onKeydown(e){e.key==="Escape"&&this.onCancel()}getPersonAge(e){if(!e.birthDate)return null;let t=new Date(e.birthDate),i=e.isDeceased&&e.deathDate?new Date(e.deathDate):new Date,r=Math.floor((i.getTime()-t.getTime())/(365.25*24*60*60*1e3));return r>0?`${r} years`:null}getPersonInitials(e){return`${e.firstName?.[0]||""}${e.lastName?.[0]||""}`.toUpperCase()}selectAll(){let e=this.filteredPeople().map(t=>t.id);this.selectedPersonIds.set(e)}clearSelection(){this.selectedPersonIds.set([])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-person-selector"]],inputs:{isOpen:[1,"isOpen"],multiSelect:[1,"multiSelect"],title:[1,"title"],selectedIds:[1,"selectedIds"],excludeIds:[1,"excludeIds"]},outputs:{close:"close",selectionChange:"selectionChange",personSelected:"personSelected"},decls:1,vars:1,consts:[["tabindex","-1","role","dialog","aria-modal","true",1,"modal-backdrop"],["tabindex","-1","role","dialog","aria-modal","true",1,"modal-backdrop",3,"click","keydown"],[1,"modal-container"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close-btn",3,"click"],[1,"material-icons"],[1,"search-section"],[1,"search-input-wrapper"],[1,"material-icons","search-icon"],["type","text","placeholder","Search by name...","autocomplete","off","autofocus","",1,"search-input",3,"input","value"],["type","button","aria-label","Clear search",1,"clear-search-btn"],[1,"selection-info"],[1,"people-list"],[1,"loading-state"],[1,"empty-state"],[1,"modal-footer"],["type","button","aria-label","Clear search",1,"clear-search-btn",3,"click"],[1,"selection-count"],["type","button",1,"text-btn",3,"click"],[1,"material-icons","spin"],["type","button",1,"person-item",3,"selected","deceased"],["type","button",1,"person-item",3,"click"],[1,"person-avatar"],[1,"avatar-initials"],[1,"person-info"],[1,"person-name"],[1,"nickname"],[1,"person-meta"],[1,"selection-indicator"],[1,"material-icons","check-icon"],[1,"material-icons","empty-circle"],[1,"deceased-badge"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"material-icons","icon-sm"]],template:function(t,i){t&1&&C(0,Vk,20,7,"div",0),t&2&&b(i.isOpen()?0:-1)},dependencies:[Ai],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:var(--s-4);animation:_ngcontent-%COMP%_fadeIn .2s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal-container[_ngcontent-%COMP%]{background:var(--bg-card);border-radius:var(--r-xl);box-shadow:var(--shadow-xl);width:100%;max-width:480px;max-height:80vh;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:var(--s-5) var(--s-6);border-bottom:1px solid var(--border-color)}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:var(--text-primary)}.close-btn[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;border-radius:var(--r-full);color:var(--text-muted);cursor:pointer;transition:all .2s ease}.close-btn[_ngcontent-%COMP%]:hover{background:var(--bg-muted);color:var(--text-primary)}.close-btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--accent);outline-offset:2px}.search-section[_ngcontent-%COMP%]{padding:var(--s-4) var(--s-6);border-bottom:1px solid var(--border-color)}.search-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.search-icon[_ngcontent-%COMP%]{position:absolute;left:var(--s-3);color:var(--text-muted);pointer-events:none}.search-input[_ngcontent-%COMP%]{width:100%;padding:var(--s-3) var(--s-3) var(--s-3) calc(var(--s-3) + 32px);background:var(--bg-muted);border:1px solid transparent;border-radius:var(--r-full);font-size:.95rem;color:var(--text-primary);transition:all .2s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;background:var(--bg-card);border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-soft)}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.clear-search-btn[_ngcontent-%COMP%]{position:absolute;right:var(--s-2);width:28px;height:28px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;border-radius:var(--r-full);color:var(--text-muted);cursor:pointer;transition:all .2s ease}.clear-search-btn[_ngcontent-%COMP%]:hover{background:var(--border-color);color:var(--text-primary)}.clear-search-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px}.selection-info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:var(--s-3) var(--s-6);background:var(--accent-soft);border-bottom:1px solid var(--border-color)}.selection-count[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--accent)}.text-btn[_ngcontent-%COMP%]{background:none;border:none;color:var(--accent);font-size:.9rem;font-weight:500;cursor:pointer;padding:var(--s-1) var(--s-2);border-radius:var(--r-sm);transition:all .2s ease}.text-btn[_ngcontent-%COMP%]:hover{background:#6b94851a}.people-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:var(--s-2) var(--s-4);min-height:200px;max-height:400px}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--s-3);padding:var(--s-8);color:var(--text-muted)}.loading-state[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:48px;opacity:.5}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center}.person-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:var(--s-3);padding:var(--s-3) var(--s-4);margin-bottom:var(--s-2);background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--r-lg);cursor:pointer;transition:all .2s ease;text-align:left}.person-item[_ngcontent-%COMP%]:hover{background:var(--bg-muted);border-color:var(--accent)}.person-item.selected[_ngcontent-%COMP%]{background:var(--accent-soft);border-color:var(--accent)}.person-item.deceased[_ngcontent-%COMP%]{opacity:.75}.person-item[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--accent);outline-offset:2px}.person-avatar[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:var(--r-full);background:linear-gradient(135deg,var(--primary-light),var(--primary));display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden}.avatar-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.avatar-initials[_ngcontent-%COMP%]{color:#fff;font-size:1rem;font-weight:600}.person-info[_ngcontent-%COMP%]{flex:1;min-width:0;display:flex;flex-direction:column;gap:2px}.person-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.nickname[_ngcontent-%COMP%]{color:var(--text-muted);font-weight:400;margin-left:var(--s-2)}.person-meta[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-muted);display:flex;align-items:center;gap:var(--s-2)}.deceased-badge[_ngcontent-%COMP%]{font-size:.75rem;padding:2px 6px;background:var(--text-muted);color:#fff;border-radius:var(--r-sm)}.selection-indicator[_ngcontent-%COMP%]{flex-shrink:0}.check-icon[_ngcontent-%COMP%]{color:var(--accent);font-size:24px}.empty-circle[_ngcontent-%COMP%]{color:var(--text-muted);font-size:24px}.person-item[_ngcontent-%COMP%]:hover   .empty-circle[_ngcontent-%COMP%], .person-item[_ngcontent-%COMP%]:focus   .empty-circle[_ngcontent-%COMP%]{color:var(--accent)}.modal-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:var(--s-3);padding:var(--s-4) var(--s-6);border-top:1px solid var(--border-color);background:var(--bg-muted);border-radius:0 0 var(--r-xl) var(--r-xl)}@media(max-width:767px){.modal-container[_ngcontent-%COMP%]{max-width:100%;max-height:90vh;margin:var(--s-2);border-radius:var(--r-lg)}.modal-header[_ngcontent-%COMP%]{padding:var(--s-4)}.search-section[_ngcontent-%COMP%]{padding:var(--s-3) var(--s-4)}.selection-info[_ngcontent-%COMP%]{padding:var(--s-2) var(--s-4)}.people-list[_ngcontent-%COMP%]{padding:var(--s-2) var(--s-3)}.modal-footer[_ngcontent-%COMP%]{padding:var(--s-3) var(--s-4)}.person-item[_ngcontent-%COMP%]{padding:var(--s-3)}}"],changeDetection:0})};var jk=(n,e)=>e.fileId;function Bk(n,e){if(n&1&&(v(0,"div",1)(1,"span",6),l(2,"error_outline"),g(),l(3),g()),n&2){let t=m();p(3),T(" ",t.validationError()," ")}}function Uk(n,e){n&1&&(v(0,"div",2)(1,"span",6),l(2,"check_circle"),g(),l(3," Upload successful! "),g())}function $k(n,e){if(n&1){let t=N();v(0,"div",4)(1,"span",7),l(2,"cloud_upload"),g(),v(3,"h3"),l(4,"Upload Photos"),g(),v(5,"p"),l(6,"Drag and drop photos here, or click to select"),g(),v(7,"button",8),B("click",function(){x(t);let r=m();return D(r.triggerFileInput())}),v(8,"span",6),l(9,"add_photo_alternate"),g(),l(10," Choose Photos "),g(),v(11,"input",9),B("change",function(r){x(t);let o=m();return D(o.onFileSelect(r))}),g()()}if(n&2){let t=m();p(11),_e("accept",t.acceptTypes())("multiple",t.multiple())}}function Hk(n,e){if(n&1){let t=N();v(0,"div",11),ue(1,"img",18),v(2,"div",19)(3,"span",20),l(4),g()(),v(5,"button",21),B("click",function(){let r=x(t).$index,o=m(2);return D(o.removeFile(r))}),v(6,"span",22),l(7,"close"),g()()()}if(n&2){let t=e.$implicit,i=e.$index,r=m(2);p(),_e("src",t,$e)("alt","Preview "+(i+1)),p(3),k(r.formatFileSize(r.selectedFiles()[i].size))}}function zk(n,e){n&1&&(v(0,"span",23),l(1,"sync"),g(),l(2," Uploading... "))}function Gk(n,e){if(n&1&&(v(0,"span",6),l(1,"cloud_upload"),g(),l(2)),n&2){let t=m(2);p(2),Fe(" Upload ",t.selectedFiles().length," ",t.selectedFiles().length===1?"Photo":"Photos"," ")}}function Wk(n,e){if(n&1){let t=N();v(0,"div",10),K(1,Hk,8,3,"div",11,Ie),g(),v(3,"div",12)(4,"div",13)(5,"span",14),l(6),g()(),v(7,"div",15)(8,"button",16),B("click",function(){x(t);let r=m();return D(r.clearAll())}),v(9,"span",6),l(10,"clear"),g(),l(11," Clear All "),g(),v(12,"button",17),B("click",function(){x(t);let r=m();return D(r.uploadFiles())}),C(13,zk,3,0)(14,Gk,3,2),g()()()}if(n&2){let t=m();p(),X(t.previews()),p(5),T("Total: ",t.getTotalSize()),p(2),_e("disabled",t.isUploading()),p(4),_e("disabled",t.isUploading()),p(),b(t.isUploading()?13:14)}}function qk(n,e){if(n&1&&(v(0,"p",30),l(1),g()),n&2){let t=m().$implicit;p(),k(t.error)}}function Yk(n,e){if(n&1&&(v(0,"div",24)(1,"div",25)(2,"span",26),l(3),g(),v(4,"span",27),l(5),g()(),v(6,"div",28),ue(7,"div",29),g(),C(8,qk,2,1,"p",30),g()),n&2){let t=e.$implicit;p(3),k(t.filename),p(),Di(t.status),p(),k(t.status),p(2),Di(t.status),Xe("width",t.progress,"%"),p(),b(t.error?8:-1)}}function Qk(n,e){if(n&1&&(v(0,"div",5)(1,"h4"),l(2,"Upload Progress"),g(),K(3,Yk,9,9,"div",24,jk),g()),n&2){let t=m();p(3),X(t.uploads())}}var Co=class n{mediaService=_(be);personIds=j([]);albumId=j();multiple=j(!0);acceptTypes=j("image/*");uploadComplete=G();uploadError=G();cancelled=G();isDragging=E(!1);selectedFiles=E([]);previews=E([]);isUploading=E(!1);showSuccess=E(!1);validationError=E("");dragPulse=E(!1);hasFiles=S(()=>this.selectedFiles().length>0);uploads=this.mediaService.uploads;onDragOver(e){e.preventDefault(),e.stopPropagation(),this.isDragging.set(!0),this.dragPulse.set(!0)}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.isDragging.set(!1),this.dragPulse.set(!1)}onDrop(e){e.preventDefault(),e.stopPropagation(),this.isDragging.set(!1);let t=Array.from(e.dataTransfer?.files||[]);this.handleFiles(t)}onFileSelect(e){let t=e.target,i=Array.from(t.files||[]);this.handleFiles(i)}triggerFileInput(){document.getElementById("file-input")?.click()}handleFiles(e){if(e.length===0)return;let t=50*1024*1024;e.filter(o=>o.size>t).length>0&&(this.validationError.set("Some files exceed 50MB limit"),setTimeout(()=>this.validationError.set(""),4e3),e=e.filter(o=>o.size<=t));let r=e.filter(o=>this.acceptTypes()==="image/*"?o.type.startsWith("image/"):!0);if(r.length===0){this.validationError.set("No valid files selected"),setTimeout(()=>this.validationError.set(""),4e3);return}this.selectedFiles.set(r),this.validationError.set(""),this.generatePreviews(r)}generatePreviews(e){let t=[];e.forEach(i=>{if(i.type.startsWith("image/")){let r=new FileReader;r.onload=o=>{t.push(o.target?.result),this.previews.set([...t])},r.readAsDataURL(i)}})}async uploadFiles(){let e=this.selectedFiles();if(e.length!==0){this.isUploading.set(!0);try{let t=await this.mediaService.uploadMultiple(e,this.personIds(),this.albumId());this.uploadComplete.emit(t),this.showSuccess.set(!0),setTimeout(()=>this.showSuccess.set(!1),2e3),setTimeout(()=>{this.selectedFiles.set([]),this.previews.set([])},500),this.isUploading.set(!1)}catch(t){this.uploadError.emit(t.message),this.isUploading.set(!1)}}}removeFile(e){this.selectedFiles.update(t=>t.filter((i,r)=>r!==e)),this.previews.update(t=>t.filter((i,r)=>r!==e))}clearAll(){this.selectedFiles.set([]),this.previews.set([])}formatFileSize(e){if(e===0)return"0 Bytes";let t=1024,i=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return Math.round(e/Math.pow(t,r)*100)/100+" "+i[r]}getTotalSize(){let e=this.selectedFiles().reduce((t,i)=>t+i.size,0);return this.formatFileSize(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-photo-uploader"]],inputs:{personIds:[1,"personIds"],albumId:[1,"albumId"],multiple:[1,"multiple"],acceptTypes:[1,"acceptTypes"]},outputs:{uploadComplete:"uploadComplete",uploadError:"uploadError",cancelled:"cancelled"},decls:7,vars:10,consts:[[1,"photo-uploader"],[1,"error-banner"],[1,"success-banner"],[1,"upload-area",3,"dragover","dragleave","drop"],[1,"upload-prompt"],[1,"upload-progress"],[1,"material-icons","icon-sm"],[1,"material-icons","icon-xl"],["type","button",1,"btn","btn-primary",3,"click"],["id","file-input","type","file",2,"display","none",3,"change","accept","multiple"],[1,"preview-grid"],[1,"preview-item"],[1,"upload-actions"],[1,"upload-info"],[1,"total-size"],[1,"action-buttons"],["type","button",1,"btn","btn-outline",3,"click","disabled"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[3,"src","alt"],[1,"file-info"],[1,"file-size"],["type","button","aria-label","Remove photo",1,"remove-btn",3,"click"],[1,"material-icons"],[1,"material-icons","icon-sm","spinning"],[1,"progress-item"],[1,"progress-info"],[1,"filename"],[1,"status"],[1,"progress-bar"],[1,"progress-fill"],[1,"error-message"]],template:function(t,i){t&1&&(v(0,"div",0),C(1,Bk,4,1,"div",1),C(2,Uk,4,0,"div",2),v(3,"div",3),B("dragover",function(o){return i.onDragOver(o)})("dragleave",function(o){return i.onDragLeave(o)})("drop",function(o){return i.onDrop(o)}),C(4,$k,12,2,"div",4)(5,Wk,15,4),g(),C(6,Qk,5,0,"div",5),g()),t&2&&(p(),b(i.validationError()?1:-1),p(),b(i.showSuccess()?2:-1),p(),z("dragging",i.isDragging())("has-files",i.hasFiles())("drag-pulse",i.dragPulse()),p(),b(i.hasFiles()?5:4),p(2),b(i.uploads().length>0?6:-1))},styles:[".photo-uploader[_ngcontent-%COMP%]{width:100%}.error-banner[_ngcontent-%COMP%], .success-banner[_ngcontent-%COMP%]{padding:var(--s-3) var(--s-4);border-radius:var(--r-md);display:flex;align-items:center;gap:var(--s-2);margin-bottom:var(--s-4);font-size:1rem;font-weight:500;animation:_ngcontent-%COMP%_slideInDown .3s ease}.error-banner[_ngcontent-%COMP%]{background:#fee2e2;color:var(--danger);border:2px solid var(--danger)}.success-banner[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a;border:2px solid #16a34a}@keyframes _ngcontent-%COMP%_slideInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.upload-area[_ngcontent-%COMP%]{border:3px dashed var(--border-color);border-radius:var(--r-lg);padding:var(--s-8);text-align:center;background:var(--bg-card);transition:all .3s ease;min-height:300px;display:flex;flex-direction:column;justify-content:center}.upload-area.dragging[_ngcontent-%COMP%]{border-color:var(--primary);background:var(--primary-lighter);transform:scale(1.02)}.upload-area.drag-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.02)}}.upload-area.has-files[_ngcontent-%COMP%]{padding:var(--s-4);min-height:auto}.upload-prompt[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--s-4)}.upload-prompt[_ngcontent-%COMP%]   .icon-xl[_ngcontent-%COMP%]{font-size:64px;color:var(--primary);opacity:.6}.upload-prompt[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.3rem;color:var(--text-primary)}.upload-prompt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-muted);font-size:1rem}.upload-prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:var(--s-2);min-width:200px;height:50px;font-size:1.1rem}.preview-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:var(--s-4);margin-bottom:var(--s-4)}.preview-item[_ngcontent-%COMP%]{position:relative;aspect-ratio:1;border-radius:var(--r-md);overflow:hidden;background:var(--bg-muted)}.preview-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.file-info[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(0,0,0,.8),transparent);padding:6px 8px;opacity:0;transition:opacity .2s}.preview-item[_ngcontent-%COMP%]:hover   .file-info[_ngcontent-%COMP%]{opacity:1}.file-size[_ngcontent-%COMP%]{font-size:.8rem;color:#fff;font-weight:600}.preview-item[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;width:32px;height:32px;border-radius:50%;background:#000000b3;color:#fff;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s}.preview-item[_ngcontent-%COMP%]:hover   .remove-btn[_ngcontent-%COMP%]{opacity:1}.preview-item[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{background:var(--danger);transform:scale(1.1)}.preview-item[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.upload-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-3)}.upload-info[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.total-size[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:var(--text-secondary);padding:var(--s-2) var(--s-4);background:var(--bg-muted);border-radius:var(--r-md)}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:var(--s-4);justify-content:center;flex-wrap:wrap}.upload-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:150px;height:50px;font-size:1rem}.upload-progress[_ngcontent-%COMP%]{margin-top:var(--s-6);padding:var(--s-4);background:var(--bg-card);border-radius:var(--r-md)}.upload-progress[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 var(--s-4) 0;font-size:1.1rem;color:var(--text-primary)}.progress-item[_ngcontent-%COMP%]{margin-bottom:var(--s-4)}.progress-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.progress-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--s-2)}.filename[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-primary);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}.status[_ngcontent-%COMP%]{font-size:.85rem;padding:4px 12px;border-radius:var(--r-sm);text-transform:capitalize}.status.uploading[_ngcontent-%COMP%]{background:var(--accent-soft);color:var(--accent)}.status.complete[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.status.error[_ngcontent-%COMP%]{background:#fee2e2;color:var(--danger)}.progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:var(--bg-muted);border-radius:var(--r-full);overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:var(--accent);transition:width .3s ease;border-radius:var(--r-full)}.progress-fill.complete[_ngcontent-%COMP%]{background:#16a34a}.progress-fill.error[_ngcontent-%COMP%]{background:var(--danger)}.error-message[_ngcontent-%COMP%]{margin:var(--s-2) 0 0 0;font-size:.9rem;color:var(--danger)}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@media(max-width:768px){.error-banner[_ngcontent-%COMP%], .success-banner[_ngcontent-%COMP%]{font-size:.9rem;padding:var(--s-2) var(--s-3)}.upload-area[_ngcontent-%COMP%]{padding:var(--s-4);min-height:250px}.upload-prompt[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.upload-prompt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}.preview-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:var(--s-2)}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0})};var Zk=(n,e)=>e.value,ph=(n,e)=>e.id;function Kk(n,e){if(n&1&&(u(0,"div",6)(1,"span",4),l(2,"cloud_done"),d(),u(3,"span",46),l(4),d()()),n&2){let t=m();p(4),T("Saved ",t.getTimeSince(t.lastSaved()))}}function Xk(n,e){n&1&&(u(0,"div",7)(1,"span",4),l(2,"check_circle"),d(),l(3," Saved! "),d())}function Jk(n,e){if(n&1){let t=N();u(0,"button",47),I("click",function(){let r=x(t).$implicit,o=m();return D(o.setCategory(r.value))}),u(1,"span",4),l(2),d(),l(3),d()}if(n&2){let t=e.$implicit,i=m();z("active",i.category()===t.value),p(2),k(t.icon),p(),T(" ",t.label," ")}}function eN(n,e){if(n&1){let t=N();u(0,"div",11)(1,"label",48),l(2,"Your Story *"),d(),u(3,"div",49)(4,"button",50),I("click",function(){x(t);let r=m();return D(r.insertFormatting("bold"))}),u(5,"span",4),l(6,"format_bold"),d()(),u(7,"button",51),I("click",function(){x(t);let r=m();return D(r.insertFormatting("italic"))}),u(8,"span",4),l(9,"format_italic"),d()(),u(10,"button",52),I("click",function(){x(t);let r=m();return D(r.insertFormatting("heading"))}),u(11,"span",4),l(12,"title"),d()(),u(13,"button",53),I("click",function(){x(t);let r=m();return D(r.insertFormatting("list"))}),u(14,"span",4),l(15,"format_list_bulleted"),d()(),u(16,"button",54),I("click",function(){x(t);let r=m();return D(r.insertFormatting("link"))}),u(17,"span",4),l(18,"link"),d()(),de(19,"div",55),u(20,"span",56),l(21),d()(),u(22,"textarea",57),qt("ngModelChange",function(r){x(t);let o=m();return mn(o.content,r)||(o.content=r),D(r)}),d(),u(23,"div",58)(24,"span",4),l(25,"info"),d(),l(26," Use simple formatting: **bold**, *italic*, ## headings, - lists "),d()()}if(n&2){let t=m();p(21),Fe(" ",t.wordCount()," words \u2022 ",t.charCount()," characters "),p(),Wt("ngModel",t.content)}}function tN(n,e){if(n&1&&(u(0,"div",20)(1,"h2",59),l(2),d(),de(3,"div",60),d()),n&2){let t=m();p(2),k(t.title()||"Untitled Story"),p(),H("innerHTML",t.getPreviewHtml(),cs)}}function nN(n,e){n&1&&(u(0,"span",63),l(1,"Primary"),d())}function iN(n,e){if(n&1){let t=N();u(0,"div",62),C(1,nN,2,0,"span",63),u(2,"span",64),l(3),d(),u(4,"button",65),I("click",function(){let r=x(t).$implicit,o=m(2);return D(o.removePerson(r.id))}),u(5,"span",66),l(6,"close"),d()()()}if(n&2){let t=e.$implicit,i=e.$index;z("primary",i===0),p(),b(i===0?1:-1),p(2),Fe("",t.firstName," ",t.lastName),p(),te("aria-label","Remove "+t.firstName)}}function rN(n,e){if(n&1&&(u(0,"div",29),K(1,iN,7,6,"div",61,ph),d()),n&2){let t=m();p(),X(t.selectedPeople())}}function oN(n,e){n&1&&(u(0,"p",16),l(1,"No people added yet"),d())}function sN(n,e){if(n&1){let t=N();u(0,"span",67),l(1),u(2,"button",68),I("click",function(){let r=x(t).$implicit,o=m(2);return D(o.removeTag(r))}),u(3,"span",4),l(4,"close"),d()()()}if(n&2){let t=e.$implicit;p(),T(" ",t," "),p(),te("aria-label","Remove tag "+t)}}function aN(n,e){if(n&1&&(u(0,"div",33),K(1,sN,5,2,"span",67,Ie),d()),n&2){let t=m();p(),X(t.tags())}}function lN(n,e){if(n&1&&(u(0,"div",37),de(1,"img",69),u(2,"div",70)(3,"p",71),l(4,"Cover image"),d(),u(5,"p",16),l(6),d()()()),n&2){let t=e,i=m();p(),H("src",i.getMediaUrl(t.id)||t.thumbnailUrl||t.url,$e)("alt",t.caption||"Cover media"),p(5),k(t.caption||t.filename)}}function cN(n,e){if(n&1){let t=N();u(0,"div",73)(1,"span",4),l(2,"image"),d(),u(3,"span",74),l(4),d(),u(5,"button",75),I("click",function(){let r=x(t).$implicit,o=m(2);return D(o.setFeaturedMedia(r.id))}),u(6,"span",4),l(7,"star"),d()(),u(8,"button",76),I("click",function(){let r=x(t).$implicit,o=m(2);return D(o.toggleMediaSelection(r.id))}),u(9,"span",4),l(10,"close"),d()()()}if(n&2){let t=e.$implicit,i=m(2);z("active",i.mediaIsSelected(t.id)),p(4),k(t.caption||t.filename)}}function dN(n,e){if(n&1&&(u(0,"div",38),K(1,cN,11,3,"div",72,ph),d()),n&2){let t=m();p(),X(t.selectedMedia())}}function uN(n,e){n&1&&(u(0,"p",16),l(1,"No media attached yet"),d())}function pN(n,e){if(n&1){let t=N();u(0,"button",81),I("click",function(){let r=x(t).$implicit,o=m(2);return D(o.toggleMediaSelection(r.id))}),de(1,"img",69),u(2,"div",82)(3,"div",83),l(4),d(),u(5,"div",84),l(6),d(),u(7,"div",85)(8,"button",36),I("click",function(r){let o=x(t).$implicit;return m(2).setFeaturedMedia(o.id),D(r.stopPropagation())}),u(9,"span",4),l(10,"star"),d(),l(11," Cover "),d()()()()}if(n&2){let t=e.$implicit,i=m(2);z("selected",i.mediaIsSelected(t.id)),p(),H("src",i.getMediaUrl(t.id)||t.thumbnailUrl||t.url,$e)("alt",t.caption||t.filename),p(3),k(t.caption||t.filename),p(2),T(" ",t.type," ")}}function fN(n,e){if(n&1){let t=N();u(0,"div",39)(1,"div",77)(2,"input",78),I("input",function(r){x(t);let o=m();return D(o.mediaSearch.set(r.target.value))}),d()(),u(3,"div",79),K(4,pN,12,6,"button",80,ph),d()()}if(n&2){let t=m();p(2),H("value",t.mediaSearch()),p(2),X(t.availableMedia())}}function mN(n,e){if(n&1){let t=N();u(0,"div",41)(1,"app-photo-uploader",86),I("uploadComplete",function(r){x(t);let o=m();return D(o.onMediaUploaded(r))}),d()()}if(n&2){let t=m();p(),H("personIds",t.allSelectedIds())("multiple",!0)}}var Ld=class n{personService=_(Se);mediaService=_(be);story=j();personId=j();save=G();cancel=G();personSearch=G();title=E("");content=E("");category=E("memory");tags=E([]);tagInput=E("");eventDate=E("");location=E("");primaryPersonId=E("");involvedPersonIds=E([]);isPublished=E(!1);summary=E("");featuredMediaId=E(null);attachedMediaIds=E([]);showPreview=E(!1);isSaving=E(!1);lastSaved=E(null);showSuccess=E(!1);showPersonSelector=E(!1);showMediaPicker=E(!1);showUploader=E(!1);mediaSearch=E("");autoSaveTimer;draftRestored=!1;initializeStory=ot(()=>{let e=this.story();if(e){if(this.title.set(e.title),this.content.set(e.content),this.category.set(e.category),this.tags.set([...e.tags]),this.primaryPersonId.set(e.primaryPersonId),this.involvedPersonIds.set([...e.involvedPersonIds]),this.isPublished.set(e.isPublished),this.summary.set(e.summary||""),this.featuredMediaId.set(e.featuredMediaId||null),this.attachedMediaIds.set([...e.mediaIds||[]]),e.eventDate){let t=new Date(e.eventDate);this.eventDate.set(t.toISOString().split("T")[0])}e.location&&this.location.set(e.location)}else this.personId()&&this.primaryPersonId.set(this.personId())});restoreDraft=ot(()=>{if(this.draftRestored||this.story())return;let e=localStorage.getItem("story_draft");if(!e){this.draftRestored=!0;return}try{let t=JSON.parse(e);this.title.set(t.title||""),this.content.set(t.content||""),this.category.set(t.category||"memory"),this.tags.set(Array.isArray(t.tags)?t.tags:[]),this.eventDate.set(t.eventDate||""),this.location.set(t.location||""),this.summary.set(t.summary||""),this.attachedMediaIds.set(Array.isArray(t.mediaIds)?t.mediaIds:[]),this.featuredMediaId.set(t.featuredMediaId||null)}catch{}this.draftRestored=!0});autoSaveDraft=ot(()=>{this.hasChanges()&&!this.isPublished()&&this.triggerAutoSave()});hasChanges=S(()=>!!this.title()||!!this.content()||this.tags().length>0||!!this.summary()||this.attachedMediaIds().length>0);wordCount=S(()=>{let e=this.content().trim();return e?e.split(/\s+/).length:0});charCount=S(()=>this.content().length);selectedPeople=S(()=>{let e=this.personService.people(),t=this.primaryPersonId(),i=this.involvedPersonIds(),r=t?[t,...i]:i;return e.filter(o=>r.includes(o.id))});allSelectedIds=S(()=>{let e=this.primaryPersonId(),t=this.involvedPersonIds();return e?[e,...t]:t});availableMedia=S(()=>{let e=this.mediaSearch().toLowerCase().trim();return this.mediaService.media().filter(i=>{if(!e)return!0;let r=this.mediaTags(i);return i.caption?.toLowerCase().includes(e)||i.filename.toLowerCase().includes(e)||r.some(o=>o.toLowerCase().includes(e))}).sort((i,r)=>new Date(r.uploadedAt).getTime()-new Date(i.uploadedAt).getTime())});selectedMedia=S(()=>{let e=this.attachedMediaIds();return this.mediaService.media().filter(i=>e.includes(i.id))});coverMedia=S(()=>{let e=this.featuredMediaId();if(e)return this.mediaService.media().find(t=>t.id===e)});categories=[{value:"memory",label:"Memory",icon:"psychology"},{value:"achievement",label:"Achievement",icon:"emoji_events"},{value:"tradition",label:"Tradition",icon:"auto_awesome"},{value:"recipe",label:"Recipe",icon:"restaurant"},{value:"migration",label:"Migration",icon:"flight_takeoff"},{value:"career",label:"Career",icon:"work"},{value:"education",label:"Education",icon:"school"},{value:"romance",label:"Romance",icon:"favorite"},{value:"hardship",label:"Hardship",icon:"trending_up"},{value:"humor",label:"Humor",icon:"sentiment_satisfied"},{value:"historical",label:"Historical",icon:"history_edu"},{value:"other",label:"Other",icon:"article"}];triggerAutoSave(){this.autoSaveTimer&&clearTimeout(this.autoSaveTimer),this.autoSaveTimer=setTimeout(()=>{this.saveDraft()},2e3)}saveDraft(){let e={title:this.title(),content:this.content(),category:this.category(),tags:this.tags(),eventDate:this.eventDate(),location:this.location(),summary:this.summary(),mediaIds:this.attachedMediaIds(),featuredMediaId:this.featuredMediaId()};localStorage.setItem("story_draft",JSON.stringify(e)),this.lastSaved.set(new Date)}insertFormatting(e){let t=document.querySelector(".content-editor");if(!t)return;let i=t.selectionStart,r=t.selectionEnd,o=this.content().substring(i,r),s="";switch(e){case"bold":s=`**${o||"bold text"}**`;break;case"italic":s=`*${o||"italic text"}*`;break;case"heading":s=`## ${o||"Heading"}`;break;case"list":s=`- ${o||"List item"}`;break;case"link":s=`[${o||"link text"}](url)`;break}let a=this.content().substring(0,i)+s+this.content().substring(r);this.content.set(a)}addTag(){let e=this.tagInput().trim().toLowerCase();e&&!this.tags().includes(e)&&(this.tags.update(t=>[...t,e]),this.tagInput.set(""))}removeTag(e){this.tags.update(t=>t.filter(i=>i!==e))}onTagInputKeydown(e){e.key==="Enter"&&(e.preventDefault(),this.addTag())}openPersonSelector(){this.showPersonSelector.set(!0)}closePersonSelector(){this.showPersonSelector.set(!1)}onPeopleSelected(e){e.length>0?(this.primaryPersonId.set(e[0]),this.involvedPersonIds.set(e.slice(1))):(this.primaryPersonId.set(""),this.involvedPersonIds.set([])),this.closePersonSelector()}removePerson(e){if(this.primaryPersonId()===e){let t=this.involvedPersonIds();t.length>0?(this.primaryPersonId.set(t[0]),this.involvedPersonIds.set(t.slice(1))):this.primaryPersonId.set("")}else this.involvedPersonIds.update(t=>t.filter(i=>i!==e))}getPersonById(e){return this.personService.getPersonById(e)}togglePreview(){this.showPreview.update(e=>!e)}toggleMediaPicker(){this.showMediaPicker.update(e=>!e)}toggleUploader(){this.showUploader.update(e=>!e)}setCategory(e){this.category.set(e)}onSave(e){this.isSaving.set(!0);let t=this.summary().trim()||this.buildSummary(this.content()),i={title:this.title(),content:this.content(),category:this.category(),tags:this.tags(),primaryPersonId:this.primaryPersonId(),involvedPersonIds:this.involvedPersonIds(),isPublished:e,summary:t,eventDate:this.eventDate()||void 0,location:this.location()||void 0,featuredMediaId:this.featuredMediaId()||void 0,mediaIds:this.attachedMediaIds()};this.story()&&(i.id=this.story().id),this.showSuccessFeedback(),setTimeout(()=>{this.isSaving.set(!1),this.save.emit(i),localStorage.removeItem("story_draft")},500)}onMediaUploaded(e){let t=e.map(i=>i.id);this.attachedMediaIds.update(i=>Array.from(new Set([...i,...t]))),!this.featuredMediaId()&&t.length>0&&this.featuredMediaId.set(t[0]),this.showUploader.set(!1)}mediaIsSelected(e){return this.attachedMediaIds().includes(e)}toggleMediaSelection(e){this.mediaIsSelected(e)?(this.attachedMediaIds.update(t=>t.filter(i=>i!==e)),this.featuredMediaId()===e&&this.featuredMediaId.set(null)):this.attachedMediaIds.update(t=>[...t,e])}setFeaturedMedia(e){this.featuredMediaId.set(e),this.mediaIsSelected(e)||this.attachedMediaIds.update(t=>[...t,e])}showSuccessFeedback(){this.showSuccess.set(!0),setTimeout(()=>this.showSuccess.set(!1),2e3)}getTimeSince(e){let t=Math.floor((new Date().getTime()-e.getTime())/1e3);if(t<10)return"just now";if(t<60)return`${t}s ago`;let i=Math.floor(t/60);return i<60?`${i}m ago`:`${Math.floor(i/60)}h ago`}onCancel(){this.cancel.emit()}onPersonSearchClick(){this.personSearch.emit()}getMediaUrl(e){return this.mediaService.getMediaUrl(e)}getPreviewHtml(){let e=this.content();return e=e.replace(/^## (.+)$/gm,"<h2>$1</h2>"),e=e.replace(/^### (.+)$/gm,"<h3>$1</h3>"),e=e.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),e=e.replace(/\*(.+?)\*/g,"<em>$1</em>"),e=e.replace(/\[(.+?)\]\((.+?)\)/g,'<a href="$2" target="_blank">$1</a>'),e=e.replace(/^- (.+)$/gm,"<li>$1</li>"),e=e.replace(/(<li>.*<\/li>)/s,"<ul>$1</ul>"),e=e.split(`

`).map(t=>`<p>${t}</p>`).join(""),e}buildSummary(e){return e?e.replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/\[(.*?)\]\((.*?)\)/g,"$1").replace(/^- /gm,"").trim().substring(0,220):""}mediaTags(e){return Array.isArray(e.tags)?e.tags:[]}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-story-editor"]],inputs:{story:[1,"story"],personId:[1,"personId"]},outputs:{save:"save",cancel:"cancel",personSearch:"personSearch"},decls:102,vars:30,consts:[[1,"story-editor-wrapper"],[1,"editor-header"],[1,"header-left"],[1,"btn","btn-outline",3,"click"],[1,"material-icons","icon-sm"],[1,"editor-title"],[1,"auto-save-indicator"],[1,"success-badge"],[1,"header-actions"],[1,"editor-layout"],[1,"editor-column"],[1,"form-group"],["for","story-title",1,"form-label"],["id","story-title","type","text","placeholder","Give your story a memorable title...","required","","maxlength","150",1,"form-input","title-input",3,"ngModelChange","ngModel"],["for","story-summary",1,"form-label"],["id","story-summary","rows","3","placeholder","One or two sentences that capture the heart of this story","maxlength","240",1,"form-input",3,"ngModelChange","ngModel"],[1,"text-muted","text-sm"],[1,"form-label"],[1,"category-grid"],["type","button",1,"category-btn",3,"active"],[1,"preview-panel"],[1,"sidebar-column"],[1,"sidebar-section"],[1,"sidebar-title"],["for","event-date",1,"form-label"],["id","event-date","type","date",1,"form-input",3,"ngModelChange","ngModel"],["for","location",1,"form-label"],["id","location","type","text","placeholder","City, Country...",1,"form-input",3,"ngModelChange","ngModel"],[1,"btn","btn-outline","add-people-btn",3,"click"],[1,"selected-people"],[1,"tag-input-group"],["type","text","placeholder","Add tag...",1,"form-input",3,"ngModelChange","keydown","ngModel"],[1,"btn","btn-primary",3,"click"],[1,"tags-list"],[1,"sidebar-title","flex","items-center","justify-between"],[1,"flex","items-center","gap-2"],["type","button",1,"btn","btn-outline",3,"click"],[1,"cover-preview"],[1,"selected-media"],[1,"media-picker"],["type","button",1,"btn","btn-outline","mt-2",3,"click"],[1,"media-uploader"],[1,"action-buttons"],[1,"btn","btn-primary",3,"click","disabled"],[1,"btn","btn-outline",3,"click","disabled"],["title","Add People to Story",3,"close","selectionChange","isOpen","multiSelect","selectedIds"],[1,"save-text"],["type","button",1,"category-btn",3,"click"],["for","story-content",1,"form-label"],[1,"formatting-toolbar"],["type","button","title","Bold (Ctrl+B)","aria-label","Bold",1,"format-btn",3,"click"],["type","button","title","Italic (Ctrl+I)","aria-label","Italic",1,"format-btn",3,"click"],["type","button","title","Heading","aria-label","Heading",1,"format-btn",3,"click"],["type","button","title","Bullet list","aria-label","Bullet list",1,"format-btn",3,"click"],["type","button","title","Link","aria-label","Insert link",1,"format-btn",3,"click"],[1,"toolbar-divider"],[1,"word-count","text-muted"],["id","story-content","placeholder",`Tell your story... Use simple Markdown formatting:

**bold text** for bold
*italic text* for italic
## Heading for headings
- Item for lists
[link text](url) for links`,"rows","20","required","",1,"form-input","content-editor",3,"ngModelChange","ngModel"],[1,"formatting-help","text-muted"],[1,"preview-title"],[1,"preview-content",3,"innerHTML"],[1,"person-chip",3,"primary"],[1,"person-chip"],[1,"primary-badge"],[1,"person-chip-name"],["type","button",1,"person-remove",3,"click"],[1,"material-icons"],[1,"tag-chip"],[1,"tag-remove",3,"click"],[3,"src","alt"],[1,"cover-meta"],[1,"text-sm"],[1,"media-chip",3,"active"],[1,"media-chip"],[1,"media-chip-text"],["type","button","aria-label","Set as cover",1,"media-chip-action",3,"click"],["type","button","aria-label","Remove media",1,"media-chip-action",3,"click"],[1,"media-search"],["type","text","placeholder","Search media by title or tag",1,"form-input",3,"input","value"],[1,"media-grid"],["type","button",1,"media-card",3,"selected"],["type","button",1,"media-card",3,"click"],[1,"media-card-body"],[1,"media-card-title"],[1,"media-card-meta","text-muted","text-sm"],[1,"media-card-actions"],[3,"uploadComplete","personIds","multiple"]],template:function(t,i){if(t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),I("click",function(){return i.onCancel()}),u(4,"span",4),l(5,"arrow_back"),d(),l(6," Back "),d(),u(7,"h1",5),l(8),d(),C(9,Kk,5,1,"div",6),C(10,Xk,4,0,"div",7),d(),u(11,"div",8)(12,"button",3),I("click",function(){return i.togglePreview()}),u(13,"span",4),l(14),d(),l(15),d()()(),u(16,"div",9)(17,"div",10)(18,"div",11)(19,"label",12),l(20,"Story Title *"),d(),u(21,"input",13),qt("ngModelChange",function(o){return mn(i.title,o)||(i.title=o),o}),d()(),u(22,"div",11)(23,"label",14),l(24,"Short Summary"),d(),u(25,"textarea",15),qt("ngModelChange",function(o){return mn(i.summary,o)||(i.summary=o),o}),d(),u(26,"div",16),l(27),d()(),u(28,"div",11)(29,"label",17),l(30,"Category"),d(),u(31,"div",18),K(32,Jk,4,4,"button",19,Zk),d()(),C(34,eN,27,3,"div",11),C(35,tN,4,2,"div",20),d(),u(36,"aside",21)(37,"div",22)(38,"h3",23)(39,"span",4),l(40,"calendar_today"),d(),l(41," When & Where "),d(),u(42,"div",11)(43,"label",24),l(44,"Event Date"),d(),u(45,"input",25),qt("ngModelChange",function(o){return mn(i.eventDate,o)||(i.eventDate=o),o}),d()(),u(46,"div",11)(47,"label",26),l(48,"Location"),d(),u(49,"input",27),qt("ngModelChange",function(o){return mn(i.location,o)||(i.location=o),o}),d()()(),u(50,"div",22)(51,"h3",23)(52,"span",4),l(53,"people"),d(),l(54," People in Story "),d(),u(55,"button",28),I("click",function(){return i.openPersonSelector()}),u(56,"span",4),l(57,"person_add"),d(),l(58," Add People "),d(),C(59,rN,3,0,"div",29)(60,oN,2,0,"p",16),d(),u(61,"div",22)(62,"h3",23)(63,"span",4),l(64,"label"),d(),l(65," Tags "),d(),u(66,"div",30)(67,"input",31),qt("ngModelChange",function(o){return mn(i.tagInput,o)||(i.tagInput=o),o}),I("keydown",function(o){return i.onTagInputKeydown(o)}),d(),u(68,"button",32),I("click",function(){return i.addTag()}),l(69," Add "),d()(),C(70,aN,3,0,"div",33),d(),u(71,"div",22)(72,"div",34)(73,"div",35)(74,"span",4),l(75,"collections"),d(),u(76,"span"),l(77,"Media & Cover"),d()(),u(78,"button",36),I("click",function(){return i.toggleMediaPicker()}),u(79,"span",4),l(80),d(),l(81),d()(),C(82,lN,7,3,"div",37),C(83,dN,3,0,"div",38)(84,uN,2,0,"p",16),C(85,fN,6,1,"div",39),u(86,"button",40),I("click",function(){return i.toggleUploader()}),u(87,"span",4),l(88),d(),l(89),d(),C(90,mN,2,2,"div",41),d(),u(91,"div",22)(92,"div",42)(93,"button",43),I("click",function(){return i.onSave(!0)}),u(94,"span",4),l(95,"publish"),d(),l(96," Publish "),d(),u(97,"button",44),I("click",function(){return i.onSave(!1)}),u(98,"span",4),l(99,"save"),d(),l(100," Save Draft "),d()()()()()(),u(101,"app-person-selector",45),I("close",function(){return i.closePersonSelector()})("selectionChange",function(o){return i.onPeopleSelected(o)}),d()),t&2){let r;p(8),T(" ",i.story()?"Edit Story":"New Story"," "),p(),b(i.lastSaved()?9:-1),p(),b(i.showSuccess()?10:-1),p(2),z("active",i.showPreview()),p(2),T(" ",i.showPreview()?"edit":"visibility"," "),p(),T(" ",i.showPreview()?"Edit":"Preview"," "),p(6),Wt("ngModel",i.title),p(4),Wt("ngModel",i.summary),p(2),T("",i.summary().length||0,"/240 characters"),p(5),X(i.categories),p(2),b(i.showPreview()?-1:34),p(),b(i.showPreview()?35:-1),p(10),Wt("ngModel",i.eventDate),p(4),Wt("ngModel",i.location),p(10),b(i.selectedPeople().length>0?59:60),p(8),Wt("ngModel",i.tagInput),p(3),b(i.tags().length>0?70:-1),p(10),k(i.showMediaPicker()?"expand_less":"photo_library"),p(),T(" ",i.showMediaPicker()?"Hide":"Select"," "),p(),b((r=i.coverMedia())?82:-1,r),p(),b(i.selectedMedia().length>0?83:84),p(2),b(i.showMediaPicker()?85:-1),p(3),k(i.showUploader()?"expand_less":"cloud_upload"),p(),T(" ",i.showUploader()?"Hide Uploader":"Upload New Media"," "),p(),b(i.showUploader()?90:-1),p(3),H("disabled",!i.title()||!i.content()),p(4),H("disabled",!i.title()||!i.content()),p(4),H("isOpen",i.showPersonSelector())("multiSelect",!0)("selectedIds",i.allSelectedIds())}},dependencies:[Ai,Ln,Ni,ia,uh,ea,Fd,Co],styles:[".story-editor-wrapper[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.editor-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--s-4);margin-bottom:var(--s-6);flex-wrap:wrap}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-3)}.editor-title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:var(--fw-bold);color:var(--text-primary)}.auto-save-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);padding:var(--s-2) var(--s-3);background:var(--bg-muted);color:var(--text-muted);font-size:.85rem;border-radius:var(--r-full);animation:_ngcontent-%COMP%_fadeIn .3s ease-in}.auto-save-indicator[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#10b981}.success-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);padding:var(--s-2) var(--s-4);background:linear-gradient(135deg,#10b981,#059669);color:#fff;font-size:.9rem;font-weight:600;border-radius:var(--r-full);animation:_ngcontent-%COMP%_bounceIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_bounceIn{0%{opacity:0;transform:scale(.5)}50%{transform:scale(1.1)}to{opacity:1;transform:scale(1)}}.header-actions[_ngcontent-%COMP%]{display:flex;gap:var(--s-3)}.editor-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 360px;gap:var(--s-8)}.editor-column[_ngcontent-%COMP%], .sidebar-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-6)}.sidebar-section[_ngcontent-%COMP%]{padding:var(--s-6);background:var(--bg-card);border-radius:var(--r-lg);border:1px solid var(--border-color)}.sidebar-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);margin:0 0 var(--s-4) 0;font-size:1.1rem;font-weight:600;color:var(--text-primary)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-2)}.form-label[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:var(--text-primary)}.form-input[_ngcontent-%COMP%]{width:100%;min-height:52px;padding:var(--s-4);background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--r-md);font-size:1rem;color:var(--text-primary);font-family:Inter,sans-serif;transition:all .3s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-soft);transform:scale(1.005)}.title-input[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;min-height:60px}.title-input[_ngcontent-%COMP%]:focus{transform:scale(1.01)}.category-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:var(--s-3)}.category-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--s-2);min-height:52px;padding:var(--s-3);background:var(--bg-card);border:2px solid var(--border-color);border-radius:var(--r-md);font-size:.9rem;color:var(--text-secondary);cursor:pointer;transition:all .2s ease}.category-btn[_ngcontent-%COMP%]:hover{background:var(--accent-soft);border-color:var(--accent);color:var(--accent);transform:scale(1.02)}.category-btn.active[_ngcontent-%COMP%]{background:var(--accent);border-color:var(--accent);color:#fff;font-weight:600}.category-btn[_ngcontent-%COMP%]:focus{outline:2px solid var(--accent);outline-offset:2px}.formatting-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);padding:var(--s-3);background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--r-md);flex-wrap:wrap}.format-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-width:44px;min-height:44px;padding:var(--s-2);background:transparent;border:1px solid transparent;border-radius:var(--r-sm);color:var(--text-secondary);cursor:pointer;transition:all .2s ease}.format-btn[_ngcontent-%COMP%]:hover{background:var(--accent-soft);border-color:var(--accent);color:var(--accent);transform:scale(1.05)}.format-btn[_ngcontent-%COMP%]:focus{outline:2px solid var(--accent);outline-offset:2px}.toolbar-divider[_ngcontent-%COMP%]{width:1px;height:32px;background:var(--border-color);margin:0 var(--s-2)}.word-count[_ngcontent-%COMP%]{margin-left:auto;font-size:.85rem}.content-editor[_ngcontent-%COMP%]{min-height:500px;font-family:Inter,sans-serif;font-size:1rem;line-height:1.7;resize:vertical}.formatting-help[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);font-size:.85rem}.preview-panel[_ngcontent-%COMP%]{padding:var(--s-8);background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--r-lg);min-height:500px}.preview-title[_ngcontent-%COMP%]{margin:0 0 var(--s-6) 0;font-size:2rem;color:var(--text-primary);font-weight:600}.preview-content[_ngcontent-%COMP%]{font-size:1.05rem;line-height:1.8;color:var(--text-primary)}.preview-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:var(--s-6) 0 var(--s-3) 0;font-size:1.6rem;font-weight:600}.preview-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:var(--s-4) 0 var(--s-2) 0;font-size:1.3rem;font-weight:600}.preview-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 var(--s-4) 0}.preview-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700;color:var(--text-primary)}.preview-content[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-style:italic}.preview-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--accent);text-decoration:underline}.preview-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:var(--s-4) 0;padding-left:var(--s-6)}.preview-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:var(--s-2)}.tag-input-group[_ngcontent-%COMP%]{display:flex;gap:var(--s-2)}.tag-input-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{flex:1}.tags-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--s-2);margin-top:var(--s-3)}.tag-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);padding:var(--s-2) var(--s-3);background:var(--accent-soft);color:var(--accent);font-size:.85rem;border-radius:var(--r-full);font-weight:500}.tag-remove[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:20px;height:20px;padding:0;background:transparent;border:none;border-radius:var(--r-full);color:var(--accent);cursor:pointer;transition:background .2s ease}.tag-remove[_ngcontent-%COMP%]:hover{background:var(--accent);color:#fff}.action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-3)}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.cover-preview[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-3);padding:var(--s-3);background:var(--bg-muted);border-radius:var(--r-md);margin-bottom:var(--s-3)}.cover-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:72px;height:72px;object-fit:cover;border-radius:var(--r-md);border:1px solid var(--border-color)}.cover-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-1)}.selected-media[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-2);margin-bottom:var(--s-3)}.media-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);padding:var(--s-2) var(--s-3);border:1px solid var(--border-color);border-radius:var(--r-full);background:var(--bg-card)}.media-chip.active[_ngcontent-%COMP%]{border-color:var(--accent)}.media-chip-text[_ngcontent-%COMP%]{flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.media-chip-action[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;background:transparent;border:none;border-radius:var(--r-full);cursor:pointer;color:var(--text-muted);transition:background .2s ease}.media-chip-action[_ngcontent-%COMP%]:hover{background:var(--bg-muted);color:var(--text-primary)}.media-picker[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-3);margin-top:var(--s-3)}.media-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.media-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:var(--s-3)}.media-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-2);border:1px solid var(--border-color);border-radius:var(--r-md);background:var(--bg-card);padding:var(--s-3);cursor:pointer;transition:border-color .2s ease,box-shadow .2s ease}.media-card.selected[_ngcontent-%COMP%]{border-color:var(--accent);box-shadow:var(--shadow-sm)}.media-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:120px;object-fit:cover;border-radius:var(--r-sm);background:var(--bg-muted)}.media-card-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-2)}.media-card-title[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem;color:var(--text-primary);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.media-card-meta[_ngcontent-%COMP%]{font-size:.85rem}.media-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.media-uploader[_ngcontent-%COMP%]{margin-top:var(--s-3)}.add-people-btn[_ngcontent-%COMP%]{width:100%;margin-bottom:var(--s-3)}.selected-people[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-2);margin-top:var(--s-3)}.person-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);padding:var(--s-2) var(--s-3);background:var(--bg-muted);border:1px solid var(--border-color);border-radius:var(--r-md);font-size:.9rem}.person-chip.primary[_ngcontent-%COMP%]{background:var(--accent-soft);border-color:var(--accent)}.primary-badge[_ngcontent-%COMP%]{font-size:.7rem;font-weight:600;text-transform:uppercase;padding:2px 6px;background:var(--accent);color:#fff;border-radius:var(--r-sm);letter-spacing:.5px}.person-chip-name[_ngcontent-%COMP%]{flex:1;font-weight:500;color:var(--text-primary)}.person-remove[_ngcontent-%COMP%]{width:24px;height:24px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;border-radius:var(--r-full);color:var(--text-muted);cursor:pointer;transition:all .2s ease}.person-remove[_ngcontent-%COMP%]:hover{background:var(--danger-light);color:var(--danger)}.person-remove[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:16px}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}@media(max-width:1023px){.editor-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}.sidebar-column[_ngcontent-%COMP%]{order:2}}@media(max-width:767px){.editor-title[_ngcontent-%COMP%]{font-size:1.6rem}.category-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}.category-btn[_ngcontent-%COMP%]{font-size:.85rem;min-height:44px}.formatting-toolbar[_ngcontent-%COMP%]{gap:var(--s-1);padding:var(--s-2)}.format-btn[_ngcontent-%COMP%]{min-width:40px;min-height:40px}.content-editor[_ngcontent-%COMP%]{min-height:400px;font-size:.95rem}.preview-title[_ngcontent-%COMP%]{font-size:1.6rem}.preview-content[_ngcontent-%COMP%]{font-size:1rem}}@media(prefers-reduced-motion:reduce){.category-btn[_ngcontent-%COMP%]:hover, .format-btn[_ngcontent-%COMP%]:hover, .category-btn.active[_ngcontent-%COMP%]{transform:none}}"],changeDetection:0})};function hN(n,e){n&1&&(u(0,"div",1)(1,"div",3)(2,"span",4),l(3,"sync"),d(),u(4,"span",5),l(5,"Loading..."),d()()())}function gN(n,e){n&1&&(u(0,"div",1)(1,"div",6)(2,"span",7),l(3,"article"),d(),u(4,"h3"),l(5,"Story Not Found"),d(),u(6,"p",5),l(7,"The requested story could not be found."),d(),u(8,"a",8),l(9,"View All Stories"),d()()())}function vN(n,e){if(n&1){let t=N();u(0,"app-story-editor",9),I("save",function(r){x(t);let o=m();return D(o.handleSave(r))})("cancel",function(){x(t);let r=m();return D(r.handleCancel())}),d()}if(n&2){let t=m();H("story",t.story())}}var ra=class n{storiesService=_(Xt);route=_(lt);router=_(Me);subscription=null;story=E(void 0);isLoading=E(!0);isEditMode=E(!1);currentStoryId=E(null);loadStory=ot(()=>{let e=this.currentStoryId(),t=this.storiesService.allStories(),i=this.storiesService.loading();if(!e){this.story.set(void 0),this.isLoading.set(!1);return}let r=t.find(o=>o.id===e);r?(this.story.set(r),this.isLoading.set(!1)):i||(this.story.set(void 0),this.isLoading.set(!1))});ngOnInit(){this.subscription=this.route.paramMap.subscribe(e=>{let t=e.get("id");this.currentStoryId.set(t),this.isEditMode.set(!!t),this.isLoading.set(!0)})}ngOnDestroy(){this.subscription?.unsubscribe()}handleSave(e){let t=this.currentStoryId();this.isEditMode()&&t?(this.storiesService.updateStory(t,e),setTimeout(()=>{this.router.navigate(["/stories",t])},300)):this.storiesService.createStory(e,"current-user").subscribe({next:i=>{console.log("\u2713 Story created, navigating to detail"),this.router.navigate(["/stories",i.id])},error:i=>{console.error("\u2717 Failed to create story:",i)}})}handleCancel(){let e=this.currentStoryId();this.isEditMode()&&e?this.router.navigate(["/stories",e]):this.router.navigate(["/stories"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-story-editor-page"]],decls:4,vars:1,consts:[[1,"container"],[1,"card"],[3,"story"],[1,"flex","items-center","justify-center","gap-4","py-8"],[1,"material-icons","spin"],[1,"text-muted"],[1,"text-center","py-8"],[1,"material-icons","icon-xl","text-muted","mb-4"],["routerLink","/stories",1,"btn","btn-primary","mt-4"],[3,"save","cancel","story"]],template:function(t,i){t&1&&(u(0,"div",0),C(1,hN,6,0,"div",1)(2,gN,10,0,"div",1)(3,vN,1,1,"app-story-editor",2),d()),t&2&&(p(),b(i.isLoading()?1:i.isEditMode()&&!i.story()?2:3))},dependencies:[Ld,Ce],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.py-8[_ngcontent-%COMP%]{padding-block:2rem}.mt-4[_ngcontent-%COMP%]{margin-top:1rem}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.btn[_ngcontent-%COMP%]{text-decoration:none;display:inline-flex;padding:var(--s-3) var(--s-4)}.icon-xl[_ngcontent-%COMP%]{font-size:3rem;display:block}"],changeDetection:0})};var yN=()=>[1,2,3,4,5,6,7,8],_N=(n,e)=>e.id;function CN(n,e){if(n&1){let t=N();v(0,"div",1)(1,"span",6),l(2),g(),v(3,"button",7),B("click",function(){x(t);let r=m();return D(r.clearSelection())}),v(4,"span",8),l(5,"clear"),g(),l(6," Clear "),g()()}if(n&2){let t=m();p(2),T(" ",t.selectedIds().size," selected ")}}function bN(n,e){n&1&&(v(0,"div",9),ue(1,"div",10)(2,"div",11),g())}function EN(n,e){n&1&&(v(0,"div",3),K(1,bN,3,0,"div",9,Ie),g()),n&2&&(Xe("grid-template-columns","repeat(auto-fill, minmax(200px, 1fr))"),p(),X(wi(2,yN)))}function xN(n,e){n&1&&(v(0,"div",15)(1,"span",19),l(2,"zoom_in"),g()())}function DN(n,e){if(n&1&&(v(0,"div",16)(1,"span",20),l(2),g()()),n&2){let t=m().$implicit,i=m();p(2),T(" ",i.isSelected(t.id)?"check_circle":"radio_button_unchecked"," ")}}function wN(n,e){n&1&&l(0," videocam ")}function MN(n,e){n&1&&l(0," mic ")}function SN(n,e){n&1&&l(0," description ")}function IN(n,e){if(n&1&&(v(0,"div",17)(1,"span",8),C(2,wN,1,0)(3,MN,1,0)(4,SN,1,0),g()()),n&2){let t,i=m().$implicit;p(2),b((t=i.type)==="video"?2:t==="audio"?3:t==="document"?4:-1)}}function PN(n,e){if(n&1&&(v(0,"div",18),l(1),g()),n&2){let t=m().$implicit;p(),T(" ",t.caption," ")}}function TN(n,e){if(n&1){let t=N();v(0,"div",12),B("click",function(){let r=x(t).$implicit,o=m();return D(o.onPhotoClick(r))})("mouseenter",function(){let r=x(t).$implicit,o=m();return D(o.onPhotoHover(r.id))})("mouseleave",function(){x(t);let r=m();return D(r.onPhotoLeave())}),v(1,"div",13),ue(2,"img",14),C(3,xN,3,0,"div",15),C(4,DN,3,1,"div",16),C(5,IN,5,1,"div",17),g(),C(6,PN,2,1,"div",18),g()}if(n&2){let t=e.$implicit,i=e.$index,r=m();Xe("animation-delay",r.getItemDelay(i)),z("selected",r.isSelected(t.id))("hovered",r.isHovered(t.id))("animate-in",r.animateIn()),te("aria-label",t.caption||"Photo"),p(2),_e("src",r.getImageUrl(t),$e)("alt",t.altText||t.caption||"Photo"),p(),b(r.isHovered(t.id)&&!r.selectable()?3:-1),p(),b(r.selectable()?4:-1),p(),b(t.type!=="photo"?5:-1),p(),b(r.showCaptions()&&t.caption?6:-1)}}function ON(n,e){n&1&&(v(0,"div",5)(1,"span",21),l(2,"photo_library"),g(),v(3,"p"),l(4,"No photos yet"),g()())}var Vd=class n{mediaService=_(be);mediaIds=j([]);columns=j(4);showCaptions=j(!0);selectable=j(!1);photoClicked=G();photoSelected=G();selectedIds=E(new Set);loadedUrls=E(new Map);isLoading=E(!0);animateIn=E(!1);hoveredId=E(null);media=S(()=>{let e=this.mediaIds();return e.length===0?this.mediaService.media():e.map(t=>this.mediaService.getMedia(t)).filter(t=>t!==void 0)});hasSelection=S(()=>this.selectedIds().size>0);ngOnInit(){setTimeout(()=>this.animateIn.set(!0),100),this.isLoading.set(!1)}getImageUrl(e){let t=this.mediaService.getMediaUrl(e.id);return t||e.thumbnailUrl||e.mediumUrl||e.url}onPhotoClick(e){this.selectable()?this.toggleSelection(e.id):this.photoClicked.emit(e)}toggleSelection(e){this.selectedIds.update(t=>{let i=new Set(t);return i.has(e)?i.delete(e):i.add(e),i}),this.photoSelected.emit(Array.from(this.selectedIds()))}isSelected(e){return this.selectedIds().has(e)}clearSelection(){this.selectedIds.set(new Set),this.photoSelected.emit([])}onPhotoHover(e){this.hoveredId.set(e)}onPhotoLeave(){this.hoveredId.set(null)}isHovered(e){return this.hoveredId()===e}getItemDelay(e){return`${e*.05}s`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-photo-grid"]],inputs:{mediaIds:[1,"mediaIds"],columns:[1,"columns"],showCaptions:[1,"showCaptions"],selectable:[1,"selectable"]},outputs:{photoClicked:"photoClicked",photoSelected:"photoSelected"},decls:7,vars:5,consts:[[1,"photo-grid-container"],[1,"selection-bar"],[1,"photo-grid",3,"grid-template-columns"],[1,"photo-grid"],["tabindex","0","role","button",1,"photo-item",3,"selected","hovered","animate-in","animation-delay"],[1,"empty-state"],[1,"selection-count"],["type","button",1,"btn","btn-outline",3,"click"],[1,"material-icons","icon-sm"],[1,"skeleton-item"],[1,"skeleton-image"],[1,"skeleton-caption"],["tabindex","0","role","button",1,"photo-item",3,"click","mouseenter","mouseleave"],[1,"photo-wrapper"],["loading","lazy",3,"src","alt"],[1,"hover-overlay"],[1,"selection-indicator"],[1,"media-type-badge"],[1,"photo-caption"],[1,"material-icons","icon-lg"],[1,"material-icons"],[1,"material-icons","icon-xl"]],template:function(t,i){t&1&&(v(0,"div",0),C(1,CN,7,1,"div",1),C(2,EN,3,3,"div",2),v(3,"div",3),K(4,TN,7,15,"div",4,_N),g(),C(6,ON,5,0,"div",5),g()),t&2&&(p(),b(i.hasSelection()?1:-1),p(),b(i.isLoading()&&i.media().length===0?2:-1),p(),Xe("grid-template-columns","repeat(auto-fill, minmax(200px, 1fr))"),p(),X(i.media()),p(2),b(i.media().length===0?6:-1))},styles:[".photo-grid-container[_ngcontent-%COMP%]{width:100%}.selection-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--s-4);background:var(--primary-lighter);border-radius:var(--r-md);margin-bottom:var(--s-4)}.selection-count[_ngcontent-%COMP%]{font-size:1rem;font-weight:var(--fw-semibold);color:var(--primary-dark)}.photo-grid[_ngcontent-%COMP%]{display:grid;gap:var(--s-4);width:100%}.skeleton-item[_ngcontent-%COMP%]{background:var(--bg-card);border-radius:var(--r-md);overflow:hidden}.skeleton-image[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;background:linear-gradient(90deg,var(--bg-muted) 25%,var(--bg-card) 50%,var(--bg-muted) 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.skeleton-caption[_ngcontent-%COMP%]{height:20px;margin:var(--s-2) var(--s-3);background:linear-gradient(90deg,var(--bg-muted) 25%,var(--bg-card) 50%,var(--bg-muted) 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:var(--r-sm)}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:200% 0}to{background-position:-200% 0}}.photo-item[_ngcontent-%COMP%]{cursor:pointer;border-radius:var(--r-md);overflow:hidden;background:var(--bg-card);transition:all .3s ease;outline:3px solid transparent;opacity:0}.photo-item.animate-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease forwards}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.photo-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.photo-item[_ngcontent-%COMP%]:focus{outline:3px solid var(--primary)}.photo-item.selected[_ngcontent-%COMP%]{outline:3px solid var(--primary);transform:scale(.98)}.photo-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:1;overflow:hidden;background:var(--bg-muted)}.photo-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.photo-item.hovered[_ngcontent-%COMP%]   .photo-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.1)}.hover-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0006;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.photo-item.hovered[_ngcontent-%COMP%]   .hover-overlay[_ngcontent-%COMP%]{opacity:1}.hover-overlay[_ngcontent-%COMP%]   .icon-lg[_ngcontent-%COMP%]{font-size:48px;color:#fff;animation:_ngcontent-%COMP%_zoomPulse 1s infinite}@keyframes _ngcontent-%COMP%_zoomPulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}.selection-indicator[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;width:32px;height:32px;background:#fffffff2;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-sm)}.selection-indicator[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:24px;color:var(--accent)}.photo-item.selected[_ngcontent-%COMP%]   .selection-indicator[_ngcontent-%COMP%]{background:var(--accent)}.photo-item.selected[_ngcontent-%COMP%]   .selection-indicator[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#fff}.media-type-badge[_ngcontent-%COMP%]{position:absolute;bottom:12px;left:12px;background:#000000b3;color:#fff;padding:6px 10px;border-radius:var(--r-sm);display:flex;align-items:center;gap:4px}.photo-caption[_ngcontent-%COMP%]{padding:var(--s-3);font-size:.9rem;color:var(--text-secondary);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--s-8);color:var(--text-muted)}.empty-state[_ngcontent-%COMP%]   .icon-xl[_ngcontent-%COMP%]{font-size:64px;opacity:.5;margin-bottom:var(--s-4)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;margin:0}@media(max-width:768px){.photo-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))!important;gap:var(--s-2)}.selection-bar[_ngcontent-%COMP%]{padding:var(--s-3)}.selection-indicator[_ngcontent-%COMP%]{width:28px;height:28px}.selection-indicator[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.photo-caption[_ngcontent-%COMP%]{font-size:.85rem;padding:var(--s-2)}}@media(min-width:769px)and (max-width:1024px){.photo-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(180px,1fr))!important}}"],changeDetection:0})};function kN(n,e){if(n&1){let t=N();u(0,"button",8),I("click",function(){x(t);let r=m();return D(r.showUploader.set(!r.showUploader()))}),u(1,"span",9),l(2),d(),l(3),d()}if(n&2){let t=m();p(2),k(t.showUploader()?"close":"add_photo_alternate"),p(),T(" ",t.showUploader()?"Close":"Upload Photos"," ")}}function NN(n,e){if(n&1){let t=N();u(0,"div",4)(1,"app-photo-uploader",10),I("uploadComplete",function(){x(t);let r=m();return D(r.onUploadComplete())})("cancelled",function(){x(t);let r=m();return D(r.showUploader.set(!1))}),d()()}}function AN(n,e){n&1&&(u(0,"div",5)(1,"span",11),l(2,"sync"),d(),u(3,"p"),l(4,"Loading media..."),d()())}function RN(n,e){if(n&1){let t=N();u(0,"app-photo-grid",12),I("photoClicked",function(r){x(t);let o=m();return D(o.onPhotoClick(r))}),d()}n&2&&H("showCaptions",!0)}var jd=class n{mediaService=_(be);authService=_(Le);isAdmin=this.authService.isAdmin;showUploader=E(!1);viewerOpen=E(!1);viewerIndex=E(0);isLoading=S(()=>this.mediaService.loading());mediaCount=S(()=>this.mediaService.media().length);allMediaIds=S(()=>this.mediaService.media().map(e=>e.id));onUploadComplete(){this.showUploader.set(!1)}onPhotoClick(e){let i=this.mediaService.media().findIndex(r=>r.id===e.id);this.viewerIndex.set(i>=0?i:0),this.viewerOpen.set(!0)}closeViewer(){this.viewerOpen.set(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-media-page"]],decls:12,vars:7,consts:[[1,"container"],[1,"page-header","flex","flex-col","md-flex-row","items-start","md-items-center","justify-between","gap-4"],[1,"text-muted"],[1,"btn","btn-primary","flex","items-center","gap-2"],[1,"uploader-panel","mb-6"],[1,"loading-state"],[3,"showCaptions"],[3,"close","indexChanged","mediaIds","currentIndex","isOpen"],[1,"btn","btn-primary","flex","items-center","gap-2",3,"click"],[1,"material-icons"],[3,"uploadComplete","cancelled"],[1,"material-icons","spin"],[3,"photoClicked","showCaptions"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Photos & Media"),d(),u(5,"p",2),l(6),d()(),C(7,kN,4,2,"button",3),d(),C(8,NN,2,0,"div",4),C(9,AN,5,0,"div",5)(10,RN,1,1,"app-photo-grid",6),u(11,"app-photo-viewer",7),I("close",function(){return i.closeViewer()})("indexChanged",function(o){return i.viewerIndex.set(o)}),d()()),t&2&&(p(6),T("",i.mediaCount()," items in your collection"),p(),b(i.isAdmin()?7:-1),p(),b(i.showUploader()?8:-1),p(),b(i.isLoading()?9:10),p(2),H("mediaIds",i.allMediaIds())("currentIndex",i.viewerIndex())("isOpen",i.viewerOpen()))},dependencies:[Vd,Co,yo],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:.5rem}.uploader-panel[_ngcontent-%COMP%]{background:var(--bg-card);border-radius:var(--r-lg);padding:var(--s-6);border:1px solid var(--border-color);animation:_ngcontent-%COMP%_slideDown .3s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:var(--s-12)}.loading-state[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-muted);margin-bottom:var(--s-4)}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.btn[_ngcontent-%COMP%]{text-decoration:none;display:inline-flex;align-items:center;gap:var(--s-2);padding:var(--s-3) var(--s-4);cursor:pointer;border:none}.mb-6[_ngcontent-%COMP%]{margin-bottom:var(--s-6)}"],changeDetection:0})};function FN(n,e){n&1&&ue(0,"div",1)}function LN(n,e){n&1&&ue(0,"div",4)}function VN(n,e){n&1&&(v(0,"span",10),l(1,"~"),g())}function jN(n,e){n&1&&(v(0,"span",12)(1,"span",22),l(2,"auto_stories"),g()())}function BN(n,e){if(n&1&&(v(0,"span",13)(1,"span",22),l(2,"photo_library"),g(),l(3),g()),n&2){let t=m();p(3),T(" ",t.event().mediaIds.length," ")}}function UN(n,e){if(n&1&&(v(0,"p",17)(1,"span",22),l(2,"place"),g(),l(3),g()),n&2){let t=m();p(3),T(" ",t.event().location," ")}}function $N(n,e){if(n&1&&(v(0,"p",23),l(1),g()),n&2){let t=m();z("expanded",t.isExpanded()),p(),T(" ",t.event().description," ")}}function HN(n,e){if(n&1){let t=N();v(0,"button",25),B("click",function(r){x(t);let o=m(2);return D(o.onStoryClick(r))}),v(1,"span",22),l(2,"auto_stories"),g(),l(3," Read Story "),g()}}function zN(n,e){if(n&1){let t=N();v(0,"button",25),B("click",function(r){x(t);let o=m(2);return D(o.onMediaClick(r))}),v(1,"span",22),l(2,"photo_library"),g(),l(3," View Photos "),g()}}function GN(n,e){if(n&1&&(v(0,"div",19),C(1,HN,4,0,"button",24),C(2,zN,4,0,"button",24),g()),n&2){let t=m();p(),b(t.hasStory()?1:-1),p(),b(t.hasMedia()?2:-1)}}function WN(n,e){n&1&&(v(0,"div",20)(1,"span",3),l(2,"touch_app"),g(),l(3," Click to expand "),g())}var Bd=class n{event=j.required();isFirst=j(!1);isLast=j(!1);index=j(0);eventClicked=G();storyClicked=G();personClicked=G();mediaClicked=G();isExpanded=E(!1);isHovered=E(!1);isAnimating=E(!1);rippleActive=E(!1);showActionHint=E(!1);hasMedia=S(()=>{let e=this.event().mediaIds;return e&&e.length>0});hasStory=S(()=>!!this.event().storyId);importanceClass=S(()=>`importance-${this.event().importance}`);onEventClick(){this.triggerRipple(),this.isExpanded.update(e=>!e),this.eventClicked.emit(this.event().id)}onStoryClick(e){e.stopPropagation();let t=this.event().storyId;t&&this.storyClicked.emit(t)}onPersonClick(e,t){e.stopPropagation(),this.personClicked.emit(t)}onMediaClick(e){e.stopPropagation();let t=this.event().mediaIds;t&&t.length>0&&this.mediaClicked.emit(t)}onMouseEnter(){this.isHovered.set(!0),setTimeout(()=>{this.isHovered()&&!this.isExpanded()&&this.showActionHint.set(!0)},500)}onMouseLeave(){this.isHovered.set(!1),this.showActionHint.set(!1)}getAnimationDelay(){return`${this.index()*.05}s`}triggerRipple(){this.rippleActive.set(!0),setTimeout(()=>this.rippleActive.set(!1),600)}toggleExpand(){this.isAnimating.set(!0),this.isExpanded.update(e=>!e),setTimeout(()=>this.isAnimating.set(!1),300)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-timeline-item"]],inputs:{event:[1,"event"],isFirst:[1,"isFirst"],isLast:[1,"isLast"],index:[1,"index"]},outputs:{eventClicked:"eventClicked",storyClicked:"storyClicked",personClicked:"personClicked",mediaClicked:"mediaClicked"},decls:29,vars:30,consts:[["tabindex","0","role","button",1,"timeline-item",3,"click","mouseenter","mouseleave"],[1,"ripple-effect"],[1,"timeline-marker"],[1,"material-icons"],[1,"timeline-line"],[1,"event-card"],[1,"event-header"],[1,"event-date"],[1,"year"],[1,"full-date"],[1,"estimated-badge"],[1,"event-badges"],["title","Has story",1,"badge","story-badge","badge-bounce"],["title","Has media",1,"badge","media-badge","badge-bounce",2,"animation-delay","0.1s"],[1,"event-content"],[1,"event-title"],[1,"type-icon","material-icons"],[1,"event-location"],[1,"event-description",3,"expanded"],[1,"event-actions","slide-down"],[1,"action-hint"],[1,"expand-indicator"],[1,"material-icons","icon-sm"],[1,"event-description"],["type","button",1,"btn","btn-outline"],["type","button",1,"btn","btn-outline",3,"click"]],template:function(t,i){t&1&&(v(0,"div",0),B("click",function(){return i.onEventClick()})("mouseenter",function(){return i.onMouseEnter()})("mouseleave",function(){return i.onMouseLeave()}),C(1,FN,1,0,"div",1),v(2,"div",2)(3,"span",3),l(4),g()(),C(5,LN,1,0,"div",4),v(6,"div",5)(7,"div",6)(8,"div",7)(9,"span",8),l(10),g(),v(11,"span",9),l(12),g(),C(13,VN,2,0,"span",10),g(),v(14,"div",11),C(15,jN,3,0,"span",12),C(16,BN,4,1,"span",13),g()(),v(17,"div",14)(18,"h3",15)(19,"span",16),l(20),g(),l(21),g(),C(22,UN,4,1,"p",17),C(23,$N,2,3,"p",18),g(),C(24,GN,3,2,"div",19),C(25,WN,4,0,"div",20),v(26,"div",21)(27,"span",3),l(28),g()()()()),t&2&&(Di(i.importanceClass()),Xe("animation-delay",i.getAnimationDelay()),z("expanded",i.isExpanded())("hovered",i.isHovered())("animating",i.isAnimating()),te("aria-label",i.event().title),p(),b(i.rippleActive()?1:-1),p(),Xe("background-color",i.event().color),p(2),k(i.event().icon),p(),b(i.isLast()?-1:5),p(5),k(i.event().year),p(2),k(i.event().dateDisplay),p(),b(i.event().isEstimated?13:-1),p(2),b(i.hasStory()?15:-1),p(),b(i.hasMedia()?16:-1),p(3),Xe("color",i.event().color),p(),T(" ",i.event().icon," "),p(),T(" ",i.event().title," "),p(),b(i.event().location?22:-1),p(),b(i.event().description?23:-1),p(),b(i.isExpanded()?24:-1),p(),b(i.showActionHint()&&!i.isExpanded()?25:-1),p(3),T(" ",i.isExpanded()?"expand_less":"expand_more"," "))},styles:[".timeline-item[_ngcontent-%COMP%]{position:relative;display:flex;gap:var(--s-4);padding-left:var(--s-2);cursor:pointer;opacity:0;animation:_ngcontent-%COMP%_fadeInUp .5s ease forwards;outline:none}.timeline-item[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--primary);outline-offset:4px;border-radius:var(--r-md)}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.ripple-effect[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#4f46e54d;transform:translate(-50%,-50%);animation:_ngcontent-%COMP%_ripple .6s ease-out;pointer-events:none;z-index:10}@keyframes _ngcontent-%COMP%_ripple{to{width:500px;height:500px;opacity:0}}.timeline-marker[_ngcontent-%COMP%]{position:relative;flex-shrink:0;width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 0 0 4px var(--bg-main);transition:all .3s ease;z-index:2}.timeline-item.hovered[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]{transform:scale(1.15);box-shadow:0 0 0 6px var(--bg-main),var(--shadow-lg)}.timeline-item.importance-high[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]{width:56px;height:56px}.timeline-marker[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:24px}.timeline-line[_ngcontent-%COMP%]{position:absolute;left:26px;top:48px;width:3px;height:calc(100% + 24px);background:var(--border-color);z-index:1}.timeline-item.importance-high[_ngcontent-%COMP%]   .timeline-line[_ngcontent-%COMP%]{left:30px}.event-card[_ngcontent-%COMP%]{flex:1;background:var(--bg-card);border-radius:var(--r-lg);padding:var(--s-4);margin-bottom:var(--s-6);box-shadow:var(--shadow-sm);transition:all .3s cubic-bezier(.4,0,.2,1);border:2px solid transparent;position:relative;overflow:hidden}.timeline-item.animating[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.34,1.56,.64,1)}.timeline-item.hovered[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]{transform:translate(4px);box-shadow:var(--shadow-md);border-color:var(--accent-soft)}.timeline-item.expanded[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]{box-shadow:var(--shadow-lg);border-color:var(--accent)}.timeline-item.importance-high[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]{border-left:4px solid var(--accent)}.event-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:var(--s-3);gap:var(--s-3)}.event-date[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.year[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:var(--accent);line-height:1}.full-date[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-muted)}.estimated-badge[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;background:var(--bg-muted);border-radius:var(--r-sm);font-size:.8rem;color:var(--text-muted);font-weight:600}.event-badges[_ngcontent-%COMP%]{display:flex;gap:var(--s-2);flex-wrap:wrap}.badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:4px 10px;border-radius:var(--r-full);font-size:.85rem;font-weight:600;transition:all .2s ease}.badge-bounce[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_badgeBounce .6s ease}@keyframes _ngcontent-%COMP%_badgeBounce{0%,to{transform:scale(1)}30%{transform:scale(1.15)}60%{transform:scale(.95)}}.story-badge[_ngcontent-%COMP%]{background:var(--accent-soft);color:var(--accent)}.media-badge[_ngcontent-%COMP%]{background:#e0f2fe;color:#0284c7}.event-content[_ngcontent-%COMP%]{margin-bottom:var(--s-3)}.event-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);margin:0 0 var(--s-2) 0;font-size:1.2rem;font-weight:600;color:var(--text-primary);line-height:1.4}.type-icon[_ngcontent-%COMP%]{font-size:20px}.event-location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-1);margin:0 0 var(--s-2) 0;font-size:.95rem;color:var(--text-secondary)}.event-description[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:var(--text-secondary);line-height:1.6;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;transition:all .3s ease}.event-description.expanded[_ngcontent-%COMP%]{-webkit-line-clamp:unset;display:block}.event-actions[_ngcontent-%COMP%]{display:flex;gap:var(--s-3);margin-top:var(--s-4);padding-top:var(--s-4);border-top:1px solid var(--border-color)}.event-actions.slide-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px);max-height:0}to{opacity:1;transform:translateY(0);max-height:200px}}.event-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;min-height:44px;transition:all .2s ease}.event-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.event-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.action-hint[_ngcontent-%COMP%]{position:absolute;bottom:var(--s-2);left:50%;transform:translate(-50%);display:flex;align-items:center;gap:var(--s-1);padding:var(--s-1) var(--s-2);background:var(--accent);color:#fff;border-radius:var(--r-full);font-size:.85rem;font-weight:600;animation:_ngcontent-%COMP%_hintPulse 1.5s ease-in-out infinite;pointer-events:none;z-index:5;white-space:nowrap}@keyframes _ngcontent-%COMP%_hintPulse{0%,to{opacity:.7;transform:translate(-50%) scale(1)}50%{opacity:1;transform:translate(-50%) scale(1.05)}}.action-hint[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:16px}.expand-indicator[_ngcontent-%COMP%]{text-align:center;margin-top:var(--s-2);opacity:.5;transition:opacity .2s}.timeline-item.hovered[_ngcontent-%COMP%]   .expand-indicator[_ngcontent-%COMP%]{opacity:1}.expand-indicator[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px;color:var(--text-muted)}@media(max-width:768px){.timeline-item[_ngcontent-%COMP%]{gap:var(--s-3);padding-left:0}.timeline-marker[_ngcontent-%COMP%]{width:40px;height:40px}.timeline-item.importance-high[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]{width:44px;height:44px}.timeline-marker[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.timeline-line[_ngcontent-%COMP%]{left:21px}.timeline-item.importance-high[_ngcontent-%COMP%]   .timeline-line[_ngcontent-%COMP%]{left:23px}.event-card[_ngcontent-%COMP%]{padding:var(--s-3);margin-bottom:var(--s-4)}.year[_ngcontent-%COMP%]{font-size:1.1rem}.full-date[_ngcontent-%COMP%]{font-size:.85rem}.event-title[_ngcontent-%COMP%]{font-size:1.1rem}.event-actions[_ngcontent-%COMP%]{flex-direction:column}.event-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0})};var qN=()=>[1,2,3,4],YN=(n,e)=>e.type,QN=(n,e)=>e.label,ZN=(n,e)=>e.id;function KN(n,e){if(n&1&&(u(0,"div",1)(1,"span",17),l(2,"check_circle"),d(),l(3),d()),n&2){let t=m();p(3),T(" ",t.successMessage()," ")}}function XN(n,e){n&1&&(u(0,"div",2)(1,"div",18)(2,"span",17),l(3,"refresh"),d()(),u(4,"p"),l(5,"Loading timeline..."),d()())}function JN(n,e){if(n&1&&(u(0,"p",5),l(1),Et(2,"date"),Et(3,"date"),d()),n&2){let t=m();p(),ic("",t.stats().totalEvents," events spanning ",Mi(2,3,t.stats().dateRange.earliest,"yyyy")," - ",Mi(3,6,t.stats().dateRange.latest,"yyyy"))}}function eA(n,e){if(n&1&&(u(0,"span",20),l(1),d()),n&2){let t=m(2);p(),k(t.filter().eventTypes.length)}}function tA(n,e){if(n&1){let t=N();u(0,"button",19),I("click",function(){x(t);let r=m();return D(r.toggleFilters())}),u(1,"span",8),l(2,"filter_list"),d(),l(3," Filters "),C(4,eA,2,1,"span",20),d()}if(n&2){let t=m();p(4),b(t.hasActiveFilters()?4:-1)}}function nA(n,e){if(n&1&&(u(0,"div",21)(1,"div",22)(2,"span",23),l(3,"event"),d(),u(4,"div",24)(5,"span",25),l(6),d(),u(7,"span",26),l(8,"Total Events"),d()()(),u(9,"div",22)(10,"span",23),l(11,"people"),d(),u(12,"div",24)(13,"span",25),l(14),d(),u(15,"span",26),l(16,"People"),d()()(),u(17,"div",22)(18,"span",23),l(19,"auto_stories"),d(),u(20,"div",24)(21,"span",25),l(22),d(),u(23,"span",26),l(24,"Stories"),d()()(),u(25,"div",22)(26,"span",23),l(27,"photo_library"),d(),u(28,"div",24)(29,"span",25),l(30),d(),u(31,"span",26),l(32,"With Media"),d()()()()),n&2){let t=m();z("pulse",t.statsPulse()),p(6),k(t.stats().totalEvents),p(8),k(t.stats().peopleInvolved),p(8),k(t.stats().storiesLinked),p(8),k(t.stats().mediaAttached)}}function iA(n,e){if(n&1){let t=N();u(0,"button",32),I("click",function(){let r=x(t).$implicit,o=m(2);return D(o.toggleEventType(r.type))}),u(1,"span",8),l(2),d(),l(3),d()}if(n&2){let t=e.$implicit,i=m(2);Xe("--chip-color",t.color),z("active",i.isEventTypeSelected(t.type)),p(2),k(t.icon),p(),T(" ",t.label," ")}}function rA(n,e){if(n&1){let t=N();u(0,"button",33),I("click",function(){x(t);let r=m(2);return D(r.clearFilters())}),u(1,"span",8),l(2,"clear"),d(),l(3," Clear All Filters "),d()}}function oA(n,e){if(n&1&&(u(0,"div",27)(1,"div",28)(2,"h3"),l(3,"Event Types"),d(),u(4,"div",29),K(5,iA,4,6,"button",30,YN),d()(),C(7,rA,4,0,"button",31),d()),n&2){let t=m();z("filter-animate",t.filterChangeAnimation()),p(5),X(t.eventTypes()),p(2),b(t.hasActiveFilters()?7:-1)}}function sA(n,e){if(n&1){let t=N();u(0,"div",12)(1,"span"),l(2),d(),u(3,"button",34),I("click",function(){x(t);let r=m();return D(r.clearYearFilter())}),u(4,"span",17),l(5,"close"),d()()()}if(n&2){let t=m();p(2),T("Showing events from ",t.selectedYear())}}function aA(n,e){n&1&&(u(0,"div",35),de(1,"div",36),u(2,"div",37),de(3,"div",38)(4,"div",39)(5,"div",40)(6,"div",41),d()())}function lA(n,e){n&1&&(u(0,"div",14),K(1,aA,7,0,"div",35,Ie),d()),n&2&&(p(),X(wi(0,qN)))}function cA(n,e){n&1&&(u(0,"div",15)(1,"span",42),l(2,"timeline"),d(),u(3,"h3"),l(4,"No Events Yet"),d(),u(5,"p"),l(6,"Add stories and life events to build your family timeline"),d()())}function dA(n,e){if(n&1){let t=N();u(0,"app-timeline-item",49),I("eventClicked",function(r){x(t);let o=m(3);return D(o.onEventClick(r))})("storyClicked",function(r){x(t);let o=m(3);return D(o.onStoryClick(r))})("personClicked",function(r){x(t);let o=m(3);return D(o.onPersonClick(r))})("mediaClicked",function(r){x(t);let o=m(3);return D(o.onMediaClick(r))}),d()}if(n&2){let t=e.$implicit,i=e.$index,r=e.$count;H("event",t)("isFirst",i===0)("isLast",i===r-1)("index",i)}}function uA(n,e){if(n&1&&(u(0,"div",43)(1,"div",44)(2,"h3",45),l(3),d(),u(4,"span",46),l(5),d()(),u(6,"div",47),K(7,dA,1,4,"app-timeline-item",48,ZN),d()()),n&2){let t=e.$implicit;H("id","year-"+t.startYear),p(3),k(t.label),p(2),Fe("",t.eventCount," ",t.eventCount===1?"event":"events"),p(2),X(t.events)}}function pA(n,e){if(n&1&&K(0,uA,9,4,"div",43,QN),n&2){let t=m();X(t.periods())}}function fA(n,e){if(n&1){let t=N();u(0,"button",53),I("click",function(){let r=x(t).$implicit,o=m(2);return D(o.scrollToYear(r))}),l(1),d()}if(n&2){let t=e.$implicit,i=m(2);z("active",i.selectedYear()===t),p(),T(" ",t," ")}}function mA(n,e){if(n&1&&(u(0,"div",16)(1,"button",50)(2,"span",17),l(3,"calendar_today"),d()(),u(4,"div",51),K(5,fA,2,3,"button",52,Ie),d()()),n&2){let t=m();p(5),X(t.getYearList())}}var Ud=class n{timelineService=_(Fn);personId=j();showFilters=j(!0);showStats=j(!0);eventClicked=G();storyClicked=G();personClicked=G();mediaClicked=G();showFilterPanel=E(!1);selectedYear=E(null);isLoading=E(!1);showSuccess=E(!1);successMessage=E("");filterChangeAnimation=E(!1);statsPulse=E(!1);events=this.timelineService.filteredEvents;periods=this.timelineService.periods;stats=this.timelineService.stats;filter=this.timelineService.currentFilter;eventTypes=S(()=>Object.values(ri));hasActiveFilters=S(()=>{let e=this.filter();return e.eventTypes.length>0||e.personIds.length>0||e.startYear!==void 0||e.endYear!==void 0});sortOrder=S(()=>this.timelineService.sortOrder());isEmpty=S(()=>this.events().length===0);toggleFilters(){this.showFilterPanel.update(e=>!e)}toggleEventType(e){this.timelineService.toggleEventType(e),this.triggerFilterAnimation()}isEventTypeSelected(e){return this.filter().eventTypes.includes(e)}toggleSortOrder(){this.timelineService.toggleSortOrder(),this.triggerStatsPulse()}clearFilters(){this.timelineService.clearFilter(),this.selectedYear.set(null),this.showSuccessFeedback("All filters cleared")}filterByYear(e){this.selectedYear.set(e),this.timelineService.setFilter({startYear:e,endYear:e})}clearYearFilter(){this.selectedYear.set(null),this.timelineService.setFilter({startYear:void 0,endYear:void 0})}onEventClick(e){this.eventClicked.emit(e)}onStoryClick(e){this.storyClicked.emit(e)}onPersonClick(e){this.personClicked.emit(e)}onMediaClick(e){this.mediaClicked.emit(e)}scrollToYear(e){let t=document.getElementById(`year-${e}`);t&&t.scrollIntoView({behavior:"smooth",block:"start"})}getYearList(){let e=new Set;return this.events().forEach(t=>e.add(t.year)),Array.from(e).sort((t,i)=>i-t)}triggerFilterAnimation(){this.filterChangeAnimation.set(!0),setTimeout(()=>this.filterChangeAnimation.set(!1),300)}triggerStatsPulse(){this.statsPulse.set(!0),setTimeout(()=>this.statsPulse.set(!1),600)}showSuccessFeedback(e){this.successMessage.set(e),this.showSuccess.set(!0),setTimeout(()=>this.showSuccess.set(!1),3e3)}setLoading(e){this.isLoading.set(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-timeline-view"]],inputs:{personId:[1,"personId"],showFilters:[1,"showFilters"],showStats:[1,"showStats"]},outputs:{eventClicked:"eventClicked",storyClicked:"storyClicked",personClicked:"personClicked",mediaClicked:"mediaClicked"},decls:22,vars:11,consts:[[1,"timeline-view"],[1,"success-toast"],[1,"loading-overlay"],[1,"timeline-header"],[1,"header-left"],[1,"subtitle"],[1,"header-actions"],["type","button","title","Toggle sort order",1,"btn","btn-outline",3,"click"],[1,"material-icons","icon-sm"],["type","button",1,"btn","btn-primary"],[1,"stats-dashboard",3,"pulse"],[1,"filter-panel",3,"filter-animate"],[1,"active-filter-banner"],[1,"timeline-content"],[1,"timeline-skeleton"],[1,"empty-state"],[1,"year-navigator"],[1,"material-icons"],[1,"loading-spinner"],["type","button",1,"btn","btn-primary",3,"click"],[1,"filter-badge"],[1,"stats-dashboard"],[1,"stat-card"],[1,"material-icons","stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"filter-panel"],[1,"filter-section"],[1,"filter-chips"],["type","button",1,"filter-chip",3,"active","--chip-color"],["type","button",1,"btn","btn-outline"],["type","button",1,"filter-chip",3,"click"],["type","button",1,"btn","btn-outline",3,"click"],["type","button","aria-label","Clear year filter",1,"icon-btn",3,"click"],[1,"skeleton-item"],[1,"skeleton-marker","shimmer"],[1,"skeleton-card"],[1,"skeleton-header","shimmer"],[1,"skeleton-title","shimmer"],[1,"skeleton-text","shimmer"],[1,"skeleton-text","shimmer",2,"width","70%"],[1,"material-icons","icon-xl"],[1,"timeline-period",3,"id"],[1,"year-header"],[1,"year-label"],[1,"event-count"],[1,"period-events"],[3,"event","isFirst","isLast","index"],[3,"eventClicked","storyClicked","personClicked","mediaClicked","event","isFirst","isLast","index"],["type","button","title","Jump to year",1,"nav-header"],[1,"year-list"],["type","button",1,"year-btn",3,"active"],["type","button",1,"year-btn",3,"click"]],template:function(t,i){t&1&&(u(0,"div",0),C(1,KN,4,1,"div",1),C(2,XN,6,0,"div",2),u(3,"div",3)(4,"div",4)(5,"h2"),l(6,"Family Timeline"),d(),C(7,JN,4,9,"p",5),d(),u(8,"div",6)(9,"button",7),I("click",function(){return i.toggleSortOrder()}),u(10,"span",8),l(11),d(),l(12),d(),C(13,tA,5,1,"button",9),d()(),C(14,nA,33,6,"div",10),C(15,oA,8,3,"div",11),C(16,sA,6,1,"div",12),u(17,"div",13),C(18,lA,3,1,"div",14)(19,cA,7,0,"div",15)(20,pA,2,0),d(),C(21,mA,7,0,"div",16),d()),t&2&&(p(),b(i.showSuccess()?1:-1),p(),b(i.isLoading()?2:-1),p(5),b(i.stats().totalEvents>0?7:-1),p(4),T(" ",i.sortOrder()==="desc"?"arrow_downward":"arrow_upward"," "),p(),T(" ",i.sortOrder()==="desc"?"Newest First":"Oldest First"," "),p(),b(i.showFilters()?13:-1),p(),b(i.showStats()&&i.stats().totalEvents>0?14:-1),p(),b(i.showFilterPanel()?15:-1),p(),b(i.selectedYear()?16:-1),p(2),b(i.isLoading()?18:i.isEmpty()?19:20),p(3),b(!i.isEmpty()&&i.getYearList().length>3?21:-1))},dependencies:[Bd,Es],styles:['.timeline-view[_ngcontent-%COMP%]{width:100%;max-width:900px;margin:0 auto;padding:var(--s-4);position:relative}.success-toast[_ngcontent-%COMP%]{position:fixed;top:var(--s-4);right:var(--s-4);background:#10b981;color:#fff;padding:var(--s-3) var(--s-4);border-radius:var(--r-md);box-shadow:var(--shadow-lg);display:flex;align-items:center;gap:var(--s-2);font-weight:600;z-index:1000;animation:_ngcontent-%COMP%_slideInRight .3s ease,_ngcontent-%COMP%_fadeOut .3s ease 2.7s}@keyframes _ngcontent-%COMP%_slideInRight{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}@keyframes _ngcontent-%COMP%_fadeOut{to{opacity:0;transform:translate(100%)}}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--s-4);z-index:999;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.loading-spinner[_ngcontent-%COMP%]{width:80px;height:80px;display:flex;align-items:center;justify-content:center;background:var(--bg-card);border-radius:var(--r-full);box-shadow:var(--shadow-lg)}.loading-spinner[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:48px;color:var(--primary);animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:1.1rem;font-weight:600}.timeline-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:var(--s-6);gap:var(--s-4)}.header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 var(--s-2) 0;font-size:2rem;color:var(--text-primary)}.subtitle[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:var(--text-secondary)}.header-actions[_ngcontent-%COMP%]{display:flex;gap:var(--s-3);flex-wrap:wrap}.filter-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:20px;height:20px;padding:0 6px;background:#fff;color:var(--accent);border-radius:var(--r-full);font-size:.75rem;font-weight:700;margin-left:4px}.stats-dashboard[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:var(--s-4);margin-bottom:var(--s-6);transition:transform .3s ease}.stats-dashboard.pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_statsPulse .6s ease}@keyframes _ngcontent-%COMP%_statsPulse{0%,to{transform:scale(1)}50%{transform:scale(1.02)}}.stat-card[_ngcontent-%COMP%]{background:var(--bg-card);border-radius:var(--r-md);padding:var(--s-4);display:flex;align-items:center;gap:var(--s-3);box-shadow:var(--shadow-sm);transition:all .3s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.stat-icon[_ngcontent-%COMP%]{font-size:36px;color:var(--accent);opacity:.8}.stat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--text-primary);line-height:1}.stat-label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px}.filter-panel[_ngcontent-%COMP%]{background:var(--bg-card);border-radius:var(--r-lg);padding:var(--s-4);margin-bottom:var(--s-6);box-shadow:var(--shadow-sm);animation:_ngcontent-%COMP%_slideDown .3s ease;transition:all .3s ease}.filter-panel.filter-animate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_filterPulse .3s ease}@keyframes _ngcontent-%COMP%_filterPulse{0%,to{transform:scale(1)}50%{transform:scale(.98)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.filter-section[_ngcontent-%COMP%]{margin-bottom:var(--s-4)}.filter-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.filter-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 var(--s-3) 0;font-size:1rem;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px}.filter-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--s-2)}.filter-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;background:var(--bg-muted);border:2px solid transparent;border-radius:var(--r-full);font-size:.95rem;font-weight:500;color:var(--text-primary);cursor:pointer;transition:all .2s ease;position:relative;overflow:hidden}.filter-chip[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:#ffffff4d;border-radius:50%;transform:translate(-50%,-50%);transition:width .3s,height .3s}.filter-chip[_ngcontent-%COMP%]:active:before{width:200px;height:200px}.filter-chip[_ngcontent-%COMP%]:hover{background:var(--bg-card);transform:scale(1.05)}.filter-chip.active[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--chip-color) 15%,transparent);border-color:var(--chip-color);color:var(--chip-color);animation:_ngcontent-%COMP%_chipBounce .4s ease}@keyframes _ngcontent-%COMP%_chipBounce{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}.filter-chip[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--chip-color)}.active-filter-banner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:var(--s-3) var(--s-4);background:var(--accent-soft);border-radius:var(--r-md);margin-bottom:var(--s-4);font-weight:600;color:var(--accent);animation:_ngcontent-%COMP%_slideDown .3s ease}.active-filter-banner[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{width:32px;height:32px;background:transparent;border:none;cursor:pointer;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:background .2s}.active-filter-banner[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:hover{background:#0000001a}.timeline-content[_ngcontent-%COMP%]{position:relative}.timeline-skeleton[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-6)}.skeleton-item[_ngcontent-%COMP%]{display:flex;gap:var(--s-4);animation:_ngcontent-%COMP%_fadeIn .3s ease}.skeleton-marker[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:var(--r-full);flex-shrink:0}.skeleton-card[_ngcontent-%COMP%]{flex:1;background:var(--bg-card);border-radius:var(--r-md);padding:var(--s-4);display:flex;flex-direction:column;gap:var(--s-3)}.skeleton-header[_ngcontent-%COMP%]{height:20px;width:30%;border-radius:var(--r-sm)}.skeleton-title[_ngcontent-%COMP%]{height:24px;width:60%;border-radius:var(--r-sm)}.skeleton-text[_ngcontent-%COMP%]{height:16px;width:100%;border-radius:var(--r-sm)}.shimmer[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--bg-muted) 0%,color-mix(in srgb,var(--bg-muted) 70%,white) 50%,var(--bg-muted) 100%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}.timeline-period[_ngcontent-%COMP%]{margin-bottom:var(--s-8)}.year-header[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:var(--s-3);margin-bottom:var(--s-6);padding-left:calc(48px + var(--s-4))}.year-label[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:700;color:var(--accent)}.event-count[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-muted);font-weight:500}.period-events[_ngcontent-%COMP%]{display:flex;flex-direction:column}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--s-8);text-align:center;color:var(--text-muted)}.empty-state[_ngcontent-%COMP%]   .icon-xl[_ngcontent-%COMP%]{font-size:80px;opacity:.3;margin-bottom:var(--s-4)}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 var(--s-2) 0;font-size:1.5rem;color:var(--text-secondary)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.year-navigator[_ngcontent-%COMP%]{position:fixed;right:var(--s-4);top:50%;transform:translateY(-50%);background:var(--bg-card);border-radius:var(--r-lg);box-shadow:var(--shadow-lg);overflow:hidden;max-height:400px;display:flex;flex-direction:column;z-index:100}.nav-header[_ngcontent-%COMP%]{padding:var(--s-3);background:var(--accent);color:#fff;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center}.year-list[_ngcontent-%COMP%]{overflow-y:auto;padding:var(--s-2);display:flex;flex-direction:column;gap:4px}.year-btn[_ngcontent-%COMP%]{padding:var(--s-2) var(--s-3);background:transparent;border:none;border-radius:var(--r-sm);cursor:pointer;font-size:.95rem;font-weight:500;color:var(--text-secondary);text-align:left;transition:all .2s}.year-btn[_ngcontent-%COMP%]:hover{background:var(--bg-muted);color:var(--text-primary)}.year-btn.active[_ngcontent-%COMP%]{background:var(--accent-soft);color:var(--accent);font-weight:600}@media(max-width:768px){.timeline-view[_ngcontent-%COMP%]{padding:var(--s-2)}.timeline-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.subtitle[_ngcontent-%COMP%]{font-size:.9rem}.header-actions[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.stats-dashboard[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:var(--s-3)}.stat-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center;padding:var(--s-3)}.stat-icon[_ngcontent-%COMP%]{font-size:28px}.stat-value[_ngcontent-%COMP%]{font-size:1.3rem}.filter-chips[_ngcontent-%COMP%]{gap:var(--s-2)}.filter-chip[_ngcontent-%COMP%]{padding:6px 12px;font-size:.9rem}.year-header[_ngcontent-%COMP%]{padding-left:calc(40px + var(--s-3))}.year-label[_ngcontent-%COMP%]{font-size:1.5rem}.event-count[_ngcontent-%COMP%]{font-size:.85rem}.year-navigator[_ngcontent-%COMP%]{display:none}}@media(min-width:769px)and (max-width:1024px){.stats-dashboard[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}'],changeDetection:0})};function hA(n,e){n&1&&de(0,"app-timeline-view")}function gA(n,e){n&1&&(u(0,"div",3)(1,"span",4),l(2,"timeline"),d(),u(3,"h2"),l(4,"No Timeline Events Yet"),d(),u(5,"p",2),l(6,"Timeline events are automatically generated from births, deaths, marriages, and other family milestones."),d(),u(7,"p",5),l(8,"Add family members with dates to populate your timeline."),d()())}var $d=class n{timelineService=_(Fn);hasEvents=S(()=>this.timelineService.allEvents().length>0);timelineStats=S(()=>{let e=this.timelineService.allEvents().length;return e===0?"No events recorded yet":`${e} events in your family history`});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-timeline-page"]],decls:8,vars:2,consts:[[1,"container"],[1,"page-header"],[1,"text-muted"],[1,"empty-state","card"],[1,"material-icons","icon-xl"],[1,"text-sm","text-muted","mt-2"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"h1"),l(3,"Family Timeline"),d(),u(4,"p",2),l(5),d()(),C(6,hA,1,0,"app-timeline-view")(7,gA,9,0,"div",3),d()),t&2&&(p(5),k(i.timelineStats()),p(),b(i.hasEvents()?6:7))},dependencies:[Ud],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--s-12)}.empty-state[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:4rem;color:var(--primary-lighter);margin-bottom:var(--s-4);display:block}.mt-2[_ngcontent-%COMP%]{margin-top:var(--s-2)}"],changeDetection:0})};function oa(n){return{"biological-parent":"biological-child","biological-child":"biological-parent","adopted-parent":"adopted-child","adopted-child":"adopted-parent","step-parent":"step-child","step-child":"step-parent","foster-parent":"foster-child","foster-child":"foster-parent",grandparent:"grandchild",grandchild:"grandparent","uncle-aunt":"niece-nephew","niece-nephew":"uncle-aunt",godparent:"godchild",godchild:"godparent",spouse:"spouse",partner:"partner",sibling:"sibling",twin:"twin","identical-twin":"identical-twin","fraternal-twin":"fraternal-twin","half-sibling":"half-sibling","step-sibling":"step-sibling",cousin:"cousin"}[n]||null}function QC(n,e,t,i,r={}){let o=oa(t);if(!o)throw new Error(`Cannot create inverse for relationship type: ${t}`);let s=new Date().toISOString(),a=P({isBiological:t.includes("biological"),isLegal:t.includes("adopted")||t==="spouse",isCurrent:!0,isVerified:!1,createdAt:s,updatedAt:s,createdBy:i},r),c=P({id:crypto.randomUUID(),fromPersonId:n,toPersonId:e,type:t},a),f=P({id:crypto.randomUUID(),fromPersonId:e,toPersonId:n,type:o},a);return[c,f]}function ZC(n,e,t){let i=[];if(n.fromPersonId===n.toPersonId&&i.push("Cannot create relationship with self"),e&&t&&n.type?.includes("parent")){let r=e.birthDate?new Date(e.birthDate):null,o=t.birthDate?new Date(t.birthDate):null;if(r&&o){let s=o.getFullYear()-r.getFullYear();s<10&&i.push("Parent must be at least 10 years older than child"),s<0&&i.push("Parent cannot be younger than child")}}if(n.startDate&&n.endDate){let r=new Date(n.startDate);new Date(n.endDate)<r&&i.push("End date cannot be before start date")}return{valid:i.length===0,errors:i}}var fh=(n,e)=>e.id,vA=(n,e)=>e.type;function yA(n,e){n&1&&(u(0,"div",2)(1,"span",6),l(2,"check_circle"),d(),u(3,"span"),l(4,"Relationship created successfully!"),d()())}function _A(n,e){if(n&1&&(u(0,"div"),l(1),d()),n&2){let t=e.$implicit;p(),k(t)}}function CA(n,e){if(n&1&&(u(0,"div",3)(1,"span",6),l(2,"error"),d(),u(3,"div",7),K(4,_A,2,1,"div",null,Ie),d()()),n&2){let t=m();p(4),X(t.validationErrors())}}function bA(n,e){if(n&1&&(u(0,"span",11),l(1),d()),n&2){let t=m(2);p(),k(t.existingRelationships().length)}}function EA(n,e){if(n&1){let t=N();u(0,"button",15),I("click",function(){x(t);let r=m(2);return D(r.showFormView())}),u(1,"span",6),l(2,"add_link"),d(),l(3," Add Relationship "),d()}}function xA(n,e){if(n&1&&(u(0,"div",23)(1,"span",6),l(2,"event"),d(),l(3),Et(4,"date"),d()),n&2){let t=m().$implicit;p(3),T(" Since ",Mi(4,1,t.startDate,"mediumDate")," ")}}function DA(n,e){if(n&1&&(u(0,"div",24)(1,"span",6),l(2,"note"),d(),l(3),d()),n&2){let t=m().$implicit;p(3),T(" ",t.notes," ")}}function wA(n,e){if(n&1){let t=N();u(0,"button",26),I("click",function(){x(t);let r=m().$implicit,o=m(3);return D(o.onDeleteRelationship(r.id))}),u(1,"span",6),l(2,"delete"),d()()}if(n&2){let t=m(4);H("disabled",t.isSubmitting())}}function MA(n,e){if(n&1&&(u(0,"div",17)(1,"div",18)(2,"div",19)(3,"span",20),l(4),d(),u(5,"span",21),l(6,"arrow_forward"),d(),u(7,"span",22),l(8),d(),u(9,"span",21),l(10,"arrow_forward"),d(),u(11,"span",20),l(12),d()(),C(13,xA,5,4,"div",23),C(14,DA,4,1,"div",24),d(),C(15,wA,3,1,"button",25),d()),n&2){let t=e.$implicit,i=m(3);z("is-current",t.isCurrent),p(4),k(i.getPersonName(t.fromPersonId)),p(4),k(i.formatType(t.type)),p(4),k(i.getPersonName(t.toPersonId)),p(),b(t.startDate?13:-1),p(),b(t.notes?14:-1),p(),b(i.isAdmin()?15:-1)}}function SA(n,e){if(n&1&&(u(0,"div",13),K(1,MA,16,8,"div",16,fh),d()),n&2){let t=m(2);p(),X(t.existingRelationships())}}function IA(n,e){n&1&&(u(0,"div",14)(1,"span",27),l(2,"link_off"),d(),u(3,"h4"),l(4,"No Relationships Yet"),d(),u(5,"p",28),l(6,"Add relationships between family members."),d()())}function PA(n,e){if(n&1&&(u(0,"div",4)(1,"div",8)(2,"h3",9)(3,"span",10),l(4,"family_restroom"),d(),l(5," Relationships "),C(6,bA,2,1,"span",11),d(),C(7,EA,4,0,"button",12),d(),C(8,SA,3,0,"div",13)(9,IA,7,0,"div",14),d()),n&2){let t=m();p(6),b(t.existingRelationships().length>0?6:-1),p(),b(t.isAdmin()?7:-1),p(),b(t.existingRelationships().length>0?8:9)}}function TA(n,e){if(n&1&&(l(0),Et(1,"date")),n&2){let t=m().$implicit;T(" (b. ",Mi(1,1,t.birthDate,"yyyy"),") ")}}function OA(n,e){if(n&1&&(u(0,"option",37),l(1),C(2,TA,2,4),d()),n&2){let t=e.$implicit,i=m(2);H("value",t.id),p(),T(" ",i.getPersonName(t.id)," "),p(),b(t.birthDate?2:-1)}}function kA(n,e){if(n&1&&(u(0,"option",37),l(1),Et(2,"titlecase"),d()),n&2){let t=e.$implicit,i=m(2);H("value",t),p(),k(Kn(2,2,i.formatType(t)))}}function NA(n,e){if(n&1&&(u(0,"option",37),l(1),Et(2,"titlecase"),d()),n&2){let t=e.$implicit,i=m(2);H("value",t),p(),k(Kn(2,2,i.formatType(t)))}}function AA(n,e){if(n&1&&(u(0,"option",37),l(1),Et(2,"titlecase"),d()),n&2){let t=e.$implicit,i=m(2);H("value",t),p(),k(Kn(2,2,i.formatType(t)))}}function RA(n,e){if(n&1&&(u(0,"option",37),l(1),Et(2,"titlecase"),d()),n&2){let t=e.$implicit,i=m(2);H("value",t),p(),k(Kn(2,2,i.formatType(t)))}}function FA(n,e){if(n&1&&(l(0),Et(1,"date")),n&2){let t=m().$implicit;T(" (b. ",Mi(1,1,t.birthDate,"yyyy"),") ")}}function LA(n,e){if(n&1&&(u(0,"option",37),l(1),C(2,FA,2,4),d()),n&2){let t=e.$implicit,i=m(2);H("value",t.id),p(),T(" ",i.getPersonName(t.id)," "),p(),b(t.birthDate?2:-1)}}function VA(n,e){if(n&1){let t=N();u(0,"button",60),I("click",function(){let r=x(t).$implicit,o=m(3);return D(o.applySuggestion(r.type))}),l(1),Et(2,"titlecase"),d()}if(n&2){let t=e.$implicit,i=m(3);p(),T(" ",Kn(2,1,i.formatType(t.type))," ")}}function jA(n,e){if(n&1&&(u(0,"div",52)(1,"h4",57)(2,"span",6),l(3,"lightbulb"),d(),l(4," Suggestions "),d(),u(5,"div",58),K(6,VA,3,3,"button",59,vA),d()()),n&2){let t=m(2);p(6),X(t.suggestedRelationships())}}function BA(n,e){if(n&1&&(u(0,"div",53)(1,"h4",57)(2,"span",6),l(3,"preview"),d(),l(4," Preview "),d(),u(5,"div",61)(6,"pre"),l(7),d()()()),n&2){let t=m(2);p(7),k(t.relationshipPreview())}}function UA(n,e){n&1&&(u(0,"span",56),l(1,"sync"),d())}function $A(n,e){n&1&&(u(0,"span",6),l(1,"add_link"),d())}function HA(n,e){if(n&1){let t=N();u(0,"form",29),I("ngSubmit",function(){x(t);let r=m();return D(r.onSubmit())}),u(1,"div",30)(2,"h3",9)(3,"span",10),l(4,"add_link"),d(),l(5," Add Relationship "),d(),u(6,"button",31),I("click",function(){x(t);let r=m();return D(r.showListView())}),u(7,"span",6),l(8,"arrow_back"),d(),l(9," Back "),d()(),u(10,"div",32)(11,"div",33)(12,"label",34),l(13,"From Person"),d(),u(14,"select",35)(15,"option",36),l(16,"Select person..."),d(),K(17,OA,3,3,"option",37,fh),d()(),u(19,"div",38)(20,"button",39),I("click",function(){x(t);let r=m();return D(r.swapPersons())}),u(21,"span",10),l(22,"swap_vert"),d()()(),u(23,"div",33)(24,"label",40),l(25,"Relationship Type"),d(),u(26,"select",41)(27,"option",36),l(28,"Select relationship..."),d(),u(29,"optgroup",42),K(30,kA,3,4,"option",37,Ie),d(),u(32,"optgroup",43),K(33,NA,3,4,"option",37,Ie),d(),u(35,"optgroup",44),K(36,AA,3,4,"option",37,Ie),d(),u(38,"optgroup",45),K(39,RA,3,4,"option",37,Ie),d()()(),u(41,"div",33)(42,"label",46),l(43,"To Person"),d(),u(44,"select",47)(45,"option",36),l(46,"Select person..."),d(),K(47,LA,3,3,"option",37,fh),d()(),u(49,"div",33)(50,"label",48),l(51,"Start Date "),u(52,"span",28),l(53,"(optional)"),d()(),de(54,"input",49),d(),u(55,"div",33)(56,"label",50),l(57,"Notes "),u(58,"span",28),l(59,"(optional)"),d()(),de(60,"textarea",51),d(),C(61,jA,8,0,"div",52),C(62,BA,8,1,"div",53),d(),u(63,"div",54)(64,"button",55),C(65,UA,2,0,"span",56)(66,$A,2,0,"span",6),l(67," Create Relationship "),d()()()}if(n&2){let t,i,r=m();H("formGroup",r.relationshipForm),p(17),X(r.filteredFromPeople()),p(3),H("disabled",!((t=r.relationshipForm.get("fromPersonId"))!=null&&t.value)||!((t=r.relationshipForm.get("toPersonId"))!=null&&t.value)),p(10),X(r.parentChildTypes),p(3),X(r.spouseTypes),p(3),X(r.siblingTypes),p(3),X(r.extendedTypes),p(8),X(r.filteredToPeople()),p(14),b(r.suggestedRelationships().length>0&&!((i=r.relationshipForm.get("type"))!=null&&i.value)?61:-1),p(),b(r.relationshipPreview()?62:-1),p(2),H("disabled",r.relationshipForm.invalid||r.isSubmitting()),p(),b(r.isSubmitting()?65:66)}}var Hd=class n{fb=_(Ed);people=j.required();existingRelationships=j([]);focusPerson=j(null);isAdmin=j(!1);relationshipCreated=G();relationshipDeleted=G();cancelled=G();relationshipForm;isSubmitting=E(!1);validationErrors=E([]);showSuccess=E(!1);viewMode=E("list");searchQuery=E("");selectedFromPerson=E(null);selectedToPerson=E(null);hoveredRelationType=E(null);showFormView(){this.viewMode.set("form"),this.validationErrors.set([])}showListView(){this.viewMode.set("list"),this.relationshipForm?.reset(),this.focusPerson()&&this.relationshipForm?.patchValue({fromPersonId:this.focusPerson().id})}suggestedRelationships=S(()=>{let e=this.selectedFromPerson(),t=this.selectedToPerson();if(!e||!t)return[];let i=[];if(e.birthDate&&t.birthDate){let r=new Date(e.birthDate).getFullYear(),o=new Date(t.birthDate).getFullYear(),s=Math.abs(r-o);s>=20&&s<=50?r<o?i.push({type:"biological-parent",reason:"Age difference suggests parent-child"}):i.push({type:"biological-child",reason:"Age difference suggests parent-child"}):s<=5?(i.push({type:"sibling",reason:"Similar age suggests siblings"}),s===0&&i.push({type:"twin",reason:"Same birth year suggests twins"})):s<=15&&i.push({type:"spouse",reason:"Age proximity suggests spouse/partner"})}return i});parentChildTypes=["biological-parent","biological-child","adopted-parent","adopted-child","step-parent","step-child","foster-parent","foster-child"];spouseTypes=["spouse","partner","ex-spouse"];siblingTypes=["sibling","half-sibling","step-sibling","twin","identical-twin","fraternal-twin"];extendedTypes=["grandparent","grandchild","uncle-aunt","niece-nephew","cousin","godparent","godchild"];filteredFromPeople=S(()=>{let e=this.searchQuery().toLowerCase();return this.people().filter(t=>!t.isDeceased||this.allowDeceased()).filter(t=>e?Lt(t,"full").toLowerCase().includes(e):!0).sort((t,i)=>this.focusPerson()?.id===t.id?-1:this.focusPerson()?.id===i.id?1:Lt(t,"short").localeCompare(Lt(i,"short")))});filteredToPeople=S(()=>{let e=this.relationshipForm?.get("fromPersonId")?.value,t=this.searchQuery().toLowerCase();return this.people().filter(i=>i.id!==e)});relationshipPreview=S(()=>{let e=this.relationshipForm?.value;if(!e?.fromPersonId||!e?.toPersonId||!e?.type)return"";let t=this.people().find(a=>a.id===e.fromPersonId),i=this.people().find(a=>a.id===e.toPersonId);if(!t||!i)return"";let r=Lt(t,"short"),o=Lt(i,"short"),s=oa(e.type);return`${r} \u2192 ${this.formatType(e.type)} \u2192 ${o}
${o} \u2192 ${this.formatType(s||"")} \u2192 ${r}`});allowDeceased=E(!1);ngOnInit(){this.initializeForm()}initializeForm(){let e=this.focusPerson();this.relationshipForm=this.fb.group({fromPersonId:[e?.id||"",It.required],toPersonId:["",It.required],type:["",It.required],startDate:[""],notes:[""]}),this.relationshipForm.valueChanges.subscribe(()=>{this.validationErrors.set([]);let t=this.relationshipForm.get("fromPersonId")?.value,i=this.relationshipForm.get("toPersonId")?.value;this.selectedFromPerson.set(t&&this.people().find(r=>r.id===t)||null),this.selectedToPerson.set(i&&this.people().find(r=>r.id===i)||null)})}formatType(e){return e.replace(/-/g," ")}getPersonName(e){let t=this.people().find(i=>i.id===e);return t?Lt(t,"short"):""}validateNewRelationship(){let e=[],t=this.relationshipForm.value,i=this.people().find(f=>f.id===t.fromPersonId),r=this.people().find(f=>f.id===t.toPersonId);if(!i||!r)return e.push("Please select both people"),e;if(t.fromPersonId===t.toPersonId)return e.push("Cannot create relationship with self"),e;this.existingRelationships().find(f=>f.fromPersonId===t.fromPersonId&&f.toPersonId===t.toPersonId&&f.type===t.type)&&e.push("This relationship already exists");let s=this.existingRelationships().find(f=>f.fromPersonId===t.fromPersonId&&f.toPersonId===t.toPersonId||f.fromPersonId===t.toPersonId&&f.toPersonId===t.fromPersonId);if(s){let f=oa(t.type);s.type===f||e.push(`Conflicting relationship exists: ${s.type}`)}let a={fromPersonId:t.fromPersonId,toPersonId:t.toPersonId,type:t.type,startDate:t.startDate},c=ZC(a,i,r);return c.valid||e.push(...c.errors),this.spouseTypes.includes(t.type)&&this.existingRelationships().find(h=>h.fromPersonId===t.fromPersonId&&(h.type==="spouse"||h.type==="partner")&&h.isCurrent)&&t.type!=="ex-spouse"&&e.push("Person is already married/partnered"),e}async onSubmit(){if(this.relationshipForm.invalid){Object.keys(this.relationshipForm.controls).forEach(t=>{this.relationshipForm.get(t)?.markAsTouched()});return}let e=this.validateNewRelationship();if(e.length>0){this.validationErrors.set(e);return}this.isSubmitting.set(!0),this.validationErrors.set([]);try{let t=this.relationshipForm.value,[i,r]=QC(t.fromPersonId,t.toPersonId,t.type,"current-user",{startDate:t.startDate||void 0,notes:t.notes||void 0});this.relationshipCreated.emit({from:i,to:r}),this.showSuccess.set(!0),setTimeout(()=>{this.showSuccess.set(!1),this.showListView()},1500)}catch(t){this.validationErrors.set([t instanceof Error?t.message:"Failed to create relationship"])}finally{this.isSubmitting.set(!1)}}onCancel(){this.cancelled.emit()}onDeleteRelationship(e){confirm("Are you sure you want to delete this relationship? This will also delete the reciprocal relationship.")&&this.relationshipDeleted.emit(e)}applySuggestion(e){this.relationshipForm.patchValue({type:e}),this.validationErrors.set([])}clearSearch(){this.searchQuery.set("")}onSearchChange(e){let t=e.target;this.searchQuery.set(t.value)}swapPersons(){let e=this.relationshipForm.get("fromPersonId")?.value,t=this.relationshipForm.get("toPersonId")?.value;if(e&&t){this.relationshipForm.patchValue({fromPersonId:t,toPersonId:e});let i=this.relationshipForm.get("type")?.value;if(i){let r=oa(i);r&&this.relationshipForm.patchValue({type:r})}}}onRelationTypeHover(e){this.hoveredRelationType.set(e)}getRelationshipDescription(e){return{"biological-parent":"Natural parent through birth","biological-child":"Natural child through birth","adopted-parent":"Legal adoptive parent","adopted-child":"Legal adoptive child","step-parent":"Parent through marriage to biological parent","step-child":"Child of spouse from another relationship",spouse:"Current or historical spouse through marriage",partner:"Long-term romantic partner (unmarried)","ex-spouse":"Former spouse (divorced)",sibling:"Brother or sister (share at least one parent)",twin:"Born at the same time","identical-twin":"Monozygotic twin (same DNA)","fraternal-twin":"Dizygotic twin (different DNA)"}[e]||""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-relationship-manager"]],hostAttrs:[1,"relationship-manager-container"],inputs:{people:[1,"people"],existingRelationships:[1,"existingRelationships"],focusPerson:[1,"focusPerson"],isAdmin:[1,"isAdmin"]},outputs:{relationshipCreated:"relationshipCreated",relationshipDeleted:"relationshipDeleted",cancelled:"cancelled"},decls:6,vars:4,consts:[[1,"container"],[1,"card"],[1,"success-banner"],[1,"error-banner"],[1,"list-view"],[3,"formGroup"],[1,"material-icons","icon-sm"],[1,"error-list"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center","gap-2","m-0"],[1,"material-icons"],[1,"badge"],["type","button",1,"btn","btn-primary"],[1,"relationships-list"],[1,"empty-state"],["type","button",1,"btn","btn-primary",3,"click"],[1,"relationship-item",3,"is-current"],[1,"relationship-item"],[1,"relationship-details"],[1,"relationship-main"],[1,"person-name"],[1,"material-icons","icon-sm","relationship-arrow"],[1,"relationship-type"],[1,"relationship-meta","text-sm","text-muted"],[1,"relationship-notes","text-sm"],["type","button","aria-label","Delete relationship",1,"btn-icon","btn-danger",3,"disabled"],["type","button","aria-label","Delete relationship",1,"btn-icon","btn-danger",3,"click","disabled"],[1,"material-icons","icon-xl"],[1,"text-muted"],[3,"ngSubmit","formGroup"],[1,"form-header","flex","items-center","justify-between","mb-4"],["type","button",1,"btn","btn-outline",3,"click"],[1,"form-section"],[1,"form-group"],["for","fromPersonId",1,"required"],["id","fromPersonId","formControlName","fromPersonId",1,"person-select"],["value",""],[3,"value"],[1,"swap-button-container"],["type","button","title","Swap persons",1,"swap-btn",3,"click","disabled"],["for","type",1,"required"],["id","type","formControlName","type",1,"relationship-type-select"],["label","Parent-Child"],["label","Spouse/Partner"],["label","Siblings"],["label","Extended Family"],["for","toPersonId",1,"required"],["id","toPersonId","formControlName","toPersonId",1,"person-select"],["for","startDate"],["type","date","id","startDate","formControlName","startDate"],["for","notes"],["id","notes","formControlName","notes","rows","2","placeholder","Additional details..."],[1,"suggestions-panel"],[1,"relationship-preview"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"material-icons","icon-sm","spinning"],[1,"flex","items-center","gap-2","mb-2"],[1,"suggestions-list"],["type","button",1,"suggestion-chip"],["type","button",1,"suggestion-chip",3,"click"],[1,"preview-content"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1),C(2,yA,5,0,"div",2),C(3,CA,6,0,"div",3),C(4,PA,10,3,"div",4),C(5,HA,68,6,"form",5),d()()),t&2&&(p(2),b(i.showSuccess()?2:-1),p(),b(i.validationErrors().length>0?3:-1),p(),b(i.viewMode()==="list"?4:-1),p(),b(i.viewMode()==="form"?5:-1))},dependencies:[xd,go,Cd,bd,Ln,vo,Ni,ho,na,ta,bs,Es],styles:['.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--s-12) var(--s-4);text-align:center}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:var(--s-4);margin-bottom:var(--s-2)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:var(--s-6);max-width:400px}.success-banner[_ngcontent-%COMP%], .error-banner[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:var(--s-2);padding:var(--s-4);border-radius:var(--r-md);margin-bottom:var(--s-6);animation:_ngcontent-%COMP%_bannerSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_bannerSlideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.success-banner[_ngcontent-%COMP%]{background:var(--success-light);border:1px solid var(--success);color:var(--success);animation:_ngcontent-%COMP%_successZoom .6s cubic-bezier(.34,1.56,.64,1)}@keyframes _ngcontent-%COMP%_successZoom{0%{transform:scale(.8);opacity:0}50%{transform:scale(1.05)}to{transform:scale(1);opacity:1}}.error-banner[_ngcontent-%COMP%]{background:#b91c1c1a;border:1px solid var(--danger);color:var(--danger)}.error-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-1)}.error-list[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_errorStagger .3s ease-out backwards}.error-list[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(1){animation-delay:0s}.error-list[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(2){animation-delay:.1s}.error-list[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(3){animation-delay:.2s}.error-list[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(4){animation-delay:.3s}@keyframes _ngcontent-%COMP%_errorStagger{0%{opacity:0;transform:translate(-10px)}to{opacity:1;transform:translate(0)}}.form-section[_ngcontent-%COMP%]{margin-bottom:var(--s-8)}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:var(--s-4);margin-bottom:var(--s-6)}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);margin-bottom:var(--s-2)}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{content:"";width:4px;height:1.25rem;background:var(--accent);border-radius:var(--r-full)}.search-box[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;min-width:250px}.search-icon[_ngcontent-%COMP%]{position:absolute;left:var(--s-3);color:var(--text-muted);pointer-events:none}.search-input[_ngcontent-%COMP%]{width:100%;padding:var(--s-2) var(--s-3);padding-left:var(--s-10);padding-right:var(--s-8);border:1px solid var(--border-color);border-radius:var(--r-full);font-size:.875rem;transition:all .2s ease}.search-input[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-soft);outline:none}.clear-search-btn[_ngcontent-%COMP%]{position:absolute;right:var(--s-2);background:transparent;border:none;cursor:pointer;color:var(--text-muted);padding:var(--s-1);border-radius:var(--r-full);transition:all .2s ease;display:flex;align-items:center;justify-content:center}.clear-search-btn[_ngcontent-%COMP%]:hover{background:var(--bg-muted);color:var(--text-primary);transform:scale(1.1)}.swap-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:calc(var(--s-4) * -1) 0;z-index:1}.swap-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:44px;height:44px;border-radius:var(--r-full);background:var(--accent-soft);border:2px solid var(--bg-card);color:var(--accent);cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow-sm)}.swap-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--accent);color:#fff;transform:rotate(180deg) scale(1.1);box-shadow:var(--shadow-md)}.swap-btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.swap-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:rotate(180deg) scale(.95)}.suggestions-panel[_ngcontent-%COMP%]{margin-top:var(--s-6);padding:var(--s-4);background:linear-gradient(135deg,var(--accent-soft) 0%,rgba(59,127,111,.05) 100%);border-left:4px solid var(--accent);border-radius:var(--r-md);animation:_ngcontent-%COMP%_fadeInScale .3s ease-out}@keyframes _ngcontent-%COMP%_fadeInScale{0%{opacity:0;transform:scale(.98)}to{opacity:1;transform:scale(1)}}.suggestions-panel[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:var(--s-2);color:var(--accent);font-size:1rem}.suggestions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-2)}.suggestion-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);padding:var(--s-3) var(--s-4);background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--r-md);cursor:pointer;transition:all .2s ease;text-align:left}.suggestion-chip[_ngcontent-%COMP%]:hover{background:var(--accent);border-color:var(--accent);color:#fff;transform:translate(4px);box-shadow:var(--shadow-sm)}.suggestion-chip[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%], .suggestion-chip[_ngcontent-%COMP%]:hover   .suggestion-reason[_ngcontent-%COMP%]{color:#fff}.suggestion-chip[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--accent);transition:color .2s ease}.suggestion-type[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem}.suggestion-reason[_ngcontent-%COMP%]{color:var(--text-muted);margin-left:auto;font-style:italic;transition:color .2s ease}.person-select[_ngcontent-%COMP%], .relationship-type-select[_ngcontent-%COMP%]{font-size:1rem;cursor:pointer;transition:all .2s ease}.person-select[_ngcontent-%COMP%]:hover, .relationship-type-select[_ngcontent-%COMP%]:hover{border-color:var(--accent)}.person-select[_ngcontent-%COMP%]:focus, .relationship-type-select[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-soft)}optgroup[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary);font-size:.875rem;padding:var(--s-2)}option[_ngcontent-%COMP%]{padding:var(--s-2)}.relationship-preview[_ngcontent-%COMP%]{margin-top:var(--s-6);padding:var(--s-4);background:var(--bg-muted);border-left:4px solid var(--accent);border-radius:var(--r-md);animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.relationship-preview[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:var(--s-3);font-size:1rem;color:var(--text-primary)}.preview-content[_ngcontent-%COMP%]{background:var(--bg-card);padding:var(--s-3);border-radius:var(--r-sm);margin-bottom:var(--s-3)}.preview-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0;font-family:Inter,monospace;font-size:.875rem;white-space:pre-wrap;line-height:1.6;color:var(--text-primary)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.existing-relationships-section[_ngcontent-%COMP%]{margin-top:var(--s-8);padding-top:var(--s-8);border-top:2px solid var(--border-color)}.existing-relationships-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--s-4)}.relationships-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-3)}.relationship-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--s-4);padding:var(--s-4);background:var(--bg-muted);border-radius:var(--r-md);border:1px solid var(--border-color);transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.relationship-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(59,127,111,.1),transparent);transition:left .5s ease}.relationship-item[_ngcontent-%COMP%]:hover:before{left:100%}.relationship-item[_ngcontent-%COMP%]:hover{background:var(--bg-card);box-shadow:var(--shadow-md);transform:translate(8px) scale(1.02);border-color:var(--accent-soft)}.relationship-item.is-current[_ngcontent-%COMP%]{border-left:4px solid var(--accent);background:var(--accent-soft)}.relationship-item.is-current[_ngcontent-%COMP%]:hover{background:var(--bg-card)}.relationship-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--s-2)}.relationship-main[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);flex-wrap:wrap}.person-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary)}.relationship-type[_ngcontent-%COMP%]{padding:var(--s-1) var(--s-3);background:var(--accent-soft);color:var(--accent);border-radius:var(--r-full);font-size:.75rem;font-weight:500;text-transform:capitalize}.relationship-arrow[_ngcontent-%COMP%]{color:var(--text-muted)}.relationship-meta[_ngcontent-%COMP%], .relationship-notes[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-1)}.btn-icon[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;padding:0;border:none;border-radius:var(--r-md);cursor:pointer;transition:all .2s ease;background:transparent}.btn-icon[_ngcontent-%COMP%]:hover{background:var(--bg-muted);transform:scale(1.1)}.btn-icon.btn-danger[_ngcontent-%COMP%]{color:var(--danger)}.btn-icon.btn-danger[_ngcontent-%COMP%]:hover{background:#b91c1c1a}.btn-icon[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;pointer-events:none}.btn.is-loading[_ngcontent-%COMP%]   .material-icons.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media(max-width:767px){.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]{min-width:100%}.swap-button-container[_ngcontent-%COMP%]{margin:var(--s-2) 0}.relationship-main[_ngcontent-%COMP%], .relationship-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.relationship-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.01)}.btn-icon[_ngcontent-%COMP%]{align-self:flex-end}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}.suggestions-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto}}@media(min-width:768px)and (max-width:1023px){.search-box[_ngcontent-%COMP%]{min-width:200px}}.btn-icon[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--accent);outline-offset:2px}.relationships-list[_ngcontent-%COMP%]:empty:after{content:"No relationships created yet";display:block;padding:var(--s-8);text-align:center;color:var(--text-muted);font-style:italic}'],changeDetection:0})};function zA(n,e){n&1&&(u(0,"a",8)(1,"span",4),l(2,"person_add"),d(),l(3," Add Family Members "),d())}function GA(n,e){if(n&1&&(u(0,"div",5)(1,"span",7),l(2,"people_outline"),d(),u(3,"h2"),l(4,"Need More People"),d(),u(5,"p",2),l(6,"You need at least 2 family members to create relationships."),d(),C(7,zA,4,0,"a",8),d()),n&2){let t=m();p(7),b(t.isAdmin()?7:-1)}}function WA(n,e){if(n&1){let t=N();u(0,"app-relationship-manager",9),I("relationshipCreated",function(r){x(t);let o=m();return D(o.handleRelationshipCreated(r))})("relationshipDeleted",function(r){x(t);let o=m();return D(o.handleRelationshipDeleted(r))}),d()}if(n&2){let t=m();H("people",t.people())("existingRelationships",t.relationships())("isAdmin",t.isAdmin())}}var zd=class n{personService=_(Se);relationshipService=_(Rn);authService=_(Le);isAdmin=this.authService.isAdmin;people=S(()=>this.personService.people());relationships=S(()=>this.relationshipService.relationships());relationshipStats=S(()=>{let e=this.relationships().length,t=this.people().length;return e===0?`${t} people, no relationships defined`:`${e} relationships connecting ${t} people`});handleRelationshipCreated(e){this.relationshipService.createRelationship(e.from.fromPersonId,e.from.toPersonId,e.from.type)}handleRelationshipDeleted(e){this.relationshipService.deleteRelationship(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-relationship-manager-page"]],decls:13,vars:2,consts:[[1,"container"],[1,"page-header","flex","flex-col","md-flex-row","items-start","md-items-center","justify-between","gap-4"],[1,"text-muted"],["routerLink","/family-tree",1,"btn","btn-outline","flex","items-center","gap-2"],[1,"material-icons"],[1,"empty-state","card"],[3,"people","existingRelationships","isAdmin"],[1,"material-icons","icon-xl"],["routerLink","/people/add",1,"btn","btn-primary","btn-lg","mt-4"],[3,"relationshipCreated","relationshipDeleted","people","existingRelationships","isAdmin"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"Manage Relationships"),d(),u(5,"p",2),l(6),d()(),u(7,"a",3)(8,"span",4),l(9,"account_tree"),d(),l(10," View Family Tree "),d()(),C(11,GA,8,1,"div",5)(12,WA,1,3,"app-relationship-manager",6),d()),t&2&&(p(6),k(i.relationshipStats()),p(5),b(i.people().length<2?11:12))},dependencies:[Hd,Ce],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--s-12)}.empty-state[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:4rem;color:var(--primary-lighter);margin-bottom:var(--s-4);display:block}.btn[_ngcontent-%COMP%]{text-decoration:none;display:inline-flex;align-items:center;gap:var(--s-2);padding:var(--s-3) var(--s-4)}.btn-lg[_ngcontent-%COMP%]{padding:var(--s-4) var(--s-6)}.mt-4[_ngcontent-%COMP%]{margin-top:var(--s-4)}"],changeDetection:0})};var Gd=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-not-found"]],decls:12,vars:0,consts:[[1,"container"],[1,"not-found-container"],[1,"text-muted","mb-4"],["routerLink","/",1,"btn","btn-primary","flex","items-center","gap-2"],[1,"material-icons"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"h1"),l(3,"404"),d(),u(4,"p"),l(5,"Page not found"),d(),u(6,"p",2),l(7,"The page you're looking for doesn't exist or has been moved."),d(),u(8,"a",3)(9,"span",4),l(10,"home"),d(),l(11," Back to Home "),d()()())},dependencies:[Ce],styles:[".not-found-container[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;min-height:400px;display:flex;flex-direction:column;align-items:center;justify-content:center}h1[_ngcontent-%COMP%]{font-size:4rem;margin:0;color:var(--accent)}p[_ngcontent-%COMP%]{font-size:1.25rem;margin:.5rem 0}.mb-4[_ngcontent-%COMP%]{margin-bottom:2rem}.btn[_ngcontent-%COMP%]{text-decoration:none;display:inline-flex;padding:var(--s-3) var(--s-4)}"],changeDetection:0})};var KC=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"dashboard",component:nd,title:"Dashboard - ThaleMarina Siri"},{path:"family-tree",component:od,title:"Family Tree - ThaleMarina Siri"},{path:"people",component:Md,title:"People - ThaleMarina Siri"},{path:"people/add",component:Pd,title:"Add Member - ThaleMarina Siri"},{path:"people/:id",component:Id,title:"Member Profile - ThaleMarina Siri"},{path:"people/:id/edit",component:Td,title:"Edit Member - ThaleMarina Siri"},{path:"relationships",component:zd,title:"Relationships - ThaleMarina Siri"},{path:"stories",component:Nd,title:"Stories - ThaleMarina Siri"},{path:"stories/new",component:ra,title:"Create Story - ThaleMarina Siri"},{path:"stories/:id",component:Rd,title:"Story - ThaleMarina Siri"},{path:"stories/:id/edit",component:ra,title:"Edit Story - ThaleMarina Siri"},{path:"media",component:jd,title:"Media - ThaleMarina Siri"},{path:"timeline",component:$d,title:"Timeline - ThaleMarina Siri"},{path:"**",component:Gd,title:"404 - ThaleMarina Siri"}];var Wd=class n{injector;toastService=null;router=null;constructor(e){this.injector=e}handleError(e){this.toastService||(this.toastService=this.injector.get(et)),this.router||(this.router=this.injector.get(Me));let t=this.getErrorMessage(e),i=this.getErrorStack(e),r=this.getStatusCode(e);xt.production?this.logErrorToServer(e,t,i,r):this.logErrorToDev(e,t,i,r),this.handleErrorScenario(r,t,e)}getErrorMessage(e){return e instanceof Error?e.message:typeof e=="string"?e:e?.error?.message?e.error.message:e?.message?e.message:"An unexpected error occurred"}getErrorStack(e){return e instanceof Error&&e.stack||""}getStatusCode(e){return e?.status||e?.statusCode||0}handleErrorScenario(e,t,i){switch(e){case 401:this.toastService&&this.toastService.error("Session expired. Please login again."),this.router&&this.router.navigate(["/login"]);break;case 403:this.toastService&&this.toastService.error("You do not have permission to perform this action.");break;case 404:this.toastService&&this.toastService.error("Resource not found.");break;case 409:this.toastService&&this.toastService.error("Data was modified. Please refresh and try again.");break;case 500:this.toastService&&this.toastService.error("Server error. Please try again later.");break;case 503:this.toastService&&this.toastService.error("Service temporarily unavailable. Please try again.");break;default:t&&!t.includes("Network")&&this.toastService&&this.toastService.error(t);break}}logErrorToServer(e,t,i,r){let o={timestamp:new Date().toISOString(),message:t,stack:i,statusCode:r,url:window.location.href,userAgent:navigator.userAgent,isDev:!1};console.error("[ERROR LOG]",o)}logErrorToDev(e,t,i,r){console.group("\u274C Global Error Handler"),console.error("Message:",t),console.error("Status Code:",r),console.error("Stack:",i),console.error("Full Error Object:",e),console.groupEnd()}static \u0275fac=function(t){return new(t||n)(Q(pt))};static \u0275prov=F({token:n,factory:n.\u0275fac})};var XC={providers:[Sp(),Xm(KC),bm(Em()),{provide:Dt,useClass:Wd}]};var qd=class n{currentPersonIdSignal=E(null);historyStack=E([]);forwardStack=E([]);breadcrumbTrail=E([]);currentPersonId=this.currentPersonIdSignal.asReadonly();canGoBack=S(()=>this.historyStack().length>0);canGoForward=S(()=>this.forwardStack().length>0);breadcrumbs=S(()=>this.breadcrumbTrail());navigateTo(e,t){let i=this.currentPersonIdSignal();if(i&&i!==e){let r=this.historyStack();this.historyStack.set([...r,i])}if(this.forwardStack.set([]),this.currentPersonIdSignal.set(e),t){let r=this.breadcrumbTrail();this.breadcrumbTrail.set([...r,{id:e,name:t}])}}goBack(){let e=this.historyStack();if(e.length===0)return;let t=this.currentPersonIdSignal(),i=e[e.length-1];if(t){let r=this.forwardStack();this.forwardStack.set([...r,t])}this.historyStack.set(e.slice(0,-1)),this.currentPersonIdSignal.set(i)}goForward(){let e=this.forwardStack();if(e.length===0)return;let t=this.currentPersonIdSignal(),i=e[e.length-1];if(t){let r=this.historyStack();this.historyStack.set([...r,t])}this.forwardStack.set(e.slice(0,-1)),this.currentPersonIdSignal.set(i)}clearHistory(){this.historyStack.set([]),this.forwardStack.set([]),this.breadcrumbTrail.set([])}getBreadcrumbs(){return this.breadcrumbTrail()}navigateToBreadcrumb(e){let t=this.breadcrumbTrail();if(e<0||e>=t.length)return;let i=t[e];this.breadcrumbTrail.set(t.slice(0,e+1)),this.currentPersonIdSignal.set(i.id)}getHistorySize(){return this.historyStack().length}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var qA=(n,e)=>e.id;function YA(n,e){n&1&&l(0," check_circle ")}function QA(n,e){n&1&&l(0," error ")}function ZA(n,e){n&1&&l(0," warning ")}function KA(n,e){n&1&&l(0," info ")}function XA(n,e){if(n&1){let t=N();v(0,"div",2)(1,"div",3)(2,"span",4),C(3,YA,1,0)(4,QA,1,0)(5,ZA,1,0)(6,KA,1,0),g(),v(7,"span",5),l(8),g()(),v(9,"button",6),B("click",function(){let r=x(t).$implicit,o=m();return D(o.toastService.dismiss(r.id))}),v(10,"span",4),l(11,"close"),g()()()}if(n&2){let t,i=e.$implicit;Di("toast-"+i.type),te("aria-live",i.type==="error"?"assertive":"polite")("aria-atomic",!0),p(3),b((t=i.type)==="success"?3:t==="error"?4:t==="warning"?5:t==="info"?6:-1),p(5),k(i.message),p(),te("aria-label","Close "+i.type+" notification: "+i.message)}}var Yd=class n{toastService=_(et);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-toast-container"]],decls:3,vars:0,consts:[["role","region","aria-live","polite","aria-label","Notifications",1,"toast-container"],["role","alert",1,"toast",3,"class"],["role","alert",1,"toast"],[1,"toast-content"],["aria-hidden","true",1,"material-icons","icon-sm"],[1,"toast-message"],["type","button","aria-label","Close notification",1,"toast-close",3,"click"]],template:function(t,i){t&1&&(v(0,"div",0),K(1,XA,12,7,"div",1,qA),g()),t&2&&(p(),X(i.toastService.toasts()))},styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;top:var(--s-4);right:var(--s-4);z-index:9999;display:flex;flex-direction:column;gap:var(--s-2);max-width:400px;pointer-events:none}.toast[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--s-3);padding:var(--s-3) var(--s-4);border-radius:var(--r-md);box-shadow:var(--shadow-lg);background:#fff;border-left:4px solid;pointer-events:auto;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.toast-success[_ngcontent-%COMP%]{border-left-color:var(--accent);background:#f0fdf4}.toast-success[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--accent)}.toast-success[_ngcontent-%COMP%]   .toast-message[_ngcontent-%COMP%]{color:var(--accent);font-weight:500}.toast-error[_ngcontent-%COMP%]{border-left-color:var(--danger);background:#fef2f2}.toast-error[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--danger)}.toast-error[_ngcontent-%COMP%]   .toast-message[_ngcontent-%COMP%]{color:var(--danger);font-weight:500}.toast-warning[_ngcontent-%COMP%]{border-left-color:#f59e0b;background:#fffbeb}.toast-warning[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#f59e0b}.toast-warning[_ngcontent-%COMP%]   .toast-message[_ngcontent-%COMP%]{color:#d97706;font-weight:500}.toast-info[_ngcontent-%COMP%]{border-left-color:var(--primary);background:#f5f3ff}.toast-info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--primary)}.toast-info[_ngcontent-%COMP%]   .toast-message[_ngcontent-%COMP%]{color:var(--primary);font-weight:500}.toast-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);flex:1}.toast-message[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-primary);line-height:1.4}.toast-close[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;padding:var(--s-1);display:flex;align-items:center;justify-content:center;border-radius:var(--r-sm);color:var(--text-muted);transition:all .2s}.toast-close[_ngcontent-%COMP%]:hover{background:#0000000d;color:var(--text-primary)}@media(max-width:768px){.toast-container[_ngcontent-%COMP%]{left:var(--s-4);right:var(--s-4);max-width:none}}"],changeDetection:0})};var JC=()=>({exact:!0});function JA(n,e){if(n&1){let t=N();u(0,"button",34),I("click",function(){x(t);let r=m();return D(r.handleAdminLogout())}),u(1,"span",10),l(2,"logout"),d(),u(3,"span"),l(4,"Logout Admin"),d()()}}function eR(n,e){if(n&1){let t=N();u(0,"button",35),I("click",function(){x(t);let r=m();return D(r.openAdminLogin())}),u(1,"span",10),l(2,"admin_panel_settings"),d(),u(3,"span"),l(4,"Sign in as Admin"),d()()}}function tR(n,e){n&1&&(u(0,"span",20)(1,"span",10),l(2,"verified_user"),d()())}function nR(n,e){if(n&1){let t=N();u(0,"button",36),I("click",function(){x(t);let r=m();return D(r.openAdminLogin())}),u(1,"span",10),l(2,"admin_panel_settings"),d()()}}function iR(n,e){if(n&1){let t=N();u(0,"button",46),I("click",function(){x(t);let r=m(2);return r.handleAdminLogout(),D(r.closeMenu())}),u(1,"span",39),l(2,"logout"),d(),u(3,"span"),l(4,"Logout Admin"),d()()}}function rR(n,e){if(n&1){let t=N();u(0,"button",46),I("click",function(){x(t);let r=m(2);return r.openAdminLogin(),D(r.closeMenu())}),u(1,"span",39),l(2,"admin_panel_settings"),d(),u(3,"span"),l(4,"Sign in as Admin"),d()()}}function oR(n,e){if(n&1){let t=N();u(0,"nav",24)(1,"a",37),I("click",function(){x(t);let r=m();return D(r.closeMenu())}),u(2,"span",23),l(3,"dashboard"),d(),u(4,"span"),l(5,"Dashboard"),d()(),u(6,"a",38),I("click",function(){x(t);let r=m();return D(r.closeMenu())}),u(7,"span",39),l(8,"account_tree"),d(),u(9,"span"),l(10,"Family Tree"),d()(),u(11,"a",40),I("click",function(){x(t);let r=m();return D(r.closeMenu())}),u(12,"span",39),l(13,"people"),d(),u(14,"span"),l(15,"People"),d()(),u(16,"a",41),I("click",function(){x(t);let r=m();return D(r.closeMenu())}),u(17,"span",39),l(18,"link"),d(),u(19,"span"),l(20,"Relationships"),d()(),u(21,"a",42),I("click",function(){x(t);let r=m();return D(r.closeMenu())}),u(22,"span",39),l(23,"menu_book"),d(),u(24,"span"),l(25,"Stories"),d()(),u(26,"a",43),I("click",function(){x(t);let r=m();return D(r.closeMenu())}),u(27,"span",39),l(28,"photo_library"),d(),u(29,"span"),l(30,"Media"),d()(),u(31,"a",44),I("click",function(){x(t);let r=m();return D(r.closeMenu())}),u(32,"span",39),l(33,"timeline"),d(),u(34,"span"),l(35,"Timeline"),d()(),C(36,iR,5,0,"button",45)(37,rR,5,0,"button",45),d()}if(n&2){let t=m();p(),H("routerLinkActiveOptions",wi(2,JC)),p(35),b(t.isAdmin()?36:37)}}function sR(n,e){if(n&1&&(u(0,"div",58)(1,"span",10),l(2,"error"),d(),l(3),d()),n&2){let t=m(2);p(3),T(" ",t.loginError()," ")}}function aR(n,e){if(n&1){let t=N();u(0,"div",47),I("click",function(){x(t);let r=m();return D(r.closeAdminLogin())}),u(1,"dialog",48),I("click",function(r){return x(t),D(r.stopPropagation())}),u(2,"div",49)(3,"h2",50)(4,"span",23),l(5,"admin_panel_settings"),d(),l(6," Admin Login "),d(),u(7,"button",51),I("click",function(){x(t);let r=m();return D(r.closeAdminLogin())}),u(8,"span",23),l(9,"close"),d()()(),u(10,"form",52),I("ngSubmit",function(){x(t);let r=m();return D(r.handleAdminLogin())}),u(11,"div",53)(12,"label",54),l(13,"Username"),d(),u(14,"input",55),qt("ngModelChange",function(r){x(t);let o=m();return mn(o.adminUsername,r)||(o.adminUsername=r),D(r)}),d()(),u(15,"div",53)(16,"label",56),l(17,"Password"),d(),u(18,"input",57),qt("ngModelChange",function(r){x(t);let o=m();return mn(o.adminPassword,r)||(o.adminPassword=r),D(r)}),d()(),C(19,sR,4,1,"div",58),u(20,"div",59)(21,"button",60)(22,"span",10),l(23,"login"),d(),l(24," Sign In "),d(),u(25,"button",61),I("click",function(){x(t);let r=m();return D(r.closeAdminLogin())}),l(26," Cancel "),d()()(),u(27,"p",62),l(28," Admin access enables adding, editing, and deleting content. "),d()()()}if(n&2){let t=m();p(14),Wt("ngModel",t.adminUsername),p(4),Wt("ngModel",t.adminPassword),p(),b(t.loginError()?19:-1),p(2),H("disabled",t.loading())}}function lR(n,e){if(n&1){let t=N();u(0,"div",26)(1,"span",10),l(2,"visibility"),d(),l(3," View-only mode \u2014 "),u(4,"button",63),I("click",function(){x(t);let r=m();return D(r.openAdminLogin())}),l(5,"Sign in as Admin"),d(),l(6," to edit "),d()}}var Qd=class n{personService=_(Se);relationshipService=_(Rn);mediaService=_(be);navigationService=_(qd);storiesService=_(Xt);timelineService=_(Fn);authService=_(Le);title=E("ThaleMarina Siri");subtitle=E("Family Tree & Stories");totalPeople=S(()=>this.personService.people().length);livingPeople=S(()=>this.personService.livingPeople().length);totalRelationships=S(()=>this.relationshipService.relationships().length);totalMedia=S(()=>this.mediaService.media().length);isMenuOpen=E(!1);showAdminLogin=E(!1);adminUsername=E("");adminPassword=E("");loginError=E("");loading=E(!1);isAdmin=this.authService.isAdmin;toggleMenu(){this.isMenuOpen.update(e=>!e)}closeMenu(){this.isMenuOpen.set(!1)}openAdminLogin(){this.showAdminLogin.set(!0),this.adminUsername.set(""),this.adminPassword.set(""),this.loginError.set("")}closeAdminLogin(){this.showAdminLogin.set(!1)}handleAdminLogin(){this.loading.set(!0),this.authService.loginAsAdmin(this.adminUsername(),this.adminPassword()).subscribe({next:e=>{this.loading.set(!1),e?this.closeAdminLogin():this.loginError.set("Invalid username or password")},error:e=>{this.loading.set(!1),this.loginError.set("Login failed. Please try again."),console.error("Admin login error:",e)}})}handleAdminLogout(){this.authService.logoutAdmin()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["app-root"]],decls:77,vars:14,consts:[[1,"app-container"],["href","#main-content",1,"skip-link"],["role","banner",1,"app-header"],[1,"container"],[1,"flex","items-center","justify-between","py-4"],[1,"brand"],[1,"m-0"],[1,"text-sm","text-muted","m-0"],["role","navigation","aria-label","Main navigation",1,"desktop-nav","hidden","md-flex","gap-4","items-center"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],["aria-hidden","true",1,"material-icons","icon-sm"],["routerLink","/family-tree","routerLinkActive","active",1,"nav-link"],["routerLink","/people","routerLinkActive","active",1,"nav-link"],["routerLink","/relationships","routerLinkActive","active",1,"nav-link"],["routerLink","/stories","routerLinkActive","active",1,"nav-link"],["routerLink","/media","routerLinkActive","active",1,"nav-link"],["routerLink","/timeline","routerLinkActive","active",1,"nav-link"],["aria-label","Sign out from admin mode",1,"btn","btn-outline","admin-btn"],["aria-label","Sign in as admin",1,"btn","btn-outline","admin-btn"],[1,"flex","items-center","gap-2"],["title","Admin mode active","aria-label","Admin mode active",1,"admin-badge","md-hidden"],["aria-label","Admin login",1,"btn","btn-outline","md-hidden"],["aria-label","Toggle navigation menu",1,"btn","btn-outline","md-hidden",3,"click"],["aria-hidden","true",1,"material-icons"],["role","navigation","aria-label","Mobile navigation",1,"mobile-nav","md-hidden"],["role","presentation",1,"modal-overlay"],["role","status","aria-live","polite",1,"view-only-banner"],["id","main-content","role","main",1,"app-main"],["role","contentinfo",1,"app-footer"],[1,"flex","flex-col","md-flex-row","items-center","justify-between","gap-4","py-6"],[1,"flex","items-center","gap-4","text-sm","text-muted"],["aria-label","Total people in database"],["aria-hidden","true"],["aria-label","Total relationships in database"],["aria-label","Sign out from admin mode",1,"btn","btn-outline","admin-btn",3,"click"],["aria-label","Sign in as admin",1,"btn","btn-outline","admin-btn",3,"click"],["aria-label","Admin login",1,"btn","btn-outline","md-hidden",3,"click"],["routerLink","/dashboard","routerLinkActive","active",1,"mobile-nav-link",3,"click","routerLinkActiveOptions"],["routerLink","/family-tree","routerLinkActive","active",1,"mobile-nav-link",3,"click"],[1,"material-icons"],["routerLink","/people","routerLinkActive","active",1,"mobile-nav-link",3,"click"],["routerLink","/relationships","routerLinkActive","active",1,"mobile-nav-link",3,"click"],["routerLink","/stories","routerLinkActive","active",1,"mobile-nav-link",3,"click"],["routerLink","/media","routerLinkActive","active",1,"mobile-nav-link",3,"click"],["routerLink","/timeline","routerLinkActive","active",1,"mobile-nav-link",3,"click"],[1,"mobile-nav-link"],[1,"mobile-nav-link",3,"click"],["role","presentation",1,"modal-overlay",3,"click"],["open","",1,"modal-content","card",3,"click"],[1,"modal-header","flex","items-center","justify-between","mb-4"],[1,"m-0","flex","items-center","gap-2"],["aria-label","Close login dialog",1,"btn","btn-outline",3,"click"],["aria-label","Admin login form",1,"admin-login-form",3,"ngSubmit"],[1,"form-group","mb-4"],["for","admin-username",1,"form-label"],["id","admin-username","type","text","name","username","required","","autocomplete","username","placeholder","Enter admin username","aria-required","true",1,"form-input",3,"ngModelChange","ngModel"],["for","admin-password",1,"form-label"],["id","admin-password","type","password","name","password","required","","autocomplete","current-password","placeholder","Enter admin password","aria-required","true",1,"form-input",3,"ngModelChange","ngModel"],["role","alert",1,"error-message","mb-4"],[1,"form-actions","flex","gap-2"],["type","submit",1,"btn","btn-primary","flex-1",3,"disabled"],["type","button",1,"btn","btn-outline",3,"click"],[1,"text-muted","text-sm","mt-4","text-center"],[1,"link-btn",3,"click"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"a",1),l(2,"Skip to main content"),d(),de(3,"app-toast-container"),u(4,"header",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"h1",6),l(9),d(),u(10,"p",7),l(11),d()(),u(12,"nav",8)(13,"a",9)(14,"span",10),l(15,"dashboard"),d(),u(16,"span"),l(17,"Dashboard"),d()(),u(18,"a",11)(19,"span",10),l(20,"account_tree"),d(),u(21,"span"),l(22,"Family Tree"),d()(),u(23,"a",12)(24,"span",10),l(25,"people"),d(),u(26,"span"),l(27,"People"),d()(),u(28,"a",13)(29,"span",10),l(30,"link"),d(),u(31,"span"),l(32,"Relationships"),d()(),u(33,"a",14)(34,"span",10),l(35,"menu_book"),d(),u(36,"span"),l(37,"Stories"),d()(),u(38,"a",15)(39,"span",10),l(40,"photo_library"),d(),u(41,"span"),l(42,"Media"),d()(),u(43,"a",16)(44,"span",10),l(45,"timeline"),d(),u(46,"span"),l(47,"Timeline"),d()(),C(48,JA,5,0,"button",17)(49,eR,5,0,"button",18),d(),u(50,"div",19),C(51,tR,3,0,"span",20)(52,nR,3,0,"button",21),u(53,"button",22),I("click",function(){return i.toggleMenu()}),u(54,"span",23),l(55),d()()()(),C(56,oR,38,3,"nav",24),d()(),C(57,aR,29,4,"div",25),C(58,lR,7,0,"div",26),u(59,"main",27),de(60,"router-outlet"),d(),u(61,"footer",28)(62,"div",3)(63,"div",29)(64,"p",7),l(65," \xA9 2025 ThaleMarina Siri - Family Tree & Stories "),d(),u(66,"div",30)(67,"span",31),l(68),d(),u(69,"span",32),l(70,"\u2022"),d(),u(71,"span",33),l(72),d(),u(73,"span",32),l(74,"\u2022"),d(),u(75,"span"),l(76),d()()()()()()),t&2&&(p(9),k(i.title()),p(2),k(i.subtitle()),p(2),H("routerLinkActiveOptions",wi(13,JC)),p(35),b(i.isAdmin()?48:49),p(3),b(i.isAdmin()?51:52),p(2),te("aria-expanded",i.isMenuOpen()),p(2),k(i.isMenuOpen()?"close":"menu"),p(),b(i.isMenuOpen()?56:-1),p(),b(i.showAdminLogin()?57:-1),p(),b(i.isAdmin()?-1:58),p(10),T("",i.totalPeople()," People"),p(4),T("",i.totalRelationships()," Relationships"),p(4),T("",i.totalMedia()," Media Items"))},dependencies:[Hs,Ce,Km,Yd,Ai,go,Ln,Ni,ho,ia,ea,dh],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column}.skip-link[_ngcontent-%COMP%]{position:absolute;top:-40px;left:0;background:var(--primary);color:#fff;padding:8px;text-decoration:none;z-index:100;border-radius:0 0 4px;font-weight:700}.skip-link[_ngcontent-%COMP%]:focus{top:0}.app-header[_ngcontent-%COMP%]{background:var(--bg-card);border-bottom:1px solid var(--border-color);position:sticky;top:0;z-index:100;box-shadow:var(--shadow-sm)}.brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:var(--fw-bold);color:var(--primary)}.desktop-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-4)}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);padding:var(--s-2) var(--s-3);border-radius:var(--r-md);color:var(--text-muted);text-decoration:none;transition:all .2s ease;font-weight:var(--fw-medium);position:relative}.nav-link[_ngcontent-%COMP%]:hover{background:var(--primary-lighter);color:var(--primary);transform:translateY(-1px)}.nav-link[_ngcontent-%COMP%]:focus{outline:2px solid var(--primary);outline-offset:2px}.nav-link.active[_ngcontent-%COMP%]{background:var(--primary);color:#fff;font-weight:600}.mobile-nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-2);padding:var(--s-4) 0;border-top:1px solid var(--border-color);margin-top:var(--s-4);animation:_ngcontent-%COMP%_slideDown .3s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.mobile-nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-3);padding:var(--s-3) var(--s-4);border-radius:var(--r-md);color:var(--text-muted);text-decoration:none;transition:all .2s ease;font-weight:500;min-height:44px}.mobile-nav-link[_ngcontent-%COMP%]:hover{background:var(--primary-lighter);color:var(--primary)}.mobile-nav-link.active[_ngcontent-%COMP%]{background:var(--primary);color:#fff;font-weight:600}.app-main[_ngcontent-%COMP%]{flex:1;padding:var(--s-8) 0;background:var(--bg-main)}.app-footer[_ngcontent-%COMP%]{background:var(--bg-card);border-top:1px solid var(--border-color);margin-top:auto}.admin-btn[_ngcontent-%COMP%]{margin-left:var(--s-4);border-color:var(--accent);color:var(--accent)}.admin-btn[_ngcontent-%COMP%]:hover{background:var(--accent);color:#fff}.admin-badge[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;background:var(--accent);color:#fff;border-radius:var(--r-full)}.view-only-banner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--s-2);padding:var(--s-2) var(--s-4);background:var(--bg-muted);color:var(--text-muted);font-size:.875rem;border-bottom:1px solid var(--border-color)}.link-btn[_ngcontent-%COMP%]{background:none;border:none;color:var(--accent);cursor:pointer;text-decoration:underline;font-size:inherit;padding:0}.link-btn[_ngcontent-%COMP%]:hover{color:var(--accent-hover)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:var(--s-4);animation:_ngcontent-%COMP%_fadeIn .2s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal-content[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:var(--s-6);animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--s-2)}.form-label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary)}.form-input[_ngcontent-%COMP%]{width:100%;padding:var(--s-3) var(--s-4);border:1px solid var(--border-color);border-radius:var(--r-md);font-size:1rem;background:var(--bg-card);color:var(--text-primary);transition:border-color .2s ease,box-shadow .2s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-soft)}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--s-2);padding:var(--s-3);background:var(--danger-light, #fee2e2);color:var(--danger, #dc2626);border-radius:var(--r-md);font-size:.875rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--s-2)}.flex-1[_ngcontent-%COMP%]{flex:1}@media(max-width:767px){.brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.app-main[_ngcontent-%COMP%]{padding:var(--s-6) 0}.view-only-banner[_ngcontent-%COMP%]{font-size:.8rem;padding:var(--s-2)}}"]})};mm(Qd,XC).catch(n=>console.error(n));
